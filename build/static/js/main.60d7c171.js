/*! For license information please see main.60d7c171.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},64:function(e){e.exports=function(){"use strict";function e(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function t(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n(t,n){return t.get(e(t,n))}function r(e,n,r){t(e,n),n.set(e,r)}function i(t,n,r){return t.set(e(t,n),r),r}const s=100,a={},o=()=>{a.previousActiveElement instanceof HTMLElement?(a.previousActiveElement.focus(),a.previousActiveElement=null):document.body&&document.body.focus()},l=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;a.restoreFocusTimeout=setTimeout((()=>{o(),t()}),s),window.scrollTo(n,r)})),c="swal2-",u=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce(((e,t)=>(e[t]=c+t,e)),{}),d=["success","warning","info","question","error"].reduce(((e,t)=>(e[t]=c+t,e)),{}),h="SweetAlert2:",f=e=>e.charAt(0).toUpperCase()+e.slice(1),m=e=>{console.warn(`${h} ${"object"===typeof e?e.join(" "):e}`)},p=e=>{console.error(`${h} ${e}`)},g=[],y=e=>{g.includes(e)||(g.push(e),m(e))},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},b=e=>"function"===typeof e?e():e,x=e=>e&&"function"===typeof e.toPromise,w=e=>x(e)?e.toPromise():Promise.resolve(e),_=e=>e&&Promise.resolve(e)===e,N=()=>document.body.querySelector(`.${u.container}`),j=e=>{const t=N();return t?t.querySelector(e):null},S=e=>j(`.${e}`),E=()=>S(u.popup),C=()=>S(u.icon),k=()=>S(u["icon-content"]),T=()=>S(u.title),I=()=>S(u["html-container"]),A=()=>S(u.image),O=()=>S(u["progress-steps"]),P=()=>S(u["validation-message"]),M=()=>j(`.${u.actions} .${u.confirm}`),R=()=>j(`.${u.actions} .${u.cancel}`),D=()=>j(`.${u.actions} .${u.deny}`),L=()=>S(u["input-label"]),F=()=>j(`.${u.loader}`),U=()=>S(u.actions),B=()=>S(u.footer),V=()=>S(u["timer-progress-bar"]),$=()=>S(u.close),z='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',q=()=>{const e=E();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")||"0"),r=parseInt(t.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=e.querySelectorAll(z),i=Array.from(r).filter((e=>"-1"!==e.getAttribute("tabindex")));return[...new Set(n.concat(i))].filter((e=>ue(e)))},H=()=>Y(document.body,u.shown)&&!Y(document.body,u["toast-shown"])&&!Y(document.body,u["no-backdrop"]),W=()=>{const e=E();return!!e&&Y(e,u.toast)},K=()=>{const e=E();return!!e&&e.hasAttribute("data-loading")},G=(e,t)=>{if(e.textContent="",t){const n=(new DOMParser).parseFromString(t,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((t=>{e.appendChild(t)}));const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},Y=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},X=(e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(u).includes(n)||Object.values(d).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))},Z=(e,t,n)=>{if(X(e,t),!t.customClass)return;const r=t.customClass[n];r&&("string"===typeof r||r.forEach?te(e,r):m(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`))},Q=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${u.popup} > .${u[t]}`);case"checkbox":return e.querySelector(`.${u.popup} > .${u.checkbox} input`);case"radio":return e.querySelector(`.${u.popup} > .${u.radio} input:checked`)||e.querySelector(`.${u.popup} > .${u.radio} input:first-child`);case"range":return e.querySelector(`.${u.popup} > .${u.range} input`);default:return e.querySelector(`.${u.popup} > .${u.input}`)}},J=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},ee=(e,t,n)=>{e&&t&&("string"===typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},te=(e,t)=>{ee(e,t,!0)},ne=(e,t)=>{ee(e,t,!1)},re=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const e=n[r];if(e instanceof HTMLElement&&Y(e,t))return e}},ie=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"===typeof n?`${n}px`:n):e.style.removeProperty(t)},se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},ae=e=>{e&&(e.style.display="none")},oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver((()=>{ce(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},le=(e,t,n,r)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,r)},ce=function(e,t){t?se(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):ae(e)},ue=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),de=()=>!ue(M())&&!ue(D())&&!ue(R()),he=e=>!!(e.scrollHeight>e.clientHeight),fe=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},me=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=V();n&&ue(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"}),10))},pe=()=>{const e=V();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`},ge=()=>"undefined"===typeof window||"undefined"===typeof document,ye=`\n <div aria-labelledby="${u.title}" aria-describedby="${u["html-container"]}" class="${u.popup}" tabindex="-1">\n   <button type="button" class="${u.close}"></button>\n   <ul class="${u["progress-steps"]}"></ul>\n   <div class="${u.icon}"></div>\n   <img class="${u.image}" />\n   <h2 class="${u.title}" id="${u.title}"></h2>\n   <div class="${u["html-container"]}" id="${u["html-container"]}"></div>\n   <input class="${u.input}" id="${u.input}" />\n   <input type="file" class="${u.file}" />\n   <div class="${u.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${u.select}" id="${u.select}"></select>\n   <div class="${u.radio}"></div>\n   <label class="${u.checkbox}">\n     <input type="checkbox" id="${u.checkbox}" />\n     <span class="${u.label}"></span>\n   </label>\n   <textarea class="${u.textarea}" id="${u.textarea}"></textarea>\n   <div class="${u["validation-message"]}" id="${u["validation-message"]}"></div>\n   <div class="${u.actions}">\n     <div class="${u.loader}"></div>\n     <button type="button" class="${u.confirm}"></button>\n     <button type="button" class="${u.deny}"></button>\n     <button type="button" class="${u.cancel}"></button>\n   </div>\n   <div class="${u.footer}"></div>\n   <div class="${u["timer-progress-bar-container"]}">\n     <div class="${u["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ve=()=>{const e=N();return!!e&&(e.remove(),ne([document.documentElement,document.body],[u["no-backdrop"],u["toast-shown"],u["has-column"]]),!0)},be=()=>{a.currentInstance.resetValidationMessage()},xe=()=>{const e=E(),t=re(e,u.input),n=re(e,u.file),r=e.querySelector(`.${u.range} input`),i=e.querySelector(`.${u.range} output`),s=re(e,u.select),a=e.querySelector(`.${u.checkbox} input`),o=re(e,u.textarea);t.oninput=be,n.onchange=be,s.onchange=be,a.onchange=be,o.oninput=be,r.oninput=()=>{be(),i.value=r.value},r.onchange=()=>{be(),i.value=r.value}},we=e=>"string"===typeof e?document.querySelector(e):e,_e=e=>{const t=E();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},Ne=e=>{"rtl"===window.getComputedStyle(e).direction&&te(N(),u.rtl)},je=e=>{const t=ve();if(ge())return void p("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=u.container,t&&te(n,u["no-transition"]),G(n,ye),n.dataset.swal2Theme=e.theme;const r=we(e.target);r.appendChild(n),_e(e),Ne(r),xe()},Se=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"===typeof e?Ee(e,t):e&&G(t,e)},Ee=(e,t)=>{e.jquery?Ce(t,e):G(t,e.toString())},Ce=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ke=(e,t)=>{const n=U(),r=F();n&&r&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?se(n):ae(n),Z(n,t,"actions"),Te(n,r,t),G(r,t.loaderHtml||""),Z(r,t,"loader"))};function Te(e,t,n){const r=M(),i=D(),s=R();r&&i&&s&&(Ae(r,"confirm",n),Ae(i,"deny",n),Ae(s,"cancel",n),Ie(r,i,s,n),n.reverseButtons&&(n.toast?(e.insertBefore(s,r),e.insertBefore(i,r)):(e.insertBefore(s,t),e.insertBefore(i,t),e.insertBefore(r,t))))}function Ie(e,t,n,r){r.buttonsStyling?(te([e,t,n],u.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,te(e,u["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,te(t,u["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,te(n,u["default-outline"]))):ne([e,t,n],u.styled)}function Ae(e,t,n){const r=f(t);ce(e,n[`show${r}Button`],"inline-block"),G(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=u[t],Z(e,n,`${t}Button`)}const Oe=(e,t)=>{const n=$();n&&(G(n,t.closeButtonHtml||""),Z(n,t,"closeButton"),ce(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},Pe=(e,t)=>{const n=N();n&&(Me(n,t.backdrop),Re(n,t.position),De(n,t.grow),Z(n,t,"container"))};function Me(e,t){"string"===typeof t?e.style.background=t:t||te([document.documentElement,document.body],u["no-backdrop"])}function Re(e,t){t&&(t in u?te(e,u[t]):(m('The "position" parameter is not valid, defaulting to "center"'),te(e,u.center)))}function De(e,t){t&&te(e,u[`grow-${t}`])}var Le={innerParams:new WeakMap,domCache:new WeakMap};const Fe=["input","file","range","select","radio","checkbox","textarea"],Ue=(e,t)=>{const n=E();if(!n)return;const r=Le.innerParams.get(e),i=!r||t.input!==r.input;Fe.forEach((e=>{const r=re(n,u[e]);r&&($e(e,t.inputAttributes),r.className=u[e],i&&ae(r))})),t.input&&(i&&Be(t),ze(t))},Be=e=>{if(!e.input)return;if(!Ge[e.input])return void p(`Unexpected type of input! Expected ${Object.keys(Ge).join(" | ")}, got "${e.input}"`);const t=We(e.input);if(!t)return;const n=Ge[e.input](t,e);se(t),e.inputAutoFocus&&setTimeout((()=>{J(n)}))},Ve=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},$e=(e,t)=>{const n=E();if(!n)return;const r=Q(n,e);if(r){Ve(r);for(const e in t)r.setAttribute(e,t[e])}},ze=e=>{if(!e.input)return;const t=We(e.input);t&&Z(t,e,"input")},qe=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},He=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=u["input-label"];r.setAttribute("for",e.id),r.className=i,"object"===typeof n.customClass&&te(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},We=e=>{const t=E();if(t)return re(t,u[e]||u.input)},Ke=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:_(t)||m(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Ge={};Ge.text=Ge.email=Ge.password=Ge.number=Ge.tel=Ge.url=Ge.search=Ge.date=Ge["datetime-local"]=Ge.time=Ge.week=Ge.month=(e,t)=>(Ke(e,t.inputValue),He(e,e,t),qe(e,t),e.type=t.input,e),Ge.file=(e,t)=>(He(e,e,t),qe(e,t),e),Ge.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Ke(n,t.inputValue),n.type=t.input,Ke(r,t.inputValue),He(n,e,t),e},Ge.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");G(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return He(e,e,t),e},Ge.radio=e=>(e.textContent="",e),Ge.checkbox=(e,t)=>{const n=Q(E(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return G(r,t.inputPlaceholder||t.inputLabel),n},Ge.textarea=(e,t)=>{Ke(e,t.inputValue),qe(e,t),He(e,e,t);const n=e=>parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight);return setTimeout((()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(E()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?E().style.width=`${i}px`:ie(E(),"width",t.width)})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const Ye=(e,t)=>{const n=I();n&&(oe(n),Z(n,t,"htmlContainer"),t.html?(Se(t.html,n),se(n,"block")):t.text?(n.textContent=t.text,se(n,"block")):ae(n),Ue(e,t))},Xe=(e,t)=>{const n=B();n&&(oe(n),ce(n,t.footer,"block"),t.footer&&Se(t.footer,n),Z(n,t,"footer"))},Ze=(e,t)=>{const n=Le.innerParams.get(e),r=C();if(r){if(n&&t.icon===n.icon)return nt(r,t),void Qe(r,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(d).indexOf(t.icon))return p(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),void ae(r);se(r),nt(r,t),Qe(r,t),te(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Je)}else ae(r)}},Qe=(e,t)=>{for(const[n,r]of Object.entries(d))t.icon!==n&&ne(e,r);te(e,t.icon&&d[t.icon]),rt(e,t),Je(),Z(e,t,"icon")},Je=()=>{const e=E();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},et='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',tt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',nt=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=it(t.iconHtml):"success"===t.icon?(r=et,n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?r=tt:t.icon&&(r=it({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&G(e,r)},rt=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])le(e,n,"background-color",t.iconColor);le(e,".swal2-success-ring","border-color",t.iconColor)}},it=e=>`<div class="${u["icon-content"]}">${e}</div>`,st=(e,t)=>{const n=A();n&&(t.imageUrl?(se(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),ie(n,"width",t.imageWidth),ie(n,"height",t.imageHeight),n.className=u.image,Z(n,t,"image")):ae(n))};let at=!1,ot=0,lt=0,ct=0,ut=0;const dt=e=>{e.addEventListener("mousedown",ft),document.body.addEventListener("mousemove",mt),e.addEventListener("mouseup",pt),e.addEventListener("touchstart",ft),document.body.addEventListener("touchmove",mt),e.addEventListener("touchend",pt)},ht=e=>{e.removeEventListener("mousedown",ft),document.body.removeEventListener("mousemove",mt),e.removeEventListener("mouseup",pt),e.removeEventListener("touchstart",ft),document.body.removeEventListener("touchmove",mt),e.removeEventListener("touchend",pt)},ft=e=>{const t=E();if(e.target===t||C().contains(e.target)){at=!0;const n=gt(e);ot=n.clientX,lt=n.clientY,ct=parseInt(t.style.insetInlineStart)||0,ut=parseInt(t.style.insetBlockStart)||0,te(t,"swal2-dragging")}},mt=e=>{const t=E();if(at){let{clientX:n,clientY:r}=gt(e);t.style.insetInlineStart=`${ct+(n-ot)}px`,t.style.insetBlockStart=`${ut+(r-lt)}px`}},pt=()=>{const e=E();at=!1,ne(e,"swal2-dragging")},gt=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},yt=(e,t)=>{const n=N(),r=E();if(n&&r){if(t.toast){ie(n,"width",t.width),r.style.width="100%";const e=F();e&&r.insertBefore(e,C())}else ie(r,"width",t.width);ie(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),ae(P()),vt(r,t),t.draggable&&!t.toast?(te(r,u.draggable),dt(r)):(ne(r,u.draggable),ht(r))}},vt=(e,t)=>{const n=t.showClass||{};e.className=`${u.popup} ${ue(e)?n.popup:""}`,t.toast?(te([document.documentElement,document.body],u["toast-shown"]),te(e,u.toast)):te(e,u.modal),Z(e,t,"popup"),"string"===typeof t.customClass&&te(e,t.customClass),t.icon&&te(e,u[`icon-${t.icon}`])},bt=(e,t)=>{const n=O();if(!n)return;const{progressSteps:r,currentProgressStep:i}=t;r&&0!==r.length&&void 0!==i?(se(n),n.textContent="",i>=r.length&&m("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((e,s)=>{const a=xt(e);if(n.appendChild(a),s===i&&te(a,u["active-progress-step"]),s!==r.length-1){const e=wt(t);n.appendChild(e)}}))):ae(n)},xt=e=>{const t=document.createElement("li");return te(t,u["progress-step"]),G(t,e),t},wt=e=>{const t=document.createElement("li");return te(t,u["progress-step-line"]),e.progressStepsDistance&&ie(t,"width",e.progressStepsDistance),t},_t=(e,t)=>{const n=T();n&&(oe(n),ce(n,t.title||t.titleText,"block"),t.title&&Se(t.title,n),t.titleText&&(n.innerText=t.titleText),Z(n,t,"title"))},Nt=(e,t)=>{yt(e,t),Pe(e,t),bt(e,t),Ze(e,t),st(e,t),_t(e,t),Oe(e,t),Ye(e,t),ke(e,t),Xe(e,t);const n=E();"function"===typeof t.didRender&&n&&t.didRender(n),a.eventEmitter.emit("didRender",n)},jt=()=>ue(E()),St=()=>{var e;return null===(e=M())||void 0===e?void 0:e.click()},Et=()=>{var e;return null===(e=D())||void 0===e?void 0:e.click()},Ct=()=>{var e;return null===(e=R())||void 0===e?void 0:e.click()},kt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Tt=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},It=(e,t,n)=>{Tt(e),t.toast||(e.keydownHandler=e=>Mt(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:E(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},At=(e,t)=>{var n;const r=q();if(r.length)return(e+=t)===r.length?e=0:-1===e&&(e=r.length-1),void r[e].focus();null===(n=E())||void 0===n||n.focus()},Ot=["ArrowRight","ArrowDown"],Pt=["ArrowLeft","ArrowUp"],Mt=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Rt(t,e):"Tab"===t.key?Dt(t):[...Ot,...Pt].includes(t.key)?Lt(t.key):"Escape"===t.key&&Ft(t,e,n)))},Rt=(e,t)=>{if(!b(t.allowEnterKey))return;const n=Q(E(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;St(),e.preventDefault()}},Dt=e=>{const t=e.target,n=q();let r=-1;for(let i=0;i<n.length;i++)if(t===n[i]){r=i;break}e.shiftKey?At(r,-1):At(r,1),e.stopPropagation(),e.preventDefault()},Lt=e=>{const t=U(),n=M(),r=D(),i=R();if(!t||!n||!r||!i)return;const s=[n,r,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const a=Ot.includes(e)?"nextElementSibling":"previousElementSibling";let o=document.activeElement;if(o){for(let e=0;e<t.children.length;e++){if(o=o[a],!o)return;if(o instanceof HTMLButtonElement&&ue(o))break}o instanceof HTMLButtonElement&&o.focus()}},Ft=(e,t,n)=>{b(t.allowEscapeKey)&&(e.preventDefault(),n(kt.esc))};var Ut={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Bt=()=>{const e=N();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))}))},Vt=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},$t="undefined"!==typeof window&&!!window.GestureEvent,zt=()=>{if($t&&!Y(document.body,u.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",te(document.body,u.iosfix),qt()}},qt=()=>{const e=N();if(!e)return;let t;e.ontouchstart=e=>{t=Ht(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Ht=e=>{const t=e.target,n=N(),r=I();return!(!n||!r)&&!Wt(e)&&!Kt(e)&&(t===n||!he(n)&&t instanceof HTMLElement&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&(!he(r)||!r.contains(t)))},Wt=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Kt=e=>e.touches&&e.touches.length>1,Gt=()=>{if(Y(document.body,u.iosfix)){const e=parseInt(document.body.style.top,10);ne(document.body,u.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},Yt=()=>{const e=document.createElement("div");e.className=u["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Xt=null;const Zt=e=>{null===Xt&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(Xt=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Xt+Yt()}px`)},Qt=()=>{null!==Xt&&(document.body.style.paddingRight=`${Xt}px`,Xt=null)};function Jt(e,t,n,r){W()?cn(e,r):(l(n).then((()=>cn(e,r))),Tt(a)),$t?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),H()&&(Qt(),Gt(),Vt()),en()}function en(){ne([document.documentElement,document.body],[u.shown,u["height-auto"],u["no-backdrop"],u["toast-shown"]])}function tn(e){e=an(e);const t=Ut.swalPromiseResolve.get(this),n=nn(this);this.isAwaitingPromise?e.isDismissed||(sn(this),t(e)):n&&t(e)}const nn=e=>{const t=E();if(!t)return!1;const n=Le.innerParams.get(e);if(!n||Y(t,n.hideClass.popup))return!1;ne(t,n.showClass.popup),te(t,n.hideClass.popup);const r=N();return ne(r,n.showClass.backdrop),te(r,n.hideClass.backdrop),on(e,t,n),!0};function rn(e){const t=Ut.swalPromiseReject.get(this);sn(this),t&&t(e)}const sn=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Le.innerParams.get(e)||e._destroy())},an=e=>"undefined"===typeof e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),on=(e,t,n)=>{var r;const i=N(),s=fe(t);"function"===typeof n.willClose&&n.willClose(t),null===(r=a.eventEmitter)||void 0===r||r.emit("willClose",t),s?ln(e,t,i,n.returnFocus,n.didClose):Jt(e,i,n.returnFocus,n.didClose)},ln=(e,t,n,r,i)=>{a.swalCloseEventFinishedCallback=Jt.bind(null,e,n,r,i);const s=function(e){var n;e.target===t&&(null===(n=a.swalCloseEventFinishedCallback)||void 0===n||n.call(a),delete a.swalCloseEventFinishedCallback,t.removeEventListener("animationend",s),t.removeEventListener("transitionend",s))};t.addEventListener("animationend",s),t.addEventListener("transitionend",s)},cn=(e,t)=>{setTimeout((()=>{var n;"function"===typeof t&&t.bind(e.params)(),null===(n=a.eventEmitter)||void 0===n||n.emit("didClose"),e._destroy&&e._destroy()}))},un=e=>{let t=E();if(t||new fi,t=E(),!t)return;const n=F();W()?ae(C()):dn(t,e),se(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},dn=(e,t)=>{const n=U(),r=F();n&&r&&(!t&&ue(M())&&(t=M()),se(n),t&&(ae(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),te([e,n],u.loading))},hn=(e,t)=>{"select"===t.input||"radio"===t.input?yn(e,t):["text","email","number","tel","textarea"].some((e=>e===t.input))&&(x(t.inputValue)||_(t.inputValue))&&(un(M()),vn(e,t))},fn=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return mn(n);case"radio":return pn(n);case"file":return gn(n);default:return t.inputAutoTrim?n.value.trim():n.value}},mn=e=>e.checked?1:0,pn=e=>e.checked?e.value:null,gn=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,yn=(e,t)=>{const n=E();if(!n)return;const r=e=>{"select"===t.input?bn(n,wn(e),t):"radio"===t.input&&xn(n,wn(e),t)};x(t.inputOptions)||_(t.inputOptions)?(un(M()),w(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"===typeof t.inputOptions?r(t.inputOptions):p("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof t.inputOptions)},vn=(e,t)=>{const n=e.getInput();n&&(ae(n),w(t.inputValue).then((r=>{n.value="number"===t.input?`${parseFloat(r)||0}`:`${r}`,se(n),n.focus(),e.hideLoading()})).catch((t=>{p(`Error in inputValue promise: ${t}`),n.value="",se(n),n.focus(),e.hideLoading()})))};function bn(e,t,n){const r=re(e,u.select);if(!r)return;const i=(e,t,r)=>{const i=document.createElement("option");i.value=r,G(i,t),i.selected=_n(r,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach((t=>i(e,t[1],t[0])))}else i(r,n,t)})),r.focus()}function xn(e,t,n){const r=re(e,u.radio);if(!r)return;t.forEach((e=>{const t=e[0],i=e[1],s=document.createElement("input"),a=document.createElement("label");s.type="radio",s.name=u.radio,s.value=t,_n(t,n.inputValue)&&(s.checked=!0);const o=document.createElement("span");G(o,i),o.className=u.label,a.appendChild(s),a.appendChild(o),r.appendChild(a)}));const i=r.querySelectorAll("input");i.length&&i[0].focus()}const wn=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"===typeof r&&(r=wn(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"===typeof r&&(r=wn(r)),t.push([n,r])})),t},_n=(e,t)=>!!t&&t.toString()===e.toString(),Nn=e=>{const t=Le.innerParams.get(e);e.disableButtons(),t.input?En(e,"confirm"):An(e,!0)},jn=e=>{const t=Le.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?En(e,"deny"):kn(e,!1)},Sn=(e,t)=>{e.disableButtons(),t(kt.cancel)},En=(e,t)=>{const n=Le.innerParams.get(e);if(!n.input)return void p(`The "input" parameter is needed to be set when using returnInputValueOn${f(t)}`);const r=e.getInput(),i=fn(e,n);n.inputValidator?Cn(e,i,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===t?kn(e,i):An(e,i)},Cn=(e,t,n)=>{const r=Le.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>w(r.inputValidator(t,r.validationMessage)))).then((r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?kn(e,t):An(e,t)}))},kn=(e,t)=>{const n=Le.innerParams.get(e||void 0);n.showLoaderOnDeny&&un(D()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((()=>w(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),sn(e)):e.close({isDenied:!0,value:"undefined"===typeof n?t:n})})).catch((t=>In(e||void 0,t)))):e.close({isDenied:!0,value:t})},Tn=(e,t)=>{e.close({isConfirmed:!0,value:t})},In=(e,t)=>{e.rejectPromise(t)},An=(e,t)=>{const n=Le.innerParams.get(e||void 0);n.showLoaderOnConfirm&&un(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((()=>w(n.preConfirm(t,n.validationMessage)))).then((n=>{ue(P())||!1===n?(e.hideLoading(),sn(e)):Tn(e,"undefined"===typeof n?t:n)})).catch((t=>In(e||void 0,t)))):Tn(e,t)};function On(){const e=Le.innerParams.get(this);if(!e)return;const t=Le.domCache.get(this);ae(t.loader),W()?e.icon&&se(C()):Pn(t),ne([t.popup,t.actions],u.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Pn=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?se(t[0],"inline-block"):de()&&ae(e.actions)};function Mn(){const e=Le.innerParams.get(this),t=Le.domCache.get(this);return t?Q(t.popup,e.input):null}function Rn(e,t,n){const r=Le.domCache.get(e);t.forEach((e=>{r[e].disabled=n}))}function Dn(e,t){const n=E();if(n&&e)if("radio"===e.type){const e=n.querySelectorAll(`[name="${u.radio}"]`);for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function Ln(){Rn(this,["confirmButton","denyButton","cancelButton"],!1)}function Fn(){Rn(this,["confirmButton","denyButton","cancelButton"],!0)}function Un(){Dn(this.getInput(),!1)}function Bn(){Dn(this.getInput(),!0)}function Vn(e){const t=Le.domCache.get(this),n=Le.innerParams.get(this);G(t.validationMessage,e),t.validationMessage.className=u["validation-message"],n.customClass&&n.customClass.validationMessage&&te(t.validationMessage,n.customClass.validationMessage),se(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",u["validation-message"]),J(r),te(r,u.inputerror))}function $n(){const e=Le.domCache.get(this);e.validationMessage&&ae(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),ne(t,u.inputerror))}const zn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},qn=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Hn={allowEnterKey:void 0},Wn=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Kn=e=>Object.prototype.hasOwnProperty.call(zn,e),Gn=e=>-1!==qn.indexOf(e),Yn=e=>Hn[e],Xn=e=>{Kn(e)||m(`Unknown parameter "${e}"`)},Zn=e=>{Wn.includes(e)&&m(`The parameter "${e}" is incompatible with toasts`)},Qn=e=>{const t=Yn(e);t&&v(e,t)},Jn=e=>{!1===e.backdrop&&e.allowOutsideClick&&m('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","borderless"].includes(e.theme)&&m(`Invalid theme "${e.theme}". Expected "light", "dark", "auto", or "borderless"`);for(const t in e)Xn(t),e.toast&&Zn(t),Qn(t)};function er(e){const t=N(),n=E(),r=Le.innerParams.get(this);if(!n||Y(n,r.hideClass.popup))return void m("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const i=tr(e),s=Object.assign({},r,i);Jn(s),t.dataset.swal2Theme=s.theme,Nt(this,s),Le.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const tr=e=>{const t={};return Object.keys(e).forEach((n=>{Gn(n)?t[n]=e[n]:m(`Invalid parameter to update: ${n}`)})),t};function nr(){const e=Le.domCache.get(this),t=Le.innerParams.get(this);t?(e.popup&&a.swalCloseEventFinishedCallback&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback),"function"===typeof t.didDestroy&&t.didDestroy(),a.eventEmitter.emit("didDestroy"),rr(this)):ir(this)}const rr=e=>{ir(e),delete e.params,delete a.keydownHandler,delete a.keydownTarget,delete a.currentInstance},ir=e=>{e.isAwaitingPromise?(sr(Le,e),e.isAwaitingPromise=!0):(sr(Ut,e),sr(Le,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},sr=(e,t)=>{for(const n in e)e[n].delete(t)};var ar=Object.freeze({__proto__:null,_destroy:nr,close:tn,closeModal:tn,closePopup:tn,closeToast:tn,disableButtons:Fn,disableInput:Bn,disableLoading:On,enableButtons:Ln,enableInput:Un,getInput:Mn,handleAwaitingPromise:sn,hideLoading:On,rejectPromise:rn,resetValidationMessage:$n,showValidationMessage:Vn,update:er});const or=(e,t,n)=>{e.toast?lr(e,t,n):(dr(t),hr(t),fr(e,t,n))},lr=(e,t,n)=>{t.popup.onclick=()=>{e&&(cr(e)||e.timer||e.input)||n(kt.close)}},cr=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let ur=!1;const dr=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(ur=!0)}}},hr=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(ur=!0)}}},fr=(e,t,n)=>{t.container.onclick=r=>{ur?ur=!1:r.target===t.container&&b(e.allowOutsideClick)&&n(kt.backdrop)}},mr=e=>"object"===typeof e&&e.jquery,pr=e=>e instanceof Element||mr(e),gr=e=>{const t={};return"object"!==typeof e[0]||pr(e[0])?["title","html","icon"].forEach(((n,r)=>{const i=e[r];"string"===typeof i||pr(i)?t[n]=i:void 0!==i&&p(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)})):Object.assign(t,e[0]),t};function yr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function vr(e){class t extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}return t}const br=()=>a.timeout&&a.timeout.getTimerLeft(),xr=()=>{if(a.timeout)return pe(),a.timeout.stop()},wr=()=>{if(a.timeout){const e=a.timeout.start();return me(e),e}},_r=()=>{const e=a.timeout;return e&&(e.running?xr():wr())},Nr=e=>{if(a.timeout){const t=a.timeout.increase(e);return me(t,!0),t}},jr=()=>!(!a.timeout||!a.timeout.isRunning());let Sr=!1;const Er={};function Cr(){Er[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Sr||(document.body.addEventListener("click",kr),Sr=!0)}const kr=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in Er){const n=t.getAttribute(e);if(n)return void Er[e].fire({template:n})}};class Tr{constructor(){this.events={}}_getHandlersByEventName(e){return"undefined"===typeof this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const r=function(){n.removeListener(e,r);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];t.apply(n,s)};this.on(e,r)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,n)}catch(p){console.error(p)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}}a.eventEmitter=new Tr;const Ir=(e,t)=>{a.eventEmitter.on(e,t)},Ar=(e,t)=>{a.eventEmitter.once(e,t)},Or=(e,t)=>{e?t?a.eventEmitter.removeListener(e,t):a.eventEmitter.removeAllListeners(e):a.eventEmitter.reset()};var Pr=Object.freeze({__proto__:null,argsToParams:gr,bindClickHandler:Cr,clickCancel:Ct,clickConfirm:St,clickDeny:Et,enableLoading:un,fire:yr,getActions:U,getCancelButton:R,getCloseButton:$,getConfirmButton:M,getContainer:N,getDenyButton:D,getFocusableElements:q,getFooter:B,getHtmlContainer:I,getIcon:C,getIconContent:k,getImage:A,getInputLabel:L,getLoader:F,getPopup:E,getProgressSteps:O,getTimerLeft:br,getTimerProgressBar:V,getTitle:T,getValidationMessage:P,increaseTimer:Nr,isDeprecatedParameter:Yn,isLoading:K,isTimerRunning:jr,isUpdatableParameter:Gn,isValidParameter:Kn,isVisible:jt,mixin:vr,off:Or,on:Ir,once:Ar,resumeTimer:wr,showLoading:un,stopTimer:xr,toggleTimer:_r});class Mr{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Rr=["swal-title","swal-html","swal-footer"],Dr=e=>{const t="string"===typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return qr(n),Object.assign(Lr(n),Fr(n),Ur(n),Br(n),Vr(n),$r(n),zr(n,Rr))},Lr=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach((e=>{Hr(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&("boolean"===typeof zn[n]?t[n]="false"!==r:"object"===typeof zn[n]?t[n]=JSON.parse(r):t[n]=r)})),t},Fr=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]=new Function(`return ${r}`)())})),t},Ur=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach((e=>{Hr(e,["type","color","aria-label"]);const n=e.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(t[`${n}ButtonText`]=e.innerHTML,t[`show${f(n)}Button`]=!0,e.hasAttribute("color")&&(t[`${n}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute("aria-label")))})),t},Br=e=>{const t={},n=e.querySelector("swal-image");return n&&(Hr(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},Vr=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Hr(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},$r=e=>{const t={},n=e.querySelector("swal-input");n&&(Hr(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach((e=>{Hr(e,["value"]);const n=e.getAttribute("value");if(!n)return;const r=e.innerHTML;t.inputOptions[n]=r}))),t},zr=(e,t)=>{const n={};for(const r in t){const i=t[r],s=e.querySelector(i);s&&(Hr(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},qr=e=>{const t=Rr.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||m(`Unrecognized element <${n}>`)}))},Hr=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&m([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."])}))},Wr=10,Kr=e=>{const t=N(),n=E();"function"===typeof e.willOpen&&e.willOpen(n),a.eventEmitter.emit("willOpen",n);const r=window.getComputedStyle(document.body).overflowY;Zr(t,n,e),setTimeout((()=>{Yr(t,n)}),Wr),H()&&(Xr(t,e.scrollbarPadding,r),Bt()),W()||a.previousActiveElement||(a.previousActiveElement=document.activeElement),"function"===typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),a.eventEmitter.emit("didOpen",n),ne(t,u["no-transition"])},Gr=e=>{const t=E();if(e.target!==t)return;const n=N();t.removeEventListener("animationend",Gr),t.removeEventListener("transitionend",Gr),n.style.overflowY="auto"},Yr=(e,t)=>{fe(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Gr),t.addEventListener("transitionend",Gr)):e.style.overflowY="auto"},Xr=(e,t,n)=>{zt(),t&&"hidden"!==n&&Zt(n),setTimeout((()=>{e.scrollTop=0}))},Zr=(e,t,n)=>{te(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),se(t,"grid"),setTimeout((()=>{te(t,n.showClass.popup),t.style.removeProperty("opacity")}),Wr)):se(t,"grid"),te([document.documentElement,document.body],u.shown),n.heightAuto&&n.backdrop&&!n.toast&&te([document.documentElement,document.body],u["height-auto"])};var Qr={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Jr(e){e.inputValidator||("email"===e.input&&(e.inputValidator=Qr.email),"url"===e.input&&(e.inputValidator=Qr.url))}function ei(e){(!e.target||"string"===typeof e.target&&!document.querySelector(e.target)||"string"!==typeof e.target&&!e.target.appendChild)&&(m('Target parameter is not valid, defaulting to "body"'),e.target="body")}function ti(e){Jr(e),e.showLoaderOnConfirm&&!e.preConfirm&&m("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),ei(e),"string"===typeof e.title&&(e.title=e.title.split("\n").join("<br />")),je(e)}let ni;var ri=new WeakMap;class ii{constructor(){if(r(this,ri,void 0),"undefined"===typeof window)return;ni=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=Object.freeze(this.constructor.argsToParams(t));this.params=s,this.isAwaitingPromise=!1,i(ri,this,this._main(ni.params))}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Jn(Object.assign({},t,e)),a.currentInstance){const e=Ut.swalPromiseResolve.get(a.currentInstance),{isAwaitingPromise:t}=a.currentInstance;a.currentInstance._destroy(),t||e({isDismissed:!0}),H()&&Vt()}a.currentInstance=ni;const n=ai(e,t);ti(n),Object.freeze(n),a.timeout&&(a.timeout.stop(),delete a.timeout),clearTimeout(a.restoreFocusTimeout);const r=oi(ni);return Nt(ni,n),Le.innerParams.set(ni,n),si(ni,r,n)}then(e){return n(ri,this).then(e)}finally(e){return n(ri,this).finally(e)}}const si=(e,t,n)=>new Promise(((r,i)=>{const s=t=>{e.close({isDismissed:!0,dismiss:t})};Ut.swalPromiseResolve.set(e,r),Ut.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{Nn(e)},t.denyButton.onclick=()=>{jn(e)},t.cancelButton.onclick=()=>{Sn(e,s)},t.closeButton.onclick=()=>{s(kt.close)},or(n,t,s),It(a,n,s),hn(e,n),Kr(n),li(a,n,s),ci(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),ai=(e,t)=>{const n=Dr(e),r=Object.assign({},zn,t,n,e);return r.showClass=Object.assign({},zn.showClass,r.showClass),r.hideClass=Object.assign({},zn.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},oi=e=>{const t={popup:E(),container:N(),actions:U(),confirmButton:M(),denyButton:D(),cancelButton:R(),loader:F(),closeButton:$(),validationMessage:P(),progressSteps:O()};return Le.domCache.set(e,t),t},li=(e,t,n)=>{const r=V();ae(r),t.timer&&(e.timeout=new Mr((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(se(r),Z(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&me(t.timer)}))))},ci=(e,t)=>{if(!t.toast)return b(t.allowEnterKey)?void(ui(e)||di(e,t)||At(-1,1)):(v("allowEnterKey"),void hi())},ui=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&ue(n))return n.focus(),!0;return!1},di=(e,t)=>t.focusDeny&&ue(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ue(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ue(e.confirmButton))&&(e.confirmButton.focus(),!0),hi=()=>{document.activeElement instanceof HTMLElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!==typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${e}`)}ii.prototype.disableButtons=Fn,ii.prototype.enableButtons=Ln,ii.prototype.getInput=Mn,ii.prototype.disableInput=Bn,ii.prototype.enableInput=Un,ii.prototype.hideLoading=On,ii.prototype.disableLoading=On,ii.prototype.showValidationMessage=Vn,ii.prototype.resetValidationMessage=$n,ii.prototype.close=tn,ii.prototype.closePopup=tn,ii.prototype.closeModal=tn,ii.prototype.closeToast=tn,ii.prototype.rejectPromise=rn,ii.prototype.update=er,ii.prototype._destroy=nr,Object.assign(ii,Pr),Object.keys(ar).forEach((e=>{ii[e]=function(){return ni&&ni[e]?ni[e](...arguments):null}})),ii.DismissReason=kt,ii.version="11.17.2";const fi=ii;return fi.default=fi,fi}(),"undefined"!==typeof this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},539:(e,t,n)=>{var r=n(9742),i=n(7498),s=n(3279);e.exports=function(e){return e&&e.length?r(e,s,i):void 0}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},620:(e,t,n)=>{var r=n(6913),i=n(4052),s=n(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&s(e)&&"[object String]"==r(e)}},643:(e,t,n)=>{var r=n(7676)("toUpperCase");e.exports=r},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",s="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[s,a,o].join("|")+")"+c+l+")*"),d="(?:"+[s+r+"?",r,a,o,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},755:(e,t,n)=>{var r=n(8895),i=n(7116);e.exports=function e(t,n,s,a,o){var l=-1,c=t.length;for(s||(s=i),o||(o=[]);++l<c;){var u=t[l];n>0&&s(u)?n>1?e(u,n-1,s,a,o):r(o,u):a||(o[o.length]=u)}return o}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},801:(e,t,n)=>{var r=n(1141),i=n(6686),s=n(9841),a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},929:(e,t,n)=>{var r=n(3211),i=n(6571),s=n(9194),a=n(6686);e.exports=function(e,t,n){if(!a(n))return!1;var o=typeof t;return!!("number"==o?i(n)&&s(t,n.length):"string"==o&&t in n)&&r(n[t],e)}},977:(e,t,n)=>{var r=n(9096),i=n(4416);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},1141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1268:(e,t,n)=>{var r=n(5428),i=n(7574),s=n(6832),a=s&&s.isTypedArray,o=a?i(a):r;e.exports=o},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},1629:(e,t,n)=>{var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},1733:(e,t,n)=>{var r=n(1775),i=n(4664),s=n(9096);e.exports=function(e,t){var n={};return t=s(t,3),i(e,(function(e,i,s){r(n,i,t(e,i,s))})),n}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},2154:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},2165:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},2322:(e,t,n)=>{var r=n(6913),i=n(5990),s=n(2761),a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},2520:(e,t,n)=>{var r=n(5816),i=n(9096),s=n(9140),a=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var l=null==n?0:s(n);return l<0&&(l=a(o+l,0)),r(e,i(t,3),l)}},2536:(e,t,n)=>{var r=n(149),i=n(2969),s=n(9096),a=n(8883),o=n(320),l=n(7574),c=n(5893),u=n(3279),d=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var h=-1;t=r(t,l(s));var f=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++h,value:e}}));return o(f,(function(e,t){return c(e,t,n)}))}},2541:e=>{e.exports=function(e){return function(){return e}}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},2597:(e,t,n)=>{var r=n(4052),i=n(9841),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var D,L=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case _:return"Portal";case S:return"Profiler";case j:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:$(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return $(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ne=null,je=null;function Se(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ee(e){Ne?je?je.push(e):je=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=je;if(je=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function ke(e,t){return e(t)}function Te(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return ke(e,t,n)}finally{Ie=!1,(null!==Ne||null!==je)&&(Te(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Pe=!1}function Re(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Le=null,Fe=!1,Ue=null,Be={onError:function(e){De=!0,Le=e}};function Ve(e,t,n,r,i,s,a,o,l){De=!1,Le=null,Re.apply(Be,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if($e(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ze=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Nt,jt,St,Et=!1,Ct=[],kt=null,Tt=null,It=null,At=new Map,Ot=new Map,Pt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){Nt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Et=!1,null!==kt&&Ft(kt)&&(kt=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),At.forEach(Ut),Ot.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function $t(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Vt(kt,e),null!==Tt&&Vt(Tt,e),null!==It&&Vt(It,e),At.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Pt.shift()}var zt=x.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=zt.transition;zt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,zt.transition=s}}function Wt(e,t,n,r){var i=bt,s=zt.transition;zt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,zt.transition=s}}function Kt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Dt(kt,e,t,n,r,i),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,i),!0;case"mouseover":return It=Dt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Dt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Dt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&qr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Yt(e,t,n,r){if(Gt=null,null!==(e=vi(e=we(r))))if(null===(t=$e(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(fn),pn=sn(L({},fn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return jn}var En=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(En),kn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(An),Pn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Dn=u&&"TextEvent"in window&&!Rn,Ln=u&&(!Mn||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Yn(e){if(K(xi(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},jr={};function Sr(e){if(Nr[e])return Nr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Nr[e]=n[t];return e}u&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Sr("animationend"),Cr=Sr("animationiteration"),kr=Sr("animationstart"),Tr=Sr("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Mr=Ar[Pr];Or(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Or(Er,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(kr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Ve.apply(this,arguments),De){if(!De)throw Error(s(198));var u=Le;De=!1,Le=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=s,i=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Cr:case kr:l=yn;break;case Tr:l=In;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Oe(m,h))&&u.push(Hr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:xi(l),f=null==c?o:xi(c),(o=new u(p,m+"leave",l,n,i)).target=d,o.relatedTarget=f,p=null,vi(i)===r&&((u=new u(h,m+"enter",c,n,i)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Kr(f))m++;for(f=0,p=h;p;p=Kr(p))f++;for(;0<m-f;)u=Kr(u),m--;for(;0<f-m;)h=Kr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==d&&Gr(a,d,c,u,!0)}if("select"===(l=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(qn(o))if(Zn)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $n?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&($n||"onCompositionStart"!==b?"onCompositionEnd"===b&&$n&&(v=en()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,$n=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),Jt=Qt=Zt=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Oe(n,s))&&a.unshift(Hr(n,l,o)):i||null!=(l=Oe(n,s))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);$t(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,mi="__reactContainer$"+di,pi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var _i=[],Ni=-1;function ji(e){return{current:e}}function Si(e){0>Ni||(e.current=_i[Ni],_i[Ni]=null,Ni--)}function Ei(e,t){Ni++,_i[Ni]=e.current,e.current=t}var Ci={},ki=ji(Ci),Ti=ji(!1),Ii=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ti),Si(ki)}function Mi(e,t,n){if(ki.current!==Ci)throw Error(s(168));Ei(ki,t),Ei(Ti,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,z(e)||"Unknown",i));return L({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ii=ki.current,Ei(ki,e),Ei(Ti,Ti.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ri(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Si(Ti),Si(ki),Ei(ki,e)):Si(Ti),Ei(Ti,n)}var Fi=null,Ui=!1,Bi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function $i(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Je,$i),i}finally{bt=t,Bi=!1}}return null}var zi=[],qi=0,Hi=null,Wi=0,Ki=[],Gi=0,Yi=null,Xi=1,Zi="";function Qi(e,t){zi[qi++]=Wi,zi[qi++]=Hi,Hi=e,Wi=t}function Ji(e,t,n){Ki[Gi++]=Xi,Ki[Gi++]=Zi,Ki[Gi++]=Yi,Yi=e;var r=Xi;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Zi=s+e}else Xi=1<<s|n<<i|r,Zi=e}function es(e){null!==e.return&&(Qi(e,1),Ji(e,1,0))}function ts(e){for(;e===Hi;)Hi=zi[--qi],zi[qi]=null,Wi=zi[--qi],zi[qi]=null;for(;e===Yi;)Yi=Ki[--Gi],Ki[Gi]=null,Zi=Ki[--Gi],Ki[Gi]=null,Xi=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var ps=x.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:d(e,t,n,r,null);ys(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function p(i,s,o,l){for(var c=null,u=null,d=s,p=s=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(i,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(i,d),is&&Qi(i,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(s=a(d,s,p),null===u?c=d:u.sibling=d,u=d);return is&&Qi(i,p),c}for(d=r(i,d);p<o.length;p++)null!==(g=m(d,i,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),s=a(g,s,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Qi(i,p),c}function g(i,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var b=f(i,p,v.value,c);if(null===b){null===p&&(p=y);break}e&&p&&null===b.alternate&&t(i,p),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,p=y}if(v.done)return n(i,p),is&&Qi(i,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return is&&Qi(i,g),u}for(p=r(i,p);!v.done;g++,v=l.next())null!==(v=m(p,i,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach((function(e){return t(i,e)})),is&&Qi(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===N&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===N){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&vs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===N?((s=Rc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case O:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return p(r,s,a,l);if(R(a))return g(r,s,a,l);ys(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Lc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var xs=bs(!0),ws=bs(!1),_s=ji(null),Ns=null,js=null,Ss=null;function Es(){Ss=js=Ns=null}function Cs(e){var t=_s.current;Si(_s),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){Ns=e,Ss=js=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===js){if(null===Ns)throw Error(s(308));js=e,Ns.dependencies={lanes:0,firstContext:e}}else js=js.next=e;return t}var As=null;function Os(e){null===As?As=[e]:As.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Rs=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $s(e,t,n,r){var i=e.updateQueue;Rs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=L({},d,h);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=d}}function zs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Hs=ji(qs),Ws=ji(qs),Ks=ji(qs);function Gs(e){if(e===qs)throw Error(s(174));return e}function Ys(e,t){switch(Ei(Ks,t),Ei(Ws,e),Ei(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Hs),Ei(Hs,t)}function Xs(){Si(Hs),Si(Ws),Si(Ks)}function Zs(e){Gs(Ks.current);var t=Gs(Hs.current),n=le(t,e.type);t!==n&&(Ei(Ws,e),Ei(Hs,n))}function Qs(e){Ws.current===e&&(Si(Hs),Si(Ws))}var Js=ji(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=x.ReactCurrentDispatcher,ia=x.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Qa:Ja,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Za,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Dl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function Na(e,t){var n=aa,r=va(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Ra(Ea.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Sa.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&sa)||ja(n,t,i)}return i}function ja(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&ka(e)}function Ea(e,t,n){return n((function(){Ca(t)&&ka(e)}))}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function ka(e){var t=Ms(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return va().memoizedState}function Oa(e,t,n,r){var i=ya();aa.flags|=e,i.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=va();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Ia(t,n,s,r))}aa.flags|=e,i.memoizedState=Ia(1|t,n,s,r)}function Ma(e,t){return Oa(8390656,8,e,t)}function Ra(e,t){return Pa(2048,8,e,t)}function Da(e,t){return Pa(4,2,e,t)}function La(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),n)}function Ba(){}function Va(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function za(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),aa.lanes|=n,Dl|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ha(){return va().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Ya(t,n);else if(null!==(n=Ps(e,t,n,r))){nc(n,e,r,ec()),Xa(n,t,r)}}function Ka(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(nc(n,e,r,i=ec()),Xa(n,t,r))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Za={readContext:Is,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:Is,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Ma,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ta,useDebugValue:Ba,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=qa.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=ya();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&sa)||ja(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ma(Ea.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Tl.identifierPrefix;if(is){var n=Zi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ja={readContext:Is,useCallback:Va,useContext:Is,useEffect:Ra,useImperativeHandle:Ua,useInsertionEffect:Da,useLayoutEffect:La,useMemo:$a,useReducer:xa,useRef:Aa,useState:function(){return xa(ba)},useDebugValue:Ba,useDeferredValue:function(e){return za(va(),oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:Na,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:Is,useCallback:Va,useContext:Is,useEffect:Ra,useImperativeHandle:Ua,useInsertionEffect:Da,useLayoutEffect:La,useMemo:$a,useReducer:wa,useRef:Aa,useState:function(){return wa(ba)},useDebugValue:Ba,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:za(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:Na,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Bs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Oi(t)?Ii:ki.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Oi(t)?Ii:ki.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),$s(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),uo(0,t)},n}function mo(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?ws(t,null,n,r):xs(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var s=t.ref;return Ts(t,i),r=pa(e,t,n,r,s,i),n=ga(),null===e||bo?(is&&n&&es(t),t.flags|=1,xo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function _o(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return Eo(e,t,n,r,i)}function jo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Pl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Pl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ei(Pl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ei(Pl,Ol),Ol|=r;return xo(e,t,i,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,i){var s=Oi(n)?Ii:ki.current;return s=Ai(t,s),Ts(t,i),n=pa(e,t,n,r,s,i),r=ga(),null===e||bo?(is&&r&&es(t),t.flags|=1,xo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function Co(e,t,n,r,i){if(Oi(n)){var s=!0;Di(t)}else s=!1;if(Ts(t,i),null===t.stateNode)zo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Ai(t,c=Oi(n)?Ii:ki.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Rs=!1;var h=t.memoizedState;a.state=h,$s(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ti.current||Rs?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Rs||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=Ai(t,l=Oi(n)?Ii:ki.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Rs=!1,h=t.memoizedState,a.state=h,$s(t,r,a,i);var m=t.memoizedState;o!==d||h!==m||Ti.current||Rs?("function"===typeof f&&(no(t,n,f,r),m=t.memoizedState),(c=Rs||io(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ko(e,t,n,r,s,i)}function ko(e,t,n,r,i,s){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Li(t,n,!1),qo(e,t,s);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,o,s)):xo(e,t,o,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Ys(e,t.containerInfo)}function Io(e,t,n,r,i){return fs(),ms(i),t.flags|=256,xo(e,t,n,r),t.child}var Ao,Oo,Po,Mo,Ro={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,a=Js.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ei(Js,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,i,0,null),e=Rc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Ro,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Dc({mode:"visible",children:r.children},i,0,null),(a=Rc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xs(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Tl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ms(e,i),nc(r,e,i,-1))}return pc(),Uo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Xi,Ki[Gi++]=Zi,Ki[Gi++]=Yi,Xi=e.id,Zi=e.overflow,Yi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,i}return e=(o=e.child).sibling,i=Pc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ms(r),xs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function Vo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $o(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Js.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(Js,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Wo(t),null;case 3:return r=t.stateNode,Xs(),Si(Ti),Si(ki),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Oo(e,t),Wo(t),null;case 5:Qs(t);var i=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Gs(Hs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),J(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),J(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ks.current),Gs(Hs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(Si(Js),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Js.current)?0===Ml&&(Ml=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Xs(),Oo(e,t),null===e&&$r(t.stateNode.containerInfo),Wo(t),null;case 10:return Cs(t.type._context),Wo(t),null;case 19:if(Si(Js),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(Js,1&Js.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>$l&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*Ze()-a.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=Js.current,Ei(Js,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Si(Ti),Si(ki),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Si(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(Js),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Po=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Hs.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Xo=!1,Zo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Jo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[pi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||Jo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),$t(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xo&&(Jo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){jc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach((function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){jc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){jc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){jc(e,e.return,g)}}break;case 1:pl(t,e),yl(e),512&r&&null!==n&&Jo(n,n.return);break;case 5:if(pl(t,e),yl(e),512&r&&null!==n&&Jo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){jc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Z(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":Q(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(i,!!a.multiple,m,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){jc(e,e.return,g)}}break;case 6:if(pl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){jc(e,e.return,g)}}break;case 3:if(pl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(g){jc(e,e.return,g)}break;case 4:default:pl(t,e),yl(e);break;case 13:pl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ze())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||d,pl(t,e),Xo=u):pl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qo=e,d=e.child;null!==d;){for(h=Qo=d;null!==Qo;){switch(m=(f=Qo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Jo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){jc(r,n,g)}}break;case 5:Jo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,Qo=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){jc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){jc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){jc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Qo;){var i=Qo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=a,(Xo=l)&&!c)for(Qo=i;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Qo=l):_l(i);for(;null!==s;)Qo=s,bl(s,t,n),s=s.sibling;Qo=i,Yo=o,Xo=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Qo=s):xl(e)}}function xl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&$t(h)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&il(t)}catch(f){jc(t,t.return,f)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){jc(t,i,l)}}var s=t.return;try{il(t)}catch(l){jc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){jc(t,a,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Nl,jl=Math.ceil,Sl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,kl=0,Tl=null,Il=null,Al=0,Ol=0,Pl=ji(0),Ml=0,Rl=null,Dl=0,Ll=0,Fl=0,Ul=null,Bl=null,Vl=0,$l=1/0,zl=null,ql=!1,Hl=null,Wl=null,Kl=!1,Gl=null,Yl=0,Xl=0,Zl=null,Ql=-1,Jl=0;function ec(){return 0!==(6&kl)?Ze():-1!==Ql?Ql:Ql=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Al?Al&-Al:null!==ps.transition?(0===Jl&&(Jl=pt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Zl=null,Error(s(185));yt(e,n,r),0!==(2&kl)&&e===Tl||(e===Tl&&(0===(2&kl)&&(Ll|=n),4===Ml&&oc(e,Al)),rc(e,r),1===n&&0===kl&&0===(1&t.mode)&&($l=Ze()+500,Ui&&$i()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Tl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),ai((function(){0===(6&kl)&&$i()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ql=-1,Jl=0,0!==(6&kl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=kl;kl|=2;var a=mc();for(Tl===e&&Al===t||(zl=null,$l=Ze()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Es(),Sl.current=a,kl=i,null!==Il?t=0:(Tl=null,Al=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Rl,hc(e,0),oc(e,r),rc(e,Ze()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Rl,hc(e,0),oc(e,r),rc(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Bl,zl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Vl+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Bl,zl),t);break}wc(e,Bl,zl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Bl,zl),r);break}wc(e,Bl,zl);break;default:throw Error(s(329))}}}return rc(e,Ze()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&kl))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Ze()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),rc(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,zl),rc(e,Ze()),null}function cc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&($l=Ze()+500,Ui&&$i())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&kl)&&_c();var t=kl;kl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(kl=t))&&$i()}}function dc(){Ol=Pl.current,Si(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xs(),Si(Ti),Si(ki),na();break;case 5:Qs(r);break;case 4:Xs();break;case 13:case 19:Si(Js);break;case 10:Cs(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Il=e=Pc(e.current,null),Al=Ol=t,Ml=0,Rl=null,Fl=Ll=Dl=0,Bl=Ul=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=Il;try{if(Es(),ra.current=Za,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,El.current=null,null===n||null===n.return){Ml=1,Rl=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&po(a,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(a,u,t),pc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ms(lo(c,l));break e}}a=c=lo(c,l),4!==Ml&&(Ml=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=Za,null===e?Za:e}function pc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Tl||0===(268435455&Dl)&&0===(268435455&Ll)||oc(Tl,Al)}function gc(e,t){var n=kl;kl|=2;var r=mc();for(Tl===e&&Al===t||(zl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Es(),kl=n,Sl.current=r,null!==Il)throw Error(s(261));return Tl=null,Al=0,Ml}function yc(){for(;null!==Il;)bc(Il)}function vc(){for(;null!==Il&&!Ye();)bc(Il)}function bc(e){var t=Nl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Il=t,El.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Ol)))return void(Il=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ml=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Gl);if(0!==(6&kl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Tl&&(Il=Tl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tc(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=kl;kl|=4,El.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){jc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}p=tl,tl=!1}(e,n),gl(n,e),mr(ti),qt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Xe(),kl=l,bt=o,Cl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Yl=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Zl?Xl++:(Xl=0,Zl=e):Xl=0,$i()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function _c(){if(null!==Gl){var e=xt(Yl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Yl=0,0!==(6&kl))throw Error(s(331));var i=kl;for(kl|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var d=Qo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Qo=h;else for(;null!==Qo;){var f=(d=Qo).sibling,m=d.return;if(sl(d),d===u){Qo=null;break}if(null!==f){f.return=m,Qo=f;break}Qo=m}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qo=v;break e}Qo=a.return}}var b=e.current;for(Qo=b;null!==Qo;){var x=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Qo=x;else e:for(o=b;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){jc(l,l.return,_)}if(l===o){Qo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qo=w;break e}Qo=l.return}}if(kl=i,$i(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Nc(e,t,n){e=Us(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Al&n)===n&&(4===Ml||3===Ml&&(130023424&Al)===Al&&500>Ze()-Vl?hc(e,0):Fl|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ms(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function Tc(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Rc(n.children,i,a,t);case j:o=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=a,e;case T:return(e=Ac(13,n,t,i)).elementType=T,e.lanes=a,e;case I:return(e=Ac(19,n,t,i)).elementType=I,e.lanes=a,e;case P:return Dc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case C:o=9;break e;case k:o=11;break e;case A:o=14;break e;case O:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Vc(e){if(!e)return Ci;e:{if($e(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ri(e,n,t)}return t}function $c(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=Vc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(nc(e,i,a,s),Bs(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fs();break;case 5:Zs(t);break;case 1:Oi(t.type)&&Di(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(_s,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(Js,1&Js.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Ei(Js,1&Js.current),null!==(e=qo(e,t,n))?e.sibling:null);Ei(Js,1&Js.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $o(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(Js,Js.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return qo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Ji(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var i=Ai(t,ki.current);Ts(t,n),i=pa(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ds(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=ko(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),xo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),i){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(To(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ls(e,t),$s(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Io(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Zs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),So(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ei(_s,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ti.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),ks(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ks(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ts(t,n),r=r(i=Is(i)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),_o(e,t,r,i=to(r.type,i),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),zo(e,t),t.tag=1,Oi(r)?(e=!0,Di(t)):e=!1,Ts(t,n),so(t,r,i),oo(t,r,i,n),ko(null,t,r,!0,e,n);case 19:return $o(e,t,n);case 22:return jo(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}zc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}var a=$c(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[mi]=a.current,$r(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[mi]=l.current,$r(8===e.nodeType?e.parentNode:e),uc((function(){zc(t,l,n,r)})),l}(n,t,e,i,r);return qc(a)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));zc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){zc(null,e,null,null)})),t[mi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ze()),0===(6&kl)&&($l=Ze()+500,$i()))}break;case 13:uc((function(){var t=Ms(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Ms(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},jt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),Q(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[bi,xi,wi,Ee,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,$r(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,i,0,a,o),e[mi]=t.current,$r(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[mi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,n)=>{var r=n(5193),i=n(2761),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},2794:(e,t,n)=>{var r=n(9742),i=n(7498),s=n(9096);e.exports=function(e,t){return e&&e.length?r(e,s(t,2),i):void 0}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},2969:(e,t,n)=>{var r=n(5324),i=n(914);e.exports=function(e,t){for(var n=0,s=(t=r(t,e)).length;null!=e&&n<s;)e=e[i(t[n++])];return n&&n==s?e:void 0}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3204:(e,t,n)=>{var r=n(3343),i=n(2777),s=n(4052),a=n(4543),o=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),u=!n&&i(e),d=!n&&!u&&a(e),h=!n&&!u&&!d&&l(e),f=n||u||d||h,m=f?r(e.length,String):[],p=m.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,p))||m.push(g);return m}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:e=>{e.exports=function(e){return e}},3331:(e,t,n)=>{var r=n(9676),i=n(929),s=n(7303);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=s(t),void 0===n?(n=t,t=0):n=s(n),a=void 0===a?t<n?1:-1:s(a),r(t,n,a,e)}}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},3366:(e,t,n)=>{var r=n(7894),i=n(9057);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3411:(e,t,n)=>{var r=n(149),i=n(9096),s=n(8883),a=n(4052);e.exports=function(e,t){return(a(e)?r:s)(e,i(t,3))}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},3538:(e,t,n)=>{var r=n(755),i=n(3411);e.exports=function(e,t){return r(i(e,t),1)}},3668:(e,t,n)=>{var r=n(8902),i=n(2587),s=n(8114);e.exports=function(e,t,n,a,o,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var m=-1,p=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++m<u;){var y=e[m],v=t[m];if(a)var b=c?a(v,y,m,t,e,l):a(y,v,m,e,t,l);if(void 0!==b){if(b)continue;p=!1;break}if(g){if(!i(t,(function(e,t){if(!s(g,t)&&(y===e||o(y,e,n,a,l)))return g.push(t)}))){p=!1;break}}else if(y!==v&&!o(y,v,n,a,l)){p=!1;break}}return l.delete(e),l.delete(t),p}},3713:(e,t,n)=>{var r=n(6140),i=n(1143),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},3781:(e,t,n)=>{var r=n(9417),i=n(8673);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,r(a)]}return t}},3871:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,n)=>{var r=n(396),i=n(2866),s=n(2597),a=n(914);e.exports=function(e){return s(e)?r(a(e)):i(e)}},3950:(e,t,n)=>{var r=n(6686),i=n(4757),s=n(801),a=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,u,d,h,f,m=0,p=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=c;return l=c=void 0,m=t,d=e.apply(r,n)}function b(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-m>=u}function x(){var e=i();if(b(e))return w(e);h=setTimeout(x,function(e){var n=t-(e-f);return g?o(n,u-(e-m)):n}(e))}function w(e){return h=void 0,y&&l?v(e):(l=c=void 0,d)}function _(){var e=i(),n=b(e);if(l=arguments,c=this,f=e,n){if(void 0===h)return function(e){return m=e,h=setTimeout(x,t),p?v(e):d}(f);if(g)return clearTimeout(h),h=setTimeout(x,t),v(f)}return void 0===h&&(h=setTimeout(x,t)),d}return t=s(t)||0,r(n)&&(p=!!n.leading,u=(g="maxWait"in n)?a(s(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==h&&clearTimeout(h),m=0,l=f=c=h=void 0},_.flush=function(){return void 0===h?d:w(i())},_}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079:(e,t,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)})),t}));e.exports=a},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,p(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,N={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!j.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:N.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+k(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+k(o=e[c],c);l+=T(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,i,u=s+k(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},M={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:N};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!j.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4262:(e,t,n)=>{var r=n(8895),i=n(4052);e.exports=function(e,t,n){var s=t(e);return i(e)?s:r(s,n(e))}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4416:(e,t,n)=>{var r=n(8902),i=n(5866),s=n(1558),a=n(8114),o=n(8182),l=n(2074);e.exports=function(e,t,n){var c=-1,u=i,d=e.length,h=!0,f=[],m=f;if(n)h=!1,u=s;else if(d>=200){var p=t?null:o(e);if(p)return l(p);h=!1,u=a,m=new r}else m=t?[]:f;e:for(;++c<d;){var g=e[c],y=t?t(g):g;if(g=n||0!==g?g:0,h&&y===y){for(var v=m.length;v--;)if(m[v]===y)continue e;t&&m.push(y),f.push(g)}else u(m,y,n)||(m!==f&&m.push(y),f.push(g))}return f}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),i=n(14),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,o=a&&a.exports===s?r.Buffer:void 0,l=(o?o.isBuffer:void 0)||i;e.exports=l},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},4552:(e,t,n)=>{var r=n(9812),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[o]=n:delete e[o]),i}},4597:(e,t,n)=>{var r=n(2587),i=n(9096),s=n(2165),a=n(4052),o=n(929);e.exports=function(e,t,n){var l=a(e)?r:s;return n&&o(e,t,n)&&(t=void 0),l(e,i(t,3))}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,n)=>{var r=n(4258),i=n(8673);e.exports=function(e,t){return e&&r(e,t,i)}},4746:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},4816:(e,t,n)=>{var r=n(7251),i=n(7159),s=n(438),a=n(9394),o=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},5029:(e,t,n)=>{var r=n(6989),i=n(3097),s=n(3366),a=n(2597),o=n(9417),l=n(1310),c=n(914);e.exports=function(e,t){return a(e)&&o(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?s(n,e):r(t,a,3)}}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5173:(e,t,n)=>{e.exports=n(1497)()},5193:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},5268:(e,t,n)=>{var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},5295:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},5324:(e,t,n)=>{var r=n(4052),i=n(2597),s=n(4079),a=n(1069);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:s(a(e))}},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},5428:(e,t,n)=>{var r=n(6913),i=n(6173),s=n(2761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&i(e.length)&&!!a[r(e)]}},5538:(e,t,n)=>{var r=n(7160),i=n(4545),s=n(793),a=n(7760),o=n(3892),l=n(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=a,c.prototype.has=o,c.prototype.set=l,e.exports=c},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},5636:(e,t,n)=>{var r=n(1170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,a=-1,o=i(s.length-t,0),l=Array(o);++a<o;)l[a]=s[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=s[a];return c[t]=n(l),r(e,this,c)}}},5647:(e,t,n)=>{var r=n(3279),i=n(5636),s=n(6350);e.exports=function(e,t){return s(i(e,t,r),e+"")}},5652:(e,t,n)=>{var r=n(4664),i=n(6516)(r);e.exports=i},5654:(e,t,n)=>{var r=n(7937),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},5713:e=>{e.exports=function(){}},5752:(e,t,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,a,o){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:i.call(t,h)))return!1}var f=o.get(e),m=o.get(t);if(f&&m)return f==t&&m==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=l;++d<u;){var y=e[h=c[d]],v=t[h];if(s)var b=l?s(v,y,h,t,e,o):s(y,v,h,e,t,o);if(!(void 0===b?y===v||a(y,v,n,s,o):b)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(p=!1)}return o.delete(e),o.delete(t),p}},5797:(e,t,n)=>{var r=n(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},5816:e=>{e.exports=function(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var i=-1,s=e.criteria,a=t.criteria,o=s.length,l=n.length;++i<o;){var c=r(s[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===n(s[l],l,s))break}return t}}},5967:e=>{e.exports=function(e){return e.split("")}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6350:(e,t,n)=>{var r=n(8325),i=n(6578)(r);e.exports=i},6361:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},6378:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case o:case a:case h:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case p:case m:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isFragment=function(e){return y(e)===s}},6399:(e,t,n)=>{var r=n(5538),i=n(3668),s=n(9987),a=n(5752),o=n(6924),l=n(4052),c=n(4543),u=n(1268),d="[object Arguments]",h="[object Array]",f="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,g,y){var v=l(e),b=l(t),x=v?h:o(e),w=b?h:o(t),_=(x=x==d?f:x)==f,N=(w=w==d?f:w)==f,j=x==w;if(j&&c(e)){if(!c(t))return!1;v=!0,_=!1}if(j&&!_)return y||(y=new r),v||u(e)?i(e,t,n,p,g,y):s(e,t,x,n,p,g,y);if(!(1&n)){var S=_&&m.call(e,"__wrapped__"),E=N&&m.call(t,"__wrapped__");if(S||E){var C=S?e.value():e,k=E?t.value():t;return y||(y=new r),g(C,k,n,p,y)}}return!!j&&(y||(y=new r),a(e,t,n,p,g,y))}},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var s=n.length,a=t?s:-1,o=Object(n);(t?a--:++a<s)&&!1!==i(o[a],a,o););return n}}},6532:(e,t,n)=>{var r=n(5538),i=n(6989);e.exports=function(e,t,n,s){var a=n.length,o=a,l=!s;if(null==e)return!o;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<o;){var u=(c=n[a])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var f=new r;if(s)var m=s(d,h,u,e,t,f);if(!(void 0===m?i(h,d,3,s,f):m))return!1}}return!0}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();e.exports=s},6571:(e,t,n)=>{var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),s=16-(i-r);if(r=i,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,s=e===e,a=r(e),o=void 0!==t,l=null===t,c=t===t,u=r(t);if(!l&&!u&&!a&&e>t||a&&o&&c&&!l&&!u||i&&o&&c||!n&&c||!s)return 1;if(!i&&!a&&!u&&e<t||u&&n&&s&&!i&&!a||l&&n&&s||!o&&s||!c)return-1}return 0}},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},6604:(e,t,n)=>{var r=n(3331)();e.exports=r},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6745:(e,t,n)=>{var r=n(9742),i=n(61),s=n(3279);e.exports=function(e){return e&&e.length?r(e,s,i):void 0}},6788:(e,t,n)=>{var r=n(7160),i=n(5204),s=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(a)}return n.set(e,t),this.size=n.size,this}},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,a=s&&s.exports===i&&r.process,o=function(){try{var e=s&&s.require&&s.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=o},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},6913:(e,t,n)=>{var r=n(9812),i=n(4552),s=n(6095),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):s(e)}},6924:(e,t,n)=>{var r=n(7685),i=n(5204),s=n(5387),a=n(2070),o=n(6600),l=n(6913),c=n(6996),u="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",m="[object DataView]",p=c(r),g=c(i),y=c(s),v=c(a),b=c(o),x=l;(r&&x(new r(new ArrayBuffer(1)))!=m||i&&x(new i)!=u||s&&x(s.resolve())!=d||a&&x(new a)!=h||o&&x(new o)!=f)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case p:return m;case g:return u;case y:return d;case v:return h;case b:return f}return t}),e.exports=x},6954:(e,t,n)=>{var r=n(1629),i=n(7857),s=n(6686),a=n(6996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(r(e)?h:o).test(a(e))}},6989:(e,t,n)=>{var r=n(6399),i=n(2761);e.exports=function e(t,n,s,a,o){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,s,a,e,o))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},7002:(e,t,n)=>{var r=n(5295),i=n(4746),s=n(9096),a=n(4052),o=n(929);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&o(e,t,n)&&(t=void 0),l(e,s(t,3))}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7116:(e,t,n)=>{var r=n(9812),i=n(2777),s=n(4052),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||i(e)||!!(a&&e&&e[a])}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,n)=>{var r=n(7563),i=n(9935),s=n(4190),a=n(1946),o=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,P(_);else{var t=r(u);null!==t&&M(w,t.startTime-e)}}function _(e,n){p=!1,g&&(g=!1,v(E),E=-1),m=!0;var s=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,j=!1,S=null,E=-1,C=5,k=-1;function T(){return!(t.unstable_now()-k<C)}function I(){if(null!==S){var e=t.unstable_now();k=e;var n=!0;try{n=S(!0,e)}finally{n?N():(j=!1,S=null)}}else j=!1}if("function"===typeof b)N=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=I,N=function(){O.postMessage(null)}}else N=function(){y(I,0)};function P(e){S=e,j||(j=!0,N())}function M(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,M(w,s-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,P(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7251:(e,t,n)=>{var r=n(8724),i=n(7160),s=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||i),string:new r}}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new i(r,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,a=new Array(s);i<s;i++)a[i]=r[i].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,s),!0;case 6:return u.fn.call(u.context,t,r,i,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},7303:(e,t,n)=>{var r=n(801),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7424:(e,t,n)=>{var r=n(755),i=n(2536),s=n(5647),a=n(929),o=s((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=o},7498:e=>{e.exports=function(e,t){return e>t}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7676:(e,t,n)=>{var r=n(8189),i=n(6311),s=n(9115),a=n(1069);e.exports=function(e){return function(t){t=a(t);var n=i(t)?s(t):void 0,o=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return o[e]()+l}}},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,n)=>{var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7937:(e,t,n)=>{var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8114:e=>{e.exports=function(e,t){return e.has(t)}},8182:(e,t,n)=>{var r=n(2070),i=n(5713),s=n(2074),a=r&&1/s(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},8189:(e,t,n)=>{var r=n(3871);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},8210:function(e,t,n){var r;!function(){"use strict";var i,s=1e9,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,p=9007199254740991,g=d(1286742750677284.5),y={};function v(e,t){var n,r,i,s,a,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?k(t,h):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),s=a-i){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=a,l=c.length),s>(l=(a=Math.ceil(h/7))>l?a+1:l+1)&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for((l=c.length)-(s=u.length)<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/m|0,c[s]%=m;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,o?k(t,h):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function x(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=S(n)),s+=r;(n=7-(r=(a=e[t])+"").length)&&(s+=S(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return s+a}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,n=(r=s.d.length)<(i=e.d.length)?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return k(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return N(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,s=r.precision,a=s+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(o=!1,t=w(E(n,a),E(e,a),a),o=!0,k(t,s))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?T(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(o=!1,t=w(n,e,0,1).times(e),o=!0,n.minus(t)):k(new r(n),i)},y.naturalExponential=y.exp=function(){return _(this)},y.naturalLogarithm=y.ln=function(){return E(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):T(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,s,a,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=x(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=a=(n=u.precision)+3;;)if(r=(s=r).plus(w(c,s,a+2)).times(.5),x(s.d).slice(0,a)===(t=x(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(k(s,n+1,0),s.times(s).eq(c)){r=s;break}}else if("9999"!=t)break;a+=4}return o=!0,k(r,n)},y.times=y.mul=function(e){var t,n,r,i,s,a,l,c,u,d=this,h=d.constructor,f=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=f.length)<(u=p.length)&&(s=f,f=p,p=s,a=c,c=u,u=a),s=[],r=a=c+u;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=s[i]+p[r]*f[i-r-1]+t,s[i--]=l%m|0,t=l/m|0;s[i]=(s[i]+t)%m|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,o?k(e,h.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,s),void 0===t?t=r.rounding:b(t,0,8),k(n,e+N(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=I(r,!0):(b(e,0,s),void 0===t?t=i.rounding:b(t,0,8),n=I(r=k(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?I(i):(b(e,0,s),void 0===t?t=a.rounding:b(t,0,8),n=I((r=k(new a(i),e+N(i)+1,t)).abs(),!1,e+N(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return k(new t(e),N(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,s,a,c,u=this,h=u.constructor,f=+(e=new h(e));if(!e.s)return new h(i);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(i))return u;if(r=h.precision,e.eq(i))return k(u,r);if(c=(t=e.e)>=(n=e.d.length-1),a=u.s,c){if((n=f<0?-f:f)<=p){for(s=new h(i),t=Math.ceil(r/7+4),o=!1;n%2&&A((s=s.times(u)).d,t),0!==(n=d(n/2));)A((u=u.times(u)).d,t);return o=!0,e.s<0?new h(i).div(s):k(s,r)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,o=!1,s=e.times(E(u,r+12)),o=!0,(s=_(s)).s=a,s},y.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?r=I(i,(n=N(i))<=a.toExpNeg||n>=a.toExpPos):(b(e,1,s),void 0===t?t=a.rounding:b(t,0,8),r=I(i=k(new a(i),e,t),e<=(n=N(i))||n<=a.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,s),void 0===t?t=n.rounding:b(t,0,8)),k(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=N(e),n=e.constructor;return I(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%m|0,r=n/m|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*m+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,a){var o,c,u,d,h,f,p,g,y,v,b,x,w,_,j,S,E,C,T=r.constructor,I=r.s==i.s?1:-1,A=r.d,O=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,E=O.length,j=A.length,g=(p=new T(I)).d=[],u=0;O[u]==(A[u]||0);)++u;if(O[u]>(A[u]||0)&&--c,(x=null==s?s=T.precision:a?s+(N(r)-N(i))+1:s)<0)return new T(0);if(x=x/7+2|0,u=0,1==E)for(d=0,O=O[0],x++;(u<j||d)&&x--;u++)w=d*m+(A[u]||0),g[u]=w/O|0,d=w%O|0;else{for((d=m/(O[0]+1)|0)>1&&(O=e(O,d),A=e(A,d),E=O.length,j=A.length),_=E,v=(y=A.slice(0,E)).length;v<E;)y[v++]=0;(C=O.slice()).unshift(0),S=O[0],O[1]>=m/2&&++S;do{d=0,(o=t(O,y,E,v))<0?(b=y[0],E!=v&&(b=b*m+(y[1]||0)),(d=b/S|0)>1?(d>=m&&(d=m-1),1==(o=t(h=e(O,d),y,f=h.length,v=y.length))&&(d--,n(h,E<f?C:O,f))):(0==d&&(o=d=1),h=O.slice()),(f=h.length)<v&&h.unshift(0),n(y,h,v),-1==o&&(o=t(O,y,E,v=y.length))<1&&(d++,n(y,E<v?C:O,v)),v=y.length):0===o&&(d++,y=[0]),g[u++]=d,o&&y[0]?y[v++]=A[_]||0:(y=[A[_]],v=1)}while((_++<j||void 0!==y[0])&&x--)}return g[0]||g.shift(),p.e=c,k(p,a?s+N(p)+1:s)}}();function _(e,t){var n,r,s,a,l,c=0,d=0,f=e.constructor,m=f.precision;if(N(e)>16)throw Error(u+N(e));if(!e.s)return new f(i);for(null==t?(o=!1,l=m):l=t,a=new f(.03125);e.abs().gte(.1);)e=e.times(a),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=s=new f(i),f.precision=l;;){if(r=k(r.times(e),l),n=n.times(++c),x((a=s.plus(w(r,n,l))).d).slice(0,l)===x(s.d).slice(0,l)){for(;d--;)s=k(s.times(s),l);return f.precision=m,null==t?(o=!0,k(s,m)):s}s=a}}function N(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function j(e,t,n){if(t>e.LN10.sd())throw o=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return k(new e(e.LN10),t)}function S(e){for(var t="";e--;)t+="0";return t}function E(e,t){var n,r,s,a,c,u,d,h,f,m=1,p=e,g=p.d,y=p.constructor,v=y.precision;if(p.s<1)throw Error(l+(p.s?"NaN":"-Infinity"));if(p.eq(i))return new y(0);if(null==t?(o=!1,h=v):h=t,p.eq(10))return null==t&&(o=!0),j(y,h);if(h+=10,y.precision=h,r=(n=x(g)).charAt(0),a=N(p),!(Math.abs(a)<15e14))return d=j(y,h+2,v).times(a+""),p=E(new y(r+"."+n.slice(1)),h-10).plus(d),y.precision=v,null==t?(o=!0,k(p,v)):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((p=p.times(e)).d)).charAt(0),m++;for(a=N(p),r>1?(p=new y("0."+n),a++):p=new y(r+"."+n.slice(1)),u=c=p=w(p.minus(i),p.plus(i),h),f=k(p.times(p),h),s=3;;){if(c=k(c.times(f),h),x((d=u.plus(w(c,new y(s),h))).d).slice(0,h)===x(u.d).slice(0,h))return u=u.times(2),0!==a&&(u=u.plus(j(y,h+2,v).times(a+""))),u=w(u,new y(m),h),y.precision=v,null==t?(o=!0,k(u,v)):u;u=d,s+=2}}function C(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function k(e,t,n){var r,i,s,a,l,c,f,p,y=e.d;for(a=1,s=y[0];s>=10;s/=10)a++;if((r=t-a)<0)r+=7,i=t,f=y[p=0];else{if((p=Math.ceil((r+1)/7))>=(s=y.length))return e;for(f=s=y[p],a=1;s>=10;s/=10)a++;i=(r%=7)-7+a}if(void 0!==n&&(l=f/(s=h(10,a-i-1))%10|0,c=t<0||void 0!==y[p+1]||f%s,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?f/h(10,a-i):0:y[p-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return c?(s=N(e),y.length=1,t=t-s-1,y[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=p,s=1,p--):(y.length=p+1,s=h(10,7-r),y[p]=i>0?(f/h(10,a-i)%h(10,i)|0)*s:0),c)for(;;){if(0==p){(y[0]+=s)==m&&(y[0]=1,++e.e);break}if(y[p]+=s,y[p]!=m)break;y[p--]=0,s=1}for(r=y.length;0===y[--r];)y.pop();if(o&&(e.e>g||e.e<-g))throw Error(u+N(e));return e}function T(e,t){var n,r,i,s,a,l,c,u,d,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),o?k(t,p):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r){for((d=a<0)?(n=c,a=-a,l=h.length):(n=h,r=u,l=c.length),a>(i=Math.max(Math.ceil(p/7),l)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((d=(i=c.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}a=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>a;){if(c[--i]<h[i]){for(s=i;s&&0===c[--s];)c[s]=m-1;--c[s],c[i]+=m}c[i]-=h[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,o?k(t,p):t):new f(0)}function I(e,t,n){var r,i=N(e),s=x(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+S(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+S(-i-1)+s,n&&(r=n-a)>0&&(s+=S(r))):i>=a?(s+=S(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+S(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=S(r))),e.s<0?"-"+s:s}function A(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(d(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}a=function e(t){var n,r,i;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);C(t,e)}if(s.prototype=y,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=O,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(a),a.default=a.Decimal=a,i=new a(1),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},8325:(e,t,n)=>{var r=n(2541),i=n(5654),s=n(3279),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:s;e.exports=a},8468:(e,t,n)=>{var r=n(5816),i=n(644),s=n(4020);e.exports=function(e,t,n){return t===t?s(e,t,n):r(e,i,n)}},8541:(e,t,n)=>{var r=n(9812),i=n(149),s=n(4052),a=n(9841),o=r?r.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},8673:(e,t,n)=>{var r=n(3204),i=n(3713),s=n(6571);e.exports=function(e){return s(e)?r(e):i(e)}},8724:(e,t,n)=>{var r=n(7615),i=n(5051),s=n(2154),a=n(8734),o=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},8734:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8883:(e,t,n)=>{var r=n(5652),i=n(6571);e.exports=function(e,t){var n=-1,s=i(e)?Array(e.length):[];return r(e,(function(e,r,i){s[++n]=t(e,r,i)})),s}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},8902:(e,t,n)=>{var r=n(4816),i=n(6179),s=n(6704);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=s,e.exports=a},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},9057:(e,t,n)=>{var r=n(5324),i=n(2777),s=n(4052),a=n(9194),o=n(6173),l=n(914);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&o(u)&&a(h,u)&&(s(e)||i(e))}},9062:(e,t,n)=>{"use strict";e.exports=n(6378)},9096:(e,t,n)=>{var r=n(9256),i=n(5029),s=n(3279),a=n(4052),o=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):o(e)}},9115:(e,t,n)=>{var r=n(5967),i=n(6311),s=n(715);e.exports=function(e){return i(e)?s(e):r(e)}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},9160:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},9256:(e,t,n)=>{var r=n(6532),i=n(3781),s=n(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},9364:(e,t,n)=>{var r=n(9742),i=n(9096),s=n(61);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),s):void 0}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},9395:(e,t,n)=>{var r=n(4262),i=n(9621),s=n(8673);e.exports=function(e){return r(e,s,i)}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},9621:(e,t,n)=>{var r=n(7529),i=n(7828),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,o=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return s.call(e,t)})))}:i;e.exports=o},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,s){for(var a=-1,o=n(t((r-e)/(i||1)),0),l=Array(o);o--;)l[s?o:++a]=e,e+=i;return l}},9686:e=>{e.exports=function(e){return null==e}},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var i=-1,s=e.length;++i<s;){var a=e[i],o=t(a);if(null!=o&&(void 0===l?o===o&&!r(o):n(o,l)))var l=o,c=a}return c}},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},9841:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},9889:(e,t,n)=>{var r=n(3950),i=n(6686);e.exports=function(e,t,n){var s=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:s,maxWait:t,trailing:a})}},9935:(e,t,n)=>{var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},9987:(e,t,n)=>{var r=n(9812),i=n(2929),s=n(3211),a=n(3668),o=n(4160),l=n(2074),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=o;case"[object Set]":var m=1&r;if(f||(f=l),e.size!=t.size&&!m)return!1;var p=h.get(e);if(p)return p==t;r|=2,h.set(e,t);var g=a(f(e),f(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},9995:(e,t,n)=>{var r=n(9096),i=n(6571),s=n(8673);e.exports=function(e){return function(t,n,a){var o=Object(t);if(!i(t)){var l=r(n,3);t=s(t),n=function(e){return l(o[e],e,o)}}var c=e(t,n,a);return c>-1?o[l?t[c]:c]:void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>cU,scaleDiverging:()=>Bq,scaleDivergingLog:()=>Vq,scaleDivergingPow:()=>zq,scaleDivergingSqrt:()=>qq,scaleDivergingSymlog:()=>$q,scaleIdentity:()=>MV,scaleImplicit:()=>oU,scaleLinear:()=>PV,scaleLog:()=>zV,scaleOrdinal:()=>lU,scalePoint:()=>dU,scalePow:()=>QV,scaleQuantile:()=>u$,scaleQuantize:()=>d$,scaleRadial:()=>t$,scaleSequential:()=>Pq,scaleSequentialLog:()=>Mq,scaleSequentialPow:()=>Dq,scaleSequentialQuantile:()=>Fq,scaleSequentialSqrt:()=>Lq,scaleSequentialSymlog:()=>Rq,scaleSqrt:()=>JV,scaleSymlog:()=>KV,scaleThreshold:()=>h$,scaleTime:()=>Tq,scaleUtc:()=>Iq,tickFormat:()=>AV});var t,r=n(5043),i=n.t(r,2),s=n(4391),a=n(7950),o=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(S2){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,d=t.Pop,p=null,g=y();function y(){return(o.state||{idx:null}).idx}function v(){d=t.Pop;let e=y(),n=null==e?null:e-g;g=e,p&&p({action:d,location:x.location,delta:n})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(l({},o.state,{idx:g}),""));let x={get action(){return d},get location(){return e(s,o)},listen(e){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),p=e,()=>{s.removeEventListener(c,v),p=null}},createHref:e=>n(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let i=f(x.location,e,n);r&&r(i,e),g=y()+1;let l=h(i,g),c=x.createHref(i);try{o.pushState(l,"",c)}catch(Zg){if(Zg instanceof DOMException&&"DataCloneError"===Zg.name)throw Zg;s.location.assign(c)}a&&p&&p({action:d,location:x.location,delta:1})},replace:function(e,n){d=t.Replace;let i=f(x.location,e,n);r&&r(i,e),g=y();let s=h(i,g),l=x.createHref(i);o.replaceState(s,"",l),a&&p&&p({action:d,location:x.location,delta:0})},go:e=>o.go(e)};return x}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let i=P(("string"===typeof t?p(t):t).pathname||"/",n);if(null==i)return null;let s=x(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=O(i);a=I(s[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=F([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=w(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,N=3,j=2,S=1,E=10,C=-2,k=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=C),t&&(r+=j),n.filter((e=>!k(e))).reduce(((e,t)=>e+(_.test(t)?N:""===t?S:E)),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:F([s,u.pathname]),pathnameBase:U(F([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=F([s,u.pathnameBase]))}return a}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Zg){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Zg+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function M(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e,t){let n=R(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:V(i)}}(i,s),d=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],q=(new Set(z),["get",...z]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const Y=r.createContext(null);const X=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=r.createContext(null);function Q(){return null!=r.useContext(Y)}function J(){return Q()||u(!1),r.useContext(Y).location}function ee(e){r.useContext(G).static||r.useLayoutEffect(e)}function te(){let{isDataRoute:e}=r.useContext(X);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);ee((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t]);return i}():function(){Q()||u(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(G),{matches:s}=r.useContext(X),{pathname:a}=J(),o=JSON.stringify(D(s,n.v7_relativeSplatPath)),l=r.useRef(!1);ee((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=L(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,o,a,e]);return c}()}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(G),{matches:s}=r.useContext(X),{pathname:a}=J(),o=JSON.stringify(D(s,i.v7_relativeSplatPath));return r.useMemo((()=>L(e,JSON.parse(o),a,"path"===n)),[e,o,a,n])}function re(e,n,i,s){Q()||u(!1);let{navigator:a,static:o}=r.useContext(G),{matches:l}=r.useContext(X),c=l[l.length-1],d=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,m=J();if(n){var g;let e="string"===typeof n?p(n):n;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||u(!1),f=e}else f=m;let y=f.pathname||"/",b=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=!o&&i&&i.matches&&i.matches.length>0?i.matches:v(e,{pathname:b});let w=le(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:F([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,i,s);return n&&w?r.createElement(Y.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:t.Pop}},w):w}function ie(){let e=function(){var e;let t=r.useContext(Z),n=he(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const se=r.createElement(ie,null);class ae extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(X.Provider,{value:this.props.routeContext},r.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(X.Provider,{value:t},i)}function le(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight(((e,i,s)=>{let a,u=!1,h=null,f=null;var m;n&&(a=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||se,c&&(d<0&&0===s?(m="route-fallback",!1||me[m]||(me[m]=!0),u=!0,f=null):d===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?h:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(oe,{match:i,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ae,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=r.useContext(W);return t||u(!1),t}function he(e){let t=r.useContext(K);return t||u(!1),t}function fe(e){let t=function(){let e=r.useContext(X);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ge(e){let{to:t,replace:n,state:i,relative:s}=e;Q()||u(!1);let{future:a,static:o}=r.useContext(G),{matches:l}=r.useContext(X),{pathname:c}=J(),d=te(),h=L(t,D(l,a.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(h);return r.useEffect((()=>d(JSON.parse(f),{replace:n,state:i,relative:s})),[d,f,s,n,i]),null}function ye(e){u(!1)}function ve(e){let{basename:n="/",children:i=null,location:s,navigationType:a=t.Pop,navigator:o,static:l=!1,future:c}=e;Q()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:d,navigator:o,static:l,future:H({v7_relativeSplatPath:!1},c)})),[d,c,o,l]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,b=r.useMemo((()=>{let e=P(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}}),[d,f,m,g,y,v,a]);return null==b?null:r.createElement(G.Provider,{value:h},r.createElement(Y.Provider,{children:i,value:b}))}function be(e){let{children:t,location:n}=e;return re(xe(t),n)}new Promise((()=>{}));r.Component;function xe(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,xe(e.props.children,s));e.type!==ye&&u(!1),e.props.index&&e.props.children&&u(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=xe(e.props.children,s)),n.push(a)})),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ne=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(S2){}new Map;const je=i.startTransition;o.flushSync,i.useId;function Se(e){let{basename:t,children:n,future:i,window:s}=e,a=r.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,o)));let l=a.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&je?je((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.useEffect((()=>pe(i)),[i]),r.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=_e(e,Ne),{basename:g}=r.useContext(G),y=!1;if("string"===typeof d&&Ce.test(d)&&(n=d,Ee))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(S2){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Q()||u(!1);let{basename:i,navigator:s}=r.useContext(G),{hash:a,pathname:o,search:l}=ne(e,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:F([i,o])),s.createHref({pathname:c,search:l,hash:a})}(d,{relative:s}),b=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=te(),u=J(),d=ne(e,{relative:o});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:m(u)===m(d);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}}),[u,c,d,i,s,n,e,a,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});return r.createElement("a",we({},p,{href:n||v,onClick:y||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var Te,Ie;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Te||(Te={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ie||(Ie={}));const Ae=!1,Oe=!1,Pe="${JSCORE_VERSION}",Me=function(e,t){if(!e)throw Re(t)},Re=function(e){return new Error("Firebase Database ("+Pe+") INTERNAL ASSERT FAILED: "+e)},De=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(De(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Fe;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ue=function(e){const t=De(e);return Le.encodeByteArray(t,!0)},Be=function(e){return Ue(e).replace(/\./g,"")},Ve=function(e){try{return Le.decodeString(e,!0)}catch(S2){console.error("base64Decode failed: ",S2)}return null};function $e(e){return ze(void 0,e)}function ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ze(e[n],t[n]));return e}const qe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,He=()=>{try{return qe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API:"AIzaSyChJnuCK7QY2EXPTtF9Obp7mWyZXGfzsTE",REACT_APP_FIREBASE_APP_ID:"1:969191580797:web:128057ff7ebe656c3ffd14",REACT_APP_FIREBASE_DATABASE_URL:"https://smartecolock-94f5a-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_DOMAIN:"smartecolock-94f5a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-Q7GMNE9Q52",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"969191580797",REACT_APP_FIREBASE_PROJECT_ID:"smartecolock-94f5a",REACT_APP_FIREBASE_STORAGE_BUCKET:"smartecolock-94f5a.firebasestorage.app",REACT_APP_GEMINI_API:"AIzaSyCnBauXgFmxyWWO5VHcGUNToGy7lulbN6E"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(S2){return}const t=e&&Ve(e[1]);return t&&JSON.parse(t)})()}catch(S2){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S2}`)}},We=e=>{var t,n;return null===(n=null===(t=He())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ke=e=>{const t=We(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ge=()=>{var e;return null===(e=He())||void 0===e?void 0:e.config},Ye=e=>{var t;return null===(t=He())||void 0===t?void 0:t[`_${e}`]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ze(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(s)),""].join(".")}function Qe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Je(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function et(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function tt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function nt(){return!0===Ae||!0===Oe}function rt(){return!function(){var e;const t=null===(e=He())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(S2){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function it(){try{return"object"===typeof indexedDB}catch(S2){return!1}}function st(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Zg){t(Zg)}}))}class at extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,at.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ot.prototype.create)}}class ot{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(lt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new at(n,s,t)}}const lt=/\{\$([^}]+)}/g;function ct(e){return JSON.parse(e)}function ut(e){return JSON.stringify(e)}const dt=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=ct(Ve(s[0])||""),n=ct(Ve(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(S2){}return{header:t,claims:n,data:r,signature:i}};function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function mt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function gt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(yt(n)&&yt(s)){if(!gt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yt(e){return null!==e&&"object"===typeof e}function vt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function bt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function xt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class wt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(o^l),i=1518500249):(r=a^o^l,i=1859775393):u<60?(r=a&o|l&(a|o),i=2400959708):(r=a^o^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class _t{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Nt),void 0===r.error&&(r.error=Nt),void 0===r.complete&&(r.complete=Nt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(S2){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(S2){"undefined"!==typeof console&&console.error&&console.error(S2)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Nt(){}function jt(e,t){return`${e} failed: ${t} argument `}const St=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Et(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Ct(e){return e&&e._delegate?e._delegate:e}class kt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tt="[DEFAULT]";class It{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Xe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(S2){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(S2){if(r)return null;throw S2}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Tt})}catch(S2){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(S2){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Tt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt;return this.component?this.component.multipleInstances?e:Tt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class At{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new It(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ot=[];var Pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pt||(Pt={}));const Mt={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Rt=Pt.INFO,Dt={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Lt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Dt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class Ft{constructor(e){this.name=e,this._logLevel=Rt,this._logHandler=Lt,this._userLogHandler=null,Ot.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Mt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}let Ut,Bt;const Vt=new WeakMap,$t=new WeakMap,zt=new WeakMap,qt=new WeakMap,Ht=new WeakMap;let Wt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Kt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Xt(this),n),Yt(Vt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yt(e.apply(Xt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Xt(this),t,...r);return zt.set(s,t.sort?t.sort():[t]),Yt(s)}}function Gt(e){return"function"===typeof e?Kt(e):(e instanceof IDBTransaction&&function(e){if($t.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));$t.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,Ut||(Ut=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Wt):e)}function Yt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Yt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Vt.set(t,e)})).catch((()=>{})),Ht.set(t,e),t}(e);if(qt.has(e))return qt.get(e);const t=Gt(e);return t!==e&&(qt.set(e,t),Ht.set(t,e)),t}const Xt=e=>Ht.get(e);function Zt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Yt(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Yt(a.result),e.oldVersion,e.newVersion,Yt(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}const Qt=["get","getKey","getAll","getAllKeys","count"],Jt=["put","add","delete","clear"],en=new Map;function tn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(en.get(t))return en.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Jt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Qt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return en.set(t,s),s}Wt=(e=>({...e,get:(t,n,r)=>tn(t,n)||e.get(t,n,r),has:(t,n)=>!!tn(t,n)||e.has(t,n)}))(Wt);class nn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const rn="@firebase/app",sn="0.10.13",an=new Ft("@firebase/app"),on="@firebase/app-compat",ln="@firebase/analytics-compat",cn="@firebase/analytics",un="@firebase/app-check-compat",dn="@firebase/app-check",hn="@firebase/auth",fn="@firebase/auth-compat",mn="@firebase/database",pn="@firebase/data-connect",gn="@firebase/database-compat",yn="@firebase/functions",vn="@firebase/functions-compat",bn="@firebase/installations",xn="@firebase/installations-compat",wn="@firebase/messaging",_n="@firebase/messaging-compat",Nn="@firebase/performance",jn="@firebase/performance-compat",Sn="@firebase/remote-config",En="@firebase/remote-config-compat",Cn="@firebase/storage",kn="@firebase/storage-compat",Tn="@firebase/firestore",In="@firebase/vertexai-preview",An="@firebase/firestore-compat",On="firebase",Pn="[DEFAULT]",Mn={[rn]:"fire-core",[on]:"fire-core-compat",[cn]:"fire-analytics",[ln]:"fire-analytics-compat",[dn]:"fire-app-check",[un]:"fire-app-check-compat",[hn]:"fire-auth",[fn]:"fire-auth-compat",[mn]:"fire-rtdb",[pn]:"fire-data-connect",[gn]:"fire-rtdb-compat",[yn]:"fire-fn",[vn]:"fire-fn-compat",[bn]:"fire-iid",[xn]:"fire-iid-compat",[wn]:"fire-fcm",[_n]:"fire-fcm-compat",[Nn]:"fire-perf",[jn]:"fire-perf-compat",[Sn]:"fire-rc",[En]:"fire-rc-compat",[Cn]:"fire-gcs",[kn]:"fire-gcs-compat",[Tn]:"fire-fst",[An]:"fire-fst-compat",[In]:"fire-vertex","fire-js":"fire-js",[On]:"fire-js-all"},Rn=new Map,Dn=new Map,Ln=new Map;function Fn(e,t){try{e.container.addComponent(t)}catch(S2){an.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,S2)}}function Un(e){const t=e.name;if(Ln.has(t))return an.debug(`There were multiple attempts to register component ${t}.`),!1;Ln.set(t,e);for(const n of Rn.values())Fn(n,e);for(const n of Dn.values())Fn(n,e);return!0}function Bn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vn(e){return void 0!==e.settings}const $n=new ot("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class zn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new kt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}const qn="10.14.1";function Hn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Pn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $n.create("bad-app-name",{appName:String(i)});if(n||(n=Ge()),!n)throw $n.create("no-options");const s=Rn.get(i);if(s){if(gt(n,s.options)&&gt(r,s.config))return s;throw $n.create("duplicate-app",{appName:i})}const a=new At(i);for(const l of Ln.values())a.addComponent(l);const o=new zn(n,r,a);return Rn.set(i,o),o}function Wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;const t=Rn.get(e);if(!t&&e===Pn&&Ge())return Hn();if(!t)throw $n.create("no-app",{appName:e});return t}function Kn(e,t,n){var r;let i=null!==(r=Mn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void an.warn(e.join(" "))}Un(new kt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Gn="firebase-heartbeat-store";let Yn=null;function Xn(){return Yn||(Yn=Zt("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Gn)}catch(S2){console.warn(S2)}}}).catch((e=>{throw $n.create("idb-open",{originalErrorMessage:e.message})}))),Yn}async function Zn(e,t){try{const n=(await Xn()).transaction(Gn,"readwrite"),r=n.objectStore(Gn);await r.put(t,Qn(e)),await n.done}catch(S2){if(S2 instanceof at)an.warn(S2.message);else{const t=$n.create("idb-set",{originalErrorMessage:null===S2||void 0===S2?void 0:S2.message});an.warn(t.message)}}}function Qn(e){return`${e.name}!${e.options.appId}`}class Jn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=er();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(S2){an.warn(S2)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=er(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),nr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Be(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(S2){return an.warn(S2),""}}}function er(){return(new Date).toISOString().substring(0,10)}class tr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!it()&&st().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Xn()).transaction(Gn),n=await t.objectStore(Gn).get(Qn(e));return await t.done,n}catch(S2){if(S2 instanceof at)an.warn(S2.message);else{const t=$n.create("idb-get",{originalErrorMessage:null===S2||void 0===S2?void 0:S2.message});an.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nr(e){return Be(JSON.stringify({version:2,heartbeats:e})).length}var rr;rr="",Un(new kt("platform-logger",(e=>new nn(e)),"PRIVATE")),Un(new kt("heartbeat",(e=>new Jn(e)),"PRIVATE")),Kn(rn,sn,rr),Kn(rn,sn,"esm2017"),Kn("fire-js","");function ir(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function sr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ar=sr,or=new ot("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lr=new Ft("@firebase/auth");function cr(e){if(lr.logLevel<=Pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lr.error(`Auth (${qn}): ${e}`,...n)}}function ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw mr(e,...n)}function dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mr(e,...n)}function hr(e,t,n){const r=Object.assign(Object.assign({},ar()),{[t]:n});return new ot("auth","Firebase",r).create(t,{appName:e.name})}function fr(e){return hr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return or.create(e,...n)}function pr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw mr(t,...r)}}function gr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw cr(t),new Error(t)}function yr(e,t){e||gr(t)}function vr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function br(){return"http:"===xr()||"https:"===xr()}function xr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class wr{constructor(e,t){this.shortDelay=e,this.longDelay=t,yr(t>e,"Short delay should be less than long delay!"),this.isMobile=Je()||tt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(br()||et()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _r(e,t){yr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Nr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Sr=new wr(3e4,6e4);function Er(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Cr(e,t,n,r){return kr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=vt(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Nr.fetch()(Ir(e,e.config.apiHost,n,a),l)}))}async function kr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},jr),t);try{const t=new Or(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Pr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Pr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Pr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Pr(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw hr(e,o,a);ur(e,o)}}catch(S2){if(S2 instanceof at)throw S2;ur(e,"network-request-failed",{message:String(S2)})}}async function Tr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Cr(e,t,n,r,i);return"mfaPendingCredential"in s&&ur(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ir(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?_r(e.config,i):`${e.config.apiScheme}://${i}`}function Ar(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Or{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(dr(this.auth,"network-request-failed"))),Sr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dr(e,t,r);return i.customData._tokenResponse=n,i}function Mr(e){return void 0!==e&&void 0!==e.enterprise}class Rr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ar(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Dr(e,t){return Cr(e,"GET","/v2/recaptchaConfig",Er(e,t))}async function Lr(e,t){return Cr(e,"POST","/v1/accounts:lookup",t)}function Fr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(S2){}}function Ur(e){return 1e3*Number(e)}function Br(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return cr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ve(n);return e?JSON.parse(e):(cr("Failed to decode base64 JWT payload"),null)}catch(S2){return cr("Caught error parsing JWT payload as JSON",null===S2||void 0===S2?void 0:S2.toString()),null}}function Vr(e){const t=Br(e);return pr(t,"internal-error"),pr("undefined"!==typeof t.exp,"internal-error"),pr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function $r(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(S2){throw S2 instanceof at&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(S2)&&e.auth.currentUser===e&&await e.auth.signOut(),S2}}class zr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(S2){return void("auth/network-request-failed"===(null===S2||void 0===S2?void 0:S2.code)&&this.schedule(!0))}this.schedule()}}class qr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fr(this.lastLoginAt),this.creationTime=Fr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await $r(e,Lr(n,{idToken:r}));pr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Wr(s.providerUserInfo):[],o=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new qr(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function Wr(e){return e.map((e=>{var{providerId:t}=e,n=ir(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Kr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pr(e.idToken,"internal-error"),pr("undefined"!==typeof e.idToken,"internal-error"),pr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Vr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pr(0!==e.length,"internal-error");const t=Vr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(pr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await kr(e,{},(async()=>{const n=vt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Ir(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Nr.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Kr;return n&&(pr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(pr("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(pr("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kr,this.toJSON())}_performRefresh(){return gr("not implemented")}}function Gr(e,t){pr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Yr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ir(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await $r(this,this.stsTokenManager.getToken(this.auth,e));return pr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ct(e),r=await n.getIdToken(t),i=Br(r);pr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fr(Ur(i.auth_time)),issuedAtTime:Fr(Ur(i.iat)),expirationTime:Fr(Ur(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ct(e);await Hr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Hr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await $r(this,async function(e,t){return Cr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:_}=t;pr(v&&_,e,"internal-error");const N=Kr.fromJSON(this.name,_);pr("string"===typeof v,e,"internal-error"),Gr(u,e.name),Gr(d,e.name),pr("boolean"===typeof b,e,"internal-error"),pr("boolean"===typeof x,e,"internal-error"),Gr(h,e.name),Gr(f,e.name),Gr(m,e.name),Gr(p,e.name),Gr(g,e.name),Gr(y,e.name);const j=new Yr({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:N,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(j.providerData=w.map((e=>Object.assign({},e)))),p&&(j._redirectEventId=p),j}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Kr;r.updateFromServerResponse(t);const i=new Yr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Hr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];pr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Wr(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Kr;a.updateFromIdToken(n);const o=new Yr({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new qr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const Xr=new Map;function Zr(e){yr(e instanceof Function,"Expected a class definition");let t=Xr.get(e);return t?(yr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xr.set(e,t),t)}class Qr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qr.type="NONE";const Jr=Qr;function ei(e,t,n){return`firebase:${e}:${t}:${n}`}class ti{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ei(this.userKey,r.apiKey,i),this.fullPersistenceKey=ei("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ti(Zr(Jr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Zr(Jr);const s=ei(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Yr._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new ti(i,e,n)):new ti(i,e,n)}}function ni(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ai(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ri(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(li(t))return"Blackberry";if(ci(t))return"Webos";if(ii(t))return"Safari";if((t.includes("chrome/")||si(t))&&!t.includes("edge/"))return"Chrome";if(oi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/firefox\//i.test(e)}function ii(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/crios\//i.test(e)}function ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iemobile/i.test(e)}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/android/i.test(e)}function li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/blackberry/i.test(e)}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/webos/i.test(e)}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function di(){return function(){const e=Qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return ui(e)||oi(e)||ci(e)||li(e)||/windows phone/i.test(e)||ai(e)}function fi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ni(Qe());break;case"Worker":t=`${ni(Qe())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${qn}/${r}`}class mi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(S2){r(S2)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(S2){t.reverse();for(const n of t)try{n()}catch(r5){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===S2||void 0===S2?void 0:S2.message})}}}class pi{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class gi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vi(this),this.idTokenSubscription=new vi(this),this.beforeStateQueue=new mi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=or,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ti.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(S2){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Lr(this,{idToken:e}),n=await Yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(S2){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(S2)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(S2){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hr(e)}catch(S2){if("auth/network-request-failed"!==(null===S2||void 0===S2?void 0:S2.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(fr(this));const t=e?Ct(e):null;return t&&pr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&pr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Vn(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(fr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Zr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Cr(e,"GET","/v2/passwordPolicy",Er(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new pi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ot("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Cr(e,"POST","/v2/accounts:revokeToken",Er(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zr(e)||this._popupRedirectResolver;pr(t,this,"argument-error"),this.redirectPersistenceManager=await ti.create(this,[Zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pr(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(lr.logLevel<=Pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lr.warn(`Auth (${qn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function yi(e){return Ct(e)}class vi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new _t(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xi(e){return bi.loadJS(e)}function wi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class _i{constructor(e){this.type="recaptcha-enterprise",this.auth=yi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Mr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Dr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Rr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Mr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=bi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),xi(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Ni(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new _i(e);let s;try{s=await i.verify(n)}catch(Zg){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ji(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ni(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Ni(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Si(e,t,n){const r=yi(e);pr(r._canInitEmulator,r,"emulator-config-failed"),pr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ei(t),{host:a,port:o}=function(e){const t=Ei(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ci(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ci(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ei(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ci(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ki{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,t){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function Ti(e,t){return Cr(e,"POST","/v1/accounts:signUp",t)}async function Ii(e,t){return Tr(e,"POST","/v1/accounts:signInWithPassword",Er(e,t))}async function Ai(e,t){return Cr(e,"POST","/v1/accounts:sendOobCode",Er(e,t))}async function Oi(e,t){return Ai(e,t)}class Pi extends ki{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Pi(e,t,"password")}static _fromEmailAndCode(e,t){return new Pi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ji(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ii);case"emailLink":return async function(e,t){return Tr(e,"POST","/v1/accounts:signInWithEmailLink",Er(e,t))}(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ji(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ti);case"emailLink":return async function(e,t){return Tr(e,"POST","/v1/accounts:signInWithEmailLink",Er(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Mi(e,t){return Tr(e,"POST","/v1/accounts:signInWithIdp",Er(e,t))}class Ri extends ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ir(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ri(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Mi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Mi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vt(t)}return e}}const Di={USER_NOT_FOUND:"user-not-found"};class Li extends ki{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Li({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Li({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Tr(e,"POST","/v1/accounts:signInWithPhoneNumber",Er(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Tr(e,"POST","/v1/accounts:signInWithPhoneNumber",Er(e,t));if(n.temporaryProof)throw Pr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Tr(e,"POST","/v1/accounts:signInWithPhoneNumber",Er(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Di)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Li({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Fi{constructor(e){var t,n,r,i,s,a;const o=bt(xt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);pr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=bt(xt(e)).link,n=t?bt(xt(t)).deep_link_id:null,r=bt(xt(e)).deep_link_id;return(r?bt(xt(r)).link:null)||r||n||t||e}(e);try{return new Fi(t)}catch(n){return null}}}class Ui{constructor(){this.providerId=Ui.PROVIDER_ID}static credential(e,t){return Pi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Fi.parseLink(t);return pr(n,"argument-error"),Pi._fromEmailAndCode(e,n.code,n.tenantId)}}Ui.PROVIDER_ID="password",Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Bi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vi extends Bi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $i extends Vi{constructor(){super("facebook.com")}static credential(e){return Ri._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $i.credential(t.oauthAccessToken)}catch(n){return null}}}$i.FACEBOOK_SIGN_IN_METHOD="facebook.com",$i.PROVIDER_ID="facebook.com";class zi extends Vi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ri._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zi.credential(n,r)}catch(i){return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com",zi.PROVIDER_ID="google.com";class qi extends Vi{constructor(){super("github.com")}static credential(e){return Ri._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qi.credential(t.oauthAccessToken)}catch(n){return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com",qi.PROVIDER_ID="github.com";class Hi extends Vi{constructor(){super("twitter.com")}static credential(e,t){return Ri._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Hi.credential(n,r)}catch(i){return null}}}async function Wi(e,t){return Tr(e,"POST","/v1/accounts:signUp",Er(e,t))}Hi.TWITTER_SIGN_IN_METHOD="twitter.com",Hi.PROVIDER_ID="twitter.com";class Ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Yr._fromIdTokenResponse(e,n,r),s=Gi(n);return new Ki({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Gi(n);return new Ki({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Gi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Yi extends at{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Yi.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Yi(e,t,n,r)}}function Xi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Yi._fromErrorAndOperation(e,n,t,r);throw n}))}async function Zi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await $r(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ki._forOperation(e,"link",r)}async function Qi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Vn(r.app))return Promise.reject(fr(r));const i="reauthenticate";try{const s=await $r(e,Xi(r,i,t,e),n);pr(s.idToken,r,"internal-error");const a=Br(s.idToken);pr(a,r,"internal-error");const{sub:o}=a;return pr(e.uid===o,r,"user-mismatch"),Ki._forOperation(e,i,s)}catch(S2){throw"auth/user-not-found"===(null===S2||void 0===S2?void 0:S2.code)&&ur(r,"user-mismatch"),S2}}async function Ji(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Vn(e.app))return Promise.reject(fr(e));const r="signIn",i=await Xi(e,r,t),s=await Ki._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function es(e,t){return Ji(yi(e),t)}async function ts(e,t){return Qi(Ct(e),t)}function ns(e,t,n){var r;pr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),pr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(pr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function rs(e){const t=yi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function is(e,t,n){if(Vn(e.app))return Promise.reject(fr(e));const r=yi(e),i=ji(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wi),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&rs(e),t})),a=await Ki._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function ss(e,t,n){return Vn(e.app)?Promise.reject(fr(e)):es(Ct(e),Ui.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&rs(e),t}))}function as(e,t){return os(Ct(e),null,t)}async function os(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await $r(e,async function(e,t){return Cr(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}function ls(e){return Ct(e).signOut()}new WeakMap;const cs="__sak";class us{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cs,"1"),this.storage.removeItem(cs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ds extends us{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);di()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ds.type="LOCAL";const hs=ds;class fs extends us{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fs.type="SESSION";const ms=fs;class ps{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ps(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function gs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ps.receivers=[];class ys{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=gs("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function vs(){return window}function bs(){return"undefined"!==typeof vs().WorkerGlobalScope&&"function"===typeof vs().importScripts}const xs="firebaseLocalStorageDb",ws="firebaseLocalStorage",_s="fbase_key";class Ns{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function js(e,t){return e.transaction([ws],t?"readwrite":"readonly").objectStore(ws)}function Ss(){const e=indexedDB.open(xs,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ws,{keyPath:_s})}catch(S2){n(S2)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ws)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(xs);return new Ns(e).toPromise()}(),t(await Ss()))}))}))}async function Es(e,t,n){const r=js(e,!0).put({[_s]:t,value:n});return new Ns(r).toPromise()}function Cs(e,t){const n=js(e,!0).delete(t);return new Ns(n).toPromise()}class ks{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ss()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(S2){if(t++>3)throw S2;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ps._getInstance(bs()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ys(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ss();return await Es(e,cs,"1"),await Cs(e,cs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Es(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=js(e,!1).get(t),r=await new Ns(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Cs(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=js(e,!1).getAll();return new Ns(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ks.type="LOCAL";const Ts=ks;wi("rcb"),new wr(3e4,6e4);const Is="recaptcha";async function As(e,t,n){var r;const i=await n.verify();try{let s;if(pr("string"===typeof i,e,"argument-error"),pr(n.type===Is,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){pr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Cr(e,"POST","/v2/accounts/mfaEnrollment:start",Er(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{pr("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;pr(n,e,"missing-multi-factor-info");const a=await function(e,t){return Cr(e,"POST","/v2/accounts/mfaSignIn:start",Er(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Cr(e,"POST","/v1/accounts:sendVerificationCode",Er(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Os{constructor(e){this.providerId=Os.PROVIDER_ID,this.auth=yi(e)}verifyPhoneNumber(e,t){return As(this.auth,e,Ct(t))}static credential(e,t){return Li._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Os.credentialFromTaggedObject(t)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Li._fromTokenResponse(n,r):null}}function Ps(e,t){return t?Zr(t):(pr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Os.PROVIDER_ID="phone",Os.PHONE_SIGN_IN_METHOD="phone";class Ms extends ki{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rs(e){return Ji(e.auth,new Ms(e),e.bypassAuthState)}function Ds(e){const{auth:t,user:n}=e;return pr(n,t,"internal-error"),Qi(n,new Ms(e),e.bypassAuthState)}async function Ls(e){const{auth:t,user:n}=e;return pr(n,t,"internal-error"),Zi(n,new Ms(e),e.bypassAuthState)}class Fs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(S2){this.reject(S2)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(S2){this.reject(S2)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rs;case"linkViaPopup":case"linkViaRedirect":return Ls;case"reauthViaPopup":case"reauthViaRedirect":return Ds;default:ur(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Us=new wr(2e3,1e4);class Bs extends Fs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pr(e,this.auth,"internal-error"),e}async onExecution(){yr(1===this.filter.length,"Popup operations only handle one event");const e=gs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(dr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Us.get())};e()}}Bs.currentPopupAction=null;const Vs=new Map;class $s extends Fs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Vs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Hs(t),r=qs(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(S2){e=()=>Promise.reject(S2)}Vs.set(this.auth._key(),e)}return this.bypassAuthState||Vs.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function zs(e,t){Vs.set(e._key(),t)}function qs(e){return Zr(e._redirectPersistence)}function Hs(e){return ei("pendingRedirect",e.config.apiKey,e.name)}async function Ws(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Vn(e.app))return Promise.reject(fr(e));const r=yi(e),i=Ps(r,t),s=new $s(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ks{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ys(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ys(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gs(e))}saveEventToCache(e){this.cachedEventUids.add(Gs(e)),this.lastProcessedEventTime=Date.now()}}function Gs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ys(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Xs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zs=/^https?/;async function Qs(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Cr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Js(r))return}catch(n){}ur(e,"unauthorized-domain")}function Js(e){const t=vr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Zs.test(n))return!1;if(Xs.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ea=new wr(3e4,6e4);function ta(){const e=vs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function na(e){return new Promise(((t,n)=>{var r,i,s;function a(){ta(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ta(),n(dr(e,"network-request-failed"))},timeout:ea.get()})}if(null===(i=null===(r=vs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=vs().gapi)||void 0===s?void 0:s.load)){const t=wi("iframefcb");return vs()[t]=()=>{gapi.load?a():n(dr(e,"network-request-failed"))},xi(`${bi.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw ra=null,e}))}let ra=null;const ia=new wr(5e3,15e3),sa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oa(e){const t=e.config;pr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_r(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:qn},i=aa.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vt(r).slice(1)}`}async function la(e){const t=await function(e){return ra=ra||na(e),ra}(e),n=vs().gapi;return pr(n,e,"internal-error"),t.open({where:document.body,url:oa(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=dr(e,"network-request-failed"),s=vs().setTimeout((()=>{r(i)}),ia.get());function a(){vs().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const ca={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ua{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(S2){}}}function da(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ca),{width:r.toString(),height:i.toString(),top:s,left:a}),c=Qe().toLowerCase();n&&(o=si(c)?"_blank":n),ri(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return ui(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new ua(null);const d=window.open(t||"",o,u);pr(d,e,"popup-blocked");try{d.focus()}catch(S2){}return new ua(d)}const ha="__/auth/handler",fa="emulator/auth/handler",ma=encodeURIComponent("fac");async function pa(e,t,n,r,i,s){pr(e.config.authDomain,e,"auth-domain-config-required"),pr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:qn,eventId:i};if(t instanceof Bi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",mt(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Vi){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${ma}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${ha}`;return _r(t,fa)}(e)}?${vt(o).slice(1)}${c}`}const ga="webStorageSupport";const ya=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ms,this._completeRedirectFn=Ws,this._overrideRedirectResult=zs}async _openPopup(e,t,n,r){var i;yr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return da(e,await pa(e,t,n,vr(),r),gs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){vs().location.href=e}(await pa(e,t,n,vr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(yr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await la(e),n=new Ks(e);return t.register("authEvent",(t=>{pr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ga,{type:ga},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ga];void 0!==i&&t(!!i),ur(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Qs(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hi()||ii()||ui()}};var va="@firebase/auth",ba="1.7.9";class xa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const wa=Ye("authIdTokenMaxAge")||300;let _a=null;var Na;!function(e){bi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=dr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Na="Browser",Un(new kt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;pr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Na,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fi(Na)},c=new gi(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Un(new kt("auth-internal",(e=>(e=>new xa(e))(yi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(va,ba,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Na)),Kn(va,ba,"esm2017");Kn("firebase","10.14.1","app");const ja="@firebase/installations",Sa="0.6.9",Ea=1e4,Ca=`w:${Sa}`,ka="FIS_v2",Ta=36e5,Ia=new ot("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Aa(e){return e instanceof at&&e.code.includes("request-failed")}function Oa(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Pa(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ma(e,t){const n=(await t.json()).error;return Ia.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Ra(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Da(e,t){let{refreshToken:n}=t;const r=Ra(e);return r.append("Authorization",function(e){return`${ka} ${e}`}(n)),r}async function La(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Fa(e){return new Promise((t=>{setTimeout(t,e)}))}const Ua=/^[cdef][\w-]{21}$/;function Ba(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(e);return Ua.test(t)?t:""}catch(e){return""}}function Va(e){return`${e.appName}!${e.appId}`}const $a=new Map;function za(e,t){const n=Va(e);qa(n,t),function(e,t){const n=Wa();n&&n.postMessage({key:e,fid:t});Ka()}(n,t)}function qa(e,t){const n=$a.get(e);if(n)for(const r of n)r(t)}let Ha=null;function Wa(){return!Ha&&"BroadcastChannel"in self&&(Ha=new BroadcastChannel("[Firebase] FID Change"),Ha.onmessage=e=>{qa(e.data.key,e.data.fid)}),Ha}function Ka(){0===$a.size&&Ha&&(Ha.close(),Ha=null)}const Ga="firebase-installations-store";let Ya=null;function Xa(){return Ya||(Ya=Zt("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ga)}})),Ya}async function Za(e,t){const n=Va(e),r=(await Xa()).transaction(Ga,"readwrite"),i=r.objectStore(Ga),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||za(e,t.fid),t}async function Qa(e){const t=Va(e),n=(await Xa()).transaction(Ga,"readwrite");await n.objectStore(Ga).delete(t),await n.done}async function Ja(e,t){const n=Va(e),r=(await Xa()).transaction(Ga,"readwrite"),i=r.objectStore(Ga),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||za(e,a.fid),a}async function eo(e){let t;const n=await Ja(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Ba(),registrationStatus:0};return ro(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Ia.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Oa(n),a=Ra(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:ka,appId:n.appId,sdkVersion:Ca},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await La((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Pa(e.authToken)}}throw await Ma("Create Installation",u)}(e,t);return Za(e.appConfig,n)}catch(S2){throw Aa(S2)&&409===S2.customData.serverCode?await Qa(e.appConfig):await Za(e.appConfig,{fid:t.fid,registrationStatus:0}),S2}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:to(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function to(e){let t=await no(e.appConfig);for(;1===t.registrationStatus;)await Fa(100),t=await no(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await eo(e);return n||t}return t}function no(e){return Ja(e,(e=>{if(!e)throw Ia.create("installation-not-found");return ro(e)}))}function ro(e){return 1===(t=e).registrationStatus&&t.registrationTime+Ea<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function io(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Oa(e)}/${n}/authTokens:generate`}(n,t),s=Da(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Ca,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await La((()=>fetch(i,l)));if(c.ok){return Pa(await c.json())}throw await Ma("Generate Auth Token",c)}async function so(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Ja(e.appConfig,(r=>{if(!oo(r))throw Ia.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ta}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await ao(e.appConfig);for(;1===n.authToken.requestStatus;)await Fa(100),n=await ao(e.appConfig);const r=n.authToken;return 0===r.requestStatus?so(e,t):r}(e,n),r;{if(!navigator.onLine)throw Ia.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await io(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Za(e.appConfig,r),n}catch(S2){if(!Aa(S2)||401!==S2.customData.serverCode&&404!==S2.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Za(e.appConfig,n)}else await Qa(e.appConfig);throw S2}}(e,n),n}}));return t?await t:r.authToken}function ao(e){return Ja(e,(e=>{if(!oo(e))throw Ia.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Ea<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function oo(e){return void 0!==e&&2===e.registrationStatus}async function lo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await eo(e);t&&await t}(n);return(await so(n,t)).token}function co(e){return Ia.create("missing-app-config-values",{valueName:e})}const uo="installations",ho=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw co("App Configuration");if(!e.name)throw co("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw co(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Bn(t,"heartbeat"),_delete:()=>Promise.resolve()}},fo=e=>{const t=Bn(e.getProvider("app").getImmediate(),uo).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await eo(t);return r?r.catch(console.error):so(t).catch(console.error),n.fid}(t),getToken:e=>lo(t,e)}};Un(new kt(uo,ho,"PUBLIC")),Un(new kt("installations-internal",fo,"PRIVATE")),Kn(ja,Sa),Kn(ja,Sa,"esm2017");const mo="analytics",po="https://www.googletagmanager.com/gtag/js",go=new Ft("@firebase/analytics"),yo=new ot("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function vo(e){if(!e.startsWith(po)){const t=yo.create("invalid-gtag-resource",{gtagURL:e});return go.warn(t.message),""}return e}function bo(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function xo(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:vo}),r=document.createElement("script"),i=`${po}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function wo(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await bo(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(S2){go.error(S2)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await bo(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(S2){go.error(S2)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(S2){go.error(S2)}}}const _o=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function No(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function jo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_o,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw yo.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw yo.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Eo;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),So({appId:r,apiKey:i,measurementId:s},a,o,t)}async function So(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_o;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(yo.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(S2){if(l)return go.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===S2||void 0===S2?void 0:S2.message}]`),{appId:o,measurementId:l};throw S2}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:No(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw yo.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(S2){const r=S2;if(!function(e){if(!(e instanceof at)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(o),l)return go.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:o,measurementId:l};throw S2}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?Et(i,s.intervalMillis,30):Et(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(o,u),go.debug(`Calling attemptFetch again in ${c} millis`),So(e,u,n,s)}}class Eo{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Co,ko;function To(e){ko=e}function Io(e){Co=e}async function Ao(e,t,n,r,i,s,a){var o;const l=jo(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&go.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>go.error(e))),t.push(l);const c=async function(){if(!it())return go.warn(yo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await st()}catch(S2){return go.warn(yo.create("indexeddb-unavailable",{errorInfo:null===S2||void 0===S2?void 0:S2.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(po)&&n.src.includes(e))return n;return null})(s)||xo(s,u.measurementId),ko&&(i("consent","default",ko),To(void 0)),i("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),Co&&(i("set",Co),Io(void 0)),u.measurementId}class Oo{constructor(e){this.app=e}_delete(){return delete Po[this.app.options.appId],Promise.resolve()}}let Po={},Mo=[];const Ro={};let Do,Lo,Fo="dataLayer",Uo="gtag",Bo=!1;function Vo(){const e=[];if(et()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=yo.create("invalid-analytics-context",{errorInfo:t});go.warn(n.message)}}function $o(e,t,n){Vo();const r=e.options.appId;if(!r)throw yo.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw yo.create("no-api-key");go.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Po[r])throw yo.create("already-exists",{id:r});if(!Bo){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Fo);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=wo(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Po,Mo,Ro,Fo,Uo);Lo=e,Do=t,Bo=!0}Po[r]=Ao(e,Mo,Ro,t,Do,Fo,n);return new Oo(e)}function zo(e,t,n,r){e=Ct(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Lo,Po[e.app.options.appId],t,n,r).catch((e=>go.error(e)))}const qo="@firebase/analytics",Ho="0.10.8";Un(new kt(mo,((e,t)=>{let{options:n}=t;return $o(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Un(new kt("analytics-internal",(function(e){try{const t=e.getProvider(mo).getImmediate();return{logEvent:(e,n,r)=>zo(t,e,n,r)}}catch(S2){throw yo.create("interop-component-reg-failed",{reason:S2})}}),"PRIVATE")),Kn(qo,Ho),Kn(qo,Ho,"esm2017");var Wo,Ko,Go="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Yo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new p(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),p=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,m(n,2*i+2*s),n[2*i+2*s+1]+=l*g,m(n,2*i+2*s+1),n[2*i+2*s+1]+=f*p,m(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,m(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ko=Yo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Wo=Yo.Integer=r}).apply("undefined"!==typeof Go?Go:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Xo,Zo,Qo,Jo,el,tl,nl,rl,il="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},sl={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof il&&il];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function N(e){i.setTimeout((()=>{throw e}),0)}function j(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new E),(e=>e.reset()));class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,k=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=j();){try{e.h.call(e.g)}catch(yD){N(yD)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}k=!1};function O(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(yD){}return e}();function R(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(D2){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&R.aa.h.call(this)}}d(R,P);var D={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=z(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=J(e);if(l||(e[q]=l=new V(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Q;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Z(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=z(s=e.g[t],n,r,i))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])$(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Z(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?($(n,e),0==n.h&&(n.src=null,t[q]=null)):B(e)}}}function Z(e){return e in H?H[e]:H[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new R(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function J(e){return(e=e[q])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;w(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&$(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,O),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){O.call(this),this.h=e,this.g={}}d(le,O);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function be(){P.call(this,"c")}d(ve,P),d(be,P);var xe={},we=null;function _e(){return we=we||new ne}function Ne(e){P.call(this,xe.La,e)}function je(e){const t=_e();re(t,new Ne(t))}function Se(e,t){P.call(this,xe.STAT_EVENT,e),this.stat=t}function Ee(e){const t=_e();re(t,new Se(t,e))}function Ce(e,t){P.call(this,xe.Ma,e),this.size=t}function ke(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Te(){this.g=!0}function Ie(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",d(Ne,P),xe.STAT_EVENT="statevent",d(Se,P),xe.Ma="timingevent",d(Ce,P),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ae,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Me,me),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Ae=new Me;var Le={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),ze(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),jt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),je(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function $e(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ke(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||on(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(C2){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}nn(n),Ee(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=ke(c(n.Za,n),6e3));if(1>=Qe(n.h)&&n.ca){try{n.ca()}catch(C2){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),ze(o)),r.g=a}else tn(r);0<n.i.length&&Zt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Gt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}je()}catch(C2){}}Re.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||je(),He(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Ht(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),Ke(this),We(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=$e(this,o),e==Fe){4==h&&(this.s=4,Ee(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ee(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ge(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),rn(d),d.M=!0,Ee(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ie(this.i,this.l,o,null),Ge(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?on(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Ke(this),We(this)}}}catch(al){}},Re.prototype.cancel=function(){this.J=!0,Ke(this)},Re.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(je(),Ee(17)),Ke(this),this.s=2,We(this)):qe(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ze(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),jt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var pt=/[#\/\?@]/g,gt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _t(e,t){wt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nt(e,t){return wt(e),t=St(e,t),e.g.has(t)}function jt(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(D2){}}function Ct(){this.g=new fe}function kt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(S2){throw t.push(r+"type="+encodeURIComponent("_badmap")),S2}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Dt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){wt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)Nt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,Nt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Tt,me),Tt.prototype.g=function(){return new It(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),d(It,ne),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Pt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Dt,ne);var Lt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),$t(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Lt.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Bt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){zt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(S2){}}}function zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(cl){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Jt(e,n),(t=new Re(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(R2){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Zt(e){if(!Ze(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||I(),k||(C(),k=!0),T.add(t,e),e.B=0}}function Qt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Rt(r,e.m,e.o),n=new Re(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function Jt(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{kt(o,e,"req"+n+"_")}catch(al){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||I(),k||(C(),k=!0),T.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ke(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Rt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Be(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new Ce(r,n)),Zt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=ke(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Te;if(i.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout((()=>{n.abort(),Et(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)})).catch((()=>{clearTimeout(r),Et(0,0,!1,t)}))}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Jt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Dt(new Tt({eb:n})):new Dt(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function pn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function gn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function vn(e){this.g=e}(e=Dt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(D2){return void Ut(this,D2)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(D2){Ut(this,D2)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(xD){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(xD){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Zt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Re(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Jt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Rt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Qt(this,e):0==this.i.length||Ze(this.h)||Qt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ke(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new pn(e,t)},d(pn,ne),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Gt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Zt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,pn.aa.N.call(this)},d(gn,ve),d(yn,be),d(vn,fn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new gn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,rl=sl.createWebChannelTransport=function(){return new mn},nl=sl.getStatEventTarget=function(){return _e()},tl=sl.Event=xe,el=sl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,Jo=sl.ErrorCode=Oe,Pe.COMPLETE="complete",Qo=sl.EventType=Pe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Zo=sl.WebChannel=ge,sl.FetchXmlHttpFactory=Tt,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,Xo=sl.XhrIo=Dt}).apply("undefined"!==typeof il?il:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const al="@firebase/firestore";class ol{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ol.UNAUTHENTICATED=new ol(null),ol.GOOGLE_CREDENTIALS=new ol("google-credentials-uid"),ol.FIRST_PARTY=new ol("first-party-uid"),ol.MOCK_USER=new ol("mock-user");let ll="10.14.0";const cl=new Ft("@firebase/firestore");function ul(){return cl.logLevel}function dl(e){if(cl.logLevel<=Pt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ml);cl.debug(`Firestore (${ll}): ${e}`,...i)}}function hl(e){if(cl.logLevel<=Pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ml);cl.error(`Firestore (${ll}): ${e}`,...i)}}function fl(e){if(cl.logLevel<=Pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ml);cl.warn(`Firestore (${ll}): ${e}`,...i)}}function ml(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(E2){return e}}function pl(){const e=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw hl(e),new Error(e)}function gl(e,t){e||pl()}function yl(e,t){return e}const vl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bl extends at{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class wl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _l{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ol.UNAUTHENTICATED)))}shutdown(){}}class Nl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jl{constructor(e){this.t=e,this.currentUser=ol.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gl(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new xl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{dl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(dl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(dl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(gl("string"==typeof t.accessToken),new wl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gl(null===e||"string"==typeof e),new ol(e)}}class Sl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ol.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class El{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Sl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ol.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){gl(void 0===this.o);const n=e=>{null!=e.error&&dl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,dl("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{dl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):dl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(gl("string"==typeof e.token),this.R=e.token,new Cl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Tl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Il{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Tl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Al(e,t){return e<t?-1:e>t?1:0}function Ol(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Pl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new bl(vl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new bl(vl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new bl(vl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bl(vl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pl.fromMillis(Date.now())}static fromDate(e){return Pl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Pl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Al(this.nanoseconds,e.nanoseconds):Al(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ml{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ml(e)}static min(){return new Ml(new Pl(0,0))}static max(){return new Ml(new Pl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rl{constructor(e,t,n){void 0===t?t=0:t>e.length&&pl(),void 0===n?n=e.length-t:n>e.length-t&&pl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Rl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Dl extends Rl{construct(e,t,n){return new Dl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new bl(vl.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Dl(e)}static emptyPath(){return new Dl([])}}const Ll=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fl extends Rl{construct(e,t,n){return new Fl(e,t,n)}static isValidIdentifier(e){return Ll.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new bl(vl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new bl(vl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new bl(vl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new bl(vl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fl(t)}static emptyPath(){return new Fl([])}}class Ul{constructor(e){this.path=e}static fromPath(e){return new Ul(Dl.fromString(e))}static fromName(e){return new Ul(Dl.fromString(e).popFirst(5))}static empty(){return new Ul(Dl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Dl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Dl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ul(new Dl(e.slice()))}}class Bl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Bl.UNKNOWN_ID=-1;function Vl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ml.fromTimestamp(1e9===r?new Pl(n+1,0):new Pl(n,r));return new zl(i,Ul.empty(),t)}function $l(e){return new zl(e.readTime,e.key,-1)}class zl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new zl(Ml.min(),Ul.empty(),-1)}static max(){return new zl(Ml.max(),Ul.empty(),-1)}}function ql(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ul.comparator(e.documentKey,t.documentKey),0!==n?n:Al(e.largestBatchId,t.largestBatchId))}const Hl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Kl(e){if(e.code!==vl.FAILED_PRECONDITION||e.message!==Hl)throw e;dl("LocalStore","Unexpectedly lost primary lease")}class Gl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Gl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Gl?t:Gl.resolve(t)}catch(e){return Gl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Gl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Gl.reject(t)}static resolve(e){return new Gl(((t,n)=>{t(e)}))}static reject(e){return new Gl(((t,n)=>{n(e)}))}static waitFor(e){return new Gl(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Gl.resolve(!1);for(const n of e)t=t.next((e=>e?Gl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Gl(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Gl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Yl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xl(e){return"IndexedDbTransactionError"===e.name}class Zl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ql(e){return null==e}function Jl(e){return 0===e&&1/e==-1/0}function ec(e){return"number"==typeof e&&Number.isInteger(e)&&!Jl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Zl.oe=-1;const tc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rc=nc,ic=[...rc,"indexConfiguration","indexState","indexEntries"];function sc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ac(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function oc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class lc{constructor(e,t){this.comparator=e,this.root=t||uc.EMPTY}insert(e,t){return new lc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,uc.BLACK,null,null))}remove(e){return new lc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,uc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cc(this.root,e,this.comparator,!0)}}class cc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class uc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:uc.RED,this.left=null!=r?r:uc.EMPTY,this.right=null!=i?i:uc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new uc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return uc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return uc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,uc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,uc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pl();if(this.right.isRed())throw pl();const e=this.left.check();if(e!==this.right.check())throw pl();return e+(this.isRed()?0:1)}}uc.EMPTY=null,uc.RED=!0,uc.BLACK=!1,uc.EMPTY=new class{constructor(){this.size=0}get key(){throw pl()}get value(){throw pl()}get color(){throw pl()}get left(){throw pl()}get right(){throw pl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new uc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dc{constructor(e){this.comparator=e,this.data=new lc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hc(this.data.getIterator())}getIteratorFrom(e){return new hc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof dc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dc(this.comparator);return t.data=e,t}}class hc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fc{constructor(e){this.fields=e,e.sort(Fl.comparator)}static empty(){return new fc([])}unionWith(e){let t=new dc(Fl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new fc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class mc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new mc("Invalid base64 string: "+e):e}}(e);return new pc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new pc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Al(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pc.EMPTY_BYTE_STRING=new pc("");const gc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yc(e){if(gl(!!e),"string"==typeof e){let t=0;const n=gc.exec(e);if(gl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vc(e.seconds),nanos:vc(e.nanos)}}function vc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bc(e){return"string"==typeof e?pc.fromBase64String(e):pc.fromUint8Array(e)}function xc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wc(e){const t=e.mapValue.fields.__previous_value__;return xc(t)?wc(t):t}function _c(e){const t=yc(e.mapValue.fields.__local_write_time__.timestampValue);return new Pl(t.seconds,t.nanos)}class Nc{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class jc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}const Sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ec(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xc(e)?4:$c(e)?9007199254740991:Bc(e)?10:11:pl()}function Cc(e,t){if(e===t)return!0;const n=Ec(e);if(n!==Ec(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _c(e).isEqual(_c(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=yc(e.timestampValue),r=yc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bc(e.bytesValue).isEqual(bc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vc(e.geoPointValue.latitude)===vc(t.geoPointValue.latitude)&&vc(e.geoPointValue.longitude)===vc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vc(e.integerValue)===vc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=vc(e.doubleValue),r=vc(t.doubleValue);return n===r?Jl(n)===Jl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ol(e.arrayValue.values||[],t.arrayValue.values||[],Cc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(sc(n)!==sc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Cc(n[i],r[i])))return!1;return!0}(e,t);default:return pl()}}function kc(e,t){return void 0!==(e.values||[]).find((e=>Cc(e,t)))}function Tc(e,t){if(e===t)return 0;const n=Ec(e),r=Ec(t);if(n!==r)return Al(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Al(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=vc(e.integerValue||e.doubleValue),r=vc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ic(e.timestampValue,t.timestampValue);case 4:return Ic(_c(e),_c(t));case 5:return Al(e.stringValue,t.stringValue);case 6:return function(e,t){const n=bc(e),r=bc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Al(n[i],r[i]);if(0!==e)return e}return Al(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Al(vc(e.latitude),vc(t.latitude));return 0!==n?n:Al(vc(e.longitude),vc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ac(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=Al((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ac(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Sc.mapValue&&t===Sc.mapValue)return 0;if(e===Sc.mapValue)return 1;if(t===Sc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Al(r[a],s[a]);if(0!==e)return e;const t=Tc(n[r[a]],i[s[a]]);if(0!==t)return t}return Al(r.length,s.length)}(e.mapValue,t.mapValue);default:throw pl()}}function Ic(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Al(e,t);const n=yc(e),r=yc(t),i=Al(n.seconds,r.seconds);return 0!==i?i:Al(n.nanos,r.nanos)}function Ac(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Tc(n[i],r[i]);if(e)return e}return Al(n.length,r.length)}function Oc(e){return Pc(e)}function Pc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=yc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return bc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ul.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Pc(e.fields[i])}`;return n+"}"}(e.mapValue):pl()}function Mc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Rc(e){return!!e&&"integerValue"in e}function Dc(e){return!!e&&"arrayValue"in e}function Lc(e){return!!e&&"nullValue"in e}function Fc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Uc(e){return!!e&&"mapValue"in e}function Bc(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ac(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Vc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $c(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class zc{constructor(e){this.value=e}static empty(){return new zc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(t)}setAll(e){let t=Fl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Vc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Uc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ac(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new zc(Vc(this.value))}}function qc(e){const t=[];return ac(e.fields,((e,n)=>{const r=new Fl([e]);if(Uc(n)){const e=qc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new fc(t)}class Hc{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Hc(e,0,Ml.min(),Ml.min(),Ml.min(),zc.empty(),0)}static newFoundDocument(e,t,n,r){return new Hc(e,1,t,Ml.min(),n,r,0)}static newNoDocument(e,t){return new Hc(e,2,t,Ml.min(),Ml.min(),zc.empty(),0)}static newUnknownDocument(e,t){return new Hc(e,3,t,Ml.min(),Ml.min(),zc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ml.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ml.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wc{constructor(e,t){this.position=e,this.inclusive=t}}function Kc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Ul.comparator(Ul.fromName(a.referenceValue),n.key):Tc(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Gc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Cc(e.position[n],t.position[n]))return!1;return!0}class Yc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Xc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Zc{}class Qc extends Zc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new au(e,t,n):"array-contains"===t?new uu(e,n):"in"===t?new du(e,n):"not-in"===t?new hu(e,n):"array-contains-any"===t?new fu(e,n):new Qc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ou(e,n):new lu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tc(t,this.value)):null!==t&&Ec(this.value)===Ec(t)&&this.matchesComparison(Tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jc extends Zc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Jc(e,t)}matches(e){return eu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eu(e){return"and"===e.op}function tu(e){return nu(e)&&eu(e)}function nu(e){for(const t of e.filters)if(t instanceof Jc)return!1;return!0}function ru(e){if(e instanceof Qc)return e.field.canonicalString()+e.op.toString()+Oc(e.value);if(tu(e))return e.filters.map((e=>ru(e))).join(",");{const t=e.filters.map((e=>ru(e))).join(",");return`${e.op}(${t})`}}function iu(e,t){return e instanceof Qc?function(e,t){return t instanceof Qc&&e.op===t.op&&e.field.isEqual(t.field)&&Cc(e.value,t.value)}(e,t):e instanceof Jc?function(e,t){return t instanceof Jc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&iu(n,t.filters[r])),!0)}(e,t):void pl()}function su(e){return e instanceof Qc?function(e){return`${e.field.canonicalString()} ${e.op} ${Oc(e.value)}`}(e):e instanceof Jc?function(e){return e.op.toString()+" {"+e.getFilters().map(su).join(" ,")+"}"}(e):"Filter"}class au extends Qc{constructor(e,t,n){super(e,t,n),this.key=Ul.fromName(n.referenceValue)}matches(e){const t=Ul.comparator(e.key,this.key);return this.matchesComparison(t)}}class ou extends Qc{constructor(e,t){super(e,"in",t),this.keys=cu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lu extends Qc{constructor(e,t){super(e,"not-in",t),this.keys=cu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function cu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ul.fromName(e.referenceValue)))}class uu extends Qc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dc(t)&&kc(t.arrayValue,this.value)}}class du extends Qc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kc(this.value.arrayValue,t)}}class hu extends Qc{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kc(this.value.arrayValue,t)}}class fu extends Qc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>kc(this.value.arrayValue,e)))}}class mu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function pu(e){return new mu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function gu(e){const t=yl(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ru(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ql(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Oc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Oc(e))).join(",")),t.ue=e}return t.ue}function yu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!iu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gc(e.startAt,t.startAt)&&Gc(e.endAt,t.endAt)}function vu(e){return Ul.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xu(e,t,n,r,i,s,a,o){return new bu(e,t,n,r,i,s,a,o)}function wu(e){return new bu(e)}function _u(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Nu(e){return null!==e.collectionGroup}function ju(e){const t=yl(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new dc(Fl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Yc(r,n))})),e.has(Fl.keyField().canonicalString())||t.ce.push(new Yc(Fl.keyField(),n))}return t.ce}function Su(e){const t=yl(e);return t.le||(t.le=Eu(t,ju(e))),t.le}function Eu(e,t){if("F"===e.limitType)return pu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Yc(e.field,t)}));const n=e.endAt?new Wc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wc(e.startAt.position,e.startAt.inclusive):null;return pu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Cu(e,t){const n=e.filters.concat([t]);return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ku(e,t,n){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Tu(e,t){return yu(Su(e),Su(t))&&e.limitType===t.limitType}function Iu(e){return`${gu(Su(e))}|lt:${e.limitType}`}function Au(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>su(e))).join(", ")}]`),Ql(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Oc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Oc(e))).join(",")),`Target(${t})`}(Su(e))}; limitType=${e.limitType})`}function Ou(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ul.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ju(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Kc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ju(e),t))&&!(e.endAt&&!function(e,t,n){const r=Kc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ju(e),t))}(e,t)}function Pu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mu(e){return(t,n)=>{let r=!1;for(const i of ju(e)){const e=Ru(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ru(e,t,n){const r=e.field.isKeyField()?Ul.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tc(r,i):pl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pl()}}class Du{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ac(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return oc(this.inner)}size(){return this.innerSize}}const Lu=new lc(Ul.comparator);function Fu(){return Lu}const Uu=new lc(Ul.comparator);function Bu(){let e=Uu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Vu(e){let t=Uu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $u(){return qu()}function zu(){return qu()}function qu(){return new Du((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Hu=new lc(Ul.comparator),Wu=new dc(Ul.comparator);function Ku(){let e=Wu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Gu=new dc(Al);function Yu(){return Gu}function Xu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(t)?"-0":t}}function Zu(e){return{integerValue:""+e}}function Qu(e,t){return ec(t)?Zu(t):Xu(e,t)}class Ju{constructor(){this._=void 0}}function ed(e,t,n){return e instanceof rd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&xc(t)&&(t=wc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof id?sd(e,t):e instanceof ad?od(e,t):function(e,t){const n=nd(e,t),r=cd(n)+cd(e.Pe);return Rc(n)&&Rc(e.Pe)?Zu(r):Xu(e.serializer,r)}(e,t)}function td(e,t,n){return e instanceof id?sd(e,t):e instanceof ad?od(e,t):n}function nd(e,t){return e instanceof ld?function(e){return Rc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class rd extends Ju{}class id extends Ju{constructor(e){super(),this.elements=e}}function sd(e,t){const n=ud(t);for(const r of e.elements)n.some((e=>Cc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ad extends Ju{constructor(e){super(),this.elements=e}}function od(e,t){let n=ud(t);for(const r of e.elements)n=n.filter((e=>!Cc(e,r)));return{arrayValue:{values:n}}}class ld extends Ju{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function cd(e){return vc(e.integerValue||e.doubleValue)}function ud(e){return Dc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class dd{constructor(e,t){this.field=e,this.transform=t}}class hd{constructor(e,t){this.version=e,this.transformResults=t}}class fd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fd}static exists(e){return new fd(void 0,e)}static updateTime(e){return new fd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function md(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class pd{}function gd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ed(e.key,fd.none()):new wd(e.key,e.data,fd.none());{const n=e.data,r=zc.empty();let i=new dc(Fl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new _d(e.key,r,new fc(i.toArray()),fd.none())}}function yd(e,t,n){e instanceof wd?function(e,t,n){const r=e.value.clone(),i=jd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _d?function(e,t,n){if(!md(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=jd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Nd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vd(e,t,n,r){return e instanceof wd?function(e,t,n,r){if(!md(e.precondition,t))return n;const i=e.value.clone(),s=Sd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof _d?function(e,t,n,r){if(!md(e.precondition,t))return n;const i=Sd(e.fieldTransforms,r,t),s=t.data;return s.setAll(Nd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return md(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=nd(r.transform,e||null);null!=i&&(null===n&&(n=zc.empty()),n.set(r.field,i))}return n||null}function xd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ol(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof id&&t instanceof id||e instanceof ad&&t instanceof ad?Ol(e.elements,t.elements,Cc):e instanceof ld&&t instanceof ld?Cc(e.Pe,t.Pe):e instanceof rd&&t instanceof rd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wd extends pd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _d extends pd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Nd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function jd(e,t,n){const r=new Map;gl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,td(a,o,n[i]))}return r}function Sd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ed(e,s,t))}return r}class Ed extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cd extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&yd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=zu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=gd(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Ml.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ku())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,((e,t)=>xd(e,t)))&&Ol(this.baseMutations,e.baseMutations,((e,t)=>xd(e,t)))}}class Td{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){gl(e.mutations.length===n.length);let r=Hu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Td(e,t,n,r)}}class Id{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ad{constructor(e,t){this.count=e,this.unchangedNames=t}}var Od,Pd;function Md(e){switch(e){default:return pl();case vl.CANCELLED:case vl.UNKNOWN:case vl.DEADLINE_EXCEEDED:case vl.RESOURCE_EXHAUSTED:case vl.INTERNAL:case vl.UNAVAILABLE:case vl.UNAUTHENTICATED:return!1;case vl.INVALID_ARGUMENT:case vl.NOT_FOUND:case vl.ALREADY_EXISTS:case vl.PERMISSION_DENIED:case vl.FAILED_PRECONDITION:case vl.ABORTED:case vl.OUT_OF_RANGE:case vl.UNIMPLEMENTED:case vl.DATA_LOSS:return!0}}function Rd(e){if(void 0===e)return hl("GRPC error has no .code"),vl.UNKNOWN;switch(e){case Od.OK:return vl.OK;case Od.CANCELLED:return vl.CANCELLED;case Od.UNKNOWN:return vl.UNKNOWN;case Od.DEADLINE_EXCEEDED:return vl.DEADLINE_EXCEEDED;case Od.RESOURCE_EXHAUSTED:return vl.RESOURCE_EXHAUSTED;case Od.INTERNAL:return vl.INTERNAL;case Od.UNAVAILABLE:return vl.UNAVAILABLE;case Od.UNAUTHENTICATED:return vl.UNAUTHENTICATED;case Od.INVALID_ARGUMENT:return vl.INVALID_ARGUMENT;case Od.NOT_FOUND:return vl.NOT_FOUND;case Od.ALREADY_EXISTS:return vl.ALREADY_EXISTS;case Od.PERMISSION_DENIED:return vl.PERMISSION_DENIED;case Od.FAILED_PRECONDITION:return vl.FAILED_PRECONDITION;case Od.ABORTED:return vl.ABORTED;case Od.OUT_OF_RANGE:return vl.OUT_OF_RANGE;case Od.UNIMPLEMENTED:return vl.UNIMPLEMENTED;case Od.DATA_LOSS:return vl.DATA_LOSS;default:return pl()}}(Pd=Od||(Od={}))[Pd.OK=0]="OK",Pd[Pd.CANCELLED=1]="CANCELLED",Pd[Pd.UNKNOWN=2]="UNKNOWN",Pd[Pd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pd[Pd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pd[Pd.NOT_FOUND=5]="NOT_FOUND",Pd[Pd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pd[Pd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pd[Pd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pd[Pd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pd[Pd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pd[Pd.ABORTED=10]="ABORTED",Pd[Pd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pd[Pd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pd[Pd.INTERNAL=13]="INTERNAL",Pd[Pd.UNAVAILABLE=14]="UNAVAILABLE",Pd[Pd.DATA_LOSS=15]="DATA_LOSS";let Dd=null;function Ld(){return new TextEncoder}const Fd=new Wo([4294967295,4294967295],0);function Ud(e){const t=Ld().encode(e),n=new Ko;return n.update(t),new Uint8Array(n.digest())}function Bd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Wo([n,r],0),new Wo([i,s],0)]}class Vd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $d(`Invalid padding: ${t}`);if(n<0)throw new $d(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new $d(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new $d(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Wo.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Wo.fromNumber(n)));return 1===r.compare(Fd)&&(r=new Wo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Ud(e),[n,r]=Bd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Vd(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Ud(e),[n,r]=Bd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $d extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,qd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zd(Ml.min(),r,new lc(Al),Fu(),Ku())}}class qd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new qd(n,t,Ku(),Ku(),Ku())}}class Hd{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Wd{constructor(e,t){this.targetId=e,this.me=t}}class Kd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Gd{constructor(){this.fe=0,this.ge=Zd(),this.pe=pc.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ku(),t=Ku(),n=Ku();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:pl()}})),new qd(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Zd()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,gl(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Yd{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fu(),this.qe=Xd(),this.Qe=new lc(Al)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:pl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(vu(i))if(0===n){const e=new Ul(i.path);this.Ue(t,e,Hc.newNoDocument(e,Ml.min()))}else gl(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Dd||Dd.et(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=bc(n).toUint8Array()}catch(e){if(e instanceof mc)return fl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Vd(s,r,i)}catch(e){return fl(e instanceof $d?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&vu(i.target)){const t=new Ul(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Hc.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=Ku();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new zd(e,t,this.Qe,this.ke,n);return this.ke=Fu(),this.qe=Xd(),this.Qe=new lc(Al),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Gd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new dc(Al),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||dl("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gd),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xd(){return new lc(Ul.comparator)}function Zd(){return new lc(Ul.comparator)}const Qd={asc:"ASCENDING",desc:"DESCENDING"},Jd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eh={and:"AND",or:"OR"};class th{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nh(e,t){return e.useProto3Json||Ql(t)?t:{value:t}}function rh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ih(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sh(e,t){return rh(e,t.toTimestamp())}function ah(e){return gl(!!e),Ml.fromTimestamp(function(e){const t=yc(e);return new Pl(t.seconds,t.nanos)}(e))}function oh(e,t){return lh(e,t).canonicalString()}function lh(e,t){const n=function(e){return new Dl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ch(e){const t=Dl.fromString(e);return gl(Th(t)),t}function uh(e,t){return oh(e.databaseId,t.path)}function dh(e,t){const n=ch(t);if(n.get(1)!==e.databaseId.projectId)throw new bl(vl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bl(vl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ul(ph(n))}function hh(e,t){return oh(e.databaseId,t)}function fh(e){const t=ch(e);return 4===t.length?Dl.emptyPath():ph(t)}function mh(e){return new Dl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ph(e){return gl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gh(e,t,n){return{name:uh(e,t),fields:n.value.mapValue.fields}}function yh(e,t){let n;if(t instanceof wd)n={update:gh(e,t.key,t.value)};else if(t instanceof Ed)n={delete:uh(e,t.key)};else if(t instanceof _d)n={update:gh(e,t.key,t.data),updateMask:kh(t.fieldMask)};else{if(!(t instanceof Cd))return pl();n={verify:uh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof rd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof id)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ad)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ld)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw pl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:pl()}(e,t.precondition)),n}function vh(e,t){return{documents:[hh(e,t.path)]}}function bh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hh(e,i);const s=function(e){if(0!==e.length)return Ch(Jc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Sh(e.field),direction:_h(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=nh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function xh(e){let t=fh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){gl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=wh(e);return t instanceof Jc&&tu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Yc(Eh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ql(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Wc(n,t)}(n.endAt)),xu(t,i,a,s,o,"F",l,c)}function wh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Eh(e.unaryFilter.field);return Qc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Eh(e.unaryFilter.field);return Qc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Eh(e.unaryFilter.field);return Qc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Eh(e.unaryFilter.field);return Qc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pl()}}(e):void 0!==e.fieldFilter?function(e){return Qc.create(Eh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Jc.create(e.compositeFilter.filters.map((e=>wh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return pl()}}(e.compositeFilter.op))}(e):pl()}function _h(e){return Qd[e]}function Nh(e){return Jd[e]}function jh(e){return eh[e]}function Sh(e){return{fieldPath:e.canonicalString()}}function Eh(e){return Fl.fromServerFormat(e.fieldPath)}function Ch(e){return e instanceof Qc?function(e){if("=="===e.op){if(Fc(e.value))return{unaryFilter:{field:Sh(e.field),op:"IS_NAN"}};if(Lc(e.value))return{unaryFilter:{field:Sh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fc(e.value))return{unaryFilter:{field:Sh(e.field),op:"IS_NOT_NAN"}};if(Lc(e.value))return{unaryFilter:{field:Sh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sh(e.field),op:Nh(e.op),value:e.value}}}(e):e instanceof Jc?function(e){const t=e.getFilters().map((e=>Ch(e)));return 1===t.length?t[0]:{compositeFilter:{op:jh(e.op),filters:t}}}(e):pl()}function kh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Th(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ih{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ml.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ml.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ah{constructor(e){this.ct=e}}function Oh(e){const t=xh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ku(t,t.limit,"L"):t}class Ph{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(vc(e.integerValue));else if("doubleValue"in e){const n=vc(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Jl(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=yc(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(bc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?$c(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Bc(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):pl()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(vc(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ul.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Ph.vt=new Ph;class Mh{constructor(){this.un=new Rh}addToCollectionParentIndex(e,t){return this.un.add(t),Gl.resolve()}getCollectionParents(e,t){return Gl.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Gl.resolve()}deleteFieldIndex(e,t){return Gl.resolve()}deleteAllFieldIndexes(e){return Gl.resolve()}createTargetIndexes(e,t){return Gl.resolve()}getDocumentsMatchingTarget(e,t){return Gl.resolve(null)}getIndexType(e,t){return Gl.resolve(0)}getFieldIndexes(e,t){return Gl.resolve([])}getNextCollectionGroupToUpdate(e){return Gl.resolve(null)}getMinOffset(e,t){return Gl.resolve(zl.min())}getMinOffsetFromCollectionGroup(e,t){return Gl.resolve(zl.min())}updateCollectionGroup(e,t,n){return Gl.resolve()}updateIndexEntries(e,t){return Gl.resolve()}}class Rh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new dc(Dl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new dc(Dl.comparator)).toArray()}}new Uint8Array(0);class Dh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Dh(e,Dh.DEFAULT_COLLECTION_PERCENTILE,Dh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Dh.DEFAULT_COLLECTION_PERCENTILE=10,Dh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dh.DEFAULT=new Dh(41943040,Dh.DEFAULT_COLLECTION_PERCENTILE,Dh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dh.DISABLED=new Dh(-1,0,0);class Lh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Lh(0)}static kn(){return new Lh(-1)}}class Fh{constructor(){this.changes=new Du((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Gl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&vd(n.mutation,e,fc.empty(),Pl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ku()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ku();const r=$u();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Bu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=$u();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ku())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Fu();const s=qu(),a=qu();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof _d)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),vd(a.mutation,t,a.mutation.getFieldMask(),Pl.now())):s.set(t.key,fc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Uh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=qu();let r=new lc(((e,t)=>e-t)),i=Ku();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||fc.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Ku()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=zu();l.forEach((e=>{if(!i.has(e)){const r=gd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Gl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ul.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Gl.resolve($u());let a=-1,o=i;return s.next((t=>Gl.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Gl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Ku()))).next((e=>({batchId:a,changes:Vu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ul(t)).next((e=>{let t=Bu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Bu();return this.indexManager.getCollectionParents(e,i).next((a=>Gl.forEach(a,(a=>{const o=function(e,t){return new bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hc.newInvalidDocument(r)))}));let n=Bu();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&vd(s.mutation,r,fc.empty(),Pl.now()),Ou(t,r)&&(n=n.insert(e,r))})),n}))}}class Vh{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Gl.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ah(e.createTime)}}(t)),Gl.resolve()}getNamedQuery(e,t){return Gl.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Oh(e.bundledQuery),readTime:ah(e.readTime)}}(t)),Gl.resolve()}}class $h{constructor(){this.overlays=new lc(Ul.comparator),this.Ir=new Map}getOverlay(e,t){return Gl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$u();return Gl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Gl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Gl.resolve()}getOverlaysForCollection(e,t,n){const r=$u(),i=t.length+1,s=new Ul(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Gl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new lc(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$u(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=$u(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Gl.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Id(t,n));let i=this.Ir.get(t);void 0===i&&(i=Ku(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class zh{constructor(){this.sessionToken=pc.EMPTY_BYTE_STRING}getSessionToken(e){return Gl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Gl.resolve()}}class qh{constructor(){this.Tr=new dc(Hh.Er),this.dr=new dc(Hh.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Hh(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Hh(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new Ul(new Dl([])),n=new Hh(t,e),r=new Hh(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ul(new Dl([])),n=new Hh(t,e),r=new Hh(t,e+1);let i=Ku();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Hh(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Hh{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ul.comparator(e.key,t.key)||Al(e.wr,t.wr)}static Ar(e,t){return Al(e.wr,t.wr)||Ul.comparator(e.key,t.key)}}class Wh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new dc(Hh.Er)}checkEmpty(e){return Gl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new kd(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new Hh(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Gl.resolve(s)}lookupMutationBatch(e,t){return Gl.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Gl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Gl.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Gl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Hh(t,0),r=new Hh(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Gl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new dc(Al);return t.forEach((e=>{const t=new Hh(e,0),r=new Hh(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Gl.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ul.isDocumentKey(i)||(i=i.child(""));const s=new Hh(new Ul(i),0);let a=new dc(Al);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)}),s),Gl.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){gl(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Gl.forEach(t.mutations,(r=>{const i=new Hh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Hh(t,0),r=this.br.firstAfterOrEqual(n);return Gl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Gl.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kh{constructor(e){this.Mr=e,this.docs=new lc(Ul.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Gl.resolve(n?n.document.mutableCopy():Hc.newInvalidDocument(t))}getEntries(e,t){let n=Fu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Hc.newInvalidDocument(e))})),Gl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Fu();const s=t.path,a=new Ul(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ql($l(a),n)<=0||(r.has(a.key)||Ou(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Gl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){pl()}Or(e,t){return Gl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Gh(this)}getSize(e){return Gl.resolve(this.size)}}class Gh extends Fh{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Gl.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Yh{constructor(e){this.persistence=e,this.Nr=new Du((e=>gu(e)),yu),this.lastRemoteSnapshotVersion=Ml.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qh,this.targetCount=0,this.kr=Lh.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Gl.resolve()}getLastRemoteSnapshotVersion(e){return Gl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Gl.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Gl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Gl.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Lh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Gl.resolve()}updateTargetData(e,t){return this.Kn(t),Gl.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Gl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Gl.waitFor(i).next((()=>r))}getTargetCount(e){return Gl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Gl.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Gl.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Gl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Gl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Gl.resolve(n)}containsKey(e,t){return Gl.resolve(this.Br.containsKey(t))}}class Xh{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Zl(0),this.Kr=!1,this.Kr=!0,this.$r=new zh,this.referenceDelegate=e(this),this.Ur=new Yh(this),this.indexManager=new Mh,this.remoteDocumentCache=function(e){return new Kh(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new Ah(t),this.Gr=new Vh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $h,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Wh(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){dl("MemoryPersistence","Starting transaction:",e);const r=new Zh(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Gl.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Zh extends Wl{constructor(e){super(),this.currentSequenceNumber=e}}class Qh{constructor(e){this.persistence=e,this.Jr=new qh,this.Yr=null}static Zr(e){return new Qh(e)}get Xr(){if(this.Yr)return this.Yr;throw pl()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Gl.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Gl.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Gl.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gl.forEach(this.Xr,(n=>{const r=Ul.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,Ml.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Gl.or([()=>Gl.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Jh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Ku(),r=Ku();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jh(e,t.fromCache,n,r)}}class ef{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tf{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=rt()?8:Yl(Qe())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ef;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(ul()<=Pt.DEBUG&&dl("QueryEngine","SDK will not create cache indexes for query:",Au(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Gl.resolve()):(ul()<=Pt.DEBUG&&dl("QueryEngine","Query:",Au(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ul()<=Pt.DEBUG&&dl("QueryEngine","The SDK decides to create cache indexes for query:",Au(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Su(t))):Gl.resolve())}Yi(e,t){if(_u(t))return Gl.resolve(null);let n=Su(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ku(t,null,"F"),n=Su(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ku(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,ku(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return _u(t)||r.isEqual(Ml.min())?Gl.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Gl.resolve(null):(ul()<=Pt.DEBUG&&dl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Au(t)),this.rs(e,s,t,Vl(r,-1)).next((e=>e)))}))}ts(e,t){let n=new dc(Mu(e));return t.forEach(((t,r)=>{Ou(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return ul()<=Pt.DEBUG&&dl("QueryEngine","Using full collection scan to execute query:",Au(t)),this.Ji.getDocumentsMatchingQuery(e,t,zl.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class nf{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new lc(Al),this._s=new Du((e=>gu(e)),yu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function rf(e,t,n,r){return new nf(e,t,n,r)}async function sf(e,t){const n=yl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=Ku();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function af(e){const t=yl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function of(e,t,n){let r=Ku(),i=Ku();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Fu();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ml.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):dl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function lf(e,t){const n=yl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function cf(e,t){const n=yl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Gl.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new Ih(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function uf(e,t,n){const r=yl(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Xl(e))throw e;dl("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function df(e,t,n){const r=yl(e);let i=Ml.min(),s=Ku();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=yl(e),i=r._s.get(n);return void 0!==i?Gl.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Su(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Ml.min(),n?s:Ku()))).next((e=>(hf(r,Pu(t),e),{documents:e,Ts:s})))))}function hf(e,t,n){let r=e.us.get(t)||Ml.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class ff{constructor(){this.activeTargetIds=Yu()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mf{constructor(){this.so=new ff,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ff,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pf{_o(e){}shutdown(){}}class gf{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){dl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){dl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yf=null;function vf(){return null===yf?yf=268435456+Math.round(2147483648*Math.random()):yf++,"0x"+yf.toString(16)}const bf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xf{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const wf="WebChannelConnection";class _f extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=vf(),a=this.xo(e,t.toUriEncodedString());dl("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then((t=>(dl("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw fl("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ll,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=bf[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=vf();return new Promise(((s,a)=>{const o=new Xo;o.setWithCredentials(!0),o.listenOnce(Qo.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Jo.NO_ERROR:const t=o.getResponseJson();dl(wf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Jo.TIMEOUT:dl(wf,`RPC '${e}' ${i} timed out`),a(new bl(vl.DEADLINE_EXCEEDED,"Request time out"));break;case Jo.HTTP_ERROR:const n=o.getStatus();if(dl(wf,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(vl).indexOf(t)>=0?t:vl.UNKNOWN}(t.status);a(new bl(e,t.message))}else a(new bl(vl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bl(vl.UNAVAILABLE,"Connection failed."));break;default:pl()}}finally{dl(wf,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);dl(wf,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=vf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rl(),a=nl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");dl(wf,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new xf({Io:t=>{h?dl(wf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(dl(wf,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),dl(wf,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Zo.EventType.OPEN,(()=>{h||(dl(wf,`RPC '${e}' stream ${r} transport opened.`),f.yo())})),m(u,Zo.EventType.CLOSE,(()=>{h||(h=!0,dl(wf,`RPC '${e}' stream ${r} transport closed`),f.So())})),m(u,Zo.EventType.ERROR,(t=>{h||(h=!0,fl(wf,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new bl(vl.UNAVAILABLE,"The operation could not be completed")))})),m(u,Zo.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];gl(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){dl(wf,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Od[e];if(void 0!==t)return Rd(t)}(t),i=a.message;void 0===n&&(n=vl.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new bl(n,i)),u.close()}else dl(wf,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}})),m(a,tl.STAT_EVENT,(t=>{t.stat===el.PROXY?dl(wf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===el.NOPROXY&&dl(wf,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.wo()}),0),f}}function Nf(){return"undefined"!=typeof document?document:null}function jf(e){return new th(e,!0)}class Sf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&dl("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ef{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Sf(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===vl.RESOURCE_EXHAUSTED?(hl(t.toString()),hl("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===vl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new bl(vl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return dl("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(dl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cf extends Ef{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:pl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(gl(void 0===t||"string"==typeof t),pc.fromBase64String(t||"")):(gl(void 0===t||t instanceof Buffer||t instanceof Uint8Array),pc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?vl.UNKNOWN:Rd(e.code);return new bl(t,e.message||"")}(a);n=new Kd(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(e,r.document.name),s=ah(r.document.updateTime),a=r.document.createTime?ah(r.document.createTime):Ml.min(),o=new zc({mapValue:{fields:r.document.fields}}),l=Hc.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Hd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=dh(e,r.document),s=r.readTime?ah(r.readTime):Ml.min(),a=Hc.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Hd([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=dh(e,r.document),s=r.removedTargetIds||[];n=new Hd([],s,i,null)}else{if(!("filter"in t))return pl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ad(r,i),a=e.targetId;n=new Wd(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ml.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ml.min():t.readTime?ah(t.readTime):Ml.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=mh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=vu(r)?{documents:vh(e,r)}:{query:bh(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ih(e,t.resumeToken);const r=nh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ml.min())>0){n.readTime=rh(e,t.snapshotVersion.toTimestamp());const r=nh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=mh(this.serializer),t.removeTarget=e,this.a_(t)}}class kf extends Ef{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return gl(!!e.streamToken),this.lastStreamToken=e.streamToken,gl(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){gl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(gl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ah(e.updateTime):ah(t);return n.isEqual(Ml.min())&&(n=ah(t)),new hd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ah(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=mh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>yh(this.serializer,e)))};this.a_(t)}}class Tf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new bl(vl.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.Mo(e,lh(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===vl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bl(vl.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Lo(e,lh(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===vl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new bl(vl.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class If{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hl(t),this.D_=!1):dl("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Af{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{Bf(this)&&(dl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=yl(e);t.L_.add(4),await Pf(t),t.q_.set("Unknown"),t.L_.delete(4),await Of(t)}(this))}))})),this.q_=new If(n,r)}}async function Of(e){if(Bf(e))for(const t of e.B_)await t(!0)}async function Pf(e){for(const t of e.B_)await t(!1)}function Mf(e,t){const n=yl(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Uf(n)?Ff(n):sm(n).r_()&&Df(n,t))}function Rf(e,t){const n=yl(e),r=sm(n);n.N_.delete(t),r.r_()&&Lf(n,t),0===n.N_.size&&(r.r_()?r.o_():Bf(n)&&n.q_.set("Unknown"))}function Df(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ml.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}sm(e).A_(t)}function Lf(e,t){e.Q_.xe(t),sm(e).R_(t)}function Ff(e){e.Q_=new Yd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),sm(e).start(),e.q_.v_()}function Uf(e){return Bf(e)&&!sm(e).n_()&&e.N_.size>0}function Bf(e){return 0===yl(e).L_.size}function Vf(e){e.Q_=void 0}async function $f(e){e.q_.set("Online")}async function zf(e){e.N_.forEach(((t,n)=>{Df(e,t)}))}async function qf(e,t){Vf(e),Uf(e)?(e.q_.M_(t),Ff(e)):e.q_.set("Unknown")}async function Hf(e,t,n){if(e.q_.set("Online"),t instanceof Kd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){dl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Wf(e,n)}else if(t instanceof Hd?e.Q_.Ke(t):t instanceof Wd?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ml.min()))try{const t=await af(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(pc.EMPTY_BYTE_STRING,r.snapshotVersion)),Lf(e,t);const i=new Ih(r.target,t,n,r.sequenceNumber);Df(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){dl("RemoteStore","Failed to raise snapshot:",t),await Wf(e,t)}}async function Wf(e,t,n){if(!Xl(t))throw t;e.L_.add(1),await Pf(e),e.q_.set("Offline"),n||(n=()=>af(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{dl("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Of(e)}))}function Kf(e,t){return t().catch((n=>Wf(e,n,t)))}async function Gf(e){const t=yl(e),n=am(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Yf(t);)try{const e=await lf(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Xf(t,e)}catch(e){await Wf(t,e)}Zf(t)&&Qf(t)}function Yf(e){return Bf(e)&&e.O_.length<10}function Xf(e,t){e.O_.push(t);const n=am(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Zf(e){return Bf(e)&&!am(e).n_()&&e.O_.length>0}function Qf(e){am(e).start()}async function Jf(e){am(e).p_()}async function em(e){const t=am(e);for(const n of e.O_)t.m_(n.mutations)}async function tm(e,t,n){const r=e.O_.shift(),i=Td.from(r,t,n);await Kf(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Gf(e)}async function nm(e,t){t&&am(e).V_&&await async function(e,t){if(function(e){return Md(e)&&e!==vl.ABORTED}(t.code)){const n=e.O_.shift();am(e).s_(),await Kf(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Gf(e)}}(e,t),Zf(e)&&Qf(e)}async function rm(e,t){const n=yl(e);n.asyncQueue.verifyOperationInProgress(),dl("RemoteStore","RemoteStore received new credentials");const r=Bf(n);n.L_.add(3),await Pf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Of(n)}async function im(e,t){const n=yl(e);t?(n.L_.delete(2),await Of(n)):t||(n.L_.add(2),await Pf(n),n.q_.set("Unknown"))}function sm(e){return e.K_||(e.K_=function(e,t,n){const r=yl(e);return r.w_(),new Cf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:$f.bind(null,e),Ro:zf.bind(null,e),mo:qf.bind(null,e),d_:Hf.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),Uf(e)?Ff(e):e.q_.set("Unknown")):(await e.K_.stop(),Vf(e))}))),e.K_}function am(e){return e.U_||(e.U_=function(e,t,n){const r=yl(e);return r.w_(),new kf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Jf.bind(null,e),mo:nm.bind(null,e),f_:em.bind(null,e),g_:tm.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Gf(e)):(await e.U_.stop(),e.O_.length>0&&(dl("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class om{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new om(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bl(vl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lm(e,t){if(hl("AsyncQueue",`${t}: ${e}`),Xl(e))return new bl(vl.UNAVAILABLE,`${t}: ${e}`);throw e}class cm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ul.comparator(t.key,n.key):(e,t)=>Ul.comparator(e.key,t.key),this.keyedMap=Bu(),this.sortedSet=new lc(this.comparator)}static emptySet(e){return new cm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new cm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class um{constructor(){this.W_=new lc(Ul.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):pl():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class dm{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new dm(e,t,cm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class hm{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class fm{constructor(){this.queries=mm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=yl(e),r=n.queries;n.queries=mm(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new bl(vl.ABORTED,"Firestore shutting down"))}}function mm(){return new Du((e=>Iu(e)),Tu)}async function pm(e,t){const n=yl(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new hm,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=lm(e,`Initialization of query '${Au(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&bm(n)}async function gm(e,t){const n=yl(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ym(e,t){const n=yl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&bm(n)}function vm(e,t,n){const r=yl(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function bm(e){e.Y_.forEach((e=>{e.next()}))}var xm,wm;(wm=xm||(xm={})).ea="default",wm.Cache="cache";class _m{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new dm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xm.Cache}}class Nm{constructor(e){this.key=e}}class jm{constructor(e){this.key=e}}class Sm{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ku(),this.mutatedKeys=Ku(),this.Aa=Mu(e),this.Ra=new cm(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new um,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Ou(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pl()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new dm(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new um,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ku(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new jm(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Nm(n))})),t}ba(e){this.Ta=e.Ts,this.da=Ku();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return dm.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Em{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Cm{constructor(e){this.key=e,this.va=!1}}class km{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Du((e=>Iu(e)),Tu),this.Ma=new Map,this.xa=new Set,this.Oa=new lc(Ul.comparator),this.Na=new Map,this.La=new qh,this.Ba={},this.ka=new Map,this.qa=Lh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Tm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Xm(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Am(r,t,n,!0),i}async function Im(e,t){const n=Xm(e);await Am(n,t,!0,!1)}async function Am(e,t,n,r){const i=await cf(e.localStore,Su(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Om(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Mf(e.remoteStore,i),o}async function Om(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await df(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return qm(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await df(e.localStore,t,!0),a=new Sm(t,s.Ts),o=a.ma(s.documents),l=qd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);qm(e,n,c.wa);const u=new Em(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Pm(e,t,n){const r=yl(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!Tu(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uf(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rf(r.remoteStore,i.targetId),$m(r,i.targetId)})).catch(Kl)):($m(r,i.targetId),await uf(r.localStore,i.targetId,!0))}async function Mm(e,t){const n=yl(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rf(n.remoteStore,r.targetId))}async function Rm(e,t){const n=yl(e);try{const e=await function(e,t){const n=yl(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(pc.EMPTY_BYTE_STRING,Ml.min()).withLastLimboFreeSnapshotVersion(Ml.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(e,c))}));let o=Fu(),l=Ku();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(of(e,s,t.documentUpdates).next((e=>{o=e.Ps,l=e.Is}))),!r.isEqual(Ml.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Gl.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(gl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?gl(r.va):e.removedDocuments.size>0&&(gl(r.va),r.va=!1))})),await Km(n,e,t)}catch(e){await Kl(e)}}function Dm(e,t,n){const r=yl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=yl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&bm(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lm(e,t,n){const r=yl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new lc(Ul.comparator);e=e.insert(s,Hc.newNoDocument(s,Ml.min()));const n=Ku().add(s),i=new zd(Ml.min(),new Map,new lc(Al),e,n);await Rm(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),Wm(r)}else await uf(r.localStore,t,!1).then((()=>$m(r,t,n))).catch(Kl)}async function Fm(e,t){const n=yl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=yl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Gl.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);gl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ku();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Vm(n,r,null),Bm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Km(n,e)}catch(e){await Kl(e)}}async function Um(e,t,n){const r=yl(e);try{const e=await function(e,t){const n=yl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(gl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Vm(r,t,n),Bm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Km(r,e)}catch(n){await Kl(n)}}function Bm(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function Vm(e,t,n){const r=yl(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function $m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||zm(e,t)}))}function zm(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Rf(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Wm(e))}function qm(e,t,n){for(const r of n)r instanceof Nm?(e.La.addReference(r.key,t),Hm(e,r)):r instanceof jm?(dl("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||zm(e,r.key)):pl()}function Hm(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(dl("SyncEngine","New document in limbo: "+n),e.xa.add(r),Wm(e))}function Wm(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ul(Dl.fromString(t)),r=e.qa.next();e.Na.set(r,new Cm(n)),e.Oa=e.Oa.insert(n,r),Mf(e.remoteStore,new Ih(Su(wu(n.path)),r,"TargetPurposeLimboResolution",Zl.oe))}}async function Km(e,t,n){const r=yl(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,o)=>{a.push(r.Ka(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Jh.Wi(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=yl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Gl.forEach(t,(t=>Gl.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Gl.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Xl(e))throw e;dl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Gm(e,t){const n=yl(e);if(!n.currentUser.isEqual(t)){dl("SyncEngine","User change. New user:",t.toKey());const e=await sf(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new bl(vl.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Km(n,e.hs)}}function Ym(e,t){const n=yl(e),r=n.Na.get(t);if(r&&r.va)return Ku().add(r.key);{let e=Ku();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Xm(e){const t=yl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ym.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lm.bind(null,t),t.Ca.d_=ym.bind(null,t.eventManager),t.Ca.$a=vm.bind(null,t.eventManager),t}function Zm(e){const t=yl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Um.bind(null,t),t}class Qm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return rf(this.persistence,new tf,e.initialUser,this.serializer)}Ga(e){return new Xh(Qh.Zr,this.serializer)}Wa(e){return new mf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qm.provider={build:()=>new Qm};class Jm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Dm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gm.bind(null,this.syncEngine),await im(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new fm}createDatastore(e){const t=jf(e.databaseInfo.databaseId),n=function(e){return new _f(e)}(e.databaseInfo);return function(e,t,n,r){return new Tf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Af(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Dm(this.syncEngine,e,0)),gf.D()?new gf:new pf)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new km(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=yl(e);dl("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Pf(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Jm.provider={build:()=>new Jm};class ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hl("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class tp{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ol.UNAUTHENTICATED,this.clientId=Il.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{dl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(dl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(E2){const n=lm(E2,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function np(e,t){e.asyncQueue.verifyOperationInProgress(),dl("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await sf(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function rp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ip(e);dl("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>rm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>rm(t.remoteStore,n))),e._onlineComponents=t}async function ip(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){dl("FirestoreClient","Using user provided OfflineComponentProvider");try{await np(e,e._uninitializedComponentsProvider._offline)}catch(E2){const n=E2;if(!function(e){return"FirebaseError"===e.name?e.code===vl.FAILED_PRECONDITION||e.code===vl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await np(e,new Qm)}}else dl("FirestoreClient","Using default OfflineComponentProvider"),await np(e,new Qm);return e._offlineComponents}async function sp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(dl("FirestoreClient","Using user provided OnlineComponentProvider"),await rp(e,e._uninitializedComponentsProvider._online)):(dl("FirestoreClient","Using default OnlineComponentProvider"),await rp(e,new Jm))),e._onlineComponents}function ap(e){return sp(e).then((e=>e.syncEngine))}async function op(e){const t=await sp(e),n=t.eventManager;return n.onListen=Tm.bind(null,t.syncEngine),n.onUnlisten=Pm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Im.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Mm.bind(null,t.syncEngine),n}function lp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new xl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ep({next:o=>{s.Za(),t.enqueueAndForget((()=>gm(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new bl(vl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new bl(vl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new _m(wu(n.path),s,{includeMetadataChanges:!0,_a:!0});return pm(e,a)}(await op(e),e.asyncQueue,t,n,r))),r.promise}function cp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new xl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ep({next:n=>{s.Za(),t.enqueueAndForget((()=>gm(e,a))),n.fromCache&&"server"===r.source?i.reject(new bl(vl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new _m(n,s,{includeMetadataChanges:!0,_a:!0});return pm(e,a)}(await op(e),e.asyncQueue,t,n,r))),r.promise}function up(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const dp=new Map;function hp(e,t,n){if(!n)throw new bl(vl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function fp(e){if(!Ul.isDocumentKey(e))throw new bl(vl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function mp(e){if(Ul.isDocumentKey(e))throw new bl(vl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function pp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":pl()}function gp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bl(vl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pp(e);throw new bl(vl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class yp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new bl(vl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bl(vl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new bl(vl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=up(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new bl(vl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new bl(vl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new bl(vl.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bl(vl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bl(vl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _l;switch(e.type){case"firstParty":return new El(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new bl(vl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dp.get(e);t&&(dl("ComponentProvider","Removing Datastore"),dp.delete(e),t.terminate())}(this),Promise.resolve()}}class bp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bp(this.firestore,e,this._query)}}class xp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xp(this.firestore,e,this._key)}}class wp extends bp{constructor(e,t,n){super(e,t,wu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xp(this.firestore,null,new Ul(e))}withConverter(e){return new wp(this.firestore,e,this._path)}}function _p(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ct(e),hp("collection","path",t),e instanceof vp){const n=Dl.fromString(t,...r);return mp(n),new wp(e,null,n)}{if(!(e instanceof xp||e instanceof wp))throw new bl(vl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Dl.fromString(t,...r));return mp(n),new wp(e.firestore,null,n)}}function Np(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ct(e),1===arguments.length&&(t=Il.newId()),hp("doc","path",t),e instanceof vp){const n=Dl.fromString(t,...r);return fp(n),new xp(e,null,new Ul(n))}{if(!(e instanceof xp||e instanceof wp))throw new bl(vl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Dl.fromString(t,...r));return fp(n),new xp(e.firestore,e instanceof wp?e.converter:null,new Ul(n))}}class jp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Sf(this,"async_queue_retry"),this.Vu=()=>{const e=Nf();e&&dl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Nf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Nf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new xl;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(S2){if(!Xl(S2))throw S2;dl("AsyncQueue","Operation failed with retryable error: "+S2)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw hl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=om.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&pl()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Sp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ep extends vp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new jp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jp(e),this._firestoreClient=void 0,await e}}}function Cp(e){if(e._terminated)throw new bl(vl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||kp(e),e._firestoreClient}function kp(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Nc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,up(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new tp(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Tp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tp(pc.fromBase64String(e))}catch(e){throw new bl(vl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Tp(pc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ip{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new bl(vl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ap{constructor(e){this._methodName=e}}class Op{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new bl(vl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new bl(vl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Al(this._lat,e._lat)||Al(this._long,e._long)}}class Pp{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Mp=/^__.*__$/;class Rp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _d(e,this.data,this.fieldMask,t,this.fieldTransforms):new wd(e,this.data,t,this.fieldTransforms)}}class Dp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new _d(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pl()}}class Fp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return eg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Lp(this.Cu)&&Mp.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Up{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jf(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fp({Cu:e,methodName:t,qu:n,path:Fl.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bp(e){const t=e._freezeSettings(),n=jf(e._databaseId);return new Up(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);Xp("Data must be an object, but it was:",a,r);const o=Gp(r,a);let l,c;if(s.merge)l=new fc(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Zp(t,r,n);if(!a.contains(i))throw new bl(vl.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);tg(e,i)||e.push(i)}l=new fc(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Rp(new zc(o),l,c)}class $p extends Ap{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $p}}class zp extends Ap{_toFieldTransform(e){return new dd(e.path,new rd)}isEqual(e){return e instanceof zp}}function qp(e,t,n,r){const i=e.Qu(1,t,n);Xp("Data must be an object, but it was:",i,r);const s=[],a=zc.empty();ac(r,((e,r)=>{const o=Jp(t,e,n);r=Ct(r);const l=i.Nu(o);if(r instanceof $p)s.push(o);else{const e=Kp(r,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new fc(s);return new Dp(a,o,i.fieldTransforms)}function Hp(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[Zp(t,r,n)],l=[i];if(s.length%2!=0)throw new bl(vl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(Zp(t,s[h])),l.push(s[h+1]);const c=[],u=zc.empty();for(let h=o.length-1;h>=0;--h)if(!tg(c,o[h])){const e=o[h];let t=l[h];t=Ct(t);const n=a.Nu(e);if(t instanceof $p)c.push(e);else{const r=Kp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new fc(c);return new Dp(u,d,a.fieldTransforms)}function Wp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Kp(n,e.Qu(r?4:3,t))}function Kp(e,t){if(Yp(e=Ct(e)))return Xp("Unsupported field value:",t,e),Gp(e,t);if(e instanceof Ap)return function(e,t){if(!Lp(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Kp(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ct(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Pl.fromDate(e);return{timestampValue:rh(t.serializer,n)}}if(e instanceof Pl){const n=new Pl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rh(t.serializer,n)}}if(e instanceof Op)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Tp)return{bytesValue:ih(t.serializer,e._byteString)};if(e instanceof xp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:oh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Pp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Xu(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${pp(e)}`)}(e,t)}function Gp(e,t){const n={};return oc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ac(e,((e,r)=>{const i=Kp(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Yp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Pl||e instanceof Op||e instanceof Tp||e instanceof xp||e instanceof Ap||e instanceof Pp)}function Xp(e,t,n){if(!Yp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=pp(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Zp(e,t,n){if((t=Ct(t))instanceof Ip)return t._internalPath;if("string"==typeof t)return Jp(e,t);throw eg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qp=new RegExp("[~\\*/\\[\\]]");function Jp(e,t,n){if(t.search(Qp)>=0)throw eg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ip(...t.split("."))._internalPath}catch(VP){throw eg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function eg(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new bl(vl.INVALID_ARGUMENT,o+e+l)}function tg(e,t){return e.some((e=>e.isEqual(t)))}class ng{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ig("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rg extends ng{data(){return super.data()}}function ig(e,t){return"string"==typeof t?Jp(e,t):t instanceof Ip?t._internalPath:t._delegate._internalPath}function sg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bl(vl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ag{}class og extends ag{}function lg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof ag&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof dg)).length,n=e.filter((e=>e instanceof cg)).length;if(t>1||t>0&&n>0)throw new bl(vl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class cg extends og{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new cg(e,t,n)}_apply(e){const t=this._parse(e);return pg(e._query,t),new bp(e.firestore,e.converter,Cu(e._query,t))}_parse(e){const t=Bp(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new bl(vl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){mg(a,s);const t=[];for(const n of a)t.push(fg(r,e,n));o={arrayValue:{values:t}}}else o=fg(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||mg(a,s),o=Wp(n,t,a,"in"===s||"not-in"===s);return Qc.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ug(e,t,n){const r=t,i=ig("where",e);return cg._create(i,r,n)}class dg extends ag{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dg(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Jc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)pg(n,i),n=Cu(n,i)}(e._query,t),new bp(e.firestore,e.converter,Cu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hg extends og{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new bl(vl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bl(vl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yc(t,n)}(e._query,this._field,this._direction);return new bp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function fg(e,t,n){if("string"==typeof(n=Ct(n))){if(""===n)throw new bl(vl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nu(t)&&-1!==n.indexOf("/"))throw new bl(vl.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Dl.fromString(n));if(!Ul.isDocumentKey(r))throw new bl(vl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mc(e,new Ul(r))}if(n instanceof xp)return Mc(e,n._key);throw new bl(vl.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(n)}.`)}function mg(e,t){if(!Array.isArray(e)||0===e.length)throw new bl(vl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function pg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new bl(vl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bl(vl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class gg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ec(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ac(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>vc(e.doubleValue)));return new Pp(i)}convertGeoPoint(e){return new Op(vc(e.latitude),vc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const t=yc(e);return new Pl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Dl.fromString(e);gl(Th(n));const r=new jc(n.get(1),n.get(3)),i=new Ul(n.popFirst(5));return r.isEqual(t)||hl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function yg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bg extends ng{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ig("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class xg extends bg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class wg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new xg(this._firestore,this._userDataWriter,n.key,n,new vg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new bl(vl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new xg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new vg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new xg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:_g(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function _g(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pl()}}function Ng(e){e=gp(e,xp);const t=gp(e.firestore,Ep);return lp(Cp(t),e._key).then((n=>Og(t,e,n)))}class jg extends gg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xp(this.firestore,null,t)}}function Sg(e){e=gp(e,bp);const t=gp(e.firestore,Ep),n=Cp(t),r=new jg(t);return sg(e._query),cp(n,e._query).then((n=>new wg(t,r,e,n)))}function Eg(e,t,n){e=gp(e,xp);const r=gp(e.firestore,Ep),i=yg(e.converter,t,n);return Ag(r,[Vp(Bp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fd.none())])}function Cg(e,t,n){e=gp(e,xp);const r=gp(e.firestore,Ep),i=Bp(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=Ct(t))||t instanceof Ip?Hp(i,"updateDoc",e._key,t,n,o):qp(i,"updateDoc",e._key,t),Ag(r,[s.toMutation(e._key,fd.exists(!0))])}function kg(e){return Ag(gp(e.firestore,Ep),[new Ed(e._key,fd.none())])}function Tg(e,t){const n=gp(e.firestore,Ep),r=Np(e),i=yg(e.converter,t);return Ag(n,[Vp(Bp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fd.exists(!1))]).then((()=>r))}function Ig(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=Ct(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Sp(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Sp(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof xp)d=gp(e.firestore,Ep),h=wu(e._key.path),u={next:t=>{n[l]&&n[l](Og(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=gp(e,bp);d=gp(t.firestore,Ep),h=t._query;const r=new jg(d);u={next:e=>{n[l]&&n[l](new wg(d,r,t,e))},error:n[l+1],complete:n[l+2]},sg(e._query)}return function(e,t,n,r){const i=new ep(r),s=new _m(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>pm(await op(e),s))),()=>{i.Za(),e.asyncQueue.enqueueAndForget((async()=>gm(await op(e),s)))}}(Cp(d),h,c,u)}function Ag(e,t){return function(e,t){const n=new xl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Zm(e);try{const e=await function(e,t){const n=yl(e),r=Pl.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ku());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Fu(),l=Ku();return n.cs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=bd(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new _d(e.key,t,qc(t.value.mapValue),fd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Vu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new lc(Al)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Km(r,e.changes),await Gf(r.remoteStore)}catch(e){const t=lm(e,"Failed to persist write");n.reject(t)}}(await ap(e),t,n))),n.promise}(Cp(e),t)}function Og(e,t,n){const r=n.docs.get(t._key),i=new jg(e);return new bg(e,i,t._key,r,new vg(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ll=e}(qn),Un(new kt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Ep(new jl(e.getProvider("auth-internal")),new kl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bl(vl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Kn(al,"4.7.3",e),Kn(al,"4.7.3","esm2017")}();const Pg="@firebase/database",Mg="1.0.8";let Rg="";function Dg(e){Rg=e}class Lg{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ct(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Fg{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ht(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ug=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Lg(t)}}catch(S2){}return new Fg},Bg=Ug("localStorage"),Vg=Ug("sessionStorage"),$g=new Ft("@firebase/database"),zg=function(){let e=1;return function(){return e++}}(),qg=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Me(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new wt;n.update(t);const r=n.digest();return Le.encodeByteArray(r)},Hg=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Hg.apply(null,n):e+="object"===typeof n?ut(n):n,e+=" "}return e};let Wg=null,Kg=!0;const Gg=function(e,t){Me(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?($g.logLevel=Pt.VERBOSE,Wg=$g.log.bind($g),t&&Vg.set("logging_enabled",!0)):"function"===typeof e?Wg=e:(Wg=null,Vg.remove("logging_enabled"))},Yg=function(){if(!0===Kg&&(Kg=!1,null===Wg&&!0===Vg.get("logging_enabled")&&Gg(!0)),Wg){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Hg.apply(null,t);Wg(r)}},Xg=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Yg(e,...n)}},Zg=function(){const e="FIREBASE INTERNAL ERROR: "+Hg(...arguments);$g.error(e)},Qg=function(){const e=`FIREBASE FATAL ERROR: ${Hg(...arguments)}`;throw $g.error(e),new Error(e)},Jg=function(){const e="FIREBASE WARNING: "+Hg(...arguments);$g.warn(e)},ey=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ty="[MIN_NAME]",ny="[MAX_NAME]",ry=function(e,t){if(e===t)return 0;if(e===ty||t===ny)return-1;if(t===ty||e===ny)return 1;{const n=dy(e),r=dy(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},iy=function(e,t){return e===t?0:e<t?-1:1},sy=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ut(t))},ay=function(e){if("object"!==typeof e||null===e)return ut(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=ut(t[r]),n+=":",n+=ay(e[t[r]]);return n+="}",n},oy=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ly(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const cy=function(e){Me(!ey(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const uy=new RegExp("^-?(0*)\\d{1,10}$"),dy=function(e){if(uy.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},hy=function(e){try{e()}catch(S2){setTimeout((()=>{const t=S2.stack||"";throw Jg("Exception was thrown by user callback.",t),S2}),Math.floor(0))}},fy=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class my{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Jg(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class py{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Yg("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jg(e)}}class gy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}gy.OWNER="owner";const yy="5",vy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,by="ac",xy="websocket",wy="long_polling";class _y{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Ny(e,t,n){let r;if(Me("string"===typeof t,"typeof type must == string"),Me("object"===typeof n,"typeof params must == object"),t===xy)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==wy)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return ly(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class jy{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ht(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return $e(this.counters_)}}const Sy={},Ey={};function Cy(e){const t=e.toString();return Sy[t]||(Sy[t]=new jy),Sy[t]}class ky{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&hy((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Ty="start";class Iy{constructor(e,t,n,r,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xg(e),this.stats_=Cy(t),this.urlFn=e=>(this.appCheckToken&&(e[by]=this.appCheckToken),Ny(t,wy,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ky(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(nt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ay((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Ty)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Ty]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=yy,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[by]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&vy.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Iy.forceAllow_=!0}static forceDisallow(){Iy.forceDisallow_=!0}static isAvailable(){return!nt()&&(!!Iy.forceAllow_||!Iy.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ue(t),r=oy(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(nt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ay{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,nt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=zg(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ay.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(S2){Yg("frame writing exception"),S2.stack&&Yg(S2.stack),Yg(S2)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Yg("No IE domain setting required")}catch(S2){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){nt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Yg("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(S2){}}),Math.floor(1))}}let Oy=null;"undefined"!==typeof MozWebSocket?Oy=MozWebSocket:"undefined"!==typeof WebSocket&&(Oy=WebSocket);class Py{constructor(e,t,n,r,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xg(this.connId),this.stats_=Cy(t),this.connURL=Py.connectionURL_(t,s,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=yy,!nt()&&"undefined"!==typeof location&&location.hostname&&vy.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[by]=r),i&&(s.p=i),Ny(e,xy,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bg.set("previous_websocket_failure",!0);try{let e;if(nt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${yy}/${Rg}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API:"AIzaSyChJnuCK7QY2EXPTtF9Obp7mWyZXGfzsTE",REACT_APP_FIREBASE_APP_ID:"1:969191580797:web:128057ff7ebe656c3ffd14",REACT_APP_FIREBASE_DATABASE_URL:"https://smartecolock-94f5a-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_DOMAIN:"smartecolock-94f5a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-Q7GMNE9Q52",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"969191580797",REACT_APP_FIREBASE_PROJECT_ID:"smartecolock-94f5a",REACT_APP_FIREBASE_STORAGE_BUCKET:"smartecolock-94f5a.firebasestorage.app",REACT_APP_GEMINI_API:"AIzaSyCnBauXgFmxyWWO5VHcGUNToGy7lulbN6E"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Oy(this.connURL,[],e)}catch(S2){this.log_("Error instantiating WebSocket.");const t=S2.message||S2.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Py.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Oy&&!Py.forceDisallow_}static previouslyFailed(){return Bg.isInMemoryStorage||!0===Bg.get("previous_websocket_failure")}markConnectionHealthy(){Bg.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=ct(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Me(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=oy(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(S2){this.log_("Exception thrown from WebSocket.send():",S2.message||S2.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Py.responsesRequiredToBeHealthy=2,Py.healthyTimeout=3e4;class My{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Iy,Py]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Py&&Py.isAvailable();let n=t&&!Py.previouslyFailed();if(e.webSocketOnly&&(t||Jg("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Py];else{const e=this.transports_=[];for(const t of My.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);My.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}My.globalTransportInitialized_=!1;class Ry{constructor(e,t,n,r,i,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xg("c:"+this.id+":"),this.transportManager_=new My(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=fy((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=sy("t",e),n=sy("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=sy("t",e),n=sy("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=sy("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Zg("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zg("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),yy!==n&&Jg("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),fy((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fy((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Dy{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Ly{constructor(e){this.allowedEvents_=e,this.listeners_={},Me(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Me(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Fy extends Ly{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Je()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Fy}getInitialEvent(e){return Me("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Uy{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function By(){return new Uy("")}function Vy(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function $y(e){return e.pieces_.length-e.pieceNum_}function zy(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Uy(e.pieces_,t)}function qy(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Hy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Wy(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Uy(t,0)}function Ky(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Uy)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Uy(n,0)}function Gy(e){return e.pieceNum_>=e.pieces_.length}function Yy(e,t){const n=Vy(e),r=Vy(t);if(null===n)return t;if(n===r)return Yy(zy(e),zy(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Xy(e,t){const n=Hy(e,0),r=Hy(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=ry(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Zy(e,t){if($y(e)!==$y(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Qy(e,t){let n=e.pieceNum_,r=t.pieceNum_;if($y(e)>$y(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Jy{constructor(e,t){this.errorPrefix_=t,this.parts_=Hy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=St(this.parts_[n]);ev(this)}}function ev(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+tv(e))}function tv(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class nv extends Ly{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new nv}getInitialEvent(e){return Me("visible"===e,"Unknown event type: "+e),[this.visible_]}}const rv=1e3;class iv extends Dy{constructor(e,t,n,r,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=iv.nextPersistentConnectionId_++,this.log_=Xg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rv,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nv.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Fy.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ut(i)),Me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Xe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Me(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,a=i.s;iv.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&ht(e,"w")){const n=ft(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Jg(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=dt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=dt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ut(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Zg("Unrecognized action received from server: "+ut(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rv,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=rv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rv),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+iv.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){Me(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Yg("getToken() completed but was canceled"):(Yg("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new Ry(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Jg(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Zg){this.log_("Failed to get token: "+Zg),s||(this.repoInfo_.nodeAdmin&&Jg(Zg),o())}}}interrupt(e){Yg("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Yg("Resuming connection for reason: "+e),delete this.interruptReasons_[e],mt(this.interruptReasons_)&&(this.reconnectDelay_=rv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>ay(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Uy(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Yg("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Yg("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";nt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Rg.replace(/\./g,"-")]=1,Je()?e["framework.cordova"]=1:tt()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Fy.getInstance().currentlyOnline();return mt(this.interruptReasons_)&&e}}iv.nextPersistentConnectionId_=0,iv.nextConnectionId_=0;class sv{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new sv(e,t)}}class av{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new sv(ty,e),r=new sv(ty,t);return 0!==this.compare(n,r)}minPost(){return sv.MIN}}let ov;class lv extends av{static get __EMPTY_NODE(){return ov}static set __EMPTY_NODE(e){ov=e}compare(e,t){return ry(e.name,t.name)}isDefinedOn(e){throw Re("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return sv.MIN}maxPost(){return new sv(ny,ov)}makePost(e,t){return Me("string"===typeof e,"KeyIndex indexValue must always be a string."),new sv(e,ov)}toString(){return".key"}}const cv=new lv;class uv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class dv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:dv.RED,this.left=null!=r?r:hv.EMPTY_NODE,this.right=null!=i?i:hv.EMPTY_NODE}copy(e,t,n,r,i){return new dv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return hv.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return hv.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}dv.RED=!0,dv.BLACK=!1;class hv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hv.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new hv(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,dv.BLACK,null,null))}remove(e){return new hv(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dv.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new uv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new uv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new uv(this.root_,null,this.comparator_,!0,e)}}function fv(e,t){return ry(e.name,t.name)}function mv(e,t){return ry(e,t)}let pv;hv.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new dv(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const gv=function(e){return"number"===typeof e?"number:"+cy(e):"string:"+e},yv=function(e){if(e.isLeafNode()){const t=e.val();Me("string"===typeof t||"number"===typeof t||"object"===typeof t&&ht(t,".sv"),"Priority must be a string or number.")}else Me(e===pv||e.isEmpty(),"priority of unexpected type.");Me(e===pv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vv,bv,xv;class wv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wv.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Me(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),yv(this.priorityNode_)}static set __childrenNodeConstructor(e){vv=e}static get __childrenNodeConstructor(){return vv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new wv(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:wv.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Gy(e)?this:".priority"===Vy(e)?this.priorityNode_:wv.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:wv.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Vy(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Me(".priority"!==n||1===$y(e),".priority must be the last token in a path"),this.updateImmediateChild(n,wv.__childrenNodeConstructor.EMPTY_NODE.updateChild(zy(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+gv(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?cy(this.value_):this.value_,this.lazyHash_=qg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===wv.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof wv.__childrenNodeConstructor?-1:(Me(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=wv.VALUE_TYPE_ORDER.indexOf(t),i=wv.VALUE_TYPE_ORDER.indexOf(n);return Me(r>=0,"Unknown leaf type: "+t),Me(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}wv.VALUE_TYPE_ORDER=["object","boolean","number","string"];const _v=new class extends av{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?ry(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return sv.MIN}maxPost(){return new sv(ny,new wv("[PRIORITY-POST]",xv))}makePost(e,t){const n=bv(e);return new sv(t,new wv("[PRIORITY-POST]",n))}toString(){return".priority"}},Nv=Math.log(2);class jv{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Nv,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Sv=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new dv(o,a.node,dv.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],o=n?n(a):a,new dv(o,a.node,dv.BLACK,c,u)}},s=function(t){let r=null,s=null,a=e.length;const o=function(t,r){const s=a-t,o=a;a-=t;const c=i(s+1,o),u=e[s],d=n?n(u):u;l(new dv(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,dv.BLACK):(o(r,dv.BLACK),o(r,dv.RED))}return s}(new jv(e.length));return new hv(r||t,s)};let Ev;const Cv={};class kv{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Me(Cv&&_v,"ChildrenNode.ts has not been loaded"),Ev=Ev||new kv({".priority":Cv},{".priority":_v}),Ev}get(e){const t=ft(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hv?t:null}hasIndex(e){return ht(this.indexSet_,e.toString())}addIndex(e,t){Me(e!==cv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(sv.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?Sv(n,e.getCompare()):Cv;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new kv(c,l)}addToIndexes(e,t){const n=pt(this.indexes_,((n,r)=>{const i=ft(this.indexSet_,r);if(Me(i,"Missing index implementation for "+r),n===Cv){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(sv.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Sv(n,i.getCompare())}return Cv}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new sv(e.name,r))),i.insert(e,e.node)}}));return new kv(n,this.indexSet_)}removeFromIndexes(e,t){const n=pt(this.indexes_,(n=>{if(n===Cv)return n;{const r=t.get(e.name);return r?n.remove(new sv(e.name,r)):n}}));return new kv(n,this.indexSet_)}}let Tv;class Iv{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&yv(this.priorityNode_),this.children_.isEmpty()&&Me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Tv||(Tv=new Iv(new hv(mv),null,kv.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Tv}updatePriority(e){return this.children_.isEmpty()?this:new Iv(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Tv:t}}getChild(e){const t=Vy(e);return null===t?this:this.getImmediateChild(t).getChild(zy(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Me(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new sv(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Tv:this.priorityNode_;return new Iv(r,s,i)}}updateChild(e,t){const n=Vy(e);if(null===n)return t;{Me(".priority"!==Vy(e)||1===$y(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(zy(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(_v,((s,a)=>{t[s]=a.val(e),n++,i&&Iv.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+gv(this.getPriority().val())+":"),this.forEachChild(_v,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":qg(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new sv(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new sv(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new sv(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,sv.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,sv.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Av?-1:0}withIndex(e){if(e===cv||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Iv(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===cv||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(_v),n=t.getIterator(_v);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===cv?null:this.indexMap_.get(e.toString())}}Iv.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Av=new class extends Iv{constructor(){super(new hv(mv),Iv.EMPTY_NODE,kv.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Iv.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(sv,{MIN:{value:new sv(ty,Iv.EMPTY_NODE)},MAX:{value:new sv(ny,Av)}}),lv.__EMPTY_NODE=Iv.EMPTY_NODE,wv.__childrenNodeConstructor=Iv,pv=Av,function(e){xv=e}(Av);function Ov(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Iv.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Me(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new wv(e,Ov(t))}if(e instanceof Array){let n=Iv.EMPTY_NODE;return ly(e,((t,r)=>{if(ht(e,t)&&"."!==t.substring(0,1)){const e=Ov(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Ov(t))}{const n=[];let r=!1;if(ly(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Ov(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new sv(e,i)))}})),0===n.length)return Iv.EMPTY_NODE;const i=Sv(n,fv,(e=>e.name),mv);if(r){const e=Sv(n,_v.getCompare());return new Iv(i,Ov(t),new kv({".priority":e},{".priority":_v}))}return new Iv(i,Ov(t),kv.Default)}}!function(e){bv=e}(Ov);class Pv extends av{constructor(e){super(),this.indexPath_=e,Me(!Gy(e)&&".priority"!==Vy(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?ry(e.name,t.name):i}makePost(e,t){const n=Ov(e),r=Iv.EMPTY_NODE.updateChild(this.indexPath_,n);return new sv(t,r)}maxPost(){const e=Iv.EMPTY_NODE.updateChild(this.indexPath_,Av);return new sv(ny,e)}toString(){return Hy(this.indexPath_,0).join("/")}}const Mv=new class extends av{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?ry(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return sv.MIN}maxPost(){return sv.MAX}makePost(e,t){const n=Ov(e);return new sv(t,n)}toString(){return".value"}};function Rv(e){return{type:"value",snapshotNode:e}}function Dv(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Lv(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Fv(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Uv{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Me(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Lv(t,a)):Me(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Dv(t,n)):s.trackChildChange(Fv(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(_v,((e,r)=>{t.hasChild(e)||n.trackChildChange(Lv(e,r))})),t.isLeafNode()||t.forEachChild(_v,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Fv(t,r,i))}else n.trackChildChange(Dv(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Iv.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Bv{constructor(e){this.indexedFilter_=new Uv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Bv.getStartPost_(e),this.endPost_=Bv.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new sv(t,n))||(n=Iv.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Iv.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Iv.EMPTY_NODE);const i=this;return t.forEachChild(_v,((e,t)=>{i.matches(new sv(e,t))||(r=r.updateImmediateChild(e,Iv.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Vv{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Bv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new sv(t,n))||(n=Iv.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Iv.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Iv.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Iv.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Iv.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;Me(a.numChildren()===this.limit_,"");const o=new sv(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,o);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Fv(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Lv(t,e));const n=a.updateImmediateChild(t,Iv.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Dv(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=i&&(i.trackChildChange(Lv(l.name,l.node)),i.trackChildChange(Dv(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,Iv.EMPTY_NODE)):e}}class $v{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_v}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ty}hasEnd(){return this.endSet_}getIndexEndValue(){return Me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ny}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Me(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_v}copy(){const e=new $v;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zv(e){const t={};if(e.isDefault())return t;let n;if(e.index_===_v?n="$priority":e.index_===Mv?n="$value":e.index_===cv?n="$key":(Me(e.index_ instanceof Pv,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ut(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ut(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ut(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ut(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ut(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function qv(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==_v&&(t.i=e.index_.toString()),t}class Hv extends Dy{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Xg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Hv.getListenId_(e,n),a={};this.listens_[s]=a;const o=zv(e._queryParams);this.restRequest_(i+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),ft(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Hv.getListenId_(e,t);delete this.listens_[n]}get(e){const t=zv(e._queryParams),n=e._path.toString(),r=new Xe;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+vt(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=ct(o.responseText)}catch(S2){Jg("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Jg("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class Wv{constructor(){this.rootNode_=Iv.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Kv(){return{value:null,children:new Map}}function Gv(e,t,n){if(Gy(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Vy(t);e.children.has(r)||e.children.set(r,Kv());Gv(e.children.get(r),t=zy(t),n)}}function Yv(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Yv(r,new Uy(t.toString()+"/"+e),n)}))}class Xv{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ly(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Zv{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xv(e);const n=1e4+2e4*Math.random();fy(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;ly(e,((e,r)=>{r>0&&ht(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),fy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qv;function Jv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Qv||(Qv={}));class eb{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Qv.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Gy(this.path)){if(null!=this.affectedTree.value)return Me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Uy(e));return new eb(By(),t,this.revert)}}return Me(Vy(this.path)===e,"operationForChild called for unrelated child."),new eb(zy(this.path),this.affectedTree,this.revert)}}class tb{constructor(e,t){this.source=e,this.path=t,this.type=Qv.LISTEN_COMPLETE}operationForChild(e){return Gy(this.path)?new tb(this.source,By()):new tb(this.source,zy(this.path))}}class nb{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Qv.OVERWRITE}operationForChild(e){return Gy(this.path)?new nb(this.source,By(),this.snap.getImmediateChild(e)):new nb(this.source,zy(this.path),this.snap)}}class rb{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Qv.MERGE}operationForChild(e){if(Gy(this.path)){const t=this.children.subtree(new Uy(e));return t.isEmpty()?null:t.value?new nb(this.source,By(),t.value):new rb(this.source,By(),t)}return Me(Vy(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rb(this.source,zy(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ib{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Gy(e))return this.isFullyInitialized()&&!this.filtered_;const t=Vy(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class sb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ab(e,t,n,r,i,s){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Re("Should only compare child_ events.");const r=new sv(t.childName,t.snapshotNode),i=new sv(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function ob(e,t){return{eventCache:e,serverCache:t}}function lb(e,t,n,r){return ob(new ib(t,n,r),e.serverCache)}function cb(e,t,n,r){return ob(e.eventCache,new ib(t,n,r))}function ub(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function db(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let hb;class fb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(hb||(hb=new hv(iy)),hb);this.value=e,this.children=t}static fromObject(e){let t=new fb(null);return ly(e,((e,n)=>{t=t.set(new Uy(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:By(),value:this.value};if(Gy(e))return null;{const n=Vy(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(zy(e),t);if(null!=i){return{path:Ky(new Uy(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Gy(e))return this;{const t=Vy(e),n=this.children.get(t);return null!==n?n.subtree(zy(e)):new fb(null)}}set(e,t){if(Gy(e))return new fb(t,this.children);{const n=Vy(e),r=(this.children.get(n)||new fb(null)).set(zy(e),t),i=this.children.insert(n,r);return new fb(this.value,i)}}remove(e){if(Gy(e))return this.children.isEmpty()?new fb(null):new fb(null,this.children);{const t=Vy(e),n=this.children.get(t);if(n){const r=n.remove(zy(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new fb(null):new fb(this.value,i)}return this}}get(e){if(Gy(e))return this.value;{const t=Vy(e),n=this.children.get(t);return n?n.get(zy(e)):null}}setTree(e,t){if(Gy(e))return t;{const n=Vy(e),r=(this.children.get(n)||new fb(null)).setTree(zy(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new fb(this.value,i)}}fold(e){return this.fold_(By(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Ky(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,By(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Gy(e))return null;{const r=Vy(e),i=this.children.get(r);return i?i.findOnPath_(zy(e),Ky(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,By(),t)}foreachOnPath_(e,t,n){if(Gy(e))return this;{this.value&&n(t,this.value);const r=Vy(e),i=this.children.get(r);return i?i.foreachOnPath_(zy(e),Ky(t,r),n):new fb(null)}}foreach(e){this.foreach_(By(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Ky(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class mb{constructor(e){this.writeTree_=e}static empty(){return new mb(new fb(null))}}function pb(e,t,n){if(Gy(t))return new mb(new fb(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const a=Yy(i,t);return s=s.updateChild(a,n),new mb(e.writeTree_.set(i,s))}{const r=new fb(n),i=e.writeTree_.setTree(t,r);return new mb(i)}}}function gb(e,t,n){let r=e;return ly(n,((e,n)=>{r=pb(r,Ky(t,e),n)})),r}function yb(e,t){if(Gy(t))return mb.empty();{const n=e.writeTree_.setTree(t,new fb(null));return new mb(n)}}function vb(e,t){return null!=bb(e,t)}function bb(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Yy(n.path,t)):null}function xb(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(_v,((e,n)=>{t.push(new sv(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new sv(e,n.value))})),t}function wb(e,t){if(Gy(t))return e;{const n=bb(e,t);return new mb(null!=n?new fb(n):e.writeTree_.subtree(t))}}function _b(e){return e.writeTree_.isEmpty()}function Nb(e,t){return jb(By(),e.writeTree_,t)}function jb(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Me(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=jb(Ky(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ky(e,".priority"),r)),n}}function Sb(e,t){return Fb(t,e)}function Eb(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Me(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Cb(t,r.path)?i=!1:Qy(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=Tb(e.allWrites,kb,By()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=yb(e.visibleWrites,r.path);else{ly(r.children,(t=>{e.visibleWrites=yb(e.visibleWrites,Ky(r.path,t))}))}return!0}return!1}function Cb(e,t){if(e.snap)return Qy(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Qy(Ky(e.path,n),t))return!0;return!1}function kb(e){return e.visible}function Tb(e,t,n){let r=mb.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Qy(n,e)?(t=Yy(n,e),r=pb(r,t,s.snap)):Qy(e,n)&&(t=Yy(e,n),r=pb(r,By(),s.snap.getChild(t)));else{if(!s.children)throw Re("WriteRecord should have .snap or .children");if(Qy(n,e))t=Yy(n,e),r=gb(r,t,s.children);else if(Qy(e,n))if(t=Yy(e,n),Gy(t))r=gb(r,By(),s.children);else{const e=ft(s.children,Vy(t));if(e){const n=e.getChild(zy(t));r=pb(r,By(),n)}}}}}return r}function Ib(e,t,n,r,i){if(r||i){const s=wb(e.visibleWrites,t);if(!i&&_b(s))return n;if(i||null!=n||vb(s,By())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Qy(e.path,t)||Qy(t,e.path))};return Nb(Tb(e.allWrites,s,t),n||Iv.EMPTY_NODE)}return null}{const r=bb(e.visibleWrites,t);if(null!=r)return r;{const r=wb(e.visibleWrites,t);if(_b(r))return n;if(null!=n||vb(r,By())){return Nb(r,n||Iv.EMPTY_NODE)}return null}}}function Ab(e,t,n,r){return Ib(e.writeTree,e.treePath,t,n,r)}function Ob(e,t){return function(e,t,n){let r=Iv.EMPTY_NODE;const i=bb(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(_v,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=wb(e.visibleWrites,t);return n.forEachChild(_v,((e,t)=>{const n=Nb(wb(i,new Uy(e)),t);r=r.updateImmediateChild(e,n)})),xb(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return xb(wb(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Pb(e,t,n,r){return function(e,t,n,r,i){Me(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ky(t,n);if(vb(e.visibleWrites,s))return null;{const t=wb(e.visibleWrites,s);return _b(t)?i.getChild(n):Nb(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Mb(e,t){return function(e,t){return bb(e.visibleWrites,t)}(e.writeTree,Ky(e.treePath,t))}function Rb(e,t,n,r,i,s){return function(e,t,n,r,i,s,a){let o;const l=wb(e.visibleWrites,t),c=bb(l,By());if(null!=c)o=c;else{if(null==n)return[];o=Nb(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Db(e,t,n){return function(e,t,n,r){const i=Ky(t,n),s=bb(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Nb(wb(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Lb(e,t){return Fb(Ky(e.treePath,t),e.writeTree)}function Fb(e,t){return{treePath:e,writeTree:t}}class Ub{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Me("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Me(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Fv(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Lv(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Dv(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Re("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Fv(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Bb=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Vb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new ib(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Db(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:db(this.viewCache_),i=Rb(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function $b(e,t,n,r,i){const s=new Ub;let a,o;if(n.type===Qv.OVERWRITE){const l=n;l.source.fromUser?a=Hb(e,t,l.path,l.snap,r,i,s):(Me(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!Gy(l.path),a=qb(e,t,l.path,l.snap,r,i,o,s))}else if(n.type===Qv.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,s,a){let o=t;return r.foreach(((r,l)=>{const c=Ky(n,r);Wb(t,Vy(c))&&(o=Hb(e,o,c,l,i,s,a))})),r.foreach(((r,l)=>{const c=Ky(n,r);Wb(t,Vy(c))||(o=Hb(e,o,c,l,i,s,a))})),o}(e,t,l.path,l.children,r,i,s):(Me(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Gb(e,t,l.path,l.children,r,i,o,s))}else if(n.type===Qv.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,r,i,s){let a;if(null!=Mb(r,n))return t;{const o=new Vb(r,t,i),l=t.eventCache.getNode();let c;if(Gy(n)||".priority"===Vy(n)){let n;if(t.serverCache.isFullyInitialized())n=Ab(r,db(t));else{const e=t.serverCache.getNode();Me(e instanceof Iv,"serverChildren would be complete if leaf node"),n=Ob(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=Vy(n);let u=Db(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,zy(n),o,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Iv.EMPTY_NODE,zy(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Ab(r,db(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Mb(r,By()),lb(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,r,i,s):function(e,t,n,r,i,s,a){if(null!=Mb(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Gy(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return qb(e,t,n,l.getNode().getChild(n),i,s,o,a);if(Gy(n)){let r=new fb(null);return l.getNode().forEachChild(cv,((e,t)=>{r=r.set(new Uy(e),t)})),Gb(e,t,n,r,i,s,o,a)}return t}{let c=new fb(null);return r.foreach(((e,t)=>{const r=Ky(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Gb(e,t,n,c,i,s,o,a)}}(e,t,o.path,o.affectedTree,r,i,s)}else{if(n.type!==Qv.LISTEN_COMPLETE)throw Re("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,a=cb(t,s.getNode(),s.isFullyInitialized()||Gy(n),s.isFiltered());return zb(e,a,n,r,Bb,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ub(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Rv(ub(t)))}}(t,a,l),{viewCache:a,changes:l}}function zb(e,t,n,r,i,s){const a=t.eventCache;if(null!=Mb(r,n))return t;{let o,l;if(Gy(n))if(Me(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=db(t),i=Ob(r,n instanceof Iv?n:Iv.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Ab(r,db(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Vy(n);if(".priority"===c){Me(1===$y(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const s=Pb(r,n,i,l);o=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const u=zy(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Pb(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=Db(r,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,s):a.getNode()}}return lb(t,o,a.isFullyInitialized()||Gy(n),e.filter.filtersNodes())}}function qb(e,t,n,r,i,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(Gy(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Vy(n);if(!l.isCompleteForPath(n)&&$y(n)>1)return t;const i=zy(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Bb,null)}const d=cb(t,c,l.isFullyInitialized()||Gy(n),u.filtersNodes());return zb(e,d,n,i,new Vb(i,d,s),o)}function Hb(e,t,n,r,i,s,a){const o=t.eventCache;let l,c;const u=new Vb(i,t,s);if(Gy(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=lb(t,c,!0,e.filter.filtersNodes());else{const i=Vy(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=lb(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=zy(n),c=o.getNode().getImmediateChild(i);let d;if(Gy(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===qy(s)&&e.getChild(Wy(s)).isEmpty()?e:e.updateChild(s,r):Iv.EMPTY_NODE}if(c.equals(d))l=t;else{l=lb(t,e.filter.updateChild(o.getNode(),i,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Wb(e,t){return e.eventCache.isCompleteForChild(t)}function Kb(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Gb(e,t,n,r,i,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Gy(n)?r:new fb(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=Kb(0,t.serverCache.getNode().getImmediateChild(n),r);c=qb(e,c,new Uy(n),l,i,s,a,o)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=Kb(0,t.serverCache.getNode().getImmediateChild(n),r);c=qb(e,c,new Uy(n),l,i,s,a,o)}})),c}class Yb{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Uv(n.getIndex()),i=(s=n).loadsAllData()?new Uv(s.getIndex()):s.hasLimit()?new Vv(s):new Bv(s);var s;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,o=t.eventCache,l=r.updateFullNode(Iv.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(Iv.EMPTY_NODE,o.getNode(),null),u=new ib(l,a.isFullyInitialized(),r.filtersNodes()),d=new ib(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=ob(d,u),this.eventGenerator_=new sb(this.query_)}get query(){return this.query_}}function Xb(e,t){const n=db(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Gy(t)&&!n.getImmediateChild(Vy(t)).isEmpty())?n.getChild(t):null}function Zb(e){return 0===e.eventRegistrations_.length}function Qb(e,t,n){const r=[];if(n){Me(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Jb(e,t,n,r){t.type===Qv.MERGE&&null!==t.source.queryId&&(Me(db(e.viewCache_),"We should always have a full cache before handling merges"),Me(ub(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=$b(e.processor_,i,t,n,r);var a,o;return a=e.processor_,o=s.viewCache,Me(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),Me(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),Me(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,ex(e,s.changes,s.viewCache.eventCache.getNode(),null)}function ex(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),ab(e,i,"child_removed",t,r,n),ab(e,i,"child_added",t,r,n),ab(e,i,"child_moved",s,r,n),ab(e,i,"child_changed",t,r,n),ab(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let tx,nx;class rx{constructor(){this.views=new Map}}function ix(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Me(null!=s,"SyncTree gave us an op for an invalid query."),Jb(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Jb(s,t,n,r));return i}}function sx(e,t,n,r,i){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=Ab(n,i?r:null),s=!1;e?s=!0:r instanceof Iv?(e=Ob(n,r),s=!1):(e=Iv.EMPTY_NODE,s=!1);const a=ob(new ib(e,s,!1),new ib(r,i,!1));return new Yb(t,a)}return a}function ax(e,t,n,r,i,s){const a=sx(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(_v,((e,t)=>{r.push(Dv(e,t))}));return n.isFullyInitialized()&&r.push(Rv(n.getNode())),ex(e,r,n.getNode(),t)}(a,n)}function ox(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const o=hx(e);if("default"===i)for(const[l,c]of e.views.entries())a=a.concat(Qb(c,n,r)),Zb(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(Qb(t,n,r)),Zb(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!hx(e)&&s.push(new(Me(tx,"Reference.ts has not been loaded"),tx)(t._repo,t._path)),{removed:s,events:a}}function lx(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function cx(e,t){let n=null;for(const r of e.views.values())n=n||Xb(r,t);return n}function ux(e,t){if(t._queryParams.loadsAllData())return fx(e);{const n=t._queryIdentifier;return e.views.get(n)}}function dx(e,t){return null!=ux(e,t)}function hx(e){return null!=fx(e)}function fx(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let mx=1;class px{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fb(null),this.pendingWriteTree_={visibleWrites:mb.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gx(e,t,n,r,i){return function(e,t,n,r,i){Me(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=pb(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Sx(e,new nb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function yx(e,t,n,r){!function(e,t,n,r){Me(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=gb(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=fb.fromObject(n);return Sx(e,new rb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function vx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Eb(e.pendingWriteTree_,t)){let t=new fb(null);return null!=r.snap?t=t.set(By(),!0):ly(r.children,(e=>{t=t.set(new Uy(e),!0)})),Sx(e,new eb(r.path,t,n))}return[]}function bx(e,t,n){return Sx(e,new nb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function xx(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||dx(a,t))){const l=ox(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>hx(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&hx(t)){return[fx(t)]}{let e=[];return t&&(e=lx(t)),ly(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=kx(e,r);e.listenProvider_.startListening(Mx(i),Tx(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Mx(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(Ix(t));e.listenProvider_.stopListening(Mx(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=Ix(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function wx(e,t,n,r){const i=Ax(e,r);if(null!=i){const r=Ox(i),s=r.path,a=r.queryId,o=Yy(s,t);return Px(e,s,new nb(Jv(a),o,n))}return[]}function _x(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Yy(e,i);s=s||cx(t,n),a=a||hx(t)}));let o,l=e.syncPointTree_.get(i);if(l?(a=a||hx(l),s=s||cx(l,By())):(l=new rx,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)o=!0;else{o=!1,s=Iv.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=cx(t,By());n&&(s=s.updateImmediateChild(e,n))}))}const c=dx(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=Ix(t);Me(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=mx++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=ax(l,t,n,Sb(e.pendingWriteTree_,i),s,o);if(!c&&!a&&!r){const n=ux(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Tx(e,t),s=kx(e,n),a=e.listenProvider_.startListening(Mx(t),i,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(r);if(i)Me(!hx(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!Gy(e)&&t&&hx(t))return[fx(t).query];{let e=[];return t&&(e=e.concat(lx(t).map((e=>e.query)))),ly(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Mx(r),Tx(e,r))}}return a}(e,t,n))}return u}function Nx(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=cx(n,Yy(e,t));if(r)return r}));return Ib(r,t,i,n,!0)}function jx(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=Yy(e,n);r=r||cx(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||cx(i,By()):(i=new rx,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,a=s?new ib(r,!0,!1):null;return function(e){return ub(e.viewCache_)}(sx(i,t,Sb(e.pendingWriteTree_,t._path),s?a.getNode():Iv.EMPTY_NODE,s))}function Sx(e,t){return Ex(t,e.syncPointTree_,null,Sb(e.pendingWriteTree_,By()))}function Ex(e,t,n,r){if(Gy(e.path))return Cx(e,t,n,r);{const i=t.get(By());null==n&&null!=i&&(n=cx(i,By()));let s=[];const a=Vy(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=Lb(r,a);s=s.concat(Ex(o,l,e,t))}return i&&(s=s.concat(ix(i,e,r,n))),s}}function Cx(e,t,n,r){const i=t.get(By());null==n&&null!=i&&(n=cx(i,By()));let s=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,o=Lb(r,t),l=e.operationForChild(t);l&&(s=s.concat(Cx(l,i,a,o)))})),i&&(s=s.concat(ix(i,e,r,n))),s}function kx(e,t){const n=t.query,r=Tx(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Iv.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Ax(e,n);if(r){const n=Ox(r),i=n.path,s=n.queryId,a=Yy(i,t);return Px(e,i,new tb(Jv(s),a))}return[]}(e,n._path,r):function(e,t){return Sx(e,new tb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return xx(e,n,null,r)}}}}function Tx(e,t){const n=Ix(t);return e.queryToTagMap.get(n)}function Ix(e){return e._path.toString()+"$"+e._queryIdentifier}function Ax(e,t){return e.tagToQueryMap.get(t)}function Ox(e){const t=e.indexOf("$");return Me(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Uy(e.substr(0,t))}}function Px(e,t,n){const r=e.syncPointTree_.get(t);Me(r,"Missing sync point for query tag that we're tracking");return ix(r,n,Sb(e.pendingWriteTree_,t),null)}function Mx(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Me(nx,"Reference.ts has not been loaded"),nx)(e._repo,e._path):e}class Rx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Rx(t)}node(){return this.node_}}class Dx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ky(this.path_,e);return new Dx(this.syncTree_,t)}node(){return Nx(this.syncTree_,this.path_)}}const Lx=function(e,t,n){return e&&"object"===typeof e?(Me(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Fx(e[".sv"],t,n):"object"===typeof e[".sv"]?Ux(e[".sv"],t):void Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Fx=function(e,t,n){if("timestamp"===e)return n.timestamp;Me(!1,"Unexpected server value: "+e)},Ux=function(e,t,n){e.hasOwnProperty("increment")||Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Me(!1,"Unexpected increment value: "+r);const i=t.node();if(Me(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Bx=function(e,t,n,r){return $x(t,new Dx(n,e),r)},Vx=function(e,t,n){return $x(e,new Rx(t),n)};function $x(e,t,n){const r=e.getPriority().val(),i=Lx(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Lx(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new wv(s,Ov(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new wv(i))),r.forEachChild(_v,((e,r)=>{const i=$x(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class zx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function qx(e,t){let n=t instanceof Uy?t:new Uy(t),r=e,i=Vy(n);for(;null!==i;){const e=ft(r.node.children,i)||{children:{},childCount:0};r=new zx(i,r,e),n=zy(n),i=Vy(n)}return r}function Hx(e){return e.node.value}function Wx(e,t){e.node.value=t,Zx(e)}function Kx(e){return e.node.childCount>0}function Gx(e,t){ly(e.node.children,((n,r)=>{t(new zx(n,e,r))}))}function Yx(e,t,n,r){n&&!r&&t(e),Gx(e,(e=>{Yx(e,t,!0,r)})),n&&r&&t(e)}function Xx(e){return new Uy(null===e.parent?e.name:Xx(e.parent)+"/"+e.name)}function Zx(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Hx(e)&&!Kx(e)}(n),i=ht(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Zx(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Zx(e))}(e.parent,e.name,e)}const Qx=/[\[\].#$\/\u0000-\u001F\u007F]/,Jx=/[\[\].#$\u0000-\u001F\u007F]/,ew=10485760,tw=function(e){return"string"===typeof e&&0!==e.length&&!Qx.test(e)},nw=function(e){return"string"===typeof e&&0!==e.length&&!Jx.test(e)},rw=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!ey(e)||e&&"object"===typeof e&&ht(e,".sv")},iw=function(e,t,n,r){r&&void 0===t||sw(jt(e,"value"),t,n)},sw=function(e,t,n){const r=n instanceof Uy?new Jy(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+tv(r));if("function"===typeof t)throw new Error(e+"contains a function "+tv(r)+" with contents = "+t.toString());if(ey(t))throw new Error(e+"contains "+t.toString()+" "+tv(r));if("string"===typeof t&&t.length>ew/3&&St(t)>ew)throw new Error(e+"contains a string greater than "+ew+" utf8 bytes "+tv(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(ly(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!tw(t)))throw new Error(e+" contains an invalid key ("+t+") "+tv(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=St(t),ev(e)}(r,t),sw(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=St(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+tv(r)+" in addition to actual children.")}},aw=function(e,t,n,r){if(r&&void 0===t)return;const i=jt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];ly(t,((e,t)=>{const r=new Uy(e);if(sw(i,t,Ky(n,r)),".priority"===qy(r)&&!rw(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=Hy(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!tw(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Xy);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Qy(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},ow=function(e,t,n,r){if((!r||void 0!==n)&&!nw(n))throw new Error(jt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},lw=function(e,t){if(".info"===Vy(t))throw new Error(e+" failed = Can't modify data under /.info/")},cw=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!tw(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),nw(e)}(n))throw new Error(jt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class uw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dw(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Zy(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function hw(e,t,n){dw(e,n),mw(e,(e=>Zy(e,t)))}function fw(e,t,n){dw(e,n),mw(e,(e=>Qy(e,t)||Qy(t,e)))}function mw(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(pw(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function pw(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Wg&&Yg("event: "+n.toString()),hy(r)}}}const gw="repo_interrupt";class yw{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kv(),this.transactionQueueTree_=new zx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vw(e,t,n){if(e.stats_=Cy(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Hv(e.repoInfo_,((t,n,r,i)=>{ww(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>_w(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(n)}catch(S2){throw new Error("Invalid authOverride provided: "+S2)}}e.persistentConnection_=new iv(e.repoInfo_,t,((t,n,r,i)=>{ww(e,t,n,r,i)}),(t=>{_w(e,t)}),(t=>{!function(e,t){ly(t,((t,n)=>{Nw(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Ey[n]||(Ey[n]=t()),Ey[n]}(e.repoInfo_,(()=>new Zv(e.stats_,e.server_))),e.infoData_=new Wv,e.infoSyncTree_=new px({startListening:(t,n,r,i)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=bx(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Nw(e,"connected",!1),e.serverSyncTree_=new px({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);fw(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function bw(e){const t=e.infoData_.getNode(new Uy(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function xw(e){return(t=(t={timestamp:bw(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function ww(e,t,n,r,i){e.dataUpdateCount++;const s=new Uy(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=pt(n,(e=>Ov(e)));a=function(e,t,n,r){const i=Ax(e,r);if(i){const r=Ox(i),s=r.path,a=r.queryId,o=Yy(s,t),l=fb.fromObject(n);return Px(e,s,new rb(Jv(a),o,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Ov(n);a=wx(e.serverSyncTree_,s,t,i)}else if(r){const t=pt(n,(e=>Ov(e)));a=function(e,t,n){const r=fb.fromObject(n);return Sx(e,new rb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Ov(n);a=bx(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=Ow(e,s)),fw(e.eventQueue_,o,a)}function _w(e,t){Nw(e,"connected",t),!1===t&&function(e){kw(e,"onDisconnectEvents");const t=xw(e),n=Kv();Yv(e.onDisconnect_,By(),((r,i)=>{const s=Bx(r,i,e.serverSyncTree_,t);Gv(n,r,s)}));let r=[];Yv(n,By(),((t,n)=>{r=r.concat(bx(e.serverSyncTree_,t,n));const i=Lw(e,t);Ow(e,i)})),e.onDisconnect_=Kv(),fw(e.eventQueue_,By(),r)}(e)}function Nw(e,t,n){const r=new Uy("/.info/"+t),i=Ov(n);e.infoData_.updateSnapshot(r,i);const s=bx(e.infoSyncTree_,r,i);fw(e.eventQueue_,r,s)}function jw(e){return e.nextWriteId_++}function Sw(e,t,n,r,i){kw(e,"set",{path:t.toString(),value:n,priority:r});const s=xw(e),a=Ov(n,r),o=Nx(e.serverSyncTree_,t),l=Vx(a,o,s),c=jw(e),u=gx(e.serverSyncTree_,t,l,c,!0);dw(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const s="ok"===n;s||Jg("set at "+t+" failed: "+n);const a=vx(e.serverSyncTree_,c,!s);fw(e.eventQueue_,t,a),Tw(e,i,n,r)}));const d=Lw(e,t);Ow(e,d),fw(e.eventQueue_,d,[])}function Ew(e,t,n){let r;r=".info"===Vy(t._path)?xx(e.infoSyncTree_,t,n):xx(e.serverSyncTree_,t,n),hw(e.eventQueue_,t._path,r)}function Cw(e){e.persistentConnection_&&e.persistentConnection_.interrupt(gw)}function kw(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Yg(t,...r)}function Tw(e,t,n,r){t&&hy((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function Iw(e,t,n){return Nx(e.serverSyncTree_,t,n)||Iv.EMPTY_NODE}function Aw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Dw(e,t),Hx(t)){const n=Mw(e,t);Me(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=Iw(e,t,r);let s=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Me(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Yy(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,(r=>{kw(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(vx(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Dw(e,qx(e.transactionQueueTree_,t)),Aw(e,e.transactionQueueTree_),fw(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)hy(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Jg("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Ow(e,t)}}),a)}(e,Xx(t),n)}else Kx(t)&&Gx(t,(t=>{Aw(e,t)}))}function Ow(e,t){const n=Pw(e,t),r=Xx(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=Yy(n,s.path);let u,d=!1;if(Me(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,u=s.abortReason,i=i.concat(vx(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)d=!0,u="maxretry",i=i.concat(vx(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Iw(e,s.path,a);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){sw("transaction failed: Data returned ",r,s.path);let t=Ov(r);"object"===typeof r&&null!=r&&ht(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=xw(e),c=Vx(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=jw(e),a.splice(a.indexOf(o),1),i=i.concat(gx(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(vx(e.serverSyncTree_,o,!0))}else d=!0,u="nodata",i=i.concat(vx(e.serverSyncTree_,s.currentWriteId,!0))}fw(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var o;Dw(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)hy(r[l]);Aw(e,e.transactionQueueTree_)}(e,Mw(e,n),r),r}function Pw(e,t){let n,r=e.transactionQueueTree_;for(n=Vy(t);null!==n&&void 0===Hx(r);)r=qx(r,n),n=Vy(t=zy(t));return r}function Mw(e,t){const n=[];return Rw(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Rw(e,t,n){const r=Hx(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Gx(t,(t=>{Rw(e,t,n)}))}function Dw(e,t){const n=Hx(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Wx(t,n.length>0?n:void 0)}Gx(t,(t=>{Dw(e,t)}))}function Lw(e,t){const n=Xx(Pw(e,t)),r=qx(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Fw(e,t)})),Fw(e,r),Yx(r,(t=>{Fw(e,t)})),n}function Fw(e,t){const n=Hx(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Me(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Me(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(vx(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Wx(t,void 0):n.length=s+1,fw(e.eventQueue_,Xx(t),i);for(let e=0;e<r.length;e++)hy(r[e])}}const Uw=function(e,t){const n=Bw(e),r=n.namespace;"firebase.com"===n.domain&&Qg(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Qg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Jg("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new _y(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Uy(n.pathString)}},Bw=function(e){let t="",n="",r="",i="",s="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(S2){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Jg(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:o,pathString:i,namespace:s}},Vw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class $w{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}}class zw{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qw{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Me(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Hw{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Gy(this._path)?null:qy(this._path)}get ref(){return new Ww(this._repo,this._path)}get _queryIdentifier(){const e=qv(this._queryParams),t=ay(e);return"{}"===t?"default":t}get _queryObject(){return qv(this._queryParams)}isEqual(e){if(!((e=Ct(e))instanceof Hw))return!1;const t=this._repo===e._repo,n=Zy(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Ww extends Hw{constructor(e,t){super(e,t,new $v,!1)}get parent(){const e=Wy(this._path);return null===e?null:new Ww(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Kw{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Uy(e),n=Yw(this.ref,e);return new Kw(this._node.getChild(t),n,_v)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Kw(n,Yw(this.ref,t),_v))))}hasChild(e){const t=new Uy(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Gw(e,t){return(e=Ct(e))._checkNotDeleted("ref"),void 0!==t?Yw(e._root,t):e._root}function Yw(e,t){var n,r,i,s;return null===Vy((e=Ct(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ow(n,r,i,s)):ow("child","path",t,!1),new Ww(e._repo,Ky(e._path,t))}function Xw(e,t){e=Ct(e),lw("set",e._path),iw("set",t,e._path,!1);const n=new Xe;return Sw(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Zw(e,t){aw("update",t,e._path,!1);const n=new Xe;return function(e,t,n,r){kw(e,"update",{path:t.toString(),value:n});let i=!0;const s=xw(e),a={};if(ly(n,((n,r)=>{i=!1,a[n]=Bx(Ky(t,n),Ov(r),e.serverSyncTree_,s)})),i)Yg("update() called with empty data.  Don't do anything."),Tw(0,r,"ok",void 0);else{const i=jw(e),s=yx(e.serverSyncTree_,t,a,i);dw(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const a="ok"===n;a||Jg("update at "+t+" failed: "+n);const o=vx(e.serverSyncTree_,i,!a),l=o.length>0?Ow(e,t):t;fw(e.eventQueue_,l,o),Tw(0,r,n,s)})),ly(n,(n=>{const r=Lw(e,Ky(t,n));Ow(e,r)})),fw(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function Qw(e){e=Ct(e);const t=new qw((()=>{})),n=new Jw(t);return function(e,t,n){const r=jx(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Ov(r).withIndex(t._queryParams.getIndex());let s;if(_x(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=bx(e.serverSyncTree_,t._path,i);else{const n=Tx(e.serverSyncTree_,t);s=wx(e.serverSyncTree_,t._path,i,n)}return fw(e.eventQueue_,t._path,s),xx(e.serverSyncTree_,t,n,null,!0),i}),(n=>(kw(e,"get for query "+ut(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Kw(t,new Ww(e._repo,e._path),e._queryParams.getIndex())))}class Jw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new $w("value",this,new Kw(e.snapshotNode,new Ww(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zw(this,e,t):null}matches(e){return e instanceof Jw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class e_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zw(this,e,t):null}createEvent(e,t){Me(null!=e.childName,"Child events should have a childName.");const n=Yw(new Ww(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new $w(e.type,this,new Kw(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof e_&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function t_(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Ew(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new qw(n,s||void 0),o="value"===t?new Jw(a):new e_(t,a);return function(e,t,n){let r;r=".info"===Vy(t._path)?_x(e.infoSyncTree_,t,n):_x(e.serverSyncTree_,t,n),hw(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>Ew(e._repo,e,o)}function n_(e,t,n,r){return t_(e,"value",t,n,r)}function r_(e,t,n){let r=null;const i=n?new qw(n):null;"value"===t?r=new Jw(i):t&&(r=new e_(t,i)),Ew(e._repo,e,r)}!function(e){Me(!tx,"__referenceConstructor has already been defined"),tx=e}(Ww),function(e){Me(!nx,"__referenceConstructor has already been defined"),nx=e}(Ww);const i_={};let s_=!1;function a_(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Qg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yg("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,o,l=Uw(s,i),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API:"AIzaSyChJnuCK7QY2EXPTtF9Obp7mWyZXGfzsTE",REACT_APP_FIREBASE_APP_ID:"1:969191580797:web:128057ff7ebe656c3ffd14",REACT_APP_FIREBASE_DATABASE_URL:"https://smartecolock-94f5a-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_DOMAIN:"smartecolock-94f5a.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-Q7GMNE9Q52",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"969191580797",REACT_APP_FIREBASE_PROJECT_ID:"smartecolock-94f5a",REACT_APP_FIREBASE_STORAGE_BUCKET:"smartecolock-94f5a.firebasestorage.app",REACT_APP_GEMINI_API:"AIzaSyCnBauXgFmxyWWO5VHcGUNToGy7lulbN6E"}.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,s=`http://${o}?ns=${c.namespace}`,l=Uw(s,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new gy(gy.OWNER):new py(e.name,e.options,t);cw("Invalid Firebase Database URL",l),Gy(l.path)||Qg("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=i_[t.name];i||(i={},i_[t.name]=i);let s=i[e.toURLString()];s&&Qg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new yw(e,s_,n,r),i[e.toURLString()]=s,s}(c,e,u,new my(e.name,n));return new o_(d,e)}class o_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(vw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ww(this._repo,By())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=i_[t];n&&n[e.key]===e||Qg(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Cw(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Qg("Cannot call "+e+" on a deleted database.")}}iv.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},iv.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Dg(qn),Un(new kt("database",((e,t)=>{let{instanceIdentifier:n}=t;return a_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Kn(Pg,Mg,e),Kn(Pg,Mg,"esm2017")}();const l_="firebasestorage.googleapis.com",c_="storageBucket";class u_ extends at{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(f_(e),`Firebase Storage: ${t} (${f_(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,u_.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var d_,h_;function f_(e){return"storage/"+e}function m_(){return new u_(d_.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function p_(){return new u_(d_.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function g_(){return new u_(d_.CANCELED,"User canceled the upload/download.")}function y_(){return new u_(d_.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v_(e){return new u_(d_.INVALID_ARGUMENT,e)}function b_(){return new u_(d_.APP_DELETED,"The Firebase app was deleted.")}function x_(e,t){return new u_(d_.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function w_(e){throw new u_(d_.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(d_||(d_={}));class __{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=__.makeFromUrl(e,t)}catch(S2){return new __(e,"")}if(""===n.path)return n;throw r=e,new u_(d_.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===l_?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new __(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new u_(d_.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class N_{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function j_(e){return"string"===typeof e||e instanceof String}function S_(e){return E_()&&e instanceof Blob}function E_(){return"undefined"!==typeof Blob}function C_(e,t,n,r){if(r<t)throw v_(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw v_(`Invalid value for '${e}'. Expected ${n} or less.`)}function k_(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function T_(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function I_(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(h_||(h_={}));class A_{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new O_(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===h_.NO_ERROR,i=n.getStatus();if(!t||I_(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===h_.ABORT;return void e(!1,new O_(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new O_(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(S2){r(S2)}else if(null!==i){const e=m_();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?b_():g_())}else{r(p_())}};this.canceled_?t(0,new O_(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let m=!1;function p(e){m||(m=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout((()=>{a=!0,p(!0)}),n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class O_{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function P_(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function M_(){const e=P_();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(E_())return new Blob(n);throw new u_(d_.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function R_(e){if("undefined"===typeof atob)throw t="base-64",new u_(d_.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const D_="raw",L_="base64",F_="base64url",U_="data_url";class B_{constructor(e,t){this.data=e,this.contentType=t||null}}function V_(e,t){switch(e){case D_:return new B_($_(t));case L_:case F_:return new B_(z_(e,t));case U_:return new B_(function(e){const t=new q_(e);return t.base64?z_(L_,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(S2){throw x_(U_,"Malformed data URL.")}return $_(t)}(t.rest)}(t),new q_(t).contentType)}throw m_()}function $_(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function z_(e,t){switch(e){case L_:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw x_(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case F_:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw x_(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=R_(t)}catch(S2){if(S2.message.includes("polyfill"))throw S2;throw x_(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class q_{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw x_(U_,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class H_{constructor(e,t){let n=0,r="";S_(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(S_(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new H_(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new H_(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(E_()){const e=t.map((e=>e instanceof H_?e.data_:e));return new H_(M_.apply(null,e))}{const e=t.map((e=>j_(e)?V_(D_,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new H_(r,!0)}}uploadData(){return this.data_}}function W_(e){let t;try{t=JSON.parse(e)}catch(S2){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function K_(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function G_(e,t){return t}class Y_{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||G_}}let X_=null;function Z_(){if(X_)return X_;const e=[];e.push(new Y_("bucket")),e.push(new Y_("generation")),e.push(new Y_("metageneration")),e.push(new Y_("name","fullPath",!0));const t=new Y_("name");t.xform=function(e,t){return function(e){return!j_(e)||e.length<2?e:K_(e)}(t)},e.push(t);const n=new Y_("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Y_("timeCreated")),e.push(new Y_("updated")),e.push(new Y_("md5Hash",null,!0)),e.push(new Y_("cacheControl",null,!0)),e.push(new Y_("contentDisposition",null,!0)),e.push(new Y_("contentEncoding",null,!0)),e.push(new Y_("contentLanguage",null,!0)),e.push(new Y_("contentType",null,!0)),e.push(new Y_("metadata","customMetadata",!0)),X_=e,X_}function Q_(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new __(n,r);return t._makeStorageReference(i)}})}(r,e),r}function J_(e,t,n){const r=W_(t);if(null===r)return null;return Q_(e,r,n)}function eN(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class tN{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function nN(e){if(!e)throw m_()}function rN(e,t){return function(n,r){const i=J_(e,r,t);return nN(null!==i),i}}function iN(e,t){return function(n,r){const i=J_(e,r,t);return nN(null!==i),function(e,t,n,r){const i=W_(t);if(null===i)return null;if(!j_(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent,o=s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return k_("/b/"+a(i)+"/o/"+a(s),n,r)+T_({alt:"media",token:t})}));return o[0]}(i,r,e.host,e._protocol)}}function sN(e){return function(t,n){let r;var i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new u_(d_.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new u_(d_.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new u_(d_.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):r=403===t.getStatus()?function(e){return new u_(d_.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function aN(e){const t=sN(e);return function(n,r){let i=t(n,r);return 404===n.getStatus()&&(i=function(e){return new u_(d_.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),i.serverResponse=r.serverResponse,i}}function oN(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function lN(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=oN(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+eN(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=H_.getBlob(c,r,u);if(null===d)throw y_();const h={name:l.fullPath},f=k_(s,e.host,e._protocol),m=e.maxUploadRetryTime,p=new tN(f,"POST",rN(e,n),m);return p.urlParams=h,p.headers=a,p.body=d.uploadData(),p.errorHandler=sN(t),p}class cN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=h_.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=h_.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=h_.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw w_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw w_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw w_("cannot .getStatus() before sending");try{return this.xhr_.status}catch(S2){return-1}}getResponse(){if(!this.sent_)throw w_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw w_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class uN extends cN{initXhr(){this.xhr_.responseType="text"}}function dN(){return new uN}class hN{constructor(e,t){this._service=e,this._location=t instanceof __?t:__.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hN(e,t)}get root(){const e=new __(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K_(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new __(this._location.bucket,e);return new hN(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new u_(d_.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function fN(e,t,n){e._throwIfRoot("uploadBytes");const r=lN(e.storage,e._location,Z_(),new H_(t,!0),n);return e.storage.makeRequestWithTokens(r,dN).then((t=>({metadata:t,ref:e})))}function mN(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=k_(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new tN(r,"GET",iN(e,n),i);return s.errorHandler=aN(t),s}(e.storage,e._location,Z_());return e.storage.makeRequestWithTokens(t,dN).then((e=>{if(null===e)throw new u_(d_.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function pN(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new __(e._location.bucket,n);return new hN(e.storage,r)}function gN(e,t){if(e instanceof bN){const n=e;if(null==n._bucket)throw new u_(d_.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+c_+"' property when initializing the app?");const r=new hN(n,n._bucket);return null!=t?gN(r,t):r}return void 0!==t?pN(e,t):e}function yN(e,t){if(t&&function(e){return/^[A-Za-z]+:\/\//.test(e)}(t)){if(e instanceof bN)return new hN(e,t);throw v_("To use ref(service, url), the first argument must be a Storage instance.")}return gN(e,t)}function vN(e,t){const n=null===t||void 0===t?void 0:t[c_];return null==n?null:__.makeFromBucketSpec(n,e)}class bN{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=l_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?__.makeFromBucketSpec(r,this._host):vN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=__.makeFromBucketSpec(this._url,e):this._bucket=vN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hN(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new N_(b_());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=T_(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new A_(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const xN="@firebase/storage",wN="0.13.2",_N="storage";function NN(e,t,n){return fN(e=Ct(e),t,n)}function jN(e){return mN(e=Ct(e))}function SN(e,t){return yN(e=Ct(e),t)}function EN(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new bN(r,i,s,n,qn)}Un(new kt(_N,EN,"PUBLIC").setMultipleInstances(!0)),Kn(xN,wN,""),Kn(xN,wN,"esm2017");const CN=Hn({apiKey:"AIzaSyChJnuCK7QY2EXPTtF9Obp7mWyZXGfzsTE",authDomain:"acs-test-3e9f7.firebaseapp.com",databaseURL:"https://acs-test-3e9f7-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"acs-test-3e9f7",storageBucket:"acs-test-3e9f7.firebasestorage.app",messagingSenderId:"488154646618",appId:"1:488154646618:web:bce97845a4a2a9c15b3063",measurementId:"G-BV4DB5HFLX"}),kN=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn();e=Ct(e);const t=Bn(e,mo);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Bn(e,mo);if(n.isInitialized()){const e=n.getImmediate();if(gt(t,n.getOptions()))return e;throw yo.create("already-initialized")}const r=n.initialize({options:t})}(e)}(CN),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn();const t=Bn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Bn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(gt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ur(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ya,persistence:[Ts,hs,ms]}),r=Ye("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>wa)return;const r=null===t||void 0===t?void 0:t.token;_a!==r&&(_a=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Ct(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Ct(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=We("auth");return s&&Si(n,`http://${s}`),n}(CN)),TN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn(),t=arguments.length>1?arguments[1]:void 0;e=Ct(e);const n=Bn(e,_N).getImmediate({identifier:t}),r=Ke("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Ze(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(CN),IN=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Bn("object"==typeof e?e:Wn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Ke("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=gp(e,vp))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ol.MOCK_USER;else{t=Ze(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new bl(vl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ol(s)}e._authCredentials=new Nl(new wl(t,n))}}(r,...e)}return r}(CN),AN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn(),t=arguments.length>1?arguments[1]:void 0;const n=Bn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Ke("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ct(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Qg("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Qg('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new gy(gy.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Ze(r.mockUserToken,e.app.options.projectId);s=new gy(t)}!function(e,t,n,r){e.repoInfo_=new _y(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}(CN);var ON=n(579);const PN=(0,r.createContext)(null),MN=()=>{const e=(0,r.useContext)(PN);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},RN=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),o=te(),l=J(),c=async e=>{try{var t;const n=localStorage.getItem("userData"),r=localStorage.getItem("userRole");if(n&&r){const t=JSON.parse(n);return{...e,role:r,fullName:t.fullName,department:t.department,idNumber:t.idNumber}}const i=lg(_p(IN,"users"),ug("idNumber","==",null===(t=e.email)||void 0===t?void 0:t.split("@")[0]),ug("role","==","admin")),s=await Sg(i);if(!s.empty){const t=s.docs[0].data(),n={...e,role:"admin",fullName:t.fullName,department:t.department,idNumber:t.idNumber};return localStorage.setItem("userRole","admin"),localStorage.setItem("userData",JSON.stringify({fullName:t.fullName,department:t.department,idNumber:t.idNumber})),n}const a=await Ng(Np(IN,"teachers",e.uid));if(a.exists()){const t=a.data(),n={...e,role:"instructor",fullName:t.fullName,department:t.department};return localStorage.setItem("userRole","instructor"),localStorage.setItem("userData",JSON.stringify({fullName:t.fullName,department:t.department})),n}const o=await Ng(Np(IN,"students",e.uid));if(o.exists()){const t=o.data(),n={...e,role:"student",fullName:t.fullName,department:t.department};return localStorage.setItem("userRole","student"),localStorage.setItem("userData",JSON.stringify({fullName:t.fullName,department:t.department})),n}return e}catch(Zg){return console.error("Error fetching user data:",Zg),e}},u=e=>{const t=l.pathname;if(!e)return void(("/"===t||t.includes("/admin/")||t.includes("/instructor/")||t.includes("/student/"))&&o("/login",{replace:!0}));const n=e.role&&{admin:"/admin/dashboard",instructor:"/instructor/dashboard",student:"/student/dashboard"}[e.role];n&&("/"===t||"/login"===t||"/admin/login"===t||"/register"===t||t.includes("/admin/")&&"admin"!==e.role||t.includes("/instructor/")&&"instructor"!==e.role||t.includes("/student/")&&"student"!==e.role)&&o(n,{replace:!0})};(0,r.useEffect)((()=>{const e=function(e,t,n,r){return Ct(e).onAuthStateChanged(t,n,r)}(kN,(async e=>{try{if(e){const t=await c(e);i(t),u(t)}else i(null),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),u(null)}catch(Zg){console.error("Auth state change error:",Zg)}finally{a(!1)}}));return()=>e()}),[o,l.pathname]);const d={currentUser:n,login:async(e,t)=>{try{a(!0);const n=e.includes("@")?e:`${e}@yourdomain.com`,{user:r}=await ss(kN,n,t),s=await c(r);i(s)}catch(Zg){throw console.error("Login error:",Zg),Zg}finally{a(!1)}},register:async(e,t,n)=>{try{const{user:r}=await is(kN,e,t);await Eg(Np(IN,"users",r.uid),{...n,createdAt:(new Date).toISOString()})}catch(Zg){throw console.error("Register error:",Zg),Zg}},logout:async()=>{try{await ls(kN),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),o("/login",{replace:!0})}catch(Zg){throw console.error("Logout error:",Zg),Zg}},loading:s,setUser:async e=>{try{const t={...kN.currentUser,...e,role:"admin"};i(t),localStorage.setItem("userRole","admin"),localStorage.setItem("userData",JSON.stringify({fullName:e.fullName,idNumber:e.idNumber,email:e.email})),o("/admin/dashboard",{replace:!0})}catch(Zg){throw console.error("Set user error:",Zg),Zg}}};return(0,ON.jsx)(PN.Provider,{value:d,children:s?(0,ON.jsx)("div",{children:"Loading..."}):t})},DN=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),LN=(0,r.createContext)({}),FN=(0,r.createContext)(null),UN="undefined"!==typeof document,BN=UN?r.useLayoutEffect:r.useEffect,VN=(0,r.createContext)({strict:!1}),$N=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),zN="data-"+$N("framerAppearId");function qN(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function HN(e){return"string"===typeof e||Array.isArray(e)}function WN(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const KN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],GN=["initial",...KN];function YN(e){return WN(e.animate)||GN.some((t=>HN(e[t])))}function XN(e){return Boolean(YN(e)||e.variants)}function ZN(e){const{initial:t,animate:n}=function(e,t){if(YN(e)){const{initial:t,animate:n}=e;return{initial:!1===t||HN(t)?t:void 0,animate:HN(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(LN));return(0,r.useMemo)((()=>({initial:t,animate:n})),[QN(t),QN(n)])}function QN(e){return Array.isArray(e)?e.join(" "):e}const JN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ej={};for(const n in JN)ej[n]={isEnabled:e=>JN[n].some((t=>!!e[t]))};const tj=(0,r.createContext)({}),nj=(0,r.createContext)({}),rj=Symbol.for("motionComponentSymbol");function ij(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:s,Component:a}=e;t&&function(e){for(const t in e)ej[t]={...ej[t],...e[t]}}(t);const o=(0,r.forwardRef)((function(e,o){let l;const c={...(0,r.useContext)(DN),...e,layoutId:sj(e)},{isStatic:u}=c,d=ZN(e),h=s(e,u);if(!u&&UN){d.visualElement=function(e,t,n,i){const{visualElement:s}=(0,r.useContext)(LN),a=(0,r.useContext)(VN),o=(0,r.useContext)(FN),l=(0,r.useContext)(DN).reducedMotion,c=(0,r.useRef)();i=i||a.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const u=c.current;(0,r.useInsertionEffect)((()=>{u&&u.update(n,o)}));const d=(0,r.useRef)(Boolean(n[zN]&&!window.HandoffComplete));return BN((()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())})),(0,r.useEffect)((()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))})),u}(a,h,c,n);const e=(0,r.useContext)(nj),i=(0,r.useContext)(VN).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,i,t,e))}return r.createElement(LN.Provider,{value:d},l&&d.visualElement?r.createElement(l,{visualElement:d.visualElement,...c}):null,i(a,e,function(e,t,n){return(0,r.useCallback)((r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):qN(n)&&(n.current=r))}),[t])}(h,d.visualElement,o),h,u,d.visualElement))}));return o[rj]=a,o}function sj(e){let{layoutId:t}=e;const n=(0,r.useContext)(tj).id;return n&&void 0!==t?n+"-"+t:t}function aj(e){function t(t){return ij(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const oj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lj(e){return"string"===typeof e&&!e.includes("-")&&!!(oj.indexOf(e)>-1||/[A-Z]/.test(e))}const cj={};const uj=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dj=new Set(uj);function hj(e,t){let{layout:n,layoutId:r}=t;return dj.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!cj[e]||"opacity"===e)}const fj=e=>Boolean(e&&e.getVelocity),mj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pj=uj.length;const gj=e=>t=>"string"===typeof t&&t.startsWith(e),yj=gj("--"),vj=gj("var(--"),bj=(e,t)=>t&&"number"===typeof e?t.transform(e):e,xj=(e,t,n)=>Math.min(Math.max(n,e),t),wj={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},_j={...wj,transform:e=>xj(0,1,e)},Nj={...wj,default:1},jj=e=>Math.round(1e5*e)/1e5,Sj=/(-)?([\d]*\.?[\d])+/g,Ej=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Cj=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function kj(e){return"string"===typeof e}const Tj=e=>({test:t=>kj(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Ij=Tj("deg"),Aj=Tj("%"),Oj=Tj("px"),Pj=Tj("vh"),Mj=Tj("vw"),Rj={...Aj,parse:e=>Aj.parse(e)/100,transform:e=>Aj.transform(100*e)},Dj={...wj,transform:Math.round},Lj={borderWidth:Oj,borderTopWidth:Oj,borderRightWidth:Oj,borderBottomWidth:Oj,borderLeftWidth:Oj,borderRadius:Oj,radius:Oj,borderTopLeftRadius:Oj,borderTopRightRadius:Oj,borderBottomRightRadius:Oj,borderBottomLeftRadius:Oj,width:Oj,maxWidth:Oj,height:Oj,maxHeight:Oj,size:Oj,top:Oj,right:Oj,bottom:Oj,left:Oj,padding:Oj,paddingTop:Oj,paddingRight:Oj,paddingBottom:Oj,paddingLeft:Oj,margin:Oj,marginTop:Oj,marginRight:Oj,marginBottom:Oj,marginLeft:Oj,rotate:Ij,rotateX:Ij,rotateY:Ij,rotateZ:Ij,scale:Nj,scaleX:Nj,scaleY:Nj,scaleZ:Nj,skew:Ij,skewX:Ij,skewY:Ij,distance:Oj,translateX:Oj,translateY:Oj,translateZ:Oj,x:Oj,y:Oj,z:Oj,perspective:Oj,transformPerspective:Oj,opacity:_j,originX:Rj,originY:Rj,originZ:Oj,zIndex:Dj,fillOpacity:_j,strokeOpacity:_j,numOctaves:Dj};function Fj(e,t,n,r){const{style:i,vars:s,transform:a,transformOrigin:o}=e;let l=!1,c=!1,u=!0;for(const d in t){const e=t[d];if(yj(d)){s[d]=e;continue}const n=Lj[d],r=bj(e,n);if(dj.has(d)){if(l=!0,a[d]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,o[d]=r):i[d]=r}if(t.transform||(l||r?i.transform=function(e,t,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:s=!0}=t,a="";for(let o=0;o<pj;o++){const t=uj[o];void 0!==e[t]&&(a+=`${mj[t]||t}(${e[t]}) `)}return i&&!e.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(e,n?"":a):s&&n&&(a="none"),a}(e.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;i.transformOrigin=`${e} ${t} ${n}`}}const Uj=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bj(e,t,n){for(const r in t)fj(t[r])||hj(r,n)||(e[r]=t[r])}function Vj(e,t,n){const i={};return Bj(i,e.style||{},e),Object.assign(i,function(e,t,n){let{transformTemplate:i}=e;return(0,r.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Fj(e,t,{enableHardwareAcceleration:!n},i),Object.assign({},e.vars,e.style)}),[t])}(e,t,n)),e.transformValues?e.transformValues(i):i}function $j(e,t,n){const r={},i=Vj(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const zj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qj(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||zj.has(e)}let Hj=e=>!qj(e);try{(Wj=require("@emotion/is-prop-valid").default)&&(Hj=e=>e.startsWith("on")?!qj(e):Wj(e))}catch(W5){}var Wj;function Kj(e,t,n){return"string"===typeof e?e:Oj.transform(t+n*e)}const Gj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yj={offset:"strokeDashoffset",array:"strokeDasharray"};function Xj(e,t,n,r,i){let{attrX:s,attrY:a,attrScale:o,originX:l,originY:c,pathLength:u,pathSpacing:d=1,pathOffset:h=0,...f}=t;if(Fj(e,f,n,i),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:g}=e;m.transform&&(g&&(p.transform=m.transform),delete m.transform),g&&(void 0!==l||void 0!==c||p.transform)&&(p.transformOrigin=function(e,t,n){return`${Kj(t,e.x,e.width)} ${Kj(n,e.y,e.height)}`}(g,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==s&&(m.x=s),void 0!==a&&(m.y=a),void 0!==o&&(m.scale=o),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=i?Gj:Yj;e[s.offset]=Oj.transform(-r);const a=Oj.transform(t),o=Oj.transform(n);e[s.array]=`${a} ${o}`}(m,u,d,h,!1)}const Zj=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),Qj=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Jj(e,t,n,i){const s=(0,r.useMemo)((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Xj(n,t,{enableHardwareAcceleration:!1},Qj(i),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};Bj(t,e.style,e),s.style={...t,...s.style}}return s}function eS(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,s,a)=>{let{latestValues:o}=s;const l=(lj(t)?Jj:$j)(n,o,a,t),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(Hj(i)||!0===n&&qj(i)||!t&&!qj(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),u={...c,...l,ref:i},{children:d}=n,h=(0,r.useMemo)((()=>fj(d)?d.get():d),[d]);return(0,r.createElement)(t,{...u,children:h})}}function tS(e,t,n,r){let{style:i,vars:s}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const a in s)e.style.setProperty(a,s[a])}const nS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rS(e,t,n,r){tS(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(nS.has(i)?i:$N(i),t.attrs[i])}function iS(e,t){const{style:n}=e,r={};for(const i in n)(fj(n[i])||t.style&&fj(t.style[i])||hj(i,e))&&(r[i]=n[i]);return r}function sS(e,t){const n=iS(e,t);for(const r in e)if(fj(e[r])||fj(t[r])){n[-1!==uj.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function aS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}function oS(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const lS=e=>Array.isArray(e),cS=e=>lS(e)?e[e.length-1]||0:e;function uS(e){const t=fj(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const dS=e=>(t,n)=>{const i=(0,r.useContext)(LN),s=(0,r.useContext)(FN),a=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:s,onMount:a}=e;const o={latestValues:hS(t,n,r,i),renderState:s()};return a&&(o.mount=e=>a(t,e,o)),o}(e,t,i,s);return n?a():oS(a)};function hS(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=uS(s[h]);let{initial:a,animate:o}=e;const l=YN(e),c=XN(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const d=u?o:a;if(d&&"boolean"!==typeof d&&!WN(d)){(Array.isArray(d)?d:[d]).forEach((t=>{const n=aS(e,t);if(!n)return;const{transitionEnd:r,transition:s,...a}=n;for(const e in a){let t=a[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]}))}return i}const fS=e=>e;class mS{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const pS=["prepare","read","update","preRender","render","postRender"];const{schedule:gS,cancel:yS,state:vS,steps:bS}=function(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=pS.reduce(((e,t)=>(e[t]=function(e){let t=new mS,n=new mS,r=0,i=!1,s=!1;const a=new WeakSet,o={schedule:function(e){const s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,o=s?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),o.add(e)&&s&&i&&(r=t.order.length),e},cancel:e=>{n.remove(e),a.delete(e)},process:l=>{if(i)s=!0;else{if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),a.has(r)&&(o.schedule(r),e())}i=!1,s&&(s=!1,o.process(l))}}};return o}((()=>n=!0)),e)),{}),a=e=>s[e].process(i),o=()=>{const s=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,pS.forEach(a),i.isProcessing=!1,n&&t&&(r=!1,e(o))},l=pS.reduce(((t,a)=>{const l=s[a];return t[a]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(o)),l.schedule(t,s,a)},t}),{});return{schedule:l,cancel:e=>pS.forEach((t=>s[t].cancel(e))),state:i,steps:s}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:fS,!0),xS={useVisualState:dS({scrapeMotionValuesFromProps:sS,createRenderState:Zj,onMount:(e,t,n)=>{let{renderState:r,latestValues:i}=n;gS.read((()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(S2){r.dimensions={x:0,y:0,width:0,height:0}}})),gS.render((()=>{Xj(r,i,{enableHardwareAcceleration:!1},Qj(t.tagName),e.transformTemplate),rS(t,r)}))}})},wS={useVisualState:dS({scrapeMotionValuesFromProps:iS,createRenderState:Uj})};function _S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const NS=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function jS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function SS(e,t,n,r){return _S(e,t,(e=>t=>NS(t)&&e(t,jS(t)))(n),r)}const ES=(e,t)=>n=>t(e(n)),CS=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(ES)};function kS(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const TS=kS("dragHorizontal"),IS=kS("dragVertical");function AS(e){let t=!1;if("y"===e)t=IS();else if("x"===e)t=TS();else{const e=TS(),n=IS();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function OS(){const e=AS(!0);return!e||(e(),!1)}class PS{constructor(e){this.isMounted=!1,this.node=e}update(){}}function MS(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return SS(e.current,n,((n,i)=>{if("touch"===n.pointerType||OS())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[r]&&gS.update((()=>s[r](n,i)))}),{passive:!e.getProps()[r]})}const RS=(e,t)=>!!t&&(e===t||RS(e,t.parentElement));function DS(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,jS(n))}const LS=new WeakMap,FS=new WeakMap,US=e=>{const t=LS.get(e.target);t&&t(e)},BS=e=>{e.forEach(US)};function VS(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;FS.has(r)||FS.set(r,{});const i=FS.get(r),s=JSON.stringify(n);return i[s]||(i[s]=new IntersectionObserver(BS,{root:t,...n})),i[s]}(t);return LS.set(e,n),r.observe(e),()=>{LS.delete(e),r.unobserve(e)}}const $S={some:0,all:1};const zS={inView:{Feature:class extends PS{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:$S[r]};return VS(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends PS{constructor(){super(...arguments),this.removeStartListeners=fS,this.removeEndListeners=fS,this.removeAccessibleListeners=fS,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=SS(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps();gS.update((()=>{i||RS(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)}))}),{passive:!(n.onTap||n.onPointerUp)}),i=SS(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=CS(r,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=_S(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=_S(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&DS("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&gS.update((()=>n(e,t)))}))})),DS("down",((e,t)=>{this.startPress(e,t)}))})),t=_S(this.node.current,"blur",(()=>{this.isPressing&&DS("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=CS(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&gS.update((()=>n(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!OS()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&gS.update((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=SS(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=_S(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=CS(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends PS{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(S2){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=CS(_S(this.node.current,"focus",(()=>this.onFocus())),_S(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends PS{mount(){this.unmount=CS(MS(this.node,!0),MS(this.node,!1))}unmount(){}}}};function qS(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function HS(e,t,n){const r=e.getProps();return aS(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.get())),t}(e),function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.getVelocity())),t}(e))}let WS=fS,KS=fS;const GS=e=>1e3*e,YS=e=>e/1e3,XS=!1,ZS=e=>Array.isArray(e)&&"number"===typeof e[0];function QS(e){return Boolean(!e||"string"===typeof e&&eE[e]||ZS(e)||Array.isArray(e)&&e.every(QS))}const JS=e=>{let[t,n,r,i]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${i})`},eE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:JS([0,.65,.55,1]),circOut:JS([.55,0,1,.45]),backIn:JS([.31,.01,.66,-.59]),backOut:JS([.33,1.53,.69,.99])};function tE(e){if(e)return ZS(e)?JS(e):Array.isArray(e)?e.map(tE):eE[e]}const nE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function rE(e,t,n,r){if(e===t&&n===r)return fS;const i=t=>function(e,t,n,r,i){let s,a,o=0;do{a=t+(n-t)/2,s=nE(a,r,i)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:nE(i(e),t,r)}const iE=rE(.42,0,1,1),sE=rE(0,0,.58,1),aE=rE(.42,0,.58,1),oE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,lE=e=>t=>1-e(1-t),cE=e=>1-Math.sin(Math.acos(e)),uE=lE(cE),dE=oE(cE),hE=rE(.33,1.53,.69,.99),fE=lE(hE),mE=oE(fE),pE={linear:fS,easeIn:iE,easeInOut:aE,easeOut:sE,circIn:cE,circInOut:dE,circOut:uE,backIn:fE,backInOut:mE,backOut:hE,anticipate:e=>(e*=2)<1?.5*fE(e):.5*(2-Math.pow(2,-10*(e-1)))},gE=e=>{if(Array.isArray(e)){KS(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return rE(t,n,r,i)}return"string"===typeof e?(KS(void 0!==pE[e],`Invalid easing type '${e}'`),pE[e]):e},yE=(e,t)=>n=>Boolean(kj(n)&&Cj.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),vE=(e,t,n)=>r=>{if(!kj(r))return r;const[i,s,a,o]=r.match(Sj);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},bE={...wj,transform:e=>Math.round((e=>xj(0,255,e))(e))},xE={test:yE("rgb","red"),parse:vE("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+bE.transform(t)+", "+bE.transform(n)+", "+bE.transform(r)+", "+jj(_j.transform(i))+")"}};const wE={test:yE("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:xE.transform},_E={test:yE("hsl","hue"),parse:vE("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+Aj.transform(jj(n))+", "+Aj.transform(jj(r))+", "+jj(_j.transform(i))+")"}},NE={test:e=>xE.test(e)||wE.test(e)||_E.test(e),parse:e=>xE.test(e)?xE.parse(e):_E.test(e)?_E.parse(e):wE.parse(e),transform:e=>kj(e)?e:e.hasOwnProperty("red")?xE.transform(e):_E.transform(e)},jE=(e,t,n)=>-n*e+n*t+e;function SE(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const EE=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},CE=[wE,xE,_E];function kE(e){const t=(e=>CE.find((t=>t.test(e))))(e);KS(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let n=t.parse(e);return t===_E&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,a=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=SE(i,e,t+1/3),a=SE(i,e,t),o=SE(i,e,t-1/3)}else s=a=o=r;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*o),alpha:i}}(n)),n}const TE=(e,t)=>{const n=kE(e),r=kE(t),i={...n};return e=>(i.red=EE(n.red,r.red,e),i.green=EE(n.green,r.green,e),i.blue=EE(n.blue,r.blue,e),i.alpha=jE(n.alpha,r.alpha,e),xE.transform(i))};const IE={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:fS},AE={regex:Ej,countKey:"Colors",token:"${c}",parse:NE.parse},OE={regex:Sj,countKey:"Numbers",token:"${n}",parse:wj.parse};function PE(e,t){let{regex:n,countKey:r,token:i,parse:s}=t;const a=e.tokenised.match(n);a&&(e["num"+r]=a.length,e.tokenised=e.tokenised.replace(n,i),e.values.push(...a.map(s)))}function ME(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&PE(n,IE),PE(n,AE),PE(n,OE),n}function RE(e){return ME(e).values}function DE(e){const{values:t,numColors:n,numVars:r,tokenised:i}=ME(e),s=t.length;return e=>{let t=i;for(let i=0;i<s;i++)t=i<r?t.replace(IE.token,e[i]):i<r+n?t.replace(AE.token,NE.transform(e[i])):t.replace(OE.token,jj(e[i]));return t}}const LE=e=>"number"===typeof e?0:e;const FE={test:function(e){var t,n;return isNaN(e)&&kj(e)&&((null===(t=e.match(Sj))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Ej))||void 0===n?void 0:n.length)||0)>0},parse:RE,createTransformer:DE,getAnimatableNone:function(e){const t=RE(e);return DE(e)(t.map(LE))}},UE=(e,t)=>n=>`${n>0?t:e}`;function BE(e,t){return"number"===typeof e?n=>jE(e,t,n):NE.test(e)?TE(e,t):e.startsWith("var(")?UE(e,t):zE(e,t)}const VE=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>BE(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},$E=(e,t)=>{const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=BE(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}},zE=(e,t)=>{const n=FE.createTransformer(t),r=ME(e),i=ME(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?CS(VE(r.values,i.values),n):(WS(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),UE(e,t))},qE=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},HE=(e,t)=>n=>jE(e,t,n);function WE(e,t,n){const r=[],i=n||function(e){return"number"===typeof e?HE:"string"===typeof e?NE.test(e)?TE:zE:Array.isArray(e)?VE:"object"===typeof e?$E:HE}(e[0]),s=e.length-1;for(let a=0;a<s;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||fS:t;n=CS(e,n)}r.push(n)}return r}function KE(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(KS(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=WE(t,r,i),o=a.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=qE(e[n],e[n+1],t);return a[n](r)};return n?t=>l(xj(e[0],e[s-1],t)):l}function GE(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=qE(0,t,r);e.push(jE(n,1,i))}}(t,e.length-1),t}function YE(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(gE):gE(i),a={done:!1,value:n[0]},o=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:GE(n),t),l=KE(o,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map((()=>u||aE)).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}function XE(e,t){return t?e*(1e3/t):0}function ZE(e,t,n){const r=Math.max(t-5,0);return XE(n-e(r),t-r)}const QE=.001;function JE(e){let t,n,{duration:r=800,bounce:i=.25,velocity:s=0,mass:a=1}=e;WS(r<=GS(10),"Spring duration must be 10 seconds or less");let o=1-i;o=xj(.05,1,o),r=xj(.01,10,YS(r)),o<1?(t=e=>{const t=e*o,n=t*r,i=t-s,a=tC(e,o),l=Math.exp(-n);return QE-i/a*l},n=e=>{const n=e*o*r,i=n*s+s,a=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=tC(Math.pow(e,2),o);return(-t(e)+QE>0?-1:1)*((i-a)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let i=1;i<eC;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=GS(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:r}}}const eC=12;function tC(e,t){return e*Math.sqrt(1-t*t)}const nC=["duration","bounce"],rC=["stiffness","damping","mass"];function iC(e,t){return t.some((t=>void 0!==e[t]))}function sC(e){let{keyframes:t,restDelta:n,restSpeed:r,...i}=e;const s=t[0],a=t[t.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!iC(e,rC)&&iC(e,nC)){const n=JE(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}({...i,velocity:-YS(i.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=a-s,y=YS(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?.01:2),n||(n=v?.005:.5),p<1){const e=tC(y,p);b=t=>{const n=Math.exp(-p*y*t);return a-n*((m+p*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===p)b=e=>a-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(p*p-1);b=t=>{const n=Math.exp(-p*y*t),r=Math.min(e*t,300);return a-n*((m+p*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)o.done=e>=d;else{let i=m;0!==e&&(i=p<1?ZE(b,e,t):0);const s=Math.abs(i)<=r,l=Math.abs(a-t)<=n;o.done=s&&l}return o.value=o.done?a:t,o}}}function aC(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},m=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let p=r*n;const g=h+p,y=void 0===o?g:o(g);y!==g&&(p=y-h);const v=e=>-p*Math.exp(-e/i),b=e=>y+v(e),x=e=>{const t=v(e),n=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let w,_;const N=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(w=e,_=sC({keyframes:[f.value,m(f.value)],velocity:ZE(b,e,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return _||void 0!==w||(t=!0,x(e),N(e)),void 0!==w&&e>w?_.next(e-w):(!t&&x(e),f)}}}const oC=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>gS.update(t,!0),stop:()=>yS(t),now:()=>vS.isProcessing?vS.timestamp:performance.now()}};function lC(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const cC={decay:aC,inertia:aC,tween:YE,keyframes:YE,spring:sC};function uC(e){let t,n,{autoplay:r=!0,delay:i=0,driver:s=oC,keyframes:a,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:f,onUpdate:m,...p}=e,g=1,y=!1;const v=()=>{n=new Promise((e=>{t=e}))};let b;v();const x=cC[o]||YE;let w;x!==YE&&"number"!==typeof a[0]&&(w=KE([0,100],a,{clamp:!1}),a=[0,100]);const _=x({...p,keyframes:a});let N;"mirror"===u&&(N=x({...p,keyframes:[...a].reverse(),velocity:-(p.velocity||0)}));let j="idle",S=null,E=null,C=null;null===_.calculatedDuration&&l&&(_.calculatedDuration=lC(_));const{calculatedDuration:k}=_;let T=1/0,I=1/0;null!==k&&(T=k+c,I=T*(l+1)-c);let A=0;const O=e=>{if(null===E)return;g>0&&(E=Math.min(E,e)),g<0&&(E=Math.min(e-I/g,E)),A=null!==S?S:Math.round(e-E)*g;const t=A-i*(g>=0?1:-1),n=g>=0?t<0:t>I;A=Math.max(t,0),"finished"===j&&null===S&&(A=I);let r=A,s=_;if(l){const e=Math.min(A,I)/T;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===u?(n=1-n,c&&(n-=c/T)):"mirror"===u&&(s=N)),r=xj(0,1,n)*T}const o=n?{done:!1,value:a[0]}:s.next(r);w&&(o.value=w(o.value));let{done:d}=o;n||null===k||(d=g>=0?A>=I:A<=0);const h=null===S&&("finished"===j||"running"===j&&d);return m&&m(o.value),h&&R(),o},P=()=>{b&&b.stop(),b=void 0},M=()=>{j="idle",P(),t(),v(),E=C=null},R=()=>{j="finished",f&&f(),P(),t()},D=()=>{if(y)return;b||(b=s(O));const e=b.now();d&&d(),null!==S?E=e-S:E&&"finished"!==j||(E=e),"finished"===j&&v(),C=E,S=null,j="running",b.start()};r&&D();const L={then:(e,t)=>n.then(e,t),get time(){return YS(A)},set time(e){e=GS(e),A=e,null===S&&b&&0!==g?E=b.now()-e/g:S=e},get duration(){const e=null===_.calculatedDuration?lC(_):_.calculatedDuration;return YS(e)},get speed(){return g},set speed(e){e!==g&&b&&(g=e,L.time=YS(A))},get state(){return j},play:D,pause:()=>{j="paused",S=A},stop:()=>{y=!0,"idle"!==j&&(j="idle",h&&h(),M())},cancel:()=>{null!==C&&O(C),M()},complete:()=>{j="finished"},sample:e=>(E=0,O(e))};return L}const dC=function(e){let t;return()=>(void 0===t&&(t=e()),t)}((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),hC=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function fC(e,t,n){let{onUpdate:r,onComplete:i,...s}=n;if(!(dC()&&hC.has(t)&&!s.repeatDelay&&"mirror"!==s.repeatType&&0!==s.damping&&"inertia"!==s.type))return!1;let a,o,l=!1,c=!1;const u=()=>{o=new Promise((e=>{a=e}))};u();let{keyframes:d,duration:h=300,ease:f,times:m}=s;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!QS(t.ease))(t,s)){const e=uC({...s,repeat:0,delay:0});let t={done:!1,value:d[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;m=void 0,d=n,h=r-10,f="linear"}const p=function(e,t,n){let{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=tE(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"})}(e.owner.current,t,d,{...s,duration:h,ease:f,times:m}),g=()=>{c=!1,p.cancel()},y=()=>{c=!0,gS.update(g),a(),u()};p.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(d,s)),i&&i(),y())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(p.timeline=e,p.onfinish=null,fS),get time(){return YS(p.currentTime||0)},set time(e){p.currentTime=GS(e)},get speed(){return p.playbackRate},set speed(e){p.playbackRate=e},get duration(){return YS(h)},play:()=>{l||(p.play(),yS(g))},pause:()=>p.pause(),stop:()=>{if(l=!0,"idle"===p.playState)return;const{currentTime:t}=p;if(t){const n=uC({...s,autoplay:!1});e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}y()},complete:()=>{c||p.finish()},cancel:y}}const mC={type:"spring",stiffness:500,damping:25,restSpeed:10},pC={type:"keyframes",duration:.8},gC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yC=(e,t)=>{let{keyframes:n}=t;return n.length>2?pC:dj.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:mC:gC},vC=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!FE.test(t)&&"0"!==t||t.startsWith("url("))),bC=new Set(["brightness","contrast","saturate","opacity"]);function xC(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Sj)||[];if(!r)return e;const i=n.replace(r,"");let s=bC.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const wC=/([a-z-]*)\(.*?\)/g,_C={...FE,getAnimatableNone:e=>{const t=e.match(wC);return t?t.map(xC).join(" "):e}},NC={...Lj,color:NE,backgroundColor:NE,outlineColor:NE,fill:NE,stroke:NE,borderColor:NE,borderTopColor:NE,borderRightColor:NE,borderBottomColor:NE,borderLeftColor:NE,filter:_C,WebkitFilter:_C},jC=e=>NC[e];function SC(e,t){let n=jC(e);return n!==_C&&(n=FE),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const EC=e=>/^0[^.\s]+$/.test(e);function CC(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||EC(e):void 0}function kC(e,t){return e[t]||e.default||e}const TC=!1,IC=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const s=kC(r,e)||{},a=s.delay||r.delay||0;let{elapsed:o=0}=r;o-=GS(a);const l=function(e,t,n,r){const i=vC(t,n);let s;s=Array.isArray(n)?[...n]:[null,n];const a=void 0!==r.from?r.from:e.get();let o;const l=[];for(let c=0;c<s.length;c++)null===s[c]&&(s[c]=0===c?a:s[c-1]),CC(s[c])&&l.push(c),"string"===typeof s[c]&&"none"!==s[c]&&"0"!==s[c]&&(o=s[c]);if(i&&l.length&&o)for(let c=0;c<l.length;c++)s[l[c]]=SC(t,o);return s}(t,e,n,s),c=l[0],u=l[l.length-1],d=vC(e,c),h=vC(e,u);WS(d===h,`You are trying to animate ${e} from "${c}" to "${u}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${u} via the \`style\` property.`);let f={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-o,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length}(s)||(f={...f,...yC(e,f)}),f.duration&&(f.duration=GS(f.duration)),f.repeatDelay&&(f.repeatDelay=GS(f.repeatDelay)),!d||!h||XS||!1===s.type||TC)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:i}=e;const s=()=>(r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:fS,pause:fS,stop:fS,then:e=>(e(),Promise.resolve()),cancel:fS,complete:fS});return n?uC({keyframes:[0,1],duration:0,delay:n,onComplete:s}):s()}(XS?{...f,delay:0}:f);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=fC(t,e,f);if(n)return n}return uC(f)}};function AC(e){return Boolean(fj(e)&&e.add)}const OC=e=>/^\-?\d*\.?\d+$/.test(e);function PC(e,t){-1===e.indexOf(t)&&e.push(t)}function MC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class RC{constructor(){this.subscriptions=[]}add(e){return PC(this.subscriptions,e),()=>MC(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const DC={current:void 0};class LC{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:i}=vS;t.lastUpdated!==i&&(t.timeDelta=r,t.lastUpdated=i,gS.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>gS.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new RC);const n=this.events[e].add(t);return"change"===e?()=>{n(),gS.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return DC.current&&DC.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?XE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function FC(e,t){return new LC(e,t)}const UC=e=>t=>t.test(e),BC=[wj,Oj,Aj,Ij,Mj,Pj,{test:e=>"auto"===e,parse:e=>e}],VC=e=>BC.find(UC(e)),$C=[...BC,NE,FE],zC=e=>$C.find(UC(e));function qC(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,FC(n))}function HC(e,t){const n=HS(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const a in s){qC(e,a,cS(s[a]))}}function WC(e,t){if(!t)return;return(t[e]||t.default||t).from}function KC(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function GC(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function YC(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(s=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in o){const t=e.getValue(d),r=o[d];if(!t||void 0===r||u&&KC(u,d))continue;const i={delay:n,elapsed:0,...kC(s||{},d)};if(window.HandoffAppearAnimations){const n=e.getProps()[zN];if(n){const e=window.HandoffAppearAnimations(n,d,t,gS);null!==e&&(i.elapsed=e,i.isHandoff=!0)}}let a=!i.isHandoff&&!GC(t,r);if("spring"===i.type&&(t.getVelocity()||i.velocity)&&(a=!1),t.animation&&(a=!1),a)continue;t.start(IC(d,t,r,e.shouldReduceMotion&&dj.has(d)?{type:!1}:i));const h=t.animation;AC(l)&&(l.add(d),h.then((()=>l.remove(d)))),c.push(h)}return a&&Promise.all(c).then((()=>{a&&HC(e,a)})),c}function XC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=HS(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(YC(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const a=[],o=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(ZC).forEach(((e,r)=>{e.notify("AnimationStart",t),a.push(XC(e,t,{...s,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(a)}(e,t,s+r,a,o,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[e,t]="beforeChildren"===o?[s,a]:[a,s];return e().then((()=>t()))}return Promise.all([s(),a(n.delay)])}function ZC(e,t){return e.sortNodePosition(t)}const QC=[...KN].reverse(),JC=KN.length;function ek(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>XC(e,t,r)));n=Promise.all(i)}else if("string"===typeof t)n=XC(e,t,r);else{const i="function"===typeof t?HS(e,t,r.custom):t;n=Promise.all(YC(e,i,r))}return n.then((()=>e.notify("AnimationComplete",t)))}(e,n,r)})))}function tk(e){let t=ek(e);const n={animate:rk(!0),whileInView:rk(),whileHover:rk(),whileTap:rk(),whileDrag:rk(),whileFocus:rk(),exit:rk()};let r=!0;const i=(t,n)=>{const r=HS(e,n);if(r){const{transition:e,transitionEnd:n,...i}=r;t={...t,...i,...n}}return t};function s(s,a){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let d={},h=1/0;for(let t=0;t<JC;t++){const f=QC[t],m=n[f],p=void 0!==o[f]?o[f]:l[f],g=HN(p),y=f===a?m.isActive:null;!1===y&&(h=t);let v=p===l[f]&&p!==o[f]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),m.protectedKeys={...d},!m.isActive&&null===y||!p&&!m.prevProp||WN(p)||"boolean"===typeof p)continue;let b=nk(m.prevProp,p)||f===a&&m.isActive&&!v&&g||t>h&&g,x=!1;const w=Array.isArray(p)?p:[p];let _=w.reduce(i,{});!1===y&&(_={});const{prevResolvedValues:N={}}=m,j={...N,..._},S=e=>{b=!0,u.has(e)&&(x=!0,u.delete(e)),m.needsAnimating[e]=!0};for(const e in j){const t=_[e],n=N[e];if(d.hasOwnProperty(e))continue;let r=!1;r=lS(t)&&lS(n)?!qS(t,n):t!==n,r?void 0!==t?S(e):u.add(e):void 0!==t&&u.has(e)?S(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=_,m.isActive&&(d={...d,..._}),r&&e.blockInitialAnimation&&(b=!1),!b||v&&!x||c.push(...w.map((e=>({animation:e,options:{type:f,...s}}))))}if(u.size){const t={};u.forEach((n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)})),c.push({animation:t})}let f=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(c):Promise.resolve()}return{animateChanges:s,setActive:function(t,r,i){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const o=s(i,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function nk(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!qS(t,e)}function rk(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let ik=0;const sk={animation:{Feature:class extends PS{constructor(e){super(e),e.animationState||(e.animationState=tk(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),WN(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends PS{constructor(){super(...arguments),this.id=ik++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},ak=(e,t)=>Math.abs(e-t);class ok{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=uk(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=ak(e.x,t.x),r=ak(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=vS;this.history.push({...r,timestamp:i});const{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=lk(t,this.transformPagePoint),gS.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=uk("pointercancel"===e.type?this.lastMoveEventInfo:lk(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!NS(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const s=lk(jS(e),this.transformPagePoint),{point:a}=s,{timestamp:o}=vS;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,uk(s,this.history)),this.removeListeners=CS(SS(this.contextWindow,"pointermove",this.handlePointerMove),SS(this.contextWindow,"pointerup",this.handlePointerUp),SS(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yS(this.updatePoint)}}function lk(e,t){return t?{point:t(e.point)}:e}function ck(e,t){return{x:e.x-t.x,y:e.y-t.y}}function uk(e,t){let{point:n}=e;return{point:n,delta:ck(n,hk(t)),offset:ck(n,dk(t)),velocity:fk(t,.1)}}function dk(e){return e[0]}function hk(e){return e[e.length-1]}function fk(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=hk(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>GS(t)));)n--;if(!r)return{x:0,y:0};const s=YS(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function mk(e){return e.max-e.min}function pk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function gk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=jE(t.min,t.max,e.origin),e.scale=mk(n)/mk(t),(pk(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=jE(n.min,n.max,e.origin)-e.originPoint,(pk(e.translate)||isNaN(e.translate))&&(e.translate=0)}function yk(e,t,n,r){gk(e.x,t.x,n.x,r?r.originX:void 0),gk(e.y,t.y,n.y,r?r.originY:void 0)}function vk(e,t,n){e.min=n.min+t.min,e.max=e.min+mk(t)}function bk(e,t,n){e.min=t.min-n.min,e.max=e.min+mk(t)}function xk(e,t,n){bk(e.x,t.x,n.x),bk(e.y,t.y,n.y)}function wk(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function _k(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Nk=.35;function jk(e,t,n){return{min:Sk(e,t),max:Sk(e,n)}}function Sk(e,t){return"number"===typeof e?e:e[t]||0}function Ek(e){return[e("x"),e("y")]}function Ck(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function kk(e){return void 0===e||1===e}function Tk(e){let{scale:t,scaleX:n,scaleY:r}=e;return!kk(t)||!kk(n)||!kk(r)}function Ik(e){return Tk(e)||Ak(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Ak(e){return Ok(e.x)||Ok(e.y)}function Ok(e){return e&&"0%"!==e}function Pk(e,t,n){return n+t*(e-n)}function Mk(e,t,n,r,i){return void 0!==i&&(e=Pk(e,i,r)),Pk(e,n,r)+t}function Rk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=Mk(e.min,t,n,r,i),e.max=Mk(e.max,t,n,r,i)}function Dk(e,t){let{x:n,y:r}=t;Rk(e.x,n.translate,n.scale,n.originPoint),Rk(e.y,r.translate,r.scale,r.originPoint)}function Lk(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Fk(e,t){e.min=e.min+t,e.max=e.max+t}function Uk(e,t,n){let[r,i,s]=n;const a=void 0!==t[s]?t[s]:.5,o=jE(e.min,e.max,a);Rk(e,t[r],t[i],o,t.scale)}const Bk=["x","scaleX","originX"],Vk=["y","scaleY","originY"];function $k(e,t){Uk(e.x,t,Bk),Uk(e.y,t,Vk)}function zk(e,t){return Ck(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const qk=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Hk=new WeakMap;class Wk{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new ok(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(jS(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=AS(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ek((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Aj.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=mk(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&gS.update((()=>i(e,t)),!1,!0);const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Ek((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:qk(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&gS.update((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Kk(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?jE(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?jE(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&qN(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:s}=t;return{x:wk(e.x,r,s),y:wk(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nk;return!1===e?e=0:!0===e&&(e=Nk),{x:jk(e,"left","right"),y:jk(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ek((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!qN(e))return!1;const n=e.current;KS(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=zk(e,n),{scroll:i}=t;return i&&(Fk(r.x,i.offset.x),Fk(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:_k(e.x,t.x),y:_k(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Ck(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=Ek((a=>{if(!Kk(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,d)}));return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(IC(e,n,0,t))}stopAnimation(){Ek((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){Ek((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ek((t=>{const{drag:n}=this.getProps();if(!Kk(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-jE(n,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!qN(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ek((e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=mk(e),i=mk(t);return i>r?n=qE(t.min,t.max-r,e.min):r>i&&(n=qE(e.min,e.max-i,t.min)),xj(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ek((t=>{if(!Kk(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(jE(i,s,r[t]))}))}addListeners(){if(!this.visualElement.current)return;Hk.set(this.visualElement,this);const e=SS(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();qN(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const i=_S(window,"resize",(()=>this.scalePositionWithinConstraints())),s=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Ek((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=Nk,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function Kk(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Gk=e=>(t,n)=>{e&&gS.update((()=>e(t,n)))};const Yk={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Xk(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zk={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Oj.test(e))return e;e=parseFloat(e)}return`${Xk(e,t.target.x)}% ${Xk(e,t.target.y)}%`}},Qk={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,s=FE.parse(e);if(s.length>5)return i;const a=FE.createTransformer(e),o="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+o]/=l,s[1+o]/=c;const u=jE(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=u),"number"===typeof s[3+o]&&(s[3+o]/=u),a(s)}};class Jk extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var s;s=tT,Object.assign(cj,s),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Yk.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,s=n.projection;return s?(s.isPresent=i,r||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||gS.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eT(e){const[t,n]=function(){const e=(0,r.useContext)(FN);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=(0,r.useId)();return(0,r.useEffect)((()=>i(s)),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}(),i=(0,r.useContext)(tj);return r.createElement(Jk,{...e,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(nj),isPresent:t,safeToRemove:n})}const tT={borderRadius:{...Zk,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zk,borderTopRightRadius:Zk,borderBottomLeftRadius:Zk,borderBottomRightRadius:Zk,boxShadow:Qk},nT=["TopLeft","TopRight","BottomLeft","BottomRight"],rT=nT.length,iT=e=>"string"===typeof e?parseFloat(e):e,sT=e=>"number"===typeof e||Oj.test(e);function aT(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const oT=cT(0,.5,uE),lT=cT(.5,.95,fS);function cT(e,t,n){return r=>r<e?0:r>t?1:n(qE(e,t,r))}function uT(e,t){e.min=t.min,e.max=t.max}function dT(e,t){uT(e.x,t.x),uT(e.y,t.y)}function hT(e,t,n,r,i){return e=Pk(e-=t,1/n,r),void 0!==i&&(e=Pk(e,1/i,r)),e}function fT(e,t,n,r,i){let[s,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Aj.test(t)&&(t=parseFloat(t),t=jE(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=jE(s.min,s.max,r);e===s&&(o-=t),e.min=hT(e.min,t,n,o,i),e.max=hT(e.max,t,n,o,i)}(e,t[s],t[a],t[o],t.scale,r,i)}const mT=["x","scaleX","originX"],pT=["y","scaleY","originY"];function gT(e,t,n,r){fT(e.x,t,mT,n?n.x:void 0,r?r.x:void 0),fT(e.y,t,pT,n?n.y:void 0,r?r.y:void 0)}function yT(e){return 0===e.translate&&1===e.scale}function vT(e){return yT(e.x)&&yT(e.y)}function bT(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function xT(e){return mk(e.x)/mk(e.y)}class wT{constructor(){this.members=[]}add(e){PC(this.members,e),e.scheduleRender()}remove(e){if(MC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _T(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:e,rotateX:t,rotateY:i}=n;e&&(r+=`rotate(${e}deg) `),t&&(r+=`rotateX(${t}deg) `),i&&(r+=`rotateY(${i}deg) `)}const a=e.x.scale*t.x,o=e.y.scale*t.y;return 1===a&&1===o||(r+=`scale(${a}, ${o})`),r||"none"}const NT=(e,t)=>e.depth-t.depth;class jT{constructor(){this.children=[],this.isDirty=!1}add(e){PC(this.children,e),this.isDirty=!0}remove(e){MC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NT),this.isDirty=!1,this.children.forEach(e)}}const ST=["","X","Y","Z"],ET={visibility:"hidden"};let CT=0;const kT={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function TT(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=CT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,kT.totalNodes=kT.resolvedTargetDeltas=kT.recalculatedProjection=0,this.nodes.forEach(OT),this.nodes.forEach(UT),this.nodes.forEach(BT),this.nodes.forEach(PT),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(kT)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new jT)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new RC),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=i=>{let{timestamp:s}=i;const a=s-n;a>=t&&(yS(r),e(a-t))};return gS.read(r,!0),()=>yS(r)}(r,250),Yk.hasAnimatedSinceResize&&(Yk.hasAnimatedSinceResize=!1,this.nodes.forEach(FT))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||s)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||WT,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),c=!this.targetLayout||!bT(this.targetLayout,i)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...kC(s,"layout"),onPlay:o,onComplete:l};(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||FT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yS(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VT),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(RT);this.isUpdating||this.nodes.forEach(DT),this.isUpdating=!1,this.nodes.forEach(LT),this.nodes.forEach(IT),this.nodes.forEach(AT),this.clearAllSnapshots();const e=performance.now();vS.delta=xj(0,1e3/60,e-vS.timestamp),vS.timestamp=e,vS.isProcessing=!0,bS.update.process(vS),bS.preRender.process(vS),bS.render.process(vS),vS.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(MT),this.sharedNodes.forEach($T)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gS.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gS.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!vT(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||Ik(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),YT((r=n).x),YT(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Fk(t.x,n.offset.x),Fk(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};dT(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:s}=r;if(r!==this.root&&i&&s.layoutScroll){if(i.isRoot){dT(t,e);const{scroll:n}=this.root;n&&(Fk(t.x,-n.offset.x),Fk(t.y,-n.offset.y))}Fk(t.x,i.offset.x),Fk(t.y,i.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};dT(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&$k(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Ik(e.latestValues)&&$k(n,e.latestValues)}return Ik(this.latestValues)&&$k(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};dT(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Ik(e.latestValues))continue;Tk(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};dT(r,e.measurePageBox()),gT(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Ik(this.latestValues)&&gT(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vS.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=vS.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},xk(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),dT(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,vk(a.x,o.x,l.x),vk(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):dT(this.target,this.layout.layoutBox),Dk(this.target,this.targetDelta)):dT(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},xk(this.relativeTargetOrigin,this.target,e.target),dT(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}kT.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Tk(this.parent.latestValues)&&!Ak(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===vS.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;dT(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let s,a;t.x=t.y=1;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const i=s.instance;i&&i.style&&"contents"===i.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&$k(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Dk(e,a)),r&&Ik(s.latestValues)&&$k(e,s.latestValues))}t.x=Lk(t.x),t.y=Lk(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;yk(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=_T(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),kT.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(HT));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;zT(s.x,e.x,n),zT(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xk(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){qT(e.x,t.x,n.x,r),qT(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),d&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),dT(d,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=jE(0,void 0!==n.opacity?n.opacity:1,oT(r)),e.opacityExit=jE(void 0!==t.opacity?t.opacity:1,0,lT(r))):s&&(e.opacity=jE(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let a=0;a<rT;a++){const i=`border${nT[a]}Radius`;let s=aT(t,i),o=aT(n,i);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||sT(s)===sT(o)?(e[i]=Math.max(jE(iT(s),iT(o),r),0),(Aj.test(o)||Aj.test(s))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=jE(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yS(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gS.update((()=>{Yk.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=fj(e)?e:FC(e);return r.start(IC("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&XT(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=mk(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=mk(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}dT(t,n),$k(t,i),yk(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new wT);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let i=0;i<ST.length;i++){const t="rotate"+ST[i];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const i in r)e.setStaticValue(i,r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ET;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=uS(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=uS(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Ik(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const a=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=_T(this.projectionDeltaWithTransform,this.treeScale,a),i&&(r.transform=i(a,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:r.opacity=s===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in cj){if(void 0===a[c])continue;const{correct:e,applyTo:t}=cj[c],n="none"===r.transform?a[c]:e(a[c],s);if(t){const e=t.length;for(let i=0;i<e;i++)r[t[i]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=s===this?uS(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(RT),this.root.sharedNodes.clear()}}}function IT(e){e.updateLayout()}function AT(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?Ek((e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=mk(r);r.min=t[e].min,r.max=r.min+i})):XT(i,n.layoutBox,t)&&Ek((r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],a=mk(t[r]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)}));const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};yk(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?yk(o,e.applyTransform(r,!0),n.measuredBox):yk(o,t,n.layoutBox);const l=!vT(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const a={x:{min:0,max:0},y:{min:0,max:0}};xk(a,n.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};xk(o,t,s.layoutBox),bT(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function OT(e){kT.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function PT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function MT(e){e.clearSnapshot()}function RT(e){e.clearMeasurements()}function DT(e){e.isLayoutDirty=!1}function LT(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function FT(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function UT(e){e.resolveTargetDelta()}function BT(e){e.calcProjection()}function VT(e){e.resetRotation()}function $T(e){e.removeLeadSnapshot()}function zT(e,t,n){e.translate=jE(t.translate,0,n),e.scale=jE(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function qT(e,t,n,r){e.min=jE(t.min,n.min,r),e.max=jE(t.max,n.max,r)}function HT(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const WT={duration:.45,ease:[.4,0,.1,1]},KT=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),GT=KT("applewebkit/")&&!KT("chrome/")?Math.round:fS;function YT(e){e.min=GT(e.min),e.max=GT(e.max)}function XT(e,t,n){return"position"===e||"preserve-aspect"===e&&!pk(xT(t),xT(n),.2)}const ZT=TT({attachResizeListener:(e,t)=>_S(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),QT={current:void 0},JT=TT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!QT.current){const e=new ZT({});e.mount(window),e.setOptions({layoutScroll:!0}),QT.current=e}return QT.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),eI={pan:{Feature:class extends PS{constructor(){super(...arguments),this.removePointerDownListener=fS}onPointerDown(e){this.session=new ok(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Gk(e),onStart:Gk(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&gS.update((()=>r(e,t)))}}}mount(){this.removePointerDownListener=SS(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends PS{constructor(e){super(e),this.removeGroupControls=fS,this.removeListeners=fS,this.controls=new Wk(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fS}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:JT,MeasureLayout:eT}},tI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function nI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;KS(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,i]=function(e){const t=tI.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return OC(e)?parseFloat(e):e}return vj(i)?nI(i,t,n+1):i}const rI=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),iI=e=>rI.has(e),sI=e=>e===wj||e===Oj,aI=(e,t)=>parseFloat(e.split(", ")[t]),oI=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/);if(s)return aI(s[1],t);{const t=i.match(/^matrix\((.+)\)$/);return t?aI(t[1],e):0}},lI=new Set(["x","y","z"]),cI=uj.filter((e=>!lI.has(e)));const uI={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:oI(4,13),y:oI(5,14)};uI.translateX=uI.x,uI.translateY=uI.y;const dI=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t={...t},r={...r};const i=Object.keys(t).filter(iI);let s=[],a=!1;const o=[];if(i.forEach((i=>{const l=e.getValue(i);if(!e.hasValue(i))return;let c=n[i],u=VC(c);const d=t[i];let h;if(lS(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=VC(c);for(let n=t;n<e&&null!==d[n];n++)h?KS(VC(d[n])===h,"All keyframes must be of the same type"):(h=VC(d[n]),KS(h===u||sI(u)&&sI(h),"Keyframes must be of the same dimension as the current value"))}else h=VC(d);if(u!==h)if(sI(u)&&sI(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&h===Oj&&(t[i]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===d)?0===c?l.set(h.transform(c)):t[i]=u.transform(d):(a||(s=function(e){const t=[];return cI.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),a=!0),o.push(i),r[i]=void 0!==r[i]?r[i]:t[i],l.jump(d))})),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,i=((e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:a}=s,o={};"none"===a&&t.setStaticValue("display",e.display||"block"),n.forEach((e=>{o[e]=uI[e](r,s)})),t.render();const l=t.measureViewportBox();return n.forEach((n=>{const r=t.getValue(n);r&&r.jump(o[n]),e[n]=uI[n](l,s)})),e})(t,e,o);return s.length&&s.forEach((t=>{let[n,r]=t;e.getValue(n).set(r)})),e.render(),UN&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}};function hI(e,t,n,r){return(e=>Object.keys(e).some(iI))(t)?dI(e,t,n,r):{target:t,transitionEnd:r}}const fI=(e,t,n,r)=>{const i=function(e,t,n){let{...r}=t;const i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n={...n}),e.values.forEach((e=>{const t=e.get();if(!vj(t))return;const n=nI(t,i);n&&e.set(n)}));for(const s in r){const e=r[s];if(!vj(e))continue;const t=nI(e,i);t&&(r[s]=t,n||(n={}),void 0===n[s]&&(n[s]=e))}return{target:r,transitionEnd:n}}(e,t,r);return hI(e,t=i.target,n,r=i.transitionEnd)},mI={current:null},pI={current:!1};const gI=new WeakMap,yI=Object.keys(ej),vI=yI.length,bI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],xI=GN.length;class wI{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>gS.render(this.render,!1,!0);const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=n.initial?{...o}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=YN(n),this.isVariantNode=XN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const e=u[d];void 0!==o[d]&&fj(e)&&(e.set(o[d],!1),AC(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,gI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),pI.current||function(){if(pI.current=!0,UN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>mI.current=e.matches;e.addListener(t),t()}else mI.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||mI.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){gI.delete(this.current),this.projection&&this.projection.unmount(),yS(this.notifyUpdate),yS(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=dj.has(e),r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&gS.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{r(),i()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let i,s,{children:a,...o}=e;for(let l=0;l<vI;l++){const e=yI[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:a}=ej[e];r&&(i=r),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),a&&(s=a))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:s,layoutScroll:a,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||s&&qN(s),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:a,layoutRoot:l})}return s}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<bI.length;n++){const t=bI[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],a=n[i];if(fj(s))e.addValue(i,s),AC(r)&&r.add(i);else if(fj(a))e.addValue(i,FC(s,{owner:e})),AC(r)&&r.remove(i);else if(a!==s)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(s)}else{const t=e.getStaticValue(i);e.addValue(i,FC(void 0!==t?t:s,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<xI;t++){const n=GN[t],r=this.props[n];(HN(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=FC(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=aS(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||fj(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new RC),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class _I extends wI{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:i,...s}=e,{transformValues:a}=t,o=function(e,t,n){const r={};for(const i in e){const e=WC(i,t);if(void 0!==e)r[i]=e;else{const e=n.getValue(i);e&&(r[i]=e.get())}}return r}(s,r||{},this);if(a&&(i&&(i=a(i)),s&&(s=a(s)),o&&(o=a(o))),n){!function(e,t,n){var r,i;const s=Object.keys(t).filter((t=>!e.hasValue(t))),a=s.length;if(a)for(let o=0;o<a;o++){const a=s[o],l=t[a];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(i=null!==(r=n[a])&&void 0!==r?r:e.readValue(a))&&void 0!==i?i:t[a]),void 0!==c&&null!==c&&("string"===typeof c&&(OC(c)||EC(c))?c=parseFloat(c):!zC(c)&&FE.test(l)&&(c=SC(a,l)),e.addValue(a,FC(c,{owner:e})),void 0===n[a]&&(n[a]=c),null!==c&&e.setBaseTarget(a,c))}}(this,s,o);const e=fI(this,s,o,i);i=e.transitionEnd,s=e.target}return{transition:r,transitionEnd:i,...s}}}class NI extends _I{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(dj.has(t)){const e=jC(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(yj(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return zk(e,n)}build(e,t,n,r){Fj(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return iS(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fj(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}renderInstance(e,t,n,r){tS(e,t,n,r)}}class jI extends _I{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(dj.has(t)){const e=jC(t);return e&&e.default||0}return t=nS.has(t)?t:$N(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return sS(e,t)}build(e,t,n,r){Xj(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){rS(e,t,0,r)}mount(e){this.isSVGTag=Qj(e.tagName),super.mount(e)}}const SI=(e,t)=>lj(e)?new jI(t,{enableHardwareAcceleration:!1}):new NI(t,{enableHardwareAcceleration:!0}),EI={...sk,...zS,...eI,...{layout:{ProjectionNode:JT,MeasureLayout:eT}}},CI=aj(((e,t)=>function(e,t,n,r){let{forwardMotionProps:i=!1}=t;return{...lj(e)?xS:wS,preloadedFeatures:n,useRender:eS(i),createVisualElement:r,Component:e}}(e,t,EI,SI)));function kI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const TI=r.forwardRef(kI);function II(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const AI=r.forwardRef(II);function OI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const PI=r.forwardRef(OI);function MI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M15.75 1.5a6.75 6.75 0 0 0-6.651 7.906c.067.39-.032.717-.221.906l-6.5 6.499a3 3 0 0 0-.878 2.121v2.818c0 .414.336.75.75.75H6a.75.75 0 0 0 .75-.75v-1.5h1.5A.75.75 0 0 0 9 19.5V18h1.5a.75.75 0 0 0 .53-.22l2.658-2.658c.19-.189.517-.288.906-.22A6.75 6.75 0 1 0 15.75 1.5Zm0 3a.75.75 0 0 0 0 1.5A2.25 2.25 0 0 1 18 8.25a.75.75 0 0 0 1.5 0 3.75 3.75 0 0 0-3.75-3.75Z",clipRule:"evenodd"}))}const RI=r.forwardRef(MI);function DI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),r.createElement("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),r.createElement("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"}))}const LI=r.forwardRef(DI);function FI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),r.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const UI=r.forwardRef(FI);function BI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}const VI=r.forwardRef(BI);var $I=n(64),zI=n.n($I);const qI=()=>{const e=Array.from({length:20},(()=>({x:100*Math.random(),y:100*Math.random(),speedX:.3*(Math.random()-.5),speedY:.3*(Math.random()-.5)})));return(0,ON.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.map(((e,t)=>(0,ON.jsx)(CI.div,{className:"absolute w-1 h-1 bg-cyan-400 rounded-full",initial:{x:`${e.x}vw`,y:`${e.y}vh`,opacity:.6},animate:{x:`${e.x+50*e.speedX}vw`,y:`${e.y+50*e.speedY}vh`,opacity:[.6,.8,.6]},transition:{duration:15,repeat:1/0,repeatType:"reverse"}},t)))})},HI=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)({id:!1,password:!1}),{login:d,setUser:h}=MN(),f=te();let m="";return(0,ON.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono relative overflow-hidden flex items-center justify-center px-4 sm:px-6 lg:px-8",children:[(0,ON.jsx)(qI,{}),(0,ON.jsxs)("div",{className:"relative z-10 w-full max-w-md sm:max-w-lg",children:[(0,ON.jsxs)(CI.div,{className:"bg-gray-800 rounded-xl shadow-2xl p-6 sm:p-8 relative overflow-hidden border border-cyan-800",initial:{opacity:0,scale:.9,rotate:-5},animate:{opacity:1,scale:1,rotate:0},transition:{duration:.8,type:"spring",stiffness:80},children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"flex flex-col items-center mb-6 relative z-10",children:[(0,ON.jsx)(CI.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,ON.jsx)(TI,{className:"w-12 h-12 sm:w-16 sm:h-16 text-cyan-400 mb-4 animate-pulse"})}),(0,ON.jsx)(CI.h1,{className:"text-2xl sm:text-3xl font-bold text-cyan-100 mb-2",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:"Login"}),(0,ON.jsx)("p",{className:"text-cyan-300 text-center text-sm sm:text-base",children:"Access your SmartEcoLock account"})]}),(0,ON.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(!0);try{let t="",r=null;const i=lg(_p(IN,"users"),ug("idNumber","==",e)),s=await Sg(i);if(s.empty){const n=lg(_p(IN,"teachers"),ug("idNumber","==",e)),i=await Sg(n);if(i.empty){const n=lg(_p(IN,"students"),ug("idNumber","==",e)),i=await Sg(n);if(!i.empty){const e=i.docs[0];r={id:e.id,...e.data()},t=r.email,m="student"}}else{const e=i.docs[0];r={id:e.id,...e.data()},t=r.email,m="instructor"}}else{const e=s.docs[0];r={id:e.id,...e.data()},t=r.email,m="admin"}if(!r)throw new Error("No user found with this ID number");await ss(kN,t,n),localStorage.setItem("userRole",m),localStorage.setItem("userData",JSON.stringify(r)),"instructor"===m&&localStorage.setItem("teacherData",JSON.stringify({idNumber:r.idNumber,fullName:r.fullName,department:r.department,email:r.email})),zI().fire({icon:"success",title:"Login Successful",text:`Welcome back, ${r.fullName}!`,showConfirmButton:!1,timer:1500,background:"#F9FAFB",iconColor:"#22d3ee"});f({admin:"/admin/dashboard",instructor:"/instructor/dashboard",student:"/student/dashboard"}[m],{replace:!0})}catch(Zg){console.error("Login error:",Zg),zI().fire({icon:"error",title:"Login Failed",text:Zg instanceof Error?Zg.message:"Invalid credentials",confirmButtonColor:"#22d3ee",background:"#F9FAFB"})}finally{a(!1)}},className:"space-y-6 relative z-10",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.4,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"ID Number"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(AI,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onFocus:()=>u({...c,id:!0}),onBlur:()=>u({...c,id:!1}),className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Enter your ID number",required:!0}),e&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.5,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Password"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(RI,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:o?"text":"password",value:n,onChange:e=>i(e.target.value),onFocus:()=>u({...c,password:!0}),onBlur:()=>u({...c,password:!1}),className:"w-full pl-10 pr-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Enter your password",required:!0}),(0,ON.jsx)("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cyan-500 hover:text-cyan-300 transition-colors",children:o?(0,ON.jsx)(LI,{className:"w-5 h-5"}):(0,ON.jsx)(UI,{className:"w-5 h-5"})})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.6,type:"tween"},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-sm text-gray-400 space-y-2 sm:space-y-0",children:[(0,ON.jsxs)("label",{className:"flex items-center",children:[(0,ON.jsx)("input",{type:"checkbox",className:"rounded border-gray-700 bg-gray-800 text-cyan-500 focus:ring-cyan-500"}),(0,ON.jsx)("span",{className:"ml-2",children:"Remember me"})]}),(0,ON.jsx)(ke,{to:"/reset-password",className:"text-cyan-400 hover:text-cyan-300 transition-all duration-300",children:"Forgot password?"})]}),(0,ON.jsx)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,type:"spring",stiffness:100},children:(0,ON.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold p-3 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 shadow-lg hover:shadow-cyan-500/50 text-sm sm:text-base",children:s?(0,ON.jsx)("span",{className:"animate-spin",children:(0,ON.jsx)(VI,{className:"w-5 h-5"})}):(0,ON.jsxs)(ON.Fragment,{children:["Sign In",(0,ON.jsx)(TI,{className:"w-5 h-5"})]})})}),(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},className:"text-center mt-4",children:(0,ON.jsxs)("p",{className:"text-gray-400 text-sm sm:text-base",children:["Don't have an account?"," ",(0,ON.jsx)(ke,{to:"/rfid-registration",className:"text-cyan-400 hover:text-cyan-300 font-semibold hover:underline transition-all duration-300",children:"Sign up"})]})})]})]}),(0,ON.jsx)("footer",{className:"mt-6 sm:mt-8 text-center text-gray-400 text-xs sm:text-sm",children:(0,ON.jsx)("p",{children:"\xa9 2025 SmartEcoLock Tech System. All rights reserved."})})]})]})};function WI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const KI=r.forwardRef(WI);function GI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const YI=r.forwardRef(GI);function XI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const ZI=r.forwardRef(XI);function QI(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const JI=r.forwardRef(QI);function eA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const tA=r.forwardRef(eA);function nA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const rA=r.forwardRef(nA);function iA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const sA=r.forwardRef(iA);function aA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const oA=r.forwardRef(aA);function lA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const cA=r.forwardRef(lA),uA=e=>{let{currentTime:t=new Date,user:n,classStatus:i}=e;const{currentUser:s}=MN(),a=te(),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(n.fullName);(0,r.useEffect)((()=>{(async()=>{if(s&&s.uid&&!n.fullName)try{const e=lg(_p(IN,"teachers"),ug("uid","==",s.uid)),t=await Sg(e);if(t.empty)console.warn("No teacher found for UID:",s.uid),u("Unknown Instructor");else{const e=t.docs[0].data();u(e.fullName||"Unknown Instructor")}}catch(Zg){console.error("Error fetching teacher details:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to fetch teacher details.",confirmButtonColor:"#00b4d8",background:"#1e293b",customClass:{popup:"rounded-xl border border-cyan-800",title:"text-cyan-100",htmlContainer:"text-cyan-300",confirmButton:"bg-cyan-600 hover:bg-cyan-700"}})}})()}),[s,n.fullName]);return(0,ON.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white shadow-lg z-50 font-mono",children:(0,ON.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6",children:(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-3 sm:py-0 sm:h-16",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between w-full sm:w-auto",children:[(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("div",{className:"flex-shrink-0",children:(0,ON.jsx)(oA,{className:"h-6 w-6 sm:h-8 sm:w-8 text-cyan-400"})}),(0,ON.jsxs)("div",{className:"ml-2 sm:ml-4",children:[(0,ON.jsx)("h1",{className:"text-lg sm:text-xl font-semibold text-cyan-100",children:"Smart EcoLock"}),(0,ON.jsx)("p",{className:"text-xs sm:text-sm text-cyan-300",children:n.department})]})]}),(0,ON.jsx)("div",{className:"sm:hidden flex items-center",children:(0,ON.jsx)("button",{onClick:()=>l(!o),className:"flex items-center space-x-2 focus:outline-none hover:opacity-80 transition-opacity",children:(0,ON.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-700/50 flex items-center justify-center border border-cyan-800",children:(0,ON.jsx)(cA,{className:"h-5 w-5 text-cyan-400"})})})})]}),(0,ON.jsx)("div",{className:"flex-1 flex items-center justify-center px-2 sm:px-4 mt-2 sm:mt-0",children:(0,ON.jsx)(CI.div,{className:`\n                px-4 py-1.5 sm:px-6 sm:py-2 rounded-xl backdrop-blur-lg bg-gray-800/80 border border-cyan-800 shadow-xl w-full sm:w-auto text-center\n                ${"Class In Session"===i.status?"border-l-green-500":"Starting Soon"===i.status?"border-l-cyan-500":"Classes Ended"===i.status?"border-l-amber-500":"border-l-gray-500"}\n              `,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:(0,ON.jsxs)("div",{className:"flex items-center justify-center space-x-2 sm:space-x-3",children:["Class In Session"===i.status?(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("div",{className:"h-2 w-2 sm:h-2.5 sm:w-2.5 rounded-full bg-green-400 animate-pulse mr-1 sm:mr-2"}),(0,ON.jsx)("span",{className:"font-medium text-green-300 text-xs sm:text-sm",children:"Active"})]}):"Starting Soon"===i.status?(0,ON.jsx)(rA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-cyan-400"}):(0,ON.jsx)(ZI,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-400"}),(0,ON.jsxs)("div",{className:"flex flex-col",children:[(0,ON.jsx)("span",{className:"text-xs sm:text-sm font-medium text-cyan-100",children:i.status}),(0,ON.jsx)("span",{className:"text-[10px] sm:text-xs text-cyan-300 truncate max-w-[150px] sm:max-w-[200px]",children:i.details})]})]})})}),(0,ON.jsxs)("div",{className:"hidden sm:flex items-center space-x-4 sm:space-x-6 mt-2 sm:mt-0",children:[(0,ON.jsxs)("div",{className:"flex flex-col items-end",children:[(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,ON.jsx)("span",{className:"text-xs text-cyan-300",children:"Class Time"})]}),(0,ON.jsx)("div",{className:"relative",children:(0,ON.jsxs)("button",{onClick:()=>l(!o),className:"flex items-center space-x-3 focus:outline-none hover:opacity-80 transition-opacity",children:[(0,ON.jsxs)("div",{className:"flex flex-col items-end",children:[(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100 truncate max-w-[120px]",children:c}),(0,ON.jsx)("span",{className:"text-xs text-cyan-300",children:n.role.charAt(0).toUpperCase()+n.role.slice(1)})]}),(0,ON.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-700/50 flex items-center justify-center border border-cyan-800",children:(0,ON.jsx)(cA,{className:"h-6 w-6 text-cyan-400"})})]})})]}),o&&(0,ON.jsx)(CI.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-2 sm:right-4 top-[4.5rem] sm:top-14 mt-2 w-40 sm:w-48 rounded-xl shadow-xl py-1 bg-gray-800/80 backdrop-blur-lg border border-cyan-800 z-50",children:(0,ON.jsxs)("button",{onClick:async()=>{try{await ls(kN),a("/login"),zI().fire({icon:"success",title:"Logged Out Successfully",text:"You have been logged out of your account.",showConfirmButton:!1,timer:1500,background:"#1e293b",customClass:{popup:"rounded-xl border border-cyan-800",title:"text-cyan-100",htmlContainer:"text-cyan-300"}})}catch(Zg){console.error("Error logging out:",Zg),zI().fire({icon:"error",title:"Logout Failed",text:"There was an error logging out. Please try again.",confirmButtonColor:"#00b4d8",background:"#1e293b",customClass:{popup:"rounded-xl border border-cyan-800",title:"text-cyan-100",htmlContainer:"text-cyan-300",confirmButton:"bg-cyan-600 hover:bg-cyan-700"}})}},className:"flex items-center w-full px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm text-cyan-100 hover:bg-gray-700 transition-colors",children:[(0,ON.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})})})};function dA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),r.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const hA=r.forwardRef(dA);function fA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))}const mA=r.forwardRef(fA);function pA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const gA=r.forwardRef(pA);function yA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),r.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const vA=r.forwardRef(yA);var bA,xA,wA;!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(bA||(bA={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(xA||(xA={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(wA||(wA={}));const _A=["user","model","function","system"];var NA,jA,SA,EA,CA,kA,TA,IA;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(NA||(NA={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(jA||(jA={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(SA||(SA={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(EA||(EA={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"}(CA||(CA={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(kA||(kA={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(TA||(TA={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(IA||(IA={}));class AA extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class OA extends AA{constructor(e,t){super(e),this.response=t}}class PA extends AA{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class MA extends AA{}class RA extends AA{}var DA;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(DA||(DA={}));class LA{constructor(e,t,n,r,i){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=i}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let r=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function FA(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null===e||void 0===e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.23.0"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(S2){throw new MA(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${S2.message}`)}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new MA(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new MA(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function UA(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const{url:o,fetchOptions:l}=await async function(e,t,n,r,i,s){const a=new LA(e,t,n,r,s);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},BA(s)),{method:"POST",headers:await FA(a),body:i})}}(e,t,n,r,i,s);return async function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await r(e,t)}catch(S2){!function(e,t){let n=e;"AbortError"===n.name?(n=new RA(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof PA||e instanceof MA||(n=new AA(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack);throw n}(S2,e)}n.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(S2){}throw new PA(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}(n,e);return n}(o,l,a)}function BA(e){const t={};if(void 0!==(null===e||void 0===e?void 0:e.signal)||(null===e||void 0===e?void 0:e.timeout)>=0){const n=new AbortController;(null===e||void 0===e?void 0:e.timeout)>=0&&setTimeout((()=>n.abort()),e.timeout),(null===e||void 0===e?void 0:e.signal)&&e.signal.addEventListener("abort",(()=>{n.abort()})),t.signal=n.signal}return t}function VA(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),qA(e.candidates[0]))throw new OA(`${HA(e)}`,e);return function(e){var t,n,r,i;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const a of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)a.text&&s.push(a.text),a.executableCode&&s.push("\n```"+a.executableCode.language+"\n"+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&s.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}(e)}if(e.promptFeedback)throw new OA(`Text not available. ${HA(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qA(e.candidates[0]))throw new OA(`${HA(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),$A(e)[0]}if(e.promptFeedback)throw new OA(`Function call not available. ${HA(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qA(e.candidates[0]))throw new OA(`${HA(e)}`,e);return $A(e)}if(e.promptFeedback)throw new OA(`Function call not available. ${HA(e)}`,e)},e}function $A(e){var t,n,r,i;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const a of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)a.functionCall&&s.push(a.functionCall);return s.length>0?s:void 0}const zA=[CA.RECITATION,CA.SAFETY,CA.LANGUAGE];function qA(e){return!!e.finishReason&&zA.includes(e.finishReason)}function HA(e){var t,n,r;let i="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];qA(t)&&(i+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(i+=`: ${t.finishMessage}`))}}else i+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(i+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);return i}function WA(e){return this instanceof WA?(this.v=e,this):new WA(e)}function KA(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||o(e,t)}))})}function o(e,t){try{!function(e){e.value instanceof WA?Promise.resolve(e.value.v).then(l,c):u(s[0][2],e)}(i[e](t))}catch(S2){u(s[0][3],S2)}}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const GA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function YA(e){const t=function(e){const t=e.getReader(),n=new ReadableStream({start(e){let n="";return r();function r(){return t.read().then((t=>{let{value:i,done:s}=t;if(s)return n.trim()?void e.error(new AA("Failed to parse stream")):void e.close();n+=i;let a,o=n.match(GA);for(;o;){try{a=JSON.parse(o[1])}catch(S2){return void e.error(new AA(`Error parsing JSON response: "${o[1]}"`))}e.enqueue(a),n=n.substring(o[0].length),o=n.match(GA)}return r()})).catch((e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new RA("Request aborted when reading from the stream"):new AA("Error reading from the stream"),t}))}}});return n}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:ZA(n),response:XA(r)}}async function XA(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return VA(QA(t));t.push(r)}}function ZA(e){return KA(this,arguments,(function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield WA(t.read());if(n)break;yield yield WA(VA(e))}}))}function QA(e){const t=e[e.length-1],n={promptFeedback:null===t||void 0===t?void 0:t.promptFeedback};for(const r of e){if(r.candidates){let e=0;for(const t of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:e}),n.candidates[e].citationMetadata=t.citationMetadata,n.candidates[e].groundingMetadata=t.groundingMetadata,n.candidates[e].finishReason=t.finishReason,n.candidates[e].finishMessage=t.finishMessage,n.candidates[e].safetyRatings=t.safetyRatings,t.content&&t.content.parts){n.candidates[e].content||(n.candidates[e].content={role:t.content.role||"user",parts:[]});const r={};for(const i of t.content.parts)i.text&&(r.text=i.text),i.functionCall&&(r.functionCall=i.functionCall),i.executableCode&&(r.executableCode=i.executableCode),i.codeExecutionResult&&(r.codeExecutionResult=i.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[e].content.parts.push(r)}e++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function JA(e,t,n,r){return YA(await UA(t,DA.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function eO(e,t,n,r){const i=await UA(t,DA.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:VA(await i.json())}}function tO(e){if(null!=e)return"string"===typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function nO(e){let t=[];if("string"===typeof e)t=[{text:e}];else for(const n of e)"string"===typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of e)"functionResponse"in s?(n.parts.push(s),i=!0):(t.parts.push(s),r=!0);if(r&&i)throw new AA("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new AA("No content is provided for sending chat message.");if(r)return t;return n}(t)}function rO(e){let t;if(e.contents)t=e;else{t={contents:[nO(e)]}}return e.systemInstruction&&(t.systemInstruction=tO(e.systemInstruction)),t}const iO=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],sO={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function aO(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;if(void 0===n)return!1;if(void 0===n.parts||0===n.parts.length)return!1;for(const r of n.parts){if(void 0===r||0===Object.keys(r).length)return!1;if(void 0!==r.text&&""===r.text)return!1}return!0}const oO="SILENT_ERROR";class lO{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null===n||void 0===n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new AA(`First content should be with role 'user', got ${e}`);if(!_A.includes(e))throw new AA(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(_A)}`);if(!Array.isArray(r))throw new AA("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new AA("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of r)for(const e of iO)e in t&&(i[e]+=1);const s=sO[e];for(const t of iO)if(!s.includes(t)&&i[t]>0)throw new AA(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,s,a,o;await this._sendPromise;const l=nO(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(a=this.params)||void 0===a?void 0:a.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t);let d;return this._sendPromise=this._sendPromise.then((()=>eO(this._apiKey,this.model,c,u))).then((e=>{var t;if(aO(e.response)){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=HA(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}d=e})),await this._sendPromise,d}async sendMessageStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,s,a,o;await this._sendPromise;const l=nO(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(a=this.params)||void 0===a?void 0:a.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),d=JA(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then((()=>d)).catch((e=>{throw new Error(oO)})).then((e=>e.response)).then((e=>{if(aO(e)){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=HA(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}})).catch((e=>{e.message!==oO&&console.error(e)})),d}}class cO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=tO(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=rO(e),i=Object.assign(Object.assign({},this._requestOptions),t);return eO(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}async generateContentStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=rO(e),i=Object.assign(Object.assign({},this._requestOptions),t);return JA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}startChat(e){var t;return new lO(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e,t){var n;let r={model:null===t||void 0===t?void 0:t.model,generationConfig:null===t||void 0===t?void 0:t.generationConfig,safetySettings:null===t||void 0===t?void 0:t.safetySettings,tools:null===t||void 0===t?void 0:t.tools,toolConfig:null===t||void 0===t?void 0:t.toolConfig,systemInstruction:null===t||void 0===t?void 0:t.systemInstruction,cachedContent:null===(n=null===t||void 0===t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const i=null!=e.generateContentRequest;if(e.contents){if(i)throw new MA("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(i)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=nO(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await UA(t,DA.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async embedContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if("string"===typeof e||Array.isArray(e))return{content:nO(e)};return e}(e),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await UA(t,DA.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const i=n.requests.map((e=>Object.assign(Object.assign({},e),{model:t})));return(await UA(t,DA.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),r)).json()}(this.apiKey,this.model,e,n)}}class uO{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new AA("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new cO(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new MA("Cached content must contain a `name` field.");if(!e.model)throw new MA("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const s of r)if((null===t||void 0===t?void 0:t[s])&&e[s]&&(null===t||void 0===t?void 0:t[s])!==e[s]){if("model"===s){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new MA(`Different value for "${s}" specified in modelParams (${t[s]}) and cachedContent (${e[s]})`)}const i=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new cO(this.apiKey,i,n)}}const dO="from-teal-50 via-sky-50 to-emerald-50",hO=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(!1),o=(0,r.useRef)(null),{currentUser:l}=MN(),c=new uO("AIzaSyCnBauXgFmxyWWO5VHcGUNToGy7lulbN6E");(0,r.useEffect)((()=>{(()=>{var e;null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[e]);const u=()=>Math.random().toString(36).substr(2,9),d=async()=>{if(!n.trim())return;const e={id:u(),content:n,sender:"user",timestamp:new Date};t((t=>[...t,e])),i("");try{const e=await(async e=>{try{const t=c.getGenerativeModel({model:"gemini-1.5-flash"}),n=`You are a helpful AI assistant that can answer any questions accurately, including about Mark Lloyd Cuizon, Clarence Emmanuel Jamora, and Jean Ricka Rosalita - Creators of Smart EcoLock.\n\nThey are 4th-year BS Computer Engineering students from Cebu Institute of Technology - University (CIT-U). Their project, Smart EcoLock, addresses energy management, attendance control, and security for CIT-U's rooms and offices.\n\nSmart EcoLock utilizes an ESP32 microcontroller for efficient sensor handling and low power consumption, leveraging its dual-core architecture and built-in Wi-Fi capabilities. With occupancy recognition, it detects room usage through a combination of PZEM for power monitoring and weight sensors, automatically turning off lights and electronics in unoccupied rooms to reduce energy waste. LDR (Light-Dependent Resistor) sensors measure ambient light levels, adjusting classroom lighting dynamically to optimize energy use based on natural daylight availability.\n\nAttendance tracking is achieved through a multi-layered approach. Access control data from RFID (Radio-Frequency Identification) tags ensures only authorized individuals enter, logging entry times into a unified database. Additionally, weight sensors embedded in chairs provide precise occupancy detection by measuring the presence of individuals (e.g., detecting weights above a threshold like 20 kg to confirm a person is seated). This data cross-references RFID logs to validate attendance, reducing errors from manual tracking or proxy entries. The system uploads real-time updates to a Firebase Realtime Database, enabling administrators to monitor occupancy and attendance seamlessly.\n\nSecurity is enhanced via RFID authentication, restricting access to authorized personnel and students, while weight sensors add an extra layer of verification by confirming physical presence. The system features a React.js website with a Firebase backend, offering an intuitive interface for monitoring room status, controlling devices, and generating attendance reports.\n\nThis system boosts sustainability by minimizing energy consumption, improves management efficiency with automated tracking, and enhances security at CIT-U through integrated technology.\n\nProvide complete answers, ensuring clarity and professionalism. Always include full code implementations when relevant and internet sources for additional information, even if the question is unrelated to Smart EcoLock. Format responses to facilitate prompt chatbot replies. As an AI assistant helping ${(null===l||void 0===l?void 0:l.fullName)||"a user"} who is an ${(null===l||void 0===l?void 0:l.role)||"user"} at the institution, respond professionally and concisely to the following query: ${e}.`,r=await t.generateContent(n);return(await r.response).text()}catch(Zg){return console.error("Error generating response:",Zg),"Sorry, I encountered an error. Please try again."}})(n),r={id:u(),content:e,sender:"ai",timestamp:new Date};t((e=>[...e,r]))}catch(Zg){console.error("Gemini API Error:",Zg);const n={id:u(),content:"\ud83d\udea8 **Error:** I encountered an issue while processing your request. Please check your input or try again later.",sender:"ai",timestamp:new Date};t((e=>[...e,n]))}},h=()=>a(!s);return(0,ON.jsxs)("div",{className:"fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50",children:[(0,ON.jsx)("div",{children:s&&(0,ON.jsxs)("div",{className:"w-full max-w-[90vw] sm:w-80 md:w-96 h-[400px] sm:h-[500px] bg-white rounded-lg sm:rounded-2xl shadow-xl sm:shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,ON.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-600 text-white p-3 sm:p-4 flex justify-between items-center",children:[(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(mA,{className:"w-5 h-5 sm:w-6 sm:h-6"}),(0,ON.jsx)("h2",{className:"text-base sm:text-lg font-semibold",children:"Smart EcoLock Assistant"})]}),(0,ON.jsx)("button",{onClick:h,className:"hover:bg-indigo-700 rounded-full p-1 transition-colors",children:(0,ON.jsx)(gA,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,ON.jsxs)("div",{className:"flex-grow overflow-y-auto p-3 sm:p-4 space-y-3",children:[e.map((e=>(0,ON.jsx)("div",{className:"flex "+("user"===e.sender?"justify-end":"justify-start"),children:(0,ON.jsx)("div",{className:"max-w-[80%] px-3 py-2 rounded-lg sm:rounded-2xl text-xs sm:text-sm "+("user"===e.sender?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:e.content})},e.id))),(0,ON.jsx)("div",{ref:o})]}),(0,ON.jsxs)("div",{className:"p-3 sm:p-4 border-t border-gray-200 flex space-x-2",children:[(0,ON.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&d(),placeholder:"Ask me anything...",className:"flex-grow px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-xs sm:text-sm"}),(0,ON.jsx)("button",{onClick:d,className:"bg-indigo-600 text-white px-3 sm:px-4 py-1 sm:py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 text-xs sm:text-sm",children:"Send"})]})]})}),(0,ON.jsx)("button",{onClick:h,className:"bg-indigo-600 text-white p-3 sm:p-4 rounded-full shadow-xl sm:shadow-2xl hover:bg-indigo-700 transition-colors",children:(0,ON.jsx)(vA,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})},fO=()=>{const{currentUser:e}=MN(),t=te(),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(0),[o,l]=(0,r.useState)(0),[c,u]=(0,r.useState)(0),[d,h]=(0,r.useState)(0),[f,m]=(0,r.useState)([]),[p,g]=(0,r.useState)(new Date),[y,v]=(0,r.useState)(!0);(0,r.useEffect)((()=>{if(!e)return void t("/login");const r=setInterval((()=>g(new Date)),1e3),s=Ig(Np(IN,"teachers",e.uid),(t=>{if(t.exists()){const n=t.data(),r=n.assignedSubjects||[],s=[];r.forEach((t=>{t.sections&&Array.isArray(t.sections)&&t.sections.forEach((n=>{if(n.schedules&&Array.isArray(n.schedules)){const r=n.schedules.map(((r,i)=>({id:`${e.uid}_${t.name}_${n.code}_${r.day}_${i}`,day:r.day,subject:t.name,classes:[{time:`${r.startTime} - ${r.endTime}`,subject:t.name}],room:r.roomName})));s.push(...r)}}))})),i({id:e.uid,fullName:n.fullName||"Instructor",email:n.email||"",department:n.department||"N/A",schedules:s,subjects:r,assignedStudents:n.assignedStudents||[]})}else zI().fire("Error","Instructor data not found","error"),i(null);v(!1)}),(e=>{console.error("Error fetching instructor data:",e),zI().fire("Error","Failed to load instructor data","error"),v(!1)})),o=Ig(lg(_p(IN,"students"),ug("teacherId","==",e.uid)),(e=>{a(e.size)})),c=Ig(lg(_p(IN,"attendance"),ug("teacherId","==",e.uid)),(e=>{const t=e.docs.map((e=>e.data())),n=t.length,r=t.filter((e=>"present"===e.status)).length;l(n>0?r/n*100:0)})),d=()=>{const e=(new Date).toLocaleTimeString("en-US",{hour12:!1}),[t,r]=e.split(":").map(Number),i=60*t+r,s=(null===n||void 0===n?void 0:n.schedules.filter((e=>{const[t,n]=e.classes[0].time.split(" - "),[r,s]=t.split(":").map(Number),[a,o]=n.split(":").map(Number);return i>=60*r+s&&i<=60*a+o})).length)||0;u(s)},f=Gw(AN,"rooms");n_(f,(e=>{const t=e.val();if(t){const e=Object.keys(t).length,n=Object.values(t).filter((e=>e.occupancy)).length;h(e>0?n/e*100:0),m(Object.entries(t).filter((e=>{let[t,n]=e;return n.occupancy})).map((e=>{let[t,n]=e;return{roomId:t,occupancy:n.occupancy}})))}}));d();const p=setInterval(d,6e4);return()=>{clearInterval(r),clearInterval(p),s(),o(),c(),r_(f)}}),[e,t,null===n||void 0===n?void 0:n.schedules]);const b=(0,r.useMemo)((()=>{const e=p.toLocaleString("en-US",{weekday:"short"});return(null===n||void 0===n?void 0:n.schedules.filter((t=>t.day.toLowerCase().startsWith(e.toLowerCase()))).sort(((e,t)=>e.classes[0].time.localeCompare(t.classes[0].time))))||[]}),[null===n||void 0===n?void 0:n.schedules,p]),x=(0,r.useMemo)((()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e=>({day:e,schedules:(null===n||void 0===n?void 0:n.schedules.filter((t=>t.day.toLowerCase().startsWith(e.toLowerCase()))))||[]})))),[null===n||void 0===n?void 0:n.schedules]),w=(0,r.useMemo)((()=>((e,t,n)=>{const[r,i]=n.split(":").map(Number),s=60*r+i,a=e.filter((e=>e.day.toLowerCase().startsWith(t.toLowerCase())));if(!a.length)return{status:"No Classes Today",color:"bg-gray-100 text-gray-800",details:""};for(const o of a){const[e,t]=o.classes[0].time.split(" - "),[n,r]=e.split(":").map(Number),[i,a]=t.split(":").map(Number),l=60*n+r;if(s>=l&&s<=60*i+a)return{status:"In Class",color:"bg-green-100 text-green-800",details:`${o.subject} until ${t}`};if(s<l){const e=l-s,t=Math.floor(e/60),n=e%60;return{status:"Next Class",color:"bg-indigo-100 text-indigo-800",details:`${o.subject} in ${t>0?`${t}h ${n}m`:`${n}m`}`}}}return{status:"Classes Finished",color:"bg-gray-100 text-gray-800",details:"All done for today"}})((null===n||void 0===n?void 0:n.schedules)||[],p.toLocaleString("en-US",{weekday:"short"}),p.toLocaleTimeString("en-US",{hour12:!1}))),[null===n||void 0===n?void 0:n.schedules,p]);return y?(0,ON.jsx)("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-teal-50 to-emerald-50",children:(0,ON.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 border-t-4 border-indigo-500 rounded-full animate-spin"})}):n?(0,ON.jsxs)("div",{className:`min-h-screen bg-gradient-to-br ${dO}`,children:[(0,ON.jsx)(uA,{currentTime:p,classStatus:{status:w.status,color:w.color,details:w.details,fullName:n.fullName},user:{role:"instructor",fullName:n.fullName,department:n.department}}),(0,ON.jsxs)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 mt-16",children:[(0,ON.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[(0,ON.jsxs)("div",{className:"lg:col-span-2 space-y-6 sm:space-y-8",children:[(0,ON.jsxs)(CI.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white/95 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-xl sm:shadow-2xl p-6 sm:p-8 border border-gray-100/50",children:[(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:["Welcome, ",n.fullName.split(" ")[0],"!"]}),(0,ON.jsxs)("p",{className:"text-gray-600 mt-2 text-sm sm:text-lg",children:[n.department," | ",n.email]})]}),(0,ON.jsxs)("div",{className:`px-4 sm:px-6 py-2 sm:py-3 rounded-full ${w.color} font-semibold shadow-md transform transition-transform hover:scale-105 text-sm sm:text-base`,children:[(0,ON.jsx)("span",{children:w.status}),w.details&&(0,ON.jsx)("span",{className:"block text-xs sm:text-sm opacity-80",children:w.details})]})]}),(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 mt-6 sm:mt-8",children:[{title:"Total Students",value:s,icon:(0,ON.jsx)(KI,{className:"h-6 w-6 sm:h-8 sm:w-8 text-teal-500"}),color:"bg-teal-50"},{title:"Attendance Rate",value:`${o.toFixed(1)}%`,icon:(0,ON.jsx)(YI,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500"}),color:"bg-green-50"},{title:"Active Classes",value:c,icon:(0,ON.jsx)(ZI,{className:"h-6 w-6 sm:h-8 sm:w-8 text-indigo-500"}),color:"bg-indigo-50"},{title:"Room Usage",value:`${d.toFixed(1)}%`,icon:(0,ON.jsx)(JI,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-500"}),color:"bg-purple-50"}].map(((e,t)=>(0,ON.jsx)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t,duration:.5},className:`${e.color} rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-md sm:shadow-lg hover:shadow-xl transition-all duration-300`,children:(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:e.title}),(0,ON.jsx)("h3",{className:"text-lg sm:text-2xl font-bold text-gray-900 mt-1",children:e.value})]}),(0,ON.jsx)("div",{className:"p-2 sm:p-3 bg-white/50 rounded-full",children:e.icon})]})},e.title)))})]}),(0,ON.jsxs)(CI.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},className:"bg-white/95 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-xl sm:shadow-2xl p-6 sm:p-8 border border-gray-100/50",children:[(0,ON.jsxs)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center",children:[(0,ON.jsx)(tA,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mr-2"}),"Today's Schedule"]}),b.length>0?b.map(((e,t)=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t,duration:.4},className:"flex items-center p-3 sm:p-4 bg-gradient-to-r from-gray-50 to-white rounded-lg sm:rounded-xl mb-3 sm:mb-4 shadow-sm hover:shadow-md transition-all duration-300",children:[(0,ON.jsx)(ZI,{className:"h-6 w-6 sm:h-8 sm:w-8 text-indigo-600 mr-3 sm:mr-4"}),(0,ON.jsxs)("div",{className:"flex-1",children:[(0,ON.jsx)("p",{className:"font-semibold text-gray-900 text-base sm:text-lg",children:e.subject}),(0,ON.jsxs)("div",{className:"flex flex-wrap items-center text-xs sm:text-sm text-gray-600 mt-1 gap-2 sm:gap-4",children:[(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)(rA,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2"}),e.classes[0].time]}),e.room&&(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)(JI,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2"}),e.room]})]})]})]},e.id))):(0,ON.jsx)("p",{className:"text-gray-600 text-center py-4 text-sm sm:text-base",children:"No classes scheduled for today"})]}),(0,ON.jsxs)(CI.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"bg-white/95 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-xl sm:shadow-2xl p-6 sm:p-8 border border-gray-100/50",children:[(0,ON.jsxs)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center",children:[(0,ON.jsx)(tA,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mr-2"}),"Weekly Schedule"]}),(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:x.map((e=>{let{day:t,schedules:n}=e;return(0,ON.jsxs)(CI.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"p-4 sm:p-6 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg sm:rounded-2xl shadow-md hover:shadow-lg transition-all duration-300",children:[(0,ON.jsx)("p",{className:"font-semibold text-indigo-800 text-base sm:text-lg mb-3 sm:mb-4",children:t}),n.length>0?n.map((e=>(0,ON.jsxs)("div",{className:"mb-2 sm:mb-3",children:[(0,ON.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:e.subject}),(0,ON.jsxs)("p",{className:"text-xs text-gray-600 flex flex-wrap items-center mt-1 gap-2",children:[(0,ON.jsxs)("span",{className:"flex items-center",children:[(0,ON.jsx)(rA,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.classes[0].time]}),e.room&&(0,ON.jsxs)("span",{className:"flex items-center",children:[(0,ON.jsx)(JI,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.room]})]})]},e.id))):(0,ON.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 italic",children:"No classes"})]},t)}))})]})]}),(0,ON.jsx)("div",{className:"lg:col-span-1 space-y-6 sm:space-y-8",children:(0,ON.jsxs)(CI.section,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4,duration:.5},className:"bg-white/95 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-xl sm:shadow-2xl p-6 sm:p-8 border border-gray-100/50",children:[(0,ON.jsxs)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center",children:[(0,ON.jsx)(hA,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mr-2"}),"Quick Actions"]}),(0,ON.jsxs)(ke,{to:"/instructor/take-attendance",className:"w-full flex items-center justify-center p-3 sm:p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg sm:rounded-2xl shadow-md sm:shadow-lg hover:shadow-xl hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 text-sm sm:text-base",children:[(0,ON.jsx)(sA,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 sm:mr-3"}),"Take Attendance"]})]})})]}),(0,ON.jsx)(hO,{})]})]}):(0,ON.jsx)("div",{className:"text-center p-6 sm:p-8 text-gray-700 text-base sm:text-lg",children:"No instructor data available"})};function mO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),r.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const pO=r.forwardRef(mO),gO=()=>{const e=Array.from({length:30},(()=>({x:100*Math.random(),y:100*Math.random(),speedX:.3*(Math.random()-.5),speedY:.3*(Math.random()-.5)})));return(0,ON.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.map(((e,t)=>(0,ON.jsx)(CI.div,{className:"absolute w-1 h-1 bg-cyan-400 rounded-full",initial:{x:`${e.x}vw`,y:`${e.y}vh`,opacity:.6},animate:{x:`${e.x+50*e.speedX}vw`,y:`${e.y+50*e.speedY}vh`,opacity:[.6,.8,.6]},transition:{duration:15,repeat:1/0,repeatType:"reverse"}},t)))})},yO=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1),s=te();return(0,ON.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono relative overflow-hidden flex items-center justify-center",children:[(0,ON.jsx)(gO,{}),(0,ON.jsxs)(CI.div,{className:"max-w-lg w-full mx-auto bg-gray-800 rounded-xl shadow-2xl p-6 relative overflow-hidden border border-cyan-800",initial:{opacity:0,scale:.9,rotate:-5},animate:{opacity:1,scale:1,rotate:0},transition:{duration:.8,type:"spring",stiffness:80},children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"flex flex-col items-center mb-4 relative z-10",children:[(0,ON.jsx)(CI.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,ON.jsx)(TI,{className:"w-16 h-16 text-cyan-400 mb-2 animate-pulse"})}),(0,ON.jsx)(CI.h1,{className:"text-3xl font-bold text-cyan-100 mb-1",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:"Reset Password"}),(0,ON.jsx)("p",{className:"text-cyan-300 text-center text-sm",children:"Enter your email to reset your password"})]}),(0,ON.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0);try{await async function(e,t,n){const r=yi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ns(r,i,n),await ji(r,i,"getOobCode",Oi)}(kN,e),zI().fire({icon:"success",title:"Email Sent",text:"Check your inbox for a password reset link.",showConfirmButton:!1,timer:1500,background:"#F9FAFB",iconColor:"#22d3ee"}),s("/login")}catch(Zg){console.error("Error sending password reset email:",Zg),zI().fire({icon:"error",title:"Error",text:Zg instanceof Error?Zg.message:"Failed to send reset email",confirmButtonColor:"#22d3ee",background:"#F9FAFB"})}finally{i(!1)}},className:"space-y-4 relative z-10",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.4,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Email"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(pO,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400",placeholder:"Enter your email",required:!0}),e&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsx)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,type:"spring",stiffness:100},children:(0,ON.jsx)("button",{type:"submit",disabled:n,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold p-3 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 shadow-lg hover:shadow-cyan-500/50",children:n?(0,ON.jsx)("span",{className:"animate-spin",children:(0,ON.jsx)(VI,{className:"w-5 h-5"})}):(0,ON.jsxs)(ON.Fragment,{children:["Reset Password",(0,ON.jsx)(PI,{className:"w-5 h-5"})]})})}),(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"text-center mt-4",children:(0,ON.jsxs)("p",{className:"text-gray-400 text-sm",children:["Remembered your password?"," ",(0,ON.jsx)(ke,{to:"/login",className:"text-cyan-400 hover:text-cyan-300 font-semibold hover:underline transition-all duration-300",children:"Sign in"})]})})]})]})]})};function vO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"}))}const bO=r.forwardRef(vO);function xO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),r.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const wO=r.forwardRef(xO);function _O(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M12 11.993a.75.75 0 0 0-.75.75v.006c0 .414.336.75.75.75h.006a.75.75 0 0 0 .75-.75v-.006a.75.75 0 0 0-.75-.75H12ZM12 16.494a.75.75 0 0 0-.75.75v.005c0 .414.335.75.75.75h.005a.75.75 0 0 0 .75-.75v-.005a.75.75 0 0 0-.75-.75H12ZM8.999 17.244a.75.75 0 0 1 .75-.75h.006a.75.75 0 0 1 .75.75v.006a.75.75 0 0 1-.75.75h-.006a.75.75 0 0 1-.75-.75v-.006ZM7.499 16.494a.75.75 0 0 0-.75.75v.005c0 .414.336.75.75.75h.005a.75.75 0 0 0 .75-.75v-.005a.75.75 0 0 0-.75-.75H7.5ZM13.499 14.997a.75.75 0 0 1 .75-.75h.006a.75.75 0 0 1 .75.75v.005a.75.75 0 0 1-.75.75h-.006a.75.75 0 0 1-.75-.75v-.005ZM14.25 16.494a.75.75 0 0 0-.75.75v.006c0 .414.335.75.75.75h.005a.75.75 0 0 0 .75-.75v-.006a.75.75 0 0 0-.75-.75h-.005ZM15.75 14.995a.75.75 0 0 1 .75-.75h.005a.75.75 0 0 1 .75.75v.006a.75.75 0 0 1-.75.75H16.5a.75.75 0 0 1-.75-.75v-.006ZM13.498 12.743a.75.75 0 0 1 .75-.75h2.25a.75.75 0 1 1 0 1.5h-2.25a.75.75 0 0 1-.75-.75ZM6.748 14.993a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Z"}),r.createElement("path",{fillRule:"evenodd",d:"M18 2.993a.75.75 0 0 0-1.5 0v1.5h-9V2.994a.75.75 0 1 0-1.5 0v1.497h-.752a3 3 0 0 0-3 3v11.252a3 3 0 0 0 3 3h13.5a3 3 0 0 0 3-3V7.492a3 3 0 0 0-3-3H18V2.993ZM3.748 18.743v-7.5a1.5 1.5 0 0 1 1.5-1.5h13.5a1.5 1.5 0 0 1 1.5 1.5v7.5a1.5 1.5 0 0 1-1.5 1.5h-13.5a1.5 1.5 0 0 1-1.5-1.5Z",clipRule:"evenodd"}))}const NO=r.forwardRef(_O);function jO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const SO=r.forwardRef(jO);function EO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M5.223 2.25c-.497 0-.974.198-1.325.55l-1.3 1.298A3.75 3.75 0 0 0 7.5 9.75c.627.47 1.406.75 2.25.75.844 0 1.624-.28 2.25-.75.626.47 1.406.75 2.25.75.844 0 1.623-.28 2.25-.75a3.75 3.75 0 0 0 4.902-5.652l-1.3-1.299a1.875 1.875 0 0 0-1.325-.549H5.223Z"}),r.createElement("path",{fillRule:"evenodd",d:"M3 20.25v-8.755c1.42.674 3.08.673 4.5 0A5.234 5.234 0 0 0 9.75 12c.804 0 1.568-.182 2.25-.506a5.234 5.234 0 0 0 2.25.506c.804 0 1.567-.182 2.25-.506 1.42.674 3.08.675 4.5.001v8.755h.75a.75.75 0 0 1 0 1.5H2.25a.75.75 0 0 1 0-1.5H3Zm3-6a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75v-3Zm8.25-.75a.75.75 0 0 0-.75.75v5.25c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75v-5.25a.75.75 0 0 0-.75-.75h-3Z",clipRule:"evenodd"}))}const CO=r.forwardRef(EO);function kO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5h-.75V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm-.75 3.75A.75.75 0 0 1 9 9h1.5a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM9 12a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm3.75-5.25A.75.75 0 0 1 13.5 6H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM13.5 9a.75.75 0 0 0 0 1.5H15A.75.75 0 0 0 15 9h-1.5Zm-.75 3.75a.75.75 0 0 1 .75-.75H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM9 19.5v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 9 19.5Z",clipRule:"evenodd"}))}const TO=r.forwardRef(kO);function IO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm4.5 7.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0v-2.25a.75.75 0 0 1 .75-.75Zm3.75-1.5a.75.75 0 0 0-1.5 0v4.5a.75.75 0 0 0 1.5 0V12Zm2.25-3a.75.75 0 0 1 .75.75v6.75a.75.75 0 0 1-1.5 0V9.75A.75.75 0 0 1 13.5 9Zm3.75-1.5a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Z",clipRule:"evenodd"}))}const AO=r.forwardRef(IO);function OO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),r.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const PO=r.forwardRef(OO);function MO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}const RO=r.forwardRef(MO);function DO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),r.createElement("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),r.createElement("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"}))}const LO=r.forwardRef(DO);function FO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}),r.createElement("path",{fillRule:"evenodd",d:"M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))}const UO=r.forwardRef(FO);function BO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M10.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L12.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z",clipRule:"evenodd"}),r.createElement("path",{fillRule:"evenodd",d:"M4.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L6.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const VO=r.forwardRef(BO);function $O(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm5.03 4.72a.75.75 0 0 1 0 1.06l-1.72 1.72h10.94a.75.75 0 0 1 0 1.5H10.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const zO=r.forwardRef($O),qO=()=>{const[e,t]=(0,r.useState)(!1),n=J(),{logout:i}=MN(),s=[{name:"Dashboard",icon:bO,path:"/admin/dashboard"},{name:"Users",icon:wO,path:"/admin/users"},{name:"Schedules",icon:NO,path:"/admin/schedules"},{name:"Subjects",icon:SO,path:"/admin/subjects-management"},{name:"Sections",icon:CO,path:"/admin/sections"},{name:"Rooms",icon:TO,path:"/admin/rooms"},{name:"Insights",icon:AO,path:"/admin/insights"},{name:"Energy Usage",icon:PO,path:"/admin/energyusage"},{name:"Settings",icon:RO,path:"/admin/settings"}];return(0,ON.jsx)(CI.div,{initial:{width:e?80:256},animate:{width:e?80:256},transition:{duration:.3},className:"fixed inset-y-0 left-0 bg-gradient-to-b from-gray-900 to-blue-900 text-white font-mono border-r border-cyan-800 shadow-xl z-50",children:(0,ON.jsxs)("div",{className:"flex flex-col h-full relative overflow-hidden",children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 border-b border-cyan-800 relative z-10",children:[!e&&(0,ON.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ON.jsx)(LO,{className:"w-8 h-8 text-cyan-400"}),(0,ON.jsx)("span",{className:"text-xl font-bold text-cyan-100",children:"Admin"})]}),e&&(0,ON.jsx)(LO,{className:"w-8 h-8 text-cyan-400 mx-auto"}),(0,ON.jsx)(CI.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-gray-700 transition-colors",children:e?(0,ON.jsx)(UO,{className:"w-5 h-5 text-cyan-400"}):(0,ON.jsx)(VO,{className:"w-5 h-5 text-cyan-400"})})]}),(0,ON.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto relative z-10",children:s.map((t=>{const r=n.pathname===t.path;return(0,ON.jsxs)(ke,{to:t.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(r?"bg-cyan-800/50 text-cyan-100":"text-cyan-300 hover:bg-gray-700/50"),title:e?t.name:"",children:[(0,ON.jsx)(t.icon,{className:"w-5 h-5 flex-shrink-0"}),!e&&(0,ON.jsx)("span",{className:"text-sm font-medium truncate",children:t.name})]},t.name)}))}),(0,ON.jsx)("div",{className:"p-4 border-t border-cyan-800 relative z-10",children:(0,ON.jsxs)(CI.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-400 hover:bg-red-700/50 rounded-lg transition-colors "+(e?"justify-center":"w-full"),title:e?"Logout":"",children:[(0,ON.jsx)(zO,{className:"w-5 h-5"}),!e&&(0,ON.jsx)("span",{children:"Logout"})]})})]})})};function HO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const WO=r.forwardRef(HO);function KO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const GO=r.forwardRef(KO);function YO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M15 3.75H9v16.5h6V3.75ZM16.5 20.25h3.375c1.035 0 1.875-.84 1.875-1.875V5.625c0-1.036-.84-1.875-1.875-1.875H16.5v16.5ZM4.125 3.75H7.5v16.5H4.125a1.875 1.875 0 0 1-1.875-1.875V5.625c0-1.036.84-1.875 1.875-1.875Z"}))}const XO=r.forwardRef(YO);function ZO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),r.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const QO=r.forwardRef(ZO),JO=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=_p(IN,"teachers"),n=(await Sg(e)).docs.map((e=>{const t=e.data(),n=(t.assignedSubjects||[]).map((e=>{const n=(e.sections||[]).flatMap((n=>(n.schedules||[]).map((r=>({day:r.day||"",startTime:r.startTime||"",endTime:r.endTime||"",section:n.name||n.code||"",room:r.roomName||"",subject:e.name||"",teacherName:t.fullName||t.name||"Unknown Teacher"})))));return{id:e.id||"",name:e.name||"",department:e.department||"Unassigned",status:e.status||"active",schedules:n}})),r=n.flatMap((e=>e.schedules));return{id:e.id,name:t.fullName||t.name||"Unknown Teacher",fullName:t.fullName||t.name||"Unknown Teacher",email:t.email||"",department:t.department||"Unassigned",role:"instructor",uid:t.uid||e.id,subjects:n,schedules:r}}));t(n),n.length>0&&i(n[0])}catch(Zg){console.error("Error fetching teachers data:",Zg)}})()}),[]);return(0,ON.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:"flex-1 transition-all duration-300 "+(s?"ml-20":"ml-64"),children:(0,ON.jsx)("div",{className:"flex-1 overflow-y-auto p-8",children:(0,ON.jsxs)("div",{className:"space-y-8",children:[(0,ON.jsx)(CI.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"text-center mb-8",children:(0,ON.jsx)("h1",{className:"text-4xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 via-indigo-500 to-purple-600",children:"Admin Dashboard"})}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},className:"rounded-2xl p-6 bg-white border border-gray-200 shadow-lg",children:[(0,ON.jsxs)("h2",{className:"text-2xl font-semibold mb-6 flex items-center justify-center",children:[(0,ON.jsx)(wO,{className:"w-8 h-8 mr-3 text-indigo-600"}),"Teachers"]}),(0,ON.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:e.map((e=>(0,ON.jsx)(CI.div,{whileHover:{scale:1.03},className:"p-4 rounded-lg cursor-pointer bg-gray-100 hover:bg-gray-200 border border-gray-200",onClick:()=>(e=>{i(e)})(e),children:(0,ON.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ON.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold",children:e.name.charAt(0)}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h4",{className:"font-semibold",children:e.name}),(0,ON.jsx)("p",{className:"text-sm text-gray-600",children:e.department})]})]})},e.id)))})]}),(0,ON.jsx)(CI.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"rounded-2xl p-6 bg-white border border-gray-200 shadow-lg min-h-[600px]",children:n?(0,ON.jsxs)("div",{className:"space-y-6",children:[(0,ON.jsxs)("div",{className:"flex flex-col items-center text-center border-b pb-6",children:[(0,ON.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-4xl mb-4",children:n.name.charAt(0)}),(0,ON.jsx)("h2",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 via-indigo-500 to-purple-600",children:n.name}),(0,ON.jsx)("p",{className:"text-sm mt-2 text-gray-600",children:n.department})]}),(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,ON.jsx)(SO,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Assigned Subjects"]}),n.subjects.length>0?(0,ON.jsx)("div",{className:"space-y-2",children:n.subjects.map(((e,t)=>(0,ON.jsxs)("div",{className:"p-3 bg-gray-100 rounded-lg",children:[(0,ON.jsx)("p",{className:"font-semibold",children:e.name}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["Department: ",e.department]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ",e.status]})]},t)))}):(0,ON.jsx)("p",{className:"text-gray-500",children:"No subjects assigned"})]}),(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,ON.jsx)(WO,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Schedules"]}),n.schedules.length>0?(0,ON.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.schedules.map(((e,t)=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md p-4",children:[(0,ON.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(GO,{className:"w-5 h-5 text-indigo-500"}),(0,ON.jsx)("span",{className:"font-semibold",children:e.day})]})}),(0,ON.jsxs)("div",{className:"space-y-2",children:[(0,ON.jsxs)("div",{className:"flex justify-between",children:[(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(WO,{className:"w-4 h-4 text-gray-500"}),(0,ON.jsxs)("span",{className:"text-sm",children:["Start: ",e.startTime]})]}),(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(WO,{className:"w-4 h-4 text-gray-500"}),(0,ON.jsxs)("span",{className:"text-sm",children:["End: ",e.endTime]})]})]}),e.section&&(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(XO,{className:"w-4 h-4 text-gray-500"}),(0,ON.jsxs)("span",{className:"text-sm",children:["Section: ",e.section]})]}),e.room&&(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(QO,{className:"w-4 h-4 text-gray-500"}),(0,ON.jsxs)("span",{className:"text-sm",children:["Room: ",e.room]})]}),e.subject&&(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(SO,{className:"w-4 h-4 text-gray-500"}),(0,ON.jsxs)("span",{className:"text-sm",children:["Subject: ",e.subject]})]})]})]},t)))}):(0,ON.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,ON.jsx)("p",{children:"No schedules found"})})]})]}):(0,ON.jsx)("div",{className:"flex items-center justify-center h-full text-center",children:(0,ON.jsx)("p",{className:"text-gray-500 italic",children:"Select a teacher to view details"})})})]})]})})})]})},eP=e=>{let{children:t,roles:n}=e;const{currentUser:r}=MN();if(!r)return(0,ON.jsx)(ge,{to:"/login",replace:!0});if(n&&!n.includes(r.role)){const e={admin:"/admin/dashboard",instructor:"/instructor/dashboard",student:"/students/dashboard"};return(0,ON.jsx)(ge,{to:e[r.role]||"/login",replace:!0})}return t};function tP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z",clipRule:"evenodd"}))}const nP=r.forwardRef(tP);function rP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3.75 4.5a.75.75 0 0 1 .75-.75h.75c8.284 0 15 6.716 15 15v.75a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-.75C18 11.708 12.292 6 5.25 6H4.5a.75.75 0 0 1-.75-.75V4.5Zm0 6.75a.75.75 0 0 1 .75-.75h.75a8.25 8.25 0 0 1 8.25 8.25v.75a.75.75 0 0 1-.75.75H12a.75.75 0 0 1-.75-.75v-.75a6 6 0 0 0-6-6H4.5a.75.75 0 0 1-.75-.75v-.75Zm0 7.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z",clipRule:"evenodd"}))}const iP=r.forwardRef(rP),sP=()=>{const e=Array.from({length:30},(()=>({x:100*Math.random(),y:100*Math.random(),speedX:.3*(Math.random()-.5),speedY:.3*(Math.random()-.5)})));return(0,ON.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.map(((e,t)=>(0,ON.jsx)(CI.div,{className:"absolute w-1 h-1 bg-cyan-400 rounded-full",initial:{x:`${e.x}vw`,y:`${e.y}vh`,opacity:.6},animate:{x:`${e.x+50*e.speedX}vw`,y:`${e.y+50*e.speedY}vh`,opacity:[.6,.8,.6]},transition:{duration:15,repeat:1/0,repeatType:"reverse"}},t)))})},aP=()=>{const[e,t]=(0,r.useState)({fullName:"",idNumber:"",email:"",password:"",confirmPassword:"",rfidUid:""}),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)([]),o=te();(0,r.useEffect)((()=>{const e=Gw(AN,"/Unregistered"),t=e=>{const t=e.val();if(t)if("object"===typeof t&&null!==t){const e=Object.entries(t).map((e=>{let[t,n]=e;return"string"===typeof n?n:t}));a(e)}else a([]);else a([])};return n_(e,t),()=>{r_(e,"value",t)}}),[]);const l=(e,n)=>{t((t=>({...t,[e]:n})))};return(0,ON.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono relative overflow-hidden",children:[(0,ON.jsx)(sP,{}),(0,ON.jsx)("div",{className:"flex-1 p-6 md:p-10 relative z-10",children:(0,ON.jsxs)(CI.div,{className:"max-w-lg mx-auto bg-gray-800 rounded-xl shadow-2xl p-8 relative overflow-hidden border border-cyan-800",initial:{opacity:0,scale:.9,rotate:-5},animate:{opacity:1,scale:1,rotate:0},transition:{duration:.8,type:"spring",stiffness:80},children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"flex flex-col items-center mb-6 relative z-10",children:[(0,ON.jsx)(CI.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,ON.jsx)(TI,{className:"w-16 h-16 text-cyan-400 mb-4 animate-pulse"})}),(0,ON.jsx)(CI.h1,{className:"text-3xl font-bold text-cyan-100 mb-2",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:"Admin Registration"}),(0,ON.jsx)("p",{className:"text-cyan-300 text-center",children:"Secure your access to SmartEcoLock"})]}),(0,ON.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0);try{if(e.password!==e.confirmPassword)throw new Error("Passwords do not match");if(!e.rfidUid&&s.length>0)throw new Error("Please select an RFID UID");const t=await is(kN,e.email,e.password);if(await Eg(Np(IN,"users",t.user.uid),{uid:t.user.uid,fullName:e.fullName,idNumber:e.idNumber,email:e.email,role:"admin",rfidUid:e.rfidUid,createdAt:(new Date).toISOString()}),e.rfidUid){const t=Gw(AN,`/Unregistered/${e.rfidUid}`);await Xw(t,null)}zI().fire({icon:"success",title:"Admin Registration Successful!",text:"Welcome to SmartEcoLock System",showConfirmButton:!1,timer:2e3,background:"#1e293b",iconColor:"#22d3ee"}),o("/login")}catch(Zg){console.error("Admin Registration error:",Zg),zI().fire({icon:"error",title:"Admin Registration Failed",text:Zg instanceof Error?Zg.message:"An error occurred",confirmButtonColor:"#22d3ee",background:"#1e293b"})}finally{i(!1)}},className:"space-y-6 relative z-10",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.4,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Full Name"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(AI,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:"text",className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400",value:e.fullName,onChange:e=>l("fullName",e.target.value),required:!0,placeholder:"Enter your full name"}),e.fullName&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.5,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"ID Number"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(nP,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:"text",className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400",value:e.idNumber,onChange:e=>l("idNumber",e.target.value),required:!0,placeholder:"Enter your ID number"}),e.idNumber&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.6,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Email"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(pO,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:"email",className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400",value:e.email,onChange:e=>l("email",e.target.value),required:!0,placeholder:"Enter your email"}),e.email.includes("@")&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.7,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"RFID UID"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(iP,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsxs)("select",{className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white",value:e.rfidUid,onChange:e=>l("rfidUid",e.target.value),required:s.length>0,children:[(0,ON.jsx)("option",{value:"",className:"text-gray-500",children:"Select RFID UID"}),s.map(((e,t)=>(0,ON.jsx)("option",{value:e,className:"text-white",children:e},t)))]}),e.rfidUid&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Password"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(RI,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:"password",className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400",value:e.password,onChange:e=>l("password",e.target.value),required:!0,placeholder:"Enter your password"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.9,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Confirm Password"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(RI,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:"password",className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400",value:e.confirmPassword,onChange:e=>l("confirmPassword",e.target.value),required:!0,placeholder:"Confirm your password"}),e.confirmPassword===e.password&&e.confirmPassword&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsx)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,type:"spring",stiffness:100},children:(0,ON.jsxs)("button",{type:"submit",disabled:n,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold p-3 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 shadow-lg hover:shadow-cyan-500/50",children:[n?(0,ON.jsx)("span",{className:"animate-spin",children:(0,ON.jsx)(TI,{className:"w-5 h-5"})}):(0,ON.jsx)(TI,{className:"w-5 h-5"}),"Register as Admin"]})}),(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1,duration:.5},className:"text-center mt-4",children:(0,ON.jsxs)("p",{className:"text-gray-400",children:["Already have an account?"," ",(0,ON.jsx)(ke,{to:"/login",className:"text-cyan-400 hover:text-cyan-300 font-semibold hover:underline transition-all duration-300",children:"Login Here"})]})})]})]})})]})};function oP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const lP=r.forwardRef(oP);function cP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const uP=r.forwardRef(cP);function dP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const hP=r.forwardRef(dP);function fP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const mP=r.forwardRef(fP),pP=()=>{const e=window.innerWidth<640?5:10,t=Array.from({length:e},(()=>({x:100*Math.random(),y:100*Math.random(),speedX:.2*(Math.random()-.5),speedY:.2*(Math.random()-.5)})));return(0,ON.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map(((e,t)=>(0,ON.jsx)(CI.div,{className:"absolute w-1 h-1 sm:w-1.5 sm:h-1.5 bg-cyan-400 rounded-full",initial:{x:`${e.x}vw`,y:`${e.y}vh`,opacity:.6},animate:{x:`${e.x+50*e.speedX}vw`,y:`${e.y+50*e.speedY}vh`,opacity:[.6,.8,.6]},transition:{duration:window.innerWidth<640?10:15,repeat:1/0,repeatType:"reverse"}},t)))})},gP=e=>{let{student:t}=e;const{logout:n}=MN(),i=te(),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1);return(0,ON.jsxs)("nav",{className:"fixed top-0 left-0 right-0 bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white shadow-lg z-50 font-mono overflow-visible",children:[(0,ON.jsx)(pP,{}),(0,ON.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:[(0,ON.jsxs)("div",{className:"flex justify-between h-14 sm:h-16",children:[(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)(oA,{className:"h-6 w-6 sm:h-8 sm:w-8 text-cyan-400"}),(0,ON.jsxs)("div",{className:"ml-2 sm:ml-3",children:[(0,ON.jsx)("span",{className:"text-lg sm:text-xl font-semibold text-cyan-100",children:"Smart EcoLock"}),(0,ON.jsx)("p",{className:"text-xs sm:text-sm text-cyan-300",children:t.department})]})]}),(0,ON.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,ON.jsx)("button",{onClick:()=>l(!o),className:"sm:hidden p-2 text-cyan-200 hover:text-cyan-100 focus:outline-none","aria-label":"Toggle navigation menu",children:o?(0,ON.jsx)(lP,{className:"h-6 w-6"}):(0,ON.jsx)(uP,{className:"h-6 w-6"})}),(0,ON.jsxs)("div",{className:"hidden sm:flex items-center space-x-4",children:[(0,ON.jsx)(ke,{to:"/student/dashboard",className:"text-cyan-200 hover:text-white hover:bg-gray-800/50 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Dashboard"}),(0,ON.jsx)(ke,{to:"/student/student-schedules",className:"text-cyan-200 hover:text-white hover:bg-gray-800/50 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Student Schedules"}),(0,ON.jsxs)(CI.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative p-2 text-cyan-200 hover:text-cyan-100",children:[(0,ON.jsx)(hP,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,ON.jsx)("span",{className:"absolute top-0 right-0 h-3 w-3 sm:h-4 sm:w-4 bg-red-500 rounded-full text-[8px] sm:text-xs flex items-center justify-center border border-cyan-800",children:"1"})]})]}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsxs)("button",{onClick:()=>a(!s),className:"flex items-center space-x-2 sm:space-x-3 focus:outline-none hover:opacity-80 transition-opacity","aria-label":"User profile menu",children:[(0,ON.jsx)("div",{className:"h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-gray-700/50 flex items-center justify-center border border-cyan-800",children:(0,ON.jsx)(cA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-cyan-400"})}),(0,ON.jsxs)("div",{className:"text-left hidden md:block",children:[(0,ON.jsx)("p",{className:"text-xs sm:text-sm font-medium text-cyan-100",children:t.fullName.length>12?t.fullName.substring(0,12)+"...":t.fullName}),(0,ON.jsx)("p",{className:"text-[10px] sm:text-xs text-cyan-300",children:t.section})]})]}),s&&(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-40 sm:w-48 rounded-xl shadow-xl py-1 bg-gray-800/80 backdrop-blur-lg border border-cyan-800 z-50",style:{top:"100%"},children:[(0,ON.jsxs)(ke,{to:"/student/profile",className:"flex items-center px-3 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm text-cyan-100 hover:bg-gray-700 transition-colors",children:[(0,ON.jsx)(cA,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 text-cyan-400"}),"Your Profile"]}),(0,ON.jsxs)("button",{onClick:async()=>{try{await n(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),i("/login")}catch(Zg){console.error("Logout failed:",Zg)}},className:"flex items-center w-full px-3 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm text-red-400 hover:bg-gray-700 transition-colors",children:[(0,ON.jsx)(mP,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 text-red-400"}),"Sign Out"]})]})]})]})]}),o&&(0,ON.jsx)(CI.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"sm:hidden bg-gray-800/90 backdrop-blur-lg border-t border-cyan-800",children:(0,ON.jsxs)("div",{className:"flex flex-col space-y-2 px-4 py-3",children:[(0,ON.jsx)(ke,{to:"/student/dashboard",onClick:()=>l(!1),className:"text-cyan-200 hover:text-white hover:bg-gray-700/50 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Dashboard"}),(0,ON.jsx)(ke,{to:"/student/student-schedules",onClick:()=>l(!1),className:"text-cyan-200 hover:text-white hover:bg-gray-700/50 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Student Schedules"}),(0,ON.jsxs)(CI.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center text-cyan-200 hover:text-cyan-100 px-3 py-2 rounded-md text-sm font-medium",children:[(0,ON.jsx)(hP,{className:"h-5 w-5 mr-2"}),"Notifications",(0,ON.jsx)("span",{className:"ml-2 h-3 w-3 bg-red-500 rounded-full text-[8px] flex items-center justify-center border border-cyan-800",children:"1"})]})]})})]})]})},yP=()=>{const e=Array.from({length:30},(()=>({x:100*Math.random(),y:100*Math.random(),speedX:.3*(Math.random()-.5),speedY:.3*(Math.random()-.5)})));return(0,ON.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.map(((e,t)=>(0,ON.jsx)(CI.div,{className:"absolute w-1 h-1 bg-cyan-400 rounded-full",initial:{x:`${e.x}vw`,y:`${e.y}vh`,opacity:.6},animate:{x:`${e.x+50*e.speedX}vw`,y:`${e.y+50*e.speedY}vh`,opacity:[.6,.8,.6]},transition:{duration:15,repeat:1/0,repeatType:"reverse"}},t)))})},vP=document.createElement("style");vP.innerHTML="\n  .custom-scrollbar::-webkit-scrollbar {\n    width: 8px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-track {\n    background: #1e293b;\n    border-radius: 10px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-thumb {\n    background: #0891b2;\n    border-radius: 10px;\n  }\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: #0e7490;\n  }\n",document.head.appendChild(vP);const bP=e=>{var t,n,i,s,a;let{instructorName:o}=e;const{currentUser:l}=MN(),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)([]),[f,m]=(0,r.useState)([]),[p,g]=(0,r.useState)(""),[y,v]=(0,r.useState)([]),[b,x]=(0,r.useState)(!0);(0,r.useEffect)((()=>{(async()=>{if(l)try{x(!0);const e=lg(_p(IN,"students"),ug("uid","==",l.uid)),t=await Sg(e);if(t.docs.length>0){const e=t.docs[0].data(),n={id:t.docs[0].id,name:e.fullName||"",section:e.section||"",sectionId:e.sectionId||"",attendanceRecords:[],studentId:e.idNumber||"",course:e.department||"",year:e.year||"",enrolledSubjects:Array.isArray(e.enrolledSubjects)?e.enrolledSubjects:[],email:e.email||"",mobileNumber:e.mobileNumber||"",rfidUid:e.rfidUid||"",assignedSensorId:e.assignedSensorId||""};if(u(n),n.enrolledSubjects.length>0){const e=lg(_p(IN,"subjects"),ug("name","in",n.enrolledSubjects)),t=(await Sg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=o?lg(_p(IN,"schedules"),ug("subjectCode","in",t.map((e=>e.code))),ug("instructor","==",o),ug("section","==",n.section)):lg(_p(IN,"schedules"),ug("subjectCode","in",t.map((e=>e.code))),ug("section","==",n.section)),i=(await Sg(r)).docs.map((e=>({id:e.id,...e.data()})));m(i);const s=t.map((e=>{const t=i.find((t=>t.subjectCode===e.code));return{...e,instructor:(null===t||void 0===t?void 0:t.instructor)||"N/A"}}));h(s)}else h([]),m([]);const r=lg(_p(IN,"attendance"),ug("studentId","==",n.id)),i=(await Sg(r)).docs.map((e=>({id:e.id,...e.data()})));n.attendanceRecords=i,v(i),x(!1)}else zI().fire({icon:"error",title:"Error",text:"Student not found.",background:"#1e293b",iconColor:"#22d3ee",confirmButtonColor:"#0891b2"})}catch(Zg){zI().fire({icon:"error",title:"Error",text:Zg instanceof Error?Zg.message:"Failed to load data",background:"#1e293b",iconColor:"#22d3ee",confirmButtonColor:"#0891b2"})}finally{x(!1)}})()}),[l,o]);const w=c?{fullName:c.name,department:c.course,section:c.section}:{fullName:"Loading...",department:"",section:""};return(0,ON.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono",children:[(0,ON.jsx)(yP,{}),(0,ON.jsx)(gP,{student:w}),(0,ON.jsxs)("div",{className:"pt-16 px-4 sm:px-6 lg:px-8",children:[" ",(0,ON.jsxs)(CI.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 backdrop-blur-lg bg-gray-800/80 rounded-xl shadow-xl p-6 border border-cyan-800 relative overflow-hidden",children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"relative z-10",children:[(0,ON.jsxs)("h1",{className:"text-3xl font-bold text-cyan-100 flex items-center gap-3",children:[(0,ON.jsx)(hA,{className:"w-8 h-8 text-cyan-400"}),"My Attendance ",o?`with ${o}`:""]}),(0,ON.jsx)("p",{className:"mt-2 text-cyan-300",children:"View your attendance records by subject"})]})]}),b?(0,ON.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,ON.jsx)(CI.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-12 h-12 border-4 border-cyan-400 border-t-transparent rounded-full"})}):c?(0,ON.jsxs)(ON.Fragment,{children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 backdrop-blur-lg bg-gray-800/80 rounded-xl shadow-xl p-6 border border-cyan-800 relative overflow-hidden",children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"relative z-10",children:[(0,ON.jsxs)("h2",{className:"text-xl font-semibold text-cyan-100 mb-4 flex items-center gap-2",children:[(0,ON.jsx)(AI,{className:"w-6 h-6 text-cyan-400"}),"Student Profile"]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-cyan-300",children:[(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Name:"})," ",c.name]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Student ID:"})," ",c.studentId]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Course:"})," ",c.course]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Section:"})," ",c.section]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Email:"})," ",c.email]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Mobile Number:"})," ",c.mobileNumber]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"RFID UID:"})," ",c.rfidUid]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Sensor ID:"})," ",c.assignedSensorId]})]})]})]}),c.enrolledSubjects.length>0?(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 backdrop-blur-lg bg-gray-800/80 rounded-xl shadow-xl p-6 border border-cyan-800 relative overflow-hidden",children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"relative z-10",children:[(0,ON.jsxs)("label",{className:"block text-sm font-medium text-cyan-300 mb-3",children:[(0,ON.jsx)(SO,{className:"w-5 h-5 inline-block mr-2 text-cyan-400"}),"Select Subject"]}),(0,ON.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full rounded-lg bg-gray-700 text-cyan-100 border border-cyan-800 focus:ring-2 focus:ring-cyan-500 py-2.5",children:[(0,ON.jsx)("option",{value:"",children:"-- Select a Subject --"}),d.map((e=>(0,ON.jsxs)("option",{value:e.code,children:[e.name," (",e.code,") - ",e.instructor]},e.id)))]})]})]}):(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center text-cyan-300 py-12",children:[(0,ON.jsx)(SO,{className:"w-16 h-16 mx-auto mb-4 text-cyan-400"}),(0,ON.jsx)("h2",{className:"text-xl font-semibold",children:"No enrolled subjects available"})]}),p&&(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-lg bg-gray-800/80 rounded-xl shadow-xl p-6 border border-cyan-800 relative overflow-hidden",children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"relative z-10",children:[(0,ON.jsxs)("h3",{className:"text-xl font-semibold text-cyan-100 mb-6 flex items-center gap-2",children:[(0,ON.jsx)(GO,{className:"w-6 h-6 text-cyan-400"}),"Attendance for ",null===(t=d.find((e=>e.code===p)))||void 0===t?void 0:t.name]}),(0,ON.jsxs)("div",{className:"mb-6 text-cyan-300",children:[(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Instructor:"})," ",(null===(n=d.find((e=>e.code===p)))||void 0===n?void 0:n.instructor)||"N/A"]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Schedule:"})," ",(null===(i=f.find((e=>e.subjectCode===p)))||void 0===i?void 0:i.days.join(", "))||"N/A"," ",null===(s=f.find((e=>e.subjectCode===p)))||void 0===s?void 0:s.startTime," -"," ",null===(a=f.find((e=>e.subjectCode===p)))||void 0===a?void 0:a.endTime]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium",children:"Attendance Rate:"})," ",(e=>{const t=y.filter((t=>t.subjectCode===e)),n=t.length,r=t.filter((e=>e.present)).length;return n>0?r/n*100:0})(p).toFixed(2),"%"]})]}),(0,ON.jsx)("div",{className:"overflow-x-auto custom-scrollbar",children:(0,ON.jsxs)("table",{className:"min-w-full divide-y divide-cyan-800",children:[(0,ON.jsx)("thead",{className:"bg-gray-700/50",children:(0,ON.jsxs)("tr",{children:[(0,ON.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-cyan-300 uppercase tracking-wider",children:"Date"}),(0,ON.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-cyan-300 uppercase tracking-wider",children:"Status"})]})}),(0,ON.jsx)("tbody",{className:"divide-y divide-cyan-800",children:y.filter((e=>e.subjectCode===p)).map((e=>(0,ON.jsxs)("tr",{className:"hover:bg-gray-700/50",children:[(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-cyan-100",children:new Date(e.date).toLocaleDateString()}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-cyan-100",children:e.present?(0,ON.jsx)(PI,{className:"w-5 h-5 text-green-400"}):(0,ON.jsx)(gA,{className:"w-5 h-5 text-red-400"})})]},e.id)))})]})})]})]})]}):(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center text-cyan-300 py-12",children:[(0,ON.jsx)(SO,{className:"w-16 h-16 mx-auto mb-4 text-cyan-400"}),(0,ON.jsx)("h2",{className:"text-xl font-semibold",children:"No student data available"})]})]})]})};function xP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M11.484 2.17a.75.75 0 0 1 1.032 0 11.209 11.209 0 0 0 7.877 3.08.75.75 0 0 1 .722.515 12.74 12.74 0 0 1 .635 3.985c0 5.942-4.064 10.933-9.563 12.348a.749.749 0 0 1-.374 0C6.314 20.683 2.25 15.692 2.25 9.75c0-1.39.223-2.73.635-3.985a.75.75 0 0 1 .722-.516l.143.001c2.996 0 5.718-1.17 7.734-3.08ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75ZM12 15a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75v-.008a.75.75 0 0 0-.75-.75H12Z",clipRule:"evenodd"}))}const wP=r.forwardRef(xP);function _P(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3.792 2.938A49.069 49.069 0 0 1 12 2.25c2.797 0 5.54.236 8.209.688a1.857 1.857 0 0 1 1.541 1.836v1.044a3 3 0 0 1-.879 2.121l-6.182 6.182a1.5 1.5 0 0 0-.439 1.061v2.927a3 3 0 0 1-1.658 2.684l-1.757.878A.75.75 0 0 1 9.75 21v-5.818a1.5 1.5 0 0 0-.44-1.06L3.13 7.938a3 3 0 0 1-.879-2.121V4.774c0-.897.64-1.683 1.542-1.836Z",clipRule:"evenodd"}))}const NP=r.forwardRef(_P),jP=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)("all"),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=lg(_p(IN,"securityLogs"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ig("orderBy",e);return hg._create(n,t)}("timestamp","desc")),n=Ig(e,(e=>{const n=e.docs.map((e=>({id:e.id,...e.data()})));t(n),i(!1)}),(e=>{console.error("Error fetching security logs:",e),zI().fire({icon:"error",title:"Error",text:"Failed to fetch security logs. Please try again later."}),i(!1)}));return()=>n()}),[]);const f=e.filter((e=>{const t="all"===s||e.status===s,n=e.event.toLowerCase().includes(o.toLowerCase())||e.description.toLowerCase().includes(o.toLowerCase())||e.user.toLowerCase().includes(o.toLowerCase())||e.deviceId&&e.deviceId.toLowerCase().includes(o.toLowerCase());return t&&n})),m=e=>{switch(e){case"success":return"bg-green-100 text-green-800 border-green-300";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"error":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},p=e=>{switch(e){case"success":return(0,ON.jsx)(TI,{className:"h-5 w-5 text-green-600"});case"warning":return(0,ON.jsx)(wP,{className:"h-5 w-5 text-yellow-600"});case"error":return(0,ON.jsx)(gA,{className:"h-5 w-5 text-red-600"});default:return(0,ON.jsx)(wP,{className:"h-5 w-5 text-gray-600"})}},g=e=>{const t=e.toDate();return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)};return(0,ON.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,ON.jsxs)("div",{className:"p-8 h-full flex flex-col",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ON.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Security Logs"}),(0,ON.jsxs)("div",{className:"flex space-x-4",children:[(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsxs)("button",{onClick:()=>u(!c),className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:bg-gray-50 border border-gray-200",children:[(0,ON.jsx)(NP,{className:"h-5 w-5 text-gray-500 mr-2"}),(0,ON.jsx)("span",{className:"capitalize",children:s})]}),c&&(0,ON.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-10 border border-gray-200",children:["all","success","warning","error"].map((e=>(0,ON.jsx)("button",{onClick:()=>{a(e),u(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg capitalize "+(s===e?"bg-indigo-50 text-indigo-700":""),children:e},e)))})]}),(0,ON.jsx)("div",{className:"relative",children:(0,ON.jsx)("input",{type:"text",placeholder:"Search logs...",value:o,onChange:e=>l(e.target.value),className:"w-64 px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"})})]})]}),(0,ON.jsx)("div",{className:"flex-1 bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:(0,ON.jsx)("div",{className:"overflow-x-auto",children:(0,ON.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,ON.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 240px)"},children:n?(0,ON.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,ON.jsx)(VI,{className:"h-8 w-8 text-gray-400 animate-spin"})}):0===f.length?(0,ON.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,ON.jsx)(wP,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,ON.jsx)("p",{className:"text-gray-500 text-lg",children:"No security logs found"})]}):(0,ON.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ON.jsx)("thead",{className:"bg-gray-50",children:(0,ON.jsxs)("tr",{children:[(0,ON.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ON.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),(0,ON.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,ON.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,ON.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,ON.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((e=>(0,ON.jsxs)(CI.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition-colors",children:[(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ON.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${m(e.status)}`,children:[p(e.status),(0,ON.jsx)("span",{className:"ml-1.5 capitalize",children:e.status})]})}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ON.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.event})}),(0,ON.jsx)("td",{className:"px-6 py-4",children:(0,ON.jsx)("div",{className:"text-sm text-gray-500 max-w-md truncate",children:e.description})}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)(AI,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,ON.jsx)("div",{className:"text-sm text-gray-900",children:e.user})]})}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)(GO,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,ON.jsx)("div",{className:"text-sm text-gray-500",children:g(e.timestamp)})]})})]},e.id)))})]})})})})})]})})]})};function SP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const EP=r.forwardRef(SP);function CP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z",clipRule:"evenodd"}))}const kP=r.forwardRef(CP);function TP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM6.166 5.106a.75.75 0 0 1 0 1.06 8.25 8.25 0 1 0 11.668 0 .75.75 0 1 1 1.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const IP=r.forwardRef(TP);function AP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const OP=r.forwardRef(AP);function PP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M6.32 1.827a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V19.5a3 3 0 0 1-3 3H6.75a3 3 0 0 1-3-3V4.757c0-1.47 1.073-2.756 2.57-2.93ZM7.5 11.25a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H8.25a.75.75 0 0 1-.75-.75v-.008Zm.75 1.5a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H8.25Zm-.75 3a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H8.25a.75.75 0 0 1-.75-.75v-.008Zm.75 1.5a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V18a.75.75 0 0 0-.75-.75H8.25Zm1.748-6a.75.75 0 0 1 .75-.75h.007a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.007a.75.75 0 0 1-.75-.75v-.008Zm.75 1.5a.75.75 0 0 0-.75.75v.008c0 .414.335.75.75.75h.007a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75h-.007Zm-.75 3a.75.75 0 0 1 .75-.75h.007a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.007a.75.75 0 0 1-.75-.75v-.008Zm.75 1.5a.75.75 0 0 0-.75.75v.008c0 .414.335.75.75.75h.007a.75.75 0 0 0 .75-.75V18a.75.75 0 0 0-.75-.75h-.007Zm1.754-6a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Zm.75 1.5a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75h-.008Zm-.75 3a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Zm.75 1.5a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V18a.75.75 0 0 0-.75-.75h-.008Zm1.748-6a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Zm.75 1.5a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75h-.008Zm-8.25-6A.75.75 0 0 1 8.25 6h7.5a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-7.5a.75.75 0 0 1-.75-.75v-.75Zm9 9a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-2.25Z",clipRule:"evenodd"}))}const MP=r.forwardRef(PP),RP=14,DP=e=>{let{icon:t,title:n,value:r,description:i}=e;return(0,ON.jsx)(CI.div,{whileHover:{scale:1.02},className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,ON.jsx)(t,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"})}),(0,ON.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,ON.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:n}),(0,ON.jsx)("p",{className:"text-lg sm:text-2xl font-semibold text-gray-900",children:r}),(0,ON.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:i})]})]})})},LP=e=>{let{label:t,value:n,color:r,icon:i}=e;return(0,ON.jsxs)("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg",children:[(0,ON.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 mb-2 sm:mb-3",children:[(0,ON.jsx)(i,{className:"w-4 h-4 sm:w-5 sm:h-5",style:{color:r}}),(0,ON.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-600",children:t})]}),(0,ON.jsx)("div",{className:"flex justify-between items-center mb-1 sm:mb-2",children:(0,ON.jsxs)("span",{className:"text-lg sm:text-2xl font-semibold",style:{color:r},children:[n.toFixed(2)," kWh"]})}),(0,ON.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5 sm:h-2",children:(0,ON.jsx)("div",{className:"h-1.5 sm:h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(n/10*100,100)}%`,backgroundColor:r,boxShadow:`0 0 8px ${r}40`}})})]})},FP=()=>{var e;const{currentUser:t}=MN(),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)({}),[o,l]=(0,r.useState)("704"),[c,u]=(0,r.useState)("hour"),[d,h]=(0,r.useState)(!0),[f,m]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)("0"),[b,x]=(0,r.useState)("1"),[w,_]=(0,r.useState)(null),[N,j]=(0,r.useState)("");(0,r.useEffect)((()=>{if(null===t||void 0===t||!t.uid)return void h(!1);const e=Gw(AN,"Instructors/149598BA"),n=n_(e,(e=>{const t=e.val();a(t||{}),h(!1)}),(e=>{console.error("Error fetching instructor data:",e),zI().fire({icon:"error",title:"Error",text:"Failed to fetch instructor data",customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700",confirmButton:"bg-blue-600 hover:bg-blue-700"}}),h(!1)}));return()=>r_(e,"value",n)}),[t]),(0,r.useEffect)((()=>{(()=>{try{var e,t,n;const r=new Set;null!==s&&void 0!==s&&null!==(e=s.ClassStatus)&&void 0!==e&&null!==(t=e.schedule)&&void 0!==t&&null!==(n=t.roomName)&&void 0!==n&&n.name&&r.add(s.ClassStatus.schedule.roomName.name);const i=Array.from(r).map(((e,t)=>({id:`room-${t}`,name:e,building:"GLE Building",floor:"7th Floor"}))).sort(((e,t)=>e.name.localeCompare(t.name)));m(i),i.length>0&&!o&&l(i[0].name)}catch(Zg){console.error("Error processing rooms:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to fetch rooms",customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700",confirmButton:"bg-blue-600 hover:bg-blue-700"}})}})()}),[s,o]),(0,r.useEffect)((()=>{var e;if(!o||null===s||void 0===s||null===(e=s.ClassStatus)||void 0===e||!e.schedule)return void i([]);(()=>{try{var e,t;const n=[],r=E(),a=null===(e=s.ClassStatus)||void 0===e?void 0:e.schedule,l=null===a||void 0===a?void 0:a.roomName,c=null===l||void 0===l?void 0:l.pzem,u=(null===(t=s.Profile)||void 0===t?void 0:t.fullName)||"Unknown Instructor";if(c&&null!==l&&void 0!==l&&l.name&&l.name===o){const e=parseFloat(c.power)||0,t=parseFloat(c.energy)||0,i=c.timestamp.replace(/_/g,":"),s=new Date(i);!isNaN(s.getTime())&&s>r&&n.push({id:`instructor_149598BA_${c.timestamp}`,classroomId:o,timestamp:s,powerWatts:e,consumptionKWh:t,devices:{lighting:.25*t,projection:.25*t,computers:.25*t,hvac:.25*t},instructorName:u,subject:(null===a||void 0===a?void 0:a.subject)||"Unknown Subject",subjectCode:(null===a||void 0===a?void 0:a.subjectCode)||"N/A",schedule:{day:(null===a||void 0===a?void 0:a.day)||"N/A",startTime:(null===a||void 0===a?void 0:a.startTime)||"N/A",endTime:(null===a||void 0===a?void 0:a.endTime)||"N/A",section:(null===a||void 0===a?void 0:a.section)||"N/A"}})}i(n)}catch(Zg){console.error("Error processing energy data:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to process energy data",customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700",confirmButton:"bg-blue-600 hover:bg-blue-700"}})}})()}),[o,c,s]);const S=()=>{var e;if(null===s||void 0===s||null===(e=s.ClassStatus)||void 0===e||!e.schedule)return null;const t=s.ClassStatus.schedule,n=null===t||void 0===t?void 0:t.roomName;return n&&n.pzem?{pzem:n.pzem,schedule:t}:null},E=()=>{const e=new Date;switch(c){case"hour":return new Date(e.getTime()-36e5);case"day":return new Date(e.getTime()-864e5);case"week":return new Date(e.getTime()-6048e5);default:return e}},C=(()=>{if(null===s||void 0===s||!s.AccessLogs)return 2;try{let e=null,t=null;if(Object.values(s.AccessLogs).forEach((n=>{"Access"===n.action&&"granted"===n.status?e=n.timestamp:"EndSession"===n.action&&"completed"===n.status&&(t=n.timestamp)})),!e||!t)return 2;const n=e=>{const t=e.substring(0,10).replace(/_/g,"-"),n=e.substring(11);return`${t} ${`${n.substring(0,2)}:${n.substring(2,4)}:${n.substring(4,6)}`}`},r=new Date(n(e)),i=new Date(n(t));if(isNaN(r.getTime())||isNaN(i.getTime()))return 2;const a=(i.getTime()-r.getTime())/36e5;return a>0?a:2}catch(Zg){return console.error("Error calculating duration:",Zg),2}})(),k=(()=>{let e=0;const t=S(),r=null===t||void 0===t?void 0:t.pzem;if(r&&(e=parseFloat(r.energy)||0,n.length>0)){const t=n[n.length-1];t.consumptionKWh=e,t.devices={lighting:.25*e,projection:.25*e,computers:.25*e,hvac:.25*e}}const i=20*e,s=e*RP,a=i*RP;return{prototypeConsumptionKWh:e.toFixed(2),actualConsumptionKWh:i.toFixed(2),prototypeCost:s.toFixed(2),actualCost:a.toFixed(2),durationHours:C.toFixed(2)}})(),T=parseFloat(k.prototypeConsumptionKWh),I=T/(n.length||1),A=n.length>0?T:0,O=S(),P=null===O||void 0===O?void 0:O.pzem,M=null===O||void 0===O?void 0:O.schedule,R=(null===(e=s.Profile)||void 0===e?void 0:e.fullName)||"Unknown Instructor",D=n.filter((e=>[e.instructorName,e.subject,e.subjectCode,e.schedule.section].some((e=>e.toLowerCase().includes(N.toLowerCase())))));return(0,ON.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("button",{onClick:()=>g(!p),className:"md:hidden fixed top-4 left-4 z-50 bg-indigo-600 text-white p-2 rounded-full shadow-lg hover:bg-indigo-500 transition-colors",children:(0,ON.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),(0,ON.jsxs)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${p?"ml-64":"ml-0 md:ml-64"} overflow-y-auto p-4 sm:p-8`,children:[(0,ON.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,ON.jsx)("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:"Energy Usage Analytics"}),(0,ON.jsx)("p",{className:"mt-1 sm:mt-2 text-gray-600 text-sm sm:text-base",children:"Monitor and analyze classroom energy consumption in real-time"})]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,ON.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[(0,ON.jsxs)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 sm:mb-3",children:[(0,ON.jsx)(TO,{className:"w-4 h-4 sm:w-5 sm:h-5 inline-block mr-1 sm:mr-2 text-indigo-600"}),"Select Classroom"]}),f.length>0?(0,ON.jsx)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-1.5 sm:py-2.5 text-sm sm:text-base",children:f.map((e=>(0,ON.jsxs)("option",{value:e.name,children:[e.name," - ",e.building,", ",e.floor]},e.id)))}):(0,ON.jsxs)("div",{className:"flex items-center text-yellow-600 text-sm sm:text-base",children:[(0,ON.jsx)(EP,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),(0,ON.jsx)("span",{children:"No rooms available"})]})]}),(0,ON.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[(0,ON.jsxs)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 sm:mb-3",children:[(0,ON.jsx)(WO,{className:"w-4 h-4 sm:w-5 sm:h-5 inline-block mr-1 sm:mr-2 text-indigo-600"}),"Time Range"]}),(0,ON.jsx)("div",{className:"flex gap-2 sm:gap-3",children:["hour","day","week"].map((e=>(0,ON.jsx)("button",{onClick:()=>u(e),className:"flex-1 py-1.5 sm:py-2.5 px-3 sm:px-4 rounded-lg text-xs sm:text-sm font-medium transition-all duration-200 "+(c===e?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"hour"===e?"Last Hour":"day"===e?"Last 24 Hours":"Last Week"},e)))})]})]}),d?(0,ON.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-b-2 border-indigo-600"})}):(0,ON.jsxs)(ON.Fragment,{children:[(0,ON.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm mb-6 sm:mb-8",children:[(0,ON.jsxs)("h3",{className:"text-base sm:text-lg font-semibold mb-4 sm:mb-6 flex items-center",children:[(0,ON.jsx)(kP,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2 text-indigo-600"}),"Prototype Power Consumption (",o,")"]}),P&&M?(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 text-xs sm:text-sm",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Power:"})," ",(0,ON.jsxs)("span",{className:"font-medium",children:[parseFloat(P.power).toFixed(2)," W"]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Current:"})," ",(0,ON.jsxs)("span",{className:"font-medium",children:[parseFloat(P.current).toFixed(2)," A"]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Voltage:"})," ",(0,ON.jsxs)("span",{className:"font-medium",children:[parseFloat(P.voltage).toFixed(2)," V"]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Energy:"})," ",(0,ON.jsxs)("span",{className:"font-medium",children:[parseFloat(P.energy).toFixed(2)," kWh"]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Frequency:"})," ",(0,ON.jsxs)("span",{className:"font-medium",children:[parseFloat(P.frequency).toFixed(2)," Hz"]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Power Factor:"})," ",(0,ON.jsx)("span",{className:"font-medium",children:parseFloat(P.powerFactor).toFixed(2)})]}),(0,ON.jsxs)("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3 border-t pt-3 sm:pt-4 mt-3 sm:mt-4",children:[(0,ON.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[(0,ON.jsx)(AI,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),(0,ON.jsx)("span",{children:"Instructor:"})," ",(0,ON.jsx)("span",{className:"font-medium ml-1",children:R})]}),(0,ON.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,ON.jsx)(LO,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),(0,ON.jsx)("span",{children:"Subject:"})," ",(0,ON.jsxs)("span",{className:"font-medium ml-1",children:[M.subject," (",M.subjectCode,")"]})]}),(0,ON.jsxs)("div",{className:"flex items-center text-gray-600 mt-2",children:[(0,ON.jsx)(WO,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),(0,ON.jsx)("span",{children:"Schedule:"})," ",(0,ON.jsxs)("span",{className:"font-medium ml-1",children:[M.day," ",M.startTime,"-",M.endTime,", Section"," ",M.section]})]})]}),(0,ON.jsxs)("div",{className:"col-span-full",children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Last Updated:"})," ",(0,ON.jsx)("span",{className:"font-medium",children:P.timestamp.replace(/_/g,":")})]})]}):(0,ON.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["No real-time power data available for ",o]})]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,ON.jsx)(DP,{icon:kP,title:"Total Consumption",value:`${T.toFixed(2)} kWh`,description:"Total energy used"}),(0,ON.jsx)(DP,{icon:bO,title:"Average Consumption",value:`${I.toFixed(2)} kWh`,description:"Average per reading"}),(0,ON.jsx)(DP,{icon:IP,title:"Peak Usage",value:`${A.toFixed(2)} kWh`,description:"Highest consumption"}),(0,ON.jsx)(DP,{icon:OP,title:"Readings",value:n.length,description:"Total data points"})]}),(0,ON.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm mb-6 sm:mb-8",children:[(0,ON.jsxs)("h3",{className:"text-base sm:text-lg font-semibold mb-4 sm:mb-6 flex items-center",children:[(0,ON.jsx)(MP,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2 text-indigo-600"}),"Power Consumption Analysis (@ \u20b1",RP,"/kWh)"]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Prototype Consumption"}),(0,ON.jsxs)("p",{className:"text-xs sm:text-sm",children:["Duration: ",k.durationHours," hours"]}),(0,ON.jsxs)("p",{className:"text-xs sm:text-sm",children:["Consumption: ",k.prototypeConsumptionKWh," kWh"]}),(0,ON.jsxs)("p",{className:"text-xs sm:text-sm",children:["Cost: \u20b1",k.prototypeCost]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:["Actual Room Consumption (Scaled x",20,")"]}),(0,ON.jsxs)("p",{className:"text-xs sm:text-sm",children:["Duration: ",k.durationHours," hours"]}),(0,ON.jsxs)("p",{className:"text-xs sm:text-sm",children:["Consumption: ",k.actualConsumptionKWh," kWh"]}),(0,ON.jsxs)("p",{className:"text-xs sm:text-sm",children:["Cost: \u20b1",k.actualCost]})]})]})]}),(0,ON.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm mb-6 sm:mb-8",children:[(0,ON.jsxs)("h3",{className:"text-base sm:text-lg font-semibold mb-4 sm:mb-6 flex items-center",children:[(0,ON.jsx)(MP,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2 text-indigo-600"}),"Interactive Power Calculator (@ \u20b1",RP,"/kWh)"]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Energy Consumption (kWh)"}),(0,ON.jsx)("input",{type:"number",value:y,onChange:e=>v(e.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-1.5 sm:py-2 px-2 sm:px-3 text-sm sm:text-base",min:"0",step:"0.01"})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:"Duration (hours)"}),(0,ON.jsx)("input",{type:"number",value:b,onChange:e=>x(e.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-1.5 sm:py-2 px-2 sm:px-3 text-sm sm:text-base",min:"0",step:"0.01"})]}),(0,ON.jsxs)("div",{className:"col-span-2",children:[(0,ON.jsx)("button",{onClick:()=>{const e=parseFloat(y)||0,t=parseFloat(b)||0,n=20*e,r=e*RP,i=n*RP;_({prototypeKWh:e.toFixed(2),actualKWh:n.toFixed(2),prototypeCost:r.toFixed(2),actualCost:i.toFixed(2),durationHours:t.toFixed(2)})},className:"w-full sm:w-auto px-4 sm:px-6 py-1.5 sm:py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm sm:text-base",children:"Calculate"}),w&&(0,ON.jsx)("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-gray-50 rounded-lg text-xs sm:text-sm",children:(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Prototype Consumption"}),(0,ON.jsxs)("p",{children:["Duration: ",w.durationHours," hours"]}),(0,ON.jsxs)("p",{children:["Consumption: ",w.prototypeKWh," kWh"]}),(0,ON.jsxs)("p",{children:["Cost: \u20b1",w.prototypeCost]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:["Actual Room Consumption (Scaled x",20,")"]}),(0,ON.jsxs)("p",{children:["Duration: ",w.durationHours," hours"]}),(0,ON.jsxs)("p",{children:["Consumption: ",w.actualKWh," kWh"]}),(0,ON.jsxs)("p",{children:["Cost: \u20b1",w.actualCost]})]})]})})]})]})]}),n.length>0&&(0,ON.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm mb-6 sm:mb-8",children:[(0,ON.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-4 sm:mb-6",children:"Device Energy Breakdown (Latest Reading)"}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,ON.jsx)(LP,{label:"Lighting",value:n[n.length-1].devices.lighting,color:"rgb(59, 130, 246)",icon:PO}),(0,ON.jsx)(LP,{label:"Projection",value:n[n.length-1].devices.projection,color:"rgb(16, 185, 129)",icon:bO}),(0,ON.jsx)(LP,{label:"Computers",value:n[n.length-1].devices.computers,color:"rgb(245, 158, 11)",icon:IP}),(0,ON.jsx)(LP,{label:"HVAC",value:n[n.length-1].devices.hvac,color:"rgb(239, 68, 68)",icon:OP})]})]}),n.length>0&&(0,ON.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm mt-6 sm:mt-8",children:[(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6",children:[(0,ON.jsxs)("h3",{className:"text-base sm:text-lg font-semibold flex items-center",children:[(0,ON.jsx)(bO,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2 text-indigo-600"}),"Energy Consumption Records"]}),(0,ON.jsx)("div",{className:"mt-3 sm:mt-0 w-full sm:w-64",children:(0,ON.jsx)("input",{type:"text",placeholder:"Search by instructor, subject, or section...",value:N,onChange:e=>j(e.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-1.5 sm:py-2 px-2 sm:px-3 text-sm sm:text-base"})})]}),(0,ON.jsx)("div",{className:"overflow-x-auto",children:(0,ON.jsxs)("table",{className:"w-full text-xs sm:text-sm text-left text-gray-600",children:[(0,ON.jsx)("thead",{className:"text-xs sm:text-sm text-gray-700 uppercase bg-gray-50",children:(0,ON.jsxs)("tr",{children:[(0,ON.jsx)("th",{scope:"col",className:"px-4 sm:px-6 py-2 sm:py-3",children:"Timestamp"}),(0,ON.jsx)("th",{scope:"col",className:"px-4 sm:px-6 py-2 sm:py-3",children:"Instructor"}),(0,ON.jsx)("th",{scope:"col",className:"px-4 sm:px-6 py-2 sm:py-3",children:"Subject"}),(0,ON.jsx)("th",{scope:"col",className:"px-4 sm:px-6 py-2 sm:py-3",children:"Schedule"}),(0,ON.jsx)("th",{scope:"col",className:"px-4 sm:px-6 py-2 sm:py-3",children:"Section"}),(0,ON.jsx)("th",{scope:"col",className:"px-4 sm:px-6 py-2 sm:py-3",children:"Power (W)"}),(0,ON.jsx)("th",{scope:"col",className:"px-4 sm:px-6 py-2 sm:py-3",children:"Consumption (kWh)"})]})}),(0,ON.jsx)("tbody",{children:D.length>0?D.map((e=>(0,ON.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,ON.jsx)("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.timestamp.toLocaleString()}),(0,ON.jsx)("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.instructorName}),(0,ON.jsxs)("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:[e.subject," (",e.subjectCode,")"]}),(0,ON.jsxs)("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:[e.schedule.day," ",e.schedule.startTime,"-",e.schedule.endTime]}),(0,ON.jsx)("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.schedule.section}),(0,ON.jsx)("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.powerWatts.toFixed(2)}),(0,ON.jsx)("td",{className:"px-4 sm:px-6 py-3 sm:py-4",children:e.consumptionKWh.toFixed(2)})]},e.id))):(0,ON.jsx)("tr",{children:(0,ON.jsx)("td",{colSpan:7,className:"px-4 sm:px-6 py-3 sm:py-4 text-center text-gray-500",children:"No records match your search"})})})]})})]})]})]})]})};function UP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const BP=r.forwardRef(UP);function VP(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=VP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const $P=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=VP(e))&&(r&&(r+=" "),r+=t);return r};var zP=n(9889),qP=n.n(zP),HP=n(620),WP=n.n(HP),KP=n(5268),GP=n.n(KP),YP=n(3097),XP=n.n(YP),ZP=n(9160),QP=n.n(ZP),JP=function(e){return 0===e?0:e>0?1:-1},eM=function(e){return WP()(e)&&e.indexOf("%")===e.length-1},tM=function(e){return QP()(e)&&!GP()(e)},nM=function(e){return tM(e)||WP()(e)},rM=0,iM=function(e){var t=++rM;return"".concat(e||"").concat(t)},sM=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!tM(e)&&!WP()(e))return r;if(eM(e)){var s=e.indexOf("%");n=t*parseFloat(e.slice(0,s))/100}else n=+e;return GP()(n)&&(n=r),i&&n>t&&(n=t),n},aM=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},oM=function(e,t){return tM(e)&&tM(t)?function(n){return e+n*(t-e)}:function(){return t}};function lM(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):XP()(e,t))===n})):null}var cM=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},uM=n(9686),dM=n.n(uM),hM=n(1629),fM=n.n(hM),mM=n(6686),pM=n.n(mM),gM=n(9062);function yM(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function vM(e){return vM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vM(e)}var bM=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xM=["points","pathLength"],wM={svg:["viewBox","children"],polygon:xM,polyline:xM},_M=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],NM=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,r.isValidElement)(e)&&(n=e.props),!pM()(n))return null;var i={};return Object.keys(n).forEach((function(e){_M.includes(e)&&(i[e]=t||function(t){return n[e](n,t)})})),i},jM=function(e,t,n){if(!pM()(e)||"object"!==vM(e))return null;var r=null;return Object.keys(e).forEach((function(i){var s=e[i];_M.includes(i)&&"function"===typeof s&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(s,t,n))})),r},SM=["children"],EM=["children"];function CM(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var kM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},TM=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},IM=null,AM=null,OM=function e(t){if(t===IM&&Array.isArray(AM))return AM;var n=[];return r.Children.forEach(t,(function(t){dM()(t)||((0,gM.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),AM=n,IM=t,n};function PM(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map((function(e){return TM(e)})):[TM(t)],OM(e).forEach((function(e){var t=XP()(e,"type.displayName")||XP()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n}function MM(e,t){var n=PM(e,t);return n&&n[0]}var RM=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!tM(n)||n<=0||!tM(r)||r<=0)},DM=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],LM=function(e){return e&&e.type&&WP()(e.type)&&DM.indexOf(e.type)>=0},FM=function(e,t,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,r.isValidElement)(e)&&(i=e.props),!pM()(i))return null;var s={};return Object.keys(i).forEach((function(e){var r;(function(e,t,n,r){var i,s=null!==(i=null===wM||void 0===wM?void 0:wM[r])&&void 0!==i?i:[];return!fM()(e)&&(r&&s.includes(t)||bM.includes(t))||n&&_M.includes(t)})(null===(r=i)||void 0===r?void 0:r[e],e,t,n)&&(s[e]=i[e])})),s},UM=function e(t,n){if(t===n)return!0;var i=r.Children.count(t);if(i!==r.Children.count(n))return!1;if(0===i)return!0;if(1===i)return BM(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<i;s++){var a=t[s],o=n[s];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!BM(a,o))return!1}return!0},BM=function(e,t){if(dM()(e)&&dM()(t))return!0;if(!dM()(e)&&!dM()(t)){var n=e.props||{},r=n.children,i=CM(n,SM),s=t.props||{},a=s.children,o=CM(s,EM);return r&&a?yM(i,o)&&UM(r,a):!r&&!a&&yM(i,o)}return!1},VM=function(e,t){var n=[],r={};return OM(e).forEach((function(e,i){if(LM(e))n.push(e);else if(e){var s=TM(e.type),a=t[s]||{},o=a.handler,l=a.once;if(o&&(!l||!r[s])){var c=o(e,s,i);n.push(c),r[s]=!0}}})),n},$M=function(e,t){return OM(t).indexOf(e)};function zM(e){return zM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zM(e)}function qM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qM(Object(n),!0).forEach((function(t){WM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WM(e,t,n){return t=function(e){var t=function(e,t){if("object"!=zM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zM(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return GM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GM(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var YM=(0,r.forwardRef)((function(e,t){var n=e.aspect,i=e.initialDimension,s=void 0===i?{width:-1,height:-1}:i,a=e.width,o=void 0===a?"100%":a,l=e.height,c=void 0===l?"100%":l,u=e.minWidth,d=void 0===u?0:u,h=e.minHeight,f=e.maxHeight,m=e.children,p=e.debounce,g=void 0===p?0:p,y=e.id,v=e.className,b=e.onResize,x=e.style,w=void 0===x?{}:x,_=(0,r.useRef)(null),N=(0,r.useRef)();N.current=b,(0,r.useImperativeHandle)(t,(function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})}));var j=KM((0,r.useState)({containerWidth:s.width,containerHeight:s.height}),2),S=j[0],E=j[1],C=(0,r.useCallback)((function(e,t){E((function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,r.useEffect)((function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;C(r,i),null===(t=N.current)||void 0===t||t.call(N,r,i)};g>0&&(e=qP()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=_.current.getBoundingClientRect(),r=n.width,i=n.height;return C(r,i),t.observe(_.current),function(){t.disconnect()}}),[C,g]);var k=(0,r.useMemo)((function(){var e=S.containerWidth,t=S.containerHeight;if(e<0||t<0)return null;cM(eM(o)||eM(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,c),cM(!n||n>0,"The aspect(%s) must be greater than zero.",n);var i=eM(o)?e:o,s=eM(c)?t:c;n&&n>0&&(i?s=i/n:s&&(i=s*n),f&&s>f&&(s=f)),cM(i>0||s>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,s,o,c,d,h,n);var a=!Array.isArray(m)&&TM(m.type).endsWith("Chart");return r.Children.map(m,(function(e){return r.isValidElement(e)?(0,r.cloneElement)(e,HM({width:i,height:s},a?{style:HM({height:"100%",width:"100%",maxHeight:s,maxWidth:i},e.props.style)}:{})):e}))}),[n,m,c,f,h,d,S,o]);return r.createElement("div",{id:y?"".concat(y):void 0,className:$P("recharts-responsive-container",v),style:HM(HM({},w),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:_},k)})),XM=n(6604),ZM=n.n(XM),QM=n(7424),JM=n.n(QM),eR="Invariant failed";function tR(e,t){if(!e)throw new Error(eR)}var nR=["children","width","height","viewBox","className","style","title","desc"];function rR(){return rR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rR.apply(this,arguments)}function iR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sR(e){var t=e.children,n=e.width,i=e.height,s=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,u=iR(e,nR),d=s||{width:n,height:i,x:0,y:0},h=$P("recharts-surface",a);return r.createElement("svg",rR({},FM(u,!0,"svg"),{className:h,width:n,height:i,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),r.createElement("title",null,l),r.createElement("desc",null,c),t)}var aR=["children","className"];function oR(){return oR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oR.apply(this,arguments)}function lR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var cR=r.forwardRef((function(e,t){var n=e.children,i=e.className,s=lR(e,aR),a=$P("recharts-layer",i);return r.createElement("g",oR({className:a},FM(s,!0),{ref:t}),n)}));function uR(e){return uR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uR(e)}function dR(){return dR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dR.apply(this,arguments)}function hR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mR(Object(n),!0).forEach((function(t){gR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gR(e,t,n){return t=function(e){var t=function(e,t){if("object"!=uR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uR(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yR(e){return Array.isArray(e)&&nM(e[0])&&nM(e[1])?e.join(" ~ "):e}var vR=function(e){var t=e.separator,n=void 0===t?" : ":t,i=e.contentStyle,s=void 0===i?{}:i,a=e.itemStyle,o=void 0===a?{}:a,l=e.labelStyle,c=void 0===l?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,f=e.wrapperClassName,m=e.labelClassName,p=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=void 0!==y&&y,b=pR({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),x=pR({margin:0},c),w=!dM()(p),_=w?p:"",N=$P("recharts-default-tooltip",f),j=$P("recharts-tooltip-label",m);w&&g&&void 0!==u&&null!==u&&(_=g(p,u));var S=v?{role:"status","aria-live":"assertive"}:{};return r.createElement("div",dR({className:N,style:b},S),r.createElement("p",{className:j,style:x},r.isValidElement(_)?_:"".concat(_)),function(){if(u&&u.length){var e=(h?JM()(u,h):u).map((function(e,t){if("none"===e.type)return null;var i=pR({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),s=e.formatter||d||yR,a=e.value,l=e.name,c=a,h=l;if(s&&null!=c&&null!=h){var f=s(a,l,e,t,u);if(Array.isArray(f)){var m=hR(f,2);c=m[0],h=m[1]}else c=f}return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:i},nM(h)?r.createElement("span",{className:"recharts-tooltip-item-name"},h):null,nM(h)?r.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,r.createElement("span",{className:"recharts-tooltip-item-value"},c),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function bR(e){return bR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bR(e)}function xR(e,t,n){return t=function(e){var t=function(e,t){if("object"!=bR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bR(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wR="recharts-tooltip-wrapper",_R={visibility:"hidden"};function NR(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return $P(wR,xR(xR(xR(xR({},"".concat(wR,"-right"),tM(n)&&t&&tM(t.x)&&n>=t.x),"".concat(wR,"-left"),tM(n)&&t&&tM(t.x)&&n<t.x),"".concat(wR,"-bottom"),tM(r)&&t&&tM(t.y)&&r>=t.y),"".concat(wR,"-top"),tM(r)&&t&&tM(t.y)&&r<t.y))}function jR(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,s=e.position,a=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&tM(s[r]))return s[r];var u=n[r]-o-i,d=n[r]+i;return t[r]?a[r]?u:d:a[r]?u<l[r]?Math.max(d,l[r]):Math.max(u,l[r]):d+o>l[r]+c?Math.max(u,l[r]):Math.max(d,l[r])}function SR(e){return SR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SR(e)}function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ER(Object(n),!0).forEach((function(t){PR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MR(r.key),r)}}function TR(e,t,n){return t=AR(t),function(e,t){if(t&&("object"===SR(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,IR()?Reflect.construct(t,n||[],AR(e).constructor):t.apply(e,n))}function IR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IR=function(){return!!e})()}function AR(e){return AR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},AR(e)}function OR(e,t){return OR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},OR(e,t)}function PR(e,t,n){return(t=MR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MR(e){var t=function(e,t){if("object"!=SR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SR(t)?t:t+""}var RR=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return PR(e=TR(this,t,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),PR(e,"handleKeyDown",(function(t){var n,r,i,s;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(s=e.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==i?i:0}})})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OR(e,t)}(t,e),n=t,(i=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,i=t.allowEscapeViewBox,s=t.animationDuration,a=t.animationEasing,o=t.children,l=t.coordinate,c=t.hasPayload,u=t.isAnimationActive,d=t.offset,h=t.position,f=t.reverseDirection,m=t.useTranslate3d,p=t.viewBox,g=t.wrapperStyle,y=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,s=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=jR({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=jR({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):_R,cssClasses:NR({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:p}),v=y.cssClasses,b=y.cssProperties,x=CR(CR({transition:u&&n?"transform ".concat(s,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return r.createElement("div",{tabIndex:-1,className:v,style:x,ref:function(t){e.wrapperNode=t}},o)}}])&&kR(n.prototype,i),s&&kR(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent),DR={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return DR[e]},set:function(e,t){if("string"===typeof e)DR[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){DR[t]=e[t]}))}}},LR=n(977),FR=n.n(LR);function UR(e,t,n){return!0===t?FR()(e,n):fM()(t)?FR()(e,t):e}function BR(e){return BR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BR(e)}function VR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VR(Object(n),!0).forEach((function(t){GR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YR(r.key),r)}}function qR(e,t,n){return t=WR(t),function(e,t){if(t&&("object"===BR(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,HR()?Reflect.construct(t,n||[],WR(e).constructor):t.apply(e,n))}function HR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HR=function(){return!!e})()}function WR(e){return WR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WR(e)}function KR(e,t){return KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},KR(e,t)}function GR(e,t,n){return(t=YR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YR(e){var t=function(e,t){if("object"!=BR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BR(t)?t:t+""}function XR(e){return e.dataKey}var ZR=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qR(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KR(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this,t=this.props,n=t.active,i=t.allowEscapeViewBox,s=t.animationDuration,a=t.animationEasing,o=t.content,l=t.coordinate,c=t.filterNull,u=t.isAnimationActive,d=t.offset,h=t.payload,f=t.payloadUniqBy,m=t.position,p=t.reverseDirection,g=t.useTranslate3d,y=t.viewBox,v=t.wrapperStyle,b=null!==h&&void 0!==h?h:[];c&&b.length&&(b=UR(h.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),f,XR));var x=b.length>0;return r.createElement(RR,{allowEscapeViewBox:i,animationDuration:s,animationEasing:a,isAnimationActive:u,active:n,coordinate:l,hasPayload:x,offset:d,position:m,reverseDirection:p,useTranslate3d:g,viewBox:y,wrapperStyle:v},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):"function"===typeof e?r.createElement(e,t):r.createElement(vR,t)}(o,$R($R({},this.props),{},{payload:b})))}}])&&zR(n.prototype,i),s&&zR(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);GR(ZR,"displayName","Tooltip"),GR(ZR,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!DR.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var QR=n(643),JR=n.n(QR);Math.abs,Math.atan2;const eD=Math.cos,tD=(Math.max,Math.min,Math.sin),nD=Math.sqrt,rD=Math.PI,iD=2*rD;const sD={draw(e,t){const n=nD(t/rD);e.moveTo(n,0),e.arc(0,0,n,0,iD)}},aD={draw(e,t){const n=nD(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},oD=nD(1/3),lD=2*oD,cD={draw(e,t){const n=nD(t/lD),r=n*oD;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},uD={draw(e,t){const n=nD(t),r=-n/2;e.rect(r,r,n,n)}},dD=tD(rD/10)/tD(7*rD/10),hD=tD(iD/10)*dD,fD=-eD(iD/10)*dD,mD={draw(e,t){const n=nD(.8908130915292852*t),r=hD*n,i=fD*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const t=iD*s/5,a=eD(t),o=tD(t);e.lineTo(o*n,-a*n),e.lineTo(a*r-o*i,o*r+a*i)}e.closePath()}},pD=nD(3),gD={draw(e,t){const n=-nD(t/(3*pD));e.moveTo(0,2*n),e.lineTo(-pD*n,-n),e.lineTo(pD*n,-n),e.closePath()}},yD=-.5,vD=nD(3)/2,bD=1/nD(12),xD=3*(bD/2+1),wD={draw(e,t){const n=nD(t/xD),r=n/2,i=n*bD,s=r,a=n*bD+n,o=-s,l=a;e.moveTo(r,i),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(yD*r-vD*i,vD*r+yD*i),e.lineTo(yD*s-vD*a,vD*s+yD*a),e.lineTo(yD*o-vD*l,vD*o+yD*l),e.lineTo(yD*r+vD*i,yD*i-vD*r),e.lineTo(yD*s+vD*a,yD*a-vD*s),e.lineTo(yD*o+vD*l,yD*l-vD*o),e.closePath()}};function _D(e){return function(){return e}}const ND=Math.PI,jD=2*ND,SD=1e-6,ED=jD-SD;function CD(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class kD{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?CD:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return CD;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,s){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+s}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let s=this._x1,a=this._y1,o=n-e,l=r-t,c=s-e,u=a-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>SD)if(Math.abs(u*o-l*c)>SD&&i){let h=n-s,f=r-a,m=o*o+l*l,p=h*h+f*f,g=Math.sqrt(m),y=Math.sqrt(d),v=i*Math.tan((ND-Math.acos((m+d-p)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>SD&&this._append`L${e+b*c},${t+b*u}`,this._append`A${i},${i},0,0,${+(u*h>c*f)},${this._x1=e+x*o},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,s){if(e=+e,t=+t,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),o=n*Math.sin(r),l=e+a,c=t+o,u=1^s,d=s?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>SD||Math.abs(this._y1-c)>SD)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%jD+jD),d>ED?this._append`A${n},${n},0,1,${u},${e-a},${t-o}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>SD&&this._append`A${n},${n},0,${+(d>=ND)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function TD(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new kD(t)}nD(3),nD(3);function ID(e){return ID="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ID(e)}var AD=["type","size","sizeType"];function OD(){return OD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OD.apply(this,arguments)}function PD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PD(Object(n),!0).forEach((function(t){RD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RD(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ID(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ID(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ID(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DD(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var LD={symbolCircle:sD,symbolCross:aD,symbolDiamond:cD,symbolSquare:uD,symbolStar:mD,symbolTriangle:gD,symbolWye:wD},FD=Math.PI/180,UD=function(e){var t=e.type,n=void 0===t?"circle":t,i=e.size,s=void 0===i?64:i,a=e.sizeType,o=void 0===a?"area":a,l=MD(MD({},DD(e,AD)),{},{type:n,size:s,sizeType:o}),c=l.className,u=l.cx,d=l.cy,h=FM(l,!0);return u===+u&&d===+d&&s===+s?r.createElement("path",OD({},h,{className:$P("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:function(){var e=function(e){var t="symbol".concat(JR()(e));return LD[t]||sD}(n),t=function(e,t){let n=null,r=TD(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:_D(e||sD),t="function"===typeof t?t:_D(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:_D(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:_D(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*FD;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(s,o,n));return t()}()})):null};function BD(e){return BD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BD(e)}function VD(){return VD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VD.apply(this,arguments)}function $D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YD(r.key),r)}}function qD(e,t,n){return t=WD(t),function(e,t){if(t&&("object"===BD(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,HD()?Reflect.construct(t,n||[],WD(e).constructor):t.apply(e,n))}function HD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HD=function(){return!!e})()}function WD(e){return WD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WD(e)}function KD(e,t){return KD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},KD(e,t)}function GD(e,t,n){return(t=YD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YD(e){var t=function(e,t){if("object"!=BD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BD(t)?t:t+""}UD.registerSymbol=function(e,t){LD["symbol".concat(JR()(e))]=t};var XD=32,ZD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qD(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KD(e,t)}(t,e),n=t,i=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,i=XD/6,s=XD/3,a=e.inactive?t:e.color;if("plainline"===e.type)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:XD,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(n,"h").concat(s,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*s,",").concat(n,"\n            H").concat(XD,"M").concat(2*s,",").concat(n,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(s,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return r.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(XD,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(e.legendIcon)){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$D(Object(n),!0).forEach((function(t){GD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete o.legendIcon,r.cloneElement(e.legendIcon,o)}return r.createElement(UD,{fill:a,cx:n,cy:n,size:XD,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,i=t.iconSize,s=t.layout,a=t.formatter,o=t.inactiveColor,l={x:0,y:0,width:XD,height:XD},c={display:"horizontal"===s?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var s=t.formatter||a,d=$P(GD(GD({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var h=fM()(t.value)?null:t.value;cM(!fM()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var f=t.inactive?o:t.color;return r.createElement("li",VD({className:d,style:c,key:"legend-item-".concat(n)},jM(e.props,t,n)),r.createElement(sR,{width:i,height:i,viewBox:l,style:u},e.renderIcon(t)),r.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},s?s(h,t,n):h))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,i=e.align;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:"horizontal"===n?i:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}],i&&zD(n.prototype,i),s&&zD(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);function QD(e){return QD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QD(e)}GD(ZD,"displayName","Legend"),GD(ZD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var JD=["ref"];function eL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eL(Object(n),!0).forEach((function(t){oL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lL(r.key),r)}}function rL(e,t,n){return t=sL(t),function(e,t){if(t&&("object"===QD(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,iL()?Reflect.construct(t,n||[],sL(e).constructor):t.apply(e,n))}function iL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iL=function(){return!!e})()}function sL(e){return sL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sL(e)}function aL(e,t){return aL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aL(e,t)}function oL(e,t,n){return(t=lL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lL(e){var t=function(e,t){if("object"!=QD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QD(t)?t:t+""}function cL(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uL(e){return e.value}var dL=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return oL(e=rL(this,t,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aL(e,t)}(t,e),n=t,i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?tL({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,s=r.align,a=r.verticalAlign,o=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),tL(tL({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,i=t.width,s=t.height,a=t.wrapperStyle,o=t.payloadUniqBy,l=t.payload,c=tL(tL({position:"absolute",width:i||"auto",height:s||"auto"},this.getDefaultPosition(a)),a);return r.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(r.isValidElement(e))return r.cloneElement(e,t);if("function"===typeof e)return r.createElement(e,t);t.ref;var n=cL(t,JD);return r.createElement(ZD,n)}(n,tL(tL({},this.props),{},{payload:UR(l,o,uL)})))}}],s=[{key:"getWithHeight",value:function(e,t){var n=tL(tL({},this.defaultProps),e.props).layout;return"vertical"===n&&tM(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],i&&nL(n.prototype,i),s&&nL(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);function hL(){return hL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hL.apply(this,arguments)}oL(dL,"displayName","Legend"),oL(dL,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var fL=function(e){var t=e.cx,n=e.cy,i=e.r,s=e.className,a=$P("recharts-dot",s);return t===+t&&n===+n&&i===+i?r.createElement("circle",hL({},FM(e,!1),NM(e),{className:a,cx:t,cy:n,r:i})):null},mL=n(5173),pL=n.n(mL),gL=Object.getOwnPropertyNames,yL=Object.getOwnPropertySymbols,vL=Object.prototype.hasOwnProperty;function bL(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function xL(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var i=r.cache,s=i.get(t),a=i.get(n);if(s&&a)return s===n&&a===t;i.set(t,n),i.set(n,t);var o=e(t,n,r);return i.delete(t),i.delete(n),o}}function wL(e){return gL(e).concat(yL(e))}var _L=Object.hasOwn||function(e,t){return vL.call(e,t)};function NL(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var jL=Object.getOwnPropertyDescriptor,SL=Object.keys;function EL(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function CL(e,t){return NL(e.getTime(),t.getTime())}function kL(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function TL(e,t){return e===t}function IL(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,s,a=new Array(r),o=e.entries(),l=0;(i=o.next())&&!i.done;){for(var c=t.entries(),u=!1,d=0;(s=c.next())&&!s.done;)if(a[d])d++;else{var h=i.value,f=s.value;if(n.equals(h[0],f[0],l,d,e,t,n)&&n.equals(h[1],f[1],h[0],f[0],e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1;l++}return!0}var AL=NL;function OL(e,t,n){var r=SL(e),i=r.length;if(SL(t).length!==i)return!1;for(;i-- >0;)if(!UL(e,t,n,r[i]))return!1;return!0}function PL(e,t,n){var r,i,s,a=wL(e),o=a.length;if(wL(t).length!==o)return!1;for(;o-- >0;){if(!UL(e,t,n,r=a[o]))return!1;if(i=jL(e,r),s=jL(t,r),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable))return!1}return!0}function ML(e,t){return NL(e.valueOf(),t.valueOf())}function RL(e,t){return e.source===t.source&&e.flags===t.flags}function DL(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,s,a=new Array(r),o=e.values();(i=o.next())&&!i.done;){for(var l=t.values(),c=!1,u=0;(s=l.next())&&!s.done;){if(!a[u]&&n.equals(i.value,s.value,i.value,s.value,e,t,n)){c=a[u]=!0;break}u++}if(!c)return!1}return!0}function LL(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function FL(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function UL(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||_L(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var BL=Array.isArray,VL="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,$L=Object.assign,zL=Object.prototype.toString.call.bind(Object.prototype.toString);var qL=HL();HL({strict:!0}),HL({circular:!0}),HL({circular:!0,strict:!0}),HL({createInternalComparator:function(){return NL}}),HL({strict:!0,createInternalComparator:function(){return NL}}),HL({circular:!0,createInternalComparator:function(){return NL}}),HL({circular:!0,createInternalComparator:function(){return NL},strict:!0});function HL(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,i=e.createInternalComparator,s=e.createState,a=e.strict,o=void 0!==a&&a,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?PL:EL,areDatesEqual:CL,areErrorsEqual:kL,areFunctionsEqual:TL,areMapsEqual:r?bL(IL,PL):IL,areNumbersEqual:AL,areObjectsEqual:r?PL:OL,arePrimitiveWrappersEqual:ML,areRegExpsEqual:RL,areSetsEqual:r?bL(DL,PL):DL,areTypedArraysEqual:r?PL:LL,areUrlsEqual:FL};if(n&&(i=$L({},i,n(i))),t){var s=xL(i.areArraysEqual),a=xL(i.areMapsEqual),o=xL(i.areObjectsEqual),l=xL(i.areSetsEqual);i=$L({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,s=e.areMapsEqual,a=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,f,m){if(e===f)return!0;if(null==e||null==f)return!1;var p=typeof e;if(p!==typeof f)return!1;if("object"!==p)return"number"===p?a(e,f,m):"function"===p&&i(e,f,m);var g=e.constructor;if(g!==f.constructor)return!1;if(g===Object)return o(e,f,m);if(BL(e))return t(e,f,m);if(null!=VL&&VL(e))return d(e,f,m);if(g===Date)return n(e,f,m);if(g===RegExp)return c(e,f,m);if(g===Map)return s(e,f,m);if(g===Set)return u(e,f,m);var y=zL(e);return"[object Date]"===y?n(e,f,m):"[object RegExp]"===y?c(e,f,m):"[object Map]"===y?s(e,f,m):"[object Set]"===y?u(e,f,m):"[object Object]"===y?"function"!==typeof e.then&&"function"!==typeof f.then&&o(e,f,m):"[object URL]"===y?h(e,f,m):"[object Error]"===y?r(e,f,m):"[object Arguments]"===y?o(e,f,m):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&l(e,f,m)}}(l),u=i?i(c):(t=c,function(e,n,r,i,s,a,o){return t(e,n,o)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,s=e.strict;if(r)return function(e,a){var o=r(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,u=o.meta;return n(e,a,{cache:c,equals:i,meta:u,strict:s})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(e,t){return n(e,t,a)}}({circular:r,comparator:c,createState:s,equals:u,strict:o})}function WL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)}))}function KL(e){return KL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KL(e)}function GL(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return YL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YL(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XL(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=GL(r),s=i[0],a=i.slice(1);return"number"===typeof s?void WL(n.bind(null,a),s):(n(s),void WL(n.bind(null,a)))}"object"===KL(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function ZL(e){return ZL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZL(e)}function QL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QL(Object(n),!0).forEach((function(t){eF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ZL(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ZL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ZL(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tF=function(e){return e},nF=function(e,t){return Object.keys(t).reduce((function(n,r){return JL(JL({},n),{},eF({},r,e(r,t[r])))}),{})},rF=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function iF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||aF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sF(e){return function(e){if(Array.isArray(e))return oF(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aF(e,t){if(e){if("string"===typeof e)return oF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oF(e,t):void 0}}function oF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lF=1e-4,cF=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},uF=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},dF=function(e,t){return function(n){var r=cF(e,t);return uF(r,n)}},hF=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],s=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,s=1,a=1;break;case"ease":r=.25,i=.1,s=.25,a=1;break;case"ease-in":r=.42,i=0,s=1,a=1;break;case"ease-out":r=.42,i=0,s=.58,a=1;break;case"ease-in-out":r=0,i=0,s=.58,a=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=o[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=iF(l,4);r=c[0],i=c[1],s=c[2],a=c[3]}}[r,s,i,a].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var u,d,h=dF(r,s),f=dF(i,a),m=(u=r,d=s,function(e){var t=cF(u,d),n=[].concat(sF(t.map((function(e,t){return e*t})).slice(1)),[0]);return uF(n,e)}),p=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=h(n)-t,s=m(n);if(Math.abs(i-t)<lF||s<lF)return f(n);n=p(n-i/s)}return f(n)};return g.isStepper=!1,g},fF=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hF(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,s=e.dt,a=void 0===s?17:s,o=function(e,t,r){var s=r+(-(e-t)*n-r*i)*a/1e3,o=r*a/1e3+e;return Math.abs(o-t)<lF&&Math.abs(s)<lF?[t,0]:[o,s]};return o.isStepper=!0,o.dt=a,o}();default:if("cubic-bezier"===r.split("(")[0])return hF(r)}return"function"===typeof r?r:null};function mF(e){return mF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mF(e)}function pF(e){return function(e){if(Array.isArray(e))return wF(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gF(Object(n),!0).forEach((function(t){vF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==mF(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mF(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||xF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xF(e,t){if(e){if("string"===typeof e)return wF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wF(e,t):void 0}}function wF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _F=function(e,t,n){return e+(t-e)*n},NF=function(e){return e.from!==e.to},jF=function e(t,n,r){var i=nF((function(e,n){if(NF(n)){var r=bF(t(n.from,n.to,n.velocity),2),i=r[0],s=r[1];return yF(yF({},n),{},{from:i,velocity:s})}return n}),n);return r<1?nF((function(e,t){return NF(t)?yF(yF({},t),{},{velocity:_F(t.velocity,i[e].velocity,r),from:_F(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};const SF=function(e,t,n,r,i){var s,a,o,l,c=(s=e,a=t,[Object.keys(s),Object.keys(a)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),u=c.reduce((function(n,r){return yF(yF({},n),{},vF({},r,[e[r],t[r]]))}),{}),d=c.reduce((function(n,r){return yF(yF({},n),{},vF({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),h=-1,f=function(){return null};return f=n.isStepper?function(r){o||(o=r);var s=(r-o)/n.dt;d=jF(n,d,s),i(yF(yF(yF({},e),t),nF((function(e,t){return t.from}),d))),o=r,Object.values(d).filter(NF).length&&(h=requestAnimationFrame(f))}:function(s){l||(l=s);var a=(s-l)/r,o=nF((function(e,t){return _F.apply(void 0,pF(t).concat([n(a)]))}),u);if(i(yF(yF(yF({},e),t),o)),a<1)h=requestAnimationFrame(f);else{var c=nF((function(e,t){return _F.apply(void 0,pF(t).concat([n(1)]))}),u);i(yF(yF(yF({},e),t),c))}},function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(h)}}};function EF(e){return EF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EF(e)}var CF=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function kF(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function TF(e){return function(e){if(Array.isArray(e))return IF(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return IF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IF(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AF(Object(n),!0).forEach((function(t){PF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PF(e,t,n){return(t=RF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RF(r.key),r)}}function RF(e){var t=function(e,t){if("object"!==EF(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==EF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===EF(t)?t:String(t)}function DF(e,t){return DF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DF(e,t)}function LF(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(S2){return!1}}();return function(){var n,r=BF(e);if(t){var i=BF(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return FF(this,n)}}function FF(e,t){if(t&&("object"===EF(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UF(e)}function UF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BF(e){return BF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BF(e)}var VF=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DF(e,t)}(a,e);var t,n,i,s=LF(a);function a(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=(n=s.call(this,e,t)).props,i=r.isActive,o=r.attributeName,l=r.from,c=r.to,u=r.steps,d=r.children,h=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(UF(n)),n.changeStyle=n.changeStyle.bind(UF(n)),!i||h<=0)return n.state={style:{}},"function"===typeof d&&(n.state={style:c}),FF(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof d)return n.state={style:l},FF(n);n.state={style:o?PF({},o,l):l}}else n.state={style:{}};return n}return t=a,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,s=t.shouldReAnimate,a=t.to,o=t.from,l=this.state.style;if(r)if(n){if(!(qL(e.to,a)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||s?o:e.to;if(this.state&&l){var d={style:i?PF({},i,u):u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(d)}this.runAnimation(OF(OF({},this.props),{},{from:u,begin:0}))}}else{var h={style:i?PF({},i,a):a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,s=e.easing,a=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=SF(n,r,fF(s),i,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=c()},i,o])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,s=n[0],a=s.style,o=s.duration,l=void 0===o?0:o;return this.manager.start([i].concat(TF(n.reduce((function(e,r,i){if(0===i)return e;var s=r.duration,a=r.easing,o=void 0===a?"ease":a,l=r.style,c=r.properties,u=r.onAnimationEnd,d=i>0?n[i-1]:r,h=c||Object.keys(l);if("function"===typeof o||"spring"===o)return[].concat(TF(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:s,easing:o}),s]);var f=rF(h,s,o),m=OF(OF(OF({},d.style),l),{},{transition:f});return[].concat(TF(e),[m,s,u]).filter(tF)}),[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=XL());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,s=e.easing,a=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof s&&"function"!==typeof c&&"spring"!==s)if(l.length>1)this.runStepAnimation(e);else{var d=r?PF({},r,i):i,h=rF(Object.keys(d),n,s);u.start([a,t,OF(OF({},d),{},{transition:h}),n,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration),i=(e.attributeName,e.easing,e.isActive),s=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,kF(e,CF)),a=r.Children.count(t),o=this.state.style;if("function"===typeof t)return t(o);if(!i||0===a||n<=0)return t;var l=function(e){var t=e.props,n=t.style,i=void 0===n?{}:n,a=t.className;return(0,r.cloneElement)(e,OF(OF({},s),{},{style:OF(OF({},i),o),className:a}))};return 1===a?l(r.Children.only(t)):r.createElement("div",null,r.Children.map(t,(function(e){return l(e)})))}}],n&&MF(t.prototype,n),i&&MF(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.PureComponent);VF.displayName="Animate",VF.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},VF.propTypes={from:pL().oneOfType([pL().object,pL().string]),to:pL().oneOfType([pL().object,pL().string]),attributeName:pL().string,duration:pL().number,begin:pL().number,easing:pL().oneOfType([pL().string,pL().func]),steps:pL().arrayOf(pL().shape({duration:pL().number.isRequired,style:pL().object.isRequired,easing:pL().oneOfType([pL().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pL().func]),properties:pL().arrayOf("string"),onAnimationEnd:pL().func})),children:pL().oneOfType([pL().node,pL().func]),isActive:pL().bool,canBegin:pL().bool,onAnimationEnd:pL().func,shouldReAnimate:pL().bool,onAnimationStart:pL().func,onAnimationReStart:pL().func};const $F=VF;function zF(e){return zF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zF(e)}function qF(){return qF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qF.apply(this,arguments)}function HF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return WF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KF(Object(n),!0).forEach((function(t){YF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YF(e,t,n){return t=function(e){var t=function(e,t){if("object"!=zF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zF(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XF=function(e,t,n,r,i){var s,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>a?a:i[d];s="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(s+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),s+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(s+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*u[1])),s+="L ".concat(e+n,",").concat(t+r-o*u[2]),u[2]>0&&(s+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),s+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(s+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*u[3])),s+="Z"}else if(a>0&&i===+i&&i>0){var h=Math.min(a,i);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*h,"\n            L ").concat(e+n,",").concat(t+r-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return s},ZF=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,s=t.y,a=t.width,o=t.height;if(Math.abs(a)>0&&Math.abs(o)>0){var l=Math.min(i,i+a),c=Math.max(i,i+a),u=Math.min(s,s+o),d=Math.max(s,s+o);return n>=l&&n<=c&&r>=u&&r<=d}return!1},QF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JF=function(e){var t=GF(GF({},QF),e),n=(0,r.useRef)(),i=HF((0,r.useState)(-1),2),s=i[0],a=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}}),[]);var o=t.x,l=t.y,c=t.width,u=t.height,d=t.radius,h=t.className,f=t.animationEasing,m=t.animationDuration,p=t.animationBegin,g=t.isAnimationActive,y=t.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||u!==+u||0===c||0===u)return null;var v=$P("recharts-rectangle",h);return y?r.createElement($F,{canBegin:s>0,from:{width:c,height:u,x:o,y:l},to:{width:c,height:u,x:o,y:l},duration:m,animationEasing:f,isActive:y},(function(e){var i=e.width,a=e.height,o=e.x,l=e.y;return r.createElement($F,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:g,easing:f},r.createElement("path",qF({},FM(t,!0),{className:v,d:XF(o,l,i,a,d),ref:n})))})):r.createElement("path",qF({},FM(t,!0),{className:v,d:XF(o,l,c,u,d)}))};function eU(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function tU(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class nU extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(rU(this,e))}has(e){return super.has(rU(this,e))}set(e,t){return super.set(iU(this,e),t)}delete(e){return super.delete(sU(this,e))}}Set;function rU(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function iU(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function sU(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function aU(e){return null!==e&&"object"===typeof e?e.valueOf():e}const oU=Symbol("implicit");function lU(){var e=new nU,t=[],n=[],r=oU;function i(i){let s=e.get(i);if(void 0===s){if(r!==oU)return r;e.set(i,s=t.push(i)-1)}return n[s%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new nU;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return lU(t,n).unknown(r)},eU.apply(i,arguments),i}function cU(){var e,t,n=lU().unknown(void 0),r=n.domain,i=n.range,s=0,a=1,o=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=a<s,h=d?a:s,f=d?s:a;e=(f-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(f-h-e*(n-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(i);++r<i;)s[r]=e+r*n;return s}(n).map((function(t){return h+e*t}));return i(d?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([s,a]=e,s=+s,a=+a,d()):[s,a]},n.rangeRound=function(e){return[s,a]=e,s=+s,a=+a,o=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,d()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return cU(r(),[s,a]).round(o).paddingInner(l).paddingOuter(c).align(u)},eU.apply(d(),arguments)}function uU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return uU(t())},e}function dU(){return uU(cU.apply(null,arguments).paddingInner(1))}function hU(e){return hU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hU(e)}function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fU(Object(n),!0).forEach((function(t){pU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pU(e,t,n){return t=function(e){var t=function(e,t){if("object"!=hU(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hU(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gU={widthCache:{},cacheCount:0},yU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vU="recharts_measurement_span";var bU=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||DR.isSsr)return{width:0,height:0};var n=function(e){var t=mU({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(gU.widthCache[r])return gU.widthCache[r];try{var i=document.getElementById(vU);i||((i=document.createElement("span")).setAttribute("id",vU),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=mU(mU({},yU),n);Object.assign(i.style,s),i.textContent="".concat(e);var a=i.getBoundingClientRect(),o={width:a.width,height:a.height};return gU.widthCache[r]=o,++gU.cacheCount>2e3&&(gU.cacheCount=0,gU.widthCache={}),o}catch(S2){return{width:0,height:0}}};function xU(e){return xU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xU(e)}function wU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function NU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jU(r.key),r)}}function jU(e){var t=function(e,t){if("object"!=xU(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xU(t)?t:t+""}var SU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,EU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,kU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,TU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},IU=Object.keys(TU),AU="NaN";var OU=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||CU.test(n)||(this.num=NaN,this.unit=""),IU.includes(n)&&(this.num=function(e,t){return e*TU[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=wU(null!==(n=kU.exec(t))&&void 0!==n?n:[],3),i=r[1],s=r[2];return new e(parseFloat(i),null!==s&&void 0!==s?s:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&NU(t.prototype,n),r&&NU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function PU(e){if(e.includes(AU))return AU;for(var t=e;t.includes("*")||t.includes("/");){var n,r=wU(null!==(n=SU.exec(t))&&void 0!==n?n:[],4),i=r[1],s=r[2],a=r[3],o=OU.parse(null!==i&&void 0!==i?i:""),l=OU.parse(null!==a&&void 0!==a?a:""),c="*"===s?o.multiply(l):o.divide(l);if(c.isNaN())return AU;t=t.replace(SU,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=wU(null!==(u=EU.exec(t))&&void 0!==u?u:[],4),h=d[1],f=d[2],m=d[3],p=OU.parse(null!==h&&void 0!==h?h:""),g=OU.parse(null!==m&&void 0!==m?m:""),y="+"===f?p.add(g):p.subtract(g);if(y.isNaN())return AU;t=t.replace(EU,y.toString())}return t}var MU=/\(([^()]*)\)/;function RU(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=wU(MU.exec(t),2)[1];t=t.replace(MU,PU(n))}return t}(t),t=PU(t)}function DU(e){var t=function(e){try{return RU(e)}catch(S2){return AU}}(e.slice(5,-1));return t===AU?"":t}var LU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],FU=["dx","dy","angle","className","breakAll"];function UU(){return UU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UU.apply(this,arguments)}function BU(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zU=/[ \f\n\r\t\v\u2028\u2029]+/,qU=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return dM()(t)||(i=n?t.toString().split(""):t.toString().split(zU)),{wordsWithComputedWidth:i.map((function(e){return{word:e,width:bU(e,r).width}})),spaceWidth:n?0:bU("\xa0",r).width}}catch(S2){return null}},HU=function(e){return[{words:dM()(e)?[]:e.toString().split(zU)}]},WU=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,s=e.breakAll,a=e.maxLines;if((t||n)&&!DR.isSsr){var o=qU({breakAll:s,children:r,style:i});return o?function(e,t,n,r,i){var s=e.maxLines,a=e.children,o=e.style,l=e.breakAll,c=tM(s),u=a,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var s=t.word,a=t.width,o=e[e.length-1];if(o&&(null==r||i||o.width+a+n<Number(r)))o.words.push(s),o.width+=a+n;else{var l={words:[s],width:a};e.push(l)}return e}),[])},h=d(t);if(!c)return h;for(var f,m=function(e){var t=u.slice(0,e),n=qU({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,i=d(n),a=i.length>s||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>Number(r);return[a,i]},p=0,g=u.length-1,y=0;p<=g&&y<=u.length-1;){var v=Math.floor((p+g)/2),b=VU(m(v-1),2),x=b[0],w=b[1],_=VU(m(v),1)[0];if(x||_||(p=v+1),x&&_&&(g=v-1),!x&&_){f=w;break}y++}return f||h}({breakAll:s,children:r,maxLines:a,style:i},o.wordsWithComputedWidth,o.spaceWidth,t,n):HU(r)}return HU(r)},KU="#808080",GU=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,s=void 0===i?0:i,a=e.lineHeight,o=void 0===a?"1em":a,l=e.capHeight,c=void 0===l?"0.71em":l,u=e.scaleToFit,d=void 0!==u&&u,h=e.textAnchor,f=void 0===h?"start":h,m=e.verticalAnchor,p=void 0===m?"end":m,g=e.fill,y=void 0===g?KU:g,v=BU(e,LU),b=(0,r.useMemo)((function(){return WU({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})}),[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),x=v.dx,w=v.dy,_=v.angle,N=v.className,j=v.breakAll,S=BU(v,FU);if(!nM(n)||!nM(s))return null;var E,C=n+(tM(x)?x:0),k=s+(tM(w)?w:0);switch(p){case"start":E=DU("calc(".concat(c,")"));break;case"middle":E=DU("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:E=DU("calc(".concat(b.length-1," * -").concat(o,")"))}var T=[];if(d){var I=b[0].width,A=v.width;T.push("scale(".concat((tM(A)?A/I:1)/I,")"))}return _&&T.push("rotate(".concat(_,", ").concat(C,", ").concat(k,")")),T.length&&(S.transform=T.join(" ")),r.createElement("text",UU({},FM(S,!0),{x:C,y:k,className:$P("recharts-text",N),textAnchor:f,fill:y.includes("url")?KU:y}),b.map((function(e,t){var n=e.words.join(j?"":" ");return r.createElement("tspan",{x:C,dy:0===t?E:o,key:"".concat(n,"-").concat(t)},n)})))};const YU=Math.sqrt(50),XU=Math.sqrt(10),ZU=Math.sqrt(2);function QU(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=YU?10:s>=XU?5:s>=ZU?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?QU(e,t,2*n):[o,l,c]}function JU(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,s,a]=r?QU(t,e,n):QU(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function eB(e,t,n){return QU(e=+e,t=+t,n=+n)[2]}function tB(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?eB(t,e,n):eB(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function nB(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rB(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iB(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<s){if(0!==t(r,r))return s;do{const t=i+s>>>1;n(e[t],r)<0?i=t+1:s=t}while(i<s)}return i}return 2!==e.length?(t=nB,n=(t,n)=>nB(e(t),n),r=(t,n)=>e(t)-n):(t=e===nB||e===rB?e:sB,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>n&&r(e[s-1],t)>-r(e[s],t)?s-1:s},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<s){if(0!==t(r,r))return s;do{const t=i+s>>>1;n(e[t],r)<=0?i=t+1:s=t}while(i<s)}return i}}}function sB(){return 0}function aB(e){return null===e?NaN:+e}const oB=iB(nB),lB=oB.right,cB=(oB.left,iB(aB).center,lB);function uB(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function dB(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hB(){}var fB=.7,mB=1/fB,pB="\\s*([+-]?\\d+)\\s*",gB="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yB="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vB=/^#([0-9a-f]{3,8})$/,bB=new RegExp(`^rgb\\(${pB},${pB},${pB}\\)$`),xB=new RegExp(`^rgb\\(${yB},${yB},${yB}\\)$`),wB=new RegExp(`^rgba\\(${pB},${pB},${pB},${gB}\\)$`),_B=new RegExp(`^rgba\\(${yB},${yB},${yB},${gB}\\)$`),NB=new RegExp(`^hsl\\(${gB},${yB},${yB}\\)$`),jB=new RegExp(`^hsla\\(${gB},${yB},${yB},${gB}\\)$`),SB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function EB(){return this.rgb().formatHex()}function CB(){return this.rgb().formatRgb()}function kB(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vB.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?TB(t):3===n?new OB(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?IB(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?IB(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=bB.exec(e))?new OB(t[1],t[2],t[3],1):(t=xB.exec(e))?new OB(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=wB.exec(e))?IB(t[1],t[2],t[3],t[4]):(t=_B.exec(e))?IB(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=NB.exec(e))?FB(t[1],t[2]/100,t[3]/100,1):(t=jB.exec(e))?FB(t[1],t[2]/100,t[3]/100,t[4]):SB.hasOwnProperty(e)?TB(SB[e]):"transparent"===e?new OB(NaN,NaN,NaN,0):null}function TB(e){return new OB(e>>16&255,e>>8&255,255&e,1)}function IB(e,t,n,r){return r<=0&&(e=t=n=NaN),new OB(e,t,n,r)}function AB(e,t,n,r){return 1===arguments.length?function(e){return e instanceof hB||(e=kB(e)),e?new OB((e=e.rgb()).r,e.g,e.b,e.opacity):new OB}(e):new OB(e,t,n,null==r?1:r)}function OB(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function PB(){return`#${LB(this.r)}${LB(this.g)}${LB(this.b)}`}function MB(){const e=RB(this.opacity);return`${1===e?"rgb(":"rgba("}${DB(this.r)}, ${DB(this.g)}, ${DB(this.b)}${1===e?")":`, ${e})`}`}function RB(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function DB(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function LB(e){return((e=DB(e))<16?"0":"")+e.toString(16)}function FB(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new BB(e,t,n,r)}function UB(e){if(e instanceof BB)return new BB(e.h,e.s,e.l,e.opacity);if(e instanceof hB||(e=kB(e)),!e)return new BB;if(e instanceof BB)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(a=t===s?(n-r)/o+6*(n<r):n===s?(r-t)/o+2:(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new BB(a,o,l,e.opacity)}function BB(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function VB(e){return(e=(e||0)%360)<0?e+360:e}function $B(e){return Math.max(0,Math.min(1,e||0))}function zB(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function qB(e,t,n,r,i){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*r+a*i)/6}uB(hB,kB,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:EB,formatHex:EB,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return UB(this).formatHsl()},formatRgb:CB,toString:CB}),uB(OB,AB,dB(hB,{brighter(e){return e=null==e?mB:Math.pow(mB,e),new OB(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?fB:Math.pow(fB,e),new OB(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new OB(DB(this.r),DB(this.g),DB(this.b),RB(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PB,formatHex:PB,formatHex8:function(){return`#${LB(this.r)}${LB(this.g)}${LB(this.b)}${LB(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:MB,toString:MB})),uB(BB,(function(e,t,n,r){return 1===arguments.length?UB(e):new BB(e,t,n,null==r?1:r)}),dB(hB,{brighter(e){return e=null==e?mB:Math.pow(mB,e),new BB(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?fB:Math.pow(fB,e),new BB(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new OB(zB(e>=240?e-240:e+120,i,r),zB(e,i,r),zB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new BB(VB(this.h),$B(this.s),$B(this.l),RB(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=RB(this.opacity);return`${1===e?"hsl(":"hsla("}${VB(this.h)}, ${100*$B(this.s)}%, ${100*$B(this.l)}%${1===e?")":`, ${e})`}`}}));const HB=e=>()=>e;function WB(e,t){return function(n){return e+n*t}}function KB(e){return 1===(e=+e)?GB:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):HB(isNaN(t)?n:t)}}function GB(e,t){var n=t-e;return n?WB(e,n):HB(isNaN(e)?t:e)}const YB=function e(t){var n=KB(t);function r(e,t){var r=n((e=AB(e)).r,(t=AB(t)).r),i=n(e.g,t.g),s=n(e.b,t.b),a=GB(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function XB(e){return function(t){var n,r,i=t.length,s=new Array(i),a=new Array(i),o=new Array(i);for(n=0;n<i;++n)r=AB(t[n]),s[n]=r.r||0,a[n]=r.g||0,o[n]=r.b||0;return s=e(s),a=e(a),o=e(o),r.opacity=1,function(e){return r.r=s(e),r.g=a(e),r.b=o(e),r+""}}}XB((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],a=r>0?e[r-1]:2*i-s,o=r<t-1?e[r+2]:2*s-i;return qB((n-r/t)*t,a,i,s,o)}})),XB((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],a=e[(r+1)%t],o=e[(r+2)%t];return qB((n-r/t)*t,i,s,a,o)}}));function ZB(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,s=new Array(i),a=new Array(r);for(n=0;n<i;++n)s[n]=sV(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=s[n](e);return a}}function QB(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function JB(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function eV(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=sV(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var tV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nV=new RegExp(tV.source,"g");function rV(e,t){var n,r,i,s=tV.lastIndex=nV.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(n=tV.exec(e))&&(r=nV.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),o[a]?o[a]+=i:o[++a]=i),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:JB(n,r)})),s=nV.lastIndex;return s<t.length&&(i=t.slice(s),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function iV(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(s){for(n=0;n<r;++n)i[n]=e[n]*(1-s)+t[n]*s;return i}}function sV(e,t){var n,r=typeof t;return null==t||"boolean"===r?HB(t):("number"===r?JB:"string"===r?(n=kB(t))?(t=n,YB):rV:t instanceof kB?YB:t instanceof Date?QB:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?iV:Array.isArray(t)?ZB:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?eV:JB)(e,t)}function aV(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function oV(e){return+e}var lV=[0,1];function cV(e){return e}function uV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function dV(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=uV(i,r),s=n(a,s)):(r=uV(r,i),s=n(s,a)),function(e){return s(r(e))}}function hV(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=uV(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(t){var n=cB(e,t,1,r)-1;return s[n](i[n](t))}}function fV(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mV(){var e,t,n,r,i,s,a=lV,o=lV,l=sV,c=cV;function u(){var e=Math.min(a.length,o.length);return c!==cV&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?hV:dV,i=s=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),o,l)))(e(c(t)))}return d.invert=function(n){return c(t((s||(s=r(o,a.map(e),JB)))(n)))},d.domain=function(e){return arguments.length?(a=Array.from(e,oV),u()):a.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=aV,u()},d.clamp=function(e){return arguments.length?(c=!!e||cV,u()):c!==cV},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function pV(){return mV()(cV,cV)}var gV,yV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vV(e){if(!(t=yV.exec(e)))throw new Error("invalid format: "+e);var t;return new bV({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function bV(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function xV(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function wV(e){return(e=xV(Math.abs(e)))?e[1]:NaN}function _V(e,t){var n=xV(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}vV.prototype=bV.prototype,bV.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const NV={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_V(100*e,t),r:_V,s:function(e,t){var n=xV(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(gV=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+xV(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jV(e){return e}var SV,EV,CV,kV=Array.prototype.map,TV=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function IV(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?jV:(t=kV.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(e.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?jV:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(kV.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=vV(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,m=e.width,p=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(p=!0,v="g"):NV[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===h?s:/[%p]/.test(v)?l:"",w=NV[v],_=/[defgprs%]/.test(v);function N(e){var i,s,l,h=b,N=x;if("c"===v)N=w(e)+N,e="";else{var j=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),j&&0===+e&&"+"!==d&&(j=!1),h=(j?"("===d?d:c:"-"===d||"("===d?"":d)+h,N=("s"===v?TV[8+gV/3]:"")+N+(j&&"("===d?")":""),_)for(i=-1,s=e.length;++i<s;)if(48>(l=e.charCodeAt(i))||l>57){N=(46===l?a+e.slice(i+1):e.slice(i))+N,e=e.slice(0,i);break}}p&&!f&&(e=r(e,1/0));var S=h.length+e.length+N.length,E=S<m?new Array(m-S+1).join(t):"";switch(p&&f&&(e=r(E+e,E.length?m-N.length:1/0),E=""),n){case"<":e=h+e+N+E;break;case"=":e=h+E+e+N;break;case"^":e=E.slice(0,S=E.length>>1)+h+e+N+E.slice(S);break;default:e=E+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:d,formatPrefix:function(e,t){var n=d(((e=vV(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(wV(t)/3))),i=Math.pow(10,-r),s=TV[8+r/3];return function(e){return n(i*e)+s}}}}function AV(e,t,n,r){var i,s=tB(e,t,n);switch((r=vV(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(wV(t)/3)))-wV(Math.abs(e)))}(s,a))||(r.precision=i),CV(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,wV(t)-wV(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-wV(Math.abs(e)))}(s))||(r.precision=i-2*("%"===r.type))}return EV(r)}function OV(e){var t=e.domain;return e.ticks=function(e){var n=t();return JU(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return AV(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,s=t(),a=0,o=s.length-1,l=s[a],c=s[o],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=o,o=i);u-- >0;){if((i=eB(l,c,n))===r)return s[a]=l,s[o]=c,t(s);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function PV(){var e=pV();return e.copy=function(){return fV(e,PV())},eU.apply(e,arguments),OV(e)}function MV(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,oV),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return MV(e).unknown(t)},e=arguments.length?Array.from(e,oV):[0,1],OV(n)}function RV(e,t){var n,r=0,i=(e=e.slice()).length-1,s=e[r],a=e[i];return a<s&&(n=r,r=i,i=n,n=s,s=a,a=n),e[r]=t.floor(s),e[i]=t.ceil(a),e}function DV(e){return Math.log(e)}function LV(e){return Math.exp(e)}function FV(e){return-Math.log(-e)}function UV(e){return-Math.exp(-e)}function BV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function VV(e){return(t,n)=>-e(-t,n)}function $V(e){const t=e(DV,LV),n=t.domain;let r,i,s=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),i=function(e){return 10===e?BV:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),n()[0]<0?(r=VV(r),i=VV(i),e(FV,UV)):e(DV,LV),t}return t.base=function(e){return arguments.length?(s=+e,a()):s},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],o=t[t.length-1];const l=o<a;l&&([a,o]=[o,a]);let c,u,d=r(a),h=r(o);const f=null==e?10:+e;let m=[];if(!(s%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),a>0){for(;d<=h;++d)for(c=1;c<s;++c)if(u=d<0?c/i(-d):c*i(d),!(u<a)){if(u>o)break;m.push(u)}}else for(;d<=h;++d)for(c=s-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<a)){if(u>o)break;m.push(u)}2*m.length<f&&(m=JU(a,o,f))}else m=JU(d,h,Math.min(h-d,f)).map(i);return l?m.reverse():m},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!==typeof n&&(s%1||null!=(n=vV(n)).precision||(n.trim=!0),n=EV(n)),e===1/0)return n;const a=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*s<s-.5&&(t*=s),t<=a?n(e):""}},t.nice=()=>n(RV(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function zV(){const e=$V(mV()).domain([1,10]);return e.copy=()=>fV(e,zV()).base(e.base()),eU.apply(e,arguments),e}function qV(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function HV(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function WV(e){var t=1,n=e(qV(t),HV(t));return n.constant=function(n){return arguments.length?e(qV(t=+n),HV(t)):t},OV(n)}function KV(){var e=WV(mV());return e.copy=function(){return fV(e,KV()).constant(e.constant())},eU.apply(e,arguments)}function GV(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function XV(e){return e<0?-e*e:e*e}function ZV(e){var t=e(cV,cV),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(cV,cV):.5===n?e(YV,XV):e(GV(n),GV(1/n)):n},OV(t)}function QV(){var e=ZV(mV());return e.copy=function(){return fV(e,QV()).exponent(e.exponent())},eU.apply(e,arguments),e}function JV(){return QV.apply(null,arguments).exponent(.5)}function e$(e){return Math.sign(e)*e*e}function t$(){var e,t=pV(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(e$(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,oV)).map(e$)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return t$(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},eU.apply(i,arguments),OV(i)}function n$(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function r$(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function i$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nB;if(e===nB)return s$;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function s$(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function a$(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?s$:i$(i);r>n;){if(r-n>600){const s=r-n+1,a=t-n+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);a$(e,t,Math.max(n,Math.floor(t-a*l/s+c)),Math.min(r,Math.floor(t+(s-a)*l/s+c)),i)}const s=e[t];let a=n,o=r;for(o$(e,n,t),i(e[r],s)>0&&o$(e,n,r);a<o;){for(o$(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}0===i(e[n],s)?o$(e,n,o):(++o,o$(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function o$(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function l$(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return r$(e);if(t>=1)return n$(e);var r,i=(r-1)*t,s=Math.floor(i),a=n$(a$(e,s).subarray(0,s+1));return a+(r$(e.subarray(s+1))-a)*(i-s)}}function c$(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aB;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e);return a+(+n(e[s+1],s+1,e)-a)*(i-s)}}function u$(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=c$(t,e/i);return s}function s(t){return null==t||isNaN(t=+t)?e:n[cB(r,t)]}return s.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(nB),i()},s.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return r.slice()},s.copy=function(){return u$().domain(t).range(n).unknown(e)},eU.apply(s,arguments)}function d$(){var e,t=0,n=1,r=1,i=[.5],s=[0,1];function a(t){return null!=t&&t<=t?s[cB(i,t,0,r)]:e}function o(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,o()):[t,n]},a.range=function(e){return arguments.length?(r=(s=Array.from(e)).length-1,o()):s.slice()},a.invertExtent=function(e){var a=s.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return d$().domain([t,n]).range(s).unknown(e)},eU.apply(OV(a),arguments)}function h$(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[cB(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return h$().domain(t).range(n).unknown(e)},eU.apply(i,arguments)}SV=IV({thousands:",",grouping:[3],currency:["$",""]}),EV=SV.format,CV=SV.formatPrefix;const f$=1e3,m$=6e4,p$=36e5,g$=864e5,y$=6048e5,v$=2592e6,b$=31536e6,x$=new Date,w$=new Date;function _$(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,s)=>{const a=[];if(n=i.ceil(n),s=null==s?1:Math.floor(s),!(n<r)||!(s>0))return a;let o;do{a.push(o=new Date(+n)),t(n,s),e(n)}while(o<n&&n<r);return a},i.filter=n=>_$((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(x$.setTime(+t),w$.setTime(+r),e(x$),e(w$),Math.floor(n(x$,w$))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const N$=_$((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));N$.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?_$((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):N$:null);N$.range;const j$=_$((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*f$)}),((e,t)=>(t-e)/f$),(e=>e.getUTCSeconds())),S$=(j$.range,_$((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*f$)}),((e,t)=>{e.setTime(+e+t*m$)}),((e,t)=>(t-e)/m$),(e=>e.getMinutes()))),E$=(S$.range,_$((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*m$)}),((e,t)=>(t-e)/m$),(e=>e.getUTCMinutes()))),C$=(E$.range,_$((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*f$-e.getMinutes()*m$)}),((e,t)=>{e.setTime(+e+t*p$)}),((e,t)=>(t-e)/p$),(e=>e.getHours()))),k$=(C$.range,_$((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*p$)}),((e,t)=>(t-e)/p$),(e=>e.getUTCHours()))),T$=(k$.range,_$((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*m$)/g$),(e=>e.getDate()-1))),I$=(T$.range,_$((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/g$),(e=>e.getUTCDate()-1))),A$=(I$.range,_$((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/g$),(e=>Math.floor(e/g$))));A$.range;function O$(e){return _$((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*m$)/y$))}const P$=O$(0),M$=O$(1),R$=O$(2),D$=O$(3),L$=O$(4),F$=O$(5),U$=O$(6);P$.range,M$.range,R$.range,D$.range,L$.range,F$.range,U$.range;function B$(e){return _$((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/y$))}const V$=B$(0),$$=B$(1),z$=B$(2),q$=B$(3),H$=B$(4),W$=B$(5),K$=B$(6),G$=(V$.range,$$.range,z$.range,q$.range,H$.range,W$.range,K$.range,_$((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),Y$=(G$.range,_$((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),X$=(Y$.range,_$((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));X$.every=e=>isFinite(e=Math.floor(e))&&e>0?_$((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;X$.range;const Z$=_$((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));Z$.every=e=>isFinite(e=Math.floor(e))&&e>0?_$((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;Z$.range;function Q$(e,t,n,r,i,s){const a=[[j$,1,f$],[j$,5,5e3],[j$,15,15e3],[j$,30,3e4],[s,1,m$],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,p$],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,g$],[r,2,1728e5],[n,1,y$],[t,1,v$],[t,3,7776e6],[e,1,b$]];function o(t,n,r){const i=Math.abs(n-t)/r,s=iB((e=>{let[,,t]=e;return t})).right(a,i);if(s===a.length)return e.every(tB(t/b$,n/b$,r));if(0===s)return N$.every(Math.max(tB(t,n,r),1));const[o,l]=a[i/a[s-1][2]<a[s][2]/i?s-1:s];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:o(e,t,n),s=i?i.range(e,+t+1):[];return r?s.reverse():s},o]}const[J$,ez]=Q$(Z$,Y$,V$,A$,k$,E$),[tz,nz]=Q$(X$,G$,P$,T$,C$,S$);function rz(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function iz(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sz(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var az,oz,lz,cz={"-":"",_:" ",0:"0"},uz=/^\s*\d+/,dz=/^%/,hz=/[\\^$*+?|[\]().{}]/g;function fz(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function mz(e){return e.replace(hz,"\\$&")}function pz(e){return new RegExp("^(?:"+e.map(mz).join("|")+")","i")}function gz(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function yz(e,t,n){var r=uz.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function vz(e,t,n){var r=uz.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function bz(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function xz(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function wz(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function _z(e,t,n){var r=uz.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Nz(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function jz(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Sz(e,t,n){var r=uz.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Ez(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Cz(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function kz(e,t,n){var r=uz.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Tz(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Iz(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Az(e,t,n){var r=uz.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Oz(e,t,n){var r=uz.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Pz(e,t,n){var r=uz.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mz(e,t,n){var r=dz.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Rz(e,t,n){var r=uz.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Dz(e,t,n){var r=uz.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Lz(e,t){return fz(e.getDate(),t,2)}function Fz(e,t){return fz(e.getHours(),t,2)}function Uz(e,t){return fz(e.getHours()%12||12,t,2)}function Bz(e,t){return fz(1+T$.count(X$(e),e),t,3)}function Vz(e,t){return fz(e.getMilliseconds(),t,3)}function $z(e,t){return Vz(e,t)+"000"}function zz(e,t){return fz(e.getMonth()+1,t,2)}function qz(e,t){return fz(e.getMinutes(),t,2)}function Hz(e,t){return fz(e.getSeconds(),t,2)}function Wz(e){var t=e.getDay();return 0===t?7:t}function Kz(e,t){return fz(P$.count(X$(e)-1,e),t,2)}function Gz(e){var t=e.getDay();return t>=4||0===t?L$(e):L$.ceil(e)}function Yz(e,t){return e=Gz(e),fz(L$.count(X$(e),e)+(4===X$(e).getDay()),t,2)}function Xz(e){return e.getDay()}function Zz(e,t){return fz(M$.count(X$(e)-1,e),t,2)}function Qz(e,t){return fz(e.getFullYear()%100,t,2)}function Jz(e,t){return fz((e=Gz(e)).getFullYear()%100,t,2)}function eq(e,t){return fz(e.getFullYear()%1e4,t,4)}function tq(e,t){var n=e.getDay();return fz((e=n>=4||0===n?L$(e):L$.ceil(e)).getFullYear()%1e4,t,4)}function nq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fz(t/60|0,"0",2)+fz(t%60,"0",2)}function rq(e,t){return fz(e.getUTCDate(),t,2)}function iq(e,t){return fz(e.getUTCHours(),t,2)}function sq(e,t){return fz(e.getUTCHours()%12||12,t,2)}function aq(e,t){return fz(1+I$.count(Z$(e),e),t,3)}function oq(e,t){return fz(e.getUTCMilliseconds(),t,3)}function lq(e,t){return oq(e,t)+"000"}function cq(e,t){return fz(e.getUTCMonth()+1,t,2)}function uq(e,t){return fz(e.getUTCMinutes(),t,2)}function dq(e,t){return fz(e.getUTCSeconds(),t,2)}function hq(e){var t=e.getUTCDay();return 0===t?7:t}function fq(e,t){return fz(V$.count(Z$(e)-1,e),t,2)}function mq(e){var t=e.getUTCDay();return t>=4||0===t?H$(e):H$.ceil(e)}function pq(e,t){return e=mq(e),fz(H$.count(Z$(e),e)+(4===Z$(e).getUTCDay()),t,2)}function gq(e){return e.getUTCDay()}function yq(e,t){return fz($$.count(Z$(e)-1,e),t,2)}function vq(e,t){return fz(e.getUTCFullYear()%100,t,2)}function bq(e,t){return fz((e=mq(e)).getUTCFullYear()%100,t,2)}function xq(e,t){return fz(e.getUTCFullYear()%1e4,t,4)}function wq(e,t){var n=e.getUTCDay();return fz((e=n>=4||0===n?H$(e):H$.ceil(e)).getUTCFullYear()%1e4,t,4)}function _q(){return"+0000"}function Nq(){return"%"}function jq(e){return+e}function Sq(e){return Math.floor(+e/1e3)}function Eq(e){return new Date(e)}function Cq(e){return e instanceof Date?+e:+new Date(+e)}function kq(e,t,n,r,i,s,a,o,l,c){var u=pV(),d=u.invert,h=u.domain,f=c(".%L"),m=c(":%S"),p=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(l(e)<e?f:o(e)<e?m:a(e)<e?p:s(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,Cq)):h().map(Eq)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(RV(n,e)):u},u.copy=function(){return fV(u,kq(e,t,n,r,i,s,a,o,l,c))},u}function Tq(){return eU.apply(kq(tz,nz,X$,G$,P$,T$,C$,S$,j$,oz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Iq(){return eU.apply(kq(J$,ez,Z$,Y$,V$,I$,k$,E$,j$,lz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Aq(){var e,t,n,r,i,s=0,a=1,o=cV,l=!1;function c(t){return null==t||isNaN(t=+t)?i:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(i){return arguments.length?([s,a]=i,e=r(s=+s),t=r(a=+a),n=e===t?0:1/(t-e),c):[s,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(sV),c.rangeRound=u(aV),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(s),t=i(a),n=e===t?0:1/(t-e),c}}function Oq(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Pq(){var e=OV(Aq()(cV));return e.copy=function(){return Oq(e,Pq())},tU.apply(e,arguments)}function Mq(){var e=$V(Aq()).domain([1,10]);return e.copy=function(){return Oq(e,Mq()).base(e.base())},tU.apply(e,arguments)}function Rq(){var e=WV(Aq());return e.copy=function(){return Oq(e,Rq()).constant(e.constant())},tU.apply(e,arguments)}function Dq(){var e=ZV(Aq());return e.copy=function(){return Oq(e,Dq()).exponent(e.exponent())},tU.apply(e,arguments)}function Lq(){return Dq.apply(null,arguments).exponent(.5)}function Fq(){var e=[],t=cV;function n(n){if(null!=n&&!isNaN(n=+n))return t((cB(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(nB),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>l$(e,r/t)))},n.copy=function(){return Fq(t).domain(e)},tU.apply(n,arguments)}function Uq(){var e,t,n,r,i,s,a,o=0,l=.5,c=1,u=1,d=cV,h=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+s(e))-t)*(u*e<u*t?r:i),d(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,d=function(e,t){void 0===t&&(t=e,e=sV);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return s[t](e-t)}}(e,[n,r,i]),f):[d(0),d(.5),d(1)]}}return f.domain=function(a){return arguments.length?([o,l,c]=a,e=s(o=+o),t=s(l=+l),n=s(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f):[o,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=m(sV),f.rangeRound=m(aV),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return s=a,e=a(o),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function Bq(){var e=OV(Uq()(cV));return e.copy=function(){return Oq(e,Bq())},tU.apply(e,arguments)}function Vq(){var e=$V(Uq()).domain([.1,1,10]);return e.copy=function(){return Oq(e,Vq()).base(e.base())},tU.apply(e,arguments)}function $q(){var e=WV(Uq());return e.copy=function(){return Oq(e,$q()).constant(e.constant())},tU.apply(e,arguments)}function zq(){var e=ZV(Uq());return e.copy=function(){return Oq(e,zq()).exponent(e.exponent())},tU.apply(e,arguments)}function qq(){return zq.apply(null,arguments).exponent(.5)}function Hq(e,t){if((i=e.length)>1)for(var n,r,i,s=1,a=e[t[0]],o=a.length;s<i;++s)for(r=a,a=e[t[s]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){az=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=pz(i),u=gz(i),d=pz(s),h=gz(s),f=pz(a),m=gz(a),p=pz(o),g=gz(o),y=pz(l),v=gz(l),b={a:function(e){return a[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Lz,e:Lz,f:$z,g:Jz,G:tq,H:Fz,I:Uz,j:Bz,L:Vz,m:zz,M:qz,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:jq,s:Sq,S:Hz,u:Wz,U:Kz,V:Yz,w:Xz,W:Zz,x:null,X:null,y:Qz,Y:eq,Z:nq,"%":Nq},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:rq,e:rq,f:lq,g:bq,G:wq,H:iq,I:sq,j:aq,L:oq,m:cq,M:uq,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:jq,s:Sq,S:dq,u:hq,U:fq,V:pq,w:gq,W:yq,x:null,X:null,y:vq,Y:xq,Z:_q,"%":Nq},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return j(e,t,n,r)},d:Cz,e:Cz,f:Pz,g:Nz,G:_z,H:Tz,I:Tz,j:kz,L:Oz,m:Ez,M:Iz,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Sz,Q:Rz,s:Dz,S:Az,u:vz,U:bz,V:xz,w:yz,W:wz,x:function(e,t,r){return j(e,n,t,r)},X:function(e,t,n){return j(e,r,t,n)},y:Nz,Y:_z,Z:jz,"%":Mz};function _(e,t){return function(n){var r,i,s,a=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(i=cz[r=e.charAt(++o)])?r=e.charAt(++o):i="e"===r?" ":"0",(s=t[r])&&(r=s(n,i)),a.push(r),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function N(e,t){return function(n){var r,i,s=sz(1900,void 0,1);if(j(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(i=(r=iz(sz(s.y,0,1))).getUTCDay(),r=i>4||0===i?$$.ceil(r):$$(r),r=I$.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(i=(r=rz(sz(s.y,0,1))).getDay(),r=i>4||0===i?M$.ceil(r):M$(r),r=T$.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),i="Z"in s?iz(sz(s.y,0,1)).getUTCDay():rz(sz(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,iz(s)):rz(s)}}function j(e,t,n,r){for(var i,s,a=0,o=t.length,l=n.length;a<o;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(s=w[i in cz?t.charAt(a++):i])||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),oz=az.format,az.parse,lz=az.utcFormat,az.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function Wq(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Kq(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Gq(e,t){return e[t]}function Yq(e){const t=[];return t.key=e,t}var Xq=n(539),Zq=n.n(Xq),Qq=n(6745),Jq=n.n(Qq),eH=n(3538),tH=n.n(eH),nH=n(9853),rH=n.n(nH),iH=n(8210),sH=n.n(iH);function aH(e){return function(e){if(Array.isArray(e))return oH(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return oH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oH(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lH=function(e){return e},cH={"@@functional/placeholder":!0},uH=function(e){return e===cH},dH=function(e){return function t(){return 0===arguments.length||1===arguments.length&&uH(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},hH=function e(t,n){return 1===t?n:dH((function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter((function(e){return e!==cH})).length;return a>=t?n.apply(void 0,i):e(t-a,dH((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=i.map((function(e){return uH(e)?t.shift():e}));return n.apply(void 0,aH(s).concat(t))})))}))},fH=function(e){return hH(e.length,e)},mH=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},pH=fH((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),gH=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return lH;var r=t.reverse(),i=r[0],s=r.slice(1);return function(){return s.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},yH=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},vH=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var bH=fH((function(e,t,n){var r=+e;return r+n*(+t-r)})),xH=fH((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),wH=fH((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const _H={rangeStep:function(e,t,n){for(var r=new(sH())(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new(sH())(e).abs().log(10).toNumber())+1},interpolateNumber:bH,uninterpolateNumber:xH,uninterpolateTruncation:wH};function NH(e){return function(e){if(Array.isArray(e))return EH(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||SH(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}return n}(e,t)||SH(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SH(e,t){if(e){if("string"===typeof e)return EH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EH(e,t):void 0}}function EH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function CH(e){var t=jH(e,2),n=t[0],r=t[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function kH(e,t,n){if(e.lte(0))return new(sH())(0);var r=_H.getDigitCount(e.toNumber()),i=new(sH())(10).pow(r),s=e.div(i),a=1!==r?.05:.1,o=new(sH())(Math.ceil(s.div(a).toNumber())).add(n).mul(a).mul(i);return t?o:new(sH())(Math.ceil(o))}function TH(e,t,n){var r=1,i=new(sH())(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new(sH())(10).pow(_H.getDigitCount(e)-1),i=new(sH())(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new(sH())(Math.floor(e)))}else 0===e?i=new(sH())(Math.floor((t-1)/2)):n||(i=new(sH())(Math.floor(e)));var a=Math.floor((t-1)/2),o=gH(pH((function(e){return i.add(new(sH())(e-a).mul(r)).toNumber()})),mH);return o(0,t)}function IH(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(sH())(0),tickMin:new(sH())(0),tickMax:new(sH())(0)};var s,a=kH(new(sH())(t).sub(e).div(n-1),r,i);s=e<=0&&t>=0?new(sH())(0):(s=new(sH())(e).add(t).div(2)).sub(new(sH())(s).mod(a));var o=Math.ceil(s.sub(e).div(a).toNumber()),l=Math.ceil(new(sH())(t).sub(s).div(a).toNumber()),c=o+l+1;return c>n?IH(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:a,tickMin:s.sub(new(sH())(o).mul(a)),tickMax:s.add(new(sH())(l).mul(a))})}var AH=vH((function(e){var t=jH(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),o=jH(CH([n,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(NH(mH(0,i-1).map((function(){return 1/0})))):[].concat(NH(mH(0,i-1).map((function(){return-1/0}))),[c]);return n>r?yH(u):u}if(l===c)return TH(l,i,s);var d=IH(l,c,a,s),h=d.step,f=d.tickMin,m=d.tickMax,p=_H.rangeStep(f,m.add(new(sH())(.1).mul(h)),h);return n>r?yH(p):p})),OH=(vH((function(e){var t=jH(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),o=jH(CH([n,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return TH(l,i,s);var u=kH(new(sH())(c).sub(l).div(a-1),s,0),d=gH(pH((function(e){return new(sH())(l).add(new(sH())(e).mul(u)).toNumber()})),mH),h=d(0,a).filter((function(e){return e>=l&&e<=c}));return n>r?yH(h):h})),vH((function(e,t){var n=jH(e,2),r=n[0],i=n[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=jH(CH([r,i]),2),o=a[0],l=a[1];if(o===-1/0||l===1/0)return[r,i];if(o===l)return[o];var c=Math.max(t,2),u=kH(new(sH())(l).sub(o).div(c-1),s,0),d=[].concat(NH(_H.rangeStep(new(sH())(o),new(sH())(l).sub(new(sH())(.99).mul(u)),u)),[l]);return r>i?yH(d):d}))),PH=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function MH(e){return MH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MH(e)}function RH(){return RH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RH.apply(this,arguments)}function DH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return LH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LH(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function FH(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HH(r.key),r)}}function BH(e,t,n){return t=$H(t),function(e,t){if(t&&("object"===MH(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,VH()?Reflect.construct(t,n||[],$H(e).constructor):t.apply(e,n))}function VH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(VH=function(){return!!e})()}function $H(e){return $H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$H(e)}function zH(e,t){return zH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zH(e,t)}function qH(e,t,n){return(t=HH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HH(e){var t=function(e,t){if("object"!=MH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=MH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MH(t)?t:t+""}var WH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),BH(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zH(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,i=e.width,s=e.dataKey,a=e.data,o=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,u=FH(e,PH),d=FM(u,!1);"x"===this.props.direction&&"number"!==l.type&&tR(!1);var h=a.map((function(e){var a=o(e,s),u=a.x,h=a.y,f=a.value,m=a.errorVal;if(!m)return null;var p,g,y=[];if(Array.isArray(m)){var v=DH(m,2);p=v[0],g=v[1]}else p=g=m;if("vertical"===n){var b=l.scale,x=h+t,w=x+i,_=x-i,N=b(f-p),j=b(f+g);y.push({x1:j,y1:w,x2:j,y2:_}),y.push({x1:N,y1:x,x2:j,y2:x}),y.push({x1:N,y1:w,x2:N,y2:_})}else if("horizontal"===n){var S=c.scale,E=u+t,C=E-i,k=E+i,T=S(f-p),I=S(f+g);y.push({x1:C,y1:I,x2:k,y2:I}),y.push({x1:E,y1:T,x2:E,y2:I}),y.push({x1:C,y1:T,x2:k,y2:T})}return r.createElement(cR,RH({className:"recharts-errorBar",key:"bar-".concat(y.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},d),y.map((function(e){return r.createElement("line",RH({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return r.createElement(cR,{className:"recharts-errorBars"},h)}}],i&&UH(n.prototype,i),s&&UH(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);function KH(e){return KH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KH(e)}function GH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GH(Object(n),!0).forEach((function(t){XH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XH(e,t,n){return t=function(e){var t=function(e,t){if("object"!=KH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KH(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qH(WH,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),qH(WH,"displayName","ErrorBar");var ZH=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,i=e.legendContent,s=MM(t,dL);if(!s)return null;var a,o=dL.defaultProps,l=void 0!==o?YH(YH({},o),s.props):{};return a=s.props&&s.props.payload?s.props&&s.props.payload:"children"===i?(n||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:s.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(n||[]).map((function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?YH(YH({},n),t.props):{},i=r.dataKey,s=r.name,a=r.legendType;return{inactive:r.hide,dataKey:i,type:l.iconType||a||"square",color:aW(t),value:s||i,payload:r}})),YH(YH(YH({},l),dL.getWithHeight(s,r)),{},{payload:a,item:s})};function QH(e){return QH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QH(e)}function JH(e){return function(e){if(Array.isArray(e))return eW(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return eW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eW(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tW(Object(n),!0).forEach((function(t){rW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rW(e,t,n){return t=function(e){var t=function(e,t){if("object"!=QH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QH(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iW(e,t,n){return dM()(e)||dM()(t)?n:nM(t)?XP()(e,t,n):fM()(t)?t(e):n}function sW(e,t,n,r){var i=tH()(e,(function(e){return iW(e,t)}));if("number"===n){var s=i.filter((function(e){return tM(e)||parseFloat(e)}));return s.length?[Jq()(s),Zq()(s)]:[1/0,-1/0]}return(r?i.filter((function(e){return!dM()(e)})):i).map((function(e){return nM(e)||e instanceof Date?e:""}))}var aW=function(e){var t,n,r=e.type.displayName,i=null!==(t=e.type)&&void 0!==t&&t.defaultProps?nW(nW({},e.type.defaultProps),e.props):e.props,s=i.stroke,a=i.fill;switch(r){case"Line":n=s;break;case"Area":case"Radar":n=s&&"none"!==s?s:a;break;default:n=a}return n},oW=function(e,t,n,r,i){var s=PM(t.props.children,WH).filter((function(e){return function(e,t,n){return!!dM()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)}));if(s&&s.length){var a=s.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=iW(t,n);if(dM()(r))return e;var i=Array.isArray(r)?[Jq()(r),Zq()(r)]:[r,r],s=a.reduce((function(e,n){var r=iW(t,n,0),s=i[0]-Math.abs(Array.isArray(r)?r[0]:r),a=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(s,e[0]),Math.max(a,e[1])]}),[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}),[1/0,-1/0])}return null},lW=function(e,t,n,r,i){var s=t.map((function(t){var s=t.props.dataKey;return"number"===n&&s&&oW(e,t,s,r)||sW(e,s,n,i)}));if("number"===n)return s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var a={};return s.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)a[t[n]]||(a[t[n]]=!0,e.push(t[n]));return e}),[])},cW=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},uW=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,s=e.type,a=e.range,o="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===s&&r.bandwidth?r.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null===a||void 0===a?void 0:a.length)>=2?2*JP(a[0]-a[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}})).filter((function(e){return!GP()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+l,value:e,offset:l}})):r.domain().map((function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}}))},dW=new WeakMap,hW=function(e,t){if("function"!==typeof t)return e;dW.has(e)||dW.set(e,new WeakMap);var n=dW.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},fW=1e-4,mW={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,a=0;a<t;++a){var o=GP()(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+o,s=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,s=0,a=e[0].length;s<a;++s){for(i=n=0;n<r;++n)i+=e[n][s][1]||0;if(i)for(n=0;n<r;++n)e[n][s][1]/=i}Hq(e,t)}},none:Hq,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],s=i.length;r<s;++r){for(var a=0,o=0;a<n;++a)o+=e[a][r][1]||0;i[r][1]+=i[r][0]=-o/2}Hq(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,s=0,a=1;a<r;++a){for(var o=0,l=0,c=0;o<i;++o){for(var u=e[t[o]],d=u[a][1]||0,h=(d-(u[a-1][1]||0))/2,f=0;f<o;++f){var m=e[t[f]];h+=(m[a][1]||0)-(m[a-1][1]||0)}l+=d,c+=h*d}n[a-1][1]+=n[a-1][0]=s,l&&(s-=c/l)}n[a-1][1]+=n[a-1][0]=s,Hq(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var a=GP()(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=i,e[s][n][1]=i+a,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}}},pW=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=mW[n],s=function(){var e=_D([]),t=Kq,n=Hq,r=Gq;function i(i){var s,a,o=Array.from(e.apply(this,arguments),Yq),l=o.length,c=-1;for(const e of i)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(e,o[s].key,c,i)]).data=e;for(s=0,a=Wq(t(o));s<l;++s)o[a[s]].index=s;return n(o,a),o}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:_D(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:_D(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?Kq:"function"===typeof e?e:_D(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Hq:e,i):n},i}().keys(r).value((function(e,t){return+iW(e,t,0)})).order(Kq).offset(i);return s(e)};var gW=function(e,t,n){return Object.keys(e).reduce((function(r,i){var s=e[i].stackedData.reduce((function(e,r){var i=function(e){return e.reduce((function(e,t){return[Jq()(t.concat([e[0]]).filter(tM)),Zq()(t.concat([e[1]]).filter(tM))]}),[1/0,-1/0])}(r.slice(t,n+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},yW=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vW=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bW=function(e,t,n){if(fM()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(tM(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(yW.test(e[0])){var i=+yW.exec(e[0])[1];r[0]=t[0]-i}else fM()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(tM(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(vW.test(e[1])){var s=+vW.exec(e[1])[1];r[1]=t[1]+s}else fM()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},xW=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=JM()(t,(function(e){return e.coordinate})),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],c=i[a-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},wW=function(e,t,n){return e&&e.length?rH()(e,XP()(n,"type.defaultProps.domain"))?t:e:t},_W=function(e,t){var n=e.type.defaultProps?nW(nW({},e.type.defaultProps),e.props):e.props,r=n.dataKey,i=n.name,s=n.unit,a=n.formatter,o=n.tooltipType,l=n.chartType,c=n.hide;return nW(nW({},FM(e,!1)),{},{dataKey:r,unit:s,formatter:a,name:i||r,color:aW(e),value:iW(t,r),type:o,payload:t,chartType:l,hide:c})};function NW(e){return NW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NW(e)}function jW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jW(Object(n),!0).forEach((function(t){EW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EW(e,t,n){return t=function(e){var t=function(e,t){if("object"!=NW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=NW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NW(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CW=["Webkit","Moz","O","ms"];function kW(e){return kW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kW(e)}function TW(){return TW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TW.apply(this,arguments)}function IW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IW(Object(n),!0).forEach((function(t){LW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FW(r.key),r)}}function PW(e,t,n){return t=RW(t),function(e,t){if(t&&("object"===kW(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,MW()?Reflect.construct(t,n||[],RW(e).constructor):t.apply(e,n))}function MW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(MW=function(){return!!e})()}function RW(e){return RW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},RW(e)}function DW(e,t){return DW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DW(e,t)}function LW(e,t,n){return(t=FW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FW(e){var t=function(e,t){if("object"!=kW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kW(t)?t:t+""}var UW=function(e){return e.changedTouches&&!!e.changedTouches.length},BW=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),LW(n=PW(this,t,[e]),"handleDrag",(function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)})),LW(n,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])})),LW(n,"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,i=e.startIndex;null===r||void 0===r||r({endIndex:t,startIndex:i})})),n.detachDragEndListener()})),LW(n,"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),LW(n,"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),LW(n,"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),LW(n,"handleSlideDragStart",(function(e){var t=UW(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DW(e,t)}(t,e),n=t,i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var n=e.startX,r=e.endX,i=this.state.scaleValues,s=this.props,a=s.gap,o=s.data.length-1,l=Math.min(n,r),c=Math.max(n,r),u=t.getIndexInRange(i,l),d=t.getIndexInRange(i,c);return{startIndex:u-u%a,endIndex:d===o?o:d-d%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,s=iW(n[e],i,e);return fM()(r)?r(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,s=this.props,a=s.x,o=s.width,l=s.travellerWidth,c=s.startIndex,u=s.endIndex,d=s.onChange,h=e.pageX-n;h>0?h=Math.min(h,a+o-l-i,a+o-l-r):h<0&&(h=Math.max(h,a-r,a-i));var f=this.getIndex({startX:r+h,endX:i+h});f.startIndex===c&&f.endIndex===u||!d||d(f),this.setState({startX:r+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=UW(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,s=t.startX,a=this.state[r],o=this.props,l=o.x,c=o.width,u=o.travellerWidth,d=o.onChange,h=o.gap,f=o.data,m={startX:this.state.startX,endX:this.state.endX},p=e.pageX-n;p>0?p=Math.min(p,l+c-u-a):p<0&&(p=Math.max(p,l-a)),m[r]=a+p;var g=this.getIndex(m),y=g.startIndex,v=g.endIndex;this.setState(LW(LW({},r,a+p),"brushMoveStartX",e.pageX),(function(){d&&function(){var e=f.length-1;return"startX"===r&&(i>s?y%h===0:v%h===0)||i<s&&v===e||"endX"===r&&(i>s?v%h===0:y%h===0)||i>s&&v===e}()&&d(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,s=r.startX,a=r.endX,o=this.state[t],l=i.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=i.length)){var u=i[c];"startX"===t&&u>=a||"endX"===t&&u<=s||this.setState(LW({},t,u),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,i=e.width,s=e.height,a=e.fill,o=e.stroke;return r.createElement("rect",{stroke:o,fill:a,x:t,y:n,width:i,height:s})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,i=e.width,s=e.height,a=e.data,o=e.children,l=e.padding,c=r.Children.only(o);return c?r.cloneElement(c,{x:t,y:n,width:i,height:s,margin:l,compact:!0,data:a}):null}},{key:"renderTravellerLayer",value:function(e,n){var i,s,a=this,o=this.props,l=o.y,c=o.travellerWidth,u=o.height,d=o.traveller,h=o.ariaLabel,f=o.data,m=o.startIndex,p=o.endIndex,g=Math.max(e,this.props.x),y=AW(AW({},FM(this.props,!1)),{},{x:g,y:l,width:c,height:u}),v=h||"Min value: ".concat(null===(i=f[m])||void 0===i?void 0:i.name,", Max value: ").concat(null===(s=f[p])||void 0===s?void 0:s.name);return r.createElement(cR,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),a.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,y))}},{key:"renderSlide",value:function(e,t){var n=this.props,i=n.y,s=n.height,a=n.stroke,o=n.travellerWidth,l=Math.min(e,t)+o,c=Math.max(Math.abs(t-e)-o,0);return r.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:a,fillOpacity:.2,x:l,y:i,width:c,height:s})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,i=e.y,s=e.height,a=e.travellerWidth,o=e.stroke,l=this.state,c=l.startX,u=l.endX,d={pointerEvents:"none",fill:o};return r.createElement(cR,{className:"recharts-brush-texts"},r.createElement(GU,TW({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:i+s/2},d),this.getTextOfTick(t)),r.createElement(GU,TW({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+a+5,y:i+s/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,i=e.children,s=e.x,a=e.y,o=e.width,l=e.height,c=e.alwaysShowText,u=this.state,d=u.startX,h=u.endX,f=u.isTextActive,m=u.isSlideMoving,p=u.isTravellerMoving,g=u.isTravellerFocused;if(!t||!t.length||!tM(s)||!tM(a)||!tM(o)||!tM(l)||o<=0||l<=0)return null;var y=$P("recharts-brush",n),v=1===r.Children.count(i),b=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=CW.reduce((function(e,r){return SW(SW({},e),{},EW({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return r.createElement(cR,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(d,h),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(h,"endX"),(f||m||p||g||c)&&this.renderText())}}],s=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,i=e.width,s=e.height,a=e.stroke,o=Math.floor(n+s/2)-1;return r.createElement(r.Fragment,null,r.createElement("rect",{x:t,y:n,width:i,height:s,fill:a,stroke:"none"}),r.createElement("line",{x1:t+1,y1:o,x2:t+i-1,y2:o,fill:"none",stroke:"#fff"}),r.createElement("line",{x1:t+1,y1:o+2,x2:t+i-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return r.isValidElement(e)?r.cloneElement(e,n):fM()(e)?e(n):t.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,s=e.travellerWidth,a=e.updateId,o=e.startIndex,l=e.endIndex;if(n!==t.prevData||a!==t.prevUpdateId)return AW({prevData:n,prevTravellerWidth:s,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,s=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=dU().domain(ZM()(0,o)).range([i,i+s-a]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:s,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([i,i+r-s]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:s,prevUpdateId:a,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],i&&OW(n.prototype,i),s&&OW(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);function VW(e){return VW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VW(e)}function $W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$W(Object(n),!0).forEach((function(t){qW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qW(e,t,n){return t=function(e){var t=function(e,t){if("object"!=VW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VW(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return WW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WW(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}LW(BW,"displayName","Brush"),LW(BW,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var KW=Math.PI/180,GW=function(e){return 180*e/Math.PI},YW=function(e,t,n,r){return{x:e+Math.cos(-KW*r)*n,y:t+Math.sin(-KW*r)*n}},XW=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},ZW=function(e,t){var n=e.x,r=e.y,i=t.cx,s=t.cy,a=function(e,t){var n=e.x,r=e.y,i=t.x,s=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-s,2))}({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a};var o=(n-i)/a,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:a,angle:GW(l),angleInRadian:l}},QW=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),s=Math.floor(r/360);return e+360*Math.min(i,s)},JW=function(e,t){var n=e.x,r=e.y,i=ZW({x:n,y:r},t),s=i.radius,a=i.angle,o=t.innerRadius,l=t.outerRadius;if(s<o||s>l)return!1;if(0===s)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-360*s,endAngle:n-360*s}}(t),d=u.startAngle,h=u.endAngle,f=a;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;c=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;c=f>=h&&f<=d}return c?zW(zW({},t),{},{radius:s,angle:QW(f,t)}):null},eK=function(e){return(0,r.isValidElement)(e)||fM()(e)||"boolean"===typeof e?"":e.className};function tK(e){return tK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tK(e)}var nK=["offset"];function rK(e){return function(e){if(Array.isArray(e))return iK(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return iK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iK(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aK(Object(n),!0).forEach((function(t){lK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lK(e,t,n){return t=function(e){var t=function(e,t){if("object"!=tK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tK(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cK(){return cK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cK.apply(this,arguments)}var uK=function(e,t,n){var i,s,a=e.position,o=e.viewBox,l=e.offset,c=e.className,u=o,d=u.cx,h=u.cy,f=u.innerRadius,m=u.outerRadius,p=u.startAngle,g=u.endAngle,y=u.clockWise,v=(f+m)/2,b=function(e,t){return JP(t-e)*Math.min(Math.abs(t-e),360)}(p,g),x=b>=0?1:-1;"insideStart"===a?(i=p+x*l,s=y):"insideEnd"===a?(i=g-x*l,s=!y):"end"===a&&(i=g+x*l,s=y),s=b<=0?s:!s;var w=YW(d,h,v,i),_=YW(d,h,v,i+359*(s?1:-1)),N="M".concat(w.x,",").concat(w.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(s?0:1,",\n    ").concat(_.x,",").concat(_.y),j=dM()(e.id)?iM("recharts-radial-line-"):e.id;return r.createElement("text",cK({},n,{dominantBaseline:"central",className:$P("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:j,d:N})),r.createElement("textPath",{xlinkHref:"#".concat(j)},t))};function dK(e){var t,n=e.offset,i=oK({offset:void 0===n?5:n},sK(e,nK)),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,u=i.className,d=void 0===u?"":u,h=i.textBreakAll;if(!s||dM()(o)&&dM()(l)&&!(0,r.isValidElement)(c)&&!fM()(c))return null;if((0,r.isValidElement)(c))return(0,r.cloneElement)(c,i);if(fM()(c)){if(t=(0,r.createElement)(c,i),(0,r.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=dM()(e.children)?t:e.children;return fM()(n)?n(r):r}(i);var f=function(e){return"cx"in e&&tM(e.cx)}(s),m=FM(i,!0);if(f&&("insideStart"===a||"insideEnd"===a||"end"===a))return uK(i,t,m);var p=f?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,s=i.cx,a=i.cy,o=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=YW(s,a,l+n,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=s?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=YW(s,a,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(i):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,s=t,a=s.x,o=s.y,l=s.width,c=s.height,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",f=u>0?"start":"end",m=l>=0?1:-1,p=m*r,g=m>0?"end":"start",y=m>0?"start":"end";if("top"===i)return oK(oK({},{x:a+l/2,y:o-u*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===i)return oK(oK({},{x:a+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{});if("left"===i){var v={x:a-p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return oK(oK({},v),n?{width:Math.max(v.x-n.x,0),height:c}:{})}if("right"===i){var b={x:a+l+p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return oK(oK({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:c}:{})}var x=n?{width:l,height:c}:{};return"insideLeft"===i?oK({x:a+p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},x):"insideRight"===i?oK({x:a+l-p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?oK({x:a+l/2,y:o+d,textAnchor:"middle",verticalAnchor:f},x):"insideBottom"===i?oK({x:a+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:h},x):"insideTopLeft"===i?oK({x:a+p,y:o+d,textAnchor:y,verticalAnchor:f},x):"insideTopRight"===i?oK({x:a+l-p,y:o+d,textAnchor:g,verticalAnchor:f},x):"insideBottomLeft"===i?oK({x:a+p,y:o+c-d,textAnchor:y,verticalAnchor:h},x):"insideBottomRight"===i?oK({x:a+l-p,y:o+c-d,textAnchor:g,verticalAnchor:h},x):pM()(i)&&(tM(i.x)||eM(i.x))&&(tM(i.y)||eM(i.y))?oK({x:a+sM(i.x,l),y:o+sM(i.y,c),textAnchor:"end",verticalAnchor:"end"},x):oK({x:a+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(i);return r.createElement(GU,cK({className:$P("recharts-label",d)},m,p,{breakAll:h}),t)}dK.displayName="Label";var hK=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,s=e.endAngle,a=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,f=e.left,m=e.width,p=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(tM(m)&&tM(p)){if(tM(u)&&tM(d))return{x:u,y:d,width:m,height:p};if(tM(h)&&tM(f))return{x:h,y:f,width:m,height:p}}return tM(u)&&tM(d)?{x:u,y:d,width:0,height:0}:tM(t)&&tM(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:s||r||0,innerRadius:l||0,outerRadius:c||o||a||0,clockWise:g}:e.viewBox?e.viewBox:{}};dK.parseViewBox=hK,dK.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=e.children,s=hK(e),a=PM(i,dK).map((function(e,n){return(0,r.cloneElement)(e,{viewBox:t||s,key:"label-".concat(n)})}));if(!n)return a;var o=function(e,t){return e?!0===e?r.createElement(dK,{key:"label-implicit",viewBox:t}):nM(e)?r.createElement(dK,{key:"label-implicit",viewBox:t,value:e}):(0,r.isValidElement)(e)?e.type===dK?(0,r.cloneElement)(e,{key:"label-implicit",viewBox:t}):r.createElement(dK,{key:"label-implicit",content:e,viewBox:t}):fM()(e)?r.createElement(dK,{key:"label-implicit",content:e,viewBox:t}):pM()(e)?r.createElement(dK,cK({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||s);return[o].concat(rK(a))};var fK=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},mK=n(1733),pK=n.n(mK),gK=n(7002),yK=n.n(gK);function vK(e){return vK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vK(e)}function bK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NK(r.key),r)}}function xK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xK(Object(n),!0).forEach((function(t){_K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _K(e,t,n){return(t=NK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NK(e){var t=function(e,t){if("object"!=vK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vK(t)?t:t+""}var jK=function(e,t){var n=e.x,r=e.y,i=t.x,s=t.y;return{x:Math.min(n,i),y:Math.min(r,s),width:Math.abs(i-n),height:Math.abs(s-r)}},SK=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&bK(t.prototype,n),r&&bK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();_K(SK,"EPS",1e-4);var EK=function(e){var t=Object.keys(e).reduce((function(t,n){return wK(wK({},t),{},_K({},n,SK.create(e[n])))}),{});return wK(wK({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return pK()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return yK()(e,(function(e,n){return t[n].isInRange(e)}))}})};function CK(){return CK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CK.apply(this,arguments)}function kK(e){return kK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kK(e)}function TK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TK(Object(n),!0).forEach((function(t){DK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LK(r.key),r)}}function OK(e,t,n){return t=MK(t),function(e,t){if(t&&("object"===kK(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,PK()?Reflect.construct(t,n||[],MK(e).constructor):t.apply(e,n))}function PK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PK=function(){return!!e})()}function MK(e){return MK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},MK(e)}function RK(e,t){return RK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RK(e,t)}function DK(e,t,n){return(t=LK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LK(e){var t=function(e,t){if("object"!=kK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kK(t)?t:t+""}var FK=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),OK(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RK(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,n=e.x,i=e.y,s=e.r,a=e.alwaysShow,o=e.clipPathId,l=nM(n),c=nM(i);if(cM(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var u=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,s=EK({x:r.scale,y:i.scale}),a=s.apply({x:t,y:n},{bandAware:!0});return fK(e,"discard")&&!s.isInRange(a)?null:a}(this.props);if(!u)return null;var d=u.x,h=u.y,f=this.props,m=f.shape,p=f.className,g=IK(IK({clipPath:fK(this.props,"hidden")?"url(#".concat(o,")"):void 0},FM(this.props,!0)),{},{cx:d,cy:h});return r.createElement(cR,{className:$P("recharts-reference-dot",p)},t.renderDot(m,g),dK.renderCallByParent(this.props,{x:d-s,y:h-s,width:2*s,height:2*s}))}}],i&&AK(n.prototype,i),s&&AK(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);DK(FK,"displayName","ReferenceDot"),DK(FK,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),DK(FK,"renderDot",(function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):fM()(e)?e(t):r.createElement(fL,CK({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))}));var UK=n(4597),BK=n.n(UK),VK=(n(8990),n(5797)),$K=n.n(VK)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var zK=(0,r.createContext)(void 0),qK=(0,r.createContext)(void 0),HK=(0,r.createContext)(void 0),WK=(0,r.createContext)({}),KK=(0,r.createContext)(void 0),GK=(0,r.createContext)(0),YK=(0,r.createContext)(0),XK=function(e){var t=e.state,n=t.xAxisMap,i=t.yAxisMap,s=t.offset,a=e.clipPathId,o=e.children,l=e.width,c=e.height,u=$K(s);return r.createElement(zK.Provider,{value:n},r.createElement(qK.Provider,{value:i},r.createElement(WK.Provider,{value:s},r.createElement(HK.Provider,{value:u},r.createElement(KK.Provider,{value:a},r.createElement(GK.Provider,{value:c},r.createElement(YK.Provider,{value:l},o)))))))};function ZK(e){return ZK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZK(e)}function QK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aG(r.key),r)}}function JK(e,t,n){return t=tG(t),function(e,t){if(t&&("object"===ZK(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eG()?Reflect.construct(t,n||[],tG(e).constructor):t.apply(e,n))}function eG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eG=function(){return!!e})()}function tG(e){return tG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tG(e)}function nG(e,t){return nG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nG(e,t)}function rG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rG(Object(n),!0).forEach((function(t){sG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sG(e,t,n){return(t=aG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aG(e){var t=function(e,t){if("object"!=ZK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ZK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ZK(t)?t:t+""}function oG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return lG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lG(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cG(){return cG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cG.apply(this,arguments)}function uG(e){var t=e.x,n=e.y,i=e.segment,s=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=(0,r.useContext)(KK),d=function(e){var t=(0,r.useContext)(zK);null==t&&tR(!1);var n=t[e];return null==n&&tR(!1),n}(s),h=function(e){var t=(0,r.useContext)(qK);null==t&&tR(!1);var n=t[e];return null==n&&tR(!1),n}(a),f=(0,r.useContext)(HK);if(!u||!f)return null;cM(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=function(e,t,n,r,i,s,a,o,l){var c=i.x,u=i.y,d=i.width,h=i.height;if(n){var f=l.y,m=e.y.apply(f,{position:s});if(fK(l,"discard")&&!e.y.isInRange(m))return null;var p=[{x:c+d,y:m},{x:c,y:m}];return"left"===o?p.reverse():p}if(t){var g=l.x,y=e.x.apply(g,{position:s});if(fK(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:u+h},{x:y,y:u}];return"top"===a?v.reverse():v}if(r){var b=l.segment.map((function(t){return e.apply(t,{position:s})}));return fK(l,"discard")&&BK()(b,(function(t){return!e.isInRange(t)}))?null:b}return null}(EK({x:d.scale,y:h.scale}),nM(t),nM(n),i&&2===i.length,f,e.position,d.orientation,h.orientation,e);if(!m)return null;var p=oG(m,2),g=p[0],y=g.x,v=g.y,b=p[1],x=b.x,w=b.y,_=iG(iG({clipPath:fK(e,"hidden")?"url(#".concat(u,")"):void 0},FM(e,!0)),{},{x1:y,y1:v,x2:x,y2:w});return r.createElement(cR,{className:$P("recharts-reference-line",l)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):fM()(e)?e(t):r.createElement("line",cG({},t,{className:"recharts-reference-line-line"}))}(o,_),dK.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return jK({x:t,y:n},{x:r,y:i})}({x1:y,y1:v,x2:x,y2:w})))}var dG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),JK(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nG(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){return r.createElement(uG,this.props)}}])&&QK(n.prototype,i),s&&QK(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);function hG(){return hG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hG.apply(this,arguments)}function fG(e){return fG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fG(e)}function mG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mG(Object(n),!0).forEach((function(t){wG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_G(r.key),r)}}function yG(e,t,n){return t=bG(t),function(e,t){if(t&&("object"===fG(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vG()?Reflect.construct(t,n||[],bG(e).constructor):t.apply(e,n))}function vG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vG=function(){return!!e})()}function bG(e){return bG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bG(e)}function xG(e,t){return xG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xG(e,t)}function wG(e,t,n){return(t=_G(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _G(e){var t=function(e,t){if("object"!=fG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fG(t)?t:t+""}sG(dG,"displayName","ReferenceLine"),sG(dG,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var NG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yG(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xG(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){var e=this.props,n=e.x1,i=e.x2,s=e.y1,a=e.y2,o=e.className,l=e.alwaysShow,c=e.clipPathId;cM(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=nM(n),d=nM(i),h=nM(s),f=nM(a),m=this.props.shape;if(!u&&!d&&!h&&!f&&!m)return null;var p=function(e,t,n,r,i){var s=i.x1,a=i.x2,o=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var d=EK({x:c.scale,y:u.scale}),h={x:e?d.x.apply(s,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(o,{position:"start"}):d.y.rangeMin},f={x:t?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!fK(i,"discard")||d.isInRange(h)&&d.isInRange(f)?jK(h,f):null}(u,d,h,f,this.props);if(!p&&!m)return null;var g=fK(this.props,"hidden")?"url(#".concat(c,")"):void 0;return r.createElement(cR,{className:$P("recharts-reference-area",o)},t.renderRect(m,pG(pG({clipPath:g},FM(this.props,!0)),p)),dK.renderCallByParent(this.props,p))}}])&&gG(n.prototype,i),s&&gG(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);function jG(e){return function(e){if(Array.isArray(e))return SG(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return SG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SG(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wG(NG,"displayName","ReferenceArea"),wG(NG,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),wG(NG,"renderRect",(function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):fM()(e)?e(t):r.createElement(JF,hG({},t,{className:"recharts-reference-area-rect"}))}));var EG=function(e,t,n,r,i){var s=PM(e,dG),a=PM(e,FK),o=[].concat(jG(s),jG(a)),l=PM(e,NG),c="".concat(r,"Id"),u=r[0],d=t;if(o.length&&(d=o.reduce((function(e,t){if(t.props[c]===n&&fK(t.props,"extendDomain")&&tM(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),d)),l.length){var h="".concat(u,"1"),f="".concat(u,"2");d=l.reduce((function(e,t){if(t.props[c]===n&&fK(t.props,"extendDomain")&&tM(t.props[h])&&tM(t.props[f])){var r=t.props[h],i=t.props[f];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),d)}return i&&i.length&&(d=i.reduce((function(e,t){return tM(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),d)),d},CG=n(7283),kG=new(n.n(CG)()),TG="recharts.syncMouseEvents";function IG(e){return IG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IG(e)}function AG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PG(r.key),r)}}function OG(e,t,n){return(t=PG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PG(e){var t=function(e,t){if("object"!=IG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=IG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==IG(t)?t:t+""}var MG=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),OG(this,"activeIndex",0),OG(this,"coordinateList",[]),OG(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,s=void 0===i?null:i,a=e.layout,o=void 0===a?null:a,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==s&&void 0!==s?s:this.container,this.layout=null!==o&&void 0!==o?o:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==d&&void 0!==d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,s=n.height,a=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+a+o,u=i+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}],t&&AG(e.prototype,t),n&&AG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var RG=n(2322),DG=n.n(RG),LG=n(6361),FG=n.n(LG);function UG(e){return UG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UG(e)}function BG(){return BG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BG.apply(this,arguments)}function VG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zG(Object(n),!0).forEach((function(t){HG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HG(e,t,n){return t=function(e){var t=function(e,t){if("object"!=UG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UG(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WG=function(e,t,n,r,i){var s,a=n-r;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+n,",").concat(t),s+="L ".concat(e+n-a/2,",").concat(t+i),s+="L ".concat(e+n-a/2-r,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z")},KG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GG=function(e){var t=qG(qG({},KG),e),n=(0,r.useRef)(),i=VG((0,r.useState)(-1),2),s=i[0],a=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}}),[]);var o=t.x,l=t.y,c=t.upperWidth,u=t.lowerWidth,d=t.height,h=t.className,f=t.animationEasing,m=t.animationDuration,p=t.animationBegin,g=t.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||u!==+u||d!==+d||0===c&&0===u||0===d)return null;var y=$P("recharts-trapezoid",h);return g?r.createElement($F,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:d,x:o,y:l},to:{upperWidth:c,lowerWidth:u,height:d,x:o,y:l},duration:m,animationEasing:f,isActive:g},(function(e){var i=e.upperWidth,a=e.lowerWidth,o=e.height,l=e.x,c=e.y;return r.createElement($F,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,easing:f},r.createElement("path",BG({},FM(t,!0),{className:y,d:WG(l,c,i,a,o),ref:n})))})):r.createElement("g",null,r.createElement("path",BG({},FM(t,!0),{className:y,d:WG(o,l,c,u,d)})))};function YG(e){return YG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YG(e)}function XG(){return XG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XG.apply(this,arguments)}function ZG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZG(Object(n),!0).forEach((function(t){JG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function JG(e,t,n){return t=function(e){var t=function(e,t){if("object"!=YG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=YG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==YG(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eY=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,s=e.sign,a=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(a?1:-1)+r,u=Math.asin(o/c)/KW,d=l?i:i+s*u,h=l?i-s*u:i;return{center:YW(t,n,c,d),circleTangency:YW(t,n,r,d),lineTangency:YW(t,n,c*Math.cos(u*KW),h),theta:u}},tY=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,s=e.startAngle,a=function(e,t){return JP(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),o=s+a,l=YW(t,n,i,s),c=YW(t,n,i,o),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(s>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var d=YW(t,n,r,s),h=YW(t,n,r,o);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(s<=o),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},nY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rY=function(e){var t=QG(QG({},nY),e),n=t.cx,i=t.cy,s=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=t.className;if(a<s||u===d)return null;var f,m=$P("recharts-sector",h),p=a-s,g=sM(o,p,0,!0);return f=g>0&&Math.abs(u-d)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=JP(c-l),d=eY({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:o}),h=d.circleTangency,f=d.lineTangency,m=d.theta,p=eY({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:o}),g=p.circleTangency,y=p.lineTangency,v=p.theta,b=o?Math.abs(l-c):Math.abs(l-c)-m-v;if(b<0)return a?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):tY({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var x="M ".concat(f.x,",").concat(f.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var w=eY({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),_=w.circleTangency,N=w.lineTangency,j=w.theta,S=eY({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),E=S.circleTangency,C=S.lineTangency,k=S.theta,T=o?Math.abs(l-c):Math.abs(l-c)-j-k;if(T<0&&0===s)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(C.x,",").concat(C.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(E.x,",").concat(E.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:n,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(g,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):tY({cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),r.createElement("path",XG({},FM(t,!0),{className:m,d:f,role:"img"}))},iY=["option","shapeType","propTransformer","activeClassName","isActive"];function sY(e){return sY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sY(e)}function aY(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oY(Object(n),!0).forEach((function(t){cY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=sY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sY(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uY(e,t){return lY(lY({},t),e)}function dY(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return r.createElement(JF,n);case"trapezoid":return r.createElement(GG,n);case"sector":return r.createElement(rY,n);case"symbols":if(function(e){return"symbols"===e}(t))return r.createElement(UD,n);break;default:return null}}function hY(e){var t,n=e.option,i=e.shapeType,s=e.propTransformer,a=void 0===s?uY:s,o=e.activeClassName,l=void 0===o?"recharts-active-shape":o,c=e.isActive,u=aY(e,iY);if((0,r.isValidElement)(n))t=(0,r.cloneElement)(n,lY(lY({},u),function(e){return(0,r.isValidElement)(e)?e.props:e}(n)));else if(fM()(n))t=n(u);else if(DG()(n)&&!FG()(n)){var d=a(n,u);t=r.createElement(dY,{shapeType:i,elementProps:d})}else{var h=u;t=r.createElement(dY,{shapeType:i,elementProps:h})}return c?r.createElement(cR,{className:l},t):t}function fY(e,t){return null!=t&&"trapezoids"in e.props}function mY(e,t){return null!=t&&"sectors"in e.props}function pY(e,t){return null!=t&&"points"in e.props}function gY(e,t){var n,r,i=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,s=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&s}function yY(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function vY(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function bY(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return fY(e,t)?n="trapezoids":mY(e,t)?n="sectors":pY(e,t)&&(n="points"),n}(n,t),s=function(e,t){var n,r;return fY(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:mY(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:pY(e,t)?t.payload:{}}(n,t),a=r.filter((function(e,r){var a=rH()(s,e),o=n.props[i].filter((function(e){var r=function(e,t){var n;return fY(e,t)?n=gY:mY(e,t)?n=yY:pY(e,t)&&(n=vY),n}(n,t);return r(e,t)})),l=n.props[i].indexOf(o[o.length-1]);return a&&r===l}));return r.indexOf(a[a.length-1])}function xY(){}function wY(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function _Y(e){this._context=e}function NY(e){this._context=e}function jY(e){this._context=e}_Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wY(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wY(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},NY.prototype={areaStart:xY,areaEnd:xY,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wY(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},jY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wY(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class SY{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function EY(e){this._context=e}function CY(e){this._context=e}function kY(e){return new CY(e)}function TY(e){return e<0?-1:1}function IY(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(TY(s)+TY(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function AY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function OY(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function PY(e){this._context=e}function MY(e){this._context=new RY(e)}function RY(e){this._context=e}function DY(e){this._context=e}function LY(e){var t,n,r=e.length-1,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function FY(e,t){this._context=e,this._t=t}function UY(e){return e[0]}function BY(e){return e[1]}function VY(e,t){var n=_D(!0),r=null,i=kY,s=null,a=TD(o);function o(o){var l,c,u,d=(o=Wq(o)).length,h=!1;for(null==r&&(s=i(u=a())),l=0;l<=d;++l)!(l<d&&n(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(u)return s=null,u+""||null}return e="function"===typeof e?e:void 0===e?UY:_D(e),t="function"===typeof t?t:void 0===t?BY:_D(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:_D(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:_D(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:_D(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(s=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=s=null:s=i(r=e),o):r},o}function $Y(e,t,n){var r=null,i=_D(!0),s=null,a=kY,o=null,l=TD(c);function c(c){var u,d,h,f,m,p=(c=Wq(c)).length,g=!1,y=new Array(p),v=new Array(p);for(null==s&&(o=a(m=l())),u=0;u<=p;++u){if(!(u<p&&i(f=c[u],u,c))===g)if(g=!g)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}g&&(y[u]=+e(f,u,c),v[u]=+t(f,u,c),o.point(r?+r(f,u,c):y[u],n?+n(f,u,c):v[u]))}if(m)return o=null,m+""||null}function u(){return VY().defined(i).curve(a).context(s)}return e="function"===typeof e?e:void 0===e?UY:_D(+e),t="function"===typeof t?t:_D(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?BY:_D(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:_D(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:_D(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:_D(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:_D(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:_D(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:_D(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:_D(!!e),c):i},c.curve=function(e){return arguments.length?(a=e,null!=s&&(o=a(s)),c):a},c.context=function(e){return arguments.length?(null==e?s=o=null:o=a(s=e),c):s},c}function zY(e){return zY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zY(e)}function qY(){return qY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qY.apply(this,arguments)}function HY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HY(Object(n),!0).forEach((function(t){KY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=zY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zY(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}EY.prototype={areaStart:xY,areaEnd:xY,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},CY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},PY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:OY(this,this._t0,AY(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,OY(this,AY(this,n=IY(this,e,t)),n);break;default:OY(this,this._t0,n=IY(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(MY.prototype=Object.create(PY.prototype)).point=function(e,t){PY.prototype.point.call(this,t,e)},RY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}},DY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=LY(e),i=LY(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},FY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var GY={curveBasisClosed:function(e){return new NY(e)},curveBasisOpen:function(e){return new jY(e)},curveBasis:function(e){return new _Y(e)},curveBumpX:function(e){return new SY(e,!0)},curveBumpY:function(e){return new SY(e,!1)},curveLinearClosed:function(e){return new EY(e)},curveLinear:kY,curveMonotoneX:function(e){return new PY(e)},curveMonotoneY:function(e){return new MY(e)},curveNatural:function(e){return new DY(e)},curveStep:function(e){return new FY(e,.5)},curveStepAfter:function(e){return new FY(e,1)},curveStepBefore:function(e){return new FY(e,0)}},YY=function(e){return e.x===+e.x&&e.y===+e.y},XY=function(e){return e.x},ZY=function(e){return e.y},QY=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,s=void 0===i?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(fM()(e))return e;var n="curve".concat(JR()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?GY[n]||kY:GY["".concat(n).concat("vertical"===t?"Y":"X")]}(r,o),d=c?s.filter((function(e){return YY(e)})):s;if(Array.isArray(a)){var h=c?a.filter((function(e){return YY(e)})):a,f=d.map((function(e,t){return WY(WY({},e),{},{base:h[t]})}));return t="vertical"===o?$Y().y(ZY).x1(XY).x0((function(e){return e.base.x})):$Y().x(XY).y1(ZY).y0((function(e){return e.base.y})),t.defined(YY).curve(u),t(f)}return(t="vertical"===o&&tM(a)?$Y().y(ZY).x1(XY).x0(a):tM(a)?$Y().x(XY).y1(ZY).y0(a):VY().x(XY).y(ZY)).defined(YY).curve(u),t(d)},JY=function(e){var t=e.className,n=e.points,i=e.path,s=e.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?QY(e):i;return r.createElement("path",qY({},FM(e,!1),NM(e),{className:$P("recharts-curve",t),d:a,ref:s}))};function eX(e){return eX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eX(e)}var tX=["x","y","top","left","width","height","className"];function nX(){return nX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nX.apply(this,arguments)}function rX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=eX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eX(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sX(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var aX=function(e,t,n,r,i,s){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n)},oX=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,s=void 0===i?0:i,a=e.top,o=void 0===a?0:a,l=e.left,c=void 0===l?0:l,u=e.width,d=void 0===u?0:u,h=e.height,f=void 0===h?0:h,m=e.className,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rX(Object(n),!0).forEach((function(t){iX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:n,y:s,top:o,left:c,width:d,height:f},sX(e,tX));return tM(n)&&tM(s)&&tM(d)&&tM(f)&&tM(o)&&tM(c)?r.createElement("path",nX({},FM(p,!0),{className:$P("recharts-cross",m),d:aX(n,s,d,f,o,c)})):null};function lX(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,s=e.endAngle;return{points:[YW(t,n,r,i),YW(t,n,r,s)],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function cX(e,t,n){var r,i,s,a;if("horizontal"===e)s=r=t.x,i=n.top,a=n.top+n.height;else if("vertical"===e)a=i=t.y,r=n.left,s=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return lX(t);var o=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=YW(o,l,c,d),f=YW(o,l,u,d);r=h.x,i=h.y,s=f.x,a=f.y}return[{x:r,y:i},{x:s,y:a}]}function uX(e){return uX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uX(e)}function dX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dX(Object(n),!0).forEach((function(t){fX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=uX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uX(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mX(e){var t,n,i,s=e.element,a=e.tooltipEventType,o=e.isActive,l=e.activeCoordinate,c=e.activePayload,u=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=null!==(t=s.props.cursor)&&void 0!==t?t:null===(n=s.type.defaultProps)||void 0===n?void 0:n.cursor;if(!s||!p||!o||!l||"ScatterChart"!==m&&"axis"!==a)return null;var g=JY;if("ScatterChart"===m)i=l,g=oX;else if("BarChart"===m)i=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(f,l,u,h),g=JF;else if("radial"===f){var y=lX(l),v=y.cx,b=y.cy,x=y.radius;i={cx:v,cy:b,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:x,outerRadius:x},g=rY}else i={points:cX(f,l,u)},g=JY;var w=hX(hX(hX(hX({stroke:"#ccc",pointerEvents:"none"},u),i),FM(p,!1)),{},{payload:c,payloadIndex:d,className:$P("recharts-tooltip-cursor",p.className)});return(0,r.isValidElement)(p)?(0,r.cloneElement)(p,w):(0,r.createElement)(g,w)}var pX=["item"],gX=["children","className","width","height","style","compact","title","desc"];function yX(e){return yX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yX(e)}function vX(){return vX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vX.apply(this,arguments)}function bX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||CX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xX(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OX(r.key),r)}}function _X(e,t,n){return t=jX(t),function(e,t){if(t&&("object"===yX(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,NX()?Reflect.construct(t,n||[],jX(e).constructor):t.apply(e,n))}function NX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NX=function(){return!!e})()}function jX(e){return jX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jX(e)}function SX(e,t){return SX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SX(e,t)}function EX(e){return function(e){if(Array.isArray(e))return kX(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||CX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CX(e,t){if(e){if("string"===typeof e)return kX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kX(e,t):void 0}}function kX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function TX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TX(Object(n),!0).forEach((function(t){AX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AX(e,t,n){return(t=OX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OX(e){var t=function(e,t){if("object"!=yX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yX(t)?t:t+""}var PX={xAxis:["bottom","top"],yAxis:["left","right"]},MX={width:"100%",height:"100%"},RX={x:0,y:0};function DX(e){return e}var LX=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,s=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(EX(e),EX(n)):e}),[]);return s.length>0?s:e&&e.length&&tM(r)&&tM(i)?e.slice(r,i+1):[]};function FX(e){return"number"===e?[0,"auto"]:void 0}var UX=function(e,t,n,r){var i=e.graphicalItems,s=e.tooltipAxis,a=LX(t,e);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(i,o){var l,c,u=null!==(l=o.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=lM(void 0===u?a:u,s.dataKey,r):c=u&&u[n]||a[n];return c?[].concat(EX(i),[_W(o,c)]):i}),[])},BX=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),a=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,a=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var o=i.range,l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,d=l>=a-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(JP(u-c)!==JP(d-u)){var f=[];if(JP(d-u)===JP(o[1]-o[0])){h=d;var m=u+o[1]-o[0];f[0]=Math.min(m,(m+c)/2),f[1]=Math.max(m,(m+c)/2)}else{h=c;var p=d+o[1]-o[0];f[0]=Math.min(u,(p+u)/2),f[1]=Math.max(u,(p+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){s=r[l].index;break}}else{var y=Math.min(c,d),v=Math.max(c,d);if(e>(y+u)/2&&e<=(v+u)/2){s=r[l].index;break}}}else for(var b=0;b<a;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){s=n[b].index;break}return s}(s,a,l,o);if(c>=0&&l){var u=l[c]&&l[c].value,d=UX(e,t,c,u),h=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var s=i.coordinate,a=r.radius;return IX(IX(IX({},r),YW(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,l=r.angle;return IX(IX(IX({},r),YW(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return RX}(n,a,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},VX=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,s=t.axisIdKey,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=cW(c,i);return n.reduce((function(t,n){var f,m=void 0!==n.type.defaultProps?IX(IX({},n.type.defaultProps),n.props):n.props,p=m.type,g=m.dataKey,y=m.allowDataOverflow,v=m.allowDuplicatedCategory,b=m.scale,x=m.ticks,w=m.includeHidden,_=m[s];if(t[_])return t;var N,j,S,E=LX(e.data,{graphicalItems:r.filter((function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===_})),dataStartIndex:o,dataEndIndex:l}),C=E.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(r&&i&&tM(r)&&tM(i))return!0}return!1})(m.domain,y,p)&&(N=bW(m.domain,null,y),!h||"number"!==p&&"auto"===b||(S=sW(E,g,"category")));var k=FX(p);if(!N||0===N.length){var T,I=null!==(T=m.domain)&&void 0!==T?T:k;if(g){if(N=sW(E,g,p),"category"===p&&h){var A=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(N);v&&A?(j=N,N=ZM()(0,C)):v||(N=wW(I,N,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(EX(e),[t])}),[]))}else if("category"===p)N=v?N.filter((function(e){return""!==e&&!dM()(e)})):wW(I,N,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||dM()(t)?e:[].concat(EX(e),[t])}),[]);else if("number"===p){var O=function(e,t,n,r,i){var s=t.map((function(t){return oW(e,t,n,i,r)})).filter((function(e){return!dM()(e)}));return s&&s.length?s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(E,r.filter((function(e){var t,n,r=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===_&&(w||!i)})),g,i,c);O&&(N=O)}!h||"number"!==p&&"auto"===b||(S=sW(E,g,"category"))}else N=h?ZM()(0,C):a&&a[_]&&a[_].hasStack&&"number"===p?"expand"===d?[0,1]:gW(a[_].stackGroups,o,l):lW(E,r.filter((function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===_&&(w||!n)})),p,c,!0);if("number"===p)N=EG(u,N,_,i,x),I&&(N=bW(I,N,y));else if("category"===p&&I){var P=I;N.every((function(e){return P.indexOf(e)>=0}))&&(N=P)}}return IX(IX({},t),{},AX({},_,IX(IX({},m),{},{axisType:i,domain:N,categoricalDomain:S,duplicateDomain:j,originalDomain:null!==(f=m.domain)&&void 0!==f?f:k,isCategorical:h,layout:c})))}),{})},$X=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,s=t.graphicalItems,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),d=PM(c,i),h={};return d&&d.length?h=VX(e,{axes:d,graphicalItems:s,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:o,dataEndIndex:l}):s&&s.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,s=t.axisIdKey,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=LX(e.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:l}),h=d.length,f=cW(c,i),m=-1;return n.reduce((function(e,t){var p,g=(void 0!==t.type.defaultProps?IX(IX({},t.type.defaultProps),t.props):t.props)[s],y=FX("number");return e[g]?e:(m++,f?p=ZM()(0,h):a&&a[g]&&a[g].hasStack?(p=gW(a[g].stackGroups,o,l),p=EG(u,p,g,i)):(p=bW(y,lW(d,n.filter((function(e){var t,n,r=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!i})),"number",c),r.defaultProps.allowDataOverflow),p=EG(u,p,g,i)),IX(IX({},e),{},AX({},g,IX(IX({axisType:i},r.defaultProps),{},{hide:!0,orientation:XP()(PX,"".concat(i,".").concat(m%2),null),domain:p,originalDomain:y,isCategorical:f,layout:c}))))}),{})}(e,{Axis:i,graphicalItems:s,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:o,dataEndIndex:l})),h},zX=function(e){var t=e.children,n=e.defaultShowTooltip,r=MM(t,BW),i=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(s=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},qX=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},HX=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,s=e.yAxisMap,a=void 0===s?{}:s,o=n.width,l=n.height,c=n.children,u=n.margin||{},d=MM(c,BW),h=MM(c,dL),f=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:IX(IX({},e),{},AX({},r,e[r]+n.width))}),{left:u.left||0,right:u.right||0}),m=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:IX(IX({},e),{},AX({},r,XP()(e,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),p=IX(IX({},m),f),g=p.bottom;d&&(p.bottom+=d.props.height||BW.defaultProps.height),h&&t&&(p=function(e,t,n,r){var i=n.children,s=n.width,a=n.margin,o=s-(a.left||0)-(a.right||0),l=ZH({children:i,legendWidth:o});if(l){var c=r||{},u=c.width,d=c.height,h=l.align,f=l.verticalAlign,m=l.layout;if(("vertical"===m||"horizontal"===m&&"middle"===f)&&"center"!==h&&tM(e[h]))return nW(nW({},e),{},rW({},h,e[h]+(u||0)));if(("horizontal"===m||"vertical"===m&&"center"===h)&&"middle"!==f&&tM(e[f]))return nW(nW({},e),{},rW({},f,e[f]+(d||0)))}return e}(p,0,n,t));var y=o-p.left-p.right,v=l-p.top-p.bottom;return IX(IX({brushBottom:g},p),{},{width:Math.max(y,0),height:Math.max(v,0)})},WX=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},KX=["points","className","baseLinePoints","connectNulls"];function GX(){return GX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GX.apply(this,arguments)}function YX(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XX(e){return function(e){if(Array.isArray(e))return ZX(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ZX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var QX=function(e){return e&&e.x===+e.x&&e.y===+e.y},JX=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){QX(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),QX(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(XX(e),XX(t))}),[])]);var r=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(r,"Z"):r},eZ=function(e){var t=e.points,n=e.className,i=e.baseLinePoints,s=e.connectNulls,a=YX(e,KX);if(!t||!t.length)return null;var o=$P("recharts-polygon",n);if(i&&i.length){var l=a.stroke&&"none"!==a.stroke,c=function(e,t,n){var r=JX(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(JX(t.reverse(),n).slice(1))}(t,i,s);return r.createElement("g",{className:o},r.createElement("path",GX({},FM(a,!0),{fill:"Z"===c.slice(-1)?a.fill:"none",stroke:"none",d:c})),l?r.createElement("path",GX({},FM(a,!0),{fill:"none",d:JX(t,s)})):null,l?r.createElement("path",GX({},FM(a,!0),{fill:"none",d:JX(i,s)})):null)}var u=JX(t,s);return r.createElement("path",GX({},FM(a,!0),{fill:"Z"===u.slice(-1)?a.fill:"none",className:o,d:u}))};function tZ(e){return tZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tZ(e)}function nZ(){return nZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nZ.apply(this,arguments)}function rZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rZ(Object(n),!0).forEach((function(t){uZ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dZ(r.key),r)}}function aZ(e,t,n){return t=lZ(t),function(e,t){if(t&&("object"===tZ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oZ()?Reflect.construct(t,n||[],lZ(e).constructor):t.apply(e,n))}function oZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oZ=function(){return!!e})()}function lZ(e){return lZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lZ(e)}function cZ(e,t){return cZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cZ(e,t)}function uZ(e,t,n){return(t=dZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dZ(e){var t=function(e,t){if("object"!=tZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tZ(t)?t:t+""}var hZ=Math.PI/180,fZ=1e-5,mZ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aZ(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cZ(e,t)}(t,e),n=t,i=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,i=t.radius,s=t.orientation,a=t.tickSize||8,o=YW(n,r,i,e.coordinate),l=YW(n,r,i+("inner"===s?-1:1)*a,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*hZ);return n>fZ?"outer"===t?"start":"end":n<-fZ?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,i=e.radius,s=e.axisLine,a=e.axisLineType,o=iZ(iZ({},FM(this.props,!1)),{},{fill:"none"},FM(s,!1));if("circle"===a)return r.createElement(fL,nZ({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:n,r:i}));var l=this.props.ticks.map((function(e){return YW(t,n,i,e.coordinate)}));return r.createElement(eZ,nZ({className:"recharts-polar-angle-axis-line"},o,{points:l}))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,s=n.tick,a=n.tickLine,o=n.tickFormatter,l=n.stroke,c=FM(this.props,!1),u=FM(s,!1),d=iZ(iZ({},c),{},{fill:"none"},FM(a,!1)),h=i.map((function(n,i){var h=e.getTickLineCoord(n),f=iZ(iZ(iZ({textAnchor:e.getTickTextAnchor(n)},c),{},{stroke:"none",fill:l},u),{},{index:i,payload:n,x:h.x2,y:h.y2});return r.createElement(cR,nZ({className:$P("recharts-polar-angle-axis-tick",eK(s)),key:"tick-".concat(n.coordinate)},jM(e.props,n,i)),a&&r.createElement("line",nZ({className:"recharts-polar-angle-axis-tick-line"},d,h)),s&&t.renderTickItem(s,f,o?o(n.value,i):n.value))}));return r.createElement(cR,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,i=e.axisLine;return n<=0||!t||!t.length?null:r.createElement(cR,{className:$P("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],s=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):fM()(e)?e(t):r.createElement(GU,nZ({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],i&&sZ(n.prototype,i),s&&sZ(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);uZ(mZ,"displayName","PolarAngleAxis"),uZ(mZ,"axisType","angleAxis"),uZ(mZ,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var pZ=n(2794),gZ=n.n(pZ),yZ=n(9364),vZ=n.n(yZ),bZ=["cx","cy","angle","ticks","axisLine"],xZ=["ticks","tick","angle","tickFormatter","stroke"];function wZ(e){return wZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wZ(e)}function _Z(){return _Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_Z.apply(this,arguments)}function NZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NZ(Object(n),!0).forEach((function(t){AZ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SZ(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function EZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OZ(r.key),r)}}function CZ(e,t,n){return t=TZ(t),function(e,t){if(t&&("object"===wZ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kZ()?Reflect.construct(t,n||[],TZ(e).constructor):t.apply(e,n))}function kZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kZ=function(){return!!e})()}function TZ(e){return TZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},TZ(e)}function IZ(e,t){return IZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IZ(e,t)}function AZ(e,t,n){return(t=OZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OZ(e){var t=function(e,t){if("object"!=wZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wZ(t)?t:t+""}var PZ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),CZ(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IZ(e,t)}(t,e),n=t,i=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,i=n.cx,s=n.cy;return YW(i,s,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,s=gZ()(i,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:vZ()(i,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:s.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,i=e.angle,s=e.ticks,a=e.axisLine,o=SZ(e,bZ),l=s.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),c=YW(t,n,l[0],i),u=YW(t,n,l[1],i),d=jZ(jZ(jZ({},FM(o,!1)),{},{fill:"none"},FM(a,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return r.createElement("line",_Z({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,s=n.tick,a=n.angle,o=n.tickFormatter,l=n.stroke,c=SZ(n,xZ),u=this.getTickTextAnchor(),d=FM(c,!1),h=FM(s,!1),f=i.map((function(n,i){var c=e.getTickValueCoord(n),f=jZ(jZ(jZ(jZ({textAnchor:u,transform:"rotate(".concat(90-a,", ").concat(c.x,", ").concat(c.y,")")},d),{},{stroke:"none",fill:l},h),{},{index:i},c),{},{payload:n});return r.createElement(cR,_Z({className:$P("recharts-polar-radius-axis-tick",eK(s)),key:"tick-".concat(n.coordinate)},jM(e.props,n,i)),t.renderTickItem(s,f,o?o(n.value,i):n.value))}));return r.createElement(cR,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,i=e.tick;return t&&t.length?r.createElement(cR,{className:$P("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),i&&this.renderTicks(),dK.renderCallByParent(this.props,this.getViewBox())):null}}],s=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):fM()(e)?e(t):r.createElement(GU,_Z({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],i&&EZ(n.prototype,i),s&&EZ(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);AZ(PZ,"displayName","PolarRadiusAxis"),AZ(PZ,"axisType","radiusAxis"),AZ(PZ,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var MZ=n(4065),RZ=n.n(MZ);function DZ(e){return DZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DZ(e)}var LZ=["valueAccessor"],FZ=["data","dataKey","clockWise","id","textBreakAll"];function UZ(e){return function(e){if(Array.isArray(e))return BZ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return BZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BZ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VZ(){return VZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VZ.apply(this,arguments)}function $Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$Z(Object(n),!0).forEach((function(t){qZ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qZ(e,t,n){return t=function(e){var t=function(e,t){if("object"!=DZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=DZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DZ(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HZ(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var WZ=function(e){return Array.isArray(e.value)?RZ()(e.value):e.value};function KZ(e){var t=e.valueAccessor,n=void 0===t?WZ:t,i=HZ(e,LZ),s=i.data,a=i.dataKey,o=i.clockWise,l=i.id,c=i.textBreakAll,u=HZ(i,FZ);return s&&s.length?r.createElement(cR,{className:"recharts-label-list"},s.map((function(e,t){var i=dM()(a)?n(e,t):iW(e&&e.payload,a),s=dM()(l)?{}:{id:"".concat(l,"-").concat(t)};return r.createElement(dK,VZ({},FM(e,!0),u,s,{parentViewBox:e.parentViewBox,value:i,textBreakAll:c,viewBox:dK.parseViewBox(dM()(o)?e:zZ(zZ({},e),{},{clockWise:o})),key:"label-".concat(t),index:t}))}))):null}KZ.displayName="LabelList",KZ.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=PM(e.children,KZ).map((function(e,n){return(0,r.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return i;var s=function(e,t){return e?!0===e?r.createElement(KZ,{key:"labelList-implicit",data:t}):r.isValidElement(e)||fM()(e)?r.createElement(KZ,{key:"labelList-implicit",data:t,content:e}):pM()(e)?r.createElement(KZ,VZ({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[s].concat(UZ(i))};var GZ,YZ=function(e){return null};function XZ(e){return XZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XZ(e)}function ZZ(){return ZZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZZ.apply(this,arguments)}function QZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QZ(Object(n),!0).forEach((function(t){sQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aQ(r.key),r)}}function tQ(e,t,n){return t=rQ(t),function(e,t){if(t&&("object"===XZ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nQ()?Reflect.construct(t,n||[],rQ(e).constructor):t.apply(e,n))}function nQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nQ=function(){return!!e})()}function rQ(e){return rQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rQ(e)}function iQ(e,t){return iQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iQ(e,t)}function sQ(e,t,n){return(t=aQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aQ(e){var t=function(e,t){if("object"!=XZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=XZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XZ(t)?t:t+""}YZ.displayName="Cell";var oQ=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sQ(n=tQ(this,t,[e]),"pieRef",null),sQ(n,"sectorRefs",[]),sQ(n,"id",iM("recharts-pie-")),sQ(n,"handleAnimationEnd",(function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),fM()(e)&&e()})),sQ(n,"handleAnimationStart",(function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),fM()(e)&&e()})),n.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iQ(e,t)}(t,e),n=t,i=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.label,s=n.labelLine,a=n.dataKey,o=n.valueKey,l=FM(this.props,!1),c=FM(i,!1),u=FM(s,!1),d=i&&i.offsetRadius||20,h=e.map((function(e,n){var h=(e.startAngle+e.endAngle)/2,f=YW(e.cx,e.cy,e.outerRadius+d,h),m=JZ(JZ(JZ(JZ({},l),e),{},{stroke:"none"},c),{},{index:n,textAnchor:t.getTextAnchor(f.x,e.cx)},f),p=JZ(JZ(JZ(JZ({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:n,points:[YW(e.cx,e.cy,e.outerRadius,h),f]}),g=a;return dM()(a)&&dM()(o)?g="value":dM()(a)&&(g=o),r.createElement(cR,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(n)},s&&t.renderLabelLineItem(s,p,"line"),t.renderLabelItem(i,m,iW(e,g)))}));return r.createElement(cR,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,i=n.activeShape,s=n.blendStroke,a=n.inactiveShape;return e.map((function(n,o){if(0===(null===n||void 0===n?void 0:n.startAngle)&&0===(null===n||void 0===n?void 0:n.endAngle)&&1!==e.length)return null;var l=t.isActiveIndex(o),c=a&&t.hasActiveIndex()?a:null,u=l?i:c,d=JZ(JZ({},n),{},{stroke:s?n.fill:n.stroke,tabIndex:-1});return r.createElement(cR,ZZ({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},jM(t.props,n,o),{key:"sector-".concat(null===n||void 0===n?void 0:n.startAngle,"-").concat(null===n||void 0===n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(o)}),r.createElement(hY,ZZ({option:u,isActive:l,shapeType:"sector"},d)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,i=t.isAnimationActive,s=t.animationBegin,a=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state,u=c.prevSectors,d=c.prevIsAnimationActive;return r.createElement($F,{begin:s,duration:a,isActive:i,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var i=t.t,s=[],a=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=u&&u[t],r=t>0?XP()(e,"paddingAngle",0):0;if(n){var o=oM(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=JZ(JZ({},e),{},{startAngle:a+r,endAngle:a+o(i)+r});s.push(l),a=l.endAngle}else{var c=e.endAngle,d=e.startAngle,h=oM(0,c-d)(i),f=JZ(JZ({},e),{},{startAngle:a+r,endAngle:a+h+r});s.push(f),a=f.endAngle}})),r.createElement(cR,null,e.renderSectorsStatically(s))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&rH()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,i=t.sectors,s=t.className,a=t.label,o=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.isAnimationActive,h=this.state.isAnimationFinished;if(n||!i||!i.length||!tM(o)||!tM(l)||!tM(c)||!tM(u))return null;var f=$P("recharts-pie",s);return r.createElement(cR,{tabIndex:this.props.rootTabIndex,className:f,ref:function(t){e.pieRef=t}},this.renderSectors(),a&&this.renderLabels(i),dK.renderCallByParent(this.props,null,!1),(!d||h)&&KZ.renderCallByParent(this.props,i,!1))}}],s=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,n){if(r.isValidElement(e))return r.cloneElement(e,t);if(fM()(e))return e(t);var i=$P("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return r.createElement(JY,ZZ({},t,{key:n,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(e,t,n){if(r.isValidElement(e))return r.cloneElement(e,t);var i=n;if(fM()(e)&&(i=e(t),r.isValidElement(i)))return i;var s=$P("recharts-pie-label-text","boolean"===typeof e||fM()(e)?"":e.className);return r.createElement(GU,ZZ({},t,{alignmentBaseline:"middle",className:s}),i)}}],i&&eQ(n.prototype,i),s&&eQ(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);GZ=oQ,sQ(oQ,"displayName","Pie"),sQ(oQ,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!DR.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),sQ(oQ,"parseDeltaAngle",(function(e,t){return JP(t-e)*Math.min(Math.abs(t-e),360)})),sQ(oQ,"getRealPieData",(function(e){var t=e.data,n=e.children,r=FM(e,!1),i=PM(n,YZ);return t&&t.length?t.map((function(e,t){return JZ(JZ(JZ({payload:e},r),e),i&&i[t]&&i[t].props)})):i&&i.length?i.map((function(e){return JZ(JZ({},r),e.props)})):[]})),sQ(oQ,"parseCoordinateOfPie",(function(e,t){var n=t.top,r=t.left,i=t.width,s=t.height,a=XW(i,s);return{cx:r+sM(e.cx,i,i/2),cy:n+sM(e.cy,s,s/2),innerRadius:sM(e.innerRadius,a,0),outerRadius:sM(e.outerRadius,a,.8*a),maxRadius:e.maxRadius||Math.sqrt(i*i+s*s)/2}})),sQ(oQ,"getComposedData",(function(e){var t=e.item,n=e.offset,r=void 0!==t.type.defaultProps?JZ(JZ({},t.type.defaultProps),t.props):t.props,i=GZ.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,a=r.startAngle,o=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,h=r.tooltipType,f=Math.abs(r.minAngle),m=GZ.parseCoordinateOfPie(r,n),p=GZ.parseDeltaAngle(a,o),g=Math.abs(p),y=c;dM()(c)&&dM()(d)?(cM(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):dM()(c)&&(cM(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=d);var v,b,x=i.filter((function(e){return 0!==iW(e,y,0)})).length,w=g-x*f-(g>=360?x:x-1)*l,_=i.reduce((function(e,t){var n=iW(t,y,0);return e+(tM(n)?n:0)}),0);_>0&&(v=i.map((function(e,t){var n,r=iW(e,y,0),i=iW(e,u,t),o=(tM(r)?r:0)/_,c=(n=t?b.endAngle+JP(p)*l*(0!==r?1:0):a)+JP(p)*((0!==r?f:0)+o*w),d=(n+c)/2,g=(m.innerRadius+m.outerRadius)/2,v=[{name:i,value:r,payload:e,dataKey:y,type:h}],x=YW(m.cx,m.cy,g,d);return b=JZ(JZ(JZ({percent:o,cornerRadius:s,name:i,tooltipPayload:v,midAngle:d,middleRadius:g,tooltipPosition:x},e),m),{},{value:iW(e,y),startAngle:n,endAngle:c,payload:e,paddingAngle:JP(p)*l})})));return JZ(JZ({},m),{},{sectors:v,data:i})}));var lQ=function(e){var t=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,s=void 0===i?"axis":i,a=e.validateTooltipEventTypes,o=void 0===a?["axis"]:a,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,s=t.updateId,a=t.dataStartIndex,o=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,f=e.maxBarSize,m=qX(u),p=m.numericAxisName,g=m.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some((function(e){var t=TM(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,m){var b=LX(e.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:o}),x=void 0!==n.type.defaultProps?IX(IX({},n.type.defaultProps),n.props):n.props,w=x.dataKey,_=x.maxBarSize,N=x["".concat(p,"Id")],j=x["".concat(g,"Id")],S=l.reduce((function(e,n){var r=t["".concat(n.axisType,"Map")],i=x["".concat(n.axisType,"Id")];r&&r[i]||"zAxis"===n.axisType||tR(!1);var s=r[i];return IX(IX({},e),{},AX(AX({},n.axisType,s),"".concat(n.axisType,"Ticks"),uW(s)))}),{}),E=S[g],C=S["".concat(g,"Ticks")],k=r&&r[N]&&r[N].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?nW(nW({},e.type.defaultProps),e.props):e.props).stackId;if(nM(r)){var i=t[r];if(i){var s=i.items.indexOf(e);return s>=0?i.stackedData[s]:null}}return null}(n,r[N].stackGroups),T=TM(n.type).indexOf("Bar")>=0,I=xW(E,C),A=[],O=y&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var s={},a=Object.keys(i),o=0,l=a.length;o<l;o++)for(var c=i[a[o]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var f=c[u[d]],m=f.items,p=f.cateAxisId,g=m.filter((function(e){return TM(e.type).indexOf("Bar")>=0}));if(g&&g.length){var y=g[0].type.defaultProps,v=void 0!==y?nW(nW({},y),g[0].props):g[0].props,b=v.barSize,x=v[p];s[x]||(s[x]=[]);var w=dM()(b)?t:b;s[x].push({item:g[0],stackList:g.slice(1),barSize:dM()(w)?void 0:sM(w,n,0)})}}return s}({barSize:c,stackGroups:r,totalSize:WX(S,g)});if(T){var P,M,R=dM()(_)?f:_,D=null!==(P=null!==(M=xW(E,C,!0))&&void 0!==M?M:R)&&void 0!==P?P:0;A=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,s=void 0===i?[]:i,a=e.maxBarSize,o=s.length;if(o<1)return null;var l,c=sM(t,r,0,!0),u=[];if(s[0].barSize===+s[0].barSize){var d=!1,h=r/o,f=s.reduce((function(e,t){return e+t.barSize||0}),0);(f+=(o-1)*c)>=r&&(f-=(o-1)*c,c=0),f>=r&&h>0&&(d=!0,f=o*(h*=.9));var m={offset:((r-f)/2|0)-c,size:0};l=s.reduce((function(e,t){var n={item:t.item,position:{offset:m.offset+m.size+c,size:d?h:t.barSize}},r=[].concat(JH(e),[n]);return m=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:m})})),r}),u)}else{var p=sM(n,r,0,!0);r-2*p-(o-1)*c<=0&&(c=0);var g=(r-2*p-(o-1)*c)/o;g>1&&(g>>=0);var y=a===+a?Math.min(g,a):g;l=s.reduce((function(e,t,n){var r=[].concat(JH(e),[{item:t.item,position:{offset:p+(g+c)*n+(g-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),u)}return l}({barGap:d,barCategoryGap:h,bandSize:D!==I?D:I,sizeList:O[j],maxBarSize:R}),D!==I&&(A=A.map((function(e){return IX(IX({},e),{},{position:IX(IX({},e.position),{},{offset:e.position.offset-D/2})})})))}var L=n&&n.type&&n.type.getComposedData;L&&v.push({props:IX(IX({},L(IX(IX({},S),{},{displayedData:b,props:e,dataKey:w,item:n,bandSize:I,barPosition:A,offset:i,stackedData:k,layout:u,dataStartIndex:a,dataEndIndex:o}))),{},AX(AX(AX({key:n.key||"item-".concat(m)},p,S[p]),g,S[g]),"animationId",s)),childIndex:$M(n,e.children),item:n})})),v},f=function(e,r){var i=e.props,s=e.dataStartIndex,a=e.dataEndIndex,o=e.updateId;if(!RM({props:i}))return null;var c=i.children,d=i.layout,f=i.stackOffset,m=i.data,p=i.reverseStackOrder,g=qX(d),y=g.numericAxisName,v=g.cateAxisName,b=PM(c,n),x=function(e,t,n,r,i,s){if(!e)return null;var a=(s?t.reverse():t).reduce((function(e,t){var i,s=null!==(i=t.type)&&void 0!==i&&i.defaultProps?nW(nW({},t.type.defaultProps),t.props):t.props,a=s.stackId;if(s.hide)return e;var o=s[n],l=e[o]||{hasStack:!1,stackGroups:{}};if(nM(a)){var c=l.stackGroups[a]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[a]=c}else l.stackGroups[iM("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return nW(nW({},e),{},rW({},o,l))}),{});return Object.keys(a).reduce((function(t,s){var o=a[s];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce((function(t,s){var a=o.stackGroups[s];return nW(nW({},t),{},rW({},s,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:pW(e,a.items,i)}))}),{})),nW(nW({},t),{},rW({},s,o))}),{})}(m,b,"".concat(y,"Id"),"".concat(v,"Id"),f,p),w=l.reduce((function(e,t){var n="".concat(t.axisType,"Map");return IX(IX({},e),{},AX({},n,$X(i,IX(IX({},t),{},{graphicalItems:b,stackGroups:t.axisType===y&&x,dataStartIndex:s,dataEndIndex:a}))))}),{}),_=HX(IX(IX({},w),{},{props:i,graphicalItems:b}),null===r||void 0===r?void 0:r.legendBBox);Object.keys(w).forEach((function(e){w[e]=u(i,w[e],_,e.replace("Map",""),t)}));var N=function(e){var t=aM(e),n=uW(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:JM()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:xW(t,n)}}(w["".concat(v,"Map")]),j=h(i,IX(IX({},w),{},{dataStartIndex:s,dataEndIndex:a,updateId:o,graphicalItems:b,stackGroups:x,offset:_}));return IX(IX({formattedGraphicalItems:j,graphicalItems:b,offset:_,stackGroups:x},N),w)},m=function(e){function n(e){var i,s,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),AX(a=_X(this,n,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),AX(a,"accessibilityManager",new MG),AX(a,"handleLegendBBoxUpdate",(function(e){if(e){var t=a.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;a.setState(IX({legendBBox:e},f({props:a.props,dataStartIndex:n,dataEndIndex:r,updateId:i},IX(IX({},a.state),{},{legendBBox:e}))))}})),AX(a,"handleReceiveSyncEvent",(function(e,t,n){if(a.props.syncId===e){if(n===a.eventEmitterSymbol&&"function"!==typeof a.props.syncMethod)return;a.applySyncEvent(t)}})),AX(a,"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==a.state.dataStartIndex||n!==a.state.dataEndIndex){var r=a.state.updateId;a.setState((function(){return IX({dataStartIndex:t,dataEndIndex:n},f({props:a.props,dataStartIndex:t,dataEndIndex:n,updateId:r},a.state))})),a.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),AX(a,"handleMouseEnter",(function(e){var t=a.getMouseInfo(e);if(t){var n=IX(IX({},t),{},{isTooltipActive:!0});a.setState(n),a.triggerSyncEvent(n);var r=a.props.onMouseEnter;fM()(r)&&r(n,e)}})),AX(a,"triggeredAfterMouseMove",(function(e){var t=a.getMouseInfo(e),n=t?IX(IX({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};a.setState(n),a.triggerSyncEvent(n);var r=a.props.onMouseMove;fM()(r)&&r(n,e)})),AX(a,"handleItemMouseEnter",(function(e){a.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),AX(a,"handleItemMouseLeave",(function(){a.setState((function(){return{isTooltipActive:!1}}))})),AX(a,"handleMouseMove",(function(e){e.persist(),a.throttleTriggeredAfterMouseMove(e)})),AX(a,"handleMouseLeave",(function(e){a.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};a.setState(t),a.triggerSyncEvent(t);var n=a.props.onMouseLeave;fM()(n)&&n(t,e)})),AX(a,"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&kM[t]?kM[t]:null}(e),r=XP()(a.props,"".concat(n));n&&fM()(r)&&r(null!==(t=/.*touch.*/i.test(n)?a.getMouseInfo(e.changedTouches[0]):a.getMouseInfo(e))&&void 0!==t?t:{},e)})),AX(a,"handleClick",(function(e){var t=a.getMouseInfo(e);if(t){var n=IX(IX({},t),{},{isTooltipActive:!0});a.setState(n),a.triggerSyncEvent(n);var r=a.props.onClick;fM()(r)&&r(n,e)}})),AX(a,"handleMouseDown",(function(e){var t=a.props.onMouseDown;fM()(t)&&t(a.getMouseInfo(e),e)})),AX(a,"handleMouseUp",(function(e){var t=a.props.onMouseUp;fM()(t)&&t(a.getMouseInfo(e),e)})),AX(a,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),AX(a,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.handleMouseDown(e.changedTouches[0])})),AX(a,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.handleMouseUp(e.changedTouches[0])})),AX(a,"handleDoubleClick",(function(e){var t=a.props.onDoubleClick;fM()(t)&&t(a.getMouseInfo(e),e)})),AX(a,"handleContextMenu",(function(e){var t=a.props.onContextMenu;fM()(t)&&t(a.getMouseInfo(e),e)})),AX(a,"triggerSyncEvent",(function(e){void 0!==a.props.syncId&&kG.emit(TG,a.props.syncId,e,a.eventEmitterSymbol)})),AX(a,"applySyncEvent",(function(e){var t=a.props,n=t.layout,r=t.syncMethod,i=a.state.updateId,s=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)a.setState(IX({dataStartIndex:s,dataEndIndex:o},f({props:a.props,dataStartIndex:s,dataEndIndex:o,updateId:i},a.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=a.state,h=d.offset,m=d.tooltipTicks;if(!h)return;if("function"===typeof r)u=r(m,e);else if("value"===r){u=-1;for(var p=0;p<m.length;p++)if(m[p].value===e.activeLabel){u=p;break}}var g=IX(IX({},h),{},{x:h.left,y:h.top}),y=Math.min(l,g.x+g.width),v=Math.min(c,g.y+g.height),b=m[u]&&m[u].value,x=UX(a.state,a.props.data,u),w=m[u]?{x:"horizontal"===n?m[u].coordinate:y,y:"horizontal"===n?v:m[u].coordinate}:RX;a.setState(IX(IX({},e),{},{activeLabel:b,activeCoordinate:w,activePayload:x,activeTooltipIndex:u}))}else a.setState(e)})),AX(a,"renderCursor",(function(e){var n,i=a.state,s=i.isTooltipActive,o=i.activeCoordinate,l=i.activePayload,c=i.offset,u=i.activeTooltipIndex,d=i.tooltipAxisBandSize,h=a.getTooltipEventType(),f=null!==(n=e.props.active)&&void 0!==n?n:s,m=a.props.layout,p=e.key||"_recharts-cursor";return r.createElement(mX,{key:p,activeCoordinate:o,activePayload:l,activeTooltipIndex:u,chartName:t,element:e,isActive:f,layout:m,offset:c,tooltipAxisBandSize:d,tooltipEventType:h})})),AX(a,"renderPolarAxis",(function(e,t,n){var i=XP()(e,"type.axisType"),s=XP()(a.state,"".concat(i,"Map")),o=e.type.defaultProps,l=void 0!==o?IX(IX({},o),e.props):e.props,c=s&&s[l["".concat(i,"Id")]];return(0,r.cloneElement)(e,IX(IX({},c),{},{className:$P(i,c.className),key:e.key||"".concat(t,"-").concat(n),ticks:uW(c,!0)}))})),AX(a,"renderPolarGrid",(function(e){var t=e.props,n=t.radialLines,i=t.polarAngles,s=t.polarRadius,o=a.state,l=o.radiusAxisMap,c=o.angleAxisMap,u=aM(l),d=aM(c),h=d.cx,f=d.cy,m=d.innerRadius,p=d.outerRadius;return(0,r.cloneElement)(e,{polarAngles:Array.isArray(i)?i:uW(d,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(s)?s:uW(u,!0).map((function(e){return e.coordinate})),cx:h,cy:f,innerRadius:m,outerRadius:p,key:e.key||"polar-grid",radialLines:n})})),AX(a,"renderLegend",(function(){var e=a.state.formattedGraphicalItems,t=a.props,n=t.children,i=t.width,s=t.height,o=a.props.margin||{},l=i-(o.left||0)-(o.right||0),u=ZH({children:n,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!u)return null;var d=u.item,h=xX(u,pX);return(0,r.cloneElement)(d,IX(IX({},h),{},{chartWidth:i,chartHeight:s,margin:o,onBBoxUpdate:a.handleLegendBBoxUpdate}))})),AX(a,"renderTooltip",(function(){var e,t=a.props,n=t.children,i=t.accessibilityLayer,s=MM(n,ZR);if(!s)return null;var o=a.state,l=o.isTooltipActive,c=o.activeCoordinate,u=o.activePayload,d=o.activeLabel,h=o.offset,f=null!==(e=s.props.active)&&void 0!==e?e:l;return(0,r.cloneElement)(s,{viewBox:IX(IX({},h),{},{x:h.left,y:h.top}),active:f,label:d,payload:f?u:[],coordinate:c,accessibilityLayer:i})})),AX(a,"renderBrush",(function(e){var t=a.props,n=t.margin,i=t.data,s=a.state,o=s.offset,l=s.dataStartIndex,c=s.dataEndIndex,u=s.updateId;return(0,r.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:hW(a.handleBrushChange,e.props.onChange),data:i,x:tM(e.props.x)?e.props.x:o.left,y:tM(e.props.y)?e.props.y:o.top+o.height+o.brushBottom-(n.bottom||0),width:tM(e.props.width)?e.props.width:o.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})})),AX(a,"renderReferenceElement",(function(e,t,n){if(!e)return null;var i=a.clipPathId,s=a.state,o=s.xAxisMap,l=s.yAxisMap,c=s.offset,u=e.type.defaultProps||{},d=e.props,h=d.xAxisId,f=void 0===h?u.xAxisId:h,m=d.yAxisId,p=void 0===m?u.yAxisId:m;return(0,r.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:o[f],yAxis:l[p],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:i})})),AX(a,"renderActivePoints",(function(e){var t=e.item,r=e.activePoint,i=e.basePoint,s=e.childIndex,a=e.isRange,o=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?IX(IX({},t.item.type.defaultProps),t.item.props):t.item.props,u=c.activeDot,d=IX(IX({index:s,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:aW(t.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},FM(u,!1)),NM(u));return o.push(n.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(s))),i?o.push(n.renderActiveDot(u,IX(IX({},d),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(s))):a&&o.push(null),o})),AX(a,"renderGraphicChild",(function(e,t,n){var i=a.filterFormatItem(e,t,n);if(!i)return null;var s=a.getTooltipEventType(),o=a.state,l=o.isTooltipActive,c=o.tooltipAxis,u=o.activeTooltipIndex,d=o.activeLabel,h=MM(a.props.children,ZR),f=i.props,m=f.points,p=f.isRange,g=f.baseLine,y=void 0!==i.item.type.defaultProps?IX(IX({},i.item.type.defaultProps),i.item.props):i.item.props,v=y.activeDot,b=y.hide,x=y.activeBar,w=y.activeShape,_=Boolean(!b&&l&&h&&(v||x||w)),N={};"axis"!==s&&h&&"click"===h.props.trigger?N={onClick:hW(a.handleItemMouseEnter,e.props.onClick)}:"axis"!==s&&(N={onMouseLeave:hW(a.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:hW(a.handleItemMouseEnter,e.props.onMouseEnter)});var j=(0,r.cloneElement)(e,IX(IX({},i.props),N));if(_){if(!(u>=0)){var S,E=(null!==(S=a.getItemByXY(a.state.activeCoordinate))&&void 0!==S?S:{graphicalItem:j}).graphicalItem,C=E.item,k=void 0===C?e:C,T=E.childIndex,I=IX(IX(IX({},i.props),N),{},{activeIndex:T});return[(0,r.cloneElement)(k,I),null,null]}var A,O;if(c.dataKey&&!c.allowDuplicatedCategory){var P="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());A=lM(m,P,d),O=p&&g&&lM(g,P,d)}else A=null===m||void 0===m?void 0:m[u],O=p&&g&&g[u];if(w||x){var M=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,r.cloneElement)(e,IX(IX(IX({},i.props),N),{},{activeIndex:M})),null,null]}if(!dM()(A))return[j].concat(EX(a.renderActivePoints({item:i,activePoint:A,basePoint:O,childIndex:u,isRange:p})))}return p?[j,null,null]:[j,null]})),AX(a,"renderCustomized",(function(e,t,n){return(0,r.cloneElement)(e,IX(IX({key:"recharts-customized-".concat(n)},a.props),a.state))})),AX(a,"renderMap",{CartesianGrid:{handler:DX,once:!0},ReferenceArea:{handler:a.renderReferenceElement},ReferenceLine:{handler:DX},ReferenceDot:{handler:a.renderReferenceElement},XAxis:{handler:DX},YAxis:{handler:DX},Brush:{handler:a.renderBrush,once:!0},Bar:{handler:a.renderGraphicChild},Line:{handler:a.renderGraphicChild},Area:{handler:a.renderGraphicChild},Radar:{handler:a.renderGraphicChild},RadialBar:{handler:a.renderGraphicChild},Scatter:{handler:a.renderGraphicChild},Pie:{handler:a.renderGraphicChild},Funnel:{handler:a.renderGraphicChild},Tooltip:{handler:a.renderCursor,once:!0},PolarGrid:{handler:a.renderPolarGrid,once:!0},PolarAngleAxis:{handler:a.renderPolarAxis},PolarRadiusAxis:{handler:a.renderPolarAxis},Customized:{handler:a.renderCustomized}}),a.clipPathId="".concat(null!==(i=e.id)&&void 0!==i?i:iM("recharts"),"-clip"),a.throttleTriggeredAfterMouseMove=qP()(a.triggeredAfterMouseMove,null!==(s=e.throttleDelay)&&void 0!==s?s:1e3/60),a.state={},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SX(e,t)}(n,e),i=n,a=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,s=MM(t,ZR);if(s){var a=s.props.defaultIndex;if(!("number"!==typeof a||a<0||a>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,l=UX(this.state,n,a,o),c=this.state.tooltipTicks[a].coordinate,u=(this.state.offset.top+r)/2,d="horizontal"===i?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));h&&(d=IX(IX({},d),h.props.points[a].tooltipPosition),l=h.props.points[a].tooltipPayload);var f={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:d};this.setState(f),this.renderCursor(s),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){UM([MM(e.children,ZR)],[MM(this.props.children,ZR)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=MM(this.props.children,ZR);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return o.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},a=r.width/n.offsetWidth||1,o=this.inRange(s.chartX,s.chartY,a);if(!o)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&u){var d=aM(c).scale,h=aM(u).scale,f=d&&d.invert?d.invert(s.chartX):null,m=h&&h.invert?h.invert(s.chartY):null;return IX(IX({},s),{},{xValue:f,yValue:m})}var p=BX(this.state,this.props.data,this.props.layout,o);return p?IX(IX({},s),p):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,s=t/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&s>=a.top&&s<=a.top+a.height?{x:i,y:s}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var u=aM(l);return JW({x:i,y:s},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=MM(e,ZR),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),IX(IX({},NM(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){kG.on(TG,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kG.removeListener(TG,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,s=r.length;i<s;i++){var a=r[i];if(a.item===e||a.props.key===e.key||t===TM(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,i=t.top,s=t.height,a=t.width;return r.createElement("defs",null,r.createElement("clipPath",{id:e},r.createElement("rect",{x:n,y:i,height:s,width:a})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=bX(t,2),r=n[0],i=n[1];return IX(IX({},e),{},AX({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=bX(t,2),r=n[0],i=n[1];return IX(IX({},e),{},AX({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,s=n.length;i<s;i++){var a=n[i],o=a.props,l=a.item,c=void 0!==l.type.defaultProps?IX(IX({},l.type.defaultProps),l.props):l.props,u=TM(l.type);if("Bar"===u){var d=(o.data||[]).find((function(t){return ZF(e,t)}));if(d)return{graphicalItem:a,payload:d}}else if("RadialBar"===u){var h=(o.data||[]).find((function(t){return JW(e,t)}));if(h)return{graphicalItem:a,payload:h}}else if(fY(a,r)||mY(a,r)||pY(a,r)){var f=bY({graphicalItem:a,activeTooltipItem:r,itemData:c.data}),m=void 0===c.activeIndex?f:c.activeIndex;return{graphicalItem:IX(IX({},a),{},{childIndex:m}),payload:pY(a,r)?c.data[f]:a.props.data[f]}}}return null}},{key:"render",value:function(){var e=this;if(!RM(this))return null;var t,n,i=this.props,s=i.children,a=i.className,o=i.width,l=i.height,c=i.style,u=i.compact,d=i.title,h=i.desc,f=xX(i,gX),m=FM(f,!1);if(u)return r.createElement(XK,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement(sR,vX({},m,{width:o,height:l,title:d,desc:h}),this.renderClipPath(),VM(s,this.renderMap)));this.props.accessibilityLayer&&(m.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,m.role=null!==(n=this.props.role)&&void 0!==n?n:"application",m.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},m.onFocus=function(){e.accessibilityManager.focus()});var p=this.parseEventsOfWrapper();return r.createElement(XK,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement("div",vX({className:$P("recharts-wrapper",a),style:IX({position:"relative",cursor:"default",width:o,height:l},c)},p,{ref:function(t){e.container=t}}),r.createElement(sR,vX({},m,{width:o,height:l,title:d,desc:h,style:MX}),this.renderClipPath(),VM(s,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],a&&wX(i.prototype,a),l&&wX(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,a,l}(r.Component);AX(m,"displayName",t),AX(m,"defaultProps",IX({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),AX(m,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,r=e.data,i=e.children,s=e.width,a=e.height,o=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=zX(e);return IX(IX(IX({},h),{},{updateId:0},f(IX(IX({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:s,prevHeight:a,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||s!==t.prevWidth||a!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!yM(c,t.prevMargin)){var m=zX(e),p={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=IX(IX({},BX(t,r,o)),{},{updateId:t.updateId+1}),y=IX(IX(IX({},m),p),g);return IX(IX(IX({},y),f(IX({props:e},y),t)),{},{prevDataKey:n,prevData:r,prevWidth:s,prevHeight:a,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!UM(i,t.prevChildren)){var v,b,x,w,_=MM(i,BW),N=_&&null!==(v=null===(b=_.props)||void 0===b?void 0:b.startIndex)&&void 0!==v?v:u,j=_&&null!==(x=null===(w=_.props)||void 0===w?void 0:w.endIndex)&&void 0!==x?x:d,S=N!==u||j!==d,E=!dM()(r)&&!S?t.updateId:t.updateId+1;return IX(IX({updateId:E},f(IX(IX({props:e},t),{},{updateId:E,dataStartIndex:N,dataEndIndex:j}),t)),{},{prevChildren:i,dataStartIndex:N,dataEndIndex:j})}return null})),AX(m,"renderActiveDot",(function(e,t,n){var i;return i=(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):fM()(e)?e(t):r.createElement(fL,t),r.createElement(cR,{className:"recharts-active-dot",key:n},i)}));var p=(0,r.forwardRef)((function(e,t){return r.createElement(m,vX({},e,{ref:t}))}));return p.displayName=m.displayName,p}({chartName:"PieChart",GraphicalChild:oQ,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:mZ},{axisType:"radiusAxis",AxisComp:PZ}],formatAxisMap:function(t,n,r,i,s){var a=t.width,o=t.height,l=t.startAngle,c=t.endAngle,u=sM(t.cx,a,a/2),d=sM(t.cy,o,o/2),h=XW(a,o,r),f=sM(t.innerRadius,h,0),m=sM(t.outerRadius,h,.8*h);return Object.keys(n).reduce((function(t,r){var a,o=n[r],h=o.domain,p=o.reversed;if(dM()(o.range))"angleAxis"===i?a=[l,c]:"radiusAxis"===i&&(a=[f,m]),p&&(a=[a[1],a[0]]);else{var g=HW(a=o.range,2);l=g[0],c=g[1]}var y=function(t,n,r){var i=t.scale,s=t.type,a=t.layout,o=t.axisType;if("auto"===i)return"radial"===a&&"radiusAxis"===o?{scale:cU(),realScaleType:"band"}:"radial"===a&&"angleAxis"===o?{scale:PV(),realScaleType:"linear"}:"category"===s&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:dU(),realScaleType:"point"}:"category"===s?{scale:cU(),realScaleType:"band"}:{scale:PV(),realScaleType:"linear"};if(WP()(i)){var l="scale".concat(JR()(i));return{scale:(e[l]||dU)(),realScaleType:e[l]?l:"point"}}return fM()(i)?{scale:i}:{scale:dU(),realScaleType:"point"}}(o,s),v=y.realScaleType,b=y.scale;b.domain(h).range(a),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-fW,s=Math.max(r[0],r[1])+fW,a=e(t[0]),o=e(t[n-1]);(a<i||a>s||o<i||o>s)&&e.domain([t[0],t[n-1]])}}(b);var x=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,s=t.originalDomain,a=t.allowDecimals,o=n||t.scale;if("auto"!==o&&"linear"!==o)return null;if(i&&"number"===r&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var c=AH(l,i,a);return e.domain([Jq()(c),Zq()(c)]),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:OH(u,i,a)}}return null}(b,zW(zW({},o),{},{realScaleType:v})),w=zW(zW(zW({},o),x),{},{range:a,radius:m,realScaleType:v,scale:b,cx:u,cy:d,innerRadius:f,outerRadius:m,startAngle:l,endAngle:c});return zW(zW({},t),{},qW({},r,w))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const cQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function uQ(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const dQ={date:uQ({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:uQ({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:uQ({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},hQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function fQ(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const mQ={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:fQ({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:fQ({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:fQ({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:fQ({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:fQ({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function pQ(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(a))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}const gQ={ordinalNumber:(yQ={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(yQ.matchPattern);if(!n)return null;const r=n[0],i=e.match(yQ.parsePattern);if(!i)return null;let s=yQ.valueCallback?yQ.valueCallback(i[0]):i[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:pQ({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:pQ({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:pQ({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:pQ({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:pQ({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var yQ;const vQ={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=cQ[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:dQ,formatRelative:(e,t,n,r)=>hQ[e],localize:mQ,match:gQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};let bQ={};function xQ(){return bQ}Math.pow(10,8);const wQ=6048e5,_Q=6e4,NQ=36e5,jQ=Symbol.for("constructDateFrom");function SQ(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&jQ in e?e[jQ](t):e instanceof Date?new e.constructor(t):new Date(t)}function EQ(e,t){return SQ(t||e,e)}function CQ(e){const t=EQ(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function kQ(e,t){const n=EQ(e,t?.in);return n.setHours(0,0,0,0),n}function TQ(e,t,n){const[r,i]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=SQ.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(i)}(n?.in,e,t),s=kQ(r),a=kQ(i),o=+s-CQ(s),l=+a-CQ(a);return Math.round((o-l)/864e5)}function IQ(e,t){const n=EQ(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function AQ(e,t){const n=EQ(e,t?.in);return TQ(n,IQ(n))+1}function OQ(e,t){const n=xQ(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=EQ(e,t?.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function PQ(e,t){return OQ(e,{...t,weekStartsOn:1})}function MQ(e,t){const n=EQ(e,t?.in),r=n.getFullYear(),i=SQ(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=PQ(i),a=SQ(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=PQ(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function RQ(e,t){const n=MQ(e,t),r=SQ(t?.in||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),PQ(r)}function DQ(e,t){const n=EQ(e,t?.in),r=+PQ(n)-+RQ(n);return Math.round(r/wQ)+1}function LQ(e,t){const n=EQ(e,t?.in),r=n.getFullYear(),i=xQ(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=SQ(t?.in||e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=OQ(a,t),l=SQ(t?.in||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=OQ(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function FQ(e,t){const n=xQ(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=LQ(e,t),s=SQ(t?.in||e,0);s.setFullYear(i,0,r),s.setHours(0,0,0,0);return OQ(s,t)}function UQ(e,t){const n=EQ(e,t?.in),r=+OQ(n,t)-+FQ(n,t);return Math.round(r/wQ)+1}function BQ(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const VQ={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return BQ("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):BQ(n+1,2)},d:(e,t)=>BQ(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>BQ(e.getHours()%12||12,t.length),H:(e,t)=>BQ(e.getHours(),t.length),m:(e,t)=>BQ(e.getMinutes(),t.length),s:(e,t)=>BQ(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return BQ(Math.trunc(r*Math.pow(10,n-3)),t.length)}},$Q="midnight",zQ="noon",qQ="morning",HQ="afternoon",WQ="evening",KQ="night",GQ={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return VQ.y(e,t)},Y:function(e,t,n,r){const i=LQ(e,r),s=i>0?i:1-i;if("YY"===t){return BQ(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):BQ(s,t.length)},R:function(e,t){return BQ(MQ(e),t.length)},u:function(e,t){return BQ(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return BQ(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return BQ(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return VQ.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return BQ(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=UQ(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):BQ(i,t.length)},I:function(e,t,n){const r=DQ(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):BQ(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):VQ.d(e,t)},D:function(e,t,n){const r=AQ(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):BQ(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return BQ(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return BQ(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return BQ(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?zQ:0===r?$Q:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?WQ:r>=12?HQ:r>=4?qQ:KQ,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return VQ.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):VQ.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):BQ(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):BQ(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):VQ.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):VQ.s(e,t)},S:function(e,t){return VQ.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return XQ(r);case"XXXX":case"XX":return ZQ(r);default:return ZQ(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return XQ(r);case"xxxx":case"xx":return ZQ(r);default:return ZQ(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+YQ(r,":");default:return"GMT"+ZQ(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+YQ(r,":");default:return"GMT"+ZQ(r,":")}},t:function(e,t,n){return BQ(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return BQ(+e,t.length)}};function YQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return 0===s?n+String(i):n+String(i)+t+BQ(s,2)}function XQ(e,t){if(e%60===0){return(e>0?"-":"+")+BQ(Math.abs(e)/60,2)}return ZQ(e,t)}function ZQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+BQ(Math.trunc(r/60),2)+t+BQ(r%60,2)}const QQ=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},JQ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},eJ={p:JQ,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return QQ(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",QQ(r,t)).replace("{{time}}",JQ(i,t))}},tJ=/^D+$/,nJ=/^Y+$/,rJ=["D","DD","YY","YYYY"];function iJ(e){return tJ.test(e)}function sJ(e){return nJ.test(e)}function aJ(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),rJ.includes(e))throw new RangeError(r)}function oJ(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function lJ(e){return!(!oJ(e)&&"number"!==typeof e||isNaN(+EQ(e)))}const cJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dJ=/^'([^]*?)'?$/,hJ=/''/g,fJ=/[a-zA-Z]/;function mJ(e,t,n){const r=xQ(),i=n?.locale??r.locale??vQ,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=EQ(e,n?.in);if(!lJ(o))throw new RangeError("Invalid time value");let l=t.match(uJ).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,eJ[t])(e,i.formatLong)}return e})).join("").match(cJ).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:pJ(e)};if(GQ[t])return{isToken:!0,value:e};if(t.match(fJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map((r=>{if(!r.isToken)return r.value;const s=r.value;(!n?.useAdditionalWeekYearTokens&&sJ(s)||!n?.useAdditionalDayOfYearTokens&&iJ(s))&&aJ(s,t,String(e));return(0,GQ[s[0]])(o,s,i.localize,c)})).join("")}function pJ(e){const t=e.match(dJ);return t?t[1].replace(hJ,"'"):e}function gJ(e,t){const n=()=>SQ(t?.in,NaN),r=t?.additionalDigits??2,i=function(e){const t={},n=e.split(yJ.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],yJ.timeZoneDelimiter.test(t.date)&&(t.date=e.split(yJ.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=yJ.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let s;if(i.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:null===s?i:100*s,restDateString:e.slice((r[1]||r[2]).length)}}(i.date,r);s=function(e,t){if(null===t)return new Date(NaN);const n=e.match(vJ);if(!n)return new Date(NaN);const r=!!n[4],i=wJ(n[1]),s=wJ(n[2])-1,a=wJ(n[3]),o=wJ(n[4]),l=wJ(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}(t,o,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(NJ[t]||(jJ(e)?29:28))}(t,s,a)&&function(e,t){return t>=1&&t<=(jJ(e)?366:365)}(t,i)?(e.setUTCFullYear(t,s,Math.max(i,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(+s))return n();const a=+s;let o,l=0;if(i.time&&(l=function(e){const t=e.match(bJ);if(!t)return NaN;const n=_J(t[1]),r=_J(t[2]),i=_J(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*NQ+r*_Q+1e3*i}(i.time),isNaN(l)))return n();if(!i.timezone){const e=new Date(a+l),n=EQ(0,t?.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return o=function(e){if("Z"===e)return 0;const t=e.match(xJ);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*NQ+i*_Q)}(i.timezone),isNaN(o)?n():EQ(a+l+o,t?.in)}const yJ={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},vJ=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,bJ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,xJ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function wJ(e){return e?parseInt(e):1}function _J(e){return e&&parseFloat(e.replace(",","."))||0}const NJ=[31,null,31,30,31,30,31,31,30,31,30,31];function jJ(e){return e%400===0||e%4===0&&e%100!==0}function SJ(){return Object.assign({},xQ())}function EJ(e,t){const n=function(e){return"function"===typeof e&&e.prototype?.constructor===e}(t)?new t(0):SQ(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}class CJ{subPriority=0;validate(e,t){return!0}}class kJ extends CJ{constructor(e,t,n,r,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class TJ extends CJ{priority=10;subPriority=-1;constructor(e,t){super(),this.context=e||(e=>SQ(t,e))}set(e,t){return t.timestampIsSet?e:SQ(e,EJ(e,this.context))}}class IJ{run(e,t,n,r){const i=this.parse(e,t,n,r);return i?{setter:new kJ(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,n){return!0}}const AJ=/^(1[0-2]|0?\d)/,OJ=/^(3[0-1]|[0-2]?\d)/,PJ=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,MJ=/^(5[0-3]|[0-4]?\d)/,RJ=/^(2[0-3]|[0-1]?\d)/,DJ=/^(2[0-4]|[0-1]?\d)/,LJ=/^(1[0-1]|0?\d)/,FJ=/^(1[0-2]|0?\d)/,UJ=/^[0-5]?\d/,BJ=/^[0-5]?\d/,VJ=/^\d/,$J=/^\d{1,2}/,zJ=/^\d{1,3}/,qJ=/^\d{1,4}/,HJ=/^-?\d+/,WJ=/^-?\d/,KJ=/^-?\d{1,2}/,GJ=/^-?\d{1,3}/,YJ=/^-?\d{1,4}/,XJ=/^([+-])(\d{2})(\d{2})?|Z/,ZJ=/^([+-])(\d{2})(\d{2})|Z/,QJ=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,JJ=/^([+-])(\d{2}):(\d{2})|Z/,e0=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function t0(e,t){return e?{value:t(e.value),rest:e.rest}:e}function n0(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function r0(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*NQ+s*_Q+1e3*a),rest:t.slice(n[0].length)}}function i0(e){return n0(HJ,e)}function s0(e,t){switch(e){case 1:return n0(VJ,t);case 2:return n0($J,t);case 3:return n0(zJ,t);case 4:return n0(qJ,t);default:return n0(new RegExp("^\\d{1,"+e+"}"),t)}}function a0(e,t){switch(e){case 1:return n0(WJ,t);case 2:return n0(KJ,t);case 3:return n0(GJ,t);case 4:return n0(YJ,t);default:return n0(new RegExp("^-?\\d{1,"+e+"}"),t)}}function o0(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function l0(e,t){const n=t>0,r=n?t:1-t;let i;if(r<=50)i=e||100;else{const t=r+50;i=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?i:1-i}function c0(e){return e%400===0||e%4===0&&e%100!==0}function u0(e,t,n){const r=EQ(e,n?.in),i=UQ(r,n)-t;return r.setDate(r.getDate()-7*i),EQ(r,n?.in)}function d0(e,t,n){const r=EQ(e,n?.in),i=DQ(r,n)-t;return r.setDate(r.getDate()-7*i),r}const h0=[31,28,31,30,31,30,31,31,30,31,30,31],f0=[31,29,31,30,31,30,31,31,30,31,30,31];function m0(e,t,n){const r=EQ(e,n?.in);return isNaN(t)?SQ(n?.in||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function p0(e,t,n){const r=xQ(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=EQ(e,n?.in),a=s.getDay(),o=7-i;return m0(s,t<0||t>6?t-(a+o)%7:((t%7+7)%7+o)%7-(a+o)%7,n)}function g0(e,t){const n=EQ(e,t?.in).getDay();return 0===n?7:n}function y0(e,t,n){const r=EQ(e,n?.in);return m0(r,t-g0(r,n),n)}const v0={G:new class extends IJ{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends IJ{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return t0(s0(4,e),r);case"yo":return t0(n.ordinalNumber(e,{unit:"year"}),r);default:return t0(s0(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=l0(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const i="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}},Y:new class extends IJ{priority=130;parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return t0(s0(4,e),r);case"Yo":return t0(n.ordinalNumber(e,{unit:"year"}),r);default:return t0(s0(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const i=LQ(e,r);if(n.isTwoDigitYear){const t=l0(n.year,i);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),OQ(e,r)}const s="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(s,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),OQ(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends IJ{priority=130;parse(e,t){return a0("R"===t?4:t.length,e)}set(e,t,n){const r=SQ(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),PQ(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends IJ{priority=130;parse(e,t){return a0("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends IJ{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return s0(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends IJ{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return s0(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends IJ{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const r=e=>e-1;switch(t){case"M":return t0(n0(AJ,e),r);case"MM":return t0(s0(2,e),r);case"Mo":return t0(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends IJ{priority=110;parse(e,t,n){const r=e=>e-1;switch(t){case"L":return t0(n0(AJ,e),r);case"LL":return t0(s0(2,e),r);case"Lo":return t0(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends IJ{priority=100;parse(e,t,n){switch(t){case"w":return n0(MJ,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return s0(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return OQ(u0(e,n,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends IJ{priority=100;parse(e,t,n){switch(t){case"I":return n0(MJ,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return s0(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return PQ(d0(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends IJ{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return n0(OJ,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return s0(t.length,e)}}validate(e,t){const n=c0(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=f0[r]:t>=1&&t<=h0[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends IJ{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return n0(PJ,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return s0(t.length,e)}}validate(e,t){return c0(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends IJ{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=p0(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends IJ{priority=90;parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return t0(s0(t.length,e),i);case"eo":return t0(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=p0(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends IJ{priority=90;parse(e,t,n,r){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return t0(s0(t.length,e),i);case"co":return t0(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=p0(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends IJ{priority=90;parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return s0(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return t0(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return t0(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return t0(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return t0(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=y0(e,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends IJ{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(o0(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends IJ{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(o0(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends IJ{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(o0(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends IJ{priority=70;parse(e,t,n){switch(t){case"h":return n0(FJ,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return s0(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends IJ{priority=70;parse(e,t,n){switch(t){case"H":return n0(RJ,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return s0(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends IJ{priority=70;parse(e,t,n){switch(t){case"K":return n0(LJ,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return s0(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends IJ{priority=70;parse(e,t,n){switch(t){case"k":return n0(DJ,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return s0(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends IJ{priority=60;parse(e,t,n){switch(t){case"m":return n0(UJ,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return s0(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]},s:new class extends IJ{priority=50;parse(e,t,n){switch(t){case"s":return n0(BJ,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return s0(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]},S:new class extends IJ{priority=30;parse(e,t){return t0(s0(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]},X:new class extends IJ{priority=10;parse(e,t){switch(t){case"X":return r0(XJ,e);case"XX":return r0(ZJ,e);case"XXXX":return r0(QJ,e);case"XXXXX":return r0(e0,e);default:return r0(JJ,e)}}set(e,t,n){return t.timestampIsSet?e:SQ(e,e.getTime()-CQ(e)-n)}incompatibleTokens=["t","T","x"]},x:new class extends IJ{priority=10;parse(e,t){switch(t){case"x":return r0(XJ,e);case"xx":return r0(ZJ,e);case"xxxx":return r0(QJ,e);case"xxxxx":return r0(e0,e);default:return r0(JJ,e)}}set(e,t,n){return t.timestampIsSet?e:SQ(e,e.getTime()-CQ(e)-n)}incompatibleTokens=["t","T","X"]},t:new class extends IJ{priority=40;parse(e){return i0(e)}set(e,t,n){return[SQ(e,1e3*n),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends IJ{priority=20;parse(e){return i0(e)}set(e,t,n){return[SQ(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}},b0=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,x0=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,w0=/^'([^]*?)'?$/,_0=/''/g,N0=/\S/,j0=/[a-zA-Z]/;function S0(e,t,n,r){const i=()=>SQ(r?.in||n,NaN),s=SJ(),a=r?.locale??s.locale??vQ,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(!t)return e?i():EQ(n,r?.in);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:a},u=[new TJ(r?.in,n)],d=t.match(x0).map((e=>{const t=e[0];if(t in eJ){return(0,eJ[t])(e,a.formatLong)}return e})).join("").match(b0),h=[];for(let g of d){!r?.useAdditionalWeekYearTokens&&sJ(g)&&aJ(g,t,e),!r?.useAdditionalDayOfYearTokens&&iJ(g)&&aJ(g,t,e);const n=g[0],s=v0[n];if(s){const{incompatibleTokens:t}=s;if(Array.isArray(t)){const e=h.find((e=>t.includes(e.token)||e.token===n));if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${g}\` at the same time`)}else if("*"===s.incompatibleTokens&&h.length>0)throw new RangeError(`The format string mustn't contain \`${g}\` and any other token at the same time`);h.push({token:n,fullToken:g});const r=s.run(e,g,a.match,c);if(!r)return i();u.push(r.setter),e=r.rest}else{if(n.match(j0))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===g?g="'":"'"===n&&(g=g.match(w0)[1].replace(_0,"'")),0!==e.indexOf(g))return i();e=e.slice(g.length)}}if(e.length>0&&N0.test(e))return i();const f=u.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>u.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let m=EQ(n,r?.in);if(isNaN(+m))return i();const p={};for(const g of f){if(!g.validate(m,c))return i();const e=g.set(m,p,c);Array.isArray(e)?(m=e[0],Object.assign(p,e[1])):m=e}return m}function E0(e,t,n){const r=+EQ(e,n?.in),[i,s]=[+EQ(t.start,n?.in),+EQ(t.end,n?.in)].sort(((e,t)=>e-t));return r>=i&&r<=s}const C0=()=>{const[e,t]=(0,r.useState)(null),{currentUser:n}=MN(),i=te(),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!n||"student"!==localStorage.getItem("userRole"))return void i("/login");(async()=>{if(n)try{l(!0);const e=lg(_p(IN,"students"),ug("uid","==",n.uid)),r=Ig(e,(async e=>{if(e.empty)t(null);else{const n=e.docs[0],r={id:n.id,...n.data()};t(r),localStorage.setItem("userData",JSON.stringify(r))}l(!1)}),(e=>{console.error("Error listening to student data:",e),l(!1)})),i=await Sg(e);if(!i.empty){const e=i.docs[0].id,t=lg(_p(IN,"attendance"),ug("studentId","==",e)),n=await Sg(t);a(n.docs.map((e=>e.data())));const r=i.docs[0].data();if(r.enrolledSubjects&&r.enrolledSubjects.length>0){const e=lg(_p(IN,"sections"),ug("id","==",r.enrolledSubjects[0].sectionId)),t=await Sg(e);if(!t.empty){const e={id:t.docs[0].id,...t.docs[0].data(),schedules:t.docs[0].data().schedules||[]};if(u(e),e.instructorId){const t=await Ng(Np(IN,"teachers",e.instructorId));if(t.exists()){const e={id:t.id,...t.data()};h(e)}}}}}return()=>r()}catch(Zg){console.error("Error fetching student data:",Zg),l(!1)}})()}),[n,i]);const f=()=>{const e=(()=>{if(!c)return[];const e=s.filter((e=>e.sectionId===c.id)),t=new Date;return e.filter((e=>mJ(gJ(e.date),"yyyy-MM")===mJ(t,"yyyy-MM")))})(),t=e.filter((e=>"present"===e.status)).length,n=e.filter((e=>"late"===e.status)).length,r=e.filter((e=>"absent"===e.status)).length;return[{name:"Present",value:t},{name:"Late",value:n},{name:"Absent",value:r}]},m=["#10B981","#F59E0B","#EF4444"];if(o)return(0,ON.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,ON.jsx)(CI.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full"})});if(!e)return(0,ON.jsx)("div",{className:"p-8 text-center text-gray-400 bg-gray-900 min-h-screen",children:"No student data found."});const p=s.length>0?(s.filter((e=>"present"===e.status)).length/s.length*100).toFixed(1):"0",g=e.enrolledSubjects||[],y=g.length,v=g.flatMap((e=>(e.schedules||[]).map((t=>({...t,subject:e.name,instructorName:e.instructorName}))))).filter((e=>{const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(new Date).getDay()];return e.day===t}))||[];return(0,ON.jsxs)("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[(0,ON.jsx)(gP,{student:e}),(0,ON.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl shadow-2xl p-8 mb-10 text-white overflow-hidden relative",children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-geometric.png')] opacity-10"}),(0,ON.jsxs)("div",{className:"relative flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,ON.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ON.jsx)(CI.div,{whileHover:{scale:1.1,rotate:5},className:"bg-white/10 backdrop-blur-md p-4 rounded-full border border-white/20",children:(0,ON.jsx)(BP,{className:"h-12 w-12 text-white"})}),(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h1",{className:"text-3xl md:text-4xl font-extrabold mb-2 tracking-tight",children:["Welcome, ",e.fullName,"!"]}),(0,ON.jsxs)("p",{className:"text-base opacity-80 font-medium",children:[e.department," \u2022 Year ",e.yearLevel]})]})]}),(0,ON.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 text-center border border-white/20",children:[(0,ON.jsx)("p",{className:"text-sm opacity-80",children:"Student ID"}),(0,ON.jsx)("p",{className:"text-xl font-semibold tracking-wide",children:e.idNumber||"N/A"})]})]})]}),(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10",children:[{title:"Attendance Rate",value:`${p}%`,icon:(0,ON.jsx)(bO,{className:"h-6 w-6"}),color:"from-emerald-500 to-teal-500"},{title:"Total Subjects",value:y,icon:(0,ON.jsx)(SO,{className:"h-6 w-6"}),color:"from-blue-500 to-indigo-500"},{title:"Classes Today",value:v.length,icon:(0,ON.jsx)(GO,{className:"h-6 w-6"}),color:"from-purple-500 to-pink-500"}].map(((e,t)=>(0,ON.jsx)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{scale:1.05,y:-5},className:`bg-gradient-to-br ${e.color} rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 border border-white/10`,children:(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm opacity-80 font-medium",children:e.title}),(0,ON.jsx)("p",{className:"text-3xl font-bold tracking-tight",children:e.value})]}),(0,ON.jsx)("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-md",children:e.icon})]})},e.title)))}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,ON.jsxs)("div",{className:"space-y-8 lg:col-span-2",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-3xl shadow-2xl p-6 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all duration-300 border border-gray-700",children:[(0,ON.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,ON.jsx)(BP,{className:"h-7 w-7 text-blue-400"}),"Your Profile"]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:"Full Name"}),(0,ON.jsx)("p",{className:"text-lg font-medium text-white",children:e.fullName})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:"Email"}),(0,ON.jsx)("p",{className:"text-lg font-medium text-white",children:e.email})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:"Student ID"}),(0,ON.jsx)("p",{className:"text-lg font-medium text-white",children:e.idNumber||"N/A"})]})]}),(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:"Department"}),(0,ON.jsx)("p",{className:"text-lg font-medium text-white",children:e.department})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:"Year Level"}),(0,ON.jsx)("p",{className:"text-lg font-medium text-white",children:e.yearLevel})]})]})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-3xl shadow-2xl p-6 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all duration-300 border border-gray-700",children:[(0,ON.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,ON.jsx)(SO,{className:"h-7 w-7 text-blue-400"}),"Enrolled Subjects & Schedules"]}),g.length>0?(0,ON.jsx)("div",{className:"space-y-6",children:g.map(((e,t)=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-4 bg-gray-700/50 rounded-xl hover:bg-blue-900/30 transition-all duration-200 backdrop-blur-sm border border-gray-600",children:[(0,ON.jsx)("div",{className:"flex items-center justify-between",children:(0,ON.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ON.jsx)("div",{className:"bg-blue-500/20 p-3 rounded-xl border border-blue-400/30",children:(0,ON.jsx)(SO,{className:"h-6 w-6 text-blue-400"})}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"font-medium text-white text-lg",children:e.name}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Department: ",e.department]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Section: ",e.sectionName]}),e.instructorName&&(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Instructor: ",e.instructorName]})]})]})}),(0,ON.jsxs)("div",{className:"mt-4",children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-gray-300",children:"Schedules:"}),e.schedules&&e.schedules.length>0?e.schedules.map(((e,t)=>(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:[e.day,": ",e.startTime," - ",e.endTime," (Room: ",e.roomName,")"]},t))):(0,ON.jsx)("p",{className:"text-sm text-gray-500",children:"No schedules available."})]})]},t)))}):(0,ON.jsx)("p",{className:"text-gray-400 text-center text-lg",children:"No subjects enrolled yet."})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-3xl shadow-2xl p-6 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all duration-300 border border-gray-700",children:[(0,ON.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Manage Enrollment"}),(0,ON.jsx)("p",{className:"text-gray-300 mb-4",children:"Choose the subjects you want to enroll in."}),(0,ON.jsx)(ke,{to:"/student/subject-selection",className:"inline-block px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"Select Subjects"})]})]}),(0,ON.jsxs)("div",{className:"space-y-8",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-3xl shadow-2xl p-6 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all duration-300 border border-gray-700",children:[(0,ON.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,ON.jsx)(bO,{className:"h-7 w-7 text-blue-400"}),"Attendance Overview"]}),(0,ON.jsx)("div",{className:"h-64",children:(0,ON.jsx)(YM,{width:"100%",height:"100%",children:(0,ON.jsxs)(lQ,{children:[(0,ON.jsx)(oQ,{data:f(),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:f().map(((e,t)=>(0,ON.jsx)(YZ,{fill:m[t%m.length]},`cell-${t}`)))}),(0,ON.jsx)(ZR,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}})]})})}),(0,ON.jsx)("div",{className:"grid grid-cols-3 gap-4 mt-6",children:f().map(((e,t)=>(0,ON.jsxs)("div",{className:"text-center",children:[(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:e.name}),(0,ON.jsx)("p",{className:"text-lg font-bold text-white",children:e.value})]},e.name)))})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-3xl shadow-2xl p-6 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all duration-300 border border-gray-700",children:[(0,ON.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,ON.jsx)(GO,{className:"h-7 w-7 text-blue-400"}),"Today's Schedule"]}),v.length>0?(0,ON.jsx)("div",{className:"space-y-4",children:v.map(((e,t)=>{const n=((e,t)=>{const n=new Date,r=mJ(n,"EEEE");if(e.day!==r)return null;const i=n.getTime(),s=S0(e.startTime,"HH:mm",n).getTime(),a=S0(e.endTime,"HH:mm",n).getTime();return E0(i,{start:s,end:a})?`Class in Session with ${t||"Instructor"}`:i>a?"Class Ended":null})(e,e.instructorName);return(0,ON.jsx)(CI.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-4 rounded-xl bg-gray-700/50 border border-gray-600 hover:bg-blue-900/30 transition-all duration-200 backdrop-blur-sm",children:(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ON.jsx)("div",{className:"bg-blue-500/20 p-3 rounded-xl border border-blue-400/30",children:(0,ON.jsx)(WO,{className:"h-6 w-6 text-blue-400"})}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"font-medium text-white text-lg",children:e.subject||"N/A"}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:[e.startTime," - ",e.endTime," \u2022 Room: ",e.roomName]}),n&&(0,ON.jsx)("p",{className:"text-sm font-medium mt-1 "+(n.includes("In Session")?"text-green-400":"text-red-400"),children:n})]})]}),(0,ON.jsx)("span",{className:"px```jsx\npx-3 py-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full text-sm font-medium",children:"Today"})]})},t)}))}):(0,ON.jsx)("p",{className:"text-gray-400 text-center text-lg",children:"No classes scheduled for today."})]}),d&&(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-800 rounded-3xl shadow-2xl p-6 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all duration-300 border border-gray-700",children:[(0,ON.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[(0,ON.jsx)(AI,{className:"h-7 w-7 text-blue-400"}),"Your Instructor"]}),(0,ON.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,ON.jsx)("div",{className:"bg-blue-500/20 p-3 rounded-xl border border-blue-400/30",children:(0,ON.jsx)(AI,{className:"h-6 w-6 text-blue-400"})}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-lg font-medium text-white",children:d.fullName}),(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:d.email}),(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:d.department})]})]}),(0,ON.jsxs)("div",{className:"mt-4",children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Assigned Subjects"}),g.some((e=>e.instructorId===d.id))?(0,ON.jsx)("div",{className:"flex flex-wrap gap-2",children:g.filter((e=>e.instructorId===d.id)).map(((e,t)=>(0,ON.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm border border-blue-400/30",children:e.name},t)))}):(0,ON.jsx)("p",{className:"text-sm text-gray-500",children:"No matching subjects assigned."})]})]})]})]})]})]})};function k0(){const e=(0,r.useRef)(!1);return BN((()=>(e.current=!0,()=>{e.current=!1})),[]),e}class T0 extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function I0(e){let{children:t,isPresent:n}=e;const i=(0,r.useId)(),s=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:e,height:t,top:r,left:o}=a.current;if(n||!s.current||!e||!t)return;s.current.dataset.motionPopId=i;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${r}px !important;\n            left: ${o}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[n]),r.createElement(T0,{isPresent:n,childRef:s,sizeRef:a},r.cloneElement(t,{ref:s}))}const A0=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:s,custom:a,presenceAffectsLayout:o,mode:l}=e;const c=oS(O0),u=(0,r.useId)(),d=(0,r.useMemo)((()=>({id:u,initial:n,isPresent:i,custom:a,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()},register:e=>(c.set(e,!1),()=>c.delete(e))})),o?void 0:[i]);return(0,r.useMemo)((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[i]),r.useEffect((()=>{!i&&!c.size&&s&&s()}),[i]),"popLayout"===l&&(t=r.createElement(I0,{isPresent:i},t)),r.createElement(FN.Provider,{value:d},t)};function O0(){return new Map}const P0=e=>e.key||"";const M0=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:s,exitBeforeEnter:a,presenceAffectsLayout:o=!0,mode:l="sync"}=e;KS(!a,"Replace exitBeforeEnter with mode='wait'");const c=(0,r.useContext)(tj).forceRender||function(){const e=k0(),[t,n]=(0,r.useState)(0),i=(0,r.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,r.useCallback)((()=>gS.postRender(i)),[i]),t]}()[0],u=k0(),d=function(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}(t);let h=d;const f=(0,r.useRef)(new Map).current,m=(0,r.useRef)(h),p=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);if(BN((()=>{g.current=!1,function(e,t){e.forEach((e=>{const n=P0(e);t.set(n,e)}))}(d,p),m.current=h})),function(e){(0,r.useEffect)((()=>()=>e()),[])}((()=>{g.current=!0,p.clear(),f.clear()})),g.current)return r.createElement(r.Fragment,null,h.map((e=>r.createElement(A0,{key:P0(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:o,mode:l},e))));h=[...h];const y=m.current.map(P0),v=d.map(P0),b=y.length;for(let r=0;r<b;r++){const e=y[r];-1!==v.indexOf(e)||f.has(e)||f.set(e,void 0)}return"wait"===l&&f.size&&(h=[]),f.forEach(((e,t)=>{if(-1!==v.indexOf(t))return;const i=p.get(t);if(!i)return;const a=y.indexOf(t);let g=e;if(!g){const e=()=>{f.delete(t);const e=Array.from(p.keys()).filter((e=>!v.includes(e)));if(e.forEach((e=>p.delete(e))),m.current=d.filter((n=>{const r=P0(n);return r===t||e.includes(r)})),!f.size){if(!1===u.current)return;c(),s&&s()}};g=r.createElement(A0,{key:P0(i),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:o,mode:l},i),f.set(t,g)}h.splice(a,0,g)})),h=h.map((e=>{const t=e.key;return f.has(t)?e:r.createElement(A0,{key:P0(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)})),r.createElement(r.Fragment,null,f.size?h:h.map((e=>(0,r.cloneElement)(e))))};function R0(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const D0=r.forwardRef(R0);function L0(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 3.75a6.715 6.715 0 0 0-3.722 1.118.75.75 0 1 1-.828-1.25 8.25 8.25 0 0 1 12.8 6.883c0 3.014-.574 5.897-1.62 8.543a.75.75 0 0 1-1.395-.551A21.69 21.69 0 0 0 18.75 10.5 6.75 6.75 0 0 0 12 3.75ZM6.157 5.739a.75.75 0 0 1 .21 1.04A6.715 6.715 0 0 0 5.25 10.5c0 1.613-.463 3.12-1.265 4.393a.75.75 0 0 1-1.27-.8A6.715 6.715 0 0 0 3.75 10.5c0-1.68.503-3.246 1.367-4.55a.75.75 0 0 1 1.04-.211ZM12 7.5a3 3 0 0 0-3 3c0 3.1-1.176 5.927-3.105 8.056a.75.75 0 1 1-1.112-1.008A10.459 10.459 0 0 0 7.5 10.5a4.5 4.5 0 1 1 9 0c0 .547-.022 1.09-.067 1.626a.75.75 0 0 1-1.495-.123c.041-.495.062-.996.062-1.503a3 3 0 0 0-3-3Zm0 2.25a.75.75 0 0 1 .75.75c0 3.908-1.424 7.485-3.781 10.238a.75.75 0 0 1-1.14-.975A14.19 14.19 0 0 0 11.25 10.5a.75.75 0 0 1 .75-.75Zm3.239 5.183a.75.75 0 0 1 .515.927 19.417 19.417 0 0 1-2.585 5.544.75.75 0 0 1-1.243-.84 17.915 17.915 0 0 0 2.386-5.116.75.75 0 0 1 .927-.515Z",clipRule:"evenodd"}))}const F0=r.forwardRef(L0);function U0(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.25 2.25a3 3 0 0 0-3 3v4.318a3 3 0 0 0 .879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 0 0 5.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 0 0-2.122-.879H5.25ZM6.375 7.5a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z",clipRule:"evenodd"}))}const B0=r.forwardRef(U0);function V0(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const $0=r.forwardRef(V0);function z0(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const q0=r.forwardRef(z0);function H0(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),r.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const W0=r.forwardRef(H0),K0=10,G0=()=>{const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)({}),[s,a]=(0,r.useState)({}),[o,l]=(0,r.useState)({}),[c,u]=(0,r.useState)({}),[d,h]=(0,r.useState)({}),[f,m]=(0,r.useState)({}),[p,g]=(0,r.useState)({}),[y,v]=(0,r.useState)({}),[b,x]=(0,r.useState)({}),[w,_]=(0,r.useState)({}),[N,j]=(0,r.useState)(null),[S,E]=(0,r.useState)(""),[C,k]=(0,r.useState)(!0),[T,I]=(0,r.useState)(!1),[A,O]=(0,r.useState)({accessLogs:1,systemLogs:1,rfid:1,powerConsumption:1}),[P,M]=(0,r.useState)({personnel:!0,schedules:!0}),[R,D]=(0,r.useState)("all"),[L,F]=(0,r.useState)("all"),[U,B]=(0,r.useState)({totalInstructors:0,totalStudents:0,totalAdmins:0,activeAlerts:0,totalAccessToday:0,totalSystemLogs:0,totalRFIDs:0,totalRoomsMonitored:0,totalSchedules:0,totalRFIDScansToday:0});(0,r.useEffect)((()=>{k(!0);const e={instructors:Gw(AN,"Instructors"),students:Gw(AN,"Students"),admins:Gw(AN,"Admin"),accessLogs:Gw(AN,"AccessLogs"),adminPZEM:Gw(AN,"AdminPZEM"),alerts:Gw(AN,"Alerts/Tamper"),offlineDataLogging:Gw(AN,"OfflineDataLogging"),systemLogs:Gw(AN,"SystemLogs"),registeredUIDs:Gw(AN,"RegisteredUIDs"),unregisteredUIDs:Gw(AN,"UnregisteredUIDs"),rfid:Gw(AN,"rfid")},n=[{path:"instructors",ref:e.instructors},{path:"students",ref:e.students},{path:"admins",ref:e.admins},{path:"accessLogs",ref:e.accessLogs},{path:"adminPZEM",ref:e.adminPZEM},{path:"alerts",ref:e.alerts},{path:"offlineDataLogging",ref:e.offlineDataLogging},{path:"systemLogs",ref:e.systemLogs},{path:"registeredUIDs",ref:e.registeredUIDs},{path:"unregisteredUIDs",ref:e.unregisteredUIDs},{path:"rfid",ref:e.rfid}];n.forEach((e=>{let{ref:n,path:r}=e;n_(n,(e=>{const n=e.val()||{};switch(r){case"instructors":t(n);const e=Object.values(n).flatMap((e=>{var t;return null!==(t=e.ClassStatus)&&void 0!==t&&t.schedule?1:0})).length;B((t=>({...t,totalInstructors:Object.keys(n).length,totalSchedules:t.totalSchedules?t.totalSchedules+e:e})));break;case"students":i(n);const r=Object.values(n).flatMap((e=>Object.values(e.Attendance||{}).flatMap((e=>e.schedules||[])).length)).reduce(((e,t)=>e+t),0);B((e=>({...e,totalStudents:Object.keys(n).length,totalSchedules:e.totalSchedules?e.totalSchedules+r:r})));break;case"admins":a(n),B((e=>({...e,totalAdmins:Object.keys(n).length})));break;case"accessLogs":l(n);const s=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"_"),o=Object.values(n).flatMap((e=>Object.values(e).filter((e=>{var t;return null===(t=e.timestamp)||void 0===t?void 0:t.startsWith(s)})))).filter((e=>void 0!==e&&void 0!==e.timestamp));B((e=>({...e,totalAccessToday:o.length})));break;case"adminPZEM":u(n);const c=new Set(Object.values(n).flatMap((e=>Object.values(e).filter((e=>e.roomDetails)).map((e=>e.roomDetails.name))))).size;B((e=>({...e,totalRoomsMonitored:c})));break;case"alerts":h(n);const d=Object.values(n).filter((e=>null!==e&&void 0!==e&&"active"===e.status)).length;B((e=>({...e,activeAlerts:d})));break;case"offlineDataLogging":m(n);break;case"systemLogs":g(n),B((e=>({...e,totalSystemLogs:Object.keys(n).length})));break;case"registeredUIDs":v(n);break;case"unregisteredUIDs":x(n);break;case"rfid":_(n);const f=Object.values(n).filter((e=>{var t;const n="string"===typeof e.timestamp?e.timestamp:null===(t=e.timestamp)||void 0===t?void 0:t._methodName;return null===n||void 0===n?void 0:n.startsWith(s)})).length;B((e=>({...e,totalRFIDs:Object.keys(n).length,totalRFIDScansToday:f})))}}),V(r))}));const r=(e=>n_(Gw(AN,"NewRFIDTag"),(t=>{const n=t.val();n&&e(n)})))((e=>{j(e),setTimeout((()=>j(null)),5e3)}));return k(!1),()=>{n.forEach((e=>{let{ref:t}=e;return r_(t)})),r()}}),[]);const V=e=>t=>{zI().fire({icon:"error",title:"Error",text:`Failed to fetch ${e}: ${t.message}`,customClass:{popup:"rounded-lg",title:"text-blue-900",htmlContainer:"text-blue-700",confirmButton:"bg-blue-600 hover:bg-blue-700"}})},$=e=>{if(!e)return"N/A";if("object"===typeof e&&"_methodName"in e)return"Server Timestamp";try{const[t,n]=e.split("_"),[r,i,s]=t.split("_"),[a,o,l]=n.split("_");return new Date(parseInt(r),parseInt(i)-1,parseInt(s),parseInt(a),parseInt(o),parseInt(l)).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return e.replace(/_/g,":")}},z=(0,r.useMemo)((()=>({instructors:Object.entries(e).filter((e=>{let[t,n]=e;return[n.Profile.fullName,n.Profile.email,n.Profile.department,n.Profile.idNumber,n.Profile.mobileNumber,n.Profile.createdAt].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))})),students:Object.entries(n).filter((e=>{let[t,n]=e;return Object.values(n.Attendance||{}).some((e=>[e.fullName,e.email,e.department,e.idNumber,e.mobileNumber,e.sessionId,e.Action,e.Sensor,e.Status].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))))})),admins:Object.entries(s).filter((e=>{let[t,n]=e;return[n.fullName,n.email,n.idNumber,n.rfidUid,n.createdAt].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))}))})),[e,n,s,S]),q=(0,r.useMemo)((()=>{const t=Object.entries(o).flatMap((e=>{let[t,n]=e;return Object.entries(n).map((e=>{let[n,r]=e;return{uid:t,timestamp:n,log:r}}))})).filter((e=>{let{log:t}=e;return[t.fullName,t.role,t.action,t.timestamp].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))})).filter((e=>{let{log:t}=e;return"all"===L||t.role.toLowerCase()===L})),n=Object.entries(e).flatMap((e=>{let[t,n]=e;return n.AccessLogs?Object.entries(n.AccessLogs).map((e=>{let[r,i]=e;return{uid:t,timestamp:r,log:{...i,fullName:n.Profile.fullName,role:n.Profile.role}}})):[]})).filter((e=>{let{log:t}=e;return[t.fullName,t.role,t.action,t.timestamp].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))})).filter((e=>{let{log:t}=e;return"all"===L||t.role.toLowerCase()===L}));return[...t,...n].sort(((e,t)=>t.timestamp.localeCompare(e.timestamp)))}),[o,e,S,L]),H=(0,r.useMemo)((()=>[...Object.entries(d).filter((e=>{let[t,n]=e;return[n.startTime,n.endTime,n.status,n.resolvedByFullName,n.resolvedByUID].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))})).filter((e=>{let[t,n]=e;return"all"===R||n.status===R})),...Object.entries(f).filter((e=>{let[t,n]=e;return"TamperDetected"===n.action&&"Active"===n.status})).map((e=>{let[t,n]=e;return[t,{startTime:n.timestamp,status:n.status,resolvedByFullName:n.name,resolvedByUID:null}]})).filter((e=>{let[t,n]=e;return"all"===R||"object"===typeof n&&"status"in n&&n.status.toLowerCase()===R}))].sort(((e,t)=>("object"===typeof t[1]&&"startTime"in t[1]?t[1].startTime:"").localeCompare("object"===typeof e[1]&&"startTime"in e[1]?e[1].startTime:"")))),[d,f,S,R]),W=(0,r.useMemo)((()=>Object.entries(p).filter((e=>{let[t,n]=e;return n.toLowerCase().includes(S.toLowerCase())})).sort(((e,t)=>t[0].localeCompare(e[0])))),[p,S]),K=(0,r.useMemo)((()=>({registered:Object.entries(y).filter((e=>{let[t,n]=e;return[t,n].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))})),unregistered:Object.entries(b).filter((e=>{let[t,n]=e;return[t,n.AccessLogs].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))})),rfid:Object.entries(w).filter((e=>{var t;let[n,r]=e;return[n,r.role,r.uid,"string"===typeof r.timestamp?r.timestamp:null===(t=r.timestamp)||void 0===t?void 0:t._methodName].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase())))}))})),[y,b,w,S]),G=(0,r.useMemo)((()=>{const t=[];return Object.entries(c).forEach((e=>{let[n,r]=e;Object.entries(r).forEach((e=>{let[n,r]=e;t.push({roomName:r.roomDetails.name,building:r.roomDetails.building,floor:r.roomDetails.floor,current:r.Current,energy:r.Energy,frequency:r.Frequency,power:r.Power,powerFactor:r.PowerFactor,voltage:r.Voltage,timestamp:r.timestamp})}))})),Object.values(e).forEach((e=>{var n;const r=null===(n=e.ClassStatus)||void 0===n?void 0:n.schedule;if(r&&"string"!==typeof r.roomName&&r.roomName.pzem){const e=r.roomName.pzem;t.push({roomName:r.roomName.name,building:"GLE Building",floor:"7th Floor",current:e.current,energy:e.energy,frequency:e.frequency,power:e.power,powerFactor:e.powerFactor,voltage:e.voltage,timestamp:e.timestamp})}})),t.filter((e=>[e.roomName,e.building,e.floor,e.current,e.energy,e.frequency,e.power,e.powerFactor,e.voltage,e.timestamp].some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(S.toLowerCase()))))).sort(((e,t)=>t.timestamp.localeCompare(e.timestamp)))}),[c,e,S]),Y=q.slice((A.accessLogs-1)*K0,A.accessLogs*K0),X=W.slice((A.systemLogs-1)*K0,A.systemLogs*K0),Z={registered:K.registered.slice((A.rfid-1)*K0,A.rfid*K0),unregistered:K.unregistered.slice((A.rfid-1)*K0,A.rfid*K0),rfid:K.rfid.slice((A.rfid-1)*K0,A.rfid*K0)},Q=G.slice((A.powerConsumption-1)*K0,A.powerConsumption*K0),J=e=>{let{title:t,value:n,icon:r,color:i,bgColor:s,badge:a}=e;return(0,ON.jsxs)(CI.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.03},className:`relative p-4 sm:p-6 rounded-2xl shadow-lg flex items-center space-x-4 ${s} border ${i} transition-all duration-300 backdrop-blur-sm bg-opacity-80`,children:[(0,ON.jsx)("div",{className:`p-3 rounded-full bg-opacity-20 ${s.replace("bg-","bg-opacity-20 text-")}`,children:r}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h3",{className:"text-sm sm:text-base font-semibold text-gray-700",children:t}),(0,ON.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:n})]}),a&&(0,ON.jsx)("span",{className:"absolute top-2 right-2 px-2 py-1 text-xs font-semibold text-white bg-red-500 rounded-full",children:a})]})};return(0,ON.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-100 to-gray-200",children:[(0,ON.jsx)("div",{className:`fixed top-0 left-0 h-full bg-white shadow-2xl transition-transform duration-300 ease-in-out ${T?"translate-x-0":"-translate-x-full"} md:translate-x-0 w-[80px] lg:w-64 z-50`,children:(0,ON.jsx)(qO,{})}),(0,ON.jsxs)("div",{className:"flex-1 transition-all duration-300 p-4 sm:p-6 lg:p-8 overflow-y-auto "+(T?"ml-[80px] lg:ml-64":"ml-0 md:ml-[80px] lg:ml-64"),children:[(0,ON.jsx)("button",{onClick:()=>I(!T),className:"md:hidden fixed top-4 left-4 z-50 bg-indigo-600 text-white p-2 rounded-full shadow-lg hover:bg-indigo-700 transition-colors","aria-label":"Toggle sidebar",children:(0,ON.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),(0,ON.jsxs)(CI.h1,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-6 sm:mb-8 flex items-center",children:[(0,ON.jsx)(QO,{className:"w-6 h-6 sm:w-8 sm:h-8 mr-2 sm:mr-3 text-indigo-600"}),"Smart Eco Lock Dashboard"]}),C&&(0,ON.jsxs)("div",{className:"text-center text-indigo-600 text-lg sm:text-xl animate-pulse flex justify-center items-center",children:[(0,ON.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-indigo-600",viewBox:"0 0 24 24",children:[(0,ON.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,ON.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Loading insights..."]}),(0,ON.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,ON.jsx)("input",{type:"text",placeholder:"Search personnel, logs, alerts, power data...",value:S,onChange:e=>E(e.target.value),className:"w-full sm:w-96 rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300 py-2 sm:py-3 px-4 text-sm sm:text-base shadow-sm transition-all bg-white bg-opacity-80 backdrop-blur-sm","aria-label":"Search dashboard data"})}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,ON.jsx)(J,{title:"Total Personnel",value:U.totalInstructors+U.totalStudents+U.totalAdmins,icon:(0,ON.jsx)(wO,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"}),color:"border-blue-200",bgColor:"bg-blue-50"}),(0,ON.jsx)(J,{title:"Active Alerts",value:U.activeAlerts+Object.values(f).filter((e=>"Active"===e.status)).length,icon:(0,ON.jsx)(D0,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-600"}),color:"border-red-200",bgColor:"bg-red-50",badge:U.activeAlerts>0?`${U.activeAlerts}`:void 0}),(0,ON.jsx)(J,{title:"Access Today",value:U.totalAccessToday,icon:(0,ON.jsx)(bO,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600"}),color:"border-indigo-200",bgColor:"bg-indigo-50"}),(0,ON.jsx)(J,{title:"Rooms Monitored",value:U.totalRoomsMonitored,icon:(0,ON.jsx)(kP,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"}),color:"border-green-200",bgColor:"bg-green-50"}),(0,ON.jsx)(J,{title:"Total Schedules",value:U.totalSchedules,icon:(0,ON.jsx)(GO,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600"}),color:"border-purple-200",bgColor:"bg-purple-50"}),(0,ON.jsx)(J,{title:"RFID Scans Today",value:U.totalRFIDScansToday,icon:(0,ON.jsx)(F0,{className:"w-5 h-5 sm:w-6 sm:h-6 text-teal-600"}),color:"border-teal-200",bgColor:"bg-teal-50"})]}),N&&(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-4 right-4 bg-green-50 border border-green-300 text-green-800 p-3 sm:p-4 rounded-xl shadow-lg flex items-center text-sm sm:text-base z-50 backdrop-blur-sm bg-opacity-80","aria-live":"polite",children:[(0,ON.jsx)(B0,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-green-600"}),(0,ON.jsxs)("p",{children:["New RFID Tag Detected: ",(0,ON.jsx)("span",{className:"font-semibold",children:N})]})]}),(0,ON.jsxs)("div",{className:"space-y-8 sm:space-y-10",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 backdrop-blur-sm bg-opacity-90",children:[(0,ON.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold mb-4 sm:mb-6 flex items-center text-gray-800",children:[(0,ON.jsx)(kP,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-green-600"}),"Room Power Consumption (PZEM Data)"]}),(0,ON.jsx)("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:Q.length>0?Q.map(((e,t)=>(0,ON.jsxs)(CI.div,{whileHover:{scale:1.01},className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-all duration-200 shadow-sm",children:[(0,ON.jsxs)("h3",{className:"font-medium text-gray-800 text-base sm:text-lg",children:["Room ",e.roomName]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Building: ",e.building]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Floor: ",e.floor]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Current: ",e.current," A"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Energy: ",e.energy," kWh"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Frequency: ",e.frequency," Hz"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Power: ",e.power," W"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Power Factor: ",e.powerFactor]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Voltage: ",e.voltage," V"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Last Updated: ",$(e.timestamp)]})]},`${e.roomName}-${e.timestamp}-${t}`))):(0,ON.jsx)("p",{className:"text-gray-500 text-center text-sm sm:text-base",children:"No power consumption data available."})}),(0,ON.jsxs)("div",{className:"mt-6 flex justify-between items-center text-sm sm:text-base",children:[(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,powerConsumption:Math.max(e.powerConsumption-1,1)}))),disabled:1===A.powerConsumption,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Previous"}),(0,ON.jsxs)("span",{className:"text-gray-600",children:["Page ",A.powerConsumption," of"," ",Math.ceil(G.length/K0)]}),(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,powerConsumption:e.powerConsumption+1}))),disabled:A.powerConsumption>=Math.ceil(G.length/K0),className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Next"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 backdrop-blur-sm bg-opacity-90",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[(0,ON.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold flex items-center text-gray-800",children:[(0,ON.jsx)(D0,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-red-600"}),"Alerts"]}),(0,ON.jsxs)("select",{value:R,onChange:e=>D(e.target.value),className:"px-3 py-1 rounded-lg border-gray-300 text-sm sm:text-base focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300",children:[(0,ON.jsx)("option",{value:"all",children:"All"}),(0,ON.jsx)("option",{value:"active",children:"Active"}),(0,ON.jsx)("option",{value:"resolved",children:"Resolved"})]})]}),(0,ON.jsx)("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:H.length>0?H.map((e=>{let[t,n]=e;return(0,ON.jsxs)(CI.div,{whileHover:{scale:1.01},className:"p-4 rounded-lg border text-sm sm:text-base shadow-sm transition-all duration-200 "+("object"===typeof n&&"status"in n&&"active"===n.status?"bg-red-50 border-red-200 hover:bg-red-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"),children:[(0,ON.jsx)("p",{className:"font-medium text-gray-800",children:"string"===typeof t&&t.includes("Tamper")?"Offline Tamper Detection":"Tamper Alert"}),"string"!==typeof n&&(0,ON.jsxs)("p",{className:"text-gray-600",children:["Started: ",$(n.startTime)]}),"object"===typeof n&&"endTime"in n&&n.endTime&&(0,ON.jsxs)("p",{className:"text-gray-600",children:["Ended: ",$(n.endTime)]}),"object"===typeof n&&"status"in n&&(0,ON.jsxs)("p",{className:"text-gray-600",children:["Status: ",n.status]}),"object"===typeof n&&"resolvedByFullName"in n&&n.resolvedByFullName&&(0,ON.jsxs)("p",{className:"text-gray-600",children:["Resolved by: ",n.resolvedByFullName]}),"object"===typeof n&&"resolvedByUID"in n&&n.resolvedByUID&&(0,ON.jsxs)("p",{className:"text-gray-600",children:["Resolved by UID: ",n.resolvedByUID]})]},"string"===typeof t?t:JSON.stringify(t))})):(0,ON.jsx)("p",{className:"text-gray-500 text-center text-sm sm:text-base",children:"No alerts available."})})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 backdrop-blur-sm bg-opacity-90",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6 cursor-pointer",onClick:()=>M((e=>({...e,personnel:!e.personnel}))),children:[(0,ON.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold flex items-center text-gray-800",children:[(0,ON.jsx)(wO,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-indigo-600"}),"Personnel"]}),P.personnel?(0,ON.jsx)($0,{className:"w-5 h-5 text-gray-600"}):(0,ON.jsx)(q0,{className:"w-5 h-5 text-gray-600"})]}),(0,ON.jsx)(M0,{children:P.personnel&&(0,ON.jsxs)(CI.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"space-y-4 max-h-[400px] overflow-y-auto",children:[z.instructors.map((e=>{let[t,n]=e;return(0,ON.jsxs)(CI.div,{whileHover:{scale:1.01},className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-all duration-200 shadow-sm",children:[(0,ON.jsx)("h3",{className:"font-semibold text-gray-800 text-base sm:text-lg",children:n.Profile.fullName}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Role: ",n.Profile.role]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Email: ",n.Profile.email]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Department: ",n.Profile.department]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["ID: ",n.Profile.idNumber]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Mobile: ",n.Profile.mobileNumber]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Created: ",$(n.Profile.createdAt)]}),n.ClassStatus&&(0,ON.jsxs)(ON.Fragment,{children:[(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Class Status: ",n.ClassStatus.Status]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Class Status Time: ",$(n.ClassStatus.dateTime)]})]}),n.AccessLogs&&(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Access Logs: ",Object.keys(n.AccessLogs).length," entries"]}),n.rooms&&(0,ON.jsxs)("div",{className:"mt-2",children:[(0,ON.jsx)("p",{className:"text-gray-600 text-sm sm:text-base font-medium",children:"Facilities:"}),Object.entries(n.rooms).map((e=>{let[t,n]=e;return(0,ON.jsxs)("div",{className:"ml-2 text-sm sm:text-base",children:[(0,ON.jsxs)("p",{className:"text-gray-600",children:["Room: ",t]}),(0,ON.jsxs)("p",{className:"text-gray-600",children:["Fans: ",n.facilities.fans?"On":"Off"]}),(0,ON.jsxs)("p",{className:"text-gray-600",children:["Lights: ",n.facilities.lights?"On":"Off"]}),(0,ON.jsxs)("p",{className:"text-gray-600",children:["Tampering: ",n.facilities.tampering?"Detected":"None"]}),(0,ON.jsxs)("p",{className:"text-gray-600",children:["Last Updated: ",$(n.facilities.lastUpdated)]})]},t)}))]})]},t)})),z.students.map((e=>{let[t,n]=e;return Object.values(n.Attendance||{}).map(((e,n)=>(0,ON.jsxs)(CI.div,{whileHover:{scale:1.01},className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-all duration-200 shadow-sm",children:[(0,ON.jsx)("h3",{className:"font-semibold text-gray-800 text-base sm:text-lg",children:e.fullName}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Role: ",e.role]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Email: ",e.email]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Department: ",e.department]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["ID: ",e.idNumber]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Mobile: ",e.mobileNumber]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Action: ",e.Action]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Sensor: ",e.Sensor]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Status: ",e.Status]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Time In: ",$(e["Time In"])]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Time Out: ",e["Time Out"]?$(e["Time Out"]):"N/A"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Assigned Sensor ID: ",e.assignedSensorId]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Date: ",e.date]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Session ID: ",e.sessionId]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Timestamp: ",$(e.timestamp)]})]},`${t}-${n}`)))})),z.admins.map((e=>{let[t,n]=e;return(0,ON.jsxs)(CI.div,{whileHover:{scale:1.01},className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-all duration-200 shadow-sm",children:[(0,ON.jsx)("h3",{className:"font-semibold text-gray-800 text-base sm:text-lg",children:n.fullName}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Role: ",n.role]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Email: ",n.email]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["ID: ",n.idNumber]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["RFID UID: ",n.rfidUid]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Created: ",$(n.createdAt)]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Last Tamper Stop: ",$(n.lastTamperStop)]})]},t)}))]})})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 backdrop-blur-sm bg-opacity-90",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6 cursor-pointer",onClick:()=>M((e=>({...e,schedules:!e.schedules}))),children:[(0,ON.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold flex items-center text-gray-800",children:[(0,ON.jsx)(GO,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-purple-600"}),"Schedules"]}),P.schedules?(0,ON.jsx)($0,{className:"w-5 h-5 text-gray-600"}):(0,ON.jsx)(q0,{className:"w-5 h-5 text-gray-600"})]}),(0,ON.jsx)(M0,{children:P.schedules&&(0,ON.jsxs)(CI.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[400px] overflow-y-auto",children:[Object.entries(e).flatMap((e=>{var t;let[n,r]=e;return null!==(t=r.ClassStatus)&&void 0!==t&&t.schedule?(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-gray-50 rounded-lg border border-gray-200 shadow-sm",children:[(0,ON.jsxs)("p",{className:"font-semibold text-gray-800 text-base sm:text-lg",children:[r.ClassStatus.schedule.subject," (",r.ClassStatus.schedule.subjectCode,")"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Instructor: ",r.Profile.fullName]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:[r.ClassStatus.schedule.day,": ",r.ClassStatus.schedule.startTime," -"," ",r.ClassStatus.schedule.endTime]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Room:"," ","string"===typeof r.ClassStatus.schedule.roomName?r.ClassStatus.schedule.roomName:r.ClassStatus.schedule.roomName.name]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Section: ",r.ClassStatus.schedule.section]}),"string"!==typeof r.ClassStatus.schedule.roomName&&r.ClassStatus.schedule.roomName.pzem&&(0,ON.jsxs)("div",{className:"mt-2",children:[(0,ON.jsx)("p",{className:"text-gray-600 text-sm sm:text-base font-medium",children:"PZEM Data:"}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Current: ",r.ClassStatus.schedule.roomName.pzem.current," A"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Energy: ",r.ClassStatus.schedule.roomName.pzem.energy," kWh"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Frequency: ",r.ClassStatus.schedule.roomName.pzem.frequency," Hz"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Power: ",r.ClassStatus.schedule.roomName.pzem.power," W"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Power Factor: ",r.ClassStatus.schedule.roomName.pzem.powerFactor]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Voltage: ",r.ClassStatus.schedule.roomName.pzem.voltage," V"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Timestamp: ",$(r.ClassStatus.schedule.roomName.pzem.timestamp)]})]})]},`${n}-${r.ClassStatus.schedule.subjectCode}`):[]})),Object.entries(n).flatMap((e=>{let[t,n]=e;return Object.values(n.Attendance||{}).flatMap((e=>e.schedules.map(((n,r)=>(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-gray-50 rounded-lg border border-gray-200 shadow-sm",children:[(0,ON.jsxs)("p",{className:"font-semibold text-gray-800 text-base sm:text-lg",children:[n.subject," (",n.subjectCode,")"]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Student: ",e.fullName]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:[n.day,": ",n.startTime," - ",n.endTime]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Room:"," ","string"===typeof n.roomName?n.roomName:n.roomName.name]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Section: ",n.section]}),(0,ON.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["Instructor: ",n.instructorName]})]},`${t}-${r}`)))))}))]})})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 backdrop-blur-sm bg-opacity-90",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[(0,ON.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold flex items-center text-gray-800",children:[(0,ON.jsx)(QO,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-indigo-600"}),"Access Logs"]}),(0,ON.jsxs)("select",{value:L,onChange:e=>F(e.target.value),className:"px-3 py-1 rounded-lg border-gray-300 text-sm sm:text-base focus:border-indigo-500 focus:ring-2 focus:ring-indigo-300",children:[(0,ON.jsx)("option",{value:"all",children:"All Roles"}),(0,ON.jsx)("option",{value:"admin",children:"Admin"}),(0,ON.jsx)("option",{value:"instructor",children:"Instructor"}),(0,ON.jsx)("option",{value:"student",children:"Student"})]})]}),(0,ON.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:Y.length>0?(0,ON.jsxs)("table",{className:"w-full text-sm sm:text-base",children:[(0,ON.jsx)("thead",{children:(0,ON.jsxs)("tr",{className:"bg-indigo-50 text-indigo-800",children:[(0,ON.jsx)("th",{className:"p-2 text-left",children:"Full Name"}),(0,ON.jsx)("th",{className:"p-2 text-left",children:"Role"}),(0,ON.jsx)("th",{className:"p-2 text-left",children:"Action"}),(0,ON.jsx)("th",{className:"p-2 text-left",children:"Time"})]})}),(0,ON.jsx)("tbody",{children:Y.map(((e,t)=>{let{uid:n,timestamp:r,log:i}=e;return(0,ON.jsxs)(CI.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-gray-200 hover:bg-gray-100 transition-all duration-200",children:[(0,ON.jsx)("td",{className:"p-2 text-gray-800",children:i.fullName}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:i.role}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:i.action}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:$(i.timestamp)})]},`${n}-${r}`)}))})]}):(0,ON.jsx)("p",{className:"text-gray-500 text-center text-sm sm:text-base",children:"No access logs available."})}),(0,ON.jsxs)("div",{className:"mt-6 flex justify-between items-center text-sm sm:text-base",children:[(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,accessLogs:Math.max(e.accessLogs-1,1)}))),disabled:1===A.accessLogs,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Previous"}),(0,ON.jsxs)("span",{className:"text-gray-600",children:["Page ",A.accessLogs," of"," ",Math.ceil(q.length/K0)]}),(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,accessLogs:e.accessLogs+1}))),disabled:A.accessLogs>=Math.ceil(q.length/K0),className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Next"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 backdrop-blur-sm bg-opacity-90",children:[(0,ON.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold mb-4 sm:mb-6 flex items-center text-gray-800",children:[(0,ON.jsx)(W0,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-gray-600"}),"System Logs"]}),(0,ON.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:X.length>0?(0,ON.jsxs)("table",{className:"w-full text-sm sm:text-base",children:[(0,ON.jsx)("thead",{children:(0,ON.jsxs)("tr",{className:"bg-gray-100 text-gray-800",children:[(0,ON.jsx)("th",{className:"p-2 text-left",children:"Log Message"}),(0,ON.jsx)("th",{className:"p-2 text-left",children:"Timestamp"})]})}),(0,ON.jsx)("tbody",{children:X.map((e=>{let[t,n]=e;return(0,ON.jsxs)(CI.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-gray-200 hover:bg-gray-100 transition-all duration-200",children:[(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:n}),(0,ON.jsx)("td",{className:"p-2 text-gray-500",children:$(t)})]},t)}))})]}):(0,ON.jsx)("p",{className:"text-gray-500 text-center text-sm sm:text-base",children:"No system logs available."})}),(0,ON.jsxs)("div",{className:"mt-6 flex justify-between items-center text-sm sm:text-base",children:[(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,systemLogs:Math.max(e.systemLogs-1,1)}))),disabled:1===A.systemLogs,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Previous"}),(0,ON.jsxs)("span",{className:"text-gray-600",children:["Page ",A.systemLogs," of"," ",Math.ceil(W.length/K0)]}),(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,systemLogs:e.systemLogs+1}))),disabled:A.systemLogs>=Math.ceil(W.length/K0),className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Next"})]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6 backdrop-blur-sm bg-opacity-90",children:[(0,ON.jsxs)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-semibold mb-4 sm:mb-6 flex items-center text-gray-800",children:[(0,ON.jsx)(B0,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-teal-600"}),"RFID UIDs"]}),(0,ON.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:Z.registered.length>0||Z.unregistered.length>0||Z.rfid.length>0?(0,ON.jsxs)("table",{className:"w-full text-sm sm:text-base",children:[(0,ON.jsx)("thead",{children:(0,ON.jsxs)("tr",{className:"bg-teal-50 text-teal-800",children:[(0,ON.jsx)("th",{className:"p-2 text-left",children:"UID"}),(0,ON.jsx)("th",{className:"p-2 text-left",children:"Status/Role"}),(0,ON.jsx)("th",{className:"p-2 text-left",children:"Details"}),(0,ON.jsx)("th",{className:"p-2 text-left",children:"Timestamp"})]})}),(0,ON.jsxs)("tbody",{children:[Z.registered.map((e=>{let[t,n]=e;return(0,ON.jsxs)(CI.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-gray-200 hover:bg-gray-100 transition-all duration-200",children:[(0,ON.jsx)("td",{className:"p-2 text-gray-800 font-semibold",children:t}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:"Registered"}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:"-"}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:$(n)})]},`reg-${t}`)})),Z.unregistered.map((e=>{let[t,n]=e;return(0,ON.jsxs)(CI.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-yellow-200 bg-yellow-50 hover:bg-yellow-100 transition-all duration-200",children:[(0,ON.jsx)("td",{className:"p-2 text-gray-800 font-semibold",children:t}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:"Unregistered"}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:"Access Attempt"}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:$(n.AccessLogs)})]},`unreg-${t}`)})),Z.rfid.map((e=>{let[t,n]=e;return(0,ON.jsxs)(CI.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-gray-200 hover:bg-gray-100 transition-all duration-200",children:[(0,ON.jsx)("td",{className:"p-2 text-gray-800 font-semibold",children:t}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:n.role}),(0,ON.jsxs)("td",{className:"p-2 text-gray-600",children:["User ID: ",n.uid]}),(0,ON.jsx)("td",{className:"p-2 text-gray-600",children:$(n.timestamp)})]},`rfid-${t}`)}))]})]}):(0,ON.jsx)("p",{className:"text-gray-500 text-center text-sm sm:text-base",children:"No RFID data available."})}),(0,ON.jsxs)("div",{className:"mt-6 flex justify-between items-center text-sm sm:text-base",children:[(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,rfid:Math.max(e.rfid-1,1)}))),disabled:1===A.rfid,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Previous"}),(0,ON.jsxs)("span",{className:"text-gray-600",children:["Page ",A.rfid," of"," ",Math.ceil((K.registered.length+K.unregistered.length+K.rfid.length)/K0)]}),(0,ON.jsx)("button",{onClick:()=>O((e=>({...e,rfid:e.rfid+1}))),disabled:A.rfid>=Math.ceil((K.registered.length+K.unregistered.length+K.rfid.length)/K0),className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg disabled:opacity-50 hover:bg-indigo-200 transition-all duration-200",children:"Next"})]})]})]})]})]})},Y0=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)("all"),[f,m]=(0,r.useState)("all"),[p,g]=(0,r.useState)(""),[y,v]=(0,r.useState)("name"),[b,x]=(0,r.useState)("asc"),[w,_]=(0,r.useState)([]),[N,j]=(0,r.useState)(!1),[S,E]=(0,r.useState)(null),[C,k]=(0,r.useState)({assignedSubjects:[]}),[T,I]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{u(!0);const e=_p(IN,"users"),n=_p(IN,"teachers"),r=_p(IN,"students"),[i,s,a]=await Promise.all([Sg(e),Sg(n),Sg(r)]),o=i.docs.map((e=>({id:e.id,...e.data()}))),l=s.docs.map((e=>({id:e.id,fullName:e.data().fullName,email:e.data().email,role:"instructor",department:e.data().department,uid:e.data().uid||e.id}))),c=a.docs.map((e=>({id:e.id,fullName:e.data().fullName,email:e.data().email,role:"student",department:e.data().department,studentId:e.data().studentId,uid:e.data().uid||e.id}))),d=[...o,...l.filter((e=>!o.some((t=>t.uid===e.uid)))),...c.filter((e=>!o.some((t=>t.uid===e.uid))))];t(d),u(!1)}catch(Zg){console.error("Error fetching users:",Zg),zI().fire("Error","Failed to fetch users","error"),u(!1)}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=_p(IN,"rooms"),t=(await Sg(e)).docs.map((e=>({id:e.id,name:e.data().name||e.id,status:e.data().status||"available"})));i(t.filter((e=>"available"===e.status)))}catch(Zg){console.error("Error fetching rooms:",Zg),zI().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch rooms"})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=_p(IN,"sections"),t=(await Sg(e)).docs.map((e=>({id:e.id,name:e.data().name,code:e.data().code,teacherId:e.data().instructorId})));a(t)}catch(Zg){console.error("Error fetching sections:",Zg),zI().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch sections"})}})()}),[]);const A=e.filter((e=>{var t,n,r,i;return("all"===d||e.role===d)&&("all"===f||(null===(t=e.department)||void 0===t?void 0:t.toLowerCase())===f.toLowerCase())&&(""===p||(null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase().includes(p.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(p.toLowerCase()))||(null===(i=e.department)||void 0===i?void 0:i.toLowerCase().includes(p.toLowerCase())))})).sort(((e,t)=>{var n,r,i,s,a,o;let l,c;switch(y){case"name":l=(null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase())||"",c=(null===(r=t.fullName)||void 0===r?void 0:r.toLowerCase())||"";break;case"role":l=(null===(i=e.role)||void 0===i?void 0:i.toLowerCase())||"",c=(null===(s=t.role)||void 0===s?void 0:s.toLowerCase())||"";break;case"department":l=(null===(a=e.department)||void 0===a?void 0:a.toLowerCase())||"",c=(null===(o=t.department)||void 0===o?void 0:o.toLowerCase())||"";break;default:l="",c=""}return"asc"===b?l.localeCompare(c):c.localeCompare(l)})),O=e=>{const[t,n]=e.split(":").map(Number),r=t>=12?"PM":"AM";return`${t%12||12}:${n.toString().padStart(2,"0")} ${r}`},P=e=>`${e.day}: ${O(e.startTime)} - ${O(e.endTime)} (${e.roomName})`,M=Array.from(new Set(e.map((e=>e.department||"Unknown"))));return(0,ON.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${o?"ml-20":"ml-64"} overflow-y-auto`,children:(0,ON.jsxs)("div",{className:"p-8 space-y-8",children:[(0,ON.jsxs)("div",{className:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:items-center md:justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Users Management"}),(0,ON.jsxs)("p",{className:"mt-2 text-gray-600",children:[A.length," users found"]})]}),(0,ON.jsx)("div",{className:"relative",children:(0,ON.jsx)("input",{type:"text",placeholder:"Search users...",value:p,onChange:e=>g(e.target.value),className:"w-full md:w-64 px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})})]}),(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[(0,ON.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,ON.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ON.jsx)("option",{value:"all",children:"All Roles"}),(0,ON.jsx)("option",{value:"admin",children:"Admin"}),(0,ON.jsx)("option",{value:"instructor",children:"Instructor"}),(0,ON.jsx)("option",{value:"student",children:"Student"})]}),(0,ON.jsxs)("select",{value:f,onChange:e=>m(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ON.jsx)("option",{value:"all",children:"All Departments"}),M.map((e=>(0,ON.jsx)("option",{value:e,children:e||"Unknown"},e)))]})]}),(0,ON.jsxs)("div",{className:"flex gap-4",children:[(0,ON.jsxs)("select",{value:y,onChange:e=>{return t=e.target.value,void(y===t?x("asc"===b?"desc":"asc"):(v(t),x("asc")));var t},className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,ON.jsx)("option",{value:"name",children:"Sort by Name"}),(0,ON.jsx)("option",{value:"role",children:"Sort by Role"}),(0,ON.jsx)("option",{value:"department",children:"Sort by Department"})]}),(0,ON.jsx)("button",{onClick:()=>x("asc"===b?"desc":"asc"),className:"px-4 py-2 bg-white border border-gray-200 hover:bg-gray-50",children:"asc"===b?"\u2191":"\u2193"})]})]}),w.length>0&&(0,ON.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-indigo-700",children:[w.length," users selected"]}),(0,ON.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Selected"})]}),c?(0,ON.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,ON.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((e=>(0,ON.jsx)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden "+(w.includes(e.id)?"ring-2 ring-indigo-500":""),children:(0,ON.jsxs)("div",{className:"p-6",children:[(0,ON.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ON.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ON.jsx)("input",{type:"checkbox",checked:w.includes(e.id),onChange:t=>{t.target.checked?_([...w,e.id]):_(w.filter((t=>t!==e.id)))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,ON.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center "+("admin"===e.role?"bg-blue-100":"instructor"===e.role?"bg-purple-100":"bg-green-100"),children:"student"===e.role?(0,ON.jsx)(LO,{className:"w-6 h-6 text-green-600"}):(0,ON.jsx)(AI,{className:"w-6 h-6 "+("admin"===e.role?"text-blue-600":"text-purple-600")})}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.fullName}),(0,ON.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,ON.jsx)("div",{className:"flex items-center space-x-2",children:"instructor"===e.role&&(0,ON.jsxs)("button",{onClick:()=>(async e=>{try{console.log("Opening details modal for user:",e),E(e);const t=Np(IN,"teachers",e.id),n=await Ng(t);if(n.exists()){const e=n.data().assignedSubjects||[];k({assignedSubjects:e.map((e=>({id:e.id,name:e.name,department:e.department||"Unknown",status:e.status||"active",sections:e.sections||[]})))})}else console.warn(`No teacher document found for ID: ${e.id}`),k({assignedSubjects:[]});I(!0)}catch(Zg){console.error("Error fetching instructor details:",Zg),zI().fire("Error","Failed to load instructor details","error")}})(e),className:"p-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition-colors duration-200 flex items-center space-x-2",children:[(0,ON.jsx)(XO,{className:"w-5 h-5 mr-1"}),(0,ON.jsx)("span",{children:"Details"})]})})]}),(0,ON.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,ON.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("admin"===e.role?"bg-blue-100 text-blue-800":"instructor"===e.role?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"),children:e.role.charAt(0).toUpperCase()+e.role.slice(1)}),e.department&&(0,ON.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.department}),e.studentId&&(0,ON.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["ID: ",e.studentId]})]})]})},e.id)))})]})}),N&&(0,ON.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ON.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,ON.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Delete Selected Users"}),(0,ON.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",w.length," selected users? This action cannot be undone."]}),(0,ON.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,ON.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,ON.jsx)("button",{onClick:async()=>{try{await Promise.all(w.map((t=>{const n=e.find((e=>e.id===t));if(n){const e="instructor"===n.role?"teachers":"student"===n.role?"students":"users";return kg(Np(IN,e,t))}}))),_([]),j(!1),zI().fire({icon:"success",title:"Users Deleted",text:"Selected users have been removed successfully.",background:"#f8fafc",iconColor:"#3b82f6",confirmButtonColor:"#3b82f6"})}catch(Zg){console.error("Error deleting users:",Zg),zI().fire("Error","Failed to delete users","error")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete Users"})]})]})}),T&&S?(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ON.jsxs)(CI.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},transition:{type:"spring",stiffness:300,damping:20},className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[95vh] overflow-y-auto flex",children:[(0,ON.jsxs)("div",{className:"w-1/3 bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-6 flex flex-col justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,ON.jsx)("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,ON.jsx)(AI,{className:"w-8 h-8 text-white"})}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h2",{className:"text-xl font-bold",children:S.fullName}),(0,ON.jsx)("p",{className:"text-sm opacity-75",children:S.email})]})]}),(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm opacity-75 mb-1",children:"Department"}),(0,ON.jsx)("p",{className:"font-semibold",children:S.department||"Not Specified"})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm opacity-75 mb-1",children:"Assigned Subjects"}),(0,ON.jsx)("div",{className:"flex flex-wrap gap-2",children:0===C.assignedSubjects.length?(0,ON.jsx)("span",{className:"text-xs bg-white bg-opacity-10 px-2 py-1 rounded",children:"No subjects assigned"}):C.assignedSubjects.map((e=>(0,ON.jsx)("span",{className:"text-xs bg-white bg-opacity-10 px-2 py-1 rounded",children:e.name},e.id)))})]})]})]}),(0,ON.jsxs)("div",{className:"mt-auto",children:[(0,ON.jsx)("p",{className:"text-xs opacity-75 mb-2",children:"Last Updated"}),(0,ON.jsx)("p",{className:"text-sm font-medium",children:(new Date).toLocaleDateString()})]})]}),(0,ON.jsxs)("div",{className:"w-2/3 p-8 overflow-y-auto",children:[(0,ON.jsx)("div",{className:"space-y-8",children:(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,ON.jsx)(LO,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Assigned Subjects & Schedules"]}),0===C.assignedSubjects.length?(0,ON.jsx)("p",{className:"text-gray-600",children:"No subjects assigned to this instructor."}):(0,ON.jsx)("div",{className:"grid grid-cols-1 gap-4",children:C.assignedSubjects.map((e=>(0,ON.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,ON.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["Department: ",e.department]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ",e.status]}),e.sections&&e.sections.length>0?(0,ON.jsxs)("div",{className:"mt-2",children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Sections:"}),e.sections.map((e=>(0,ON.jsxs)("div",{className:"mt-2 pl-4 border-l-2 border-indigo-200",children:[(0,ON.jsxs)("p",{className:"text-sm font-medium text-gray-800",children:[e.name," (",e.code,")"]}),(0,ON.jsxs)("p",{className:"text-xs text-gray-600",children:["Enrollment: ",e.currentEnrollment,"/",e.capacity]}),e.schedules&&e.schedules.length>0?(0,ON.jsxs)("div",{className:"mt-1",children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Schedules:"}),(0,ON.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600",children:e.schedules.map(((e,t)=>(0,ON.jsx)("li",{children:P(e)},t)))})]}):(0,ON.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"No schedules assigned"})]},e.id)))]}):(0,ON.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"No sections assigned"})]},e.id)))})]})}),(0,ON.jsx)("div",{className:"mt-8 flex justify-end space-x-4 border-t pt-6",children:(0,ON.jsx)(CI.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>I(!1),className:"px-6 py-2 text-gray-600 hover:text-gray-800 rounded-lg border",children:"Close"})})]})]})}):null]})};function X0(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))}const Z0=r.forwardRef(X0);!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var Q0=e=>"number"==typeof e&&!isNaN(e),J0=e=>"string"==typeof e,e1=e=>"function"==typeof e,t1=e=>J0(e)||e1(e)?e:null,n1=(e,t)=>!1===e||Q0(e)&&e>0?e:t,r1=e=>(0,r.isValidElement)(e)||J0(e)||e1(e)||Q0(e);function i1(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:s=!0,collapseDuration:a=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=e,m=i?`${t}--${l}`:t,p=i?`${n}--${l}`:n,g=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{let e=d.current,t=m.split(" "),n=r=>{r.target===d.current&&(f(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,u,a):u()};h||(c?t():(g.current=1,e.className+=` ${p}`,e.addEventListener("animationend",t)))}),[h]),r.createElement(r.Fragment,null,o)}}function s1(e,t){return{content:a1(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function a1(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.isValidElement)(e)&&!J0(e.type)?(0,r.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e1(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function o1(e){let{delay:t,isRunning:n,closeToast:i,type:s="default",hide:a,className:o,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:h}=e,f=a||l&&0===c,m={animationDuration:`${t}ms`,animationPlayState:n?"running":"paused"};l&&(m.transform=`scaleX(${c})`);let p=$P("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":u}),g=e1(o)?o({rtl:u,type:s,defaultClassName:p}):$P(p,o),y={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&i()}};return r.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},r.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${s}`}),r.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:g,style:m,...y}))}var l1=1,c1=()=>""+l1++;function u1(e,t,n){let r=1,i=0,s=[],a=[],o=t,l=new Map,c=new Set,u=()=>{a=Array.from(l.values()),c.forEach((e=>e()))},d=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},f=e=>{var t,r;let{toastId:i,updateId:s}=e.props,a=null==s;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(i,e),u(),n(s1(e,a?"added":"updated")),a&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:o,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:h,toasts:l,clearQueue:()=>{i-=s.length,s=[]},buildToast:(t,a)=>{if((t=>{let{containerId:n,toastId:r,updateId:i}=t,s=n?n!==e:1!==e,a=l.has(r)&&null==i;return s||a})(a))return;let{toastId:c,updateId:d,data:m,staleId:p,delay:g}=a,y=null==d;y&&i++;let v={...o,style:o.toastStyle,key:r++,...Object.fromEntries(Object.entries(a).filter((e=>{let[t,n]=e;return null!=n}))),toastId:c,updateId:d,data:m,isIn:!1,className:t1(a.className||o.toastClassName),progressClassName:t1(a.progressClassName||o.progressClassName),autoClose:!a.isLoading&&n1(a.autoClose,o.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(s1(e,"removed")),l.delete(c),i--,i<0&&(i=0),s.length>0)return void f(s.shift());u()}}};v.closeButton=o.closeButton,!1===a.closeButton||r1(a.closeButton)?v.closeButton=a.closeButton:!0===a.closeButton&&(v.closeButton=!r1(o.closeButton)||o.closeButton);let b={content:t,props:v,staleId:p};o.limit&&o.limit>0&&i>o.limit&&y?s.push(b):Q0(g)?setTimeout((()=>{f(b)}),g):f(b)},setProps(e){o=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>a}}var d1=new Map,h1=[],f1=new Set,m1=e=>f1.forEach((t=>t(e))),p1=()=>d1.size>0;function g1(e,t){var n;if(t)return!(null==(n=d1.get(t))||!n.isToastActive(e));let r=!1;return d1.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function y1(e){if(p1()){if(null==e||(e=>J0(e)||Q0(e))(e))d1.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=d1.get(e.containerId);t?t.removeToast(e.id):d1.forEach((t=>{t.removeToast(e.id)}))}}else h1=h1.filter((t=>null!=e&&t.options.toastId!==e))}function v1(e,t){r1(e)&&(p1()||h1.push({content:e,options:t}),d1.forEach((n=>{n.buildToast(e,t)})))}function b1(e,t){d1.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function x1(e){let t=e.containerId||1;return{subscribe(n){let r=u1(t,e,m1);d1.set(t,r);let i=r.observe(n);return h1.forEach((e=>v1(e.content,e.options))),h1=[],()=>{i(),d1.delete(t)}},setProps(e){var n;null==(n=d1.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=d1.get(t))?void 0:e.getSnapshot()}}}function w1(e){return e&&(J0(e.toastId)||Q0(e.toastId))?e.toastId:c1()}function _1(e,t){return v1(e,t),t.toastId}function N1(e,t){return{...t,type:t&&t.type||e,toastId:w1(t)}}function j1(e){return(t,n)=>_1(t,N1(e,n))}function S1(e,t){return _1(e,N1("default",t))}function E1(e){let[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),a=(0,r.useRef)(null),o=(0,r.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;function f(){n(!0)}function m(){n(!1)}function p(n){let r=a.current;if(o.canDrag&&r){o.didMove=!0,t&&m(),"x"===e.draggableDirection?o.delta=n.clientX-o.start:o.delta=n.clientY-o.start,o.start!==n.clientX&&(o.canCloseOnClick=!1);let i="x"===e.draggableDirection?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;r.style.transform=`translate3d(${i},0)`,r.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance))}}function g(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g);let t=a.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=d1.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,r.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",f),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",m)}}),[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){o.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",g);let n=a.current;o.canCloseOnClick=!0,o.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(o.start=t.clientX,o.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(o.start=t.clientY,o.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:i,right:s}=a.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=i&&t.clientX<=s&&t.clientY>=n&&t.clientY<=r?m():f()}};return l&&c&&(y.onMouseEnter=m,e.stacked||(y.onMouseLeave=f)),h&&(y.onClick=e=>{d&&d(e),o.canCloseOnClick&&u(!0)}),{playToast:f,pauseToast:m,isRunning:t,preventExitTransition:i,toastRef:a,eventHandlers:y}}S1.loading=(e,t)=>_1(e,N1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),S1.promise=function(e,t,n){let r,{pending:i,error:s,success:a}=t;i&&(r=J0(i)?S1.loading(i,n):S1.loading(i.render,{...n,...i}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void S1.dismiss(r);let s={type:e,...o,...n,data:i},a=J0(t)?{render:t}:t;return r?S1.update(r,{...s,...a}):S1(a.render,{...s,...a}),i},c=e1(e)?e():e;return c.then((e=>l("success",a,e))).catch((e=>l("error",s,e))),c},S1.success=j1("success"),S1.info=j1("info"),S1.error=j1("error"),S1.warning=j1("warning"),S1.warn=S1.warning,S1.dark=(e,t)=>_1(e,N1("default",{theme:"dark",...t})),S1.dismiss=function(e){y1(e)},S1.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d1.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},S1.isActive=g1,S1.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=d1.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:c1()};s.toastId!==e&&(s.staleId=e);let a=s.render||i;delete s.render,_1(a,s)}},S1.done=e=>{S1.update(e,{progress:1})},S1.onChange=function(e){return f1.add(e),()=>{f1.delete(e)}},S1.play=e=>b1(!0,e),S1.pause=e=>b1(!1,e);var C1="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,k1=e=>{let{theme:t,type:n,isLoading:i,...s}=e;return r.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...s})};var T1={info:function(e){return r.createElement(k1,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(k1,{...e},r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(k1,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(k1,{...e},r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function I1(e){let{theme:t,type:n,isLoading:i,icon:s}=e,a=null,o={theme:t,type:n};return!1===s||(e1(s)?a=s({...o,isLoading:i}):(0,r.isValidElement)(s)?a=(0,r.cloneElement)(s,o):i?a=T1.spinner():(e=>e in T1)(n)&&(a=T1[n](o))),a}var A1=e=>{let{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:s,playToast:a}=E1(e),{closeButton:o,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:f,transition:m,position:p,className:g,style:y,progressClassName:v,updateId:b,role:x,progress:w,rtl:_,toastId:N,deleteToast:j,isIn:S,isLoading:E,closeOnClick:C,theme:k,ariaLabel:T}=e,I=$P("Toastify__toast",`Toastify__toast-theme--${k}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":_},{"Toastify__toast--close-on-click":C}),A=e1(g)?g({rtl:_,position:p,type:d,defaultClassName:I}):$P(I,g),O=I1(e),P=!!w||!c,M={closeToast:f,type:d,theme:k},R=null;return!1===o||(R=e1(o)?o(M):(0,r.isValidElement)(o)?(0,r.cloneElement)(o,M):function(e){let{closeToast:t,theme:n,ariaLabel:i="close"}=e;return r.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":i},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(M)),r.createElement(m,{isIn:S,done:j,position:p,preventExitTransition:n,nodeRef:i,playToast:a},r.createElement("div",{id:N,tabIndex:0,onClick:u,"data-in":S,className:A,...s,style:y,ref:i,...S&&{role:x,"aria-label":T}},null!=O&&r.createElement("div",{className:$P("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},O),a1(l,e,!t),R,!e.customProgressBar&&r.createElement(o1,{...b&&!P?{key:`p-${b}`}:{},rtl:_,theme:k,delay:c,isRunning:t,isIn:S,closeToast:f,hide:h,type:d,className:v,controlledProgress:P,progress:w||0})))},O1=function(e){return{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},P1=i1(O1("bounce",!0)),M1=(i1(O1("slide",!0)),i1(O1("zoom")),i1(O1("flip")),{position:"top-right",transition:P1,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function R1(e){let t={...M1,...e},n=e.stacked,[i,s]=(0,r.useState)(!0),a=(0,r.useRef)(null),{getToastToRender:o,isToastActive:l,count:c}=function(e){var t;let{subscribe:n,getSnapshot:i,setProps:s}=(0,r.useRef)(x1(e)).current;s(e);let a=null==(t=(0,r.useSyncExternalStore)(n,i,i))?void 0:t.slice();return{getToastToRender:function(t){if(!a)return[];let n=new Map;return e.newestOnTop&&a.reverse(),a.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:g1,count:null==a?void 0:a.length}}(t),{className:u,style:d,rtl:h,containerId:f,hotKeys:m}=t;function p(e){let t=$P("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":h});return e1(u)?u({position:e,rtl:h,defaultClassName:t}):$P(t,t1(u))}function g(){n&&(s(!0),S1.play())}return C1((()=>{var e;if(n){let n=a.current.querySelectorAll('[data-in="true"]'),r=12,s=null==(e=t.position)?void 0:e.includes("top"),o=0,l=0;Array.from(n).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${i}`),n.dataset.pos||(n.dataset.pos=s?"top":"bot");let a=o*(i?.2:1)+(i?0:r*t);n.style.setProperty("--y",`${s?a:-1*a}px`),n.style.setProperty("--g",`${r}`),n.style.setProperty("--s",""+(1-(i?l:0))),o+=n.offsetHeight,l+=.025}))}}),[i,c,n]),(0,r.useEffect)((()=>{function e(e){var t;let n=a.current;m(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),s(!1),S1.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(s(!0),S1.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[m]),r.createElement("section",{ref:a,className:"Toastify",id:f,onMouseEnter:()=>{n&&(s(!1),S1.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o(((e,t)=>{let i=t.length?{...d}:{...d,pointerEvents:"none"};return r.createElement("div",{tabIndex:-1,className:p(e),"data-stacked":n,style:i,key:`c-${e}`},t.map((e=>{let{content:t,props:i}=e;return r.createElement(A1,{...i,stacked:n,collapseAll:g,isIn:l(i.toastId,i.containerId),key:`t-${i.key}`},t)})))})))}const D1=()=>{const{currentUser:e}=MN(),[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(0),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)({fullName:(null===e||void 0===e?void 0:e.fullName)||"",email:(null===e||void 0===e?void 0:e.email)||"",profilePicture:""}),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(null),[m,p]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[g,y]=(0,r.useState)({current:!1,new:!1,confirm:!1}),[v,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)({fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",profilePicture:""}),_=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(null!==e&&void 0!==e&&e.uid){const t=async()=>{try{const t=await Ng(Np(IN,"users",e.uid));if(t.exists()){const n=t.data();c({fullName:n.fullName||e.fullName||"",email:n.email||e.email||"",profilePicture:n.profilePicture||""})}}catch(Zg){console.error("Error fetching profile:",Zg),S1.error("Failed to load profile data")}};t()}}),[e]);const N={profile:{icon:AI,title:"Profile Settings",description:"Manage your personal information and profile picture",content:(0,ON.jsxs)("div",{className:"space-y-6",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Profile Picture"}),(0,ON.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ON.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:h||l.profilePicture?(0,ON.jsx)("img",{src:h||l.profilePicture,alt:"Profile",className:"w-full h-full object-cover"}):(0,ON.jsx)(AI,{className:"w-12 h-12 text-gray-400"})}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("input",{type:"file",accept:"image/jpeg,image/png",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){if(n.size>5242880)return void w((e=>({...e,profilePicture:"Image size must be less than 5MB"})));if(!["image/jpeg","image/png"].includes(n.type))return void w((e=>({...e,profilePicture:"Only JPEG or PNG images are allowed"})));d(n),f(URL.createObjectURL(n)),w((e=>({...e,profilePicture:""})))}},className:"hidden",ref:_}),(0,ON.jsxs)("button",{onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[(0,ON.jsx)(Z0,{className:"h-5 w-5 mr-2"}),"Upload Picture"]}),x.profilePicture&&(0,ON.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.profilePicture})]})]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Full Name"}),(0,ON.jsx)("input",{type:"text",value:l.fullName,onChange:e=>c((t=>({...t,fullName:e.target.value}))),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),x.fullName&&(0,ON.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.fullName})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Email"}),(0,ON.jsx)("input",{type:"email",value:l.email,onChange:e=>c((t=>({...t,email:e.target.value}))),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),x.email&&(0,ON.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.email})]})]})},security:{icon:TI,title:"Security Settings",description:"Update your password and security preferences",content:(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("input",{type:"checkbox",checked:v,onChange:e=>b(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,ON.jsx)("label",{className:"ml-2 block text-sm font-medium text-blue-800",children:"Change Password"})]}),v&&(0,ON.jsxs)(ON.Fragment,{children:[(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Current Password"}),(0,ON.jsx)("input",{type:g.current?"text":"password",value:m.currentPassword,onChange:e=>p((t=>({...t,currentPassword:e.target.value}))),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,ON.jsx)("button",{type:"button",onClick:()=>y((e=>({...e,current:!e.current}))),className:"absolute right-3 top-10 text-gray-500",children:g.current?(0,ON.jsx)(LI,{className:"h-5 w-5"}):(0,ON.jsx)(UI,{className:"h-5 w-5"})}),x.currentPassword&&(0,ON.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.currentPassword})]}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"New Password"}),(0,ON.jsx)("input",{type:g.new?"text":"password",value:m.newPassword,onChange:e=>p((t=>({...t,newPassword:e.target.value}))),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,ON.jsx)("button",{type:"button",onClick:()=>y((e=>({...e,new:!e.new}))),className:"absolute right-3 top-10 text-gray-500",children:g.new?(0,ON.jsx)(LI,{className:"h-5 w-5"}):(0,ON.jsx)(UI,{className:"h-5 w-5"})}),x.newPassword&&(0,ON.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.newPassword})]}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Confirm New Password"}),(0,ON.jsx)("input",{type:g.confirm?"text":"password",value:m.confirmPassword,onChange:e=>p((t=>({...t,confirmPassword:e.target.value}))),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,ON.jsx)("button",{type:"button",onClick:()=>y((e=>({...e,confirm:!e.confirm}))),className:"absolute right-3 top-10 text-gray-500",children:g.confirm?(0,ON.jsx)(LI,{className:"h-5 w-5"}):(0,ON.jsx)(UI,{className:"h-5 w-5"})}),x.confirmPassword&&(0,ON.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x.confirmPassword})]})]})]})}};return(0,ON.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,ON.jsx)(qO,{}),(0,ON.jsxs)("div",{className:`flex-1 transition-all duration-300 ${t?"ml-20":"ml-64"} p-8 overflow-y-auto`,children:[(0,ON.jsx)(R1,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),(0,ON.jsxs)("div",{className:"container mx-auto",children:[(0,ON.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,ON.jsxs)("h1",{className:"text-3xl font-bold text-blue-800 flex items-center",children:[(0,ON.jsx)(AI,{className:"h-10 w-10 mr-3 text-blue-600"}),"Settings"]})}),(0,ON.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,ON.jsx)("div",{className:"col-span-3 bg-white rounded-xl shadow-md p-4",children:Object.keys(N).map(((e,t)=>(0,ON.jsx)("button",{onClick:()=>s(t),className:"w-full text-left px-4 py-3 rounded-lg mb-2 transition "+(i===t?"bg-blue-100 text-blue-800":"hover:bg-blue-50 text-blue-600"),children:(0,ON.jsxs)("div",{className:"flex items-center",children:[r.createElement(N[e].icon,{className:"h-6 w-6 mr-3"}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"font-semibold",children:N[e].title}),(0,ON.jsx)("p",{className:"text-xs text-blue-400",children:N[e].description})]})]})},t)))}),(0,ON.jsxs)("div",{className:"col-span-9 bg-white rounded-xl shadow-md p-6",children:[(0,ON.jsx)("h2",{className:"text-2xl font-bold text-blue-800 mb-6",children:N[Object.keys(N)[i]].title}),N[Object.keys(N)[i]].content,(0,ON.jsx)("div",{className:"mt-6 flex justify-end space-x-4",children:(0,ON.jsxs)("button",{onClick:async()=>{if((()=>{let e=!0;const t={fullName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:"",profilePicture:""};return l.fullName.trim()||(t.fullName="Full name is required",e=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(t.email="Invalid email format",e=!1),v&&(m.currentPassword||(t.currentPassword="Current password is required",e=!1),m.newPassword?m.newPassword.length<6&&(t.newPassword="Password must be at least 6 characters",e=!1):(t.newPassword="New password is required",e=!1),m.newPassword!==m.confirmPassword&&(t.confirmPassword="Passwords do not match",e=!1)),w(t),e})()){o(!0);try{const t={fullName:l.fullName,email:l.email};if(u){const n=SN(TN,`profilePictures/${null===e||void 0===e?void 0:e.uid}`);await NN(n,u);const r=await jN(n);t.profilePicture=r,c((e=>({...e,profilePicture:r}))),d(null),f(null),_.current&&(_.current.value="")}if(await Eg(Np(IN,"users",(null===e||void 0===e?void 0:e.uid)||""),t,{merge:!0}),l.email!==(null===e||void 0===e?void 0:e.email)&&kN.currentUser){const t=Ui.credential((null===e||void 0===e?void 0:e.email)||"",m.currentPassword||prompt("Please enter your current password to update email")||"");await ts(kN.currentUser,t)}v&&kN.currentUser&&(await as(kN.currentUser,m.newPassword),p({currentPassword:"",newPassword:"",confirmPassword:""}),b(!1)),S1.success("Settings updated successfully")}catch(Zg){console.error("Error saving settings:",Zg),"auth/requires-recent-login"===Zg.code?S1.error("Please re-login to update sensitive information"):S1.error("Failed to update settings")}finally{o(!1)}}},disabled:a,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition "+(a?"opacity-50 cursor-not-allowed":""),children:[a?(0,ON.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",viewBox:"0 0 24 24",children:[(0,ON.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ON.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-8 8v-8H4z"})]}):(0,ON.jsx)(AI,{className:"h-5 w-5 mr-2"}),a?"Saving...":"Save Changes"]})})]})]})]})]})]})},L1=()=>{const{currentUser:e}=MN(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(!0),[a,o]=(0,r.useState)(new Date),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const i=lg(_p(IN,"classes"),ug("instructorId","==",e.uid)),a=await Sg(i),o=[],l=new Set;for(const e of a.docs){var t,r;const n=e.data(),i=await Sg(lg(_p(IN,"subjects"),ug("code","==",n.subjectCode))),s=lg(_p(IN,"enrollments"),ug("classId","==",e.id)),a=await Sg(s);l.add(n.department),o.push({...n,id:e.id,subjectName:(null===(t=i.docs[0])||void 0===t||null===(r=t.data())||void 0===r?void 0:r.name)||"Unknown Subject",studentCount:a.size})}n(o),c(Array.from(l)),s(!1)}catch(Zg){console.error("Error fetching classes:",Zg),s(!1)}})()}),[e]);const h=()=>{const e=mJ(a,"EEEE").toLowerCase();return t.filter((t=>t.days.includes(e)))};return i?(0,ON.jsxs)("div",{className:"flex h-screen",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:"flex-1 p-8",children:(0,ON.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})})]}):(0,ON.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${u?"ml-20":"ml-64"} overflow-y-auto`,children:(0,ON.jsxs)("div",{className:"p-8",children:[(0,ON.jsxs)("div",{className:"mb-6",children:[(0,ON.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"My Classes"}),(0,ON.jsx)("input",{type:"date",value:mJ(a,"yyyy-MM-dd"),onChange:e=>o(new Date(e.target.value)),className:"px-4 py-2 border rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),l.map((e=>{const t=(e=>h().filter((t=>t.department===e)))(e);return 0===t.length?null:(0,ON.jsxs)("div",{className:"mb-8",children:[(0,ON.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:e}),(0,ON.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((e=>(0,ON.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.subjectName}),(0,ON.jsx)("p",{className:"text-sm text-gray-600",children:e.subjectCode})]}),(0,ON.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800",children:["Room ",e.roomNumber]})]}),(0,ON.jsxs)("div",{className:"space-y-2",children:[(0,ON.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Time:"}),(0,ON.jsxs)("span",{className:"text-gray-800",children:[e.startTime," - ",e.endTime]})]}),(0,ON.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Students:"}),(0,ON.jsx)("span",{className:"text-gray-800",children:e.studentCount||0})]}),(0,ON.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ON.jsx)("span",{className:"text-gray-600",children:"Days:"}),(0,ON.jsx)("span",{className:"text-gray-800",children:e.days.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(", ")})]})]})]},e.id)))})]},e)})),0===h().length&&(0,ON.jsx)("div",{className:"text-center py-12",children:(0,ON.jsxs)("p",{className:"text-gray-600 text-lg",children:["No classes scheduled for ",mJ(a,"EEEE, MMMM do, yyyy")]})})]})})]})};function F1(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const U1=r.forwardRef(F1),B1=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)({department:"all",day:"all",semester:"all"}),{currentUser:f}=MN(),m="admin"===(null===f||void 0===f?void 0:f.role),p=(null===f||void 0===f||f.role,async()=>{try{a(!0);const e=_p(IN,"subjects"),n=await Sg(e),r=new Map(n.docs.map((e=>{const t=e.data();return[e.id,{id:e.id,code:t.code||"",name:t.name||""}]}))),i=_p(IN,"teachers"),s=await Sg(i),o=[];s.docs.forEach((e=>{const t=e.data(),n=(t.schedules||[]).map(((n,i)=>{const s=n.subject?r.get(n.subject):null;return{...n,id:`${e.id}-${n.section}`,subject:s?s.name:n.subject,subjectCode:s?s.code:n.subjectCode,instructor:t.fullName,department:t.department,semester:t.currentSemester||"Current Semester"}}));o.push(...n)})),o.sort(((e,t)=>{const n=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n};return n(e.startTime)-n(t.startTime)})),t(o),a(!1)}catch(Zg){console.error("Error fetching schedules:",Zg),zI().fire("Error","Failed to fetch schedules","error"),a(!1)}});(0,r.useEffect)((()=>{if(f&&"admin"===f.role)p();else{if(f){const e=Ig(lg(_p(IN,"teachers"),ug("uid","==",f.uid)),(async e=>{if(!e.empty){const n=e.docs[0],r=n.data().schedules||[];t(r.map(((e,t)=>({...e,id:`${n.id}_${t}`}))))}a(!1)}),(e=>{console.error("Error fetching schedules:",e),zI().fire({icon:"error",title:"Fetch Error",text:e.message||"Failed to fetch schedules",confirmButtonColor:"#3b82f6"}),a(!1)}));return()=>e()}a(!1)}}),[f]);const g=(0,r.useMemo)((()=>e.filter((e=>{var t,n,r,i;const s=!c||(null===(t=e.subject)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.instructor)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.department)||void 0===r?void 0:r.toLowerCase().includes(c.toLowerCase()))||(null===(i=e.roomNumber)||void 0===i?void 0:i.toLowerCase().includes(c.toLowerCase())),a="all"===d.department||e.department===d.department,o="all"===d.day||e.days&&e.days.includes(d.day),l="all"===d.semester||e.semester===d.semester;return s&&a&&o&&l}))),[e,c,d]),{departments:y,days:v,semesters:b}=(()=>{const t=Array.from(new Set(e.map((e=>e.department||"Unassigned")))),n=Array.from(new Set(e.flatMap((e=>e.days||[])))),r=Array.from(new Set(e.map((e=>e.semester||"Current Semester"))));return{departments:t,days:n,semesters:r}})();return(0,ON.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,ON.jsx)(qO,{}),(0,ON.jsxs)("div",{className:`\n        flex-1 p-8 transition-all duration-300 \n        ${n?"ml-20":"ml-64"}\n        overflow-y-auto\n      `,children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,ON.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Course Schedules"}),(0,ON.jsx)("p",{className:"text-gray-600",children:"View and manage course schedules across departments"})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-8 flex flex-wrap gap-4 items-center justify-between",children:[(0,ON.jsx)("div",{className:"flex-grow max-w-md",children:(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("input",{type:"text",placeholder:"Search schedules...",value:c,onChange:e=>u(e.target.value),className:" w-full px-4 py-2 pl-10  border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 "}),(0,ON.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,ON.jsxs)("div",{className:"flex space-x-4",children:[(0,ON.jsxs)("select",{value:d.department,onChange:e=>h((t=>({...t,department:e.target.value}))),className:" px-4 py-2 border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 ",children:[(0,ON.jsx)("option",{value:"all",children:"All Departments"}),y.map((e=>(0,ON.jsx)("option",{value:e,children:e},e)))]}),(0,ON.jsxs)("select",{value:d.day,onChange:e=>h((t=>({...t,day:e.target.value}))),className:" px-4 py-2 border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 ",children:[(0,ON.jsx)("option",{value:"all",children:"All Days"}),v.map((e=>(0,ON.jsx)("option",{value:e,children:e},e)))]}),(0,ON.jsxs)("select",{value:d.semester,onChange:e=>h((t=>({...t,semester:e.target.value}))),className:" px-4 py-2 border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 ",children:[(0,ON.jsx)("option",{value:"all",children:"All Semesters"}),b.map((e=>(0,ON.jsx)("option",{value:e,children:e},e)))]}),m&&(0,ON.jsxs)("button",{onClick:()=>l(!0),className:" px-4 py-2 bg-primary-500 text-white  rounded-lg hover:bg-primary-600  transition-colors flex items-center ",children:[(0,ON.jsx)(U1,{className:"w-5 h-5 mr-2"}),"Add Schedule"]})]})]}),s?(0,ON.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-primary-500"})}):0===g.length?(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16 bg-white rounded-2xl shadow-md",children:[(0,ON.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"No schedules found"}),(0,ON.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter options"})]}):(0,ON.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((e=>(e=>{var t;const n={"Computer Science":"bg-blue-50 border-blue-200 text-blue-800",Mathematics:"bg-green-50 border-green-200 text-green-800",Physics:"bg-purple-50 border-purple-200 text-purple-800",Engineering:"bg-indigo-50 border-indigo-200 text-indigo-800",default:"bg-gray-50 border-gray-200 text-gray-800"}[e.department||"default"];return(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`\n          ${n}\n          rounded-2xl p-6 \n          border \n          shadow-md \n          hover:shadow-lg \n          transition-all \n          duration-300 \n          transform \n          hover:-translate-y-2\n          space-y-4\n        `,children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.subject||"Unassigned Subject"}),(0,ON.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,ON.jsxs)("span",{className:"flex items-center",children:[(0,ON.jsx)(WO,{className:"w-4 h-4 mr-1"}),e.startTime," - ",e.endTime]}),(0,ON.jsxs)("span",{className:"flex items-center",children:[(0,ON.jsx)(GO,{className:"w-4 h-4 mr-1"}),(null===(t=e.days)||void 0===t?void 0:t.join(", "))||"N/A"]})]})]}),(0,ON.jsxs)("div",{className:"text-right",children:[(0,ON.jsxs)("p",{className:"text-sm font-medium text-gray-500",children:["Room: ",e.roomNumber||"TBD"]}),(0,ON.jsx)("p",{className:"text-sm text-gray-600",children:e.instructor||"Unassigned"})]})]}),(0,ON.jsxs)("div",{className:"border-t border-gray-200 pt-3 mt-3 flex justify-between items-center",children:[(0,ON.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full  bg-gray-100 text-gray-600",children:e.department||"Unassigned Department"}),(0,ON.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full  bg-gray-100 text-gray-600",children:e.semester||"Current Semester"})]})]},e.id)})(e)))})]})]})};function V1(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const $1=r.forwardRef(V1),z1={"Computer Science":"bg-blue-100 text-blue-800",Mathematics:"bg-green-100 text-green-800",Physics:"bg-purple-100 text-purple-800",Biology:"bg-teal-100 text-teal-800",Chemistry:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},q1=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)({key:"day",direction:"asc"}),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1),{currentUser:p}=MN();(0,r.useEffect)((()=>{(async()=>{try{m(!0);const e=_p(IN,"teachers"),n=(await Sg(e)).docs.map((e=>({id:e.id,fullName:e.data().fullName||"Unknown",email:e.data().email||"",department:e.data().department||"Unknown",uid:e.data().uid||e.id,assignedSubjects:e.data().assignedSubjects||[]}))),r=Array.from(new Set(n.map((e=>e.department)))).filter(Boolean);t(n),i(r),m(!1)}catch(Zg){console.error("Error fetching data:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to fetch teachers"}),m(!1)}})()}),[]);const g=e=>{const[t,n]=e.split(":").map(Number),r=t>=12?"PM":"AM";return`${t%12||12}:${n.toString().padStart(2,"0")} ${r}`},y={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},v=(0,r.useMemo)((()=>{if(!s)return[];return s.assignedSubjects.flatMap((e=>e.sections.flatMap((t=>t.schedules.map((n=>({...n,subject:e.name,section:t.name,room:n.roomName}))))))).sort(((e,t)=>{if("day"===c.key){const n=(y[e.day]||8)-(y[t.day]||8);return"asc"===c.direction?n:-n}{var n,r;const i=null!==(n=e[c.key])&&void 0!==n?n:"",s=null!==(r=t[c.key])&&void 0!==r?r:"",a=String(i).localeCompare(String(s));return"asc"===c.direction?a:-a}}))}),[s,c]),b=(0,r.useMemo)((()=>"all"===o?e:e.filter((e=>e.department===o))),[e,o]),x=e=>z1[e]||z1.default;return!p||"admin"!==p.role&&"instructor"!==p.role?(0,ON.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,ON.jsxs)("div",{className:"text-center",children:[(0,ON.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,ON.jsx)("p",{className:"mt-2 text-gray-600",children:"You don't have permission to view this page."})]})}):(0,ON.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:"flex-1 transition-all duration-300 "+(d?"ml-20":"ml-64"),children:(0,ON.jsx)("div",{className:"p-8",children:(0,ON.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,ON.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Schedule Management"}),(0,ON.jsx)("p",{className:"text-gray-600 mt-2",children:"View schedules by teacher and department"})]})}),(0,ON.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white p-4 rounded-xl shadow-lg",children:[(0,ON.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ON.jsx)(NP,{className:"h-5 w-5 mr-2 text-indigo-600"}),(0,ON.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Filter by Department"})]}),(0,ON.jsxs)("select",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",value:o,onChange:e=>l(e.target.value),children:[(0,ON.jsx)("option",{value:"all",children:"All Departments"}),n.map((e=>(0,ON.jsx)("option",{value:e,children:e},e)))]})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-white p-4 rounded-xl shadow-lg",children:[(0,ON.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ON.jsx)($1,{className:"h-5 w-5 mr-2 text-indigo-600"}),(0,ON.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Select Teacher"})]}),(0,ON.jsxs)("select",{className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onChange:t=>(t=>{const n=e.find((e=>e.id===t));a(n||null)})(t.target.value),value:s?s.id:"",children:[(0,ON.jsx)("option",{value:"",children:"Select a Teacher"}),b.map((e=>(0,ON.jsxs)("option",{value:e.id,children:[e.fullName," (",e.department,")"]},e.id)))]})]})]}),f&&(0,ON.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}),!f&&s&&(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,ON.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900",children:[s.fullName,"'s Schedules"]}),(0,ON.jsx)("div",{className:`inline-block px-3 py-1 rounded-full mt-2 text-sm font-medium ${x(s.department)}`,children:s.department})]}),(0,ON.jsxs)("button",{onClick:()=>{a(null)},className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[(0,ON.jsx)(gA,{className:"h-5 w-5 mr-2"}),"Clear Selection"]})]}),v.length>0?(0,ON.jsx)("div",{className:"overflow-x-auto",children:(0,ON.jsxs)("table",{className:"w-full",children:[(0,ON.jsx)("thead",{className:"bg-gray-50",children:(0,ON.jsx)("tr",{children:["subject","section","day","startTime","room"].map((e=>(0,ON.jsx)("th",{onClick:()=>(e=>{u((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"})))})(e),className:"px-6 py-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:(0,ON.jsxs)("div",{className:"flex items-center",children:[e.charAt(0).toUpperCase()+e.slice(1),c.key===e&&(0,ON.jsx)("span",{className:"ml-2 text-gray-400",children:"asc"===c.direction?"\u25b2":"\u25bc"})]})},e)))})}),(0,ON.jsx)("tbody",{className:"divide-y divide-gray-200",children:v.map(((e,t)=>(0,ON.jsxs)(CI.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"hover:bg-indigo-50 transition-colors duration-200",children:[(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ON.jsxs)("div",{className:"flex flex-col",children:[(0,ON.jsx)("div",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${x(s.department)}`,children:e.subject}),(0,ON.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:s.department})]})}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:e.section}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:e.day}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)(WO,{className:"h-4 w-4 text-indigo-500 mr-2"}),g(e.startTime)," - ",g(e.endTime)]})}),(0,ON.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:e.room})]},t)))})]})}):(0,ON.jsxs)("div",{className:"p-6 text-center",children:[(0,ON.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:"No Schedules Found"}),(0,ON.jsx)("p",{className:"text-gray-500 mt-2",children:"The selected teacher has no schedules assigned in their assigned subjects."})]})]}),!f&&!s&&(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,ON.jsx)("h3",{className:"text-lg font-medium text-gray-600",children:"Select a Teacher"}),(0,ON.jsx)("p",{className:"text-gray-500 mt-2",children:"Please select a teacher from the dropdown above to view their schedules."})]})]})})})]})};function H1(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const W1=r.forwardRef(H1);function K1(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const G1=r.forwardRef(K1);function Y1(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const X1=r.forwardRef(Y1),Z1=()=>{const e=te(),{currentUser:t}=MN(),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!0),[f,m]=(0,r.useState)(!0),[p,g]=(0,r.useState)(new Date),[y,v]=(0,r.useState)(null),[b,x]=(0,r.useState)(null),[w,_]=(0,r.useState)(null),[N,j]=(0,r.useState)(""),[S,E]=(0,r.useState)("all"),[C,k]=(0,r.useState)("name"),[T,I]=(0,r.useState)("asc"),[A,O]=(0,r.useState)(null),[P,M]=(0,r.useState)(""),[R,D]=(0,r.useState)({fullName:(null===t||void 0===t?void 0:t.displayName)||"Instructor",department:"Unknown",role:"instructor"}),L=(0,r.useMemo)((()=>p.toLocaleString()),[p]);(0,r.useEffect)((()=>{const e=setInterval((()=>g(new Date)),1e3);return()=>clearInterval(e)}),[]),(0,r.useEffect)((()=>{t||e("/login")}),[t,e]),(0,r.useEffect)((()=>{if(!t)return;const e=Gw(AN,"/Instructors"),n=n_(e,(e=>{const n=e.val();if(n){var r,i,s;const e=Object.values(n).find((e=>{var n;return(null===(n=e.Profile)||void 0===n?void 0:n.email)===t.email}));D({fullName:(null===e||void 0===e||null===(r=e.Profile)||void 0===r?void 0:r.fullName)||t.displayName||"Instructor",department:(null===e||void 0===e||null===(i=e.Profile)||void 0===i?void 0:i.department)||"Unknown",role:(null===e||void 0===e||null===(s=e.Profile)||void 0===s?void 0:s.role)||"instructor"})}}),(e=>{console.error("Error fetching instructor:",e),S1.error("Failed to load instructor data")}));return()=>r_(e,"value",n)}),[t]),(0,r.useEffect)((()=>{(async()=>{if(t)try{m(!0);const e=_p(IN,"subjects"),n=(await Sg(e)).docs.map((e=>({id:e.id,code:e.data().code||"",name:e.data().name||"",credits:e.data().credits||0,department:e.data().department||"",details:e.data().details||"",learningObjectives:e.data().learningObjectives||[],prerequisites:e.data().prerequisites||[],sections:(e.data().sections||[]).map((e=>({id:e.id||"",code:e.code||"",createdAt:e.createdAt||"",instructorRfidUid:e.instructorRfidUid||"",name:e.name||"",students:e.students||[],subjectId:e.subjectId||"",instructorId:e.instructorId||""})))}))).filter((e=>e.sections.some((e=>e.instructorId===t.uid))));if(i(n),n.length>0){l(n[0]);const e=n[0].sections.filter((e=>e.instructorId===t.uid));a(e[0]||null)}else l(null),a(null)}catch(Zg){console.error("Error fetching subjects:",Zg),S1.error("Failed to load subjects")}finally{m(!1),h(!1)}})()}),[t]),(0,r.useEffect)((()=>{if(!s||!o||!R.fullName)return console.log("Missing required data:",{selectedSection:s,selectedSubject:o,instructorFullName:R.fullName}),u([]),v(null),void h(!1);const e=Gw(AN,"/Students"),t=n_(e,(e=>{h(!0);try{const t=e.val();if(!t)return console.warn("No students data found in RTDB"),u([]),v(new Date(s.createdAt)),void h(!1);const n=`${o.code}_${s.name}`;console.log("Looking for session key pattern:",n);const r=Object.entries(t).map((e=>{var t,r,i,a;let[l,c]=e;if(console.log(`Processing student: ${l}`),!c.Profile)return console.warn(`No Profile data for student ${l}`),null;if(!c.Attendance)return console.warn(`No Attendance data for student ${l}`),null;const u=c.Profile;let d=Object.keys(c.Attendance).find((e=>e.includes(n)));if(!d&&c.lastSession&&(d=c.lastSession),!d)return console.warn(`No attendance key matching ${n} for ${l}`),null;const h=c.Attendance[d];if(!h)return console.warn(`Session data not found for ${d}`),null;const f=h.attendanceInfo||h,m=h.personalInfo||u;let p=h.allSchedules||[];p&&0!==p.length||!u.schedules||(p=u.schedules);return p.some((e=>e.subjectCode===o.code&&e.section===s.name&&e.instructorName===R.fullName))?(console.log(`Student ${l} matched criteria`),{rfidUid:l,idNumber:m.idNumber||u.idNumber||"",studentName:m.fullName||u.fullName||"Unknown",email:m.email||u.email||"",mobileNumber:m.mobileNumber||u.mobileNumber||"",department:m.department||u.department||"",section:s.name,sectionId:s.id,classStatus:f.status||"Unknown",timestamp:f.timestamp||"",timeIn:f.timeIn||"",timeOut:f.timeOut||"",weight:f.weight||0,weightUnit:f.weightUnit||"kg",sensor:f.sensor||"",role:m.role||u.role||"student",date:f.date||"",action:f.action||"",attendanceStatus:"present"===(null===(t=f.status)||void 0===t?void 0:t.toLowerCase())?"present":"late"===(null===(r=f.status)||void 0===r?void 0:r.toLowerCase())?"late":"absent",rfidAuthenticated:(null===(i=f.action)||void 0===i?void 0:i.includes("Confirmed"))||!1,weightAuthenticated:f.sensorConfirmed||!1,confirmed:"Present"===f.status||!1,assignedSensorId:(null===(a=f.assignedSensorId)||void 0===a?void 0:a.toString())||"",subject:o.name,subjectCode:o.code,lastSession:d||"",schedules:p.map((e=>({day:e.day||"",endTime:e.endTime||"",instructorName:e.instructorName||"",roomName:e.roomName||"",section:e.section||"",sectionId:e.sectionId||"",startTime:e.startTime||"",subject:e.subject||"",subjectCode:e.subjectCode||""})))}):(console.warn(`No schedule match for ${l}. Expected: subjectCode=${o.code}, section=${s.name}, instructor=${R.fullName}`),null)})).filter((e=>!!e||(console.warn("Filtered out null student"),!1)));console.log("Fetched students:",JSON.stringify(r,null,2)),u(r),v(new Date(s.createdAt))}catch(Zg){console.error("Error processing students:",Zg),S1.error("Failed to load students")}finally{h(!1)}}),(e=>{console.error("Error fetching students:",e),S1.error("Failed to load students"),u([]),h(!1)}));return()=>r_(e,"value",t)}),[s,o,R.fullName]),(0,r.useEffect)((()=>{if(!t||!s||!o)return;const e=Gw(AN,"/Instructors"),n=n_(e,(e=>{var n,r;const i=e.val();if(!i)return console.warn("No instructors data found"),O(null),void M("");const a=null===(n=Object.entries(i).find((e=>{var n;let[,r]=e;return(null===(n=r.Profile)||void 0===n?void 0:n.email)===t.email})))||void 0===n?void 0:n[1];if(null===a||void 0===a||null===(r=a.ClassStatus)||void 0===r||!r.schedule)return console.warn("No ClassStatus or schedule found for instructor"),O(null),void M("");const l=a.ClassStatus.schedule,c=new Date,u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][c.getDay()],d=c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});var h,f;l.day===u&&l.startTime<=d&&l.endTime>=d&&l.subjectCode===o.code&&l.section===s.name?(console.log("Schedule match found:",l),O({id:`${o.code}_${s.name}`,day:l.day,startTime:l.startTime,endTime:l.endTime,room:(null===(h=l.roomName)||void 0===h?void 0:h.name)||"Unknown",section:s.name,subject:o.name}),M((null===(f=l.roomName)||void 0===f?void 0:f.name)||"")):(console.warn(`No schedule match. Current: day=${u}, time=${d}, subjectCode=${o.code}, section=${s.name}`,`Schedule: ${JSON.stringify(l)}`),O(null),M(""))}),(e=>{console.error("Error fetching schedule:",e),O(null),M("")}));return()=>r_(e,"value",n)}),[t,s,o]);const F=async(e,t)=>{if(s&&o)try{var n,r,i,a,l,u,d;const h=new Date,f=h.toISOString().split("T")[0].replace(/-/g,"_"),m=f+"_"+h.getHours().toString().padStart(2,"0")+h.getMinutes().toString().padStart(2,"0")+h.getSeconds().toString().padStart(2,"0"),p=c.find((t=>t.rfidUid===e)),g="absent"===t?"Absent":"late"===t?"Late":"Present",y="present"===t||"late"===t,v=`${f}_${o.code}_${s.name}_${P||"Unknown"}`,b=Gw(AN,`/Students/${e}`),x=(await Qw(b)).val(),w=((null===x||void 0===x||null===(n=x.Profile)||void 0===n?void 0:n.schedules)||[]).filter((e=>e.subjectCode===o.code&&e.section===s.name)),_=(null===p||void 0===p?void 0:p.weight)||0,N=(null===p||void 0===p?void 0:p.weightUnit)||"kg",j=(null===p||void 0===p?void 0:p.weightAuthenticated)||!1,S=(null===p||void 0===p?void 0:p.sensor)||"Weight Sensor",E={department:(null===x||void 0===x||null===(r=x.Profile)||void 0===r?void 0:r.department)||"",email:(null===x||void 0===x||null===(i=x.Profile)||void 0===i?void 0:i.email)||"",fullName:(null===x||void 0===x||null===(a=x.Profile)||void 0===a?void 0:a.fullName)||"",idNumber:(null===x||void 0===x||null===(l=x.Profile)||void 0===l?void 0:l.idNumber)||"",mobileNumber:(null===x||void 0===x||null===(u=x.Profile)||void 0===u?void 0:u.mobileNumber)||"",role:(null===x||void 0===x||null===(d=x.Profile)||void 0===d?void 0:d.role)||"student"};await Xw(Gw(AN,`/Students/${e}/Attendance/${v}`),{allSchedules:w,attendanceInfo:{action:y?"Confirmed RFID":"Not Confirmed",assignedSensorId:(null===p||void 0===p?void 0:p.assignedSensorId)||"",date:f,sensor:S,sensorConfirmed:j,sessionId:v,status:g,timeIn:y?m:"",timeOut:"",timestamp:m,weight:_,weightUnit:N},personalInfo:E}),await Xw(Gw(AN,`/Students/${e}/lastSession`),v),S1.success(`Marked ${t} for ${null===p||void 0===p?void 0:p.studentName} at ${h.toLocaleTimeString()}`)}catch(Zg){console.error("Error updating attendance in RTDB:",Zg),S1.error("Failed to update attendance status")}else S1.error("Please select a subject and section")},U=(0,r.useMemo)((()=>{const e=c.length,t=c.filter((e=>"present"===e.attendanceStatus)).length,n=c.filter((e=>"late"===e.attendanceStatus)).length,r=c.filter((e=>"absent"===e.attendanceStatus)).length;return{totalStudents:e,present:t,late:n,absent:r,attendanceRate:e?(t+n)/e*100:0,punctualityRate:e?t/(t+n||1)*100:0}}),[c]),B=(0,r.useMemo)((()=>{let e=[...c];return N&&(e=e.filter((e=>e.studentName.toLowerCase().includes(N.toLowerCase())))),"all"!==S&&(e=e.filter((e=>e.attendanceStatus===S))),e.sort(((e,t)=>{if("name"===C)return"asc"===T?e.studentName.localeCompare(t.studentName):t.studentName.localeCompare(e.studentName);if("status"===C){const n={present:1,late:2,absent:3},r=n[e.attendanceStatus]||4,i=n[t.attendanceStatus]||4;return"asc"===T?r-i:i-r}if("time"===C){const n=e.timestamp?new Date(e.timestamp).getTime():1/0,r=t.timestamp?new Date(t.timestamp).getTime():1/0;return"asc"===T?n-r:r-n}return 0})),e}),[c,N,S,C,T]),V=e=>{var t;const n=e.weight?(0,ON.jsxs)("span",{className:"ml-1 sm:ml-2 text-blue-600 text-xs sm:text-sm",children:["(",e.weight.toFixed(1)," ",e.weightUnit,")"]}):null,r=e.timeIn?(0,ON.jsxs)("span",{className:"ml-1 sm:ml-2 text-gray-500 text-xs",children:["(",null===(t=e.timeIn.split("_").pop())||void 0===t?void 0:t.replace(/(\d{2})(\d{2})(\d{2})/,"$1:$2:$3"),")"]}):null;if(e.rfidAuthenticated&&!e.weightAuthenticated)return(0,ON.jsxs)("span",{className:"text-yellow-600 flex items-center gap-1 text-xs sm:text-sm",children:[(0,ON.jsx)(WO,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Waiting for weight authentication... ",n," ",r]});switch(e.attendanceStatus){case"present":return(0,ON.jsxs)("span",{className:"text-green-600 text-xs sm:text-sm",children:["Present ",n," ",r]});case"late":return(0,ON.jsxs)("span",{className:"text-yellow-600 text-xs sm:text-sm",children:["Late ",n," ",r]});case"absent":return(0,ON.jsxs)("span",{className:"text-red-600 text-xs sm:text-sm",children:["Absent ",n," ",r]});default:return(0,ON.jsxs)("span",{className:"text-gray-600 text-xs sm:text-sm",children:["Not marked ",n," ",r]})}};return d?(0,ON.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-b-2 border-indigo-600"})}):(0,ON.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ON.jsx)(uA,{currentTime:p,user:{role:R.role,fullName:R.fullName,department:R.department},classStatus:{status:A?"Class In Session":"No Active Class",color:A?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800",details:(null===s||void 0===s?void 0:s.name)||"No section selected",fullName:R.fullName}}),(0,ON.jsx)("main",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 mt-14 sm:mt-16",children:(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg sm:rounded-2xl shadow-md sm:shadow-lg p-4 sm:p-6",children:[(0,ON.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:[(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[(0,ON.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Take Attendance"}),f?(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-t-2 border-indigo-600"}),(0,ON.jsx)("span",{className:"text-gray-600 text-sm",children:"Loading subjects..."})]}):(0,ON.jsxs)("select",{value:(null===o||void 0===o?void 0:o.id)||"",onChange:e=>{const r=n.find((t=>t.id===e.target.value))||null;if(l(r),r){const e=r.sections.filter((e=>e.instructorId===(null===t||void 0===t?void 0:t.uid)));a(e[0]||null)}else a(null)},className:"border rounded-lg p-2 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 w-full sm:w-44 text-sm sm:text-base",children:[(0,ON.jsx)("option",{value:"",disabled:!0,children:"Select Subject"}),n.length>0?n.map((e=>(0,ON.jsxs)("option",{value:e.id,children:[e.name.length>20?`${e.name.substring(0,17)}...`:e.name," (",e.code,")"]},e.id))):(0,ON.jsx)("option",{disabled:!0,children:"No subjects available"})]}),f||!o?(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-6 sm:w-6 border-t-2 border-indigo-600"}),(0,ON.jsx)("span",{className:"text-gray-600 text-sm",children:"Loading sections..."})]}):(0,ON.jsxs)("select",{value:(null===s||void 0===s?void 0:s.id)||"",onChange:e=>{const t=(null===o||void 0===o?void 0:o.sections.find((t=>t.id===e.target.value)))||null;a(t)},className:"border rounded-lg p-2 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 w-full sm:w-44 text-sm sm:text-base",children:[(0,ON.jsx)("option",{value:"",disabled:!0,children:"Select Section"}),(null===o||void 0===o?void 0:o.sections.length)>0?o.sections.filter((e=>e.instructorId===(null===t||void 0===t?void 0:t.uid))).map((e=>(0,ON.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))):(0,ON.jsx)("option",{disabled:!0,children:"No sections available"})]})]}),(0,ON.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,ON.jsx)("div",{className:"text-xs sm:text-sm text-gray-600",children:L}),(0,ON.jsxs)("button",{onClick:()=>{const e=[["Name","Email","UID","Status","Time","Weight","Weight Verified","Department","Section","Mobile","Subject"],...c.map((e=>[e.studentName,e.email,e.rfidUid,e.attendanceStatus,e.timestamp||"",e.weight?e.weight.toFixed(1):"N/A",e.weightAuthenticated?"Yes":"No",e.department,e.section,e.mobileNumber,(null===o||void 0===o?void 0:o.name)||"N/A"]))].map((e=>e.join(","))).join("\n"),t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`attendance_${(null===s||void 0===s?void 0:s.name)||"unnamed"}_${(null===o||void 0===o?void 0:o.name)||"unnamed"}_${(new Date).toLocaleDateString()}.csv`,r.click(),window.URL.revokeObjectURL(n)},className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 text-xs sm:text-sm",disabled:!s,children:[(0,ON.jsx)(W1,{className:"w-4 h-4"}),(0,ON.jsx)("span",{children:"Export"})]})]})]}),A&&s&&o&&(0,ON.jsx)("div",{className:"mb-4 sm:mb-6 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg sm:rounded-xl p-3 sm:p-4 text-white shadow-md sm:shadow-lg",children:(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:o.name.length>25?`${o.name.substring(0,22)}...`:o.name}),(0,ON.jsxs)("div",{className:"mt-1 text-blue-100 text-xs sm:text-sm",children:[(0,ON.jsxs)("p",{children:["Room ",A.room," \u2022 Section ",s.name]}),(0,ON.jsxs)("p",{children:[A.startTime," - ",A.endTime," \u2022 ",A.day]})]})]}),(0,ON.jsx)("div",{className:"bg-white/20 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm backdrop-blur-sm",children:"Current Class"})]})}),s?B.length>0?(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:B.map((e=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:"bg-gray-50 rounded-lg sm:rounded-xl p-3 sm:p-4 flex flex-col space-y-2 border border-gray-200",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,ON.jsxs)("div",{className:"flex-1",children:[(0,ON.jsx)("p",{className:"font-medium text-gray-800 text-sm sm:text-base",children:e.studentName.length>20?`${e.studentName.substring(0,17)}...`:e.studentName}),(0,ON.jsxs)("p",{className:"text-xs text-gray-600",children:["UID: ",e.rfidUid.substring(0,8),"..."]}),(0,ON.jsxs)("p",{className:"text-xs text-gray-600",children:["ID: ",e.idNumber]})]}),(0,ON.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,ON.jsx)("button",{onClick:()=>F(e.rfidUid,"present"),className:`\n                            p-1.5 sm:p-2 rounded-full\n                            ${"present"===e.attendanceStatus?"bg-green-500 text-white":"bg-green-100 text-green-600 hover:bg-green-200"}\n                          `,children:(0,ON.jsx)(G1,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,ON.jsx)("button",{onClick:()=>F(e.rfidUid,"late"),className:`\n                            p-1.5 sm:p-2 rounded-full\n                            ${"late"===e.attendanceStatus?"bg-yellow-500 text-white":"bg-yellow-100 text-yellow-600 hover:bg-yellow-200"}\n                          `,children:(0,ON.jsx)(WO,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,ON.jsx)("button",{onClick:()=>F(e.rfidUid,"absent"),className:`\n                            p-1.5 sm:p-2 rounded-full\n                            ${"absent"===e.attendanceStatus?"bg-red-500 text-white":"bg-red-100 text-red-600 hover:bg-red-200"}\n                          `,children:(0,ON.jsx)(X1,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),(0,ON.jsxs)("div",{className:"space-y-1 text-xs sm:text-sm",children:[(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"})," ",V(e)]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Email:"})," ",e.email.length>20?`${e.email.substring(0,17)}...`:e.email||"N/A"]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Mobile:"})," ",e.mobileNumber||"N/A"]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Dept:"})," ",e.department.length>15?`${e.department.substring(0,12)}...`:e.department||"N/A"]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Section:"})," ",e.section||"Unknown"]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Subject:"})," ",o&&o.name.length>20?`${o.name.substring(0,17)}...`:(null===o||void 0===o?void 0:o.name)||"N/A"]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Weight:"})," ",e.weight?`${e.weight.toFixed(1)} ${e.weightUnit}`:"N/A"]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Verified:"})," ",e.weightAuthenticated?(0,ON.jsx)("span",{className:"text-green-600",children:"Yes"}):(0,ON.jsx)("span",{className:"text-red-600",children:"No"})]}),e.schedules.length>0&&(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"font-medium text-gray-700",children:"Schedules:"}),(0,ON.jsx)("ul",{className:"list-disc pl-4",children:e.schedules.map(((e,t)=>(0,ON.jsxs)("li",{className:"text-xs sm:text-sm",children:[e.day," ",e.startTime,"-",e.endTime," (",e.subject,", Section ",e.section,")"]},t)))})]})]})]},e.rfidUid)))}):(0,ON.jsx)("p",{className:"text-gray-600 text-center py-4 text-sm sm:text-base",children:"No students found for this section."}):(0,ON.jsx)("p",{className:"text-gray-600 text-center py-4 text-sm sm:text-base",children:"Please select a subject and section to view students."}),(0,ON.jsxs)("div",{className:"mt-4 sm:mt-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-4",children:[s&&(0,ON.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600",children:["Attendance: ",U.attendanceRate.toFixed(1),"% | Punctuality: ",U.punctualityRate.toFixed(1),"%"]}),(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 w-full sm:w-auto",children:[(0,ON.jsxs)(ke,{to:"/instructor/attendance-management",className:"bg-indigo-100 text-indigo-700 px-4 sm:px-6 py-2 sm:py-3 rounded-lg hover:bg-indigo-200 transition flex items-center justify-center gap-2 text-xs sm:text-sm",children:[(0,ON.jsx)(GO,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"View Records"]}),(0,ON.jsxs)("button",{onClick:async()=>{if(s&&o&&A)if(t)try{h(!0);const n=(new Date).toISOString().split("T")[0],r=lg(_p(IN,"attendanceRecords"),ug("sectionId","==",s.id),ug("subjectId","==",o.id),ug("date","==",n),ug("submittedBy.id","==",t.uid)),i=await Sg(r);if(!i.empty){if(!(await zI().fire({title:"Attendance Already Submitted",text:"Attendance for this section, subject, and date has already been submitted. Do you want to overwrite it?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, overwrite",cancelButtonText:"No, cancel"})).isConfirmed)return void h(!1);const e=i.docs.map((e=>kg(e.ref)));await Promise.all(e)}const a=c.map((e=>({studentId:e.rfidUid,studentName:e.studentName,studentEmail:e.email,sectionId:s.id,sectionName:s.name,subjectId:o.id,subjectName:o.name,room:A.room,status:e.attendanceStatus||"absent",confirmed:e.confirmed,rfidAuthenticated:e.rfidAuthenticated,weightAuthenticated:e.weightAuthenticated,weight:e.weight||0,weightUnit:e.weightUnit||"kg",timestamp:Pl.fromDate(new Date(e.timestamp||new Date)),date:n,submittedBy:{id:t.uid,name:R.fullName,role:R.role}}))).map((e=>Tg(_p(IN,"attendanceRecords"),e)));await Promise.all(a);const l=c.map((e=>{const t={department:e.department||"",email:e.email||"",fullName:e.studentName||"",idNumber:e.idNumber||"",mobileNumber:e.mobileNumber||"",role:e.role||"student"};return Xw(Gw(AN,`/Students/${e.rfidUid}/Attendance/${e.lastSession}`),{allSchedules:e.schedules,attendanceInfo:{action:"Not Confirmed",assignedSensorId:"",date:"",sensor:"",sensorConfirmed:!1,sessionId:"",status:"Not Confirmed",timeIn:"",timeOut:"",timestamp:"",weight:0,weightUnit:"kg"},personalInfo:t})}));await Promise.all(l),S1.success("Attendance submitted successfully!"),e("/instructor/attendance-management")}catch(Zg){console.error("Error submitting attendance:",Zg),S1.error("Failed to submit attendance")}finally{h(!1)}else S1.error("User not authenticated");else S1.error("Please select a section, subject, and ensure schedule is loaded")},className:"bg-indigo-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2 text-xs sm:text-sm",disabled:!s||!o||!A,children:[(0,ON.jsx)(G1,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Submit Attendance"]})]})]})]})}),b&&w&&(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ON.jsxs)(CI.div,{initial:{scale:.9},animate:{scale:1},className:"bg-white p-4 sm:p-6 rounded-lg sm:rounded-xl shadow-xl w-full max-w-[90vw] sm:max-w-md mx-4",children:[(0,ON.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4",children:"Confirm Attendance"}),(0,ON.jsxs)("div",{className:"space-y-2 text-sm sm:text-base",children:[(0,ON.jsxs)("p",{children:[(0,ON.jsx)("strong",{children:"Student:"})," ",b.studentName.length>20?`${b.studentName.substring(0,17)}...`:b.studentName]}),(0,ON.jsxs)("p",{children:[(0,ON.jsx)("strong",{children:"Tap Time:"})," ",w.toLocaleString()]}),(0,ON.jsx)("p",{className:"text-gray-600",children:"Weight sensor confirmation pending..."})]}),(0,ON.jsxs)("div",{className:"mt-4 sm:mt-6 flex justify-end gap-2 sm:gap-3",children:[(0,ON.jsx)("button",{onClick:()=>{x(null),_(null)},className:"px-3 sm:px-4 py-1.5 sm:py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-xs sm:text-sm",children:"Reject"}),(0,ON.jsx)("button",{onClick:async()=>{if(b&&w&&y&&s&&o)try{var e,t,n,r,i,a,l;const c=y.getTime(),u=w.getTime(),d=u<=c+9e5?"present":"late",h=new Date,f=h.toISOString().split("T")[0].replace(/-/g,"_"),m=f+"_"+h.getHours().toString().padStart(2,"0")+h.getMinutes().toString().padStart(2,"0")+h.getSeconds().toString().padStart(2,"0"),p=`${f}_${o.code}_${s.name}_${P||"Unknown"}`,g="present"===d?"Present":"Late",v=Gw(AN,`/Students/${b.rfidUid}`),x=(await Qw(v)).val(),_=((null===x||void 0===x||null===(e=x.Profile)||void 0===e?void 0:e.schedules)||[]).filter((e=>e.subjectCode===o.code&&e.section===s.name)),N=(null===b||void 0===b?void 0:b.weight)||0,j=(null===b||void 0===b?void 0:b.weightUnit)||"kg",S=(null===b||void 0===b?void 0:b.weightAuthenticated)||!1,E=(null===b||void 0===b?void 0:b.sensor)||"Weight Sensor",C={department:(null===x||void 0===x||null===(t=x.Profile)||void 0===t?void 0:t.department)||"",email:(null===x||void 0===x||null===(n=x.Profile)||void 0===n?void 0:n.email)||"",fullName:(null===x||void 0===x||null===(r=x.Profile)||void 0===r?void 0:r.fullName)||"",idNumber:(null===x||void 0===x||null===(i=x.Profile)||void 0===i?void 0:i.idNumber)||"",mobileNumber:(null===x||void 0===x||null===(a=x.Profile)||void 0===a?void 0:a.mobileNumber)||"",role:(null===x||void 0===x||null===(l=x.Profile)||void 0===l?void 0:l.role)||"student"};await Xw(Gw(AN,`/Students/${b.rfidUid}/Attendance/${p}`),{allSchedules:_,attendanceInfo:{action:"Confirmed RFID",assignedSensorId:b.assignedSensorId||"",date:f,sensor:E,sensorConfirmed:S,sessionId:p,status:g,timeIn:m,timeOut:"",timestamp:m,weight:N,weightUnit:j},personalInfo:C}),await Xw(Gw(AN,`/Students/${b.rfidUid}/lastSession`),p),S1.success(`Confirmed ${d} for ${b.studentName}`)}catch(Zg){console.error("Error confirming attendance in RTDB:",Zg),S1.error("Failed to confirm attendance")}finally{x(null),_(null)}},className:"px-3 sm:px-4 py-1.5 sm:py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-xs sm:text-sm",children:"Confirm"})]})]})})]})};function Q1(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.5 3.75a3 3 0 0 0-3 3v.75h21v-.75a3 3 0 0 0-3-3h-15Z"}),r.createElement("path",{fillRule:"evenodd",d:"M22.5 9.75h-21v7.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-7.5Zm-18 3.75a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z",clipRule:"evenodd"}))}const J1=r.forwardRef(Q1);function e2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z",clipRule:"evenodd"}))}const t2=r.forwardRef(e2),n2=()=>{const e=Array.from({length:20},(()=>({x:100*Math.random(),y:100*Math.random(),speedX:.3*(Math.random()-.5),speedY:.3*(Math.random()-.5)})));return(0,ON.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.map(((e,t)=>(0,ON.jsx)(CI.div,{className:"absolute w-1 h-1 bg-cyan-400 rounded-full",initial:{x:`${e.x}vw`,y:`${e.y}vh`,opacity:.6},animate:{x:`${e.x+50*e.speedX}vw`,y:`${e.y+50*e.speedY}vh`,opacity:[.6,.8,.6]},transition:{duration:15,repeat:1/0,repeatType:"reverse"}},t)))})},r2=()=>{const[e,t]=(0,r.useState)({role:"student",fullName:"",idNumber:"",email:"",mobileNumber:"",department:"",yearLevel:"",yearsOfExperience:"",password:"",confirmPassword:"",sections:[],schedule:{days:[],startTime:"",endTime:""},section:"",subject:"",selectedSchedule:null,rfidUid:"",isAdmin:!1}),[n,i]=(0,r.useState)({subjects:[],sections:[],departments:[],courses:[]}),[s,a]=(0,r.useState)({fullName:!1,idNumber:!1,email:!1,mobileNumber:!1,department:!1,yearsOfExperience:!1,password:!1,confirmPassword:!1,yearLevel:!1,role:!1,sections:!1,scheduleDays:!1,scheduleTime:!1,section:!1,subject:!1,rfidUid:!1}),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)({hasUpper:!1,hasLower:!1,hasNumber:!1,hasMinLength:!1,hasSpecial:!1}),[p,g]=(0,r.useState)(1),[y,v]=(0,r.useState)(0),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)([]),[N,j]=(0,r.useState)({fullName:!1,email:!1,password:!1,confirmPassword:!1,mobileNumber:!1,department:!1,yearLevel:!1,role:!1,sections:!1,scheduleDays:!1,scheduleTime:!1,section:!1,subject:!1,rfidUid:!1}),[S,E]=(0,r.useState)(!1),[C,k]=(0,r.useState)([]),[T,I]=(0,r.useState)(""),A=te(),O=[{id:1,title:"Account Type",description:"Choose your role"},{id:2,title:"Personal Info",description:"Basic information"},{id:3,title:"Department",description:"Academic details"},{id:4,title:"Security",description:"Set up password"}];(0,r.useEffect)((()=>{(()=>{const e=p/O.length*100;v(e)})()}),[p]),(0,r.useEffect)((()=>{(()=>{const e=Ig(_p(IN,"students"),(e=>{const t=new Set;e.forEach((e=>{const n=e.data().section;n&&t.add(n)})),i((e=>({...e,sections:Array.from(t).sort()})))})),t=["Computer Science","Information Technology","Electrical Engineering","Computer Engineering","Civil Engineering","Industrial Engineering","Mechanical Engineering","Chemical Engineering"];i((e=>({...e,departments:t,courses:t})))})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=_p(IN,"subjects"),t=(await Sg(e)).docs.map((e=>({id:e.id,...e.data()})));x(t.filter((e=>"active"===e.status)))}catch(Zg){console.error("Error fetching subjects:",Zg)}})()}),[]),(0,r.useEffect)((()=>{(()=>{const t={hasUpper:/[A-Z]/.test(e.password),hasLower:/[a-z]/.test(e.password),hasNumber:/\d/.test(e.password),hasMinLength:e.password.length>=8,hasSpecial:/[^A-Za-z0-9]/.test(e.password)};m(t)})()}),[e.password]),(0,r.useEffect)((()=>{Gw(AN,"Registered");const e=Gw(AN,"Unregistered"),t=n_(e,(e=>{if(e.exists()){const t=e.val(),n=Object.entries(t).map((e=>{let[t,n]=e;return{uid:n.uid||t}}));k(n)}else k([])}),(e=>{console.error("Error fetching UnregisteredUIDs:",e),zI().fire({icon:"error",title:"Error",text:"Failed to fetch RFID tags."})}));return()=>{r_(e,"value",t)}}),[]),(0,r.useEffect)((()=>{t((e=>({...e,rfidUid:T})))}),[T]);const P=()=>{p<O.length&&g((e=>e+1))},M=(e,n)=>{t((t=>({...t,[e]:"idNumber"===e||"mobileNumber"===e?n.replace(/\D/g,""):n})))},R=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0;return(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.4,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:n}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:o}),(0,ON.jsx)("input",{type:r,value:e[t],onChange:e=>M(t,e.target.value),onFocus:()=>a({...s,[t]:!0}),onBlur:()=>a({...s,[t]:!1}),className:"w-full pl-10 pr-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:i,required:!0}),e[t]&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]})},D=(t,n,r,i)=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.4,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:n}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:i}),(0,ON.jsxs)("select",{value:e[t],onChange:e=>M(t,e.target.value),className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white text-sm sm:text-base",required:!0,children:[(0,ON.jsxs)("option",{value:"",className:"text-gray-500",children:["Select ",n.toLowerCase()]}),r.map((e=>(0,ON.jsx)("option",{value:e.value,className:"text-white",children:e.label},e.value)))]})]})]});return(0,ON.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono relative overflow-hidden flex items-center justify-center px-4 sm:px-6 lg:px-8",children:[(0,ON.jsx)(n2,{}),(0,ON.jsxs)(CI.div,{className:"w-full max-w-md sm:max-w-lg bg-gray-800 rounded-xl shadow-2xl p-6 sm:p-8 relative overflow-hidden border border-cyan-800",initial:{opacity:0,scale:.9,rotate:-5},animate:{opacity:1,scale:1,rotate:0},transition:{duration:.8,type:"spring",stiffness:80},children:[(0,ON.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 100 100\\'%3E%3Cpath d=\\'M10 10 L90 90 M90 10 L10 90\\' stroke=\\'%2300b4d8\\' stroke-width=\\'1\\' opacity=\\'0.1\\'/%3E%3C/svg%3E')] opacity-20"}),(0,ON.jsx)(CI.div,{className:"absolute -inset-2 bg-cyan-500/20 blur-xl",animate:{opacity:[.2,.4,.2]},transition:{duration:3,repeat:1/0}}),(0,ON.jsxs)("div",{className:"flex flex-col items-center mb-4 relative z-10",children:[(0,ON.jsx)(CI.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,ON.jsx)(TI,{className:"w-12 h-12 sm:w-16 sm:h-16 text-cyan-400 mb-2 animate-pulse"})}),(0,ON.jsx)(CI.h1,{className:"text-2xl sm:text-3xl font-bold text-cyan-100 mb-1",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:"Register"}),(0,ON.jsx)("p",{className:"text-cyan-300 text-center text-sm sm:text-base",children:"Join the SmartEcoLock community"})]}),(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mb-4",children:[(0,ON.jsx)("div",{className:"flex flex-wrap justify-between mb-1 gap-2",children:O.map((e=>(0,ON.jsx)("div",{className:"text-xs sm:text-sm flex-1 text-center "+(p>=e.id?"text-cyan-200":"text-gray-400"),children:e.title},e.id)))}),(0,ON.jsx)("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:(0,ON.jsx)(CI.div,{className:"h-full bg-cyan-500",initial:{width:0},animate:{width:`${y}%`},transition:{duration:.3}})})]}),(0,ON.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l(!0),!T)return zI().fire({icon:"warning",title:"RFID Required",text:"Please select an RFID tag to proceed."}),void l(!1);try{const{user:t}=await is(kN,e.email,e.password),n={uid:t.uid,fullName:e.fullName,email:e.email,idNumber:e.idNumber,department:e.department,role:e.role,mobileNumber:e.mobileNumber,rfidUid:e.rfidUid,createdAt:(new Date).toISOString()},r=_p(IN,"instructor"===e.role?"teachers":"students");if(await Eg(Np(r,t.uid),n),e.rfidUid){const n=Gw(AN,`/Unregistered/${e.rfidUid}`);await Xw(n,null);const r=Gw(AN,`rfid/${e.rfidUid}`);await Xw(r,{uid:t.uid,role:e.role,timestamp:new zp("serverTimestamp")})}zI().fire({icon:"success",title:"Registration Successful",text:"Registered as "+("instructor"===e.role?"Instructor":"Student"),showConfirmButton:!1,timer:1500,background:"#F9FAFB",iconColor:"#22d3ee"}),A("/login")}catch(Zg){console.error("Registration error:",Zg),zI().fire({icon:"error",title:"Registration Failed",text:Zg instanceof Error?Zg.message:"Registration failed",confirmButtonColor:"#22d3ee",background:"#F9FAFB"})}finally{l(!1)}},className:"space-y-4 relative z-10",children:[(()=>{switch(p){case 1:return(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"space-y-6",children:[(0,ON.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-cyan-100 mb-2",children:"Choose Your Role"}),(0,ON.jsx)("div",{className:"grid grid-cols-1 gap-4",children:["student","instructor"].map((n=>(0,ON.jsx)(CI.button,{type:"button",onClick:()=>{t({...e,role:n}),P()},whileHover:{scale:1.02},whileTap:{scale:.98},className:`\n                    p-6 rounded-xl text-center transition-all duration-200\n                    ${e.role===n?"bg-cyan-600 text-white shadow-lg":"bg-gray-700 text-cyan-200 hover:bg-gray-600"}\n                  `,children:(0,ON.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:["student"===n?(0,ON.jsx)(LO,{className:"w-8 h-8"}):(0,ON.jsx)(AI,{className:"w-8 h-8"}),(0,ON.jsx)("span",{className:"text-base sm:text-lg font-medium",children:n.charAt(0).toUpperCase()+n.slice(1)}),(0,ON.jsx)("p",{className:"text-xs sm:text-sm opacity-80",children:"student"===n?"Access your courses and track your progress":"Manage your classes and student records"})]})},n)))})]});case 2:return(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"space-y-4",children:[(0,ON.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-cyan-100 mb-2",children:"Personal Information"}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.4,type:"tween"},children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"RFID Card"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(J1,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"w-full pl-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white text-sm sm:text-base",required:!0,children:[(0,ON.jsx)("option",{value:"",className:"text-gray-500",children:"Select RFID Tag"}),C.map((e=>(0,ON.jsx)("option",{value:e.uid,className:"text-white",children:e.uid},e.uid)))]}),T&&(0,ON.jsxs)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[(0,ON.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,ON.jsx)("span",{className:"text-xs sm:text-sm text-green-400",children:"Card selected"})]})]}),(0,ON.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:T?"RFID card selected":"Select an RFID card from the dropdown above"})]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[R("fullName","Full Name","text","Enter your full name",(0,ON.jsx)(AI,{className:"w-5 h-5 text-cyan-500"})),R("idNumber","ID Number","text","Enter your ID number",(0,ON.jsx)(nP,{className:"w-5 h-5 text-cyan-500"})),R("email","Email","email","Enter your email",(0,ON.jsx)(pO,{className:"w-5 h-5 text-cyan-500"})),R("mobileNumber","Mobile Number","tel","Enter your mobile number",(0,ON.jsx)(t2,{className:"w-5 h-5 text-cyan-500"}))]})]});case 3:return(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"space-y-4",children:[(0,ON.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-cyan-100 mb-2",children:"Academic Details"}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[D("department","Department",n.departments.map((e=>({value:e,label:e}))),(0,ON.jsx)(AI,{className:"w-5 h-5 text-cyan-500"})),"student"===e.role&&D("yearLevel","Year Level",[{value:"1st Year",label:"1st Year"},{value:"2nd Year",label:"2nd Year"},{value:"3rd Year",label:"3rd Year"},{value:"4th Year",label:"4th Year"}],(0,ON.jsx)(LO,{className:"w-5 h-5 text-cyan-500"})),"instructor"===e.role&&R("yearsOfExperience","Years of Experience","number","Years of teaching experience",(0,ON.jsx)(AI,{className:"w-5 h-5 text-cyan-500"}))]})]});case 4:return(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"space-y-4",children:[(0,ON.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-cyan-100 mb-2",children:"Set Your Password"}),(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Password"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(AI,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:c?"text":"password",value:e.password,onChange:e=>M("password",e.target.value),onFocus:()=>a({...s,password:!0}),onBlur:()=>a({...s,password:!1}),className:"w-full pl-10 pr-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Enter your password",required:!0}),(0,ON.jsx)("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cyan-500 hover:text-cyan-300 transition-colors",children:c?(0,ON.jsx)(LI,{className:"w-5 h-5"}):(0,ON.jsx)(UI,{className:"w-5 h-5"})}),e.password&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-10 top-1/2 transform -translate-y-1/2"})]})]}),(0,ON.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(PI,{className:"w-4 h-4 "+(f.hasMinLength?"text-green-400":"text-gray-400")}),(0,ON.jsx)("span",{className:"text-xs "+(f.hasMinLength?"text-green-400":"text-gray-300"),children:"At least 8 characters"})]}),(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(PI,{className:"w-4 h-4 "+(f.hasUpper?"text-green-400":"text-gray-400")}),(0,ON.jsx)("span",{className:"text-xs "+(f.hasUpper?"text-green-400":"text-gray-300"),children:"One uppercase letter"})]}),(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(PI,{className:"w-4 h-4 "+(f.hasLower?"text-green-400":"text-gray-400")}),(0,ON.jsx)("span",{className:"text-xs "+(f.hasLower?"text-green-400":"text-gray-300"),children:"One lowercase letter"})]}),(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(PI,{className:"w-4 h-4 "+(f.hasNumber?"text-green-400":"text-gray-400")}),(0,ON.jsx)("span",{className:"text-xs "+(f.hasNumber?"text-green-400":"text-gray-300"),children:"One number"})]}),(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)(PI,{className:"w-4 h-4 "+(f.hasSpecial?"text-green-400":"text-gray-400")}),(0,ON.jsx)("span",{className:"text-xs "+(f.hasSpecial?"text-green-400":"text-gray-300"),children:"One special character"})]})]})]}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-cyan-200 mb-2",children:"Confirm Password"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:(0,ON.jsx)(AI,{className:"w-5 h-5 text-cyan-500"})}),(0,ON.jsx)("input",{type:d?"text":"password",value:e.confirmPassword,onChange:e=>M("confirmPassword",e.target.value),onFocus:()=>a({...s,confirmPassword:!0}),onBlur:()=>a({...s,confirmPassword:!1}),className:"w-full pl-10 pr-10 p-3 rounded-lg border border-gray-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 bg-gray-700 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Confirm your password",required:!0}),(0,ON.jsx)("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cyan-500 hover:text-cyan-300 transition-colors",children:d?(0,ON.jsx)(LI,{className:"w-5 h-5"}):(0,ON.jsx)(UI,{className:"w-5 h-5"})}),e.confirmPassword&&(0,ON.jsx)(PI,{className:"w-5 h-5 text-cyan-500 absolute right-10 top-1/2 transform -translate-y-1/2"})]})]})]})]})}})(),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,type:"spring",stiffness:100},className:"flex flex-col sm:flex-row sm:justify-between mt-6 pt-4 border-t border-gray-700 gap-2",children:[p>1&&(0,ON.jsx)(CI.button,{type:"button",onClick:()=>{p>1&&g((e=>e-1))},whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 rounded-lg bg-gray-700 text-cyan-200 hover:bg-gray-600 transition-all duration-300 w-full sm:w-auto",children:"Back"}),p<O.length?(0,ON.jsx)(CI.button,{type:"button",onClick:P,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 rounded-lg bg-cyan-600 text-white hover:bg-cyan-700 transition-all duration-300 w-full sm:w-auto sm:ml-auto",children:"Continue"}):(0,ON.jsx)(CI.button,{type:"submit",disabled:o,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white font-semibold p-3 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 shadow-lg hover:shadow-cyan-500/50 text-sm sm:text-base",children:o?(0,ON.jsx)("span",{className:"animate-spin",children:(0,ON.jsx)(VI,{className:"w-5 h-5"})}):(0,ON.jsxs)(ON.Fragment,{children:["Complete Registration",(0,ON.jsx)(PI,{className:"w-5 h-5"})]})})]}),(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},className:"text-center mt-4",children:(0,ON.jsxs)("p",{className:"text-gray-400 text-sm sm:text-base",children:["Already have an account?"," ",(0,ON.jsx)(ke,{to:"/login",className:"text-cyan-400 hover:text-cyan-300 font-semibold hover:underline transition-all duration-300",children:"Sign in"})]})})]})]})]})};function i2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const s2=r.forwardRef(i2);function a2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const o2=r.forwardRef(a2);function l2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const c2=r.forwardRef(l2);function u2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const d2=r.forwardRef(u2),h2=e=>{var t;let{isOpen:n,onClose:i,onSubmit:s,instructors:a,subjects:o,initialData:l}=e;const[c,u]=(0,r.useState)((null===l||void 0===l?void 0:l.name)||""),[d,h]=(0,r.useState)((null===l||void 0===l?void 0:l.code)||""),[f,m]=(0,r.useState)((null===l||void 0===l?void 0:l.instructorId)||""),[p,g]=(0,r.useState)((null===l||void 0===l?void 0:l.subjectId)||""),[y,v]=(0,r.useState)(null!==l&&void 0!==l&&null!==(t=l.schedules)&&void 0!==t&&t.length?l.schedules:[{day:"",startTime:"",endTime:"",roomName:""}]),[b,x]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=Ig(_p(IN,"rooms"),(e=>{const t=e.docs.map((e=>({id:e.id,name:e.data().name||"Unnamed Room"})));x(t)}),(e=>{console.error("Error fetching rooms:",e)}));return()=>e()}),[]),(0,r.useEffect)((()=>{if(n){var e;if(l)u(l.name),h(l.code),m(l.instructorId||""),g(l.subjectId),v(null!==(e=l.schedules)&&void 0!==e&&e.length?l.schedules:[{day:"",startTime:"",endTime:"",roomName:""}]);else u(""),h(""),m(""),g(""),v([{day:"",startTime:"",endTime:"",roomName:""}]);console.log("Instructors available in modal:",a)}}),[n,l,a]);const w=(e,t,n)=>{const r=y.map(((r,i)=>i===e?{...r,[t]:n}:r));v(r)};return n?(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ON.jsxs)(CI.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white p-6 rounded-xl shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,ON.jsx)("h2",{className:"text-xl font-bold mb-4",children:l?"Edit Section":"Add New Section"}),(0,ON.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=a.find((e=>e.id===f));if(!t)return void alert("Please select a valid instructor.");const n={...(null===l||void 0===l?void 0:l.id)&&{id:l.id},name:c,code:d,instructorRfidUid:t.rfidUid,instructorId:t.id,subjectId:p,schedules:y.map((e=>{var t;return{...e,roomName:(null===(t=b.find((t=>t.name===e.roomName)))||void 0===t?void 0:t.name)||e.roomName}})).filter((e=>e.day&&e.startTime&&e.endTime&&e.roomName))};console.log("Submitting section data:",n),s(n),i()},className:"space-y-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Section Name"}),(0,ON.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"mt-1 block w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500",required:!0,placeholder:"e.g., Section A"})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Section Code"}),(0,ON.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"mt-1 block w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500",required:!0,placeholder:"e.g., SEC001"})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Instructor"}),(0,ON.jsxs)("select",{value:f,onChange:e=>{console.log("Selected instructor ID:",e.target.value),m(e.target.value)},className:"mt-1 block w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,ON.jsx)("option",{value:"",disabled:!0,children:"Select an Instructor"}),a.map((e=>(0,ON.jsxs)("option",{value:e.id,children:[e.fullName," (RFID: ",e.rfidUid,")"]},e.id)))]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),(0,ON.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"mt-1 block w-full border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,ON.jsx)("option",{value:"",disabled:!0,children:"Select a Subject"}),o.map((e=>(0,ON.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id)))]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Schedules"}),(0,ON.jsxs)("button",{type:"button",onClick:()=>{v([...y,{day:"",startTime:"",endTime:"",roomName:""}])},className:"text-indigo-600 hover:text-indigo-800 flex items-center text-sm",children:[(0,ON.jsx)(s2,{className:"w-4 h-4 mr-1"})," Add Schedule"]})]}),y.map(((e,t)=>(0,ON.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 mb-2 items-center",children:[(0,ON.jsxs)("select",{value:e.day,onChange:e=>w(t,"day",e.target.value),className:"w-full md:w-1/4 p-2 border rounded-lg",children:[(0,ON.jsx)("option",{value:"",children:"Day"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((e=>(0,ON.jsx)("option",{value:e,children:e},e)))]}),(0,ON.jsx)("input",{type:"time",value:e.startTime,onChange:e=>w(t,"startTime",e.target.value),className:"w-full md:w-1/4 p-2 border rounded-lg"}),(0,ON.jsx)("input",{type:"time",value:e.endTime,onChange:e=>w(t,"endTime",e.target.value),className:"w-full md:w-1/4 p-2 border rounded-lg"}),(0,ON.jsxs)("select",{value:e.roomName,onChange:e=>w(t,"roomName",e.target.value),className:"w-full md:w-1/4 p-2 border rounded-lg",children:[(0,ON.jsx)("option",{value:"",children:"Select Room"}),b.map((e=>(0,ON.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,ON.jsx)("button",{type:"button",onClick:()=>(e=>{v(y.filter(((t,n)=>n!==e)))})(t),className:"text-red-600 hover:text-red-800",children:(0,ON.jsx)(c2,{className:"w-5 h-5"})})]},t)))]}),(0,ON.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ON.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),(0,ON.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:l?"Update Section":"Add Section"})]})]})]})}):null},f2={button:{primary:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",secondary:"flex items-center px-4 py-2 border border-purple-200 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors",danger:"flex items-center px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition-colors"},card:"bg-white rounded-xl shadow-sm border border-blue-100/50 p-6",input:"w-full p-2 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",badge:{success:"bg-green-100 text-green-800",error:"bg-rose-100 text-rose-800",warning:"bg-amber-100 text-amber-800",info:"bg-blue-100 text-blue-800"}},m2={h1:"text-4xl font-bold",h2:"text-3xl font-bold",h3:"text-2xl font-bold",h4:"text-xl font-bold",body:"text-base",small:"text-sm"},p2=e=>{let{isOpen:t,onClose:n,onSubmit:i,students:s}=e;const[a,o]=(0,r.useState)([]),l=()=>{o([])};return t?(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,ON.jsxs)(CI.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,ON.jsx)("h2",{className:m2.h3,children:"Assign Students"}),(0,ON.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,ON.jsx)(lP,{className:"w-6 h-6"})})]}),(0,ON.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(a),l()},className:"p-6 space-y-6",children:[(0,ON.jsx)("div",{className:"space-y-4",children:s.map((e=>(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>{return t=e.id,void o((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mr-2"}),(0,ON.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e.fullName})]},e.id)))}),(0,ON.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 mt-6 border-t",children:[(0,ON.jsx)("button",{type:"button",onClick:()=>{n(),l()},className:f2.button.secondary,children:"Cancel"}),(0,ON.jsx)("button",{type:"submit",className:f2.button.primary,disabled:0===a.length,children:"Assign Students"})]})]})]})}):null},g2=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!0),[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=Ig(_p(IN,"sections"),(e=>{const n=e.docs.map((e=>({id:e.id,...e.data(),schedules:e.data().schedules||[],students:e.data().students||[]})));t(n)}),(e=>console.error("Error fetching sections:",e))),n=Ig(_p(IN,"teachers"),(e=>{const t=e.docs.map((e=>({id:e.id,fullName:e.data().fullName||"Unknown",rfidUid:e.data().rfidUid||"",assignedRooms:e.data().assignedRooms||[]})));i(t)}),(e=>console.error("Error fetching instructors:",e))),r=Ig(_p(IN,"students"),(e=>{const t=e.docs.map((e=>({id:e.id,fullName:e.data().fullName||"Unknown",idNumber:e.data().idNumber||"",rfidUid:e.data().rfidUid||"",sectionId:e.data().sectionId||""})));a(t)}),(e=>console.error("Error fetching students:",e))),s=Ig(_p(IN,"subjects"),(e=>{const t=e.docs.map((e=>({id:e.id,name:e.data().name||"Unknown",code:e.data().code||"",sections:e.data().sections||[],department:e.data().department||"Unknown",details:e.data().details||"",credits:e.data().credits||0,prerequisites:e.data().prerequisites||[],learningObjectives:e.data().learningObjectives||[],status:e.data().status||"active"})));l(t)}),(e=>console.error("Error fetching subjects:",e))),o=Ig(_p(IN,"rooms"),(e=>{const t=e.docs.map((e=>({id:e.id,name:e.data().name||"Unnamed Room"})));u(t),h(!1)}),(e=>console.error("Error fetching rooms:",e)));return()=>{e(),n(),r(),s(),o()}}),[]);const w=()=>(0,ON.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 animate-pulse",children:[(0,ON.jsx)("div",{className:"h-6 w-32 bg-gray-200 rounded mb-2"}),(0,ON.jsx)("div",{className:"h-4 w-48 bg-gray-200 rounded mb-1"}),(0,ON.jsx)("div",{className:"h-4 w-40 bg-gray-200 rounded"})]});return(0,ON.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:"ml-[80px] lg:ml-64 p-6 transition-all duration-300",children:(0,ON.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:[(0,ON.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Section Management"}),(0,ON.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200",children:[(0,ON.jsx)(s2,{className:"w-5 h-5 mr-2"}),"Add Section"]})]}),d?(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map(((e,t)=>(0,ON.jsx)(w,{},t)))}):0===e.length?(0,ON.jsxs)("div",{className:"text-center py-10",children:[(0,ON.jsx)(o2,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,ON.jsx)("p",{className:"text-gray-600",children:"No sections available. Add a section to get started."})]}):(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t=>{var r,i,a,l;const u=n.find((e=>e.rfidUid===t.instructorRfidUid)),d=o.find((e=>e.id===t.subjectId));return(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 hover:shadow-lg transition-shadow duration-200",children:[(0,ON.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:t.name}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["Instructor: ",(null===u||void 0===u?void 0:u.fullName)||"Not Assigned"]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["RFID UID: ",t.instructorRfidUid||"N/A"]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["Subject: ",(null===d||void 0===d?void 0:d.name)||"N/A"," (",(null===d||void 0===d?void 0:d.code)||"",")"]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-600",children:["Code: ",t.code]})]}),(0,ON.jsx)(o2,{className:"w-8 h-8 text-indigo-600"})]}),(0,ON.jsxs)("div",{className:"mb-6",children:[(0,ON.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,ON.jsx)(tA,{className:"w-5 h-5 mr-1"}),"Schedules (",(null===(r=t.schedules)||void 0===r?void 0:r.length)||0,")"]}),(0,ON.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-2 pr-2",children:(0,ON.jsx)(M0,{children:(null===(i=t.schedules)||void 0===i?void 0:i.length)>0?t.schedules.map(((e,t)=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2},className:"text-sm text-gray-600 bg-gray-50 p-2 rounded-lg",children:[e.day,": ",e.startTime," - ",e.endTime," (",e.roomName,")"]},t))):(0,ON.jsx)(CI.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-gray-500 text-center py-2",children:"No schedules assigned."})})})]}),(0,ON.jsxs)("div",{className:"mb-6",children:[(0,ON.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Enrolled Students (",(null===(a=t.students)||void 0===a?void 0:a.length)||0,")"]}),(0,ON.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-3 pr-2",children:(0,ON.jsx)(M0,{children:(null===(l=t.students)||void 0===l?void 0:l.length)>0?t.students.map((n=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-150",children:[(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:(0,ON.jsx)("span",{className:"text-indigo-600 font-medium",children:n[0]})}),(0,ON.jsx)("p",{className:"text-sm font-medium text-gray-900",children:n})]}),(0,ON.jsx)("button",{onClick:()=>zI().fire({title:"Remove Student",text:`Are you sure you want to remove ${n} from ${t.name}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, remove"}).then((r=>{r.isConfirmed&&(async(t,n)=>{try{const r=Np(IN,"sections",t),i=e.find((e=>e.id===t));if(!i)return;const a=i.students.filter((e=>e!==n));await Cg(r,{students:a});const o=s.find((e=>e.fullName===n));if(o){const e=Np(IN,"students",o.id);if(await Cg(e,{sectionId:""}),o.rfidUid){const e=Gw(AN,`/Students/${o.rfidUid}`);await Zw(e,{sectionId:""})}}const l=Np(IN,"subjects",i.subjectId),c=await Sg(lg(_p(IN,"subjects"),ug("__name__","==",i.subjectId)));if(!c.empty){const e=(c.docs[0].data().sections||[]).map((e=>e.id===t?{...e,currentEnrollment:a.length}:e));await Cg(l,{sections:e})}const u=Np(IN,"teachers",i.instructorId),d=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",i.instructorId)));if(!d.empty){const e=(d.docs[0].data().assignedSubjects||[]).map((e=>e.id===i.subjectId?{...e,sections:(e.sections||[]).map((e=>e.id===t?{...e,currentEnrollment:a.length}:e))}:e));await Cg(u,{assignedSubjects:e})}zI().fire({icon:"success",title:"Student Removed",showConfirmButton:!1,timer:1500})}catch(Zg){console.error("Error removing student:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to remove student. Please try again."})}})(t.id,n)})),className:"text-red-500 hover:text-red-700 transition-colors duration-150",children:(0,ON.jsx)(c2,{className:"w-5 h-5"})})]},n))):(0,ON.jsx)(CI.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-gray-500 text-center py-4",children:"No students enrolled yet."})})})]}),(0,ON.jsxs)("div",{className:"flex space-x-3",children:[(0,ON.jsxs)("button",{onClick:()=>{x(t),g(!0)},className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg shadow hover:bg-yellow-700 transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,ON.jsx)(d2,{className:"w-5 h-5"}),"Edit Section"]}),(0,ON.jsxs)("button",{onClick:()=>{x(t),v(!0)},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,ON.jsx)(s2,{className:"w-5 h-5"}),"Assign Students"]}),(0,ON.jsxs)("button",{onClick:()=>zI().fire({title:"Delete Section",text:`Are you sure you want to delete ${t.name}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete"}).then((n=>{n.isConfirmed&&(async t=>{try{const n=Np(IN,"sections",t),r=e.find((e=>e.id===t));if(!r)return;const i=Np(IN,"subjects",r.subjectId),a=await Sg(lg(_p(IN,"subjects"),ug("__name__","==",r.subjectId)));if(!a.empty){const e=(a.docs[0].data().sections||[]).filter((e=>e.id!==t));await Cg(i,{sections:e})}const o=Np(IN,"teachers",r.instructorId),l=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",r.instructorId)));if(!l.empty){const e=l.docs[0].data(),n=(e.assignedSubjects||[]).map((e=>e.id===r.subjectId?{...e,sections:(e.sections||[]).filter((e=>e.id!==t))}:e)).filter((e=>!e.sections||e.sections.length>0)),i=r.schedules.map((e=>{var t;return(null===(t=c.find((t=>t.name===e.roomName)))||void 0===t?void 0:t.id)||e.roomName})),s=(e.assignedRooms||[]).filter((e=>!i.includes(e)));await Cg(o,{assignedRooms:s,assignedSubjects:n})}await Promise.all(r.students.map((async e=>{const t=s.find((t=>t.fullName===e));if(t){const e=Np(IN,"students",t.id);if(await Cg(e,{sectionId:""}),t.rfidUid){const e=Gw(AN,`/Students/${t.rfidUid}`);await Zw(e,{sectionId:""})}}}))),await kg(n),zI().fire({icon:"success",title:"Section Deleted",showConfirmButton:!1,timer:1500})}catch(Zg){console.error("Error deleting section:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to delete section. Please try again."})}})(t.id)})),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,ON.jsx)(c2,{className:"w-5 h-5"}),"Delete Section"]})]})]},t.id)}))})]})}),(0,ON.jsx)(h2,{isOpen:f,onClose:()=>m(!1),onSubmit:async e=>{try{const i=await Tg(_p(IN,"sections"),{name:e.name,code:e.code,students:[],instructorRfidUid:e.instructorRfidUid,instructorId:e.instructorId,subjectId:e.subjectId,schedules:e.schedules,createdAt:(new Date).toISOString()}),s=n.find((t=>t.id===e.instructorId)),a={id:i.id,name:e.name,code:e.code,instructorId:e.instructorId,instructorName:(null===s||void 0===s?void 0:s.fullName)||"Unknown",instructorRfidUid:e.instructorRfidUid,schedules:e.schedules,capacity:40,currentEnrollment:0},l=Np(IN,"subjects",e.subjectId),u=await Sg(lg(_p(IN,"subjects"),ug("__name__","==",e.subjectId)));if(u.empty){const t=o.find((t=>t.id===e.subjectId));if(!t)throw new Error("Subject not found");await Cg(l,{name:t.name,code:t.code,department:t.department,details:t.details,credits:t.credits,prerequisites:t.prerequisites,learningObjectives:t.learningObjectives,status:t.status,sections:[a]})}else{const e=u.docs[0].data().sections||[];await Cg(l,{sections:[...e,a]})}const d=Np(IN,"teachers",e.instructorId),h=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",e.instructorId)));if(!h.empty){const n=h.docs[0].data(),i=n.assignedSubjects||[],s=i.findIndex((t=>t.id===e.subjectId));let l;var t,r;if(s>=0)l=i.map(((e,t)=>t===s?{...e,sections:[...e.sections||[],a]}:e));else l=[...i,{id:e.subjectId,name:(null===(t=o.find((t=>t.id===e.subjectId)))||void 0===t?void 0:t.name)||"Unknown",code:(null===(r=o.find((t=>t.id===e.subjectId)))||void 0===r?void 0:r.code)||"",sections:[a]}];const u=n.assignedRooms||[],f=e.schedules.map((e=>{var t;return(null===(t=c.find((t=>t.name===e.roomName)))||void 0===t?void 0:t.id)||e.roomName})).filter((e=>!u.includes(e)));await Cg(d,{assignedRooms:[...u,...f],assignedSubjects:l})}m(!1),zI().fire({icon:"success",title:"Section Added Successfully",showConfirmButton:!1,timer:1500})}catch(Zg){console.error("Error adding section:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to add section. Please try again."})}},instructors:n,subjects:o}),(0,ON.jsx)(h2,{isOpen:p,onClose:()=>g(!1),onSubmit:t=>(async t=>{try{var r;const a=Np(IN,"sections",t.id);await Cg(a,{name:t.name,code:t.code,instructorRfidUid:t.instructorRfidUid,instructorId:t.instructorId,subjectId:t.subjectId,schedules:t.schedules});const l=n.find((e=>e.id===t.instructorId)),u={id:t.id,name:t.name,code:t.code,instructorId:t.instructorId,instructorName:(null===l||void 0===l?void 0:l.fullName)||"Unknown",instructorRfidUid:t.instructorRfidUid,schedules:t.schedules,capacity:40,currentEnrollment:(null===(r=e.find((e=>e.id===t.id)))||void 0===r?void 0:r.students.length)||0},d=Np(IN,"subjects",t.subjectId),h=await Sg(lg(_p(IN,"subjects"),ug("__name__","==",t.subjectId)));if(!h.empty){const e=(h.docs[0].data().sections||[]).map((e=>e.id===t.id?u:e));await Cg(d,{sections:e})}const f=e.find((e=>e.id===t.id)),m=null===f||void 0===f?void 0:f.instructorId,p=t.instructorId;if(m!==p){if(m){const e=Np(IN,"teachers",m),n=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",m)));if(!n.empty){const r=n.docs[0].data(),i=(r.assignedSubjects||[]).map((e=>e.id===t.subjectId?{...e,sections:e.sections.filter((e=>e.id!==t.id))}:e)).filter((e=>!e.sections||e.sections.length>0)),s=r.assignedRooms||[],a=t.schedules.map((e=>{var t;return(null===(t=c.find((t=>t.name===e.roomName)))||void 0===t?void 0:t.id)||e.roomName})),o=s.filter((e=>!a.includes(e)));await Cg(e,{assignedRooms:o,assignedSubjects:i})}}const e=Np(IN,"teachers",p),n=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",p)));if(!n.empty){const r=n.docs[0].data(),a=r.assignedSubjects||[],l=a.findIndex((e=>e.id===t.subjectId));let d;var i,s;d=l>=0?a.map(((e,t)=>t===l?{...e,sections:[...e.sections||[],u]}:e)):[...a,{id:t.subjectId,name:(null===(i=o.find((e=>e.id===t.subjectId)))||void 0===i?void 0:i.name)||"Unknown",code:(null===(s=o.find((e=>e.id===t.subjectId)))||void 0===s?void 0:s.code)||"",sections:[u]}];const h=r.assignedRooms||[],f=t.schedules.map((e=>{var t;return(null===(t=c.find((t=>t.name===e.roomName)))||void 0===t?void 0:t.id)||e.roomName})).filter((e=>!h.includes(e)));await Cg(e,{assignedRooms:[...h,...f],assignedSubjects:d})}}else{const e=Np(IN,"teachers",t.instructorId),n=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",t.instructorId)));if(!n.empty){const r=n.docs[0].data(),i=(r.assignedSubjects||[]).map((e=>e.id===t.subjectId?{...e,sections:(e.sections||[]).map((e=>e.id===t.id?u:e))}:e)),s=(null===f||void 0===f?void 0:f.schedules.map((e=>{var t;return(null===(t=c.find((t=>t.name===e.roomName)))||void 0===t?void 0:t.id)||e.roomName})))||[],a=t.schedules.map((e=>{var t;return(null===(t=c.find((t=>t.name===e.roomName)))||void 0===t?void 0:t.id)||e.roomName})),o=r.assignedRooms||[],l=[...new Set([...o.filter((e=>!s.includes(e))),...a])];await Cg(e,{assignedRooms:l,assignedSubjects:i})}}g(!1),zI().fire({icon:"success",title:"Section Updated Successfully",showConfirmButton:!1,timer:1500})}catch(Zg){console.error("Error editing section:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to update section. Please try again."})}})(t),instructors:n,subjects:o,initialData:b?{...b,id:b.id}:void 0}),(0,ON.jsx)(p2,{isOpen:y,onClose:()=>v(!1),onSubmit:async e=>{if(b)try{const t=Np(IN,"sections",b.id),n=e.map((e=>{var t;return(null===(t=s.find((t=>t.id===e)))||void 0===t?void 0:t.fullName)||""})).filter(Boolean);await Cg(t,{students:[...b.students,...n]}),await Promise.all(e.map((async e=>{const t=Np(IN,"students",e);await Cg(t,{sectionId:b.id});const n=s.find((t=>t.id===e));if(null!==n&&void 0!==n&&n.rfidUid){const e=Gw(AN,`/Students/${n.rfidUid}`);await Zw(e,{sectionId:b.id})}})));const r=Np(IN,"subjects",b.subjectId),i=await Sg(lg(_p(IN,"subjects"),ug("__name__","==",b.subjectId)));if(!i.empty){const e=i.docs[0],t=(e.data().sections||[]).map((e=>e.id===b.id?{...e,currentEnrollment:b.students.length+n.length}:e));await Cg(r,{sections:t})}const a=Np(IN,"teachers",b.instructorId),o=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",b.instructorId)));if(!o.empty){const e=o.docs[0],t=(e.data().assignedSubjects||[]).map((e=>e.id===b.subjectId?{...e,sections:(e.sections||[]).map((e=>e.id===b.id?{...e,currentEnrollment:b.students.length+n.length}:e))}:e));await Cg(a,{assignedSubjects:t})}v(!1),zI().fire({icon:"success",title:"Students Assigned Successfully",showConfirmButton:!1,timer:1500})}catch(Zg){console.error("Error assigning students:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to assign students. Please try again."})}},students:s})]})};function y2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const v2=r.forwardRef(y2);function b2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75a4.5 4.5 0 0 1-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 1 1-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 0 1 6.336-4.486l-3.276 3.276a3.004 3.004 0 0 0 2.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.867 19.125h.008v.008h-.008v-.008Z"}))}const x2=r.forwardRef(b2),w2=e=>{let{isOpen:t,onClose:n,onSubmit:i}=e;const[s,a]=(0,r.useState)({name:"",building:"",floor:"",capacity:0,type:"classroom",status:"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1},energyStatus:{lights:!1,fans:!1,tampering:!1}});return t?(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,ON.jsxs)(CI.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,ON.jsx)("h2",{className:m2.h3,children:"Add New Room"}),(0,ON.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,ON.jsx)(lP,{className:"w-6 h-6"})})]}),(0,ON.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(s),a({name:"",building:"",floor:"",capacity:0,type:"classroom",status:"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1},energyStatus:{lights:!1,fans:!1,tampering:!1}})},className:"p-6 space-y-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Name/Number"}),(0,ON.jsx)("input",{type:"text",value:s.name,onChange:e=>a({...s,name:e.target.value}),className:f2.input,required:!0,placeholder:"e.g., Room 101"})]}),(0,ON.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Building"}),(0,ON.jsx)("input",{type:"text",value:s.building,onChange:e=>a({...s,building:e.target.value}),className:f2.input,required:!0,placeholder:"e.g., Main Building"})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Floor"}),(0,ON.jsx)("input",{type:"text",value:s.floor,onChange:e=>a({...s,floor:e.target.value}),className:f2.input,required:!0,placeholder:"e.g., 1st Floor"})]})]}),(0,ON.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Type"}),(0,ON.jsxs)("select",{value:s.type,onChange:e=>a({...s,type:e.target.value}),className:f2.input,required:!0,children:[(0,ON.jsx)("option",{value:"classroom",children:"Classroom"}),(0,ON.jsx)("option",{value:"laboratory",children:"Laboratory"}),(0,ON.jsx)("option",{value:"lecture_hall",children:"Lecture Hall"}),(0,ON.jsx)("option",{value:"conference_room",children:"Conference Room"}),(0,ON.jsx)("option",{value:"faculty_room",children:"Faculty Room"})]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),(0,ON.jsx)("input",{type:"number",min:"1",value:s.capacity||"",onChange:e=>a({...s,capacity:parseInt(e.target.value)||0}),className:f2.input,required:!0,placeholder:"e.g., 30"})]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,ON.jsxs)("select",{value:s.status,onChange:e=>a({...s,status:e.target.value}),className:f2.input,required:!0,children:[(0,ON.jsx)("option",{value:"available",children:"Available"}),(0,ON.jsx)("option",{value:"occupied",children:"Occupied"}),(0,ON.jsx)("option",{value:"maintenance",children:"Under Maintenance"})]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facilities"}),(0,ON.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ON.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("input",{type:"checkbox",checked:s.facilities.hasProjector,onChange:e=>a({...s,facilities:{...s.facilities,hasProjector:e.target.checked}}),className:"rounded text-indigo-600"}),(0,ON.jsx)("span",{className:"text-sm text-gray-700",children:"Projector"})]}),(0,ON.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("input",{type:"checkbox",checked:s.facilities.hasAC,onChange:e=>a({...s,facilities:{...s.facilities,hasAC:e.target.checked}}),className:"rounded text-indigo-600"}),(0,ON.jsx)("span",{className:"text-sm text-gray-700",children:"Air Conditioning"})]}),(0,ON.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("input",{type:"checkbox",checked:s.facilities.hasComputers,onChange:e=>a({...s,facilities:{...s.facilities,hasComputers:e.target.checked}}),className:"rounded text-indigo-600"}),(0,ON.jsx)("span",{className:"text-sm text-gray-700",children:"Computers"})]}),(0,ON.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("input",{type:"checkbox",checked:s.facilities.hasWifi,onChange:e=>a({...s,facilities:{...s.facilities,hasWifi:e.target.checked}}),className:"rounded text-indigo-600"}),(0,ON.jsx)("span",{className:"text-sm text-gray-700",children:"WiFi"})]})]})]}),(0,ON.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,ON.jsx)("button",{type:"button",onClick:n,className:f2.button.secondary,children:"Cancel"}),(0,ON.jsx)("button",{type:"submit",className:f2.button.primary,children:"Add Room"})]})]})]})}):null},_2=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)("all"),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{l(!0),await Promise.all([y(),v(),b()]),g(new Date),l(!1)})()}),[]);const y=async()=>{try{const e=(await Sg(_p(IN,"rooms"))).docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"",building:t.building||"",floor:t.floor||"",capacity:t.capacity||0,type:t.type||"classroom",status:t.status||"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1,...t.facilities||{}}}}));t(e)}catch(Zg){console.error("Error fetching rooms:",Zg),zI().fire("Error","Failed to fetch rooms","error")}},v=async()=>{try{const e=(await Sg(_p(IN,"subjects"))).docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"Unknown Subject",code:t.code||"",credits:t.credits||0,department:t.department||"Unassigned",details:t.details||"",sections:t.sections||[],status:t.status||"active"}}));i(e)}catch(Zg){console.error("Error fetching subjects:",Zg),zI().fire("Error","Failed to fetch subjects","error")}},b=async()=>{try{const e=(await Sg(_p(IN,"teachers"))).docs.map((e=>{const t=e.data();return{uid:e.id,fullName:t.fullName||"Unknown Instructor",email:t.email||"",assignedSubjects:t.assignedSubjects||[]}}));a(e)}catch(Zg){console.error("Error fetching instructors:",Zg),zI().fire("Error","Failed to fetch instructors","error")}},x=e=>{const t=new Date,n=t.toLocaleString("en-US",{weekday:"long"}),r=t.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),i=[],a={};let o=!1;return s.forEach((t=>{const s=[];t.assignedSubjects.forEach((t=>{t.sections.forEach((t=>{t.schedules.forEach((t=>{t.roomName===e&&(s.push(t),t.day===n&&r>=t.startTime&&r<=t.endTime&&(o=!0))}))}))})),s.length>0&&(i.push(t),a[t.uid]=s)})),{instructors:i,schedules:a,isOccupied:o}},w=e.map((e=>{const{instructors:t,schedules:n,isOccupied:r}=x(e.name);return{...e,status:"maintenance"===e.status?"maintenance":r?"occupied":"available",assignedInstructors:t,schedulesByInstructor:n}})).filter((e=>{const t="all"===d||e.status===d,n=""===f||e.name.toLowerCase().includes(f.toLowerCase())||e.building.toLowerCase().includes(f.toLowerCase());return t&&n}));return(0,ON.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 via-purple-50/30 to-rose-50/30",children:[(0,ON.jsx)(qO,{}),(0,ON.jsxs)("div",{className:"flex-1 transition-all duration-300 ml-[80px] lg:ml-64 p-4 sm:p-8 overflow-y-auto",children:[(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 sm:mb-8",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold text-blue-900 flex items-center",children:[(0,ON.jsx)(v2,{className:"w-6 h-6 sm:w-8 sm:h-8 mr-2 sm:mr-3 text-blue-600"}),"Room Management"]}),(0,ON.jsx)("p",{className:"mt-1 text-blue-600/80 text-sm sm:text-base",children:"Monitor rooms in real-time"})]}),(0,ON.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,ON.jsxs)("button",{onClick:()=>u(!0),className:`${f2.button.primary} text-sm sm:text-base px-3 sm:px-4 py-1.5 sm:py-2`,children:[(0,ON.jsx)(s2,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),"Add Room"]})})]}),(0,ON.jsx)("div",{className:`${f2.card} p-4 sm:p-6`,children:(0,ON.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-teal-700 mb-1 sm:mb-2",children:"Search Rooms"}),(0,ON.jsx)("input",{type:"text",placeholder:"Search by room number, name...",value:f,onChange:e=>m(e.target.value),className:`${f2.input} text-sm sm:text-base py-1.5 sm:py-2`})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-teal-700 mb-1 sm:mb-2",children:"Filter by Status"}),(0,ON.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:`${f2.input} text-sm sm:text-base py-1.5 sm:py-2`,children:[(0,ON.jsx)("option",{value:"all",children:"All Status"}),(0,ON.jsx)("option",{value:"available",children:"Available"}),(0,ON.jsx)("option",{value:"occupied",children:"Occupied"}),(0,ON.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]})]})}),p&&(0,ON.jsxs)("div",{className:"mt-4 text-xs sm:text-sm text-gray-500 flex items-center",children:[(0,ON.jsx)(rA,{className:"w-4 h-4 mr-1"}),"Last updated: ",p.toLocaleString()]}),o?(0,ON.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-b-2 border-indigo-600"})}):(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:w.map((e=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${f2.card} p-4 sm:p-6`,children:[(0,ON.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:["Room ",e.name]}),(0,ON.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:e.building})]}),(0,ON.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium "+("available"===e.status?"bg-green-100 text-green-800":"occupied"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"maintenance"===e.status?"Under Maintenance":e.status})]}),(0,ON.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Building"}),(0,ON.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e.building})]}),(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Floor"}),(0,ON.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e.floor})]}),(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Capacity"}),(0,ON.jsxs)("span",{className:"text-xs sm:text-sm font-medium",children:[e.capacity," seats"]})]}),(0,ON.jsxs)("div",{className:"flex flex-col",children:[(0,ON.jsxs)("span",{className:"text-xs sm:text-sm text-gray-600 flex items-center mb-1",children:[(0,ON.jsx)(cA,{className:"w-4 h-4 mr-1"}),"Assigned Instructors"]}),e.assignedInstructors.length>0?e.assignedInstructors.map((t=>{var n;return(0,ON.jsxs)("div",{className:"mb-2",children:[(0,ON.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:t.fullName.length>20?`${t.fullName.substring(0,17)}...`:t.fullName}),(null===(n=e.schedulesByInstructor[t.uid])||void 0===n?void 0:n.length)>0?(0,ON.jsxs)("div",{className:"mt-1",children:[(0,ON.jsxs)("span",{className:"text-xs sm:text-sm text-gray-600 flex items-center mb-1",children:[(0,ON.jsx)(rA,{className:"w-4 h-4 mr-1"}),"Schedules in ",e.name]}),(0,ON.jsx)("div",{className:"text-xs sm:text-sm font-medium",children:e.schedulesByInstructor[t.uid].map(((e,t)=>(0,ON.jsxs)("div",{children:[e.day," ",e.startTime,"-",e.endTime]},t)))})]}):(0,ON.jsx)("div",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"No schedules in this room"})]},t.uid)})):(0,ON.jsx)("span",{className:"text-xs sm:text-sm text-gray-500",children:"None"})]})]}),(0,ON.jsxs)("div",{className:"mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3",children:[(0,ON.jsxs)("button",{onClick:()=>(async e=>{try{await Cg(Np(IN,"rooms",e),{status:"maintenance"}),t((t=>t.map((t=>t.id===e?{...t,status:"maintenance"}:t)))),zI().fire({icon:"success",title:"Room set to Maintenance",showConfirmButton:!1,timer:1500,customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700"}})}catch(Zg){console.error("Error setting room to maintenance:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to set room to maintenance",customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700",confirmButton:"bg-blue-600 hover:bg-blue-700"}})}})(e.id),className:"flex items-center justify-center w-full p-1.5 sm:p-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-xs sm:text-sm",disabled:"maintenance"===e.status,children:[(0,ON.jsx)(x2,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),"Set to Maintenance"]}),(0,ON.jsxs)("button",{onClick:()=>(async e=>{try{await Cg(Np(IN,"rooms",e),{status:"available"}),t((t=>t.map((t=>t.id===e?{...t,status:"available"}:t)))),zI().fire({icon:"success",title:"Room set to Available",showConfirmButton:!1,timer:1500,customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700"}})}catch(Zg){console.error("Error setting room to available:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to set room to available",customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700",confirmButton:"bg-blue-600 hover:bg-blue-700"}})}})(e.id),className:"flex items-center justify-center w-full p-1.5 sm:p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-xs sm:text-sm",disabled:"maintenance"!==e.status,children:[(0,ON.jsx)(YI,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),"Set to Available"]})]})]},e.id)))}),(0,ON.jsx)(w2,{isOpen:c,onClose:()=>u(!1),onSubmit:e=>{var t;(async e=>{try{var t,n,r,i;const s={id:"",name:e.name||"",building:e.building||"",floor:e.floor||"",capacity:e.capacity||0,type:e.type||"classroom",status:e.status||"available",facilities:{hasProjector:(null===(t=e.facilities)||void 0===t?void 0:t.hasProjector)||!1,hasAC:(null===(n=e.facilities)||void 0===n?void 0:n.hasAC)||!1,hasComputers:(null===(r=e.facilities)||void 0===r?void 0:r.hasComputers)||!1,hasWifi:(null===(i=e.facilities)||void 0===i?void 0:i.hasWifi)||!1}};await Tg(_p(IN,"rooms"),{...s,createdAt:(new Date).toISOString()}),u(!1),await y(),zI().fire({icon:"success",title:"Room Added Successfully",showConfirmButton:!1,timer:1500,customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700"}})}catch(Zg){console.error("Error adding room:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to add room",customClass:{popup:"rounded-lg sm:rounded-xl",title:"text-blue-900",htmlContainer:"text-blue-700",confirmButton:"bg-blue-600 hover:bg-blue-700"}})}})({...e,type:null===(t=e.type)||void 0===t?void 0:t.toLowerCase().replace(" ","_")})}})]})]})};function N2(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const j2=r.forwardRef(N2);let S2={data:""},E2=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||S2,C2=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,k2=/\/\*[^]*?\*\/|  +/g,T2=/\n+/g,I2=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+a+";":r+="f"==s[1]?I2(a,s):s+"{"+I2(a,"k"==s[1]?"":t)+"}":"object"==typeof a?r+=I2(a,t?t.replace(/([^,])+/g,(e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):s):null!=a&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=I2.p?I2.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},A2={},O2=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+O2(e[n]);return t}return e},P2=(e,t,n,r,i)=>{let s=O2(e),a=A2[s]||(A2[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!A2[a]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=C2.exec(e.replace(k2,""));)t[4]?r.shift():t[3]?(n=t[3].replace(T2," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(T2," ").trim();return r[0]})(e);A2[a]=I2(i?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&A2.g?A2.g:null;return n&&(A2.g=A2[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(A2[a],t,r,o),a};function M2(e){let t=this||{},n=e.call?e(t.p):e;return P2(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let s=t[i];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":I2(e,""):!1===e?"":e}return e+r+(null==s?"":s)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,E2(t.target),t.g,t.o,t.k)}M2.bind({g:1});let R2,D2,L2,F2=M2.bind({k:1});function U2(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let o=Object.assign({},s),l=o.className||i.className;n.p=Object.assign({theme:D2&&D2()},o),n.o=/ *go\d+/.test(l),o.className=M2.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),L2&&c[0]&&L2(o),R2(c,o)}return t?t(i):i}}var B2=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,V2=(()=>{let e=0;return()=>(++e).toString()})(),$2=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),z2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return z2(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},q2=[],H2={toasts:[],pausedAt:void 0},W2=e=>{H2=z2(H2,e),q2.forEach((e=>{e(H2)}))},K2=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||V2()}}(t,e,n);return W2({type:2,toast:r}),r.id},G2=(e,t)=>K2("blank")(e,t);G2.error=K2("error"),G2.success=K2("success"),G2.loading=K2("loading"),G2.custom=K2("custom"),G2.dismiss=e=>{W2({type:3,toastId:e})},G2.remove=e=>W2({type:4,toastId:e}),G2.promise=(e,t,n)=>{let r=G2.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?B2(t.success,e):void 0;return i?G2.success(i,{id:r,...n,...null==n?void 0:n.success}):G2.dismiss(r),e})).catch((e=>{let i=t.error?B2(t.error,e):void 0;i?G2.error(i,{id:r,...n,...null==n?void 0:n.error}):G2.dismiss(r)})),e};new Map;var Y2=F2`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,X2=F2`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Z2=F2`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Q2=U2("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Y2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${X2} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Z2} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,J2=F2`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,e5=U2("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${J2} 1s linear infinite;
`,t5=F2`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,n5=F2`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,r5=U2("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${t5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${n5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,i5=U2("div")`
  position: absolute;
`,s5=U2("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,a5=F2`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,o5=U2("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${a5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,l5=e=>{let{toast:t}=e,{icon:n,type:i,iconTheme:s}=t;return void 0!==n?"string"==typeof n?r.createElement(o5,null,n):n:"blank"===i?null:r.createElement(s5,null,r.createElement(e5,{...s}),"loading"!==i&&r.createElement(i5,null,"error"===i?r.createElement(Q2,{...s}):r.createElement(r5,{...s})))},c5=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,u5=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,d5=U2("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,h5=U2("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`;r.memo((e=>{let{toast:t,position:n,style:i,children:s}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=$2()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[c5(n),u5(n)];return{animation:t?`${F2(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${F2(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},o=r.createElement(l5,{toast:t}),l=r.createElement(h5,{...t.ariaProps},B2(t.message,t));return r.createElement(d5,{className:t.className,style:{...a,...i,...t.style}},"function"==typeof s?s({icon:o,message:l}):r.createElement(r.Fragment,null,o,l))}));!function(e,t,n,r){I2.p=t,R2=e,D2=n,L2=r}(r.createElement);M2`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;function f5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const m5=r.forwardRef(f5);function p5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),r.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))}const g5=r.forwardRef(p5),y5=e=>{let{roomId:t,sectionId:n}=e;const[i,s]=(0,r.useState)(null),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(""),{currentUser:v}=MN();(0,r.useEffect)((()=>{(async()=>{try{const e=await Ng(Np(IN,"rooms",t));if(e.exists()){const t=e.data();s({id:e.id,...t,seats:t.seats||b(t.layout.rows,t.layout.cols)})}}catch(Zg){console.error("Error fetching room:",Zg),S1.error("Failed to load room data")}})()}),[t]),(0,r.useEffect)((()=>{n&&(async()=>{try{c(!0);const e=await Ng(Np(IN,"sections",n));if(e.exists()){const t=e.data().students||[];if(t.length>0){const e=[];for(const n of t){const t=await Ng(Np(IN,"students",n));if(t.exists()){const n=t.data();e.push({id:t.id,fullName:n.fullName||"",idNumber:n.idNumber||"",email:n.email||"",major:n.major||"",yearLevel:n.yearLevel||""})}}o(e)}}}catch(Zg){console.error("Error fetching students:",Zg),S1.error("Failed to load student data")}finally{c(!1)}})()}),[n]),(0,r.useEffect)((()=>{if(!t)return;const e=Ig(Np(IN,"rooms",t),(e=>{if(e.exists()){const t=e.data();s((e=>e?{...e,seats:t.seats||e.seats}:null))}}),(e=>{console.error("Error listening to room updates:",e)}));return()=>e()}),[t]);const b=(e,t)=>{const n=[];for(let r=0;r<e;r++)for(let e=0;e<t;e++)n.push({id:`seat-${r}-${e}`,position:{row:r,col:e},weightSensorStatus:!1,rfidConfirmed:!1});return n},x=e=>{d(e),f(e.studentId||""),p(!0)},w=a.filter((e=>e.fullName.toLowerCase().includes(g.toLowerCase())||e.idNumber.toLowerCase().includes(g.toLowerCase()))),_=e=>{if(!e)return"Unassigned";const t=a.find((t=>t.id===e));return t?t.fullName:"Unknown Student"};return l||!i?(0,ON.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,ON.jsx)(VI,{className:"w-8 h-8 text-indigo-500 animate-spin"}),(0,ON.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading seat plan..."})]}):(0,ON.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,ON.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,ON.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ON.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Room ",i.number," Seat Plan"]}),(0,ON.jsxs)("div",{className:"text-sm text-gray-500",children:["Capacity: ",i.capacity," students"]})]})}),(0,ON.jsx)("div",{className:"p-6",children:(0,ON.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${i.layout.cols}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${i.layout.rows}, 1fr)`},children:i.seats.map((e=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},className:`\n                relative p-3 rounded-lg border-2 cursor-pointer\n                ${e.weightSensorStatus?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200"}\n                ${e.rfidConfirmed?"bg-green-50 border-green-300":""}\n                hover:shadow-md transition-all duration-200\n              `,onClick:()=>x(e),children:[(0,ON.jsxs)("div",{className:"flex flex-col h-full",children:[(0,ON.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Seat ",e.position.row+1,"-",e.position.col+1]}),e.studentId?(0,ON.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,ON.jsx)("div",{className:"font-medium text-sm truncate",children:_(e.studentId)}),(0,ON.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,ON.jsx)("div",{className:"flex items-center",children:e.weightSensorStatus?(0,ON.jsxs)("div",{className:"flex items-center text-blue-600 text-xs",children:[(0,ON.jsx)(BP,{className:"w-3 h-3 mr-1"}),(0,ON.jsx)("span",{children:"Seated"})]}):(0,ON.jsxs)("div",{className:"flex items-center text-gray-400 text-xs",children:[(0,ON.jsx)(BP,{className:"w-3 h-3 mr-1"}),(0,ON.jsx)("span",{children:"Empty"})]})}),e.rfidConfirmed?(0,ON.jsxs)("div",{className:"flex items-center text-green-600 text-xs",children:[(0,ON.jsx)(G1,{className:"w-3 h-3 mr-1"}),(0,ON.jsx)("span",{children:"Confirmed"})]}):(0,ON.jsxs)("div",{className:"flex items-center text-gray-400 text-xs",children:[(0,ON.jsx)(X1,{className:"w-3 h-3 mr-1"}),(0,ON.jsx)("span",{children:"Unconfirmed"})]})]})]}):(0,ON.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,ON.jsx)("button",{className:"text-gray-400 hover:text-indigo-500 transition-colors",children:(0,ON.jsx)(m5,{className:"w-6 h-6"})})})]}),e.lastUpdated&&(0,ON.jsxs)("div",{className:"absolute bottom-1 right-1 text-xs text-gray-400 flex items-center",children:[(0,ON.jsx)(WO,{className:"w-3 h-3 mr-1"}),new Date(e.lastUpdated).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,ON.jsx)("button",{className:"absolute top-1 right-1 text-gray-400 hover:text-indigo-500 transition-colors",onClick:t=>{t.stopPropagation(),x(e)},children:(0,ON.jsx)(g5,{className:"w-4 h-4"})})]},e.id)))})}),(0,ON.jsx)("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:(0,ON.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("div",{className:"w-3 h-3 bg-gray-50 border-2 border-gray-200 rounded-full mr-2"}),(0,ON.jsx)("span",{children:"Empty"})]}),(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("div",{className:"w-3 h-3 bg-blue-50 border-2 border-blue-300 rounded-full mr-2"}),(0,ON.jsx)("span",{children:"Seated (Weight Detected)"})]}),(0,ON.jsxs)("div",{className:"flex items-center",children:[(0,ON.jsx)("div",{className:"w-3 h-3 bg-green-50 border-2 border-green-300 rounded-full mr-2"}),(0,ON.jsx)("span",{children:"Attendance Confirmed (RFID)"})]})]})}),(0,ON.jsx)(M0,{children:m&&u&&(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,ON.jsxs)(CI.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,ON.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Edit Seat ",u.position.row+1,"-",u.position.col+1]}),(0,ON.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:(0,ON.jsx)(X1,{className:"w-6 h-6"})})]}),(0,ON.jsxs)("div",{className:"p-6",children:[(0,ON.jsxs)("div",{className:"mb-4",children:[(0,ON.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Student"}),(0,ON.jsx)("div",{className:"relative",children:(0,ON.jsx)("input",{type:"text",placeholder:"Search students...",value:g,onChange:e=>y(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})})]}),(0,ON.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-lg mb-4",children:(0,ON.jsxs)("div",{className:"divide-y divide-gray-200",children:[(0,ON.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-gray-50 "+(h?"":"bg-indigo-50"),onClick:()=>f(""),children:[(0,ON.jsx)("div",{className:"font-medium",children:"Unassigned"}),(0,ON.jsx)("div",{className:"text-sm text-gray-500",children:"Remove student from seat"})]}),w.map((e=>(0,ON.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-gray-50 "+(h===e.id?"bg-indigo-50":""),onClick:()=>f(e.id),children:[(0,ON.jsx)("div",{className:"font-medium",children:e.fullName}),(0,ON.jsxs)("div",{className:"text-sm text-gray-500",children:[e.idNumber," \u2022 ",e.major]})]},e.id)))]})}),(0,ON.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,ON.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,ON.jsx)("button",{onClick:async()=>{if(i&&u)try{const e=i.seats.map((e=>e.id===u.id?{...e,studentId:h||void 0}:e));await Cg(Np(IN,"rooms",t),{seats:e}),s({...i,seats:e}),p(!1),S1.success("Seat assignment updated")}catch(Zg){console.error("Error updating seat assignment:",Zg),S1.error("Failed to update seat assignment")}},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Save Assignment"})]})]})]})})})]})},v5=()=>{var e,t,n;const{currentUser:i}=MN(),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)([]),[p,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)(""),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)([]),[N,j]=(0,r.useState)({fullName:(null===i||void 0===i?void 0:i.displayName)||"Instructor",department:"Unknown",role:"instructor"}),[S,E]=(0,r.useState)({}),[C,k]=(0,r.useState)({}),[T,I]=(0,r.useState)("weekly");(0,r.useEffect)((()=>{if(null===i||void 0===i||!i.uid)return;const e=Gw(AN,`Instructors/${i.uid}/Profile`),t=n_(e,(e=>{const t=e.val();t&&j({fullName:t.fullName||i.displayName||"Instructor",department:t.department||"Unknown",role:t.role||"instructor"})}),(e=>{console.error("Error fetching instructor:",e),G2.error("Failed to load instructor data")}));return()=>r_(e,"value",t)}),[i]),(0,r.useEffect)((()=>{if(null===i||void 0===i||!i.uid)return;(async()=>{try{g(!0);const e=lg(_p(IN,"sections"),ug("instructorId","==",i.uid)),t=(await Sg(e)).docs.map((e=>({id:e.id,name:e.data().name||"",students:e.data().students||[],instructorId:e.data().instructorId||"",room:e.data().room||"",subjectId:e.data().subjectId||""})));a(t),t.length>0&&u(t[0].id)}catch(Zg){console.error("Error fetching sections:",Zg),G2.error("Failed to load sections")}finally{g(!1)}})()}),[i]),(0,r.useEffect)((()=>{(async()=>{try{const e=_p(IN,"subjects"),t=(await Sg(e)).docs.map((e=>({id:e.id,name:e.data().name||"",code:e.data().code||""})));l(t)}catch(Zg){console.error("Error fetching subjects:",Zg),G2.error("Failed to load subjects")}})()}),[]),(0,r.useEffect)((()=>{if(null===i||void 0===i||!i.uid)return;const e=n_(Gw(AN,"Students"),(e=>{const t=e.val();if(console.log("Raw RTDB Data:",t),t){const e={};Object.entries(t).forEach((t=>{let[n,r]=t;if(console.log("Processing student:",n,r),r.Attendance){const t=Object.keys(r.Attendance)[0],i=r.Attendance[t];i&&i.personalInfo&&(e[n]={id:n,fullName:i.personalInfo.fullName,idNumber:i.personalInfo.idNumber,email:i.personalInfo.email,mobileNumber:i.personalInfo.mobileNumber,department:i.personalInfo.department,role:i.personalInfo.role,attendance:{}},Object.entries(r.Attendance).forEach((t=>{var r,i,s,a,o,l,c,u,d,h,f,m,p,g,y,v,b,x,w,_,N,j,S,E,C,k,T,I,A,O,P,M,R,D,L,F,U;let[B,V]=t;e[n].attendance[B]={scheduleMatched:{day:(null===(r=V.allSchedules)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.day)||"N/A",endTime:(null===(s=V.allSchedules)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.endTime)||"N/A",instructorName:(null===(o=V.allSchedules)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.instructorName)||"N/A",roomName:(null===(c=V.allSchedules)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.roomName)||"N/A",section:(null===(d=V.allSchedules)||void 0===d||null===(h=d[0])||void 0===h?void 0:h.section)||"N/A",sectionId:(null===(f=V.allSchedules)||void 0===f||null===(m=f[0])||void 0===m?void 0:m.sectionId)||"N/A",startTime:(null===(p=V.allSchedules)||void 0===p||null===(g=p[0])||void 0===g?void 0:g.startTime)||"N/A",subject:(null===(y=V.allSchedules)||void 0===y||null===(v=y[0])||void 0===v?void 0:v.subject)||"N/A",subjectCode:(null===(b=V.allSchedules)||void 0===b||null===(x=b[0])||void 0===x?void 0:x.subjectCode)||"N/A"},attendanceInfo:{action:(null===(w=V.attendanceInfo)||void 0===w?void 0:w.action)||"N/A",assignedSensorId:(null===(_=V.attendanceInfo)||void 0===_?void 0:_.assignedSensorId)||0,date:(null===(N=V.attendanceInfo)||void 0===N?void 0:N.date)||"N/A",sensor:(null===(j=V.attendanceInfo)||void 0===j?void 0:j.sensor)||"N/A",sensorConfirmed:(null===(S=V.attendanceInfo)||void 0===S?void 0:S.sensorConfirmed)||!1,sessionId:(null===(E=V.attendanceInfo)||void 0===E?void 0:E.sessionId)||"N/A",status:(null===(C=V.attendanceInfo)||void 0===C||null===(k=C.status)||void 0===k?void 0:k.toLowerCase())||"absent",timeIn:(null===(T=V.attendanceInfo)||void 0===T?void 0:T.timeIn)||"N/A",timeOut:(null===(I=V.attendanceInfo)||void 0===I?void 0:I.timeOut)||"N/A",timestamp:(null===(A=V.attendanceInfo)||void 0===A?void 0:A.timestamp)||"N/A",weight:(null===(O=V.attendanceInfo)||void 0===O?void 0:O.weight)||0,weightUnit:(null===(P=V.attendanceInfo)||void 0===P?void 0:P.weightUnit)||"N/A"},personalInfo:{department:(null===(M=V.personalInfo)||void 0===M?void 0:M.department)||"N/A",email:(null===(R=V.personalInfo)||void 0===R?void 0:R.email)||"N/A",fullName:(null===(D=V.personalInfo)||void 0===D?void 0:D.fullName)||"N/A",idNumber:(null===(L=V.personalInfo)||void 0===L?void 0:L.idNumber)||"N/A",mobileNumber:(null===(F=V.personalInfo)||void 0===F?void 0:F.mobileNumber)||"N/A",role:(null===(U=V.personalInfo)||void 0===U?void 0:U.role)||"N/A"}}})))}})),console.log("Processed Student Data:",e),k(e)}}),(e=>{console.error("Error fetching student data:",e),G2.error("Failed to load student data")}));return()=>{e()}}),[i]),(0,r.useEffect)((()=>{if(null===i||void 0===i||!i.uid)return;const e=n_(Gw(AN,"Students"),(e=>{const t=e.val();if(t){const e={};Object.entries(t).forEach((t=>{let[n,r]=t;r.Attendance&&Object.entries(r.Attendance).forEach((t=>{var n,r,i,s,a,o,l,c,u,d,h,f,m,p,g,y,v,b,x,w,_,N,j,S,E,C,k,T,I,A,O,P,M,R,D,L,F;let[U,B]=t;e[U]={scheduleMatched:{day:(null===(n=B.allSchedules)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.day)||"N/A",endTime:(null===(i=B.allSchedules)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.endTime)||"N/A",instructorName:(null===(a=B.allSchedules)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.instructorName)||"N/A",roomName:(null===(l=B.allSchedules)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.roomName)||"N/A",section:(null===(u=B.allSchedules)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.section)||"N/A",sectionId:(null===(h=B.allSchedules)||void 0===h||null===(f=h[0])||void 0===f?void 0:f.sectionId)||"N/A",startTime:(null===(m=B.allSchedules)||void 0===m||null===(p=m[0])||void 0===p?void 0:p.startTime)||"N/A",subject:(null===(g=B.allSchedules)||void 0===g||null===(y=g[0])||void 0===y?void 0:y.subject)||"N/A",subjectCode:(null===(v=B.allSchedules)||void 0===v||null===(b=v[0])||void 0===b?void 0:b.subjectCode)||"N/A"},attendanceInfo:{action:(null===(x=B.attendanceInfo)||void 0===x?void 0:x.action)||"N/A",assignedSensorId:(null===(w=B.attendanceInfo)||void 0===w?void 0:w.assignedSensorId)||0,date:(null===(_=B.attendanceInfo)||void 0===_?void 0:_.date)||"N/A",sensor:(null===(N=B.attendanceInfo)||void 0===N?void 0:N.sensor)||"N/A",sensorConfirmed:(null===(j=B.attendanceInfo)||void 0===j?void 0:j.sensorConfirmed)||!1,sessionId:(null===(S=B.attendanceInfo)||void 0===S?void 0:S.sessionId)||"N/A",status:(null===(E=B.attendanceInfo)||void 0===E||null===(C=E.status)||void 0===C?void 0:C.toLowerCase())||"absent",timeIn:(null===(k=B.attendanceInfo)||void 0===k?void 0:k.timeIn)||"N/A",timeOut:(null===(T=B.attendanceInfo)||void 0===T?void 0:T.timeOut)||"N/A",timestamp:(null===(I=B.attendanceInfo)||void 0===I?void 0:I.timestamp)||"N/A",weight:(null===(A=B.attendanceInfo)||void 0===A?void 0:A.weight)||0,weightUnit:(null===(O=B.attendanceInfo)||void 0===O?void 0:O.weightUnit)||"N/A"},personalInfo:{department:(null===(P=B.personalInfo)||void 0===P?void 0:P.department)||"N/A",email:(null===(M=B.personalInfo)||void 0===M?void 0:M.email)||"N/A",fullName:(null===(R=B.personalInfo)||void 0===R?void 0:R.fullName)||"N/A",idNumber:(null===(D=B.personalInfo)||void 0===D?void 0:D.idNumber)||"N/A",mobileNumber:(null===(L=B.personalInfo)||void 0===L?void 0:L.mobileNumber)||"N/A",role:(null===(F=B.personalInfo)||void 0===F?void 0:F.role)||"N/A"}}}))})),E(e)}}),(e=>{console.error("Error fetching RTDB data:",e),G2.error("Failed to load attendance records")}));return()=>{e()}}),[i]),(0,r.useEffect)((()=>{if(null===i||void 0===i||!i.uid)return;const e=Gw(AN,`Instructors/${i.uid}/ClassStatus/schedule`),t=n_(e,(e=>{const t=e.val();var n,r;t?_([{day:t.day||"",startTime:t.startTime||"",endTime:t.endTime||"",roomName:"string"===typeof t.roomName?t.roomName:(null===(n=t.roomName)||void 0===n?void 0:n.name)||"",sectionId:(null===(r=s.find((e=>e.name===t.section)))||void 0===r?void 0:r.id)||"",subjectCode:t.subjectCode||""}]):_([])}),(e=>{console.error("Error fetching schedules:",e),G2.error("Failed to load schedules")}));return()=>r_(e,"value",t)}),[i,s]);const A=e=>{if(console.log("Getting summary for student:",e),!e.attendance)return console.log("No attendance data for student"),{weekly:{present:0,late:0,absent:0},monthly:{present:0,late:0,absent:0},recentRecords:[]};const t=Object.entries(e.attendance).map((e=>{var t,n,r,i,s,a,o,l,c,u,d,h,f,m,p,g,y,v,b,x,w,_,N,j,S,E,C,k;let[T,I]=e;return console.log("Processing record:",T,I),[T,{scheduleMatched:{day:(null===(t=I.scheduleMatched)||void 0===t?void 0:t.day)||"N/A",endTime:(null===(n=I.scheduleMatched)||void 0===n?void 0:n.endTime)||"N/A",instructorName:(null===(r=I.scheduleMatched)||void 0===r?void 0:r.instructorName)||"N/A",roomName:(null===(i=I.scheduleMatched)||void 0===i?void 0:i.roomName)||"N/A",section:(null===(s=I.scheduleMatched)||void 0===s?void 0:s.section)||"N/A",sectionId:(null===(a=I.scheduleMatched)||void 0===a?void 0:a.sectionId)||"N/A",startTime:(null===(o=I.scheduleMatched)||void 0===o?void 0:o.startTime)||"N/A",subject:(null===(l=I.scheduleMatched)||void 0===l?void 0:l.subject)||"N/A",subjectCode:(null===(c=I.scheduleMatched)||void 0===c?void 0:c.subjectCode)||"N/A"},attendanceInfo:{action:(null===(u=I.attendanceInfo)||void 0===u?void 0:u.action)||"N/A",assignedSensorId:(null===(d=I.attendanceInfo)||void 0===d?void 0:d.assignedSensorId)||0,date:(null===(h=I.attendanceInfo)||void 0===h?void 0:h.date)||"N/A",sensor:(null===(f=I.attendanceInfo)||void 0===f?void 0:f.sensor)||"N/A",sensorConfirmed:(null===(m=I.attendanceInfo)||void 0===m?void 0:m.sensorConfirmed)||!1,sessionId:(null===(p=I.attendanceInfo)||void 0===p?void 0:p.sessionId)||"N/A",status:(null===(g=I.attendanceInfo)||void 0===g||null===(y=g.status)||void 0===y?void 0:y.toLowerCase())||"absent",timeIn:(null===(v=I.attendanceInfo)||void 0===v?void 0:v.timeIn)||"N/A",timeOut:(null===(b=I.attendanceInfo)||void 0===b?void 0:b.timeOut)||"N/A",timestamp:(null===(x=I.attendanceInfo)||void 0===x?void 0:x.timestamp)||"N/A",weight:(null===(w=I.attendanceInfo)||void 0===w?void 0:w.weight)||0,weightUnit:(null===(_=I.attendanceInfo)||void 0===_?void 0:_.weightUnit)||"N/A"},personalInfo:{department:(null===(N=I.personalInfo)||void 0===N?void 0:N.department)||"N/A",email:(null===(j=I.personalInfo)||void 0===j?void 0:j.email)||"N/A",fullName:(null===(S=I.personalInfo)||void 0===S?void 0:S.fullName)||"N/A",idNumber:(null===(E=I.personalInfo)||void 0===E?void 0:E.idNumber)||"N/A",mobileNumber:(null===(C=I.personalInfo)||void 0===C?void 0:C.mobileNumber)||"N/A",role:(null===(k=I.personalInfo)||void 0===k?void 0:k.role)||"N/A"}}]}));console.log("Processed records:",t);const n=t.sort(((e,t)=>{var n,r;const i=new Date((null===(n=e[1].attendanceInfo)||void 0===n?void 0:n.timestamp)||"");return new Date((null===(r=t[1].attendanceInfo)||void 0===r?void 0:r.timestamp)||"").getTime()-i.getTime()})),r=n.filter((e=>{var t;let[n,r]=e;const i=new Date((null===(t=r.attendanceInfo)||void 0===t?void 0:t.timestamp)||""),s=new Date;return s.setDate(s.getDate()-7),i>=s})),i=n.filter((e=>{var t;let[n,r]=e;const i=new Date((null===(t=r.attendanceInfo)||void 0===t?void 0:t.timestamp)||""),s=new Date;return s.setMonth(s.getMonth()-1),i>=s})),s={weekly:{present:r.filter((e=>{var t;let[n,r]=e;return"present"===(null===(t=r.attendanceInfo)||void 0===t?void 0:t.status)})).length,late:r.filter((e=>{var t;let[n,r]=e;return"late"===(null===(t=r.attendanceInfo)||void 0===t?void 0:t.status)})).length,absent:r.filter((e=>{var t;let[n,r]=e;return"absent"===(null===(t=r.attendanceInfo)||void 0===t?void 0:t.status)})).length},monthly:{present:i.filter((e=>{var t;let[n,r]=e;return"present"===(null===(t=r.attendanceInfo)||void 0===t?void 0:t.status)})).length,late:i.filter((e=>{var t;let[n,r]=e;return"late"===(null===(t=r.attendanceInfo)||void 0===t?void 0:t.status)})).length,absent:i.filter((e=>{var t;let[n,r]=e;return"absent"===(null===(t=r.attendanceInfo)||void 0===t?void 0:t.status)})).length},recentRecords:n.slice(0,5).map((e=>{let[t,n]=e;return n}))};return console.log("Generated summary:",s),s},O=(0,r.useMemo)((()=>{const e=s.find((e=>e.id===c));return e?Object.entries(C).filter((e=>{let[t,n]=e;return!y||n.fullName.toLowerCase().includes(y.toLowerCase())})).map((e=>{let[t,n]=e;return{id:t,fullName:n.fullName,idNumber:n.idNumber,email:n.email,mobileNumber:n.mobileNumber,department:n.department,role:n.role,attendance:n.attendance}})):[]}),[C,s,c,y]),P=(0,r.useMemo)((()=>{const e=s.find((e=>e.id===c)),t=(null===e||void 0===e?void 0:e.students.length)||0,n=f.filter((e=>{const t=new Date(e.date),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],r=w.find((t=>{var r;return t.sectionId===e.sectionId&&t.day===n&&t.subjectCode===(null===(r=o.find((t=>t.id===e.subjectId)))||void 0===r?void 0:r.code)}));if(!r||!r.endTime)return!1;const[i,s]=r.endTime.split(":").map(Number),a=new Date(t);a.setHours(i,s,0,0);return new Date>=a})),r=n.filter((e=>"present"===e.status)).length,i=n.filter((e=>"late"===e.status)).length,a=n.filter((e=>"absent"===e.status)).length;return{totalStudents:t,present:r,late:i,absent:a,attendanceRate:t?(r+i)/(r+i+a||1)*100:0}}),[f,s,c,w,o]),M=e=>{try{if(e.includes("_")){const t=e.split("_");if(t.length>=4){const e=parseInt(t[0]),n=parseInt(t[1])-1,r=parseInt(t[2]),i=t[3],s=parseInt(i.substring(0,2)),a=parseInt(i.substring(2,4)),o=parseInt(i.substring(4,6)||"0");return new Date(e,n,r,s,a,o).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}const[t,n]=e.split("_"),[r,i,s]=t.split("_").map(Number),[a,o,l]=n.split("_").map(Number);return new Date(r,i-1,s,a,o,l).toLocaleString()}catch(Zg){return console.error("Error formatting timestamp:",Zg),"Invalid Date"}};return p&&!s.length?(0,ON.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-indigo-600"})}):(0,ON.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ON.jsx)(uA,{user:{role:N.role,fullName:N.fullName,department:N.department},classStatus:{status:"Attendance Overview",color:"bg-indigo-600 text-white",details:(null===(e=s.find((e=>e.id===c)))||void 0===e?void 0:e.name)||"No section selected",fullName:N.fullName}}),(0,ON.jsx)("main",{className:"container mx-auto px-4 py-8 mt-16",children:(0,ON.jsxs)(CI.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,ON.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,ON.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Management"}),(0,ON.jsx)("p",{className:"text-gray-600",children:"Track student attendance summaries"})]}),(0,ON.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"border rounded-lg px-4 py-2 bg-white focus:ring-2 focus:ring-indigo-500 w-full sm:w-auto",children:[(0,ON.jsx)("option",{value:"",children:"Select Section"}),s.map((e=>{const t=o.find((t=>t.id===e.subjectId));return(0,ON.jsxs)("option",{value:e.id,children:[e.name," ",t?`(${t.name})`:""," ",e.room?`(Room ${e.room})`:""]},e.id)}))]})]})}),c&&(0,ON.jsxs)(ON.Fragment,{children:[(0,ON.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Attendance Rate",value:`${P.attendanceRate.toFixed(1)}%`,icon:bO,color:"text-blue-600"}].map((e=>(0,ON.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm text-gray-600",children:e.label}),(0,ON.jsx)("p",{className:"text-xl font-semibold",children:e.value})]}),(0,ON.jsx)(e.icon,{className:`w-8 h-8 ${e.color}`})]})},e.label)))}),(0,ON.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 flex flex-col sm:flex-row gap-4",children:[(0,ON.jsxs)("div",{className:"relative flex-1",children:[(0,ON.jsx)(j2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,ON.jsx)("input",{type:"text",placeholder:"Search students...",value:y,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,ON.jsxs)("button",{onClick:()=>{const e=s.find((e=>e.id===c)),t=o.find((t=>t.id===(null===e||void 0===e?void 0:e.subjectId))),n=[["Student Name","ID Number","Section","Subject","Weekly Present","Weekly Late","Weekly Absent","Monthly Present","Monthly Late","Monthly Absent"],...O.map((n=>{const r=A(n);return[n.fullName,n.idNumber,(null===e||void 0===e?void 0:e.name)||"N/A",(null===t||void 0===t?void 0:t.name)||"N/A",r.weekly.present,r.weekly.late,r.weekly.absent,r.monthly.present,r.monthly.late,r.monthly.absent]}))].map((e=>e.join(","))).join("\n"),r=new Blob([n],{type:"text/csv"}),i=window.URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`attendance_${c||"summary"}_${(new Date).toLocaleDateString().replace(/\//g,"-")}.csv`,a.click(),window.URL.revokeObjectURL(i)},className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:[(0,ON.jsx)(W1,{className:"w-5 h-5"}),"Export CSV"]})]}),(0,ON.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,ON.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Student Attendance Summaries"}),0===O.length?(0,ON.jsx)("p",{className:"text-center py-8 text-gray-500",children:"No students found for this section"}):(0,ON.jsx)("div",{className:"grid grid-cols-1 gap-6",children:O.map((e=>{const t=A(e);return(0,ON.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ON.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 mb-6",children:[(0,ON.jsx)("div",{className:"w-full md:w-auto",children:(0,ON.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-xl p-6 shadow-sm",children:[(0,ON.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,ON.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,ON.jsx)("span",{className:"text-2xl font-bold text-indigo-600",children:e.fullName.split(" ").map((e=>e[0])).join("")})}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:e.fullName}),(0,ON.jsxs)("p",{className:"text-indigo-600 font-medium",children:["ID: ",e.idNumber]})]})]}),(0,ON.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ON.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ON.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,ON.jsx)("p",{className:"text-gray-600",children:e.email})]}),e.mobileNumber&&(0,ON.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ON.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),(0,ON.jsx)("p",{className:"text-gray-600",children:e.mobileNumber})]}),e.department&&(0,ON.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ON.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,ON.jsx)("p",{className:"text-gray-600",children:e.department})]}),e.role&&(0,ON.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ON.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,ON.jsx)("p",{className:"text-gray-600 capitalize",children:e.role})]})]})]})}),(0,ON.jsxs)("div",{className:"text-right",children:[(0,ON.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[t.weekly.present+t.weekly.late+t.weekly.absent," times this week"]}),(0,ON.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 ml-2",children:[t.monthly.present+t.monthly.late+t.monthly.absent," times this month"]})]})]}),(0,ON.jsxs)("div",{className:"mb-6",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ON.jsx)("h4",{className:"text-lg font-medium text-gray-700",children:"Attendance Summary"}),(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("span",{className:"text-sm text-gray-500",children:"View:"}),(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsxs)("select",{value:T,onChange:e=>I(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-md py-1.5 pl-3 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,ON.jsx)("option",{value:"weekly",children:"Weekly"}),(0,ON.jsx)("option",{value:"monthly",children:"Monthly"})]}),(0,ON.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500",children:(0,ON.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ON.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})]}),"weekly"===T?(0,ON.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ON.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl shadow-sm border border-green-200",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Present"}),(0,ON.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:t.weekly.present})]}),(0,ON.jsx)("div",{className:"bg-green-200 rounded-full p-3",children:(0,ON.jsx)(G1,{className:"w-6 h-6 text-green-600"})})]}),(0,ON.jsx)("div",{className:"mt-3",children:(0,ON.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2",children:(0,ON.jsx)("div",{className:"bg-green-500 rounded-full h-2",style:{width:(t.weekly.present+t.weekly.late+t.weekly.absent>0?t.weekly.present/(t.weekly.present+t.weekly.late+t.weekly.absent)*100:0)+"%"}})})})]}),(0,ON.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-xl shadow-sm border border-yellow-200",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Late"}),(0,ON.jsx)("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:t.weekly.late})]}),(0,ON.jsx)("div",{className:"bg-yellow-200 rounded-full p-3",children:(0,ON.jsx)(WO,{className:"w-6 h-6 text-yellow-600"})})]}),(0,ON.jsx)("div",{className:"mt-3",children:(0,ON.jsx)("div",{className:"w-full bg-yellow-200 rounded-full h-2",children:(0,ON.jsx)("div",{className:"bg-yellow-500 rounded-full h-2",style:{width:(t.weekly.present+t.weekly.late+t.weekly.absent>0?t.weekly.late/(t.weekly.present+t.weekly.late+t.weekly.absent)*100:0)+"%"}})})})]}),(0,ON.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-xl shadow-sm border border-red-200",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Absent"}),(0,ON.jsx)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:t.weekly.absent})]}),(0,ON.jsx)("div",{className:"bg-red-200 rounded-full p-3",children:(0,ON.jsx)(X1,{className:"w-6 h-6 text-red-600"})})]}),(0,ON.jsx)("div",{className:"mt-3",children:(0,ON.jsx)("div",{className:"w-full bg-red-200 rounded-full h-2",children:(0,ON.jsx)("div",{className:"bg-red-500 rounded-full h-2",style:{width:(t.weekly.present+t.weekly.late+t.weekly.absent>0?t.weekly.absent/(t.weekly.present+t.weekly.late+t.weekly.absent)*100:0)+"%"}})})})]})]}):(0,ON.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ON.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl shadow-sm border border-green-200",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Present"}),(0,ON.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:t.monthly.present})]}),(0,ON.jsx)("div",{className:"bg-green-200 rounded-full p-3",children:(0,ON.jsx)(G1,{className:"w-6 h-6 text-green-600"})})]}),(0,ON.jsx)("div",{className:"mt-3",children:(0,ON.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2",children:(0,ON.jsx)("div",{className:"bg-green-500 rounded-full h-2",style:{width:(t.monthly.present+t.monthly.late+t.monthly.absent>0?t.monthly.present/(t.monthly.present+t.monthly.late+t.monthly.absent)*100:0)+"%"}})})})]}),(0,ON.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-xl shadow-sm border border-yellow-200",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Late"}),(0,ON.jsx)("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:t.monthly.late})]}),(0,ON.jsx)("div",{className:"bg-yellow-200 rounded-full p-3",children:(0,ON.jsx)(WO,{className:"w-6 h-6 text-yellow-600"})})]}),(0,ON.jsx)("div",{className:"mt-3",children:(0,ON.jsx)("div",{className:"w-full bg-yellow-200 rounded-full h-2",children:(0,ON.jsx)("div",{className:"bg-yellow-500 rounded-full h-2",style:{width:(t.monthly.present+t.monthly.late+t.monthly.absent>0?t.monthly.late/(t.monthly.present+t.monthly.late+t.monthly.absent)*100:0)+"%"}})})})]}),(0,ON.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-xl shadow-sm border border-red-200",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Absent"}),(0,ON.jsx)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:t.monthly.absent})]}),(0,ON.jsx)("div",{className:"bg-red-200 rounded-full p-3",children:(0,ON.jsx)(X1,{className:"w-6 h-6 text-red-600"})})]}),(0,ON.jsx)("div",{className:"mt-3",children:(0,ON.jsx)("div",{className:"w-full bg-red-200 rounded-full h-2",children:(0,ON.jsx)("div",{className:"bg-red-500 rounded-full h-2",style:{width:(t.monthly.present+t.monthly.late+t.monthly.absent>0?t.monthly.absent/(t.monthly.present+t.monthly.late+t.monthly.absent)*100:0)+"%"}})})})]})]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-4",children:"Recent Attendance Records"}),(0,ON.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:(0,ON.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ON.jsx)("thead",{className:"bg-gray-50",children:(0,ON.jsxs)("tr",{children:[(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time In"}),(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Out"}),(0,ON.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sensor"})]})}),(0,ON.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.entries(e.attendance||{}).length>0?Object.entries(e.attendance||{}).filter((e=>{let[t,n]=e;return n&&n.scheduleMatched&&n.attendanceInfo})).sort(((e,t)=>{var n,r;const i=new Date((null===(n=e[1].attendanceInfo)||void 0===n?void 0:n.timestamp)||"");return new Date((null===(r=t[1].attendanceInfo)||void 0===r?void 0:r.timestamp)||"").getTime()-i.getTime()})).map((e=>{var t,n,r,i,s,a,o,l,c,u,d,h;let[f,m]=e;return(0,ON.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:null!==(t=m.attendanceInfo)&&void 0!==t&&t.date?new Date(m.attendanceInfo.date.replace(/_/g,"-")).toLocaleDateString():"N/A"}),(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:null!==(n=m.attendanceInfo)&&void 0!==n&&n.timestamp?M(m.attendanceInfo.timestamp):"N/A"}),(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,ON.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("present"===(null===(r=m.attendanceInfo)||void 0===r||null===(i=r.status)||void 0===i?void 0:i.toLowerCase())?"bg-green-100 text-green-800":"late"===(null===(s=m.attendanceInfo)||void 0===s||null===(a=s.status)||void 0===a?void 0:a.toLowerCase())?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:(null===(o=m.attendanceInfo)||void 0===o?void 0:o.status)||"absent"})}),(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(null===(l=m.scheduleMatched)||void 0===l?void 0:l.subjectCode)||"N/A"}),(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(null===(c=m.scheduleMatched)||void 0===c?void 0:c.roomName)||"N/A"}),(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:null!==(u=m.attendanceInfo)&&void 0!==u&&u.timeIn?M(m.attendanceInfo.timeIn):"N/A"}),(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:null!==(d=m.attendanceInfo)&&void 0!==d&&d.timeOut?M(m.attendanceInfo.timeOut):"N/A"}),(0,ON.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(null===(h=m.attendanceInfo)||void 0===h?void 0:h.sensor)||"N/A"})]},f)})):(0,ON.jsx)("tr",{children:(0,ON.jsx)("td",{colSpan:8,className:"px-4 py-3 text-center text-sm text-gray-500",children:"No attendance records found"})})})]})})]})]},e.id)}))})]}),(null===(t=s.find((e=>e.id===c)))||void 0===t?void 0:t.room)&&(0,ON.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,ON.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Classroom Layout"}),(0,ON.jsx)(y5,{roomId:(null===(n=s.find((e=>e.id===c)))||void 0===n?void 0:n.room)||"",sectionId:c})]})]})]})})]})},b5=()=>{const{currentUser:e}=MN(),t=te(),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{if(e)try{l(!0);const n=lg(_p(IN,"students"),ug("uid","==",e.uid)),r=await Sg(n);if(!r.empty){var t;const e=r.docs[0].data();u({uid:e.uid,fullName:e.fullName,department:e.department,section:e.section,enrolledSubjects:e.enrolledSubjects||[]}),a((null===(t=e.enrolledSubjects)||void 0===t?void 0:t.map((e=>`${e.subjectId}-${e.sectionId}`)))||[])}const s=lg(_p(IN,"subjects"),ug("status","==","active")),o=(await Sg(s)).docs.map((e=>{var t;return{id:e.id,code:e.data().code||"",credits:e.data().credits||0,department:e.data().department||"",details:e.data().details||"",name:e.data().name||"",status:e.data().status||"inactive",sections:(null===(t=e.data().sections)||void 0===t?void 0:t.map((e=>({id:e.id||"",name:e.name||"",code:e.code||"",instructorId:e.instructorId||"",instructorName:e.instructorName||"",instructorRfidUid:e.instructorRfidUid||"",schedules:e.schedules||[],capacity:e.capacity||0,currentEnrollment:e.currentEnrollment||0}))))||[]}})),c=[];o.forEach((e=>{e.sections.forEach((t=>{c.push({subject:e,section:t})}))})),i(c)}catch(Zg){console.error("Error fetching data:",Zg)}finally{l(!1)}})()}),[e]);return o?(0,ON.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,ON.jsx)(CI.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full"})}):c?(0,ON.jsxs)("div",{className:"min-h-screen bg-gray-900 text-gray-100",children:[(0,ON.jsx)(gP,{student:c}),(0,ON.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-10",children:[(0,ON.jsx)("h1",{className:"text-4xl font-extrabold text-white tracking-tight",children:"Select Your Subjects"}),(0,ON.jsx)("p",{className:"mt-2 text-lg text-gray-300",children:"Choose the subjects you want to enroll in for this semester. Your selections will be saved to your dashboard."})]}),n.length>0?(0,ON.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(((e,t)=>{let{subject:r,section:i}=e;return(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-6 rounded-3xl shadow-2xl border transition-all duration-300 hover:shadow-[0_0_20px_rgba(59,130,246,0.3)] "+(s.includes(`${r.id}-${i.id}`)?"bg-gray-700/50 border-blue-400/30":"bg-gray-800 border-gray-700"),children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ON.jsx)("h2",{className:"text-xl font-semibold text-white",children:r.name}),(0,ON.jsx)(CI.div,{whileHover:{scale:1.1},className:"p-2 rounded-full "+(s.includes(`${r.id}-${i.id}`)?"bg-blue-500/20":"bg-gray-600/20"),children:(0,ON.jsx)("svg",{className:"h-5 w-5 "+(s.includes(`${r.id}-${i.id}`)?"text-blue-400":"text-gray-400"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,ON.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Code: ",r.code]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Department: ",r.department]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Credits: ",r.credits]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Details: ",r.details]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Section: ",i.name]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Section Code: ",i.code]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Instructor: ",i.instructorName]}),(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:["Enrollment: ",i.currentEnrollment,"/",i.capacity]}),(0,ON.jsxs)("div",{className:"mt-4",children:[(0,ON.jsx)("p",{className:"text-sm font-medium text-gray-300",children:"Schedules:"}),i.schedules&&i.schedules.length>0?i.schedules.map(((e,t)=>(0,ON.jsxs)("p",{className:"text-sm text-gray-400",children:[e.day,": ",e.startTime," - ",e.endTime," (Room: ",e.roomName,")"]},t))):(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:"No schedules available"})]}),(0,ON.jsx)(CI.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{const e=`${r.id}-${i.id}`,t=s.includes(e),o=n.find((e=>e.subject.id===r.id&&e.section.id===i.id));!t&&o&&o.section.currentEnrollment>=o.section.capacity?alert(`The section ${i.name} for ${r.name} is already full.`):((e,t)=>{const n=`${e}-${t}`;a((e=>e.includes(n)?e.filter((e=>e!==n)):[...e,n]))})(r.id,i.id)},className:"mt-6 w-full px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+(s.includes(`${r.id}-${i.id}`)?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:s.includes(`${r.id}-${i.id}`)?"Deselect":"Select"})]},`${r.id}-${i.id}`)}))}):(0,ON.jsx)("p",{className:"text-gray-400 text-center text-lg",children:"No subjects available."}),(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-10 flex justify-end gap-4",children:[(0,ON.jsx)(CI.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/student/dashboard"),className:"px-6 py-3 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-all duration-200 font-medium shadow-md",children:"Cancel"}),(0,ON.jsx)(CI.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:async()=>{if(e&&c)try{const r=lg(_p(IN,"students"),ug("uid","==",e.uid)),i=await Sg(r);if(!i.empty){const e=i.docs[0],r=n.filter((e=>s.includes(`${e.subject.id}-${e.section.id}`))).map((e=>({subjectId:e.subject.id,code:e.subject.code,name:e.subject.name,department:e.subject.department,credits:e.subject.credits,details:e.subject.details,sectionId:e.section.id,sectionName:e.section.name,instructorId:e.section.instructorId,instructorName:e.section.instructorName,schedules:e.section.schedules||[]})));await Cg(e.ref,{enrolledSubjects:r});const a={...e.data(),enrolledSubjects:r};localStorage.setItem("userData",JSON.stringify(a));for(const t of r){const e=Np(IN,"sections",t.sectionId),n=await Sg(lg(_p(IN,"sections"),ug("__name__","==",t.sectionId)));if(!n.empty){const t=n.docs[0].data().students||[];t.includes(c.fullName)||await Cg(e,{students:[...t,c.fullName]})}const r=Np(IN,"subjects",t.subjectId),i=await Sg(lg(_p(IN,"subjects"),ug("__name__","==",t.subjectId)));if(!i.empty){const e=i.docs[0],n=(e.data().sections||[]).map((e=>e.id===t.sectionId?{...e,currentEnrollment:(e.currentEnrollment||0)+1}:e));await Cg(r,{sections:n})}const s=lg(_p(IN,"teachers"),ug("__name__","==",t.instructorId)),a=await Sg(s);for(const o of a.docs){const e=Np(_p(o.ref,"assignedSubjects"),t.subjectId),n=await Sg(lg(_p(o.ref,"assignedSubjects"),ug("subjectId","==",t.subjectId)));if(n.empty)await Eg(e,{subjectId:t.subjectId,subjectName:t.name,sectionId:t.sectionId,sectionName:t.sectionName,studentNames:[c.fullName]});else{const e=n.docs[0],t=e.data().studentNames||[];t.includes(c.fullName)||await Cg(e.ref,{studentNames:[...t,c.fullName]})}}}t("/student/dashboard")}}catch(Zg){console.error("Error saving selection:",Zg)}},disabled:0===s.length,className:"px-6 py-3 rounded-lg font-medium shadow-md transition-all duration-200 "+(s.length>0?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:"Save Selection"})]})]})]}):(0,ON.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-gray-400",children:"No student data found."})};function x5(e){let{isOpen:t,onClose:n,title:r,children:i}=e;return t?(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:n,children:(0,ON.jsxs)(CI.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-lg p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ON.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:r}),(0,ON.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\u2715"})]}),i]})}):null}function w5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const _5=r.forwardRef(w5);function N5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const j5=r.forwardRef(N5),S5={"Computer Science":"bg-blue-100 text-blue-800",Mathematics:"bg-green-100 text-green-800",Physics:"bg-purple-100 text-purple-800",Biology:"bg-teal-100 text-teal-800",Chemistry:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},E5=()=>{const{currentUser:e}=MN(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)("all"),[m,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"});(0,r.useEffect)((()=>{(async()=>{try{const e=_p(IN,"subjects"),t=(await Sg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=_p(IN,"teachers"),i=await Sg(r),a=Array.from(new Set(i.docs.map((e=>e.data().department)).filter(Boolean))),l=i.docs.map((e=>({id:e.id,fullName:e.data().fullName||"",department:e.data().department||""}))),u=_p(IN,"rooms"),h=(await Sg(u)).docs.map((e=>({id:e.id,name:e.data().name||"",capacity:e.data().capacity,location:e.data().location}))),f=_p(IN,"sections"),m=(await Sg(f)).docs.map((e=>{var t;return{id:e.id,name:e.data().name||"",code:e.data().code||"",capacity:e.data().capacity||0,currentEnrollment:(null===(t=e.data().students)||void 0===t?void 0:t.length)||0,subjectId:e.data().subjectId||"",instructorRfidUid:e.data().instructorRfidUid||"",instructorId:e.data().instructorId||"",schedules:e.data().schedules||[],students:e.data().students||[]}}));n(t),s(a),o(l),c(h),d(m)}catch(Zg){console.error("Error fetching data:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to fetch data. Please try again."})}})()}),[]);const x=(0,r.useMemo)((()=>"all"===h?t:t.filter((e=>e.department===h))),[t,h]);return e&&"admin"===e.role?(0,ON.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,ON.jsx)(qO,{}),(0,ON.jsx)("div",{className:"flex-1 transition-all duration-300 "+(g?"ml-20":"ml-64"),children:(0,ON.jsx)("div",{className:"p-8",children:(0,ON.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Subject Management"}),(0,ON.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage subjects and view related sections"})]}),(0,ON.jsxs)(CI.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{b({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"}),p(!0)},className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors flex items-center",children:[(0,ON.jsx)(U1,{className:"h-5 w-5 mr-2"}),"Add New Subject"]})]}),(0,ON.jsx)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white p-4 rounded-xl shadow",children:[(0,ON.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ON.jsx)(NP,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,ON.jsx)("h3",{className:"text-lg font-semibold",children:"Filter by Department"})]}),(0,ON.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:h,onChange:e=>f(e.target.value),children:[(0,ON.jsx)("option",{value:"all",children:"All Departments"}),i.map((e=>(0,ON.jsx)("option",{value:e,children:e},e)))]})]})}),(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map((e=>{const t=u.filter((t=>t.subjectId===e.id)),r=t.flatMap((e=>e.schedules)),i=Array.from(new Set(t.map((e=>e.instructorId)))),s=t.map((e=>e.id));return(0,ON.jsxs)(CI.div,{whileHover:{scale:1.05},className:`\n                      bg-white rounded-xl shadow-lg p-6 \n                      border-l-4 ${S5[e.department]||S5.default}\n                    `,children:[(0,ON.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ON.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,ON.jsxs)("div",{className:"flex space-x-2",children:[(0,ON.jsx)(CI.button,{whileHover:{scale:1.1},onClick:()=>{b(e),p(!0)},className:"text-indigo-600 hover:text-indigo-800",children:(0,ON.jsx)(_5,{className:"h-5 w-5"})}),(0,ON.jsx)(CI.button,{whileHover:{scale:1.1},onClick:()=>(async e=>{if((await zI().fire({title:"Are you sure?",text:"Do you want to delete this subject?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{const t=u.filter((t=>t.subjectId===e)),r=Array.from(new Set(t.map((e=>e.instructorId))));for(const n of r){const t=Np(IN,"teachers",n),r=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",n)));if(!r.empty){const n=(r.docs[0].data().assignedSubjects||[]).filter((t=>t.id!==e));await Cg(t,{assignedSubjects:n})}}await kg(Np(IN,"subjects",e)),n((t=>t.filter((t=>t.id!==e)))),zI().fire({icon:"success",title:"Deleted!",text:"Subject has been deleted.",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}catch(Zg){console.error("Error deleting subject:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to delete subject. Please try again."})}})(e.id),className:"text-red-600 hover:text-red-800",children:(0,ON.jsx)(j5,{className:"h-5 w-5"})})]})]}),(0,ON.jsxs)("div",{className:"space-y-2",children:[(0,ON.jsx)("p",{className:"text-gray-600 mb-2",children:e.details||"No details provided"}),e.code&&(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Code:"}),(0,ON.jsx)("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.code})]}),void 0!==e.credits&&(0,ON.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ON.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Credits:"}),(0,ON.jsx)("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.credits})]}),r.length>0&&(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("span",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,ON.jsx)(GO,{className:"h-4 w-4 mr-1"})," Schedules:"]}),(0,ON.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 mt-1",children:r.map(((e,t)=>(0,ON.jsxs)("li",{children:[e.day,": ",e.startTime," - ",e.endTime," (",e.roomName,")"]},t)))})]}),i.length>0&&(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("span",{className:"text-sm font-medium text-gray-500 flex items-center",children:[(0,ON.jsx)(AI,{className:"h-4 w-4 mr-1"})," Instructors:"]}),(0,ON.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:i.map(((e,t)=>{const n=a.find((t=>t.id===e));return(0,ON.jsx)("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded",children:(null===n||void 0===n?void 0:n.fullName)||"Unknown"},t)}))})]}),s.length>0&&(0,ON.jsxs)("div",{children:[(0,ON.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Sections:"}),(0,ON.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.map(((e,t)=>{const n=u.find((t=>t.id===e));return(0,ON.jsxs)("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:[(null===n||void 0===n?void 0:n.name)||"Unknown"," (",(null===n||void 0===n?void 0:n.code)||"N/A",") - ",null===n||void 0===n?void 0:n.currentEnrollment,"/",null===n||void 0===n?void 0:n.capacity]},t)}))})]}),(0,ON.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,ON.jsx)("span",{className:`\n                          px-2 py-1 rounded-full text-xs font-medium\n                          ${"active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}\n                        `,children:e.status}),(0,ON.jsx)("span",{className:"text-sm text-gray-500",children:e.department})]})]})]},e.id)}))}),(0,ON.jsx)(x5,{isOpen:m,onClose:()=>p(!1),title:v.id?"Edit Subject":"New Subject",children:(0,ON.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=_p(IN,"subjects");let i,s;if(v.id){const e=Np(IN,"subjects",v.id),{id:t,...r}=v;await Cg(e,r),i=v.id,s={...v},n((e=>e.map((e=>e.id===v.id?{...v}:e))))}else{const{id:t,...r}=v,a=await Tg(e,r);i=a.id,s={...v,id:i},n((e=>[...e,s]))}const o=u.filter((e=>e.subjectId===i)),l=Array.from(new Set(o.map((e=>e.instructorId))));for(const n of l){const e=Np(IN,"teachers",n),l=o.filter((e=>e.instructorId===n)).map((e=>({id:e.id,name:e.name,code:e.code,capacity:e.capacity,currentEnrollment:e.currentEnrollment,schedules:e.schedules}))),c=await Sg(lg(_p(IN,"teachers"),ug("__name__","==",n)));if(c.empty){var t,r;await Cg(e,{fullName:(null===(t=a.find((e=>e.id===n)))||void 0===t?void 0:t.fullName)||"Unknown",department:(null===(r=a.find((e=>e.id===n)))||void 0===r?void 0:r.department)||"",assignedSubjects:[{...s,sections:l}]})}else{const t=(c.docs[0].data().assignedSubjects||[]).filter((e=>e.id!==i));await Cg(e,{assignedSubjects:[...t,{...s,sections:l}]})}}b({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"}),p(!1),zI().fire({icon:"success",title:"Success",text:v.id?"Subject updated successfully":"Subject added successfully",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}catch(Zg){console.error("Error saving subject or updating teachers:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to save subject or update teachers. Please try again."})}},className:"space-y-6 p-6",children:[(0,ON.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Name"}),(0,ON.jsx)("input",{type:"text",required:!0,className:"w-full p-2 border rounded-lg",value:v.name,onChange:e=>b({...v,name:e.target.value})})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Department"}),(0,ON.jsxs)("select",{required:!0,className:"w-full p-2 border rounded-lg",value:v.department,onChange:e=>b({...v,department:e.target.value}),children:[(0,ON.jsx)("option",{value:"",children:"Select Department"}),i.map((e=>(0,ON.jsx)("option",{value:e,children:e},e)))]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Code"}),(0,ON.jsx)("input",{type:"text",className:"w-full p-2 border rounded-lg",value:v.code,onChange:e=>b({...v,code:e.target.value})})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Credits"}),(0,ON.jsx)("input",{type:"number",className:"w-full p-2 border rounded-lg",value:v.credits,onChange:e=>b({...v,credits:parseInt(e.target.value)||0})})]})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Details"}),(0,ON.jsx)("textarea",{className:"w-full p-2 border rounded-lg",value:v.details,onChange:e=>b({...v,details:e.target.value})})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,ON.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:v.status,onChange:e=>b({...v,status:e.target.value}),children:[(0,ON.jsx)("option",{value:"active",children:"Active"}),(0,ON.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,ON.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,ON.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),(0,ON.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:v.id?"Update Subject":"Create Subject"})]})]})})]})})})]}):(0,ON.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,ON.jsxs)("div",{className:"text-center",children:[(0,ON.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,ON.jsx)("p",{className:"mt-2 text-gray-600",children:"You don't have permission to view this page."})]})})},C5=()=>{const{currentUser:e}=MN(),[t,n]=(0,r.useState)(null),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{if(e){o(!0);try{const r=Np(IN,"students",e.uid),i=await Ng(r);if(!i.exists())return zI().fire({icon:"error",title:"Error",text:"Student data not found."}),void o(!1);const a=i.data();var t;if(n(a),a.enrolledSubjects&&a.enrolledSubjects.length>0)if(null!==(t=a.enrolledSubjects[0])&&void 0!==t&&t.subjectId)s(a.enrolledSubjects);else{const e=_p(IN,"subjects"),t=(await Sg(e)).docs.filter((e=>a.enrolledSubjects.includes(e.id))).map((e=>{const t=e.data();return{subjectId:e.id,name:t.name||"Unknown Subject",section:t.section||a.section||"N/A",schedules:t.schedules||[]}}));s(t)}}catch(Zg){console.error("Error fetching student data:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to fetch your schedules."})}finally{o(!1)}}})()}),[e]),t?(0,ON.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono",children:[(0,ON.jsx)(gP,{student:{fullName:t.fullName,department:t.department,section:t.section}}),(0,ON.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-20",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center mb-8",children:[(0,ON.jsx)(oA,{className:"h-8 w-8 text-cyan-400 mr-3"}),(0,ON.jsx)("h1",{className:"text-3xl font-bold text-cyan-100",children:"Your Enrolled Subjects & Schedules"})]}),a?(0,ON.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400"})}):0===i.length?(0,ON.jsx)(CI.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-gray-400",children:(0,ON.jsx)("p",{children:"You are not enrolled in any subjects yet."})}):(0,ON.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((e=>(0,ON.jsxs)(CI.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"bg-gray-800/80 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-cyan-800",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ON.jsx)("h2",{className:"text-lg font-semibold text-cyan-100",children:e.name}),(0,ON.jsx)("span",{className:"text-sm text-cyan-300 bg-gray-700/50 px-3 py-1 rounded-full",children:e.section})]}),(0,ON.jsxs)("div",{className:"space-y-3",children:[(0,ON.jsxs)("h3",{className:"text-sm font-medium text-gray-400 flex items-center",children:[(0,ON.jsx)(rA,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Schedules"]}),e.schedules.length>0?e.schedules.map(((e,t)=>(0,ON.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/30 p-3 rounded-lg",children:[(0,ON.jsxs)("div",{children:[(0,ON.jsx)("p",{className:"text-sm text-cyan-100",children:e.day}),(0,ON.jsxs)("p",{className:"text-xs text-gray-400",children:[e.startTime," - ",e.endTime]})]}),(0,ON.jsxs)("div",{className:"flex items-center text-sm text-gray-300",children:[(0,ON.jsx)(v2,{className:"h-4 w-4 mr-1 text-cyan-400"}),e.room]})]},t))):(0,ON.jsx)("p",{className:"text-sm text-gray-400",children:"No schedules available."})]})]},e.subjectId)))})]})]}):(0,ON.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono flex items-center justify-center",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400"})})};function k5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const T5=r.forwardRef(k5);function I5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const A5=r.forwardRef(I5);function O5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const P5=r.forwardRef(O5);function M5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const R5=r.forwardRef(M5);function D5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const L5=r.forwardRef(D5);function F5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"}))}const U5=r.forwardRef(F5);function B5(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const V5=r.forwardRef(B5),$5=()=>{const{currentUser:e}=MN(),[t,n]=(0,r.useState)(null),[i,s]=(0,r.useState)(!0),[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{if(e){s(!0);try{const t=Np(IN,"students",e.uid),r=await Ng(t);if(!r.exists())return zI().fire({icon:"error",title:"Error",text:"Student data not found."}),void s(!1);const i=r.data();i.email=i.email||e.email||"N/A",n(i)}catch(Zg){console.error("Error fetching student data:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to fetch your profile."})}finally{s(!1)}}})()}),[e]);return(0,r.useEffect)((()=>()=>{l&&URL.revokeObjectURL(l)}),[l]),t?(0,ON.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono",children:[(0,ON.jsx)(gP,{student:{fullName:t.fullName,department:t.department,section:t.section}}),(0,ON.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-20",children:[(0,ON.jsxs)(CI.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center mb-8",children:[(0,ON.jsx)(cA,{className:"h-8 w-8 text-cyan-400 mr-3"}),(0,ON.jsx)("h1",{className:"text-3xl font-bold text-cyan-100",children:"Your Profile"})]}),i?(0,ON.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400"})}):(0,ON.jsxs)(CI.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"bg-gray-800/80 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-cyan-800 max-w-md mx-auto",children:[(0,ON.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,ON.jsxs)("div",{className:"relative",children:[(0,ON.jsx)("img",{src:l||t.photoURL||"https://via.placeholder.com/150",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-cyan-800"}),(0,ON.jsxs)("label",{htmlFor:"photo-upload",className:"absolute bottom-0 right-0 bg-cyan-600 p-2 rounded-full cursor-pointer hover:bg-cyan-700 transition-colors",children:[(0,ON.jsx)(T5,{className:"h-6 w-6 text-white"}),(0,ON.jsx)("input",{id:"photo-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){if(!["image/jpeg","image/png","image/gif"].includes(n.type))return void zI().fire({icon:"error",title:"Invalid File Type",text:"Please upload a JPEG, PNG, or GIF image."});if(n.size>5242880)return void zI().fire({icon:"error",title:"File Too Large",text:"Please upload an image smaller than 5MB."});o(n);const e=URL.createObjectURL(n);c(e)}}})]})]}),a&&(0,ON.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,ON.jsx)("button",{onClick:async()=>{if(a&&e&&t)try{const r=SN(TN,`profile-photos/${e.uid}/${a.name}`);await NN(r,a);const i=await jN(r),s=Np(IN,"students",e.uid);await Cg(s,{photoURL:i}),n({...t,photoURL:i}),o(null),c(null),zI().fire({icon:"success",title:"Profile Photo Updated",showConfirmButton:!1,timer:1500})}catch(Zg){console.error("Error uploading photo:",Zg),zI().fire({icon:"error",title:"Error",text:"Failed to upload profile photo."})}},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Upload Photo"}),(0,ON.jsx)("button",{onClick:()=>{o(null),c(null)},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Cancel"})]})]}),(0,ON.jsxs)("div",{className:"space-y-4",children:[(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(cA,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Full Name"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.fullName})]}),(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(oA,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Department"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.department})]}),(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(v2,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Section"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.section})]}),(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(A5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Email"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.email})]}),t.idNumber&&(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(P5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"ID Number"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.idNumber})]}),t.phoneNumber&&(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(R5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Phone Number"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.phoneNumber})]}),t.address&&(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(L5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Address"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.address})]}),t.dateOfBirth&&(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(U5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Date of Birth"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.dateOfBirth})]}),t.enrollmentDate&&(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(tA,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Enrollment Date"]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t.enrollmentDate})]}),Object.keys(t).map((e=>["fullName","department","section","email","photoURL","idNumber","phoneNumber","address","dateOfBirth","enrollmentDate","enrolledSubjects"].includes(e)?null:(0,ON.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ON.jsxs)("span",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(cA,{className:"h-5 w-5 mr-2 text-cyan-400"}),e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()))]}),(0,ON.jsx)("span",{className:"text-sm font-medium text-cyan-100",children:t[e]})]},e)))]}),(0,ON.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[(0,ON.jsxs)("button",{onClick:()=>d(!u),className:"flex items-center text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:[(0,ON.jsx)(V5,{className:"h-5 w-5 mr-2"}),u?"Cancel":"Change Password"]}),u&&(0,ON.jsxs)(CI.form,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 space-y-4",onSubmit:async t=>{if(t.preventDefault(),b(null),m.length<6)b("Password must be at least 6 characters long.");else if(m===g)if(e&&e.email)try{const t=Ui.credential(e.email,h);await ts(e,t),await as(e,m),f(""),p(""),y(""),d(!1),zI().fire({icon:"success",title:"Password Updated",text:"Your password has been successfully updated.",showConfirmButton:!1,timer:1500})}catch(Zg){console.error("Error updating password:",Zg),"auth/wrong-password"===Zg.code?b("Current password is incorrect."):"auth/requires-recent-login"===Zg.code?zI().fire({icon:"error",title:"Session Expired",text:"Please log in again to update your password."}):zI().fire({icon:"error",title:"Error",text:"Failed to update password. Please try again."})}else zI().fire({icon:"error",title:"Error",text:"User not authenticated."});else b("Passwords do not match.")},children:[(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("label",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(V5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Current Password"]}),(0,ON.jsx)("input",{type:"password",value:h,onChange:e=>f(e.target.value),className:"w-full mt-1 p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-600",required:!0})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("label",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(V5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"New Password"]}),(0,ON.jsx)("input",{type:"password",value:m,onChange:e=>p(e.target.value),className:"w-full mt-1 p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-600",required:!0})]}),(0,ON.jsxs)("div",{children:[(0,ON.jsxs)("label",{className:"text-sm text-gray-400 flex items-center",children:[(0,ON.jsx)(V5,{className:"h-5 w-5 mr-2 text-cyan-400"}),"Confirm New Password"]}),(0,ON.jsx)("input",{type:"password",value:g,onChange:e=>y(e.target.value),className:"w-full mt-1 p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-600",required:!0})]}),v&&(0,ON.jsx)("p",{className:"text-sm text-red-400",children:v}),(0,ON.jsx)("button",{type:"submit",className:"w-full bg-cyan-600 text-white px-4 py-2 rounded-lg hover:bg-cyan-700 transition-colors",children:"Update Password"})]})]})]})]})]}):(0,ON.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800 text-white font-mono flex items-center justify-center",children:(0,ON.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400"})})},z5=()=>{const{instructorName:e}=function(){let{matches:e}=r.useContext(X),t=e[e.length-1];return t?t.params:{}}();return(0,ON.jsx)(bP,{instructorName:e})},q5=()=>(0,ON.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,ON.jsxs)("div",{className:"text-center",children:[(0,ON.jsx)("h1",{className:"text-4xl font-bold text-indigo-600 mb-4",children:"404"}),(0,ON.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Page not found"}),(0,ON.jsx)(ke,{to:"/login",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Go to Login"})]})}),H5=()=>(0,ON.jsx)(Se,{children:(0,ON.jsx)(RN,{children:(0,ON.jsxs)(be,{children:[(0,ON.jsx)(ye,{path:"/login",element:(0,ON.jsx)(HI,{})}),(0,ON.jsx)(ye,{path:"/reset-password",element:(0,ON.jsx)(yO,{})}),(0,ON.jsx)(ye,{path:"/adminregistration",element:(0,ON.jsx)(aP,{})}),(0,ON.jsx)(ye,{path:"/rfid-registration",element:(0,ON.jsx)(r2,{})}),(0,ON.jsx)(ye,{path:"/admin/dashboard",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(JO,{})})}),(0,ON.jsx)(ye,{path:"/admin/users",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(Y0,{})})}),(0,ON.jsx)(ye,{path:"/admin/insights",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(G0,{})})}),(0,ON.jsx)(ye,{path:"/admin/security-logs",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(jP,{})})}),(0,ON.jsx)(ye,{path:"/admin/settings",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(D1,{})})}),(0,ON.jsx)(ye,{path:"/admin/energyusage",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(FP,{})})}),(0,ON.jsx)(ye,{path:"/admin/schedules",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(q1,{})})}),(0,ON.jsx)(ye,{path:"/admin/sections",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(g2,{})})}),(0,ON.jsx)(ye,{path:"/admin/rooms",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(_2,{})})}),(0,ON.jsx)(ye,{path:"/admin/subjects-management",element:(0,ON.jsx)(eP,{roles:["admin"],children:(0,ON.jsx)(E5,{})})}),(0,ON.jsx)(ye,{path:"/instructor/dashboard",element:(0,ON.jsx)(eP,{roles:["instructor"],children:(0,ON.jsx)(fO,{})})}),(0,ON.jsx)(ye,{path:"/instructor/schedules",element:(0,ON.jsx)(eP,{roles:["instructor"],children:(0,ON.jsx)(B1,{})})}),(0,ON.jsx)(ye,{path:"/instructor/classes",element:(0,ON.jsx)(eP,{roles:["instructor"],children:(0,ON.jsx)(L1,{})})}),(0,ON.jsx)(ye,{path:"/instructor/settings",element:(0,ON.jsx)(eP,{roles:["instructor"],children:(0,ON.jsx)(D1,{})})}),(0,ON.jsx)(ye,{path:"/instructor/take-attendance",element:(0,ON.jsx)(eP,{roles:["instructor"],children:(0,ON.jsx)(Z1,{})})}),(0,ON.jsx)(ye,{path:"/instructor/attendance-management",element:(0,ON.jsx)(eP,{roles:["instructor"],children:(0,ON.jsx)(v5,{})})}),(0,ON.jsx)(ye,{path:"/student/dashboard",element:(0,ON.jsx)(eP,{roles:["student"],children:(0,ON.jsx)(C0,{})})}),(0,ON.jsx)(ye,{path:"/student/attendance/:instructorName?",element:(0,ON.jsx)(eP,{roles:["student"],children:(0,ON.jsx)(z5,{})})}),(0,ON.jsx)(ye,{path:"/student/subject-selection",element:(0,ON.jsx)(eP,{roles:["student"],children:(0,ON.jsx)(b5,{})})}),(0,ON.jsx)(ye,{path:"/student/student-schedules",element:(0,ON.jsx)(eP,{roles:["student"],children:(0,ON.jsx)(C5,{})})}),(0,ON.jsx)(ye,{path:"/student/settings",element:(0,ON.jsx)(eP,{roles:["student"],children:(0,ON.jsx)(D1,{})})}),(0,ON.jsx)(ye,{path:"/student/profile",element:(0,ON.jsx)(eP,{roles:["student"],children:(0,ON.jsx)($5,{})})}),(0,ON.jsx)(ye,{path:"/",element:(0,ON.jsx)(ge,{to:"/login",replace:!0})}),(0,ON.jsx)(ye,{path:"*",element:(0,ON.jsx)(q5,{})})]})})});s.createRoot(document.getElementById("root")).render((0,ON.jsx)(r.StrictMode,{children:(0,ON.jsx)(H5,{})}))})()})();
//# sourceMappingURL=main.60d7c171.js.map