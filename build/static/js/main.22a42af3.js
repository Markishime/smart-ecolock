/*! For license information please see main.22a42af3.js.LICENSE.txt */
(()=>{var e={8210:function(e,t,n){var r;!function(){"use strict";var i,o=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},a=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,m=9007199254740991,g=d(1286742750677284.5),y={};function v(e,t){var n,r,i,o,s,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),a?k(t,h):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),o=s-i){for(o<0?(r=c,o=-o,l=u.length):(r=u,i=s,l=c.length),o>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((l=c.length)-(o=u.length)<0&&(o=l,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/p|0,c[o]%=p;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,a?k(t,h):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function x(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=C(n)),o+=r;(n=7-(r=(s=e[t])+"").length)&&(o+=C(n))}else if(0===s)return"0";for(;s%10===0;)s/=10;return o+s}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return k(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return S(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,o=r.precision,s=o+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(a=!1,t=w(T(n,s),T(e,s),s),a=!0,k(t,o))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(a=!1,t=w(n,e,0,1).times(e),a=!0,n.minus(t)):k(new r(n),i)},y.naturalExponential=y.exp=function(){return _(this)},y.naturalLogarithm=y.ln=function(){return T(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):N(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=S(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,o,s,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=S(c),a=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=x(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=s=(n=u.precision)+3;;)if(r=(o=r).plus(w(c,o,s+2)).times(.5),x(o.d).slice(0,s)===(t=x(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&"4999"==t){if(k(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if("9999"!=t)break;s+=4}return a=!0,k(r,n)},y.times=y.mul=function(e){var t,n,r,i,o,s,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=f.length)<(u=m.length)&&(o=f,f=m,m=o,s=c,c=u,u=s),o=[],r=s=c+u;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=o[i]+m[r]*f[i-r-1]+t,o[i--]=l%p|0,t=l/p|0;o[i]=(o[i]+t)%p|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,a?k(e,h.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,o),void 0===t?t=r.rounding:b(t,0,8),k(n,e+S(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=A(r,!0):(b(e,0,o),void 0===t?t=i.rounding:b(t,0,8),n=A(r=k(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?A(i):(b(e,0,o),void 0===t?t=s.rounding:b(t,0,8),n=A((r=k(new s(i),e+S(i)+1,t)).abs(),!1,e+S(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return k(new t(e),S(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,o,s,c,u=this,h=u.constructor,f=+(e=new h(e));if(!e.s)return new h(i);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(i))return u;if(r=h.precision,e.eq(i))return k(u,r);if(c=(t=e.e)>=(n=e.d.length-1),s=u.s,c){if((n=f<0?-f:f)<=m){for(o=new h(i),t=Math.ceil(r/7+4),a=!1;n%2&&I((o=o.times(u)).d,t),0!==(n=d(n/2));)I((u=u.times(u)).d,t);return a=!0,e.s<0?new h(i).div(o):k(o,r)}}else if(s<0)throw Error(l+"NaN");return s=s<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,a=!1,o=e.times(T(u,r+12)),a=!0,(o=_(o)).s=s,o},y.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?r=A(i,(n=S(i))<=s.toExpNeg||n>=s.toExpPos):(b(e,1,o),void 0===t?t=s.rounding:b(t,0,8),r=A(i=k(new s(i),e,t),e<=(n=S(i))||n<=s.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,o),void 0===t?t=n.rounding:b(t,0,8)),k(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=S(e),n=e.constructor;return A(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%p|0,r=n/p|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*p+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,s){var a,c,u,d,h,f,m,g,y,v,b,x,w,_,E,C,T,j,N=r.constructor,A=r.s==i.s?1:-1,I=r.d,P=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,T=P.length,E=I.length,g=(m=new N(A)).d=[],u=0;P[u]==(I[u]||0);)++u;if(P[u]>(I[u]||0)&&--c,(x=null==o?o=N.precision:s?o+(S(r)-S(i))+1:o)<0)return new N(0);if(x=x/7+2|0,u=0,1==T)for(d=0,P=P[0],x++;(u<E||d)&&x--;u++)w=d*p+(I[u]||0),g[u]=w/P|0,d=w%P|0;else{for((d=p/(P[0]+1)|0)>1&&(P=e(P,d),I=e(I,d),T=P.length,E=I.length),_=T,v=(y=I.slice(0,T)).length;v<T;)y[v++]=0;(j=P.slice()).unshift(0),C=P[0],P[1]>=p/2&&++C;do{d=0,(a=t(P,y,T,v))<0?(b=y[0],T!=v&&(b=b*p+(y[1]||0)),(d=b/C|0)>1?(d>=p&&(d=p-1),1==(a=t(h=e(P,d),y,f=h.length,v=y.length))&&(d--,n(h,T<f?j:P,f))):(0==d&&(a=d=1),h=P.slice()),(f=h.length)<v&&h.unshift(0),n(y,h,v),-1==a&&(a=t(P,y,T,v=y.length))<1&&(d++,n(y,T<v?j:P,v)),v=y.length):0===a&&(d++,y=[0]),g[u++]=d,a&&y[0]?y[v++]=I[_]||0:(y=[I[_]],v=1)}while((_++<E||void 0!==y[0])&&x--)}return g[0]||g.shift(),m.e=c,k(m,s?o+S(m)+1:o)}}();function _(e,t){var n,r,o,s,l,c=0,d=0,f=e.constructor,p=f.precision;if(S(e)>16)throw Error(u+S(e));if(!e.s)return new f(i);for(null==t?(a=!1,l=p):l=t,s=new f(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=o=new f(i),f.precision=l;;){if(r=k(r.times(e),l),n=n.times(++c),x((s=o.plus(w(r,n,l))).d).slice(0,l)===x(o.d).slice(0,l)){for(;d--;)o=k(o.times(o),l);return f.precision=p,null==t?(a=!0,k(o,p)):o}o=s}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw a=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return k(new e(e.LN10),t)}function C(e){for(var t="";e--;)t+="0";return t}function T(e,t){var n,r,o,s,c,u,d,h,f,p=1,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(i))return new y(0);if(null==t?(a=!1,h=v):h=t,m.eq(10))return null==t&&(a=!0),E(y,h);if(h+=10,y.precision=h,r=(n=x(g)).charAt(0),s=S(m),!(Math.abs(s)<15e14))return d=E(y,h+2,v).times(s+""),m=T(new y(r+"."+n.slice(1)),h-10).plus(d),y.precision=v,null==t?(a=!0,k(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((m=m.times(e)).d)).charAt(0),p++;for(s=S(m),r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1)),u=c=m=w(m.minus(i),m.plus(i),h),f=k(m.times(m),h),o=3;;){if(c=k(c.times(f),h),x((d=u.plus(w(c,new y(o),h))).d).slice(0,h)===x(u.d).slice(0,h))return u=u.times(2),0!==s&&(u=u.plus(E(y,h+2,v).times(s+""))),u=w(u,new y(p),h),y.precision=v,null==t?(a=!0,k(u,v)):u;u=d,o+=2}}function j(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),a&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function k(e,t,n){var r,i,o,s,l,c,f,m,y=e.d;for(s=1,o=y[0];o>=10;o/=10)s++;if((r=t-s)<0)r+=7,i=t,f=y[m=0];else{if((m=Math.ceil((r+1)/7))>=(o=y.length))return e;for(f=o=y[m],s=1;o>=10;o/=10)s++;i=(r%=7)-7+s}if(void 0!==n&&(l=f/(o=h(10,s-i-1))%10|0,c=t<0||void 0!==y[m+1]||f%o,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?f/h(10,s-i):0:y[m-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return c?(o=S(e),y.length=1,t=t-o-1,y[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=m,o=1,m--):(y.length=m+1,o=h(10,7-r),y[m]=i>0?(f/h(10,s-i)%h(10,i)|0)*o:0),c)for(;;){if(0==m){(y[0]+=o)==p&&(y[0]=1,++e.e);break}if(y[m]+=o,y[m]!=p)break;y[m--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(a&&(e.e>g||e.e<-g))throw Error(u+S(e));return e}function N(e,t){var n,r,i,o,s,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),a?k(t,m):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),s=u-r){for((d=s<0)?(n=c,s=-s,l=h.length):(n=h,r=u,l=c.length),s>(i=Math.max(Math.ceil(m/7),l)+2)&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for((d=(i=c.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}s=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(o=i;o&&0===c[--o];)c[o]=p-1;--c[o],c[i]+=p}c[i]-=h[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,a?k(t,m):t):new f(0)}function A(e,t,n){var r,i=S(e),o=x(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+C(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+C(-i-1)+o,n&&(r=n-s)>0&&(o+=C(r))):i>=s?(o+=C(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+C(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=C(r))),e.s<0?"-"+o:o}function I(e,t){if(e.length>t)return e.length=t,!0}function P(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(d(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}s=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):j(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);j(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=P,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(s),s.default=s.Decimal=s,i=new s(1),void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},8724:(e,t,n)=>{var r=n(7615),i=n(5051),o=n(2154),s=n(8734),a=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},7160:(e,t,n)=>{var r=n(7563),i=n(9935),o=n(4190),s=n(1946),a=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},4816:(e,t,n)=>{var r=n(7251),i=n(7159),o=n(438),s=n(9394),a=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},8902:(e,t,n)=>{var r=n(4816),i=n(6179),o=n(6704);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},5538:(e,t,n)=>{var r=n(7160),i=n(4545),o=n(793),s=n(7760),a=n(3892),l=n(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=l,e.exports=c},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},5295:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},3204:(e,t,n)=>{var r=n(3343),i=n(2777),o=n(4052),s=n(4543),a=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&s(e),h=!n&&!u&&!d&&l(e),f=n||u||d||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||p.push(g);return p}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},5967:e=>{e.exports=function(e){return e.split("")}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},5652:(e,t,n)=>{var r=n(4664),i=n(6516)(r);e.exports=i},4746:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(void 0===l?a===a&&!r(a):n(a,l)))var l=a,c=s}return c}},5816:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},755:(e,t,n)=>{var r=n(8895),i=n(7116);e.exports=function e(t,n,o,s,a){var l=-1,c=t.length;for(o||(o=i),a||(a=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,s,a):r(a,u):s||(a[a.length]=u)}return a}},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4664:(e,t,n)=>{var r=n(4258),i=n(8673);e.exports=function(e,t){return e&&r(e,t,i)}},2969:(e,t,n)=>{var r=n(5324),i=n(914);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},4262:(e,t,n)=>{var r=n(8895),i=n(4052);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},6913:(e,t,n)=>{var r=n(9812),i=n(4552),o=n(6095),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},7498:e=>{e.exports=function(e,t){return e>t}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8468:(e,t,n)=>{var r=n(5816),i=n(644),o=n(4020);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},5193:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},6989:(e,t,n)=>{var r=n(6399),i=n(2761);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,s,e,a))}},6399:(e,t,n)=>{var r=n(5538),i=n(3668),o=n(9987),s=n(5752),a=n(6924),l=n(4052),c=n(4543),u=n(1268),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),x=v?h:a(e),w=b?h:a(t),_=(x=x==d?f:x)==f,S=(w=w==d?f:w)==f,E=x==w;if(E&&c(e)){if(!c(t))return!1;v=!0,_=!1}if(E&&!_)return y||(y=new r),v||u(e)?i(e,t,n,m,g,y):o(e,t,x,n,m,g,y);if(!(1&n)){var C=_&&p.call(e,"__wrapped__"),T=S&&p.call(t,"__wrapped__");if(C||T){var j=C?e.value():e,k=T?t.value():t;return y||(y=new r),g(j,k,n,m,y)}}return!!E&&(y||(y=new r),s(e,t,n,m,g,y))}},6532:(e,t,n)=>{var r=n(5538),i=n(6989);e.exports=function(e,t,n,o){var s=n.length,a=s,l=!o;if(null==e)return!a;for(e=Object(e);s--;){var c=n[s];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){var u=(c=n[s])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var f=new r;if(o)var p=o(d,h,u,e,t,f);if(!(void 0===p?i(h,d,3,o,f):p))return!1}}return!0}},644:e=>{e.exports=function(e){return e!==e}},6954:(e,t,n)=>{var r=n(1629),i=n(7857),o=n(6686),s=n(6996),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:a).test(s(e))}},5428:(e,t,n)=>{var r=n(6913),i=n(6173),o=n(2761),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},9096:(e,t,n)=>{var r=n(9256),i=n(5029),o=n(3279),s=n(4052),a=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?s(e)?i(e[0],e[1]):r(e):a(e)}},3713:(e,t,n)=>{var r=n(6140),i=n(1143),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},61:e=>{e.exports=function(e,t){return e<t}},8883:(e,t,n)=>{var r=n(5652),i=n(6571);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},9256:(e,t,n)=>{var r=n(6532),i=n(3781),o=n(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},5029:(e,t,n)=>{var r=n(6989),i=n(3097),o=n(3366),s=n(2597),a=n(9417),l=n(1310),c=n(914);e.exports=function(e,t){return s(e)&&a(t)?l(c(e),t):function(n){var s=i(n,e);return void 0===s&&s===t?o(n,e):r(t,s,3)}}},2536:(e,t,n)=>{var r=n(149),i=n(2969),o=n(9096),s=n(8883),a=n(320),l=n(7574),c=n(5893),u=n(3279),d=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var h=-1;t=r(t,l(o));var f=s(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++h,value:e}}));return a(f,(function(e,t){return c(e,t,n)}))}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var s=-1,a=n(t((r-e)/(i||1)),0),l=Array(a);a--;)l[o?a:++s]=e,e+=i;return l}},5647:(e,t,n)=>{var r=n(3279),i=n(5636),o=n(6350);e.exports=function(e,t){return o(i(e,t,r),e+"")}},8325:(e,t,n)=>{var r=n(2541),i=n(5654),o=n(3279),s=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=s},3871:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},2165:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},8541:(e,t,n)=>{var r=n(9812),i=n(149),o=n(4052),s=n(9841),a=r?r.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},4416:(e,t,n)=>{var r=n(8902),i=n(5866),o=n(1558),s=n(8114),a=n(8182),l=n(2074);e.exports=function(e,t,n){var c=-1,u=i,d=e.length,h=!0,f=[],p=f;if(n)h=!1,u=o;else if(d>=200){var m=t?null:a(e);if(m)return l(m);h=!1,u=s,p=new r}else p=t?[]:f;e:for(;++c<d;){var g=e[c],y=t?t(g):g;if(g=n||0!==g?g:0,h&&y===y){for(var v=p.length;v--;)if(p[v]===y)continue e;t&&p.push(y),f.push(g)}else u(p,y,n)||(p!==f&&p.push(y),f.push(g))}return f}},8114:e=>{e.exports=function(e,t){return e.has(t)}},5324:(e,t,n)=>{var r=n(4052),i=n(2597),o=n(4079),s=n(1069);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(s(e))}},8189:(e,t,n)=>{var r=n(3871);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e===e,s=r(e),a=void 0!==t,l=null===t,c=t===t,u=r(t);if(!l&&!u&&!s&&e>t||s&&a&&c&&!l&&!u||i&&a&&c||!n&&c||!o)return 1;if(!i&&!s&&!u&&e<t||u&&n&&o&&!i&&!s||l&&n&&o||!a&&o||!c)return-1}return 0}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,s=t.criteria,a=o.length,l=n.length;++i<a;){var c=r(o[i],s[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,s=t?o:-1,a=Object(n);(t?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}},7676:(e,t,n)=>{var r=n(8189),i=n(6311),o=n(9115),s=n(1069);e.exports=function(e){return function(t){t=s(t);var n=i(t)?o(t):void 0,a=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return a[e]()+l}}},9995:(e,t,n)=>{var r=n(9096),i=n(6571),o=n(8673);e.exports=function(e){return function(t,n,s){var a=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(a[e],e,a)}}var c=e(t,n,s);return c>-1?a[l?t[c]:c]:void 0}}},3331:(e,t,n)=>{var r=n(9676),i=n(929),o=n(7303);e.exports=function(e){return function(t,n,s){return s&&"number"!=typeof s&&i(t,n,s)&&(n=s=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),s=void 0===s?t<n?1:-1:o(s),r(t,n,s,e)}}},8182:(e,t,n)=>{var r=n(2070),i=n(5713),o=n(2074),s=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=s},5654:(e,t,n)=>{var r=n(7937),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},3668:(e,t,n)=>{var r=n(8902),i=n(2587),o=n(8114);e.exports=function(e,t,n,s,a,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var y=e[p],v=t[p];if(s)var b=c?s(v,y,p,t,e,l):s(y,v,p,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(y===e||a(y,e,n,s,l)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!a(y,v,n,s,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},9987:(e,t,n)=>{var r=n(9812),i=n(2929),o=n(3211),s=n(3668),a=n(4160),l=n(2074),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=s(f(e),f(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},5752:(e,t,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:i.call(t,h)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=l;++d<u;){var y=e[h=c[d]],v=t[h];if(o)var b=l?o(v,y,h,t,e,a):o(y,v,h,e,t,a);if(!(void 0===b?y===v||s(y,v,n,o,a):b)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},9395:(e,t,n)=>{var r=n(4262),i=n(9621),o=n(8673);e.exports=function(e){return r(e,o,i)}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3781:(e,t,n)=>{var r=n(9417),i=n(8673);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],s=e[o];t[n]=[o,s,r(s)]}return t}},7937:(e,t,n)=>{var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},4552:(e,t,n)=>{var r=n(9812),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},9621:(e,t,n)=>{var r=n(7529),i=n(7828),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},6924:(e,t,n)=>{var r=n(7685),i=n(5204),o=n(5387),s=n(2070),a=n(6600),l=n(6913),c=n(6996),u="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),y=c(o),v=c(s),b=c(a),x=l;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=u||o&&x(o.resolve())!=d||s&&x(new s)!=h||a&&x(new a)!=f)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case y:return d;case v:return h;case b:return f}return t}),e.exports=x},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9057:(e,t,n)=>{var r=n(5324),i=n(2777),o=n(4052),s=n(9194),a=n(6173),l=n(914);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&a(u)&&s(h,u)&&(o(e)||i(e))}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2154:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},8734:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7116:(e,t,n)=>{var r=n(9812),i=n(2777),o=n(4052),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(s&&e&&e[s])}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},929:(e,t,n)=>{var r=n(3211),i=n(6571),o=n(9194),s=n(6686);e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?i(n)&&o(t,n.length):"string"==a&&t in n)&&r(n[t],e)}},2597:(e,t,n)=>{var r=n(4052),i=n(9841),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(s.test(e)||!o.test(e)||null!=t&&e in Object(t))}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7857:(e,t,n)=>{var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},9935:(e,t,n)=>{var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},7251:(e,t,n)=>{var r=n(8724),i=n(7160),o=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=a},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5636:(e,t,n)=>{var r=n(1170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,a=i(o.length-t,0),l=Array(a);++s<a;)l[s]=o[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=o[s];return c[t]=n(l),r(e,this,c)}}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6350:(e,t,n)=>{var r=n(8325),i=n(6578)(r);e.exports=i},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,n)=>{var r=n(7160),i=n(5204),o=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},9115:(e,t,n)=>{var r=n(5967),i=n(6311),o=n(715);e.exports=function(e){return i(e)?o(e):r(e)}},4079:(e,t,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=s},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},715:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[o,s,a].join("|")+")"+c+l+")*"),d="(?:"+[o+r+"?",r,s,a,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},2541:e=>{e.exports=function(e){return function(){return e}}},3950:(e,t,n)=>{var r=n(6686),i=n(4757),o=n(801),s=Math.max,a=Math.min;e.exports=function(e,t,n){var l,c,u,d,h,f,p=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=c;return l=c=void 0,p=t,d=e.apply(r,n)}function b(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-p>=u}function x(){var e=i();if(b(e))return w(e);h=setTimeout(x,function(e){var n=t-(e-f);return g?a(n,u-(e-p)):n}(e))}function w(e){return h=void 0,y&&l?v(e):(l=c=void 0,d)}function _(){var e=i(),n=b(e);if(l=arguments,c=this,f=e,n){if(void 0===h)return function(e){return p=e,h=setTimeout(x,t),m?v(e):d}(f);if(g)return clearTimeout(h),h=setTimeout(x,t),v(f)}return void 0===h&&(h=setTimeout(x,t)),d}return t=o(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?s(o(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=c=h=void 0},_.flush=function(){return void 0===h?d:w(i())},_}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},7002:(e,t,n)=>{var r=n(5295),i=n(4746),o=n(9096),s=n(4052),a=n(929);e.exports=function(e,t,n){var l=s(e)?r:i;return n&&a(e,t,n)&&(t=void 0),l(e,o(t,3))}},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},2520:(e,t,n)=>{var r=n(5816),i=n(9096),o=n(9140),s=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var l=null==n?0:o(n);return l<0&&(l=s(a+l,0)),r(e,i(t,3),l)}},3538:(e,t,n)=>{var r=n(755),i=n(3411);e.exports=function(e,t){return r(i(e,t),1)}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3366:(e,t,n)=>{var r=n(7894),i=n(9057);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3279:e=>{e.exports=function(e){return e}},2777:(e,t,n)=>{var r=n(5193),i=n(2761),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},4052:e=>{var t=Array.isArray;e.exports=t},6571:(e,t,n)=>{var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},6361:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),i=n(14),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},1629:(e,t,n)=>{var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5268:(e,t,n)=>{var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},9686:e=>{e.exports=function(e){return null==e}},9160:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2322:(e,t,n)=>{var r=n(6913),i=n(5990),o=n(2761),s=Function.prototype,a=Object.prototype,l=s.toString,c=a.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},620:(e,t,n)=>{var r=n(6913),i=n(4052),o=n(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},9841:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},1268:(e,t,n)=>{var r=n(5428),i=n(7574),o=n(6832),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},8673:(e,t,n)=>{var r=n(3204),i=n(3713),o=n(6571);e.exports=function(e){return o(e)?r(e):i(e)}},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3411:(e,t,n)=>{var r=n(149),i=n(9096),o=n(8883),s=n(4052);e.exports=function(e,t){return(s(e)?r:o)(e,i(t,3))}},1733:(e,t,n)=>{var r=n(1775),i=n(4664),o=n(9096);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},539:(e,t,n)=>{var r=n(9742),i=n(7498),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},2794:(e,t,n)=>{var r=n(9742),i=n(7498),o=n(9096);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),i):void 0}},5797:(e,t,n)=>{var r=n(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},6745:(e,t,n)=>{var r=n(9742),i=n(61),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},9364:(e,t,n)=>{var r=n(9742),i=n(9096),o=n(61);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),o):void 0}},5713:e=>{e.exports=function(){}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},3932:(e,t,n)=>{var r=n(396),i=n(2866),o=n(2597),s=n(914);e.exports=function(e){return o(e)?r(s(e)):i(e)}},6604:(e,t,n)=>{var r=n(3331)();e.exports=r},4597:(e,t,n)=>{var r=n(2587),i=n(9096),o=n(2165),s=n(4052),a=n(929);e.exports=function(e,t,n){var l=s(e)?r:o;return n&&a(e,t,n)&&(t=void 0),l(e,i(t,3))}},7424:(e,t,n)=>{var r=n(755),i=n(2536),o=n(5647),s=n(929),a=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&s(e,t[0],t[1])?t=[]:n>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=a},7828:e=>{e.exports=function(){return[]}},14:e=>{e.exports=function(){return!1}},9889:(e,t,n)=>{var r=n(3950),i=n(6686);e.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:o,maxWait:t,trailing:s})}},7303:(e,t,n)=>{var r=n(801),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},801:(e,t,n)=>{var r=n(1141),i=n(6686),o=n(9841),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},977:(e,t,n)=>{var r=n(9096),i=n(4416);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},643:(e,t,n)=>{var r=n(7676)("toUpperCase");e.exports=r},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),j=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var D,L=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case C:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Ee=null;function Ce(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function je(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function ke(e,t){return e(t)}function Ne(){}var Ae=!1;function Ie(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return ke(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ee)&&(Ne(),je())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Oe=!1}function Re(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Le=null,Fe=!1,Be=null,Ue={onError:function(e){De=!0,Le=e}};function Ve(e,t,n,r,i,o,s,a,l){De=!1,Le=null,Re.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,St,Et,Ct,Tt=!1,jt=[],kt=null,Nt=null,At=null,It=new Map,Pt=new Map,Ot=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Dt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Tt=!1,null!==kt&&Ft(kt)&&(kt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),It.forEach(Bt),Pt.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<jt.length){Vt(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Vt(kt,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),It.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var $t=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=bt,o=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,$t.transition=o}}function Wt(e,t,n,r){var i=bt,o=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,$t.transition=o}}function Kt(e,t,n,r){if(Ht){var i=Gt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Dt(kt,e,t,n,r,i),!0;case"dragenter":return Nt=Dt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Dt(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Dt(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,Dt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Gt(e,t,n,r))&&Hr(e,t,r,Yt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Gt(e,t,n,r){if(Yt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=L({},cn,{view:0,detail:0}),hn=on(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(L({},fn,{dataTransfer:0})),gn=on(L({},dn,{relatedTarget:0})),yn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return En}var Tn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=on(Tn),kn=on(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),An=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(In),On=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Dn=u&&"TextEvent"in window&&!Rn,Ln=u&&(!Mn||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Yn(e){Fr(e,0)}function Gn(e){if(K(xi(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Zn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Gn(Kn)){var t=[];qn(t,Kn,e,we(e)),Ie(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Kn)}function or(e,t){if("click"===e)return Gn(t)}function sr(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function Cr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Cr("animationend"),jr=Cr("animationiteration"),kr=Cr("animationstart"),Nr=Cr("transitionend"),Ar=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Or=0;Or<Ir.length;Or++){var Mr=Ir[Or];Pr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(jr,"onAnimationIteration"),Pr(kr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),De){if(!De)throw Error(o(198));var u=Le;De=!1,Le=null,Fe||(Fe=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Xt(t)){case 1:var i=qt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ie((function(){var r=o,i=we(n),s=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=jn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case jr:case kr:l=yn;break;case Nr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(qr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:xi(l),f=null==c?a:xi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Yr(s,a,l,u,!1),null!==c&&null!==d&&Yr(s,d,c,u,!0)}if("select"===(l=(a=r?xi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Hn(a))if(Qn)g=sr;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?qn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?xi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(s,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,zn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Mn&&Un(e,t)?(e=en(),Jt=Zt=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Fr(s,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(qr(e,o,i)),null!=(o=Pe(e,t))&&r.push(qr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,o))&&s.unshift(qr(n,l,a)):i||null!=(l=Pe(n,o))&&s.push(qr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Gr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var _i=[],Si=-1;function Ei(e){return{current:e}}function Ci(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ti(e,t){Si++,_i[Si]=e.current,e.current=t}var ji={},ki=Ei(ji),Ni=Ei(!1),Ai=ji;function Ii(e,t){var n=e.type.contextTypes;if(!n)return ji;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ci(Ni),Ci(ki)}function Mi(e,t,n){if(ki.current!==ji)throw Error(o(168));Ti(ki,t),Ti(Ni,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,$(e)||"Unknown",i));return L({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Ai=ki.current,Ti(ki,e),Ti(Ni,Ni.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ri(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ci(Ni),Ci(ki),Ti(ki,e)):Ci(Ni),Ti(Ni,n)}var Fi=null,Bi=!1,Ui=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Je,zi),i}finally{bt=t,Ui=!1}}return null}var $i=[],Hi=0,qi=null,Wi=0,Ki=[],Yi=0,Gi=null,Xi=1,Qi="";function Zi(e,t){$i[Hi++]=Wi,$i[Hi++]=qi,qi=e,Wi=t}function Ji(e,t,n){Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=Gi,Gi=e;var r=Xi;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,Qi=o+e}else Xi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function to(e){for(;e===qi;)qi=$i[--Hi],$i[Hi]=null,Wi=$i[--Hi],$i[Hi]=null;for(;e===Gi;)Gi=Ki[--Yi],Ki[Yi]=null,Qi=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:Xi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),io&&Zi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Zi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Zi(i,m),c}function g(i,a,l,c){var u=R(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),io&&Zi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return io&&Zi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),io&&Zi(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&bo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=yo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((o=Rc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Mc(s.type,s.key,s.props,null,r.mode,l)).ref=yo(r,o,s),l.return=r,r=l)}return a(r);case _:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(s,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(R(s))return g(r,o,s,l);vo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Lc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var wo=xo(!0),_o=xo(!1),So=Ei(null),Eo=null,Co=null,To=null;function jo(){To=Co=Eo=null}function ko(e){var t=So.current;Ci(So),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){Eo=e,To=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===Eo)throw Error(o(308));Co=e,Eo.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Po=null;function Oo(e){null===Po?Po=[e]:Po.push(e)}function Mo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ro(e,n)}return null===(i=r.interleaved)?(t.next=t,Oo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ro(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $o(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Dl|=s,e.lanes=s,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var qo={},Wo=Ei(qo),Ko=Ei(qo),Yo=Ei(qo);function Go(e){if(e===qo)throw Error(o(174));return e}function Xo(e,t){switch(Ti(Yo,t),Ti(Ko,e),Ti(Wo,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Wo),Ti(Wo,t)}function Qo(){Ci(Wo),Ci(Ko),Ci(Yo)}function Zo(e){Go(Yo.current);var t=Go(Wo.current),n=le(t,e.type);t!==n&&(Ti(Ko,e),Ti(Wo,n))}function Jo(e){Ko.current===e&&(Ci(Wo),Ci(Ko))}var es=Ei(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=x.ReactCurrentDispatcher,os=x.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,fs=0;function ps(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Js:ea,e=n(r,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(ds)}if(is.current=Zs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function ys(){var e=0!==hs;return hs=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function xs(e,t){return"function"===typeof t?t(e):t}function ws(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Dl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _s(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function Es(e,t){var n=as,r=bs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Ds(js.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Is(9,Ts.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(o(349));0!==(30&ss)||Cs(n,t,i)}return i}function Cs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ts(e,t,n,r){t.value=n,t.getSnapshot=r,ks(t)&&Ns(e)}function js(e,t,n){return n((function(){ks(t)&&Ns(e)}))}function ks(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ns(e){var t=Ro(e,1);null!==t&&nc(t,e,1,-1)}function As(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ys.bind(null,as,e),[t.memoizedState,e]}function Is(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ps(){return bs().memoizedState}function Os(e,t,n,r){var i=vs();as.flags|=e,i.memoizedState=Is(1|t,n,void 0,void 0===r?null:r)}function Ms(e,t,n,r){var i=bs();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Is(t,n,o,r))}as.flags|=e,i.memoizedState=Is(1|t,n,o,r)}function Rs(e,t){return Os(8390656,8,e,t)}function Ds(e,t){return Ms(2048,8,e,t)}function Ls(e,t){return Ms(4,2,e,t)}function Fs(e,t){return Ms(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Us(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ms(4,4,Bs.bind(null,t,e),n)}function Vs(){}function zs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $s(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Dl|=n,e.baseState=!0),t)}function qs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{bt=n,os.transition=r}}function Ws(){return bs().memoizedState}function Ks(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gs(e))Xs(t,n);else if(null!==(n=Mo(e,t,n,r))){nc(n,e,r,ec()),Qs(n,t,r)}}function Ys(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gs(e))Xs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Oo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Mo(e,t,i,r))&&(nc(n,e,r,i=ec()),Qs(n,t,r))}}function Gs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Xs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zs={readContext:Io,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Js={readContext:Io,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:Rs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Os(4194308,4,e,t)},useInsertionEffect:function(e,t){return Os(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ks.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:As,useDebugValue:Vs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=As(!1),t=e[0];return e=qs.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=vs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nl)throw Error(o(349));0!==(30&ss)||Cs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Rs(js.bind(null,r,s,e),[e]),r.flags|=2048,Is(9,Ts.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Nl.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Io,useCallback:zs,useContext:Io,useEffect:Ds,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:$s,useReducer:ws,useRef:Ps,useState:function(){return ws(xs)},useDebugValue:Vs,useDeferredValue:function(e){return Hs(bs(),ls.memoizedState,e)},useTransition:function(){return[ws(xs)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Es,useId:Ws,unstable_isNewReconciler:!1},ta={readContext:Io,useCallback:zs,useContext:Io,useEffect:Ds,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:$s,useReducer:_s,useRef:Ps,useState:function(){return _s(xs)},useDebugValue:Vs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Hs(t,ls.memoizedState,e)},useTransition:function(){return[_s(xs)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Es,useId:Ws,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Bo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(nc(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Bo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(nc(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Bo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Uo(e,i,r))&&(nc(t,e,r,n),Vo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=ji,o=t.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=Pi(t)?Ai:ki.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):ji),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=Pi(t)?Ai:ki.current,i.context=Ii(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),$o(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),da(0,t)},n}function pa(e,t,n){(n=Bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=x.ReactCurrentOwner,ba=!1;function xa(e,t,n,r){t.child=null===e?_o(t,null,n,r):wo(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=gs(e,t,n,r,o,i),n=ys(),null===e||ba?(io&&n&&eo(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function _a(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Pc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Ol,Pl),Pl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Pl),Pl|=r;return xa(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var o=Pi(n)?Ai:ki.current;return o=Ii(t,o),Ao(t,i),n=gs(e,t,n,r,o,i),r=ys(),null===e||ba?(io&&r&&eo(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ja(e,t,n,r,i){if(Pi(n)){var o=!0;Di(t)}else o=!1;if(Ao(t,i),null===t.stateNode)$a(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Io(c):c=Ii(t,c=Pi(n)?Ai:ki.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Do=!1;var h=t.memoizedState;s.state=h,$o(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ni.current||Do?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Do||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Fo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Io(l):l=Ii(t,l=Pi(n)?Ai:ki.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),Do=!1,h=t.memoizedState,s.state=h,$o(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Ni.current||Do?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Do||oa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ka(e,t,n,r,o,i)}function ka(e,t,n,r,i,o){Ca(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Ha(e,t,o);r=t.stateNode,va.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,a,o)):xa(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Xo(e,t.containerInfo)}function Aa(e,t,n,r,i){return po(),mo(i),t.flags|=256,xa(e,t,n,r),t.child}var Ia,Pa,Oa,Ma,Ra={dehydrated:null,treeContext:null,retryLane:0};function Da(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Dc(l,i,0,null),e=Rc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Da(n),t.memoizedState=Ra,e):Fa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Dc({mode:"visible",children:r.children},i,0,null),(s=Rc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,a),t.child.memoizedState=Da(a),t.memoizedState=Ra,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ro(e,i),nc(r,e,i,-1))}return mc(),Ba(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=Gi,Xi=e.id,Qi=e.overflow,Gi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Oc(r,a):(a=Rc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Da(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&mo(r),wo(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Wa(t),null;case 3:return r=t.stateNode,Qo(),Ci(Ni),Ci(ki),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Pa(e,t),Wa(t),null;case 5:Jo(t);var i=Go(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Wa(t),null}if(e=Go(Wo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":ie(r,s),Br("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":W(r),J(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ia(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":X(e,r),i=G(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Br("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":W(e),J(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Go(Yo.current),Go(Wo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ci(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Qo(),Pa(e,t),null===e&&zr(t.stateNode.containerInfo),Wa(t),null;case 10:return ko(t.type._context),Wa(t),null;case 19:if(Ci(es),null===(s=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)qa(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,qa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>zl&&(t.flags|=128,r=!0,qa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Wa(t),null}else 2*Qe()-s.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,qa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=es.current,Ti(es,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ci(Ni),Ci(ki),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Ci(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(es),null;case 4:return Qo(),null;case 10:return ko(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ia=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Go(Wo.current);var o,s=null;switch(n){case"input":i=G(e,i),r=G(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ga=!1,Xa=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Za=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||Ja(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xa&&(Ja(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,hl(e,t,n),Xa=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(s,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":Z(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Qe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||d,ml(t,e),Xa=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Za=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ga;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ga;var c=Xa;if(Ga=s,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?_l(i):null!==l?(l.return=s,Za=l):_l(i);for(;null!==o;)Za=o,bl(o,t,n),o=o.sibling;Za=i,Ga=a,Xa=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):xl(e)}}function xl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Xa||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function wl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function _l(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var o=t.return;try{il(t)}catch(l){Ec(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){Ec(t,s,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,jl=x.ReactCurrentBatchConfig,kl=0,Nl=null,Al=null,Il=0,Pl=0,Ol=Ei(0),Ml=0,Rl=null,Dl=0,Ll=0,Fl=0,Bl=null,Ul=null,Vl=0,zl=1/0,$l=null,Hl=!1,ql=null,Wl=null,Kl=!1,Yl=null,Gl=0,Xl=0,Ql=null,Zl=-1,Jl=0;function ec(){return 0!==(6&kl)?Qe():-1!==Zl?Zl:Zl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Il?Il&-Il:null!==go.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Ql=null,Error(o(185));yt(e,n,r),0!==(2&kl)&&e===Nl||(e===Nl&&(0===(2&kl)&&(Ll|=n),4===Ml&&ac(e,Il)),rc(e,r),1===n&&0===kl&&0===(1&t.mode)&&(zl=Qe()+500,Bi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Nl?Il:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bi=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),si((function(){0===(6&kl)&&zi()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,Jl=0,0!==(6&kl))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=kl;kl|=2;var s=pc();for(Nl===e&&Il===t||($l=null,zl=Qe()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}jo(),Cl.current=s,kl=i,null!==Al?t=0:(Nl=null,Il=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Rl,hc(e,0),ac(e,r),rc(e,Qe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=pt(e))&&(r=s,t=oc(e,s))),1===t))throw n=Rl,hc(e,0),ac(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Ul,$l);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,$l),t);break}wc(e,Ul,$l);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,$l),r);break}wc(e,Ul,$l);break;default:throw Error(o(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&kl))throw Error(o(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Rl,hc(e,0),ac(e,t),rc(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,$l),rc(e,Qe()),null}function cc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(zl=Qe()+500,Bi&&zi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&kl)&&_c();var t=kl;kl|=1;var n=jl.transition,r=bt;try{if(jl.transition=null,bt=1,e)return e()}finally{bt=r,jl.transition=n,0===(6&(kl=t))&&zi()}}function dc(){Pl=Ol.current,Ci(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Qo(),Ci(Ni),Ci(ki),rs();break;case 5:Jo(r);break;case 4:Qo();break;case 13:case 19:Ci(es);break;case 10:ko(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Al=e=Oc(e.current,null),Il=Pl=t,Ml=0,Rl=null,Fl=Ll=Dl=0,Ul=Bl=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Po=null}return e}function fc(e,t){for(;;){var n=Al;try{if(jo(),is.current=Zs,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Tl.current=null,null===n||null===n.return){Ml=1,Rl=t,Al=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[s]:Bl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,zo(s,fa(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,zo(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(x){t=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Zs,null===e?Zs:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Nl||0===(268435455&Dl)&&0===(268435455&Ll)||ac(Nl,Il)}function gc(e,t){var n=kl;kl|=2;var r=pc();for(Nl===e&&Il===t||($l=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(jo(),kl=n,Cl.current=r,null!==Al)throw Error(o(261));return Nl=null,Il=0,Ml}function yc(){for(;null!==Al;)bc(Al)}function vc(){for(;null!==Al&&!Ge();)bc(Al)}function bc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?xc(e):Al=t,Tl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Pl)))return void(Al=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ml=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,n){var r=bt,i=jl.transition;try{jl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Yl);if(0!==(6&kl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Nl&&(Al=Nl=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Nc(tt,(function(){return _c(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=jl.transition,jl.transition=null;var a=bt;bt=1;var l=kl;kl|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Xe(),kl=l,bt=a,jl.transition=s}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Gl=i),s=e.pendingLanes,0===s&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Gl)&&0!==e.tag&&_c(),s=e.pendingLanes,0!==(1&s)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,zi()}(e,t,n,r)}finally{jl.transition=i,bt=r}return null}function _c(){if(null!==Yl){var e=xt(Gl),t=jl.transition,n=bt;try{if(jl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Gl=0,0!==(6&kl))throw Error(o(331));var i=kl;for(kl|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var f=(d=Za).sibling,p=d.return;if(ol(d),d===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Za=v;break e}Za=s.return}}var b=e.current;for(Za=b;null!==Za;){var x=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,Za=x;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ec(l,l.return,_)}if(l===a){Za=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break e}Za=l.return}}if(kl=i,zi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,jl.transition=t}}return!1}function Sc(e,t,n){e=Uo(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Uo(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Il&n)===n&&(4===Ml||3===Ml&&(130023424&Il)===Il&&500>Qe()-Vl?hc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ro(e,t))&&(yt(e,t,n),rc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Rc(n.children,i,s,t);case E:a=8,i|=8;break;case C:return(e=Ic(12,n,t,2|i)).elementType=C,e.lanes=s,e;case N:return(e=Ic(13,n,t,i)).elementType=N,e.lanes=s,e;case A:return(e=Ic(19,n,t,i)).elementType=A,e.lanes=s,e;case O:return Dc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case j:a=9;break e;case k:a=11;break e;case I:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ic(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Rc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,o,s,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ic(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Vc(e){if(!e)return ji;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Ri(e,n,t)}return t}function zc(e,t,n,r,i,o,s,a,l){return(e=Uc(n,r,!0,e,0,o,0,a,l)).context=Vc(null),n=e.current,(o=Bo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function $c(e,t,n,r){var i=t.current,o=ec(),s=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Uo(i,t,s))&&(nc(e,i,s,o),Vo(e,i,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),po();break;case 5:Zo(t);break;case 1:Pi(t.type)&&Di(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Ti(es,1&es.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ti(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Ji(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Ii(t,ki.current);Ao(t,n),i=gs(null,t,r,e,i,n);var s=ys();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Di(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=ka(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===I)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=ja(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=_a(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Fo(e,t),$o(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=_o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ha(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return Zo(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ca(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return La(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ti(So,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ni.current){t=Ha(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Bo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),No(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),No(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=Io(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),_a(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),$a(e,t),t.tag=1,Pi(r)?(e=!0,Di(t)):e=!1,Ao(t,n),sa(t,r,i),la(t,r,i,n),ka(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Ea(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Hc(s);a.call(e)}}$c(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hc(s);o.call(e)}}var s=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,n,r)})),l}(n,t,e,i,r);return Hc(s)}Gc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));$c(e,t,null,null)},Gc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[pi]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Qe()),0===(6&kl)&&(zl=Qe()+500,zi()))}break;case 13:uc((function(){var t=Ro(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ro(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));K(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[bi,xi,wi,Te,je,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(o(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(o(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+k(l,0):o,w(s)?(i="",null!=e&&(i=e.replace(j,"$&/")+"/"),N(s,t,i,"",(function(e){return e}))):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(j,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+k(a=e[c],c);l+=N(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=o+k(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},M={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},6378:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case h:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isFragment=function(e){return y(e)===o}},9062:(e,t,n)=>{"use strict";e.exports=n(6378)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,O(_);else{var t=r(u);null!==t&&M(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var o=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,C=null,T=-1,j=5,k=-1;function N(){return!(t.unstable_now()-k<j)}function A(){if(null!==C){var e=t.unstable_now();k=e;var n=!0;try{n=C(!0,e)}finally{n?S():(E=!1,C=null)}}else E=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,P=I.port2;I.port1.onmessage=A,S=function(){P.postMessage(null)}}else S=function(){y(A,0)};function O(e){C=e,E||(E=!0,S())}function M(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,M(w,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},64:function(e){e.exports=function(){"use strict";function e(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function t(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n(t,n){return t.get(e(t,n))}function r(e,n,r){t(e,n),n.set(e,r)}function i(t,n,r){return t.set(e(t,n),r),r}const o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},l=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;s.restoreFocusTimeout=setTimeout((()=>{a(),t()}),o),window.scrollTo(n,r)})),c="swal2-",u=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce(((e,t)=>(e[t]=c+t,e)),{}),d=["success","warning","info","question","error"].reduce(((e,t)=>(e[t]=c+t,e)),{}),h="SweetAlert2:",f=e=>e.charAt(0).toUpperCase()+e.slice(1),p=e=>{console.warn(`${h} ${"object"===typeof e?e.join(" "):e}`)},m=e=>{console.error(`${h} ${e}`)},g=[],y=e=>{g.includes(e)||(g.push(e),p(e))},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},b=e=>"function"===typeof e?e():e,x=e=>e&&"function"===typeof e.toPromise,w=e=>x(e)?e.toPromise():Promise.resolve(e),_=e=>e&&Promise.resolve(e)===e,S=()=>document.body.querySelector(`.${u.container}`),E=e=>{const t=S();return t?t.querySelector(e):null},C=e=>E(`.${e}`),T=()=>C(u.popup),j=()=>C(u.icon),k=()=>C(u["icon-content"]),N=()=>C(u.title),A=()=>C(u["html-container"]),I=()=>C(u.image),P=()=>C(u["progress-steps"]),O=()=>C(u["validation-message"]),M=()=>E(`.${u.actions} .${u.confirm}`),R=()=>E(`.${u.actions} .${u.cancel}`),D=()=>E(`.${u.actions} .${u.deny}`),L=()=>C(u["input-label"]),F=()=>E(`.${u.loader}`),B=()=>C(u.actions),U=()=>C(u.footer),V=()=>C(u["timer-progress-bar"]),z=()=>C(u.close),$='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',H=()=>{const e=T();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")||"0"),r=parseInt(t.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=e.querySelectorAll($),i=Array.from(r).filter((e=>"-1"!==e.getAttribute("tabindex")));return[...new Set(n.concat(i))].filter((e=>ue(e)))},q=()=>G(document.body,u.shown)&&!G(document.body,u["toast-shown"])&&!G(document.body,u["no-backdrop"]),W=()=>{const e=T();return!!e&&G(e,u.toast)},K=()=>{const e=T();return!!e&&e.hasAttribute("data-loading")},Y=(e,t)=>{if(e.textContent="",t){const n=(new DOMParser).parseFromString(t,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((t=>{e.appendChild(t)}));const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},G=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},X=(e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(u).includes(n)||Object.values(d).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))},Q=(e,t,n)=>{if(X(e,t),!t.customClass)return;const r=t.customClass[n];r&&("string"===typeof r||r.forEach?te(e,r):p(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`))},Z=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${u.popup} > .${u[t]}`);case"checkbox":return e.querySelector(`.${u.popup} > .${u.checkbox} input`);case"radio":return e.querySelector(`.${u.popup} > .${u.radio} input:checked`)||e.querySelector(`.${u.popup} > .${u.radio} input:first-child`);case"range":return e.querySelector(`.${u.popup} > .${u.range} input`);default:return e.querySelector(`.${u.popup} > .${u.input}`)}},J=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},ee=(e,t,n)=>{e&&t&&("string"===typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},te=(e,t)=>{ee(e,t,!0)},ne=(e,t)=>{ee(e,t,!1)},re=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const e=n[r];if(e instanceof HTMLElement&&G(e,t))return e}},ie=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"===typeof n?`${n}px`:n):e.style.removeProperty(t)},oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},se=e=>{e&&(e.style.display="none")},ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver((()=>{ce(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},le=(e,t,n,r)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,r)},ce=function(e,t){t?oe(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):se(e)},ue=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),de=()=>!ue(M())&&!ue(D())&&!ue(R()),he=e=>!!(e.scrollHeight>e.clientHeight),fe=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},pe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=V();n&&ue(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"}),10))},me=()=>{const e=V();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`},ge=()=>"undefined"===typeof window||"undefined"===typeof document,ye=`\n <div aria-labelledby="${u.title}" aria-describedby="${u["html-container"]}" class="${u.popup}" tabindex="-1">\n   <button type="button" class="${u.close}"></button>\n   <ul class="${u["progress-steps"]}"></ul>\n   <div class="${u.icon}"></div>\n   <img class="${u.image}" />\n   <h2 class="${u.title}" id="${u.title}"></h2>\n   <div class="${u["html-container"]}" id="${u["html-container"]}"></div>\n   <input class="${u.input}" id="${u.input}" />\n   <input type="file" class="${u.file}" />\n   <div class="${u.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${u.select}" id="${u.select}"></select>\n   <div class="${u.radio}"></div>\n   <label class="${u.checkbox}">\n     <input type="checkbox" id="${u.checkbox}" />\n     <span class="${u.label}"></span>\n   </label>\n   <textarea class="${u.textarea}" id="${u.textarea}"></textarea>\n   <div class="${u["validation-message"]}" id="${u["validation-message"]}"></div>\n   <div class="${u.actions}">\n     <div class="${u.loader}"></div>\n     <button type="button" class="${u.confirm}"></button>\n     <button type="button" class="${u.deny}"></button>\n     <button type="button" class="${u.cancel}"></button>\n   </div>\n   <div class="${u.footer}"></div>\n   <div class="${u["timer-progress-bar-container"]}">\n     <div class="${u["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ve=()=>{const e=S();return!!e&&(e.remove(),ne([document.documentElement,document.body],[u["no-backdrop"],u["toast-shown"],u["has-column"]]),!0)},be=()=>{s.currentInstance.resetValidationMessage()},xe=()=>{const e=T(),t=re(e,u.input),n=re(e,u.file),r=e.querySelector(`.${u.range} input`),i=e.querySelector(`.${u.range} output`),o=re(e,u.select),s=e.querySelector(`.${u.checkbox} input`),a=re(e,u.textarea);t.oninput=be,n.onchange=be,o.onchange=be,s.onchange=be,a.oninput=be,r.oninput=()=>{be(),i.value=r.value},r.onchange=()=>{be(),i.value=r.value}},we=e=>"string"===typeof e?document.querySelector(e):e,_e=e=>{const t=T();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},Se=e=>{"rtl"===window.getComputedStyle(e).direction&&te(S(),u.rtl)},Ee=e=>{const t=ve();if(ge())return void m("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=u.container,t&&te(n,u["no-transition"]),Y(n,ye);const r=we(e.target);r.appendChild(n),_e(e),Se(r),xe()},Ce=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"===typeof e?Te(e,t):e&&Y(t,e)},Te=(e,t)=>{e.jquery?je(t,e):Y(t,e.toString())},je=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ke=(e,t)=>{const n=B(),r=F();n&&r&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?oe(n):se(n),Q(n,t,"actions"),Ne(n,r,t),Y(r,t.loaderHtml||""),Q(r,t,"loader"))};function Ne(e,t,n){const r=M(),i=D(),o=R();r&&i&&o&&(Ie(r,"confirm",n),Ie(i,"deny",n),Ie(o,"cancel",n),Ae(r,i,o,n),n.reverseButtons&&(n.toast?(e.insertBefore(o,r),e.insertBefore(i,r)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(r,t))))}function Ae(e,t,n,r){r.buttonsStyling?(te([e,t,n],u.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,te(e,u["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,te(t,u["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,te(n,u["default-outline"]))):ne([e,t,n],u.styled)}function Ie(e,t,n){const r=f(t);ce(e,n[`show${r}Button`],"inline-block"),Y(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=u[t],Q(e,n,`${t}Button`)}const Pe=(e,t)=>{const n=z();n&&(Y(n,t.closeButtonHtml||""),Q(n,t,"closeButton"),ce(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},Oe=(e,t)=>{const n=S();n&&(Me(n,t.backdrop),Re(n,t.position),De(n,t.grow),Q(n,t,"container"))};function Me(e,t){"string"===typeof t?e.style.background=t:t||te([document.documentElement,document.body],u["no-backdrop"])}function Re(e,t){t&&(t in u?te(e,u[t]):(p('The "position" parameter is not valid, defaulting to "center"'),te(e,u.center)))}function De(e,t){t&&te(e,u[`grow-${t}`])}var Le={innerParams:new WeakMap,domCache:new WeakMap};const Fe=["input","file","range","select","radio","checkbox","textarea"],Be=(e,t)=>{const n=T();if(!n)return;const r=Le.innerParams.get(e),i=!r||t.input!==r.input;Fe.forEach((e=>{const r=re(n,u[e]);r&&(ze(e,t.inputAttributes),r.className=u[e],i&&se(r))})),t.input&&(i&&Ue(t),$e(t))},Ue=e=>{if(!e.input)return;if(!Ye[e.input])return void m(`Unexpected type of input! Expected ${Object.keys(Ye).join(" | ")}, got "${e.input}"`);const t=We(e.input);if(!t)return;const n=Ye[e.input](t,e);oe(t),e.inputAutoFocus&&setTimeout((()=>{J(n)}))},Ve=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},ze=(e,t)=>{const n=T();if(!n)return;const r=Z(n,e);if(r){Ve(r);for(const e in t)r.setAttribute(e,t[e])}},$e=e=>{if(!e.input)return;const t=We(e.input);t&&Q(t,e,"input")},He=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},qe=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=u["input-label"];r.setAttribute("for",e.id),r.className=i,"object"===typeof n.customClass&&te(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},We=e=>{const t=T();if(t)return re(t,u[e]||u.input)},Ke=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:_(t)||p(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Ye={};Ye.text=Ye.email=Ye.password=Ye.number=Ye.tel=Ye.url=Ye.search=Ye.date=Ye["datetime-local"]=Ye.time=Ye.week=Ye.month=(e,t)=>(Ke(e,t.inputValue),qe(e,e,t),He(e,t),e.type=t.input,e),Ye.file=(e,t)=>(qe(e,e,t),He(e,t),e),Ye.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Ke(n,t.inputValue),n.type=t.input,Ke(r,t.inputValue),qe(n,e,t),e},Ye.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");Y(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return qe(e,e,t),e},Ye.radio=e=>(e.textContent="",e),Ye.checkbox=(e,t)=>{const n=Z(T(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return Y(r,t.inputPlaceholder||t.inputLabel),n},Ye.textarea=(e,t)=>{Ke(e,t.inputValue),He(e,t),qe(e,e,t);const n=e=>parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight);return setTimeout((()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(T()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?T().style.width=`${i}px`:ie(T(),"width",t.width)})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const Ge=(e,t)=>{const n=A();n&&(ae(n),Q(n,t,"htmlContainer"),t.html?(Ce(t.html,n),oe(n,"block")):t.text?(n.textContent=t.text,oe(n,"block")):se(n),Be(e,t))},Xe=(e,t)=>{const n=U();n&&(ae(n),ce(n,t.footer,"block"),t.footer&&Ce(t.footer,n),Q(n,t,"footer"))},Qe=(e,t)=>{const n=Le.innerParams.get(e),r=j();if(r){if(n&&t.icon===n.icon)return nt(r,t),void Ze(r,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(d).indexOf(t.icon))return m(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),void se(r);oe(r),nt(r,t),Ze(r,t),te(r,t.showClass&&t.showClass.icon)}else se(r)}},Ze=(e,t)=>{for(const[n,r]of Object.entries(d))t.icon!==n&&ne(e,r);te(e,t.icon&&d[t.icon]),rt(e,t),Je(),Q(e,t,"icon")},Je=()=>{const e=T();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},et='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',tt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',nt=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=it(t.iconHtml):"success"===t.icon?(r=et,n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?r=tt:t.icon&&(r=it({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&Y(e,r)},rt=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])le(e,n,"background-color",t.iconColor);le(e,".swal2-success-ring","border-color",t.iconColor)}},it=e=>`<div class="${u["icon-content"]}">${e}</div>`,ot=(e,t)=>{const n=I();n&&(t.imageUrl?(oe(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),ie(n,"width",t.imageWidth),ie(n,"height",t.imageHeight),n.className=u.image,Q(n,t,"image")):se(n))};let st=!1,at=0,lt=0,ct=0,ut=0;const dt=e=>{e.addEventListener("mousedown",ft),document.body.addEventListener("mousemove",pt),e.addEventListener("mouseup",mt),e.addEventListener("touchstart",ft),document.body.addEventListener("touchmove",pt),e.addEventListener("touchend",mt)},ht=e=>{e.removeEventListener("mousedown",ft),document.body.removeEventListener("mousemove",pt),e.removeEventListener("mouseup",mt),e.removeEventListener("touchstart",ft),document.body.removeEventListener("touchmove",pt),e.removeEventListener("touchend",mt)},ft=e=>{const t=T();if(e.target===t||j().contains(e.target)){st=!0;const n=gt(e);at=n.clientX,lt=n.clientY,ct=parseInt(t.style.insetInlineStart)||0,ut=parseInt(t.style.insetBlockStart)||0,te(t,"swal2-dragging")}},pt=e=>{const t=T();if(st){let{clientX:n,clientY:r}=gt(e);t.style.insetInlineStart=`${ct+(n-at)}px`,t.style.insetBlockStart=`${ut+(r-lt)}px`}},mt=()=>{const e=T();st=!1,ne(e,"swal2-dragging")},gt=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},yt=(e,t)=>{const n=S(),r=T();if(n&&r){if(t.toast){ie(n,"width",t.width),r.style.width="100%";const e=F();e&&r.insertBefore(e,j())}else ie(r,"width",t.width);ie(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),se(O()),vt(r,t),t.draggable&&!t.toast?(te(r,u.draggable),dt(r)):(ne(r,u.draggable),ht(r))}},vt=(e,t)=>{const n=t.showClass||{};e.className=`${u.popup} ${ue(e)?n.popup:""}`,t.toast?(te([document.documentElement,document.body],u["toast-shown"]),te(e,u.toast)):te(e,u.modal),Q(e,t,"popup"),"string"===typeof t.customClass&&te(e,t.customClass),t.icon&&te(e,u[`icon-${t.icon}`])},bt=(e,t)=>{const n=P();if(!n)return;const{progressSteps:r,currentProgressStep:i}=t;r&&0!==r.length&&void 0!==i?(oe(n),n.textContent="",i>=r.length&&p("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((e,o)=>{const s=xt(e);if(n.appendChild(s),o===i&&te(s,u["active-progress-step"]),o!==r.length-1){const e=wt(t);n.appendChild(e)}}))):se(n)},xt=e=>{const t=document.createElement("li");return te(t,u["progress-step"]),Y(t,e),t},wt=e=>{const t=document.createElement("li");return te(t,u["progress-step-line"]),e.progressStepsDistance&&ie(t,"width",e.progressStepsDistance),t},_t=(e,t)=>{const n=N();n&&(ae(n),ce(n,t.title||t.titleText,"block"),t.title&&Ce(t.title,n),t.titleText&&(n.innerText=t.titleText),Q(n,t,"title"))},St=(e,t)=>{yt(e,t),Oe(e,t),bt(e,t),Qe(e,t),ot(e,t),_t(e,t),Pe(e,t),Ge(e,t),ke(e,t),Xe(e,t);const n=T();"function"===typeof t.didRender&&n&&t.didRender(n),s.eventEmitter.emit("didRender",n)},Et=()=>ue(T()),Ct=()=>{var e;return null===(e=M())||void 0===e?void 0:e.click()},Tt=()=>{var e;return null===(e=D())||void 0===e?void 0:e.click()},jt=()=>{var e;return null===(e=R())||void 0===e?void 0:e.click()},kt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Nt=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},At=(e,t,n)=>{Nt(e),t.toast||(e.keydownHandler=e=>Mt(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:T(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},It=(e,t)=>{var n;const r=H();if(r.length)return(e+=t)===r.length?e=0:-1===e&&(e=r.length-1),void r[e].focus();null===(n=T())||void 0===n||n.focus()},Pt=["ArrowRight","ArrowDown"],Ot=["ArrowLeft","ArrowUp"],Mt=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Rt(t,e):"Tab"===t.key?Dt(t):[...Pt,...Ot].includes(t.key)?Lt(t.key):"Escape"===t.key&&Ft(t,e,n)))},Rt=(e,t)=>{if(!b(t.allowEnterKey))return;const n=Z(T(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;Ct(),e.preventDefault()}},Dt=e=>{const t=e.target,n=H();let r=-1;for(let i=0;i<n.length;i++)if(t===n[i]){r=i;break}e.shiftKey?It(r,-1):It(r,1),e.stopPropagation(),e.preventDefault()},Lt=e=>{const t=B(),n=M(),r=D(),i=R();if(!t||!n||!r||!i)return;const o=[n,r,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const s=Pt.includes(e)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let e=0;e<t.children.length;e++){if(a=a[s],!a)return;if(a instanceof HTMLButtonElement&&ue(a))break}a instanceof HTMLButtonElement&&a.focus()}},Ft=(e,t,n)=>{b(t.allowEscapeKey)&&(e.preventDefault(),n(kt.esc))};var Bt={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Ut=()=>{const e=S();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))}))},Vt=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},zt="undefined"!==typeof window&&!!window.GestureEvent,$t=()=>{if(zt&&!G(document.body,u.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",te(document.body,u.iosfix),Ht()}},Ht=()=>{const e=S();if(!e)return;let t;e.ontouchstart=e=>{t=qt(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},qt=e=>{const t=e.target,n=S(),r=A();return!(!n||!r)&&!Wt(e)&&!Kt(e)&&(t===n||!he(n)&&t instanceof HTMLElement&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&(!he(r)||!r.contains(t)))},Wt=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Kt=e=>e.touches&&e.touches.length>1,Yt=()=>{if(G(document.body,u.iosfix)){const e=parseInt(document.body.style.top,10);ne(document.body,u.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},Gt=()=>{const e=document.createElement("div");e.className=u["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Xt=null;const Qt=e=>{null===Xt&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(Xt=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Xt+Gt()}px`)},Zt=()=>{null!==Xt&&(document.body.style.paddingRight=`${Xt}px`,Xt=null)};function Jt(e,t,n,r){W()?cn(e,r):(l(n).then((()=>cn(e,r))),Nt(s)),zt?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),q()&&(Zt(),Yt(),Vt()),en()}function en(){ne([document.documentElement,document.body],[u.shown,u["height-auto"],u["no-backdrop"],u["toast-shown"]])}function tn(e){e=sn(e);const t=Bt.swalPromiseResolve.get(this),n=nn(this);this.isAwaitingPromise?e.isDismissed||(on(this),t(e)):n&&t(e)}const nn=e=>{const t=T();if(!t)return!1;const n=Le.innerParams.get(e);if(!n||G(t,n.hideClass.popup))return!1;ne(t,n.showClass.popup),te(t,n.hideClass.popup);const r=S();return ne(r,n.showClass.backdrop),te(r,n.hideClass.backdrop),an(e,t,n),!0};function rn(e){const t=Bt.swalPromiseReject.get(this);on(this),t&&t(e)}const on=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Le.innerParams.get(e)||e._destroy())},sn=e=>"undefined"===typeof e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),an=(e,t,n)=>{var r;const i=S(),o=fe(t);"function"===typeof n.willClose&&n.willClose(t),null===(r=s.eventEmitter)||void 0===r||r.emit("willClose",t),o?ln(e,t,i,n.returnFocus,n.didClose):Jt(e,i,n.returnFocus,n.didClose)},ln=(e,t,n,r,i)=>{s.swalCloseEventFinishedCallback=Jt.bind(null,e,n,r,i);const o=function(e){var n;e.target===t&&(null===(n=s.swalCloseEventFinishedCallback)||void 0===n||n.call(s),delete s.swalCloseEventFinishedCallback,t.removeEventListener("animationend",o),t.removeEventListener("transitionend",o))};t.addEventListener("animationend",o),t.addEventListener("transitionend",o)},cn=(e,t)=>{setTimeout((()=>{var n;"function"===typeof t&&t.bind(e.params)(),null===(n=s.eventEmitter)||void 0===n||n.emit("didClose"),e._destroy&&e._destroy()}))},un=e=>{let t=T();if(t||new fi,t=T(),!t)return;const n=F();W()?se(j()):dn(t,e),oe(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},dn=(e,t)=>{const n=B(),r=F();n&&r&&(!t&&ue(M())&&(t=M()),oe(n),t&&(se(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),te([e,n],u.loading))},hn=(e,t)=>{"select"===t.input||"radio"===t.input?yn(e,t):["text","email","number","tel","textarea"].some((e=>e===t.input))&&(x(t.inputValue)||_(t.inputValue))&&(un(M()),vn(e,t))},fn=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return pn(n);case"radio":return mn(n);case"file":return gn(n);default:return t.inputAutoTrim?n.value.trim():n.value}},pn=e=>e.checked?1:0,mn=e=>e.checked?e.value:null,gn=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,yn=(e,t)=>{const n=T();if(!n)return;const r=e=>{"select"===t.input?bn(n,wn(e),t):"radio"===t.input&&xn(n,wn(e),t)};x(t.inputOptions)||_(t.inputOptions)?(un(M()),w(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"===typeof t.inputOptions?r(t.inputOptions):m("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof t.inputOptions)},vn=(e,t)=>{const n=e.getInput();n&&(se(n),w(t.inputValue).then((r=>{n.value="number"===t.input?`${parseFloat(r)||0}`:`${r}`,oe(n),n.focus(),e.hideLoading()})).catch((t=>{m(`Error in inputValue promise: ${t}`),n.value="",oe(n),n.focus(),e.hideLoading()})))};function bn(e,t,n){const r=re(e,u.select);if(!r)return;const i=(e,t,r)=>{const i=document.createElement("option");i.value=r,Y(i,t),i.selected=_n(r,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach((t=>i(e,t[1],t[0])))}else i(r,n,t)})),r.focus()}function xn(e,t,n){const r=re(e,u.radio);if(!r)return;t.forEach((e=>{const t=e[0],i=e[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=u.radio,o.value=t,_n(t,n.inputValue)&&(o.checked=!0);const a=document.createElement("span");Y(a,i),a.className=u.label,s.appendChild(o),s.appendChild(a),r.appendChild(s)}));const i=r.querySelectorAll("input");i.length&&i[0].focus()}const wn=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"===typeof r&&(r=wn(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"===typeof r&&(r=wn(r)),t.push([n,r])})),t},_n=(e,t)=>!!t&&t.toString()===e.toString(),Sn=e=>{const t=Le.innerParams.get(e);e.disableButtons(),t.input?Tn(e,"confirm"):In(e,!0)},En=e=>{const t=Le.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Tn(e,"deny"):kn(e,!1)},Cn=(e,t)=>{e.disableButtons(),t(kt.cancel)},Tn=(e,t)=>{const n=Le.innerParams.get(e);if(!n.input)return void m(`The "input" parameter is needed to be set when using returnInputValueOn${f(t)}`);const r=e.getInput(),i=fn(e,n);n.inputValidator?jn(e,i,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===t?kn(e,i):In(e,i)},jn=(e,t,n)=>{const r=Le.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>w(r.inputValidator(t,r.validationMessage)))).then((r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?kn(e,t):In(e,t)}))},kn=(e,t)=>{const n=Le.innerParams.get(e||void 0);n.showLoaderOnDeny&&un(D()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((()=>w(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),on(e)):e.close({isDenied:!0,value:"undefined"===typeof n?t:n})})).catch((t=>An(e||void 0,t)))):e.close({isDenied:!0,value:t})},Nn=(e,t)=>{e.close({isConfirmed:!0,value:t})},An=(e,t)=>{e.rejectPromise(t)},In=(e,t)=>{const n=Le.innerParams.get(e||void 0);n.showLoaderOnConfirm&&un(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((()=>w(n.preConfirm(t,n.validationMessage)))).then((n=>{ue(O())||!1===n?(e.hideLoading(),on(e)):Nn(e,"undefined"===typeof n?t:n)})).catch((t=>An(e||void 0,t)))):Nn(e,t)};function Pn(){const e=Le.innerParams.get(this);if(!e)return;const t=Le.domCache.get(this);se(t.loader),W()?e.icon&&oe(j()):On(t),ne([t.popup,t.actions],u.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const On=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?oe(t[0],"inline-block"):de()&&se(e.actions)};function Mn(){const e=Le.innerParams.get(this),t=Le.domCache.get(this);return t?Z(t.popup,e.input):null}function Rn(e,t,n){const r=Le.domCache.get(e);t.forEach((e=>{r[e].disabled=n}))}function Dn(e,t){const n=T();if(n&&e)if("radio"===e.type){const e=n.querySelectorAll(`[name="${u.radio}"]`);for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function Ln(){Rn(this,["confirmButton","denyButton","cancelButton"],!1)}function Fn(){Rn(this,["confirmButton","denyButton","cancelButton"],!0)}function Bn(){Dn(this.getInput(),!1)}function Un(){Dn(this.getInput(),!0)}function Vn(e){const t=Le.domCache.get(this),n=Le.innerParams.get(this);Y(t.validationMessage,e),t.validationMessage.className=u["validation-message"],n.customClass&&n.customClass.validationMessage&&te(t.validationMessage,n.customClass.validationMessage),oe(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",u["validation-message"]),J(r),te(r,u.inputerror))}function zn(){const e=Le.domCache.get(this);e.validationMessage&&se(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),ne(t,u.inputerror))}const $n={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Hn=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],qn={allowEnterKey:void 0},Wn=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Kn=e=>Object.prototype.hasOwnProperty.call($n,e),Yn=e=>-1!==Hn.indexOf(e),Gn=e=>qn[e],Xn=e=>{Kn(e)||p(`Unknown parameter "${e}"`)},Qn=e=>{Wn.includes(e)&&p(`The parameter "${e}" is incompatible with toasts`)},Zn=e=>{const t=Gn(e);t&&v(e,t)},Jn=e=>{!1===e.backdrop&&e.allowOutsideClick&&p('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)Xn(t),e.toast&&Qn(t),Zn(t)};function er(e){const t=T(),n=Le.innerParams.get(this);if(!t||G(t,n.hideClass.popup))return void p("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r=tr(e),i=Object.assign({},n,r);St(this,i),Le.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const tr=e=>{const t={};return Object.keys(e).forEach((n=>{Yn(n)?t[n]=e[n]:p(`Invalid parameter to update: ${n}`)})),t};function nr(){const e=Le.domCache.get(this),t=Le.innerParams.get(this);t?(e.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),"function"===typeof t.didDestroy&&t.didDestroy(),s.eventEmitter.emit("didDestroy"),rr(this)):ir(this)}const rr=e=>{ir(e),delete e.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},ir=e=>{e.isAwaitingPromise?(or(Le,e),e.isAwaitingPromise=!0):(or(Bt,e),or(Le,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},or=(e,t)=>{for(const n in e)e[n].delete(t)};var sr=Object.freeze({__proto__:null,_destroy:nr,close:tn,closeModal:tn,closePopup:tn,closeToast:tn,disableButtons:Fn,disableInput:Un,disableLoading:Pn,enableButtons:Ln,enableInput:Bn,getInput:Mn,handleAwaitingPromise:on,hideLoading:Pn,rejectPromise:rn,resetValidationMessage:zn,showValidationMessage:Vn,update:er});const ar=(e,t,n)=>{e.toast?lr(e,t,n):(dr(t),hr(t),fr(e,t,n))},lr=(e,t,n)=>{t.popup.onclick=()=>{e&&(cr(e)||e.timer||e.input)||n(kt.close)}},cr=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let ur=!1;const dr=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(ur=!0)}}},hr=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(ur=!0)}}},fr=(e,t,n)=>{t.container.onclick=r=>{ur?ur=!1:r.target===t.container&&b(e.allowOutsideClick)&&n(kt.backdrop)}},pr=e=>"object"===typeof e&&e.jquery,mr=e=>e instanceof Element||pr(e),gr=e=>{const t={};return"object"!==typeof e[0]||mr(e[0])?["title","html","icon"].forEach(((n,r)=>{const i=e[r];"string"===typeof i||mr(i)?t[n]=i:void 0!==i&&m(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)})):Object.assign(t,e[0]),t};function yr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function vr(e){class t extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}return t}const br=()=>s.timeout&&s.timeout.getTimerLeft(),xr=()=>{if(s.timeout)return me(),s.timeout.stop()},wr=()=>{if(s.timeout){const e=s.timeout.start();return pe(e),e}},_r=()=>{const e=s.timeout;return e&&(e.running?xr():wr())},Sr=e=>{if(s.timeout){const t=s.timeout.increase(e);return pe(t,!0),t}},Er=()=>!(!s.timeout||!s.timeout.isRunning());let Cr=!1;const Tr={};function jr(){Tr[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Cr||(document.body.addEventListener("click",kr),Cr=!0)}const kr=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in Tr){const n=t.getAttribute(e);if(n)return void Tr[e].fire({template:n})}};class Nr{constructor(){this.events={}}_getHandlersByEventName(e){return"undefined"===typeof this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const r=function(){n.removeListener(e,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];t.apply(n,o)};this.on(e,r)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,n)}catch(m){console.error(m)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}}s.eventEmitter=new Nr;const Ar=(e,t)=>{s.eventEmitter.on(e,t)},Ir=(e,t)=>{s.eventEmitter.once(e,t)},Pr=(e,t)=>{e?t?s.eventEmitter.removeListener(e,t):s.eventEmitter.removeAllListeners(e):s.eventEmitter.reset()};var Or=Object.freeze({__proto__:null,argsToParams:gr,bindClickHandler:jr,clickCancel:jt,clickConfirm:Ct,clickDeny:Tt,enableLoading:un,fire:yr,getActions:B,getCancelButton:R,getCloseButton:z,getConfirmButton:M,getContainer:S,getDenyButton:D,getFocusableElements:H,getFooter:U,getHtmlContainer:A,getIcon:j,getIconContent:k,getImage:I,getInputLabel:L,getLoader:F,getPopup:T,getProgressSteps:P,getTimerLeft:br,getTimerProgressBar:V,getTitle:N,getValidationMessage:O,increaseTimer:Sr,isDeprecatedParameter:Gn,isLoading:K,isTimerRunning:Er,isUpdatableParameter:Yn,isValidParameter:Kn,isVisible:Et,mixin:vr,off:Pr,on:Ar,once:Ir,resumeTimer:wr,showLoading:un,stopTimer:xr,toggleTimer:_r});class Mr{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Rr=["swal-title","swal-html","swal-footer"],Dr=e=>{const t="string"===typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return Hr(n),Object.assign(Lr(n),Fr(n),Br(n),Ur(n),Vr(n),zr(n),$r(n,Rr))},Lr=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach((e=>{qr(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&("boolean"===typeof $n[n]?t[n]="false"!==r:"object"===typeof $n[n]?t[n]=JSON.parse(r):t[n]=r)})),t},Fr=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]=new Function(`return ${r}`)())})),t},Br=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach((e=>{qr(e,["type","color","aria-label"]);const n=e.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(t[`${n}ButtonText`]=e.innerHTML,t[`show${f(n)}Button`]=!0,e.hasAttribute("color")&&(t[`${n}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute("aria-label")))})),t},Ur=e=>{const t={},n=e.querySelector("swal-image");return n&&(qr(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},Vr=e=>{const t={},n=e.querySelector("swal-icon");return n&&(qr(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},zr=e=>{const t={},n=e.querySelector("swal-input");n&&(qr(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach((e=>{qr(e,["value"]);const n=e.getAttribute("value");if(!n)return;const r=e.innerHTML;t.inputOptions[n]=r}))),t},$r=(e,t)=>{const n={};for(const r in t){const i=t[r],o=e.querySelector(i);o&&(qr(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n},Hr=e=>{const t=Rr.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||p(`Unrecognized element <${n}>`)}))},qr=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&p([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."])}))},Wr=10,Kr=e=>{const t=S(),n=T();"function"===typeof e.willOpen&&e.willOpen(n),s.eventEmitter.emit("willOpen",n);const r=window.getComputedStyle(document.body).overflowY;Qr(t,n,e),setTimeout((()=>{Gr(t,n)}),Wr),q()&&(Xr(t,e.scrollbarPadding,r),Ut()),W()||s.previousActiveElement||(s.previousActiveElement=document.activeElement),"function"===typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),s.eventEmitter.emit("didOpen",n),ne(t,u["no-transition"])},Yr=e=>{const t=T();if(e.target!==t)return;const n=S();t.removeEventListener("animationend",Yr),t.removeEventListener("transitionend",Yr),n.style.overflowY="auto"},Gr=(e,t)=>{fe(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Yr),t.addEventListener("transitionend",Yr)):e.style.overflowY="auto"},Xr=(e,t,n)=>{$t(),t&&"hidden"!==n&&Qt(n),setTimeout((()=>{e.scrollTop=0}))},Qr=(e,t,n)=>{te(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),oe(t,"grid"),setTimeout((()=>{te(t,n.showClass.popup),t.style.removeProperty("opacity")}),Wr)):oe(t,"grid"),te([document.documentElement,document.body],u.shown),n.heightAuto&&n.backdrop&&!n.toast&&te([document.documentElement,document.body],u["height-auto"])};var Zr={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Jr(e){e.inputValidator||("email"===e.input&&(e.inputValidator=Zr.email),"url"===e.input&&(e.inputValidator=Zr.url))}function ei(e){(!e.target||"string"===typeof e.target&&!document.querySelector(e.target)||"string"!==typeof e.target&&!e.target.appendChild)&&(p('Target parameter is not valid, defaulting to "body"'),e.target="body")}function ti(e){Jr(e),e.showLoaderOnConfirm&&!e.preConfirm&&p("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),ei(e),"string"===typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Ee(e)}let ni;var ri=new WeakMap;class ii{constructor(){if(r(this,ri,void 0),"undefined"===typeof window)return;ni=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=Object.freeze(this.constructor.argsToParams(t));this.params=o,this.isAwaitingPromise=!1,i(ri,this,this._main(ni.params))}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Jn(Object.assign({},t,e)),s.currentInstance){const e=Bt.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:t}=s.currentInstance;s.currentInstance._destroy(),t||e({isDismissed:!0}),q()&&Vt()}s.currentInstance=ni;const n=si(e,t);ti(n),Object.freeze(n),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);const r=ai(ni);return St(ni,n),Le.innerParams.set(ni,n),oi(ni,r,n)}then(e){return n(ri,this).then(e)}finally(e){return n(ri,this).finally(e)}}const oi=(e,t,n)=>new Promise(((r,i)=>{const o=t=>{e.close({isDismissed:!0,dismiss:t})};Bt.swalPromiseResolve.set(e,r),Bt.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{Sn(e)},t.denyButton.onclick=()=>{En(e)},t.cancelButton.onclick=()=>{Cn(e,o)},t.closeButton.onclick=()=>{o(kt.close)},ar(n,t,o),At(s,n,o),hn(e,n),Kr(n),li(s,n,o),ci(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),si=(e,t)=>{const n=Dr(e),r=Object.assign({},$n,t,n,e);return r.showClass=Object.assign({},$n.showClass,r.showClass),r.hideClass=Object.assign({},$n.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},ai=e=>{const t={popup:T(),container:S(),actions:B(),confirmButton:M(),denyButton:D(),cancelButton:R(),loader:F(),closeButton:z(),validationMessage:O(),progressSteps:P()};return Le.domCache.set(e,t),t},li=(e,t,n)=>{const r=V();se(r),t.timer&&(e.timeout=new Mr((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(oe(r),Q(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&pe(t.timer)}))))},ci=(e,t)=>{if(!t.toast)return b(t.allowEnterKey)?void(ui(e)||di(e,t)||It(-1,1)):(v("allowEnterKey"),void hi())},ui=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&ue(n))return n.focus(),!0;return!1},di=(e,t)=>t.focusDeny&&ue(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ue(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ue(e.confirmButton))&&(e.confirmButton.focus(),!0),hi=()=>{document.activeElement instanceof HTMLElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!==typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${e}`)}ii.prototype.disableButtons=Fn,ii.prototype.enableButtons=Ln,ii.prototype.getInput=Mn,ii.prototype.disableInput=Un,ii.prototype.enableInput=Bn,ii.prototype.hideLoading=Pn,ii.prototype.disableLoading=Pn,ii.prototype.showValidationMessage=Vn,ii.prototype.resetValidationMessage=zn,ii.prototype.close=tn,ii.prototype.closePopup=tn,ii.prototype.closeModal=tn,ii.prototype.closeToast=tn,ii.prototype.rejectPromise=rn,ii.prototype.update=er,ii.prototype._destroy=nr,Object.assign(ii,Or),Object.keys(sr).forEach((e=>{ii[e]=function(){return ni&&ni[e]?ni[e](...arguments):null}})),ii.DismissReason=kt,ii.version="11.15.10";const fi=ii;return fi.default=fi,fi}(),"undefined"!==typeof this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>hQ,scaleDiverging:()=>$2,scaleDivergingLog:()=>H2,scaleDivergingPow:()=>W2,scaleDivergingSqrt:()=>K2,scaleDivergingSymlog:()=>q2,scaleIdentity:()=>LJ,scaleImplicit:()=>uQ,scaleLinear:()=>DJ,scaleLog:()=>WJ,scaleOrdinal:()=>dQ,scalePoint:()=>pQ,scalePow:()=>t0,scaleQuantile:()=>f0,scaleQuantize:()=>p0,scaleRadial:()=>i0,scaleSequential:()=>D2,scaleSequentialLog:()=>L2,scaleSequentialPow:()=>B2,scaleSequentialQuantile:()=>V2,scaleSequentialSqrt:()=>U2,scaleSequentialSymlog:()=>F2,scaleSqrt:()=>n0,scaleSymlog:()=>XJ,scaleThreshold:()=>m0,scaleTime:()=>P2,scaleUtc:()=>O2,tickFormat:()=>MJ});var t,r=n(5043),i=n.t(r,2),o=n(4391),s=n(7950),a=n.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(zH){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,d=t.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){d=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:d,location:x.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let x={get action(){return d},get location(){return e(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(c,v),m=e,()=>{o.removeEventListener(c,v),m=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let i=f(x.location,e,n);r&&r(i,e),g=y()+1;let l=h(i,g),c=x.createHref(i);try{a.pushState(l,"",c)}catch(py){if(py instanceof DOMException&&"DataCloneError"===py.name)throw py;o.location.assign(c)}s&&m&&m({action:d,location:x.location,delta:1})},replace:function(e,n){d=t.Replace;let i=f(x.location,e,n);r&&r(i,e),g=y();let o=h(i,g),l=x.createHref(i);a.replaceState(o,"",l),s&&m&&m({action:d,location:x.location,delta:0})},go:e=>a.go(e)};return x}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let i=O(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let o=x(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=P(i);s=A(o[a],e,r)}return s}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=F([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),x(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=w(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,S=3,E=2,C=1,T=10,j=-2,k=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=j),t&&(r+=E),n.filter((e=>!k(e))).reduce(((e,t)=>e+(_.test(t)?S:""===t?C:T)),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:F([o,u.pathname]),pathnameBase:B(F([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=F([o,u.pathnameBase]))}return s}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:o,pathnameBase:s,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(py){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+py+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function M(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e,t){let n=R(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:U(r),hash:V(i)}}(i,o),d=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const $=["post","put","patch","delete"],H=(new Set($),["get",...$]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const W=r.createContext(null);const K=r.createContext(null);const Y=r.createContext(null);const G=r.createContext(null);const X=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function Z(){return null!=r.useContext(G)}function J(){return Z()||u(!1),r.useContext(G).location}function ee(e){r.useContext(Y).static||r.useLayoutEffect(e)}function te(){let{isDataRoute:e}=r.useContext(X);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);ee((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,q({fromRouteId:t},i)))}),[e,t]);return i}():function(){Z()||u(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(Y),{matches:o}=r.useContext(X),{pathname:s}=J(),a=JSON.stringify(D(o,n.v7_relativeSplatPath)),l=r.useRef(!1);ee((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=L(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:F([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e]);return c}()}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Y),{matches:o}=r.useContext(X),{pathname:s}=J(),a=JSON.stringify(D(o,i.v7_relativeSplatPath));return r.useMemo((()=>L(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function re(e,n,i,o){Z()||u(!1);let{navigator:s}=r.useContext(Y),{matches:a}=r.useContext(X),l=a[a.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=J();if(n){var p;let e="string"===typeof n?m(n):n;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||u(!1),h=e}else h=f;let g=h.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let x=le(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:F([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,o);return n&&x?r.createElement(G.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},x):x}function ie(){let e=function(){var e;let t=r.useContext(Q),n=he(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const oe=r.createElement(ie,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(X.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(W);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(X.Provider,{value:t},i)}function le(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,u=!1,h=null,f=null;var p;n&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||oe,c&&(d<0&&0===o?(p="route-fallback",!1||pe[p]||(pe[p]=!0),u=!0,f=null):d===o&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?h:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=r.useContext(W);return t||u(!1),t}function he(e){let t=r.useContext(K);return t||u(!1),t}function fe(e){let t=function(){let e=r.useContext(X);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};i.startTransition;function me(e){let{to:t,replace:n,state:i,relative:o}=e;Z()||u(!1);let{future:s,static:a}=r.useContext(Y),{matches:l}=r.useContext(X),{pathname:c}=J(),d=te(),h=L(t,D(l,s.v7_relativeSplatPath),c,"path"===o),f=JSON.stringify(h);return r.useEffect((()=>d(JSON.parse(f),{replace:n,state:i,relative:o})),[d,f,o,n,i]),null}function ge(e){u(!1)}function ye(e){let{basename:n="/",children:i=null,location:o,navigationType:s=t.Pop,navigator:a,static:l=!1,future:c}=e;Z()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:d,navigator:a,static:l,future:q({v7_relativeSplatPath:!1},c)})),[d,c,a,l]);"string"===typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=o,b=r.useMemo((()=>{let e=O(f,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:s}}),[d,f,p,g,y,v,s]);return null==b?null:r.createElement(Y.Provider,{value:h},r.createElement(G.Provider,{children:i,value:b}))}function ve(e){let{children:t,location:n}=e;return re(be(t),n)}new Promise((()=>{}));r.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,be(e.props.children,o));e.type!==ge&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=be(e.props.children,o)),n.push(s)})),n}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(zH){}new Map;const Se=i.startTransition;a.flushSync,i.useId;function Ee(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=s.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&Se?Se((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=r.forwardRef((function(e,t){let n,{onClick:i,relative:o,reloadDocument:s,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=we(e,_e),{basename:g}=r.useContext(Y),y=!1;if("string"===typeof d&&Te.test(d)&&(n=d,Ce))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=O(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(zH){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||u(!1);let{basename:i,navigator:o}=r.useContext(Y),{hash:s,pathname:a,search:l}=ne(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:F([i,a])),o.createHref({pathname:c,search:l,hash:s})}(d,{relative:o}),b=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,viewTransition:l}=void 0===t?{}:t,c=te(),u=J(),d=ne(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(d);c(e,{replace:n,state:o,preventScrollReset:s,relative:a,viewTransition:l})}}),[u,c,d,i,o,n,e,s,a,l])}(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:o,viewTransition:f});return r.createElement("a",xe({},m,{href:n||v,onClick:y||s?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var ke,Ne;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ne||(Ne={}));const Ae=!1,Ie=!1,Pe="${JSCORE_VERSION}",Oe=function(e,t){if(!e)throw Me(t)},Me=function(e){return new Error("Firebase Database ("+Pe+") INTERNAL ASSERT FAILED: "+e)},Re=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},De={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Re(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Le;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(e){const t=Re(e);return De.encodeByteArray(t,!0)},Be=function(e){return Fe(e).replace(/\./g,"")},Ue=function(e){try{return De.decodeString(e,!0)}catch(zH){console.error("base64Decode failed: ",zH)}return null};function Ve(e){return ze(void 0,e)}function ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ze(e[n],t[n]));return e}const $e=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,He=()=>{try{return $e()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDQIMqO4bJ-k4-pjjGnHGwCbCYUFUQe7Hw",REACT_APP_FIREBASE_APP_ID:"1:300630412358:web:44afc1a224507ccb764e47",REACT_APP_FIREBASE_AUTH_DOMAIN:"smartecolock.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://smartecolock-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-PNBNJ39FE0",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"300630412358",REACT_APP_FIREBASE_PROJECT_ID:"smartecolock",REACT_APP_FIREBASE_STORAGE_BUCKET:"smartecolock.firebasestorage.app",REACT_APP_GEMINI_API_KEY:"AIzaSyBYLXhvqwNsxNzMAMcxBlnAulcFOhNQhEk"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(zH){return}const t=e&&Ue(e[1]);return t&&JSON.parse(t)})()}catch(zH){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${zH}`)}},qe=e=>{var t,n;return null===(n=null===(t=He())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},We=e=>{const t=qe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ke=()=>{var e;return null===(e=He())||void 0===e?void 0:e.config},Ye=e=>{var t;return null===(t=He())||void 0===t?void 0:t[`_${e}`]};class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Xe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(o)),""].join(".")}function Qe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function Je(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function et(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function tt(){return!0===Ae||!0===Ie}function nt(){return!function(){var e;const t=null===(e=He())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(zH){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rt(){try{return"object"===typeof indexedDB}catch(zH){return!1}}function it(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(py){t(py)}}))}class ot extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}}class st{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(at,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new ot(n,o,t)}}const at=/\{\$([^}]+)}/g;function lt(e){return JSON.parse(e)}function ct(e){return JSON.stringify(e)}const ut=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=lt(Ue(o[0])||""),n=lt(Ue(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(zH){}return{header:t,claims:n,data:r,signature:i}};function dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ft(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function mt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(gt(n)&&gt(o)){if(!mt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gt(e){return null!==e&&"object"===typeof e}function yt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function vt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function bt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class xt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):u<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class wt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=_t),void 0===r.error&&(r.error=_t),void 0===r.complete&&(r.complete=_t);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(zH){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(zH){"undefined"!==typeof console&&console.error&&console.error(zH)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function _t(){}function St(e,t){return`${e} failed: ${t} argument `}const Et=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ct(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Tt(e){return e&&e._delegate?e._delegate:e}class jt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const kt="[DEFAULT]";class Nt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ge;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(zH){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(zH){if(r)return null;throw zH}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:kt})}catch(zH){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(zH){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===kt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return this.component?this.component.multipleInstances?e:kt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class At{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Nt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const It=[];var Pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pt||(Pt={}));const Ot={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Mt=Pt.INFO,Rt={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Dt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Rt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r](`[${n}]  ${e.name}:`,...o)};class Lt{constructor(e){this.name=e,this._logLevel=Mt,this._logHandler=Dt,this._userLogHandler=null,It.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ot[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}let Ft,Bt;const Ut=new WeakMap,Vt=new WeakMap,zt=new WeakMap,$t=new WeakMap,Ht=new WeakMap;let qt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Vt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Wt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Gt(this),n),Yt(Ut.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yt(e.apply(Gt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Gt(this),t,...r);return zt.set(o,t.sort?t.sort():[t]),Yt(o)}}function Kt(e){return"function"===typeof e?Wt(e):(e instanceof IDBTransaction&&function(e){if(Vt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Vt.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,Ft||(Ft=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,qt):e)}function Yt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Yt(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Ut.set(t,e)})).catch((()=>{})),Ht.set(t,e),t}(e);if($t.has(e))return $t.get(e);const t=Kt(e);return t!==e&&($t.set(e,t),Ht.set(t,e)),t}const Gt=e=>Ht.get(e);function Xt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Yt(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Yt(s.result),e.oldVersion,e.newVersion,Yt(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Qt=["get","getKey","getAll","getAllKeys","count"],Zt=["put","add","delete","clear"],Jt=new Map;function en(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Jt.get(t))return Jt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Zt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Qt.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Jt.set(t,o),o}!function(e){qt=e(qt)}((e=>({...e,get:(t,n,r)=>en(t,n)||e.get(t,n,r),has:(t,n)=>!!en(t,n)||e.has(t,n)})));class tn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const nn="@firebase/app",rn="0.10.15",on=new Lt("@firebase/app"),sn="@firebase/app-compat",an="@firebase/analytics-compat",ln="@firebase/analytics",cn="@firebase/app-check-compat",un="@firebase/app-check",dn="@firebase/auth",hn="@firebase/auth-compat",fn="@firebase/database",pn="@firebase/data-connect",mn="@firebase/database-compat",gn="@firebase/functions",yn="@firebase/functions-compat",vn="@firebase/installations",bn="@firebase/installations-compat",xn="@firebase/messaging",wn="@firebase/messaging-compat",_n="@firebase/performance",Sn="@firebase/performance-compat",En="@firebase/remote-config",Cn="@firebase/remote-config-compat",Tn="@firebase/storage",jn="@firebase/storage-compat",kn="@firebase/firestore",Nn="@firebase/vertexai",An="@firebase/firestore-compat",In="firebase",Pn="[DEFAULT]",On={[nn]:"fire-core",[sn]:"fire-core-compat",[ln]:"fire-analytics",[an]:"fire-analytics-compat",[un]:"fire-app-check",[cn]:"fire-app-check-compat",[dn]:"fire-auth",[hn]:"fire-auth-compat",[fn]:"fire-rtdb",[pn]:"fire-data-connect",[mn]:"fire-rtdb-compat",[gn]:"fire-fn",[yn]:"fire-fn-compat",[vn]:"fire-iid",[bn]:"fire-iid-compat",[xn]:"fire-fcm",[wn]:"fire-fcm-compat",[_n]:"fire-perf",[Sn]:"fire-perf-compat",[En]:"fire-rc",[Cn]:"fire-rc-compat",[Tn]:"fire-gcs",[jn]:"fire-gcs-compat",[kn]:"fire-fst",[An]:"fire-fst-compat",[Nn]:"fire-vertex","fire-js":"fire-js",[In]:"fire-js-all"},Mn=new Map,Rn=new Map,Dn=new Map;function Ln(e,t){try{e.container.addComponent(t)}catch(zH){on.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,zH)}}function Fn(e){const t=e.name;if(Dn.has(t))return on.debug(`There were multiple attempts to register component ${t}.`),!1;Dn.set(t,e);for(const n of Mn.values())Ln(n,e);for(const n of Rn.values())Ln(n,e);return!0}function Bn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Un(e){return void 0!==e.settings}const Vn=new st("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class zn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new jt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}const $n="11.0.1";function Hn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Pn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Vn.create("bad-app-name",{appName:String(i)});if(n||(n=Ke()),!n)throw Vn.create("no-options");const o=Mn.get(i);if(o){if(mt(n,o.options)&&mt(r,o.config))return o;throw Vn.create("duplicate-app",{appName:i})}const s=new At(i);for(const l of Dn.values())s.addComponent(l);const a=new zn(n,r,s);return Mn.set(i,a),a}function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;const t=Mn.get(e);if(!t&&e===Pn&&Ke())return Hn();if(!t)throw Vn.create("no-app",{appName:e});return t}function Wn(e,t,n){var r;let i=null!==(r=On[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void on.warn(e.join(" "))}Fn(new jt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Kn="firebase-heartbeat-store";let Yn=null;function Gn(){return Yn||(Yn=Xt("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Kn)}catch(zH){console.warn(zH)}}}).catch((e=>{throw Vn.create("idb-open",{originalErrorMessage:e.message})}))),Yn}async function Xn(e,t){try{const n=(await Gn()).transaction(Kn,"readwrite"),r=n.objectStore(Kn);await r.put(t,Qn(e)),await n.done}catch(zH){if(zH instanceof ot)on.warn(zH.message);else{const t=Vn.create("idb-set",{originalErrorMessage:null===zH||void 0===zH?void 0:zH.message});on.warn(t.message)}}}function Qn(e){return`${e.name}!${e.options.appId}`}class Zn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new er(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(zH){on.warn(zH)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Jn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),tr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Be(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(zH){return on.warn(zH),""}}}function Jn(){return(new Date).toISOString().substring(0,10)}class er{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!rt()&&it().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Gn()).transaction(Kn),n=await t.objectStore(Kn).get(Qn(e));return await t.done,n}catch(zH){if(zH instanceof ot)on.warn(zH.message);else{const t=Vn.create("idb-get",{originalErrorMessage:null===zH||void 0===zH?void 0:zH.message});on.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function tr(e){return Be(JSON.stringify({version:2,heartbeats:e})).length}var nr;nr="",Fn(new jt("platform-logger",(e=>new tn(e)),"PRIVATE")),Fn(new jt("heartbeat",(e=>new Zn(e)),"PRIVATE")),Wn(nn,rn,nr),Wn(nn,rn,"esm2017"),Wn("fire-js","");function rr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ir(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const or=ir,sr=new st("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ar=new Lt("@firebase/auth");function lr(e){if(ar.logLevel<=Pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ar.error(`Auth (${$n}): ${e}`,...n)}}function cr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fr(e,...n)}function ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fr(e,...n)}function dr(e,t,n){const r=Object.assign(Object.assign({},or()),{[t]:n});return new st("auth","Firebase",r).create(t,{appName:e.name})}function hr(e){return dr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return sr.create(e,...n)}function pr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fr(t,...r)}}function mr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw lr(t),new Error(t)}function gr(e,t){e||mr(t)}function yr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function vr(){return"http:"===br()||"https:"===br()}function br(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class xr{constructor(e,t){this.shortDelay=e,this.longDelay=t,gr(t>e,"Short delay should be less than long delay!"),this.isMobile=Ze()||et()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(vr()||Je()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function wr(e,t){gr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class _r{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Er=new xr(3e4,6e4);function Cr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Tr(e,t,n,r){return jr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=yt(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),_r.fetch()(Nr(e,e.config.apiHost,n,s),l)}))}async function jr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Sr),t);try{const t=new Ir(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Pr(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Pr(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Pr(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Pr(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw dr(e,a,s);cr(e,a)}}catch(zH){if(zH instanceof ot)throw zH;cr(e,"network-request-failed",{message:String(zH)})}}async function kr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Tr(e,t,n,r,i);return"mfaPendingCredential"in o&&cr(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Nr(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?wr(e.config,i):`${e.config.apiScheme}://${i}`}function Ar(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ir{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ur(this.auth,"network-request-failed"))),Er.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ur(e,t,r);return i.customData._tokenResponse=n,i}function Or(e){return void 0!==e&&void 0!==e.enterprise}class Mr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ar(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Rr(e,t){return Tr(e,"GET","/v2/recaptchaConfig",Cr(e,t))}async function Dr(e,t){return Tr(e,"POST","/v1/accounts:lookup",t)}function Lr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(zH){}}function Fr(e){return 1e3*Number(e)}function Br(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return lr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ue(n);return e?JSON.parse(e):(lr("Failed to decode base64 JWT payload"),null)}catch(zH){return lr("Caught error parsing JWT payload as JSON",null===zH||void 0===zH?void 0:zH.toString()),null}}function Ur(e){const t=Br(e);return pr(t,"internal-error"),pr("undefined"!==typeof t.exp,"internal-error"),pr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Vr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(zH){throw zH instanceof ot&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(zH)&&e.auth.currentUser===e&&await e.auth.signOut(),zH}}class zr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(zH){return void("auth/network-request-failed"===(null===zH||void 0===zH?void 0:zH.code)&&this.schedule(!0))}this.schedule()}}class $r{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lr(this.lastLoginAt),this.creationTime=Lr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Vr(e,Dr(n,{idToken:r}));pr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?qr(o.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new $r(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function qr(e){return e.map((e=>{var{providerId:t}=e,n=rr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Wr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pr(e.idToken,"internal-error"),pr("undefined"!==typeof e.idToken,"internal-error"),pr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ur(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pr(0!==e.length,"internal-error");const t=Ur(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(pr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await jr(e,{},(async()=>{const n=yt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Nr(e,r,"/v1/token",`key=${i}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",_r.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Wr;return n&&(pr("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(pr("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(pr("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wr,this.toJSON())}_performRefresh(){return mr("not implemented")}}function Kr(e,t){pr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Yr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=rr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $r(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Vr(this,this.stsTokenManager.getToken(this.auth,e));return pr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Tt(e),r=await n.getIdToken(t),i=Br(r);pr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Lr(Fr(i.auth_time)),issuedAtTime:Lr(Fr(i.iat)),expirationTime:Lr(Fr(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Tt(e);await Hr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Hr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await Vr(this,async function(e,t){return Tr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:_}=t;pr(v&&_,e,"internal-error");const S=Wr.fromJSON(this.name,_);pr("string"===typeof v,e,"internal-error"),Kr(u,e.name),Kr(d,e.name),pr("boolean"===typeof b,e,"internal-error"),pr("boolean"===typeof x,e,"internal-error"),Kr(h,e.name),Kr(f,e.name),Kr(p,e.name),Kr(m,e.name),Kr(g,e.name),Kr(y,e.name);const E=new Yr({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Wr;r.updateFromServerResponse(t);const i=new Yr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Hr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];pr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?qr(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new Wr;s.updateFromIdToken(n);const a=new Yr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new $r(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Gr=new Map;function Xr(e){gr(e instanceof Function,"Expected a class definition");let t=Gr.get(e);return t?(gr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Gr.set(e,t),t)}class Qr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qr.type="NONE";const Zr=Qr;function Jr(e,t,n){return`firebase:${e}:${t}:${n}`}class ei{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Jr(this.userKey,r.apiKey,i),this.fullPersistenceKey=Jr("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ei(Xr(Zr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Xr(Zr);const o=Jr(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=Yr._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new ei(i,e,n)):new ei(i,e,n)}}function ti(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ni(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ai(t))return"Blackberry";if(li(t))return"Webos";if(ri(t))return"Safari";if((t.includes("chrome/")||ii(t))&&!t.includes("edge/"))return"Chrome";if(si(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/firefox\//i.test(e)}function ri(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/crios\//i.test(e)}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iemobile/i.test(e)}function si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/android/i.test(e)}function ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/blackberry/i.test(e)}function li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/webos/i.test(e)}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ui(){return function(){const e=Qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();return ci(e)||si(e)||li(e)||ai(e)||/windows phone/i.test(e)||oi(e)}function hi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ti(Qe());break;case"Worker":t=`${ti(Qe())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${$n}/${r}`}class fi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(zH){r(zH)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(zH){t.reverse();for(const n of t)try{n()}catch(oz){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===zH||void 0===zH?void 0:zH.message})}}}class pi{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class mi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yi(this),this.idTokenSubscription=new yi(this),this.beforeStateQueue=new fi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ei.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(zH){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Dr(this,{idToken:e}),n=await Yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Un(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(zH){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(zH)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(zH){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hr(e)}catch(zH){if("auth/network-request-failed"!==(null===zH||void 0===zH?void 0:zH.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(hr(this));const t=e?Tt(e):null;return t&&pr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&pr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Un(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(hr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Xr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Tr(e,"GET","/v2/passwordPolicy",Cr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new pi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new st("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Tr(e,"POST","/v2/accounts:revokeToken",Cr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xr(e)||this._popupRedirectResolver;pr(t,this,"argument-error"),this.redirectPersistenceManager=await ei.create(this,[Xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(pr(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ar.logLevel<=Pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ar.warn(`Auth (${$n}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function gi(e){return Tt(e)}class yi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new wt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bi(e){return vi.loadJS(e)}function xi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class wi{constructor(){this.enterprise=new _i}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _i{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Si="NO_RECAPTCHA";class Ei{constructor(e){this.type="recaptcha-enterprise",this.auth=gi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Or(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Si)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new wi).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Rr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Mr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Or(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=vi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),bi(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Ci(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new Ei(e);let s;if(i)s=Si;else try{s=await o.verify(n)}catch(py){s=await o.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ti(e,t,n,r,i){var o,s;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ci(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Ci(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("PHONE_PROVIDER")){const i=await Ci(e,t,n);return r(e,i).catch((async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Ci(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Ci(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function ji(e){const t=gi(e),n=await Rr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Mr(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ei(t).verify()}}function ki(e,t,n){const r=gi(e);pr(r._canInitEmulator,r,"emulator-config-failed"),pr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Ni(t),{host:s,port:a}=function(e){const t=Ni(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ai(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ai(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ni(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ai(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ii{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,t){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}async function Pi(e,t){return Tr(e,"POST","/v1/accounts:signUp",t)}async function Oi(e,t){return kr(e,"POST","/v1/accounts:signInWithPassword",Cr(e,t))}async function Mi(e,t){return Tr(e,"POST","/v1/accounts:sendOobCode",Cr(e,t))}async function Ri(e,t){return Mi(e,t)}class Di extends Ii{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Di(e,t,"password")}static _fromEmailAndCode(e,t){return new Di(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ti(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return kr(e,"POST","/v1/accounts:signInWithEmailLink",Cr(e,t))}(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ti(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return kr(e,"POST","/v1/accounts:signInWithEmailLink",Cr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Li(e,t){return kr(e,"POST","/v1/accounts:signInWithIdp",Cr(e,t))}class Fi extends Ii{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=rr(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Fi(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Li(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Li(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Li(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yt(t)}return e}}async function Bi(e,t){return Tr(e,"POST","/v1/accounts:sendVerificationCode",Cr(e,t))}const Ui={USER_NOT_FOUND:"user-not-found"};class Vi extends Ii{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return kr(e,"POST","/v1/accounts:signInWithPhoneNumber",Cr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await kr(e,"POST","/v1/accounts:signInWithPhoneNumber",Cr(e,t));if(n.temporaryProof)throw Pr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return kr(e,"POST","/v1/accounts:signInWithPhoneNumber",Cr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ui)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Vi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class zi{constructor(e){var t,n,r,i,o,s;const a=vt(bt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);pr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=vt(bt(e)).link,n=t?vt(bt(t)).deep_link_id:null,r=vt(bt(e)).deep_link_id;return(r?vt(bt(r)).link:null)||r||n||t||e}(e);try{return new zi(t)}catch(n){return null}}}class $i{constructor(){this.providerId=$i.PROVIDER_ID}static credential(e,t){return Di._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zi.parseLink(t);return pr(n,"argument-error"),Di._fromEmailAndCode(e,n.code,n.tenantId)}}$i.PROVIDER_ID="password",$i.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Hi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class qi extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wi extends qi{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Wi.credential(t.oauthAccessToken)}catch(n){return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Wi.PROVIDER_ID="facebook.com";class Ki extends qi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fi._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ki.credential(n,r)}catch(i){return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com",Ki.PROVIDER_ID="google.com";class Yi extends qi{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Yi.credential(t.oauthAccessToken)}catch(n){return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com",Yi.PROVIDER_ID="github.com";class Gi extends qi{constructor(){super("twitter.com")}static credential(e,t){return Fi._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gi.credential(n,r)}catch(i){return null}}}async function Xi(e,t){return kr(e,"POST","/v1/accounts:signUp",Cr(e,t))}Gi.TWITTER_SIGN_IN_METHOD="twitter.com",Gi.PROVIDER_ID="twitter.com";class Qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Yr._fromIdTokenResponse(e,n,r),o=Zi(n);return new Qi({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Zi(n);return new Qi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Zi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ji extends ot{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ji.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ji(e,t,n,r)}}function eo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ji._fromErrorAndOperation(e,n,t,r);throw n}))}async function to(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Vr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qi._forOperation(e,"link",r)}async function no(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Un(r.app))return Promise.reject(hr(r));const i="reauthenticate";try{const o=await Vr(e,eo(r,i,t,e),n);pr(o.idToken,r,"internal-error");const s=Br(o.idToken);pr(s,r,"internal-error");const{sub:a}=s;return pr(e.uid===a,r,"user-mismatch"),Qi._forOperation(e,i,o)}catch(zH){throw"auth/user-not-found"===(null===zH||void 0===zH?void 0:zH.code)&&cr(r,"user-mismatch"),zH}}async function ro(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Un(e.app))return Promise.reject(hr(e));const r="signIn",i=await eo(e,r,t),o=await Qi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function io(e,t){return ro(gi(e),t)}function oo(e,t,n){var r;pr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),pr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(pr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function so(e){const t=gi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ao(e,t,n){if(Un(e.app))return Promise.reject(hr(e));const r=gi(e),i=Ti(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xi,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&so(e),t})),s=await Qi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function lo(e){return Tt(e).signOut()}function co(e,t){return Tr(e,"POST","/v2/accounts/mfaEnrollment:start",Cr(e,t))}new WeakMap;const uo="__sak";class ho{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class fo extends ho{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=di(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ui()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fo.type="LOCAL";const po=fo;class mo extends ho{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mo.type="SESSION";const go=mo;class yo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new yo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function vo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}yo.receivers=[];class bo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=vo("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function xo(){return window}function wo(){return"undefined"!==typeof xo().WorkerGlobalScope&&"function"===typeof xo().importScripts}const _o="firebaseLocalStorageDb",So="firebaseLocalStorage",Eo="fbase_key";class Co{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function To(e,t){return e.transaction([So],t?"readwrite":"readonly").objectStore(So)}function jo(){const e=indexedDB.open(_o,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(So,{keyPath:Eo})}catch(zH){n(zH)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(So)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(_o);return new Co(e).toPromise()}(),t(await jo()))}))}))}async function ko(e,t,n){const r=To(e,!0).put({[Eo]:t,value:n});return new Co(r).toPromise()}function No(e,t){const n=To(e,!0).delete(t);return new Co(n).toPromise()}class Ao{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await jo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(zH){if(t++>3)throw zH;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yo._getInstance(wo()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new bo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jo();return await ko(e,uo,"1"),await No(e,uo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ko(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=To(e,!1).get(t),r=await new Co(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>No(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=To(e,!1).getAll();return new Co(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ao.type="LOCAL";const Io=Ao;function Po(e,t){return Tr(e,"POST","/v2/accounts/mfaSignIn:start",Cr(e,t))}xi("rcb"),new xr(3e4,6e4);const Oo="recaptcha";async function Mo(e,t,n){var r;if(!e._getRecaptchaConfig())try{await ji(e)}catch(py){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){pr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=Ti(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Si){pr((null===n||void 0===n?void 0:n.type)===Oo,e,"argument-error");return co(e,await Ro(e,t,n))}return co(e,t)}),"PHONE_PROVIDER"),s=await o.catch((e=>Promise.reject(e)));return s.phoneSessionInfo.sessionInfo}{pr("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;pr(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Ti(e,s,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Si){pr((null===n||void 0===n?void 0:n.type)===Oo,e,"argument-error");return Po(e,await Ro(e,t,n))}return Po(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ti(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Si){pr((null===n||void 0===n?void 0:n.type)===Oo,e,"argument-error");return Bi(e,await Ro(e,t,n))}return Bi(e,t)}),"PHONE_PROVIDER"),o=await r.catch((e=>Promise.reject(e)));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ro(e,t,n){pr(n.type===Oo,e,"argument-error");const r=await n.verify();pr("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Do{constructor(e){this.providerId=Do.PROVIDER_ID,this.auth=gi(e)}verifyPhoneNumber(e,t){return Mo(this.auth,e,Tt(t))}static credential(e,t){return Vi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Do.credentialFromTaggedObject(t)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Vi._fromTokenResponse(n,r):null}}function Lo(e,t){return t?Xr(t):(pr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Do.PROVIDER_ID="phone",Do.PHONE_SIGN_IN_METHOD="phone";class Fo extends Ii{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Li(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Li(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Li(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bo(e){return ro(e.auth,new Fo(e),e.bypassAuthState)}function Uo(e){const{auth:t,user:n}=e;return pr(n,t,"internal-error"),no(n,new Fo(e),e.bypassAuthState)}async function Vo(e){const{auth:t,user:n}=e;return pr(n,t,"internal-error"),to(n,new Fo(e),e.bypassAuthState)}class zo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(zH){this.reject(zH)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(zH){this.reject(zH)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bo;case"linkViaPopup":case"linkViaRedirect":return Vo;case"reauthViaPopup":case"reauthViaRedirect":return Uo;default:cr(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $o=new xr(2e3,1e4);class Ho extends zo{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pr(e,this.auth,"internal-error"),e}async onExecution(){gr(1===this.filter.length,"Popup operations only handle one event");const e=vo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ur(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,$o.get())};e()}}Ho.currentPopupAction=null;const qo=new Map;class Wo extends zo{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=qo.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Go(t),r=Yo(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(zH){e=()=>Promise.reject(zH)}qo.set(this.auth._key(),e)}return this.bypassAuthState||qo.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ko(e,t){qo.set(e._key(),t)}function Yo(e){return Xr(e._redirectPersistence)}function Go(e){return Jr("pendingRedirect",e.config.apiKey,e.name)}async function Xo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Un(e.app))return Promise.reject(hr(e));const r=gi(e),i=Lo(r,t),o=new Wo(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Qo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Jo(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ur(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zo(e))}saveEventToCache(e){this.cachedEventUids.add(Zo(e)),this.lastProcessedEventTime=Date.now()}}function Zo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Jo(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const es=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ts=/^https?/;async function ns(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Tr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(rs(r))return}catch(n){}cr(e,"unauthorized-domain")}function rs(e){const t=yr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ts.test(n))return!1;if(es.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const is=new xr(3e4,6e4);function os(){const e=xo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ss(e){return new Promise(((t,n)=>{var r,i,o;function s(){os(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{os(),n(ur(e,"network-request-failed"))},timeout:is.get()})}if(null===(i=null===(r=xo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=xo().gapi)||void 0===o?void 0:o.load)){const t=xi("iframefcb");return xo()[t]=()=>{gapi.load?s():n(ur(e,"network-request-failed"))},bi(`${vi.gapiScript}?onload=${t}`).catch((e=>n(e)))}s()}})).catch((e=>{throw as=null,e}))}let as=null;const ls=new xr(5e3,15e3),cs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},us=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ds(e){const t=e.config;pr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?wr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:$n},i=us.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${yt(r).slice(1)}`}async function hs(e){const t=await function(e){return as=as||ss(e),as}(e),n=xo().gapi;return pr(n,e,"internal-error"),t.open({where:document.body,url:ds(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cs,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ur(e,"network-request-failed"),o=xo().setTimeout((()=>{r(i)}),ls.get());function s(){xo().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const fs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ps{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(zH){}}}function ms(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fs),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Qe().toLowerCase();n&&(a=ii(c)?"_blank":n),ni(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return ci(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ps(null);const d=window.open(t||"",a,u);pr(d,e,"popup-blocked");try{d.focus()}catch(zH){}return new ps(d)}const gs="__/auth/handler",ys="emulator/auth/handler",vs=encodeURIComponent("fac");async function bs(e,t,n,r,i,o){pr(e.config.authDomain,e,"auth-domain-config-required"),pr(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$n,eventId:i};if(t instanceof Hi){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",ft(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof qi){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${vs}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${gs}`;return wr(t,ys)}(e)}?${yt(a).slice(1)}${c}`}const xs="webStorageSupport";const ws=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=go,this._completeRedirectFn=Xo,this._overrideRedirectResult=Ko}async _openPopup(e,t,n,r){var i;gr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ms(e,await bs(e,t,n,yr(),r),vo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){xo().location.href=e}(await bs(e,t,n,yr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await hs(e),n=new Qo(e);return t.register("authEvent",(t=>{pr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xs,{type:xs},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[xs];void 0!==i&&t(!!i),cr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ns(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return di()||ri()||ci()}};var _s="@firebase/auth",Ss="1.8.0";class Es{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Cs=Ye("authIdTokenMaxAge")||300;let Ts=null;var js;!function(e){vi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ur("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),js="Browser",Fn(new jt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;pr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:js,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hi(js)},c=new mi(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Fn(new jt("auth-internal",(e=>(e=>new Es(e))(gi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(_s,Ss,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(js)),Wn(_s,Ss,"esm2017");var ks,Ns,As="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Is={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||0<c.l(e);)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],s=0;s<i;s++)o[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var s=i+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=a>>>16,s&=65535,a&=65535,n[o]=a<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=f*g,p(n,2*i+2*o),n[2*i+2*o+1]+=l*g,p(n,2*i+2*o+1),n[2*i+2*o+1]+=f*m,p(n,2*i+2*o+1),n[2*i+2*o+2]+=l*m,p(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ns=Is.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=a,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=s(Math.pow(n,l)),i=i.j(l).add(s(c))):i=(i=i.j(r)).add(s(c))}return i},ks=Is.Integer=r}).apply("undefined"!==typeof As?As:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ps,Os,Ms,Rs,Ds,Ls,Fs,Bs,Us="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vs={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Us&&Us];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let j,k=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);j=()=>{e.then(I)}};var I=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}k=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function R(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&R.aa.h.call(this)}}d(R,O);var D={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function B(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=$(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new B(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function W(e,t,n,r,i){if(r&&r.once)return Y(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)W(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,s(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=s(i)?!!i.capture:!!i,l=J(e);if(l||(e[H]=l=new V(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Y(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,s(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function G(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)G(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(o=e.g[t],n,r,i))&&(U(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(z(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function Q(e){return e in q?q[e]:q[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new R(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function J(e){return(e=e[H])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;w(t=new O(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(s=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==n){var a=s.listener,l=s.ha||s.src;s.fa&&z(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function be(){O.call(this,"c")}d(ve,O),d(be,O);var xe={},we=null;function _e(){return we=we||new ne}function Se(e){O.call(this,xe.La,e)}function Ee(e){const t=_e();re(t,new Se(t))}function Ce(e,t){O.call(this,xe.STAT_EVENT,e),this.stat=t}function Te(e){const t=_e();re(t,new Ce(t,e))}function je(e,t){O.call(this,xe.Ma,e),this.size=t}function ke(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return de(n)}catch(qV){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",d(Se,O),xe.STAT_EVENT="statevent",d(Ce,O),xe.Ma="timingevent",d(je,O),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Ie,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Me,pe),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Ie=new Me;var Le={},Fe={};function Be(e,t,n){e.L=1,e.v=dt(st(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),$e(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var s=W(n,i[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ke(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||an(e.j,e)}function Ke(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Gt(n)}nn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=ke(c(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var a=s,l=r.L;l&&(a.I=l),a.B&&(qe(a),$e(a)),r.g=s}else tn(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Re.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=h||7==t||Ee(),qe(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=qt(this.g);e="";var o=r.length,s=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ke(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Te(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ye(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),rn(d),d.M=!0,Te(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ae(this.i,this.l,a,null),Ye(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?an(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ke(this),We(this)}}}catch(zs){}},Re.prototype.cancel=function(){this.J=!0,Ke(this)},Re.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Te(17)),Ke(this),this.s=2,We(this)):He(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function st(e){return new ot(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _t(e,t){wt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return wt(e),t=Ct(e,t),e.g.has(t)}function Et(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),h(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function jt(){this.g=new fe}function kt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;s(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(zH){throw t.push(r+"type="+encodeURIComponent("_badmap")),zH}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Dt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){wt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,St(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},d(Nt,pe),Nt.prototype.g=function(){return new At(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Dt,ne);var Lt=/^https?$/i,Ft=["POST","PUT"];function Bt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),zt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),o=!Lt.test(s?s.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(qV){a=""}e.l=a+" ["+e.Z()+"]",Ut(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(zH){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(qs){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Xt(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Jt(e,n),(t=new Re(e,e.j,t)).L=2,t.v=dt(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}un(e)}function Gt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Gt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;j||A(),k||(j(),k=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Rt(r,e.m,e.o),n=new Re(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Be(n,r,t)}function Jt(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{kt(a,e,"req"+n+"_")}catch(zs){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;j||A(),k||(j(),k=!0),N.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ke(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Rt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(st(t)),n.m=null,n.P=!0,Ue(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){sn(e),rn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new je(r,n)),Qt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=ke(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?st(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new ot(null);r&&at(s,r),t&&(s.g=t),o&&lt(s,o),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Jt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Dt(new Nt({eb:n})):new Dt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function mn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function gn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function vn(e){this.g=e}(e=Dt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?me(this.o):me(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Bt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(s){Bt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(LV){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(LV){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Re(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),w(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Jt(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Mt(o)))+"&"+t:this.m&&Rt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Be(i,n,null)):Be(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Qe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ke(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Gt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),nn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Qt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ve),d(yn,be),d(vn,fn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new gn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Bs=Vs.createWebChannelTransport=function(){return new pn},Fs=Vs.getStatEventTarget=function(){return _e()},Ls=Vs.Event=xe,Ds=Vs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,Rs=Vs.ErrorCode=Pe,Oe.COMPLETE="complete",Ms=Vs.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Os=Vs.WebChannel=ge,Vs.FetchXmlHttpFactory=Nt,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,Ps=Vs.XhrIo=Dt}).apply("undefined"!==typeof Us?Us:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const zs="@firebase/firestore";class $s{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$s.UNAUTHENTICATED=new $s(null),$s.GOOGLE_CREDENTIALS=new $s("google-credentials-uid"),$s.FIRST_PARTY=new $s("first-party-uid"),$s.MOCK_USER=new $s("mock-user");let Hs="11.0.0";const qs=new Lt("@firebase/firestore");function Ws(){return qs.logLevel}function Ks(e){if(qs.logLevel<=Pt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Xs);qs.debug(`Firestore (${Hs}): ${e}`,...i)}}function Ys(e){if(qs.logLevel<=Pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Xs);qs.error(`Firestore (${Hs}): ${e}`,...i)}}function Gs(e){if(qs.logLevel<=Pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Xs);qs.warn(`Firestore (${Hs}): ${e}`,...i)}}function Xs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Qs(){const e=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Ys(e),new Error(e)}function Zs(e,t){e||Qs()}function Js(e,t){return e}const ea={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ta extends ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class na{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ra{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ia{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($s.UNAUTHENTICATED)))}shutdown(){}}class oa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sa{constructor(e){this.t=e,this.currentUser=$s.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zs(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new na;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new na,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Ks("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Ks("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new na)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ks("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Zs("string"==typeof t.accessToken),new ra(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zs(null===e||"string"==typeof e),new $s(e)}}class aa{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=$s.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class la{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new aa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($s.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ca{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ua{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Zs(void 0===this.o);const n=e=>{null!=e.error&&Ks("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Ks("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ks("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ks("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Zs("string"==typeof e.token),this.R=e.token,new ca(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function da(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ha{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=da(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function fa(e,t){return e<t?-1:e>t?1:0}function pa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class ma{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ta(ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ta(ea.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ta(ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ta(ea.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ma.fromMillis(Date.now())}static fromDate(e){return ma.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ma(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fa(this.nanoseconds,e.nanoseconds):fa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ga{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ga(e)}static min(){return new ga(new ma(0,0))}static max(){return new ga(new ma(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ya{constructor(e,t,n){void 0===t?t=0:t>e.length&&Qs(),void 0===n?n=e.length-t:n>e.length-t&&Qs(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ya.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ya?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class va extends ya{construct(e,t,n){return new va(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ta(ea.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new va(e)}static emptyPath(){return new va([])}}const ba=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xa extends ya{construct(e,t,n){return new xa(e,t,n)}static isValidIdentifier(e){return ba.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ta(ea.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ta(ea.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ta(ea.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new ta(ea.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xa(t)}static emptyPath(){return new xa([])}}class wa{constructor(e){this.path=e}static fromPath(e){return new wa(va.fromString(e))}static fromName(e){return new wa(va.fromString(e).popFirst(5))}static empty(){return new wa(va.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===va.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return va.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wa(new va(e.slice()))}}class _a{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}_a.UNKNOWN_ID=-1;function Sa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ga.fromTimestamp(1e9===r?new ma(n+1,0):new ma(n,r));return new Ca(i,wa.empty(),t)}function Ea(e){return new Ca(e.readTime,e.key,-1)}class Ca{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ca(ga.min(),wa.empty(),-1)}static max(){return new Ca(ga.max(),wa.empty(),-1)}}function Ta(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wa.comparator(e.documentKey,t.documentKey),0!==n?n:fa(e.largestBatchId,t.largestBatchId))}const ja="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ka{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Na(e){if(e.code!==ea.FAILED_PRECONDITION||e.message!==ja)throw e;Ks("LocalStore","Unexpectedly lost primary lease")}class Aa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Aa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Aa?t:Aa.resolve(t)}catch(e){return Aa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Aa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Aa.reject(t)}static resolve(e){return new Aa(((t,n)=>{t(e)}))}static reject(e){return new Aa(((t,n)=>{n(e)}))}static waitFor(e){return new Aa(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Aa.resolve(!1);for(const n of e)t=t.next((e=>e?Aa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Aa(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Aa(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Ia(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pa(e){return"IndexedDbTransactionError"===e.name}class Oa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ma(e){return null==e}function Ra(e){return 0===e&&1/e==-1/0}function Da(e){return"number"==typeof e&&Number.isInteger(e)&&!Ra(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function La(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ba(t)),t=Fa(e.get(n),t);return Ba(t)}function Fa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ba(e){return e+"\x01\x01"}Oa.oe=-1;const Ua=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Va=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],za=Va,$a=[...za,"indexConfiguration","indexState","indexEntries"];function Ha(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wa(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ka{constructor(e,t){this.comparator=e,this.root=t||Ga.EMPTY}insert(e,t){return new Ka(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ga.BLACK,null,null))}remove(e){return new Ka(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ga.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}}class Ya{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ga{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ga.RED,this.left=null!=r?r:Ga.EMPTY,this.right=null!=i?i:Ga.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ga(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ga.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ga.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ga.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ga.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qs();if(this.right.isRed())throw Qs();const e=this.left.check();if(e!==this.right.check())throw Qs();return e+(this.isRed()?0:1)}}Ga.EMPTY=null,Ga.RED=!0,Ga.BLACK=!1,Ga.EMPTY=new class{constructor(){this.size=0}get key(){throw Qs()}get value(){throw Qs()}get color(){throw Qs()}get left(){throw Qs()}get right(){throw Qs()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ga(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xa{constructor(e){this.comparator=e,this.data=new Ka(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qa(this.data.getIterator())}getIteratorFrom(e){return new Qa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Xa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xa(this.comparator);return t.data=e,t}}class Qa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Za{constructor(e){this.fields=e,e.sort(xa.comparator)}static empty(){return new Za([])}unionWith(e){let t=new Xa(xa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Za(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ja extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class el{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ja("Invalid base64 string: "+e):e}}(e);return new el(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new el(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}el.EMPTY_BYTE_STRING=new el("");const tl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nl(e){if(Zs(!!e),"string"==typeof e){let t=0;const n=tl.exec(e);if(Zs(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:rl(e.seconds),nanos:rl(e.nanos)}}function rl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function il(e){return"string"==typeof e?el.fromBase64String(e):el.fromUint8Array(e)}function ol(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sl(e){const t=e.mapValue.fields.__previous_value__;return ol(t)?sl(t):t}function al(e){const t=nl(e.mapValue.fields.__local_write_time__.timestampValue);return new ma(t.seconds,t.nanos)}class ll{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class cl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}const ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function dl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ol(e)?4:kl(e)?9007199254740991:Tl(e)?10:11:Qs()}function hl(e,t){if(e===t)return!0;const n=dl(e);if(n!==dl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return al(e).isEqual(al(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=nl(e.timestampValue),r=nl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return il(e.bytesValue).isEqual(il(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return rl(e.geoPointValue.latitude)===rl(t.geoPointValue.latitude)&&rl(e.geoPointValue.longitude)===rl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return rl(e.integerValue)===rl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=rl(e.doubleValue),r=rl(t.doubleValue);return n===r?Ra(n)===Ra(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return pa(e.arrayValue.values||[],t.arrayValue.values||[],hl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ha(n)!==Ha(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hl(n[i],r[i])))return!1;return!0}(e,t);default:return Qs()}}function fl(e,t){return void 0!==(e.values||[]).find((e=>hl(e,t)))}function pl(e,t){if(e===t)return 0;const n=dl(e),r=dl(t);if(n!==r)return fa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=rl(e.integerValue||e.doubleValue),r=rl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ml(e.timestampValue,t.timestampValue);case 4:return ml(al(e),al(t));case 5:return fa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=il(e),r=il(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=fa(n[i],r[i]);if(0!==e)return e}return fa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=fa(rl(e.latitude),rl(t.latitude));return 0!==n?n:fa(rl(e.longitude),rl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return gl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const s=e.fields||{},a=t.fields||{},l=null===(n=s.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=fa((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:gl(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ul.mapValue&&t===ul.mapValue)return 0;if(e===ul.mapValue)return 1;if(t===ul.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=fa(r[s],o[s]);if(0!==e)return e;const t=pl(n[r[s]],i[o[s]]);if(0!==t)return t}return fa(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Qs()}}function ml(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fa(e,t);const n=nl(e),r=nl(t),i=fa(n.seconds,r.seconds);return 0!==i?i:fa(n.nanos,r.nanos)}function gl(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=pl(n[i],r[i]);if(e)return e}return fa(n.length,r.length)}function yl(e){return vl(e)}function vl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=nl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return il(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return wa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=vl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${vl(e.fields[i])}`;return n+"}"}(e.mapValue):Qs()}function bl(e){switch(dl(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=sl(e);return t?16+bl(t):16;case 5:return 2*e.stringValue.length;case 6:return il(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+bl(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return qa(e.fields,((e,n)=>{t+=e.length+bl(n)})),t}(e.mapValue);default:throw Qs()}}function xl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function wl(e){return!!e&&"integerValue"in e}function _l(e){return!!e&&"arrayValue"in e}function Sl(e){return!!e&&"nullValue"in e}function El(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Cl(e){return!!e&&"mapValue"in e}function Tl(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return qa(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=jl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function kl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Nl{constructor(e){this.value=e}static empty(){return new Nl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Cl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=xa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=jl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Cl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Cl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){qa(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Nl(jl(this.value))}}function Al(e){const t=[];return qa(e.fields,((e,n)=>{const r=new xa([e]);if(Cl(n)){const e=Al(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Za(t)}class Il{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Il(e,0,ga.min(),ga.min(),ga.min(),Nl.empty(),0)}static newFoundDocument(e,t,n,r){return new Il(e,1,t,ga.min(),n,r,0)}static newNoDocument(e,t){return new Il(e,2,t,ga.min(),ga.min(),Nl.empty(),0)}static newUnknownDocument(e,t){return new Il(e,3,t,ga.min(),ga.min(),Nl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ga.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ga.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Il&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Il(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pl{constructor(e,t){this.position=e,this.inclusive=t}}function Ol(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?wa.comparator(wa.fromName(s.referenceValue),n.key):pl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Ml(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hl(e.position[n],t.position[n]))return!1;return!0}class Rl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Dl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ll{}class Fl extends Ll{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Wl(e,t,n):"array-contains"===t?new Xl(e,n):"in"===t?new Ql(e,n):"not-in"===t?new Zl(e,n):"array-contains-any"===t?new Jl(e,n):new Fl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Kl(e,n):new Yl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(pl(t,this.value)):null!==t&&dl(this.value)===dl(t)&&this.matchesComparison(pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bl extends Ll{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Bl(e,t)}matches(e){return Ul(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ul(e){return"and"===e.op}function Vl(e){return zl(e)&&Ul(e)}function zl(e){for(const t of e.filters)if(t instanceof Bl)return!1;return!0}function $l(e){if(e instanceof Fl)return e.field.canonicalString()+e.op.toString()+yl(e.value);if(Vl(e))return e.filters.map((e=>$l(e))).join(",");{const t=e.filters.map((e=>$l(e))).join(",");return`${e.op}(${t})`}}function Hl(e,t){return e instanceof Fl?function(e,t){return t instanceof Fl&&e.op===t.op&&e.field.isEqual(t.field)&&hl(e.value,t.value)}(e,t):e instanceof Bl?function(e,t){return t instanceof Bl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Hl(n,t.filters[r])),!0)}(e,t):void Qs()}function ql(e){return e instanceof Fl?function(e){return`${e.field.canonicalString()} ${e.op} ${yl(e.value)}`}(e):e instanceof Bl?function(e){return e.op.toString()+" {"+e.getFilters().map(ql).join(" ,")+"}"}(e):"Filter"}class Wl extends Fl{constructor(e,t,n){super(e,t,n),this.key=wa.fromName(n.referenceValue)}matches(e){const t=wa.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kl extends Fl{constructor(e,t){super(e,"in",t),this.keys=Gl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Yl extends Fl{constructor(e,t){super(e,"not-in",t),this.keys=Gl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>wa.fromName(e.referenceValue)))}class Xl extends Fl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _l(t)&&fl(t.arrayValue,this.value)}}class Ql extends Fl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fl(this.value.arrayValue,t)}}class Zl extends Fl{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fl(this.value.arrayValue,t)}}class Jl extends Fl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_l(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>fl(this.value.arrayValue,e)))}}class ec{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ue=null}}function tc(e){return new ec(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function nc(e){const t=Js(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>$l(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ma(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>yl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>yl(e))).join(",")),t.ue=e}return t.ue}function rc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Dl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Hl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ml(e.startAt,t.startAt)&&Ml(e.endAt,t.endAt)}function ic(e){return wa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class oc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sc(e,t,n,r,i,o,s,a){return new oc(e,t,n,r,i,o,s,a)}function ac(e){return new oc(e)}function lc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function cc(e){return null!==e.collectionGroup}function uc(e){const t=Js(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Xa(xa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Rl(r,n))})),e.has(xa.keyField().canonicalString())||t.ce.push(new Rl(xa.keyField(),n))}return t.ce}function dc(e){const t=Js(e);return t.le||(t.le=hc(t,uc(e))),t.le}function hc(e,t){if("F"===e.limitType)return tc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Rl(e.field,t)}));const n=e.endAt?new Pl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Pl(e.startAt.position,e.startAt.inclusive):null;return tc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fc(e,t){const n=e.filters.concat([t]);return new oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pc(e,t,n){return new oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mc(e,t){return rc(dc(e),dc(t))&&e.limitType===t.limitType}function gc(e){return`${nc(dc(e))}|lt:${e.limitType}`}function yc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>ql(e))).join(", ")}]`),Ma(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>yl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>yl(e))).join(",")),`Target(${t})`}(dc(e))}; limitType=${e.limitType})`}function vc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of uc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ol(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,uc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ol(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,uc(e),t))}(e,t)}function bc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xc(e){return(t,n)=>{let r=!1;for(const i of uc(e)){const e=wc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function wc(e,t,n){const r=e.field.isKeyField()?wa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?pl(r,i):Qs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qs()}}class _c{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qa(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Wa(this.inner)}size(){return this.innerSize}}const Sc=new Ka(wa.comparator);function Ec(){return Sc}const Cc=new Ka(wa.comparator);function Tc(){let e=Cc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function jc(e){let t=Cc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function kc(){return Ac()}function Nc(){return Ac()}function Ac(){return new _c((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ic=new Ka(wa.comparator),Pc=new Xa(wa.comparator);function Oc(){let e=Pc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Mc=new Xa(fa);function Rc(){return Mc}function Dc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ra(t)?"-0":t}}function Lc(e){return{integerValue:""+e}}function Fc(e,t){return Da(t)?Lc(t):Dc(e,t)}class Bc{constructor(){this._=void 0}}function Uc(e,t,n){return e instanceof $c?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ol(t)&&(t=sl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hc?qc(e,t):e instanceof Wc?Kc(e,t):function(e,t){const n=zc(e,t),r=Gc(n)+Gc(e.Pe);return wl(n)&&wl(e.Pe)?Lc(r):Dc(e.serializer,r)}(e,t)}function Vc(e,t,n){return e instanceof Hc?qc(e,t):e instanceof Wc?Kc(e,t):n}function zc(e,t){return e instanceof Yc?function(e){return wl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class $c extends Bc{}class Hc extends Bc{constructor(e){super(),this.elements=e}}function qc(e,t){const n=Xc(t);for(const r of e.elements)n.some((e=>hl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Wc extends Bc{constructor(e){super(),this.elements=e}}function Kc(e,t){let n=Xc(t);for(const r of e.elements)n=n.filter((e=>!hl(e,r)));return{arrayValue:{values:n}}}class Yc extends Bc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Gc(e){return rl(e.integerValue||e.doubleValue)}function Xc(e){return _l(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Qc{constructor(e,t){this.version=e,this.transformResults=t}}class Zc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zc}static exists(e){return new Zc(void 0,e)}static updateTime(e){return new Zc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class eu{}function tu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new du(e.key,Zc.none()):new su(e.key,e.data,Zc.none());{const n=e.data,r=Nl.empty();let i=new Xa(xa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new au(e.key,r,new Za(i.toArray()),Zc.none())}}function nu(e,t,n){e instanceof su?function(e,t,n){const r=e.value.clone(),i=cu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof au?function(e,t,n){if(!Jc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=cu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(lu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ru(e,t,n,r){return e instanceof su?function(e,t,n,r){if(!Jc(e.precondition,t))return n;const i=e.value.clone(),o=uu(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof au?function(e,t,n,r){if(!Jc(e.precondition,t))return n;const i=uu(e.fieldTransforms,r,t),o=t.data;return o.setAll(lu(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Jc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function iu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=zc(r.transform,e||null);null!=i&&(null===n&&(n=Nl.empty()),n.set(r.field,i))}return n||null}function ou(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&pa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hc&&t instanceof Hc||e instanceof Wc&&t instanceof Wc?pa(e.elements,t.elements,hl):e instanceof Yc&&t instanceof Yc?hl(e.Pe,t.Pe):e instanceof $c&&t instanceof $c}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class su extends eu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class au extends eu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function cu(e,t,n){const r=new Map;Zs(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Vc(s,a,n[i]))}return r}function uu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Uc(e,o,t))}return r}class du extends eu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hu extends eu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&nu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ru(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ru(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Nc();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=tu(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(ga.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oc())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,((e,t)=>ou(e,t)))&&pa(this.baseMutations,e.baseMutations,((e,t)=>ou(e,t)))}}class pu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Zs(e.mutations.length===n.length);let r=Ic;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new pu(e,t,n,r)}}class mu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gu{constructor(e,t){this.count=e,this.unchangedNames=t}}var yu,vu;function bu(e){switch(e){default:return Qs();case ea.CANCELLED:case ea.UNKNOWN:case ea.DEADLINE_EXCEEDED:case ea.RESOURCE_EXHAUSTED:case ea.INTERNAL:case ea.UNAVAILABLE:case ea.UNAUTHENTICATED:return!1;case ea.INVALID_ARGUMENT:case ea.NOT_FOUND:case ea.ALREADY_EXISTS:case ea.PERMISSION_DENIED:case ea.FAILED_PRECONDITION:case ea.ABORTED:case ea.OUT_OF_RANGE:case ea.UNIMPLEMENTED:case ea.DATA_LOSS:return!0}}function xu(e){if(void 0===e)return Ys("GRPC error has no .code"),ea.UNKNOWN;switch(e){case yu.OK:return ea.OK;case yu.CANCELLED:return ea.CANCELLED;case yu.UNKNOWN:return ea.UNKNOWN;case yu.DEADLINE_EXCEEDED:return ea.DEADLINE_EXCEEDED;case yu.RESOURCE_EXHAUSTED:return ea.RESOURCE_EXHAUSTED;case yu.INTERNAL:return ea.INTERNAL;case yu.UNAVAILABLE:return ea.UNAVAILABLE;case yu.UNAUTHENTICATED:return ea.UNAUTHENTICATED;case yu.INVALID_ARGUMENT:return ea.INVALID_ARGUMENT;case yu.NOT_FOUND:return ea.NOT_FOUND;case yu.ALREADY_EXISTS:return ea.ALREADY_EXISTS;case yu.PERMISSION_DENIED:return ea.PERMISSION_DENIED;case yu.FAILED_PRECONDITION:return ea.FAILED_PRECONDITION;case yu.ABORTED:return ea.ABORTED;case yu.OUT_OF_RANGE:return ea.OUT_OF_RANGE;case yu.UNIMPLEMENTED:return ea.UNIMPLEMENTED;case yu.DATA_LOSS:return ea.DATA_LOSS;default:return Qs()}}(vu=yu||(yu={}))[vu.OK=0]="OK",vu[vu.CANCELLED=1]="CANCELLED",vu[vu.UNKNOWN=2]="UNKNOWN",vu[vu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vu[vu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vu[vu.NOT_FOUND=5]="NOT_FOUND",vu[vu.ALREADY_EXISTS=6]="ALREADY_EXISTS",vu[vu.PERMISSION_DENIED=7]="PERMISSION_DENIED",vu[vu.UNAUTHENTICATED=16]="UNAUTHENTICATED",vu[vu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vu[vu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vu[vu.ABORTED=10]="ABORTED",vu[vu.OUT_OF_RANGE=11]="OUT_OF_RANGE",vu[vu.UNIMPLEMENTED=12]="UNIMPLEMENTED",vu[vu.INTERNAL=13]="INTERNAL",vu[vu.UNAVAILABLE=14]="UNAVAILABLE",vu[vu.DATA_LOSS=15]="DATA_LOSS";let wu=null;function _u(){return new TextEncoder}const Su=new ks([4294967295,4294967295],0);function Eu(e){const t=_u().encode(e),n=new Ns;return n.update(t),new Uint8Array(n.digest())}function Cu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ks([n,r],0),new ks([i,o],0)]}class Tu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(n<0)throw new ju(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ju(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ks.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ks.fromNumber(n)));return 1===r.compare(Su)&&(r=new ks([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Eu(e),[n,r]=Cu(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tu(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ie)return;const t=Eu(e),[n,r]=Cu(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ku{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ku(ga.min(),r,new Ka(fa),Ec(),Oc())}}class Nu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Nu(n,t,Oc(),Oc(),Oc())}}class Au{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Iu{constructor(e,t){this.targetId=e,this.me=t}}class Pu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:el.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ou{constructor(){this.fe=0,this.ge=Du(),this.pe=el.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oc(),t=Oc(),n=Oc();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qs()}})),new Nu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Du()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zs(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Mu{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ec(),this.qe=Ru(),this.Qe=new Ka(fa)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Qs()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(ic(i))if(0===n){const e=new wa(i.path);this.Ue(t,e,Il.newNoDocument(e,ga.min()))}else Zs(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==wu||wu.et(function(e,t,n,r,i){var o,s,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=il(n).toUint8Array()}catch(e){if(e instanceof Ja)return Gs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Tu(o,r,i)}catch(e){return Gs(e instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ie?null:s}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&ic(i.target)){const t=new wa(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Il.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=Oc();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new ku(e,t,this.Qe,this.ke,n);return this.ke=Ec(),this.qe=Ru(),this.Qe=new Ka(fa),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ou,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xa(fa),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ks("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ou),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ru(){return new Ka(wa.comparator)}function Du(){return new Ka(wa.comparator)}const Lu={asc:"ASCENDING",desc:"DESCENDING"},Fu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bu={and:"AND",or:"OR"};class Uu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vu(e,t){return e.useProto3Json||Ma(t)?t:{value:t}}function zu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $u(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Hu(e,t){return zu(e,t.toTimestamp())}function qu(e){return Zs(!!e),ga.fromTimestamp(function(e){const t=nl(e);return new ma(t.seconds,t.nanos)}(e))}function Wu(e,t){return Ku(e,t).canonicalString()}function Ku(e,t){const n=function(e){return new va(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Yu(e){const t=va.fromString(e);return Zs(pd(t)),t}function Gu(e,t){return Wu(e.databaseId,t.path)}function Xu(e,t){const n=Yu(t);if(n.get(1)!==e.databaseId.projectId)throw new ta(ea.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ta(ea.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wa(ed(n))}function Qu(e,t){return Wu(e.databaseId,t)}function Zu(e){const t=Yu(e);return 4===t.length?va.emptyPath():ed(t)}function Ju(e){return new va(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ed(e){return Zs(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function td(e,t,n){return{name:Gu(e,t),fields:n.value.mapValue.fields}}function nd(e,t){let n;if(t instanceof su)n={update:td(e,t.key,t.value)};else if(t instanceof du)n={delete:Gu(e,t.key)};else if(t instanceof au)n={update:td(e,t.key,t.data),updateMask:fd(t.fieldMask)};else{if(!(t instanceof hu))return Qs();n={verify:Gu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof $c)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yc)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Qs()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Hu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qs()}(e,t.precondition)),n}function rd(e,t){return{documents:[Qu(e,t.path)]}}function id(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qu(e,i);const o=function(e){if(0!==e.length)return hd(Bl.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ud(e.field),direction:ad(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Vu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function od(e){let t=Zu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zs(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=sd(e);return t instanceof Bl&&Vl(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Rl(dd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ma(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Pl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Pl(n,t)}(n.endAt)),sc(t,i,s,o,a,"F",l,c)}function sd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=dd(e.unaryFilter.field);return Fl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=dd(e.unaryFilter.field);return Fl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=dd(e.unaryFilter.field);return Fl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=dd(e.unaryFilter.field);return Fl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qs()}}(e):void 0!==e.fieldFilter?function(e){return Fl.create(dd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qs()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Bl.create(e.compositeFilter.filters.map((e=>sd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Qs()}}(e.compositeFilter.op))}(e):Qs()}function ad(e){return Lu[e]}function ld(e){return Fu[e]}function cd(e){return Bu[e]}function ud(e){return{fieldPath:e.canonicalString()}}function dd(e){return xa.fromServerFormat(e.fieldPath)}function hd(e){return e instanceof Fl?function(e){if("=="===e.op){if(El(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NAN"}};if(Sl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(El(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NOT_NAN"}};if(Sl(e.value))return{unaryFilter:{field:ud(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ud(e.field),op:ld(e.op),value:e.value}}}(e):e instanceof Bl?function(e){const t=e.getFilters().map((e=>hd(e)));return 1===t.length?t[0]:{compositeFilter:{op:cd(e.op),filters:t}}}(e):Qs()}function fd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function pd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class md{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ga.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ga.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:el.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new md(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new md(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new md(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new md(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gd{constructor(e){this.ct=e}}function yd(e){const t=od({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?pc(t,t.limit,"L"):t}class vd{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(rl(e.integerValue));else if("doubleValue"in e){const n=rl(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Ra(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=nl(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(il(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?kl(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Tl(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Qs()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const o="value",s=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(rl(s)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),wa.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}vd.vt=new vd;class bd{constructor(){this.un=new xd}addToCollectionParentIndex(e,t){return this.un.add(t),Aa.resolve()}getCollectionParents(e,t){return Aa.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Aa.resolve()}deleteFieldIndex(e,t){return Aa.resolve()}deleteAllFieldIndexes(e){return Aa.resolve()}createTargetIndexes(e,t){return Aa.resolve()}getDocumentsMatchingTarget(e,t){return Aa.resolve(null)}getIndexType(e,t){return Aa.resolve(0)}getFieldIndexes(e,t){return Aa.resolve([])}getNextCollectionGroupToUpdate(e){return Aa.resolve(null)}getMinOffset(e,t){return Aa.resolve(Ca.min())}getMinOffsetFromCollectionGroup(e,t){return Aa.resolve(Ca.min())}updateCollectionGroup(e,t,n){return Aa.resolve()}updateIndexEntries(e,t){return Aa.resolve()}}class xd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Xa(va.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Xa(va.comparator)).toArray()}}new Uint8Array(0);const wd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _d{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new _d(e,_d.DEFAULT_COLLECTION_PERCENTILE,_d.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}_d.DEFAULT_COLLECTION_PERCENTILE=10,_d.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_d.DEFAULT=new _d(41943040,_d.DEFAULT_COLLECTION_PERCENTILE,_d.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_d.DISABLED=new _d(-1,0,0);class Sd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Sd(0)}static kn(){return new Sd(-1)}}function Ed(e,t){let[n,r]=e,[i,o]=t;const s=fa(n,i);return 0===s?fa(r,o):s}class Cd{constructor(e){this.Un=e,this.buffer=new Xa(Ed),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ed(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Td{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){Ks("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pa(e)?Ks("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Na(e)}await this.Hn(3e5)}))}}class jd{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Aa.resolve(Oa.oe);const n=new Cd(t);return this.Jn.forEachTarget(e,(e=>n.zn(e.sequenceNumber))).next((()=>this.Jn.Zn(e,(e=>n.zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ks("LruGarbageCollector","Garbage collection skipped; disabled"),Aa.resolve(wd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ks("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wd):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ks("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Ws()<=Pt.DEBUG&&Ks("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(s-o)+"ms\n"+`\tRemoved ${i} targets in `+(a-s)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),Aa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function kd(e,t){return new jd(e,t)}class Nd{constructor(){this.changes=new _c((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Il.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Aa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ad{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Id{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ru(n.mutation,e,Za.empty(),ma.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Oc()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oc();const r=kc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Tc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=kc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Oc())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ec();const o=Ac(),s=Ac();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof au)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),ru(s.mutation,t,s.mutation.getFieldMask(),ma.now())):o.set(t.key,Za.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new Ad(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Ac();let r=new Ka(((e,t)=>e-t)),i=Oc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Za.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Oc()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Nc();l.forEach((e=>{if(!i.has(e)){const r=tu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Aa.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return wa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Aa.resolve(kc());let s=-1,a=i;return o.next((t=>Aa.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Aa.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Oc()))).next((e=>({batchId:s,changes:jc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wa(t)).next((e=>{let t=Tc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Tc();return this.indexManager.getCollectionParents(e,i).next((s=>Aa.forEach(s,(s=>{const a=function(e,t){return new oc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Il.newInvalidDocument(r)))}));let n=Tc();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&ru(o.mutation,r,Za.empty(),ma.now()),vc(t,r)&&(n=n.insert(e,r))})),n}))}}class Pd{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Aa.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:qu(e.createTime)}}(t)),Aa.resolve()}getNamedQuery(e,t){return Aa.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:yd(e.bundledQuery),readTime:qu(e.readTime)}}(t)),Aa.resolve()}}class Od{constructor(){this.overlays=new Ka(wa.comparator),this.Ir=new Map}getOverlay(e,t){return Aa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=kc();return Aa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Aa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Aa.resolve()}getOverlaysForCollection(e,t,n){const r=kc(),i=t.length+1,o=new wa(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Aa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ka(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=kc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=kc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Aa.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new mu(t,n));let i=this.Ir.get(t);void 0===i&&(i=Oc(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Md{constructor(){this.sessionToken=el.EMPTY_BYTE_STRING}getSessionToken(e){return Aa.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Aa.resolve()}}class Rd{constructor(){this.Tr=new Xa(Dd.Er),this.dr=new Xa(Dd.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Dd(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Dd(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new wa(new va([])),n=new Dd(t,e),r=new Dd(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new wa(new va([])),n=new Dd(t,e),r=new Dd(t,e+1);let i=Oc();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Dd(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Dd{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return wa.comparator(e.key,t.key)||fa(e.wr,t.wr)}static Ar(e,t){return fa(e.wr,t.wr)||wa.comparator(e.key,t.key)}}class Ld{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Xa(Dd.Er)}checkEmpty(e){return Aa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fu(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.br=this.br.add(new Dd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Aa.resolve(o)}lookupMutationBatch(e,t){return Aa.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Aa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Aa.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Aa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dd(t,0),r=new Dd(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Aa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xa(fa);return t.forEach((e=>{const t=new Dd(e,0),r=new Dd(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Aa.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wa.isDocumentKey(i)||(i=i.child(""));const o=new Dd(new wa(i),0);let s=new Xa(fa);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.wr)),!0)}),o),Aa.resolve(this.Cr(s))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Zs(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Aa.forEach(t.mutations,(r=>{const i=new Dd(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Dd(t,0),r=this.br.firstAfterOrEqual(n);return Aa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Aa.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Fd{constructor(e){this.Mr=e,this.docs=new Ka(wa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Aa.resolve(n?n.document.mutableCopy():Il.newInvalidDocument(t))}getEntries(e,t){let n=Ec();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Il.newInvalidDocument(e))})),Aa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ec();const o=t.path,s=new wa(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ta(Ea(s),n)<=0||(r.has(s.key)||vc(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Aa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Qs()}Or(e,t){return Aa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Bd(this)}getSize(e){return Aa.resolve(this.size)}}class Bd extends Nd{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Aa.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Ud{constructor(e){this.persistence=e,this.Nr=new _c((e=>nc(e)),rc),this.lastRemoteSnapshotVersion=ga.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rd,this.targetCount=0,this.kr=Sd.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Aa.resolve()}getLastRemoteSnapshotVersion(e){return Aa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Aa.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Aa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Aa.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Sd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Aa.resolve()}updateTargetData(e,t){return this.Kn(t),Aa.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Aa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Aa.waitFor(i).next((()=>r))}getTargetCount(e){return Aa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Aa.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Aa.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Aa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Aa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Aa.resolve(n)}containsKey(e,t){return Aa.resolve(this.Br.containsKey(t))}}class Vd{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Oa(0),this.Kr=!1,this.Kr=!0,this.$r=new Md,this.referenceDelegate=e(this),this.Ur=new Ud(this),this.indexManager=new bd,this.remoteDocumentCache=function(e){return new Fd(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new gd(t),this.Gr=new Pd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Od,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Ld(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ks("MemoryPersistence","Starting transaction:",e);const r=new zd(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Aa.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class zd extends ka{constructor(e){super(),this.currentSequenceNumber=e}}class $d{constructor(e){this.persistence=e,this.Jr=new Rd,this.Yr=null}static Zr(e){return new $d(e)}get Xr(){if(this.Yr)return this.Yr;throw Qs()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Aa.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Aa.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Aa.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Aa.forEach(this.Xr,(n=>{const r=wa.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,ga.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Aa.or([()=>Aa.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Hd{constructor(e,t){this.persistence=e,this.ti=new _c((e=>La(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=kd(this,t)}static Zr(e,t){return new Hd(e,t)}zr(){}jr(e){return Aa.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){const t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}er(e){let t=0;return this.Zn(e,(e=>{t++})).next((()=>t))}Zn(e,t){return Aa.forEach(this.ti,((n,r)=>this.nr(e,n,r).next((e=>e?Aa.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Or(e,(r=>this.nr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,ga.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),Aa.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),Aa.resolve()}removeReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),Aa.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),Aa.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bl(e.data.value)),t}nr(e,t,n){return Aa.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ti.get(t);return Aa.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Oc(),r=Oc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qd(e,t.fromCache,n,r)}}class Wd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Kd{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=nt()?8:Ia(Qe())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Wd;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(Ws()<=Pt.DEBUG&&Ks("QueryEngine","SDK will not create cache indexes for query:",yc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Aa.resolve()):(Ws()<=Pt.DEBUG&&Ks("QueryEngine","Query:",yc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Ws()<=Pt.DEBUG&&Ks("QueryEngine","The SDK decides to create cache indexes for query:",yc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dc(t))):Aa.resolve())}Yi(e,t){if(lc(t))return Aa.resolve(null);let n=dc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=pc(t,null,"F"),n=dc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Oc(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ts(t,r);return this.ns(t,o,i,n.readTime)?this.Yi(e,pc(t,null,"F")):this.rs(e,o,t,n)}))))})))))}Zi(e,t,n,r){return lc(t)||r.isEqual(ga.min())?Aa.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(t,i);return this.ns(t,o,n,r)?Aa.resolve(null):(Ws()<=Pt.DEBUG&&Ks("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yc(t)),this.rs(e,o,t,Sa(r,-1)).next((e=>e)))}))}ts(e,t){let n=new Xa(xc(e));return t.forEach(((t,r)=>{vc(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return Ws()<=Pt.DEBUG&&Ks("QueryEngine","Using full collection scan to execute query:",yc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ca.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Yd{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Ka(fa),this._s=new _c((e=>nc(e)),rc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Id(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Gd(e,t,n,r){return new Yd(e,t,n,r)}async function Xd(e,t){const n=Js(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Oc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Qd(e){const t=Js(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function Zd(e,t,n){let r=Oc(),i=Oc();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ec();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ga.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Ks("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{Ps:r,Is:i}}))}function Jd(e,t){const n=Js(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function eh(e,t){const n=Js(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Aa.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new md(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function th(e,t,n){const r=Js(e),i=r.os.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Pa(e))throw e;Ks("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function nh(e,t,n){const r=Js(e);let i=ga.min(),o=Oc();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Js(e),i=r._s.get(n);return void 0!==i?Aa.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,dc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:ga.min(),n?o:Oc()))).next((e=>(rh(r,bc(t),e),{documents:e,Ts:o})))))}function rh(e,t,n){let r=e.us.get(t)||ga.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class ih{constructor(){this.activeTargetIds=Rc()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oh{constructor(){this.so=new ih,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ih,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sh{_o(e){}shutdown(){}}class ah{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ks("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ks("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lh=null;function ch(){return null===lh?lh=268435456+Math.round(2147483648*Math.random()):lh++,"0x"+lh.toString(16)}const uh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dh{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const hh="WebChannelConnection";class fh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const o=ch(),s=this.xo(e,t.toUriEncodedString());Ks("RestConnection",`Sending RPC '${e}' ${o}:`,s,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,s,a,n).then((t=>(Ks("RestConnection",`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw Gs("RestConnection",`RPC '${e}' ${o} failed with error: `,t,"url: ",s,"request:",n),t}))}Lo(e,t,n,r,i,o){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=uh[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=ch();return new Promise(((o,s)=>{const a=new Ps;a.setWithCredentials(!0),a.listenOnce(Ms.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Rs.NO_ERROR:const t=a.getResponseJson();Ks(hh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case Rs.TIMEOUT:Ks(hh,`RPC '${e}' ${i} timed out`),s(new ta(ea.DEADLINE_EXCEEDED,"Request time out"));break;case Rs.HTTP_ERROR:const n=a.getStatus();if(Ks(hh,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ea).indexOf(t)>=0?t:ea.UNKNOWN}(t.status);s(new ta(e,t.message))}else s(new ta(ea.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new ta(ea.UNAVAILABLE,"Connection failed."));break;default:Qs()}}finally{Ks(hh,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Ks(hh,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=ch(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Bs(),s=Fs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ks(hh,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const f=new dh({Io:t=>{h?Ks(hh,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Ks(hh,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Ks(hh,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Os.EventType.OPEN,(()=>{h||(Ks(hh,`RPC '${e}' stream ${r} transport opened.`),f.yo())})),p(u,Os.EventType.CLOSE,(()=>{h||(h=!0,Ks(hh,`RPC '${e}' stream ${r} transport closed`),f.So())})),p(u,Os.EventType.ERROR,(t=>{h||(h=!0,Gs(hh,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new ta(ea.UNAVAILABLE,"The operation could not be completed")))})),p(u,Os.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Zs(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Ks(hh,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=yu[e];if(void 0!==t)return xu(t)}(t),i=s.message;void 0===n&&(n=ea.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.So(new ta(n,i)),u.close()}else Ks(hh,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}})),p(s,Ls.STAT_EVENT,(t=>{t.stat===Ds.PROXY?Ks(hh,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ds.NOPROXY&&Ks(hh,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.wo()}),0),f}}function ph(){return"undefined"!=typeof document?document:null}function mh(e){return new Uu(e,!0)}class gh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Ks("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class yh{constructor(e,t,n,r,i,o,s,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gh(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===ea.RESOURCE_EXHAUSTED?(Ys(t.toString()),Ys("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ea.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new ta(ea.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ks("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(Ks("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vh extends yh{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Zs(void 0===t||"string"==typeof t),el.fromBase64String(t||"")):(Zs(void 0===t||t instanceof Buffer||t instanceof Uint8Array),el.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?ea.UNKNOWN:xu(e.code);return new ta(t,e.message||"")}(s);n=new Pu(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xu(e,r.document.name),o=qu(r.document.updateTime),s=r.document.createTime?qu(r.document.createTime):ga.min(),a=new Nl({mapValue:{fields:r.document.fields}}),l=Il.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Au(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Xu(e,r.document),o=r.readTime?qu(r.readTime):ga.min(),s=Il.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Au([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Xu(e,r.document),o=r.removedTargetIds||[];n=new Au([],o,i,null)}else{if(!("filter"in t))return Qs();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new gu(r,i),s=e.targetId;n=new Iu(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ga.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ga.min():t.readTime?qu(t.readTime):ga.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Ju(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ic(r)?{documents:rd(e,r)}:{query:id(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=$u(e,t.resumeToken);const r=Vu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ga.min())>0){n.readTime=zu(e,t.snapshotVersion.toTimestamp());const r=Vu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qs()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Ju(this.serializer),t.removeTarget=e,this.a_(t)}}class bh extends yh{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Zs(!!e.streamToken),this.lastStreamToken=e.streamToken,Zs(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Zs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Zs(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?qu(e.updateTime):qu(t);return n.isEqual(ga.min())&&(n=qu(t)),new Qc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=qu(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Ju(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>nd(this.serializer,e)))};this.a_(t)}}class xh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ta(ea.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Mo(e,Ku(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ta(ea.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.Lo(e,Ku(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ea.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ta(ea.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class wh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ys(t),this.D_=!1):Ks("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class _h{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{Ih(this)&&(Ks("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Js(e);t.L_.add(4),await Eh(t),t.q_.set("Unknown"),t.L_.delete(4),await Sh(t)}(this))}))})),this.q_=new wh(n,r)}}async function Sh(e){if(Ih(e))for(const t of e.B_)await t(!0)}async function Eh(e){for(const t of e.B_)await t(!1)}function Ch(e,t){const n=Js(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Ah(n)?Nh(n):Xh(n).r_()&&jh(n,t))}function Th(e,t){const n=Js(e),r=Xh(n);n.N_.delete(t),r.r_()&&kh(n,t),0===n.N_.size&&(r.r_()?r.o_():Ih(n)&&n.q_.set("Unknown"))}function jh(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ga.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Xh(e).A_(t)}function kh(e,t){e.Q_.xe(t),Xh(e).R_(t)}function Nh(e){e.Q_=new Mu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Xh(e).start(),e.q_.v_()}function Ah(e){return Ih(e)&&!Xh(e).n_()&&e.N_.size>0}function Ih(e){return 0===Js(e).L_.size}function Ph(e){e.Q_=void 0}async function Oh(e){e.q_.set("Online")}async function Mh(e){e.N_.forEach(((t,n)=>{jh(e,t)}))}async function Rh(e,t){Ph(e),Ah(e)?(e.q_.M_(t),Nh(e)):e.q_.set("Unknown")}async function Dh(e,t,n){if(e.q_.set("Online"),t instanceof Pu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Ks("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Lh(e,n)}else if(t instanceof Au?e.Q_.Ke(t):t instanceof Iu?e.Q_.He(t):e.Q_.We(t),!n.isEqual(ga.min()))try{const t=await Qd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(el.EMPTY_BYTE_STRING,r.snapshotVersion)),kh(e,t);const i=new md(r.target,t,n,r.sequenceNumber);jh(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ks("RemoteStore","Failed to raise snapshot:",t),await Lh(e,t)}}async function Lh(e,t,n){if(!Pa(t))throw t;e.L_.add(1),await Eh(e),e.q_.set("Offline"),n||(n=()=>Qd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ks("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Sh(e)}))}function Fh(e,t){return t().catch((n=>Lh(e,n,t)))}async function Bh(e){const t=Js(e),n=Qh(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Uh(t);)try{const e=await Jd(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Vh(t,e)}catch(e){await Lh(t,e)}zh(t)&&$h(t)}function Uh(e){return Ih(e)&&e.O_.length<10}function Vh(e,t){e.O_.push(t);const n=Qh(e);n.r_()&&n.V_&&n.m_(t.mutations)}function zh(e){return Ih(e)&&!Qh(e).n_()&&e.O_.length>0}function $h(e){Qh(e).start()}async function Hh(e){Qh(e).p_()}async function qh(e){const t=Qh(e);for(const n of e.O_)t.m_(n.mutations)}async function Wh(e,t,n){const r=e.O_.shift(),i=pu.from(r,t,n);await Fh(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Bh(e)}async function Kh(e,t){t&&Qh(e).V_&&await async function(e,t){if(function(e){return bu(e)&&e!==ea.ABORTED}(t.code)){const n=e.O_.shift();Qh(e).s_(),await Fh(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Bh(e)}}(e,t),zh(e)&&$h(e)}async function Yh(e,t){const n=Js(e);n.asyncQueue.verifyOperationInProgress(),Ks("RemoteStore","RemoteStore received new credentials");const r=Ih(n);n.L_.add(3),await Eh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Sh(n)}async function Gh(e,t){const n=Js(e);t?(n.L_.delete(2),await Sh(n)):t||(n.L_.add(2),await Eh(n),n.q_.set("Unknown"))}function Xh(e){return e.K_||(e.K_=function(e,t,n){const r=Js(e);return r.w_(),new vh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Oh.bind(null,e),Ro:Mh.bind(null,e),mo:Rh.bind(null,e),d_:Dh.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),Ah(e)?Nh(e):e.q_.set("Unknown")):(await e.K_.stop(),Ph(e))}))),e.K_}function Qh(e){return e.U_||(e.U_=function(e,t,n){const r=Js(e);return r.w_(),new bh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hh.bind(null,e),mo:Kh.bind(null,e),f_:qh.bind(null,e),g_:Wh.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Bh(e)):(await e.U_.stop(),e.O_.length>0&&(Ks("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class Zh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Zh(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ta(ea.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jh(e,t){if(Ys("AsyncQueue",`${t}: ${e}`),Pa(e))return new ta(ea.UNAVAILABLE,`${t}: ${e}`);throw e}class ef{constructor(e){this.comparator=e?(t,n)=>e(t,n)||wa.comparator(t.key,n.key):(e,t)=>wa.comparator(e.key,t.key),this.keyedMap=Tc(),this.sortedSet=new Ka(this.comparator)}static emptySet(e){return new ef(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ef))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ef;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class tf{constructor(){this.W_=new Ka(wa.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Qs():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class nf{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new nf(e,t,ef.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class rf{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class of{constructor(){this.queries=sf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Js(e),r=n.queries;n.queries=sf(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new ta(ea.ABORTED,"Firestore shutting down"))}}function sf(){return new _c((e=>gc(e)),mc)}async function af(e,t){const n=Js(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.H_()&&t.J_()&&(r=2):(o=new rf,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Jh(e,`Initialization of query '${yc(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.j_.push(t),t.Z_(n.onlineState),o.z_&&t.X_(o.z_)&&df(n)}async function lf(e,t){const n=Js(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.j_.indexOf(t);e>=0&&(o.j_.splice(e,1),0===o.j_.length?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cf(e,t){const n=Js(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&df(n)}function uf(e,t,n){const r=Js(e),i=r.queries.get(t);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(t)}function df(e){e.Y_.forEach((e=>{e.next()}))}var hf,ff;(ff=hf||(hf={})).ea="default",ff.Cache="cache";class pf{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new nf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=nf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hf.Cache}}class mf{constructor(e){this.key=e}}class gf{constructor(e){this.key=e}}class yf{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oc(),this.mutatedKeys=Oc(),this.Aa=xc(e),this.Ra=new ef(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new tf,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=vc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:o,fa:n,ns:s,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qs()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const s=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==o.length||l?{snapshot:new nf(this.query,e.Ra,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oc(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new gf(e))})),this.da.forEach((n=>{e.has(n)||t.push(new mf(n))})),t}ba(e){this.Ta=e.Ts,this.da=Oc();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class vf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bf{constructor(e){this.key=e,this.va=!1}}class xf{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new _c((e=>gc(e)),mc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ka(wa.comparator),this.Na=new Map,this.La=new Rd,this.Ba={},this.ka=new Map,this.qa=Sd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function wf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=zf(e);let i;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await Sf(r,t,n,!0),i}async function _f(e,t){const n=zf(e);await Sf(n,t,!0,!1)}async function Sf(e,t,n,r){const i=await eh(e.localStore,dc(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Ef(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&Ch(e.remoteStore,i),a}async function Ef(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await nh(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return Df(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const o=await nh(e.localStore,t,!0),s=new yf(t,o.Ts),a=s.ma(o.documents),l=Nu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);Df(e,n,c.wa);const u=new vf(t,n,s);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Cf(e,t,n){const r=Js(e),i=r.Fa.get(t),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter((e=>!mc(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await th(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Th(r.remoteStore,i.targetId),Mf(r,i.targetId)})).catch(Na)):(Mf(r,i.targetId),await th(r.localStore,i.targetId,!0))}async function Tf(e,t){const n=Js(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Th(n.remoteStore,r.targetId))}async function jf(e,t){const n=Js(e);try{const e=await function(e,t){const n=Js(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Ur.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(el.EMPTY_BYTE_STRING,ga.min()).withLastLimboFreeSnapshotVersion(ga.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Ur.updateTargetData(e,c))}));let a=Ec(),l=Oc();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Zd(e,o,t.documentUpdates).next((e=>{a=e.Ps,l=e.Is}))),!r.isEqual(ga.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Aa.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(Zs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Zs(r.va):e.removedDocuments.size>0&&(Zs(r.va),r.va=!1))})),await Bf(n,e,t)}catch(e){await Na(e)}}function kf(e,t,n){const r=Js(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Js(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&df(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Nf(e,t,n){const r=Js(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),o=i&&i.key;if(o){let e=new Ka(wa.comparator);e=e.insert(o,Il.newNoDocument(o,ga.min()));const n=Oc().add(o),i=new ku(ga.min(),new Map,new Ka(fa),e,n);await jf(r,i),r.Oa=r.Oa.remove(o),r.Na.delete(t),Ff(r)}else await th(r.localStore,t,!1).then((()=>Mf(r,t,n))).catch(Na)}async function Af(e,t){const n=Js(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Js(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Aa.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Zs(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Oc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Of(n,r,null),Pf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bf(n,e)}catch(e){await Na(e)}}async function If(e,t,n){const r=Js(e);try{const e=await function(e,t){const n=Js(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Zs(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Of(r,t,n),Pf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Bf(r,e)}catch(n){await Na(n)}}function Pf(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function Of(e,t,n){const r=Js(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Mf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||Rf(e,t)}))}function Rf(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Th(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Ff(e))}function Df(e,t,n){for(const r of n)r instanceof mf?(e.La.addReference(r.key,t),Lf(e,r)):r instanceof gf?(Ks("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Rf(e,r.key)):Qs()}function Lf(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Ks("SyncEngine","New document in limbo: "+n),e.xa.add(r),Ff(e))}function Ff(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new wa(va.fromString(t)),r=e.qa.next();e.Na.set(r,new bf(n)),e.Oa=e.Oa.insert(n,r),Ch(e.remoteStore,new md(dc(ac(n.path)),r,"TargetPurposeLimboResolution",Oa.oe))}}async function Bf(e,t,n){const r=Js(e),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,a)=>{s.push(r.Ka(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=qd.Wi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Ca.d_(i),await async function(e,t){const n=Js(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Aa.forEach(t,(t=>Aa.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Aa.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Pa(e))throw e;Ks("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,o))}async function Uf(e,t){const n=Js(e);if(!n.currentUser.isEqual(t)){Ks("SyncEngine","User change. New user:",t.toKey());const e=await Xd(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new ta(ea.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Bf(n,e.hs)}}function Vf(e,t){const n=Js(e),r=n.Na.get(t);if(r&&r.va)return Oc().add(r.key);{let e=Oc();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function zf(e){const t=Js(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nf.bind(null,t),t.Ca.d_=cf.bind(null,t.eventManager),t.Ca.$a=uf.bind(null,t.eventManager),t}function $f(e){const t=Js(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=If.bind(null,t),t}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Gd(this.persistence,new Kd,e.initialUser,this.serializer)}Ga(e){return new Vd($d.Zr,this.serializer)}Wa(e){return new oh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class qf extends Hf{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){Zs(this.persistence.referenceDelegate instanceof Hd);const n=this.persistence.referenceDelegate.garbageCollector;return new Td(n,e.asyncQueue,t)}Ga(e){const t=void 0!==this.cacheSizeBytes?_d.withCacheSize(this.cacheSizeBytes):_d.DEFAULT;return new Vd((e=>Hd.Zr(e,t)),this.serializer)}}class Wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>kf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uf.bind(null,this.syncEngine),await Gh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new of}createDatastore(e){const t=mh(e.databaseInfo.databaseId),n=function(e){return new fh(e)}(e.databaseInfo);return function(e,t,n,r){return new xh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new _h(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>kf(this.syncEngine,e,0)),ah.D()?new ah:new sh)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new xf(e,t,n,r,i,o);return s&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Js(e);Ks("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Eh(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Wf.provider={build:()=>new Wf};class Kf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ys("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Yf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$s.UNAUTHENTICATED,this.clientId=ha.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Ks("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ks("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Jh(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Gf(e,t){e.asyncQueue.verifyOperationInProgress(),Ks("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Xd(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Xf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Qf(e);Ks("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Yh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Yh(t.remoteStore,n))),e._onlineComponents=t}async function Qf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ks("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ea.FAILED_PRECONDITION||e.code===ea.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Gs("Error using user provided cache. Falling back to memory cache: "+n),await Gf(e,new Hf)}}else Ks("FirestoreClient","Using default OfflineComponentProvider"),await Gf(e,new qf(void 0));return e._offlineComponents}async function Zf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ks("FirestoreClient","Using user provided OnlineComponentProvider"),await Xf(e,e._uninitializedComponentsProvider._online)):(Ks("FirestoreClient","Using default OnlineComponentProvider"),await Xf(e,new Wf))),e._onlineComponents}function Jf(e){return Zf(e).then((e=>e.syncEngine))}async function ep(e){const t=await Zf(e),n=t.eventManager;return n.onListen=wf.bind(null,t.syncEngine),n.onUnlisten=Cf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_f.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Tf.bind(null,t.syncEngine),n}function tp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new na;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Kf({next:a=>{o.Za(),t.enqueueAndForget((()=>lf(e,s)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new ta(ea.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new ta(ea.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new pf(ac(n.path),o,{includeMetadataChanges:!0,_a:!0});return af(e,s)}(await ep(e),e.asyncQueue,t,n,r))),r.promise}function np(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new na;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Kf({next:n=>{o.Za(),t.enqueueAndForget((()=>lf(e,s))),n.fromCache&&"server"===r.source?i.reject(new ta(ea.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new pf(n,o,{includeMetadataChanges:!0,_a:!0});return af(e,s)}(await ep(e),e.asyncQueue,t,n,r))),r.promise}function rp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ip=new Map;function op(e,t,n){if(!n)throw new ta(ea.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function sp(e){if(!wa.isDocumentKey(e))throw new ta(ea.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ap(e){if(wa.isDocumentKey(e))throw new ta(ea.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function lp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Qs()}function cp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ta(ea.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lp(e);throw new ta(ea.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function up(e,t){if(t<=0)throw new ta(ea.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class dp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ta(ea.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ta(ea.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ta(ea.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ta(ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ta(ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ta(ea.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ta(ea.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ta(ea.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ia;switch(e.type){case"firstParty":return new la(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ta(ea.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ip.get(e);t&&(Ks("ComponentProvider","Removing Datastore"),ip.delete(e),t.terminate())}(this),Promise.resolve()}}class fp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fp(this.firestore,e,this._query)}}class pp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pp(this.firestore,e,this._key)}}class mp extends fp{constructor(e,t,n){super(e,t,ac(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pp(this.firestore,null,new wa(e))}withConverter(e){return new mp(this.firestore,e,this._path)}}function gp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Tt(e),op("collection","path",t),e instanceof hp){const n=va.fromString(t,...r);return ap(n),new mp(e,null,n)}{if(!(e instanceof pp||e instanceof mp))throw new ta(ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(va.fromString(t,...r));return ap(n),new mp(e.firestore,null,n)}}function yp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Tt(e),1===arguments.length&&(t=ha.newId()),op("doc","path",t),e instanceof hp){const n=va.fromString(t,...r);return sp(n),new pp(e,null,new wa(n))}{if(!(e instanceof pp||e instanceof mp))throw new ta(ea.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(va.fromString(t,...r));return sp(n),new pp(e.firestore,e instanceof mp?e.converter:null,new wa(n))}}class vp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gh(this,"async_queue_retry"),this.Vu=()=>{const e=ph();e&&Ks("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=ph();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=ph();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new na;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(zH){if(!Pa(zH))throw zH;Ks("AsyncQueue","Operation failed with retryable error: "+zH)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ys("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Zh.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&Qs()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function bp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class xp extends hp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new vp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vp(e),this._firestoreClient=void 0,await e}}}function wp(e){if(e._terminated)throw new ta(ea.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_p(e),e._firestoreClient}function _p(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new ll(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,rp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Yf(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Sp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sp(el.fromBase64String(e))}catch(e){throw new ta(ea.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Sp(el.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ep{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ta(ea.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cp{constructor(e){this._methodName=e}}class Tp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ta(ea.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ta(ea.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fa(this._lat,e._lat)||fa(this._long,e._long)}}class jp{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const kp=/^__.*__$/;class Np{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new au(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class Ap{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ip(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qs()}}class Pp{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Ip(this.Cu)&&kp.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Op{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||mh(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Pp({Cu:e,methodName:t,qu:n,path:xa.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mp(e){const t=e._freezeSettings(),n=mh(e._databaseId);return new Op(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rp(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Qu(o.merge||o.mergeFields?2:0,t,n,i);$p("Data must be an object, but it was:",s,r);const a=Vp(r,s);let l,c;if(o.merge)l=new Za(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Hp(t,r,n);if(!s.contains(i))throw new ta(ea.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Yp(e,i)||e.push(i)}l=new Za(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new Np(new Nl(a),l,c)}class Dp extends Cp{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dp}}function Lp(e,t,n,r){const i=e.Qu(1,t,n);$p("Data must be an object, but it was:",i,r);const o=[],s=Nl.empty();qa(r,((e,r)=>{const a=Wp(t,e,n);r=Tt(r);const l=i.Nu(a);if(r instanceof Dp)o.push(a);else{const e=Up(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Za(o);return new Ap(s,a,i.fieldTransforms)}function Fp(e,t,n,r,i,o){const s=e.Qu(1,t,n),a=[Hp(t,r,n)],l=[i];if(o.length%2!=0)throw new ta(ea.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(Hp(t,o[h])),l.push(o[h+1]);const c=[],u=Nl.empty();for(let h=a.length-1;h>=0;--h)if(!Yp(c,a[h])){const e=a[h];let t=l[h];t=Tt(t);const n=s.Nu(e);if(t instanceof Dp)c.push(e);else{const r=Up(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Za(c);return new Ap(u,d,s.fieldTransforms)}function Bp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Up(n,e.Qu(r?4:3,t))}function Up(e,t){if(zp(e=Tt(e)))return $p("Unsupported field value:",t,e),Vp(e,t);if(e instanceof Cp)return function(e,t){if(!Ip(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Up(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Tt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Fc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ma.fromDate(e);return{timestampValue:zu(t.serializer,n)}}if(e instanceof ma){const n=new ma(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zu(t.serializer,n)}}if(e instanceof Tp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sp)return{bytesValue:$u(t.serializer,e._byteString)};if(e instanceof pp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Wu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof jp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Dc(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${lp(e)}`)}(e,t)}function Vp(e,t){const n={};return Wa(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qa(e,((e,r)=>{const i=Up(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ma||e instanceof Tp||e instanceof Sp||e instanceof pp||e instanceof Cp||e instanceof jp)}function $p(e,t,n){if(!zp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=lp(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Hp(e,t,n){if((t=Tt(t))instanceof Ep)return t._internalPath;if("string"==typeof t)return Wp(e,t);throw Kp("Field path arguments must be of type string or ",e,!1,void 0,n)}const qp=new RegExp("[~\\*/\\[\\]]");function Wp(e,t,n){if(t.search(qp)>=0)throw Kp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ep(...t.split("."))._internalPath}catch(r){throw Kp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Kp(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new ta(ea.INVALID_ARGUMENT,a+e+l)}function Yp(e,t){return e.some((e=>e.isEqual(t)))}class Gp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Xp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Xp extends Gp{data(){return super.data()}}function Qp(e,t){return"string"==typeof t?Wp(e,t):t instanceof Ep?t._internalPath:t._delegate._internalPath}function Zp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ta(ea.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jp{}class em extends Jp{}function tm(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Jp&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof im)).length,n=e.filter((e=>e instanceof nm)).length;if(t>1||t>0&&n>0)throw new ta(ea.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class nm extends em{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new nm(e,t,n)}_apply(e){const t=this._parse(e);return dm(e._query,t),new fp(e.firestore,e.converter,fc(e._query,t))}_parse(e){const t=Mp(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ta(ea.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){um(s,o);const t=[];for(const n of s)t.push(cm(r,e,n));a={arrayValue:{values:t}}}else a=cm(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||um(s,o),a=Bp(n,t,s,"in"===o||"not-in"===o);return Fl.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function rm(e,t,n){const r=t,i=Qp("where",e);return nm._create(i,r,n)}class im extends Jp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new im(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Bl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)dm(n,i),n=fc(n,i)}(e._query,t),new fp(e.firestore,e.converter,fc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class om extends em{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new om(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ta(ea.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ta(ea.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rl(t,n)}(e._query,this._field,this._direction);return new fp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new oc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function sm(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Qp("orderBy",e);return om._create(n,t)}class am extends em{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new am(e,t,n)}_apply(e){return new fp(e.firestore,e.converter,pc(e._query,this._limit,this._limitType))}}function lm(e){return up("limit",e),am._create("limit",e,"F")}function cm(e,t,n){if("string"==typeof(n=Tt(n))){if(""===n)throw new ta(ea.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cc(t)&&-1!==n.indexOf("/"))throw new ta(ea.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(va.fromString(n));if(!wa.isDocumentKey(r))throw new ta(ea.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xl(e,new wa(r))}if(n instanceof pp)return xl(e,n._key);throw new ta(ea.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lp(n)}.`)}function um(e,t){if(!Array.isArray(e)||0===e.length)throw new ta(ea.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ta(ea.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ta(ea.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class hm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(il(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qs()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return qa(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>rl(e.doubleValue)));return new jp(i)}convertGeoPoint(e){return new Tp(rl(e.latitude),rl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=sl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=nl(e);return new ma(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=va.fromString(e);Zs(pd(n));const r=new cl(n.get(1),n.get(3)),i=new wa(n.popFirst(5));return r.isEqual(t)||Ys(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function fm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class pm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mm extends Gp{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new gm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Qp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gm extends mm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ym{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new gm(this._firestore,this._userDataWriter,n.key,n,new pm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ta(ea.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new gm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new gm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:vm(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qs()}}function bm(e){e=cp(e,pp);const t=cp(e.firestore,xp);return tp(wp(t),e._key).then((n=>km(t,e,n)))}class xm extends hm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pp(this.firestore,null,t)}}function wm(e){e=cp(e,fp);const t=cp(e.firestore,xp),n=wp(t),r=new xm(t);return Zp(e._query),np(n,e._query).then((n=>new ym(t,r,e,n)))}function _m(e,t,n){e=cp(e,pp);const r=cp(e.firestore,xp),i=fm(e.converter,t,n);return jm(r,[Rp(Mp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zc.none())])}function Sm(e,t,n){e=cp(e,pp);const r=cp(e.firestore,xp),i=Mp(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=Tt(t))||t instanceof Ep?Fp(i,"updateDoc",e._key,t,n,a):Lp(i,"updateDoc",e._key,t),jm(r,[o.toMutation(e._key,Zc.exists(!0))])}function Em(e){return jm(cp(e.firestore,xp),[new du(e._key,Zc.none())])}function Cm(e,t){const n=cp(e.firestore,xp),r=yp(e),i=fm(e.converter,t);return jm(n,[Rp(Mp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zc.exists(!1))]).then((()=>r))}function Tm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=Tt(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||bp(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(bp(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,d,h;if(e instanceof pp)d=cp(e.firestore,xp),h=ac(e._key.path),u={next:t=>{n[l]&&n[l](km(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=cp(e,fp);d=cp(t.firestore,xp),h=t._query;const r=new xm(d);u={next:e=>{n[l]&&n[l](new ym(d,r,t,e))},error:n[l+1],complete:n[l+2]},Zp(e._query)}return function(e,t,n,r){const i=new Kf(r),o=new pf(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>af(await ep(e),o))),()=>{i.Za(),e.asyncQueue.enqueueAndForget((async()=>lf(await ep(e),o)))}}(wp(d),h,c,u)}function jm(e,t){return function(e,t){const n=new na;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=$f(e);try{const e=await function(e,t){const n=Js(e),r=ma.now(),i=t.reduce(((e,t)=>e.add(t.key)),Oc());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ec(),l=Oc();return n.cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=iu(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new au(e.key,t,Al(t.value.mapValue),Zc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:jc(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Ka(fa)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Bf(r,e.changes),await Bh(r.remoteStore)}catch(e){const t=Jh(e,"Failed to persist write");n.reject(t)}}(await Jf(e),t,n))),n.promise}(wp(e),t)}function km(e,t,n){const r=n.docs.get(t._key),i=new xm(e);return new mm(e,i,t._key,r,new pm(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Hs=e}($n),Fn(new jt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new xp(new sa(e.getProvider("auth-internal")),new ua(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ta(ea.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Wn(zs,"4.7.4",e),Wn(zs,"4.7.4","esm2017")}();Wn("firebase","11.0.1","app");const Nm="@firebase/installations",Am="0.6.10",Im=1e4,Pm=`w:${Am}`,Om="FIS_v2",Mm=36e5,Rm=new st("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dm(e){return e instanceof ot&&e.code.includes("request-failed")}function Lm(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Fm(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Bm(e,t){const n=(await t.json()).error;return Rm.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Um(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Vm(e,t){let{refreshToken:n}=t;const r=Um(e);return r.append("Authorization",function(e){return`${Om} ${e}`}(n)),r}async function zm(e){const t=await e();return t.status>=500&&t.status<600?e():t}function $m(e){return new Promise((t=>{setTimeout(t,e)}))}const Hm=/^[cdef][\w-]{21}$/;function qm(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(e);return Hm.test(t)?t:""}catch(e){return""}}function Wm(e){return`${e.appName}!${e.appId}`}const Km=new Map;function Ym(e,t){const n=Wm(e);Gm(n,t),function(e,t){const n=Qm();n&&n.postMessage({key:e,fid:t});Zm()}(n,t)}function Gm(e,t){const n=Km.get(e);if(n)for(const r of n)r(t)}let Xm=null;function Qm(){return!Xm&&"BroadcastChannel"in self&&(Xm=new BroadcastChannel("[Firebase] FID Change"),Xm.onmessage=e=>{Gm(e.data.key,e.data.fid)}),Xm}function Zm(){0===Km.size&&Xm&&(Xm.close(),Xm=null)}const Jm="firebase-installations-store";let eg=null;function tg(){return eg||(eg=Xt("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Jm)}})),eg}async function ng(e,t){const n=Wm(e),r=(await tg()).transaction(Jm,"readwrite"),i=r.objectStore(Jm),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||Ym(e,t.fid),t}async function rg(e){const t=Wm(e),n=(await tg()).transaction(Jm,"readwrite");await n.objectStore(Jm).delete(t),await n.done}async function ig(e,t){const n=Wm(e),r=(await tg()).transaction(Jm,"readwrite"),i=r.objectStore(Jm),o=await i.get(n),s=t(o);return void 0===s?await i.delete(n):await i.put(s,n),await r.done,!s||o&&o.fid===s.fid||Ym(e,s.fid),s}async function og(e){let t;const n=await ig(e.appConfig,(n=>{const r=function(e){const t=e||{fid:qm(),registrationStatus:0};return lg(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Rm.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=Lm(n),s=Um(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const l={fid:i,authVersion:Om,appId:n.appId,sdkVersion:Pm},c={method:"POST",headers:s,body:JSON.stringify(l)},u=await zm((()=>fetch(o,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Fm(e.authToken)}}throw await Bm("Create Installation",u)}(e,t);return ng(e.appConfig,n)}catch(zH){throw Dm(zH)&&409===zH.customData.serverCode?await rg(e.appConfig):await ng(e.appConfig,{fid:t.fid,registrationStatus:0}),zH}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:sg(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function sg(e){let t=await ag(e.appConfig);for(;1===t.registrationStatus;)await $m(100),t=await ag(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await og(e);return n||t}return t}function ag(e){return ig(e,(e=>{if(!e)throw Rm.create("installation-not-found");return lg(e)}))}function lg(e){return 1===(t=e).registrationStatus&&t.registrationTime+Im<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function cg(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Lm(e)}/${n}/authTokens:generate`}(n,t),o=Vm(n,t),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const a={installation:{sdkVersion:Pm,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(a)},c=await zm((()=>fetch(i,l)));if(c.ok){return Fm(await c.json())}throw await Bm("Generate Auth Token",c)}async function ug(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await ig(e.appConfig,(r=>{if(!hg(r))throw Rm.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Mm}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await dg(e.appConfig);for(;1===n.authToken.requestStatus;)await $m(100),n=await dg(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ug(e,t):r}(e,n),r;{if(!navigator.onLine)throw Rm.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await cg(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await ng(e.appConfig,r),n}catch(zH){if(!Dm(zH)||401!==zH.customData.serverCode&&404!==zH.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ng(e.appConfig,n)}else await rg(e.appConfig);throw zH}}(e,n),n}}));return t?await t:r.authToken}function dg(e){return ig(e,(e=>{if(!hg(e))throw Rm.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Im<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function hg(e){return void 0!==e&&2===e.registrationStatus}async function fg(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await og(e);t&&await t}(n);return(await ug(n,t)).token}function pg(e){return Rm.create("missing-app-config-values",{valueName:e})}const mg="installations",gg=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw pg("App Configuration");if(!e.name)throw pg("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw pg(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Bn(t,"heartbeat"),_delete:()=>Promise.resolve()}},yg=e=>{const t=Bn(e.getProvider("app").getImmediate(),mg).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await og(t);return r?r.catch(console.error):ug(t).catch(console.error),n.fid}(t),getToken:e=>fg(t,e)}};Fn(new jt(mg,gg,"PUBLIC")),Fn(new jt("installations-internal",yg,"PRIVATE")),Wn(Nm,Am),Wn(Nm,Am,"esm2017");const vg="analytics",bg="https://www.googletagmanager.com/gtag/js",xg=new Lt("@firebase/analytics"),wg=new st("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function _g(e){if(!e.startsWith(bg)){const t=wg.create("invalid-gtag-resource",{gtagURL:e});return xg.warn(t.message),""}return e}function Sg(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Eg(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:_g}),r=document.createElement("script"),i=`${bg}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Cg(e,t,n,r){return async function(i){try{for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Sg(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(zH){xg.error(zH)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=s;await async function(e,t,n,r,i,o){const s=r[i];try{if(s)await t[s];else{const e=(await Sg(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(zH){xg.error(zH)}e("config",i,o)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(zH){xg.error(zH)}}}const Tg=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function jg(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function kg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tg,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw wg.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw wg.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ag;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Ng({appId:r,apiKey:i,measurementId:o},s,a,t)}async function Ng(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Tg;var s;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(o),r(wg.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(zH){if(l)return xg.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===zH||void 0===zH?void 0:zH.message}]`),{appId:a,measurementId:l};throw zH}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:jg(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),s=await fetch(o,i);if(200!==s.status&&304!==s.status){let e="";try{const n=await s.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw wg.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return o.deleteThrottleMetadata(a),t}catch(zH){const r=zH;if(!function(e){if(!(e instanceof ot)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(o.deleteThrottleMetadata(a),l)return xg.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:a,measurementId:l};throw zH}const c=503===Number(null===(s=null===r||void 0===r?void 0:r.customData)||void 0===s?void 0:s.httpStatus)?Ct(i,o.intervalMillis,30):Ct(i,o.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return o.setThrottleMetadata(a,u),xg.debug(`Calling attemptFetch again in ${c} millis`),Ng(e,u,n,o)}}class Ag{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ig,Pg;function Og(e){Pg=e}function Mg(e){Ig=e}async function Rg(e,t,n,r,i,o,s){var a;const l=kg(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&xg.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>xg.error(e))),t.push(l);const c=async function(){if(!rt())return xg.warn(wg.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await it()}catch(zH){return xg.warn(wg.create("indexeddb-unavailable",{errorInfo:null===zH||void 0===zH?void 0:zH.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(bg)&&n.src.includes(e))return n;return null})(o)||Eg(o,u.measurementId),Pg&&(i("consent","default",Pg),Og(void 0)),i("js",new Date);const h=null!==(a=null===s||void 0===s?void 0:s.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),Ig&&(i("set",Ig),Mg(void 0)),u.measurementId}class Dg{constructor(e){this.app=e}_delete(){return delete Lg[this.app.options.appId],Promise.resolve()}}let Lg={},Fg=[];const Bg={};let Ug,Vg,zg="dataLayer",$g="gtag",Hg=!1;function qg(){const e=[];if(Je()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=wg.create("invalid-analytics-context",{errorInfo:t});xg.warn(n.message)}}function Wg(e,t,n){qg();const r=e.options.appId;if(!r)throw wg.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw wg.create("no-api-key");xg.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Lg[r])throw wg.create("already-exists",{id:r});if(!Hg){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(zg);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=Cg(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(Lg,Fg,Bg,zg,$g);Vg=e,Ug=t,Hg=!0}Lg[r]=Rg(e,Fg,Bg,t,Ug,zg,n);return new Dg(e)}function Kg(e,t,n,r){e=Tt(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Vg,Lg[e.app.options.appId],t,n,r).catch((e=>xg.error(e)))}const Yg="@firebase/analytics",Gg="0.10.9";Fn(new jt(vg,((e,t)=>{let{options:n}=t;return Wg(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Fn(new jt("analytics-internal",(function(e){try{const t=e.getProvider(vg).getImmediate();return{logEvent:(e,n,r)=>Kg(t,e,n,r)}}catch(zH){throw wg.create("interop-component-reg-failed",{reason:zH})}}),"PRIVATE")),Wn(Yg,Gg),Wn(Yg,Gg,"esm2017");const Xg="@firebase/database",Qg="1.0.9";let Zg="";function Jg(e){Zg=e}class ey{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ct(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:lt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ty{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return dt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ny=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ey(t)}}catch(zH){}return new ty},ry=ny("localStorage"),iy=ny("sessionStorage"),oy=new Lt("@firebase/database"),sy=function(){let e=1;return function(){return e++}}(),ay=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Oe(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new xt;n.update(t);const r=n.digest();return De.encodeByteArray(r)},ly=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=ly.apply(null,n):e+="object"===typeof n?ct(n):n,e+=" "}return e};let cy=null,uy=!0;const dy=function(e,t){Oe(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(oy.logLevel=Pt.VERBOSE,cy=oy.log.bind(oy),t&&iy.set("logging_enabled",!0)):"function"===typeof e?cy=e:(cy=null,iy.remove("logging_enabled"))},hy=function(){if(!0===uy&&(uy=!1,null===cy&&!0===iy.get("logging_enabled")&&dy(!0)),cy){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ly.apply(null,t);cy(r)}},fy=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];hy(e,...n)}},py=function(){const e="FIREBASE INTERNAL ERROR: "+ly(...arguments);oy.error(e)},my=function(){const e=`FIREBASE FATAL ERROR: ${ly(...arguments)}`;throw oy.error(e),new Error(e)},gy=function(){const e="FIREBASE WARNING: "+ly(...arguments);oy.warn(e)},yy=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},vy="[MIN_NAME]",by="[MAX_NAME]",xy=function(e,t){if(e===t)return 0;if(e===vy||t===by)return-1;if(t===vy||e===by)return 1;{const n=ky(e),r=ky(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},wy=function(e,t){return e===t?0:e<t?-1:1},_y=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ct(t))},Sy=function(e){if("object"!==typeof e||null===e)return ct(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=ct(t[r]),n+=":",n+=Sy(e[t[r]]);return n+="}",n},Ey=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Cy(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ty=function(e){Oe(!yy(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const jy=new RegExp("^-?(0*)\\d{1,10}$"),ky=function(e){if(jy.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ny=function(e){try{e()}catch(zH){setTimeout((()=>{const t=zH.stack||"";throw gy("Exception was thrown by user callback.",t),zH}),Math.floor(0))}},Ay=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Iy{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){gy(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Py{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(hy("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gy(e)}}class Oy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Oy.OWNER="owner";const My="5",Ry=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dy="ac",Ly="websocket",Fy="long_polling";class By{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ry.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ry.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Uy(e,t,n){let r;if(Oe("string"===typeof t,"typeof type must == string"),Oe("object"===typeof n,"typeof params must == object"),t===Ly)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Fy)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Cy(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Vy{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;dt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ve(this.counters_)}}const zy={},$y={};function Hy(e){const t=e.toString();return zy[t]||(zy[t]=new Vy),zy[t]}class qy{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Ny((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Wy="start";class Ky{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fy(e),this.stats_=Hy(t),this.urlFn=e=>(this.appCheckToken&&(e[Dy]=this.appCheckToken),Uy(t,Fy,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qy(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(tt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yy((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Wy)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Wy]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=My,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Dy]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Ry.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ky.forceAllow_=!0}static forceDisallow(){Ky.forceDisallow_=!0}static isAvailable(){return!tt()&&(!!Ky.forceAllow_||!Ky.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Fe(t),r=Ey(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(tt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Yy{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,tt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sy(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Yy.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(zH){hy("frame writing exception"),zH.stack&&hy(zH.stack),hy(zH)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||hy("No IE domain setting required")}catch(zH){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){tt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{hy("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(zH){}}),Math.floor(1))}}let Gy=null;"undefined"!==typeof MozWebSocket?Gy=MozWebSocket:"undefined"!==typeof WebSocket&&(Gy=WebSocket);class Xy{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fy(this.connId),this.stats_=Hy(t),this.connURL=Xy.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=My,!tt()&&"undefined"!==typeof location&&location.hostname&&Ry.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[Dy]=r),i&&(o.p=i),Uy(e,Ly,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ry.set("previous_websocket_failure",!0);try{let e;if(tt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${My}/${Zg}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDQIMqO4bJ-k4-pjjGnHGwCbCYUFUQe7Hw",REACT_APP_FIREBASE_APP_ID:"1:300630412358:web:44afc1a224507ccb764e47",REACT_APP_FIREBASE_AUTH_DOMAIN:"smartecolock.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://smartecolock-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-PNBNJ39FE0",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"300630412358",REACT_APP_FIREBASE_PROJECT_ID:"smartecolock",REACT_APP_FIREBASE_STORAGE_BUCKET:"smartecolock.firebasestorage.app",REACT_APP_GEMINI_API_KEY:"AIzaSyBYLXhvqwNsxNzMAMcxBlnAulcFOhNQhEk"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Gy(this.connURL,[],e)}catch(zH){this.log_("Error instantiating WebSocket.");const t=zH.message||zH.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Xy.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Gy&&!Xy.forceDisallow_}static previouslyFailed(){return ry.isInMemoryStorage||!0===ry.get("previous_websocket_failure")}markConnectionHealthy(){ry.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=lt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Oe(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ey(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(zH){this.log_("Exception thrown from WebSocket.send():",zH.message||zH.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xy.responsesRequiredToBeHealthy=2,Xy.healthyTimeout=3e4;class Qy{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ky,Xy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Xy&&Xy.isAvailable();let n=t&&!Xy.previouslyFailed();if(e.webSocketOnly&&(t||gy("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Xy];else{const e=this.transports_=[];for(const t of Qy.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Qy.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Qy.globalTransportInitialized_=!1;class Zy{constructor(e,t,n,r,i,o,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fy("c:"+this.id+":"),this.transportManager_=new Qy(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ay((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_y("t",e),n=_y("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_y("t",e),n=_y("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_y("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?py("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):py("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),My!==n&&gy("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Ay((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ay((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ry.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Jy{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ev{constructor(e){this.allowedEvents_=e,this.listeners_={},Oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Oe(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class tv extends ev{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ze()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new tv}getInitialEvent(e){return Oe("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class nv{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function rv(){return new nv("")}function iv(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ov(e){return e.pieces_.length-e.pieceNum_}function sv(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new nv(e.pieces_,t)}function av(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function lv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function cv(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new nv(t,0)}function uv(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof nv)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new nv(n,0)}function dv(e){return e.pieceNum_>=e.pieces_.length}function hv(e,t){const n=iv(e),r=iv(t);if(null===n)return t;if(n===r)return hv(sv(e),sv(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function fv(e,t){if(ov(e)!==ov(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function pv(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ov(e)>ov(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class mv{constructor(e,t){this.errorPrefix_=t,this.parts_=lv(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Et(this.parts_[n]);gv(this)}}function gv(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yv(e))}function yv(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class vv extends ev{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new vv}getInitialEvent(e){return Oe("visible"===e,"Unknown event type: "+e),[this.visible_]}}const bv=1e3;class xv extends Jy{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=xv.nextPersistentConnectionId_++,this.log_=fy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bv,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!tt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vv.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&tv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ct(i)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Ge,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;xv.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&dt(e,"w")){const n=ht(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();gy(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=ut(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=ut(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ct(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):py("Unrecognized action received from server: "+ct(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bv,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bv),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+xv.nextConnectionId_++,i=this.lastSessionId;let o=!1,s=null;const a=function(){s?s.close():(o=!0,n())},l=function(e){Oe(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?hy("getToken() completed but was canceled"):(hy("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,s=new Zy(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{gy(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(py){this.log_("Failed to get token: "+py),o||(this.repoInfo_.nodeAdmin&&gy(py),a())}}}interrupt(e){hy("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hy("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ft(this.interruptReasons_)&&(this.reconnectDelay_=bv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Sy(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new nv(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){hy("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){hy("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";tt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Zg.replace(/\./g,"-")]=1,Ze()?e["framework.cordova"]=1:et()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=tv.getInstance().currentlyOnline();return ft(this.interruptReasons_)&&e}}xv.nextPersistentConnectionId_=0,xv.nextConnectionId_=0;class wv{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new wv(e,t)}}class _v{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new wv(vy,e),r=new wv(vy,t);return 0!==this.compare(n,r)}minPost(){return wv.MIN}}let Sv;class Ev extends _v{static get __EMPTY_NODE(){return Sv}static set __EMPTY_NODE(e){Sv=e}compare(e,t){return xy(e.name,t.name)}isDefinedOn(e){throw Me("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return wv.MIN}maxPost(){return new wv(by,Sv)}makePost(e,t){return Oe("string"===typeof e,"KeyIndex indexValue must always be a string."),new wv(e,Sv)}toString(){return".key"}}const Cv=new Ev;class Tv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class jv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:jv.RED,this.left=null!=r?r:kv.EMPTY_NODE,this.right=null!=i?i:kv.EMPTY_NODE}copy(e,t,n,r,i){return new jv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return kv.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return kv.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,jv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,jv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}jv.RED=!0,jv.BLACK=!1;class kv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kv.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new kv(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,jv.BLACK,null,null))}remove(e){return new kv(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jv.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Tv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Tv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Tv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Tv(this.root_,null,this.comparator_,!0,e)}}function Nv(e,t){return xy(e.name,t.name)}function Av(e,t){return xy(e,t)}let Iv;kv.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new jv(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Pv=function(e){return"number"===typeof e?"number:"+Ty(e):"string:"+e},Ov=function(e){if(e.isLeafNode()){const t=e.val();Oe("string"===typeof t||"number"===typeof t||"object"===typeof t&&dt(t,".sv"),"Priority must be a string or number.")}else Oe(e===Iv||e.isEmpty(),"priority of unexpected type.");Oe(e===Iv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Mv,Rv,Dv;class Lv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lv.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Oe(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ov(this.priorityNode_)}static set __childrenNodeConstructor(e){Mv=e}static get __childrenNodeConstructor(){return Mv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Lv(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Lv.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return dv(e)?this:".priority"===iv(e)?this.priorityNode_:Lv.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Lv.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=iv(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Oe(".priority"!==n||1===ov(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Lv.__childrenNodeConstructor.EMPTY_NODE.updateChild(sv(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Pv(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Ty(this.value_):this.value_,this.lazyHash_=ay(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Lv.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Lv.__childrenNodeConstructor?-1:(Oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Lv.VALUE_TYPE_ORDER.indexOf(t),i=Lv.VALUE_TYPE_ORDER.indexOf(n);return Oe(r>=0,"Unknown leaf type: "+t),Oe(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Lv.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Fv=new class extends _v{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?xy(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return wv.MIN}maxPost(){return new wv(by,new Lv("[PRIORITY-POST]",Dv))}makePost(e,t){const n=Rv(e);return new wv(t,new Lv("[PRIORITY-POST]",n))}toString(){return".priority"}},Bv=Math.log(2);class Uv{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Bv,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Vv=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new jv(a,s.node,jv.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return s=e[l],a=n?n(s):s,new jv(a,s.node,jv.BLACK,c,u)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const c=i(o+1,a),u=e[o],d=n?n(u):u;l(new jv(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,jv.BLACK):(a(r,jv.BLACK),a(r,jv.RED))}return o}(new Uv(e.length));return new kv(r||t,o)};let zv;const $v={};class Hv{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Oe($v&&Fv,"ChildrenNode.ts has not been loaded"),zv=zv||new Hv({".priority":$v},{".priority":Fv}),zv}get(e){const t=ht(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof kv?t:null}hasIndex(e){return dt(this.indexSet_,e.toString())}addIndex(e,t){Oe(e!==Cv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(wv.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?Vv(n,e.getCompare()):$v;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=o,new Hv(c,l)}addToIndexes(e,t){const n=pt(this.indexes_,((n,r)=>{const i=ht(this.indexSet_,r);if(Oe(i,"Missing index implementation for "+r),n===$v){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(wv.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),Vv(n,i.getCompare())}return $v}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new wv(e.name,r))),i.insert(e,e.node)}}));return new Hv(n,this.indexSet_)}removeFromIndexes(e,t){const n=pt(this.indexes_,(n=>{if(n===$v)return n;{const r=t.get(e.name);return r?n.remove(new wv(e.name,r)):n}}));return new Hv(n,this.indexSet_)}}let qv;class Wv{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ov(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qv||(qv=new Wv(new kv(Av),null,Hv.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qv}updatePriority(e){return this.children_.isEmpty()?this:new Wv(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?qv:t}}getChild(e){const t=iv(e);return null===t?this:this.getImmediateChild(t).getChild(sv(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Oe(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new wv(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?qv:this.priorityNode_;return new Wv(r,o,i)}}updateChild(e,t){const n=iv(e);if(null===n)return t;{Oe(".priority"!==iv(e)||1===ov(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(sv(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Fv,((o,s)=>{t[o]=s.val(e),n++,i&&Wv.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Pv(this.getPriority().val())+":"),this.forEachChild(Fv,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ay(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new wv(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new wv(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new wv(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,wv.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,wv.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Kv?-1:0}withIndex(e){if(e===Cv||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Wv(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Cv||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Fv),n=t.getIterator(Fv);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Cv?null:this.indexMap_.get(e.toString())}}Wv.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Kv=new class extends Wv{constructor(){super(new kv(Av),Wv.EMPTY_NODE,Hv.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wv.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(wv,{MIN:{value:new wv(vy,Wv.EMPTY_NODE)},MAX:{value:new wv(by,Kv)}}),Ev.__EMPTY_NODE=Wv.EMPTY_NODE,Lv.__childrenNodeConstructor=Wv,Iv=Kv,function(e){Dv=e}(Kv);function Yv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Wv.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Oe(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Lv(e,Yv(t))}if(e instanceof Array){let n=Wv.EMPTY_NODE;return Cy(e,((t,r)=>{if(dt(e,t)&&"."!==t.substring(0,1)){const e=Yv(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Yv(t))}{const n=[];let r=!1;if(Cy(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Yv(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new wv(e,i)))}})),0===n.length)return Wv.EMPTY_NODE;const i=Vv(n,Nv,(e=>e.name),Av);if(r){const e=Vv(n,Fv.getCompare());return new Wv(i,Yv(t),new Hv({".priority":e},{".priority":Fv}))}return new Wv(i,Yv(t),Hv.Default)}}!function(e){Rv=e}(Yv);class Gv extends _v{constructor(e){super(),this.indexPath_=e,Oe(!dv(e)&&".priority"!==iv(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?xy(e.name,t.name):i}makePost(e,t){const n=Yv(e),r=Wv.EMPTY_NODE.updateChild(this.indexPath_,n);return new wv(t,r)}maxPost(){const e=Wv.EMPTY_NODE.updateChild(this.indexPath_,Kv);return new wv(by,e)}toString(){return lv(this.indexPath_,0).join("/")}}const Xv=new class extends _v{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?xy(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return wv.MIN}maxPost(){return wv.MAX}makePost(e,t){const n=Yv(e);return new wv(t,n)}toString(){return".value"}};function Qv(e){return{type:"value",snapshotNode:e}}function Zv(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Jv(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function eb(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class tb{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){Oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Jv(t,s)):Oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Zv(t,n)):o.trackChildChange(eb(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Fv,((e,r)=>{t.hasChild(e)||n.trackChildChange(Jv(e,r))})),t.isLeafNode()||t.forEachChild(Fv,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(eb(t,r,i))}else n.trackChildChange(Zv(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wv.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class nb{constructor(e){this.indexedFilter_=new tb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=nb.getStartPost_(e),this.endPost_=nb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new wv(t,n))||(n=Wv.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Wv.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Wv.EMPTY_NODE);const i=this;return t.forEachChild(Fv,((e,t)=>{i.matches(new wv(e,t))||(r=r.updateImmediateChild(e,Wv.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class rb{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new nb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new wv(t,n))||(n=Wv.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Wv.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Wv.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Wv.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Wv.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const s=e;Oe(s.numChildren()===this.limit_,"");const a=new wv(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(s.hasChild(t)){const e=s.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||s.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:o(u,a);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(eb(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Jv(t,e));const n=s.updateImmediateChild(t,Wv.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Zv(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&o(l,a)>=0?(null!=i&&(i.trackChildChange(Jv(l.name,l.node)),i.trackChildChange(Zv(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Wv.EMPTY_NODE)):e}}class ib{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fv}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vy}hasEnd(){return this.endSet_}getIndexEndValue(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:by}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fv}copy(){const e=new ib;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ob(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Fv?n="$priority":e.index_===Xv?n="$value":e.index_===Cv?n="$key":(Oe(e.index_ instanceof Gv,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ct(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ct(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ct(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ct(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ct(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function sb(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Fv&&(t.i=e.index_.toString()),t}class ab extends Jy{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=fy("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=ab.getListenId_(e,n),s={};this.listens_[o]=s;const a=ob(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),ht(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=ab.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ob(e._queryParams),n=e._path.toString(),r=new Ge;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+yt(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=lt(a.responseText)}catch(zH){gy("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&gy("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class lb{constructor(){this.rootNode_=Wv.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cb(){return{value:null,children:new Map}}function ub(e,t,n){if(dv(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=iv(t);e.children.has(r)||e.children.set(r,cb());ub(e.children.get(r),t=sv(t),n)}}function db(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{db(r,new nv(t.toString()+"/"+e),n)}))}class hb{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Cy(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class fb{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hb(e);const n=1e4+2e4*Math.random();Ay(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Cy(e,((e,r)=>{r>0&&dt(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Ay(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var pb;function mb(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pb||(pb={}));class gb{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=pb.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(dv(this.path)){if(null!=this.affectedTree.value)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new nv(e));return new gb(rv(),t,this.revert)}}return Oe(iv(this.path)===e,"operationForChild called for unrelated child."),new gb(sv(this.path),this.affectedTree,this.revert)}}class yb{constructor(e,t){this.source=e,this.path=t,this.type=pb.LISTEN_COMPLETE}operationForChild(e){return dv(this.path)?new yb(this.source,rv()):new yb(this.source,sv(this.path))}}class vb{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=pb.OVERWRITE}operationForChild(e){return dv(this.path)?new vb(this.source,rv(),this.snap.getImmediateChild(e)):new vb(this.source,sv(this.path),this.snap)}}class bb{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=pb.MERGE}operationForChild(e){if(dv(this.path)){const t=this.children.subtree(new nv(e));return t.isEmpty()?null:t.value?new vb(this.source,rv(),t.value):new bb(this.source,rv(),t)}return Oe(iv(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bb(this.source,sv(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xb{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(dv(e))return this.isFullyInitialized()&&!this.filtered_;const t=iv(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class wb{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function _b(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Me("Should only compare child_ events.");const r=new wv(t.childName,t.snapshotNode),i=new wv(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Sb(e,t){return{eventCache:e,serverCache:t}}function Eb(e,t,n,r){return Sb(new xb(t,n,r),e.serverCache)}function Cb(e,t,n,r){return Sb(e.eventCache,new xb(t,n,r))}function Tb(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function jb(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let kb;class Nb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(kb||(kb=new kv(wy)),kb);this.value=e,this.children=t}static fromObject(e){let t=new Nb(null);return Cy(e,((e,n)=>{t=t.set(new nv(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:rv(),value:this.value};if(dv(e))return null;{const n=iv(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(sv(e),t);if(null!=i){return{path:uv(new nv(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(dv(e))return this;{const t=iv(e),n=this.children.get(t);return null!==n?n.subtree(sv(e)):new Nb(null)}}set(e,t){if(dv(e))return new Nb(t,this.children);{const n=iv(e),r=(this.children.get(n)||new Nb(null)).set(sv(e),t),i=this.children.insert(n,r);return new Nb(this.value,i)}}remove(e){if(dv(e))return this.children.isEmpty()?new Nb(null):new Nb(null,this.children);{const t=iv(e),n=this.children.get(t);if(n){const r=n.remove(sv(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Nb(null):new Nb(this.value,i)}return this}}get(e){if(dv(e))return this.value;{const t=iv(e),n=this.children.get(t);return n?n.get(sv(e)):null}}setTree(e,t){if(dv(e))return t;{const n=iv(e),r=(this.children.get(n)||new Nb(null)).setTree(sv(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Nb(this.value,i)}}fold(e){return this.fold_(rv(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(uv(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,rv(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(dv(e))return null;{const r=iv(e),i=this.children.get(r);return i?i.findOnPath_(sv(e),uv(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,rv(),t)}foreachOnPath_(e,t,n){if(dv(e))return this;{this.value&&n(t,this.value);const r=iv(e),i=this.children.get(r);return i?i.foreachOnPath_(sv(e),uv(t,r),n):new Nb(null)}}foreach(e){this.foreach_(rv(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(uv(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Ab{constructor(e){this.writeTree_=e}static empty(){return new Ab(new Nb(null))}}function Ib(e,t,n){if(dv(t))return new Ab(new Nb(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=hv(i,t);return o=o.updateChild(s,n),new Ab(e.writeTree_.set(i,o))}{const r=new Nb(n),i=e.writeTree_.setTree(t,r);return new Ab(i)}}}function Pb(e,t,n){let r=e;return Cy(n,((e,n)=>{r=Ib(r,uv(t,e),n)})),r}function Ob(e,t){if(dv(t))return Ab.empty();{const n=e.writeTree_.setTree(t,new Nb(null));return new Ab(n)}}function Mb(e,t){return null!=Rb(e,t)}function Rb(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(hv(n.path,t)):null}function Db(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Fv,((e,n)=>{t.push(new wv(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new wv(e,n.value))})),t}function Lb(e,t){if(dv(t))return e;{const n=Rb(e,t);return new Ab(null!=n?new Nb(n):e.writeTree_.subtree(t))}}function Fb(e){return e.writeTree_.isEmpty()}function Bb(e,t){return Ub(rv(),e.writeTree_,t)}function Ub(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Oe(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ub(uv(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(uv(e,".priority"),r)),n}}function Vb(e,t){return ex(t,e)}function zb(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Oe(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&$b(t,r.path)?i=!1:pv(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=qb(e.allWrites,Hb,rv()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Ob(e.visibleWrites,r.path);else{Cy(r.children,(t=>{e.visibleWrites=Ob(e.visibleWrites,uv(r.path,t))}))}return!0}return!1}function $b(e,t){if(e.snap)return pv(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&pv(uv(e.path,n),t))return!0;return!1}function Hb(e){return e.visible}function qb(e,t,n){let r=Ab.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)pv(n,e)?(t=hv(n,e),r=Ib(r,t,o.snap)):pv(e,n)&&(t=hv(e,n),r=Ib(r,rv(),o.snap.getChild(t)));else{if(!o.children)throw Me("WriteRecord should have .snap or .children");if(pv(n,e))t=hv(n,e),r=Pb(r,t,o.children);else if(pv(e,n))if(t=hv(e,n),dv(t))r=Pb(r,rv(),o.children);else{const e=ht(o.children,iv(t));if(e){const n=e.getChild(sv(t));r=Ib(r,rv(),n)}}}}}return r}function Wb(e,t,n,r,i){if(r||i){const o=Lb(e.visibleWrites,t);if(!i&&Fb(o))return n;if(i||null!=n||Mb(o,rv())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(pv(e.path,t)||pv(t,e.path))};return Bb(qb(e.allWrites,o,t),n||Wv.EMPTY_NODE)}return null}{const r=Rb(e.visibleWrites,t);if(null!=r)return r;{const r=Lb(e.visibleWrites,t);if(Fb(r))return n;if(null!=n||Mb(r,rv())){return Bb(r,n||Wv.EMPTY_NODE)}return null}}}function Kb(e,t,n,r){return Wb(e.writeTree,e.treePath,t,n,r)}function Yb(e,t){return function(e,t,n){let r=Wv.EMPTY_NODE;const i=Rb(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Fv,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Lb(e.visibleWrites,t);return n.forEachChild(Fv,((e,t)=>{const n=Bb(Lb(i,new nv(e)),t);r=r.updateImmediateChild(e,n)})),Db(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Db(Lb(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Gb(e,t,n,r){return function(e,t,n,r,i){Oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=uv(t,n);if(Mb(e.visibleWrites,o))return null;{const t=Lb(e.visibleWrites,o);return Fb(t)?i.getChild(n):Bb(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Xb(e,t){return function(e,t){return Rb(e.visibleWrites,t)}(e.writeTree,uv(e.treePath,t))}function Qb(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const l=Lb(e.visibleWrites,t),c=Rb(l,rv());if(null!=c)a=c;else{if(null==n)return[];a=Bb(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function Zb(e,t,n){return function(e,t,n,r){const i=uv(t,n),o=Rb(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return Bb(Lb(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Jb(e,t){return ex(uv(e.treePath,t),e.writeTree)}function ex(e,t){return{treePath:e,writeTree:t}}class tx{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Oe("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Oe(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,eb(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Jv(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Zv(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Me("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,eb(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const nx=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class rx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new xb(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zb(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jb(this.viewCache_),i=Qb(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function ix(e,t,n,r,i){const o=new tx;let s,a;if(n.type===pb.OVERWRITE){const l=n;l.source.fromUser?s=ax(e,t,l.path,l.snap,r,i,o):(Oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!dv(l.path),s=sx(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===pb.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,l)=>{const c=uv(n,r);lx(t,iv(c))&&(a=ax(e,a,c,l,i,o,s))})),r.foreach(((r,l)=>{const c=uv(n,r);lx(t,iv(c))||(a=ax(e,a,c,l,i,o,s))})),a}(e,t,l.path,l.children,r,i,o):(Oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=ux(e,t,l.path,l.children,r,i,a,o))}else if(n.type===pb.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=Xb(r,n))return t;{const a=new rx(r,t,i),l=t.eventCache.getNode();let c;if(dv(n)||".priority"===iv(n)){let n;if(t.serverCache.isFullyInitialized())n=Kb(r,jb(t));else{const e=t.serverCache.getNode();Oe(e instanceof Wv,"serverChildren would be complete if leaf node"),n=Yb(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=iv(n);let u=Zb(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,sv(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Wv.EMPTY_NODE,sv(n),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Kb(r,jb(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=Xb(r,rv()),Eb(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=Xb(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(dv(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return sx(e,t,n,l.getNode().getChild(n),i,o,a,s);if(dv(n)){let r=new Nb(null);return l.getNode().forEachChild(Cv,((e,t)=>{r=r.set(new nv(e),t)})),ux(e,t,n,r,i,o,a,s)}return t}{let c=new Nb(null);return r.foreach(((e,t)=>{const r=uv(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),ux(e,t,n,c,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==pb.LISTEN_COMPLETE)throw Me("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=Cb(t,o.getNode(),o.isFullyInitialized()||dv(n),o.isFiltered());return ox(e,s,n,r,nx,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Tb(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Qv(Tb(t)))}}(t,s,l),{viewCache:s,changes:l}}function ox(e,t,n,r,i,o){const s=t.eventCache;if(null!=Xb(r,n))return t;{let a,l;if(dv(n))if(Oe(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=jb(t),i=Yb(r,n instanceof Wv?n:Wv.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=Kb(r,jb(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=iv(n);if(".priority"===c){Oe(1===ov(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const o=Gb(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const u=sv(n);let d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Gb(r,n,s.getNode(),l);d=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else d=Zb(r,c,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),c,d,u,i,o):s.getNode()}}return Eb(t,a,s.isFullyInitialized()||dv(n),e.filter.filtersNodes())}}function sx(e,t,n,r,i,o,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(dv(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=iv(n);if(!l.isCompleteForPath(n)&&ov(n)>1)return t;const i=sv(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,nx,null)}const d=Cb(t,c,l.isFullyInitialized()||dv(n),u.filtersNodes());return ox(e,d,n,i,new rx(i,d,o),a)}function ax(e,t,n,r,i,o,s){const a=t.eventCache;let l,c;const u=new rx(i,t,o);if(dv(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=Eb(t,c,!0,e.filter.filtersNodes());else{const i=iv(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Eb(t,c,a.isFullyInitialized(),a.isFiltered());else{const o=sv(n),c=a.getNode().getImmediateChild(i);let d;if(dv(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===av(o)&&e.getChild(cv(o)).isEmpty()?e:e.updateChild(o,r):Wv.EMPTY_NODE}if(c.equals(d))l=t;else{l=Eb(t,e.filter.updateChild(a.getNode(),i,d,o,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function lx(e,t){return e.eventCache.isCompleteForChild(t)}function cx(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function ux(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=dv(n)?r:new Nb(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=cx(0,t.serverCache.getNode().getImmediateChild(n),r);c=sx(e,c,new nv(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=cx(0,t.serverCache.getNode().getImmediateChild(n),r);c=sx(e,c,new nv(n),l,i,o,s,a)}})),c}class dx{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new tb(n.getIndex()),i=(o=n).loadsAllData()?new tb(o.getIndex()):o.hasLimit()?new rb(o):new nb(o);var o;this.processor_=function(e){return{filter:e}}(i);const s=t.serverCache,a=t.eventCache,l=r.updateFullNode(Wv.EMPTY_NODE,s.getNode(),null),c=i.updateFullNode(Wv.EMPTY_NODE,a.getNode(),null),u=new xb(l,s.isFullyInitialized(),r.filtersNodes()),d=new xb(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Sb(d,u),this.eventGenerator_=new wb(this.query_)}get query(){return this.query_}}function hx(e,t){const n=jb(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!dv(t)&&!n.getImmediateChild(iv(t)).isEmpty())?n.getChild(t):null}function fx(e){return 0===e.eventRegistrations_.length}function px(e,t,n){const r=[];if(n){Oe(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function mx(e,t,n,r){t.type===pb.MERGE&&null!==t.source.queryId&&(Oe(jb(e.viewCache_),"We should always have a full cache before handling merges"),Oe(Tb(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=ix(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,Oe(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Oe(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),Oe(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,gx(e,o.changes,o.viewCache.eventCache.getNode(),null)}function gx(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),_b(e,i,"child_removed",t,r,n),_b(e,i,"child_added",t,r,n),_b(e,i,"child_moved",o,r,n),_b(e,i,"child_changed",t,r,n),_b(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let yx,vx;class bx{constructor(){this.views=new Map}}function xx(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return Oe(null!=o,"SyncTree gave us an op for an invalid query."),mx(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(mx(o,t,n,r));return i}}function wx(e,t,n,r,i){const o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=Kb(n,i?r:null),o=!1;e?o=!0:r instanceof Wv?(e=Yb(n,r),o=!1):(e=Wv.EMPTY_NODE,o=!1);const s=Sb(new xb(e,o,!1),new xb(r,i,!1));return new dx(t,s)}return s}function _x(e,t,n,r,i,o){const s=wx(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Fv,((e,t)=>{r.push(Zv(e,t))}));return n.isFullyInitialized()&&r.push(Qv(n.getNode())),gx(e,r,n.getNode(),t)}(s,n)}function Sx(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=kx(e);if("default"===i)for(const[l,c]of e.views.entries())s=s.concat(px(c,n,r)),fx(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(s=s.concat(px(t,n,r)),fx(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!kx(e)&&o.push(new(Oe(yx,"Reference.ts has not been loaded"),yx)(t._repo,t._path)),{removed:o,events:s}}function Ex(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Cx(e,t){let n=null;for(const r of e.views.values())n=n||hx(r,t);return n}function Tx(e,t){if(t._queryParams.loadsAllData())return Nx(e);{const n=t._queryIdentifier;return e.views.get(n)}}function jx(e,t){return null!=Tx(e,t)}function kx(e){return null!=Nx(e)}function Nx(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Ax=1;class Ix{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nb(null),this.pendingWriteTree_={visibleWrites:Ab.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Px(e,t,n,r,i){return function(e,t,n,r,i){Oe(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ib(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Ux(e,new vb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Ox(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(zb(e.pendingWriteTree_,t)){let t=new Nb(null);return null!=r.snap?t=t.set(rv(),!0):Cy(r.children,(e=>{t=t.set(new nv(e),!0)})),Ux(e,new gb(r.path,t,n))}return[]}function Mx(e,t,n){return Ux(e,new vb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Rx(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||jx(s,t))){const l=Sx(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>kx(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&kx(t)){return[Nx(t)]}{let e=[];return t&&(e=Ex(t)),Cy(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=$x(e,r);e.listenProvider_.startListening(Gx(i),Hx(e,i),o.hashFn,o.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Gx(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(qx(t));e.listenProvider_.stopListening(Gx(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=qx(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Dx(e,t,n,r){const i=Wx(e,r);if(null!=i){const r=Kx(i),o=r.path,s=r.queryId,a=hv(o,t);return Yx(e,o,new vb(mb(s),a,n))}return[]}function Lx(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=hv(e,i);o=o||Cx(t,n),s=s||kx(t)}));let a,l=e.syncPointTree_.get(i);if(l?(s=s||kx(l),o=o||Cx(l,rv())):(l=new bx,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)a=!0;else{a=!1,o=Wv.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Cx(t,rv());n&&(o=o.updateImmediateChild(e,n))}))}const c=jx(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=qx(t);Oe(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Ax++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=_x(l,t,n,Vb(e.pendingWriteTree_,i),o,a);if(!c&&!s&&!r){const n=Tx(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Hx(e,t),o=$x(e,n),s=e.listenProvider_.startListening(Gx(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)Oe(!kx(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!dv(e)&&t&&kx(t))return[Nx(t).query];{let e=[];return t&&(e=e.concat(Ex(t).map((e=>e.query)))),Cy(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Gx(r),Hx(e,r))}}return s}(e,t,n))}return u}function Fx(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Cx(n,hv(e,t));if(r)return r}));return Wb(r,t,i,n,!0)}function Bx(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=hv(e,n);r=r||Cx(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Cx(i,rv()):(i=new bx,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=null!=r,s=o?new xb(r,!0,!1):null;return function(e){return Tb(e.viewCache_)}(wx(i,t,Vb(e.pendingWriteTree_,t._path),o?s.getNode():Wv.EMPTY_NODE,o))}function Ux(e,t){return Vx(t,e.syncPointTree_,null,Vb(e.pendingWriteTree_,rv()))}function Vx(e,t,n,r){if(dv(e.path))return zx(e,t,n,r);{const i=t.get(rv());null==n&&null!=i&&(n=Cx(i,rv()));let o=[];const s=iv(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=n?n.getImmediateChild(s):null,t=Jb(r,s);o=o.concat(Vx(a,l,e,t))}return i&&(o=o.concat(xx(i,e,r,n))),o}}function zx(e,t,n,r){const i=t.get(rv());null==n&&null!=i&&(n=Cx(i,rv()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=Jb(r,t),l=e.operationForChild(t);l&&(o=o.concat(zx(l,i,s,a)))})),i&&(o=o.concat(xx(i,e,r,n))),o}function $x(e,t){const n=t.query,r=Hx(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Wv.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Wx(e,n);if(r){const n=Kx(r),i=n.path,o=n.queryId,s=hv(i,t);return Yx(e,i,new yb(mb(o),s))}return[]}(e,n._path,r):function(e,t){return Ux(e,new yb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Rx(e,n,null,r)}}}}function Hx(e,t){const n=qx(t);return e.queryToTagMap.get(n)}function qx(e){return e._path.toString()+"$"+e._queryIdentifier}function Wx(e,t){return e.tagToQueryMap.get(t)}function Kx(e){const t=e.indexOf("$");return Oe(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new nv(e.substr(0,t))}}function Yx(e,t,n){const r=e.syncPointTree_.get(t);Oe(r,"Missing sync point for query tag that we're tracking");return xx(r,n,Vb(e.pendingWriteTree_,t),null)}function Gx(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Oe(vx,"Reference.ts has not been loaded"),vx)(e._repo,e._path):e}class Xx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Xx(t)}node(){return this.node_}}class Qx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=uv(this.path_,e);return new Qx(this.syncTree_,t)}node(){return Fx(this.syncTree_,this.path_)}}const Zx=function(e,t,n){return e&&"object"===typeof e?(Oe(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Jx(e[".sv"],t,n):"object"===typeof e[".sv"]?ew(e[".sv"],t):void Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Jx=function(e,t,n){if("timestamp"===e)return n.timestamp;Oe(!1,"Unexpected server value: "+e)},ew=function(e,t,n){e.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Oe(!1,"Unexpected increment value: "+r);const i=t.node();if(Oe(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},tw=function(e,t,n,r){return rw(t,new Qx(n,e),r)},nw=function(e,t,n){return rw(e,new Xx(t),n)};function rw(e,t,n){const r=e.getPriority().val(),i=Zx(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=Zx(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new Lv(o,Yv(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new Lv(i))),r.forEachChild(Fv,((e,r)=>{const i=rw(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class iw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function ow(e,t){let n=t instanceof nv?t:new nv(t),r=e,i=iv(n);for(;null!==i;){const e=ht(r.node.children,i)||{children:{},childCount:0};r=new iw(i,r,e),n=sv(n),i=iv(n)}return r}function sw(e){return e.node.value}function aw(e,t){e.node.value=t,hw(e)}function lw(e){return e.node.childCount>0}function cw(e,t){Cy(e.node.children,((n,r)=>{t(new iw(n,e,r))}))}function uw(e,t,n,r){n&&!r&&t(e),cw(e,(e=>{uw(e,t,!0,r)})),n&&r&&t(e)}function dw(e){return new nv(null===e.parent?e.name:dw(e.parent)+"/"+e.name)}function hw(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===sw(e)&&!lw(e)}(n),i=dt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,hw(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,hw(e))}(e.parent,e.name,e)}const fw=/[\[\].#$\/\u0000-\u001F\u007F]/,pw=/[\[\].#$\u0000-\u001F\u007F]/,mw=10485760,gw=function(e){return"string"===typeof e&&0!==e.length&&!fw.test(e)},yw=function(e){return"string"===typeof e&&0!==e.length&&!pw.test(e)},vw=function(e,t,n,r){r&&void 0===t||bw(St(e,"value"),t,n)},bw=function(e,t,n){const r=n instanceof nv?new mv(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+yv(r));if("function"===typeof t)throw new Error(e+"contains a function "+yv(r)+" with contents = "+t.toString());if(yy(t))throw new Error(e+"contains "+t.toString()+" "+yv(r));if("string"===typeof t&&t.length>mw/3&&Et(t)>mw)throw new Error(e+"contains a string greater than "+mw+" utf8 bytes "+yv(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Cy(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!gw(t)))throw new Error(e+" contains an invalid key ("+t+") "+yv(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Et(t),gv(e)}(r,t),bw(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=Et(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+yv(r)+" in addition to actual children.")}},xw=function(e,t,n,r){if((!r||void 0!==n)&&!yw(n))throw new Error(St(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ww=function(e,t){if(".info"===iv(t))throw new Error(e+" failed = Can't modify data under /.info/")},_w=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!gw(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),yw(e)}(n))throw new Error(St(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Sw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ew(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||fv(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Cw(e,t,n){Ew(e,n),jw(e,(e=>fv(e,t)))}function Tw(e,t,n){Ew(e,n),jw(e,(e=>pv(e,t)||pv(t,e)))}function jw(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(kw(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function kw(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();cy&&hy("event: "+n.toString()),Ny(r)}}}const Nw="repo_interrupt";class Aw{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cb(),this.transactionQueueTree_=new iw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Iw(e,t,n){if(e.stats_=Hy(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ab(e.repoInfo_,((t,n,r,i)=>{Mw(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Rw(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ct(n)}catch(zH){throw new Error("Invalid authOverride provided: "+zH)}}e.persistentConnection_=new xv(e.repoInfo_,t,((t,n,r,i)=>{Mw(e,t,n,r,i)}),(t=>{Rw(e,t)}),(t=>{!function(e,t){Cy(t,((t,n)=>{Dw(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return $y[n]||($y[n]=t()),$y[n]}(e.repoInfo_,(()=>new fb(e.stats_,e.server_))),e.infoData_=new lb,e.infoSyncTree_=new Ix({startListening:(t,n,r,i)=>{let o=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=Mx(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),Dw(e,"connected",!1),e.serverSyncTree_=new Ix({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);Tw(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Pw(e){const t=e.infoData_.getNode(new nv(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ow(e){return(t=(t={timestamp:Pw(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Mw(e,t,n,r,i){e.dataUpdateCount++;const o=new nv(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=pt(n,(e=>Yv(e)));s=function(e,t,n,r){const i=Wx(e,r);if(i){const r=Kx(i),o=r.path,s=r.queryId,a=hv(o,t),l=Nb.fromObject(n);return Yx(e,o,new bb(mb(s),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=Yv(n);s=Dx(e.serverSyncTree_,o,t,i)}else if(r){const t=pt(n,(e=>Yv(e)));s=function(e,t,n){const r=Nb.fromObject(n);return Ux(e,new bb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=Yv(n);s=Mx(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=qw(e,o)),Tw(e.eventQueue_,a,s)}function Rw(e,t){Dw(e,"connected",t),!1===t&&function(e){Vw(e,"onDisconnectEvents");const t=Ow(e),n=cb();db(e.onDisconnect_,rv(),((r,i)=>{const o=tw(r,i,e.serverSyncTree_,t);ub(n,r,o)}));let r=[];db(n,rv(),((t,n)=>{r=r.concat(Mx(e.serverSyncTree_,t,n));const i=Xw(e,t);qw(e,i)})),e.onDisconnect_=cb(),Tw(e.eventQueue_,rv(),r)}(e)}function Dw(e,t,n){const r=new nv("/.info/"+t),i=Yv(n);e.infoData_.updateSnapshot(r,i);const o=Mx(e.infoSyncTree_,r,i);Tw(e.eventQueue_,r,o)}function Lw(e){return e.nextWriteId_++}function Fw(e,t,n,r,i){Vw(e,"set",{path:t.toString(),value:n,priority:r});const o=Ow(e),s=Yv(n,r),a=Fx(e.serverSyncTree_,t),l=nw(s,a,o),c=Lw(e),u=Px(e.serverSyncTree_,t,l,c,!0);Ew(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),((n,r)=>{const o="ok"===n;o||gy("set at "+t+" failed: "+n);const s=Ox(e.serverSyncTree_,c,!o);Tw(e.eventQueue_,t,s),zw(e,i,n,r)}));const d=Xw(e,t);qw(e,d),Tw(e.eventQueue_,d,[])}function Bw(e,t,n){let r;r=".info"===iv(t._path)?Rx(e.infoSyncTree_,t,n):Rx(e.serverSyncTree_,t,n),Cw(e.eventQueue_,t._path,r)}function Uw(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Nw)}function Vw(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];hy(t,...r)}function zw(e,t,n,r){t&&Ny((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function $w(e,t,n){return Fx(e.serverSyncTree_,t,n)||Wv.EMPTY_NODE}function Hw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Gw(e,t),sw(t)){const n=Kw(e,t);Oe(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=$w(e,t,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Oe(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=hv(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{Vw(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Ox(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Gw(e,ow(e.transactionQueueTree_,t)),Hw(e,e.transactionQueueTree_),Tw(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Ny(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{gy("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}qw(e,t)}}),s)}(e,dw(t),n)}else lw(t)&&cw(t,(t=>{Hw(e,t)}))}function qw(e,t){const n=Ww(e,t),r=dw(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=hv(n,o.path);let u,d=!1;if(Oe(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(Ox(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)d=!0,u="maxretry",i=i.concat(Ox(e.serverSyncTree_,o.currentWriteId,!0));else{const n=$w(e,o.path,s);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){bw("transaction failed: Data returned ",r,o.path);let t=Yv(r);"object"===typeof r&&null!=r&&dt(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,l=Ow(e),c=nw(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=Lw(e),s.splice(s.indexOf(a),1),i=i.concat(Px(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(Ox(e.serverSyncTree_,a,!0))}else d=!0,u="nodata",i=i.concat(Ox(e.serverSyncTree_,o.currentWriteId,!0))}Tw(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;Gw(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Ny(r[l]);Hw(e,e.transactionQueueTree_)}(e,Kw(e,n),r),r}function Ww(e,t){let n,r=e.transactionQueueTree_;for(n=iv(t);null!==n&&void 0===sw(r);)r=ow(r,n),n=iv(t=sv(t));return r}function Kw(e,t){const n=[];return Yw(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Yw(e,t,n){const r=sw(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);cw(t,(t=>{Yw(e,t,n)}))}function Gw(e,t){const n=sw(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,aw(t,n.length>0?n:void 0)}cw(t,(t=>{Gw(e,t)}))}function Xw(e,t){const n=dw(Ww(e,t)),r=ow(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Qw(e,t)})),Qw(e,r),uw(r,(t=>{Qw(e,t)})),n}function Qw(e,t){const n=sw(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Oe(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(Oe(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Ox(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?aw(t,void 0):n.length=o+1,Tw(e.eventQueue_,dw(t),i);for(let e=0;e<r.length;e++)Ny(r[e])}}const Zw=function(e,t){const n=Jw(e),r=n.namespace;"firebase.com"===n.domain&&my(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||my("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gy("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new By(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new nv(n.pathString)}},Jw=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(zH){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gy(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},e_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class t_{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ct(this.snapshot.exportVal())}}class n_{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class r_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class i_{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return dv(this._path)?null:av(this._path)}get ref(){return new o_(this._repo,this._path)}get _queryIdentifier(){const e=sb(this._queryParams),t=Sy(e);return"{}"===t?"default":t}get _queryObject(){return sb(this._queryParams)}isEqual(e){if(!((e=Tt(e))instanceof i_))return!1;const t=this._repo===e._repo,n=fv(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class o_ extends i_{constructor(e,t){super(e,t,new ib,!1)}get parent(){const e=cv(this._path);return null===e?null:new o_(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class s_{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new nv(e),n=l_(this.ref,e);return new s_(this._node.getChild(t),n,Fv)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new s_(n,l_(this.ref,t),Fv))))}hasChild(e){const t=new nv(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function a_(e,t){return(e=Tt(e))._checkNotDeleted("ref"),void 0!==t?l_(e._root,t):e._root}function l_(e,t){var n,r,i,o;return null===iv((e=Tt(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),xw(n,r,i,o)):xw("child","path",t,!1),new o_(e._repo,uv(e._path,t))}function c_(e,t){e=Tt(e),ww("set",e._path),vw("set",t,e._path,!1);const n=new Ge;return Fw(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function u_(e){e=Tt(e);const t=new r_((()=>{})),n=new d_(t);return function(e,t,n){const r=Bx(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Yv(r).withIndex(t._queryParams.getIndex());let o;if(Lx(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())o=Mx(e.serverSyncTree_,t._path,i);else{const n=Hx(e.serverSyncTree_,t);o=Dx(e.serverSyncTree_,t._path,i,n)}return Tw(e.eventQueue_,t._path,o),Rx(e.serverSyncTree_,t,n,null,!0),i}),(n=>(Vw(e,"get for query "+ct(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new s_(t,new o_(e._repo,e._path),e._queryParams.getIndex())))}class d_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new t_("value",this,new s_(e.snapshotNode,new o_(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new n_(this,e,t):null}matches(e){return e instanceof d_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class h_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new n_(this,e,t):null}createEvent(e,t){Oe(null!=e.childName,"Child events should have a childName.");const n=l_(new o_(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new t_(e.type,this,new s_(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof h_&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function f_(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Bw(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new r_(n,o||void 0),a="value"===t?new d_(s):new h_(t,s);return function(e,t,n){let r;r=".info"===iv(t._path)?Lx(e.infoSyncTree_,t,n):Lx(e.serverSyncTree_,t,n),Cw(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>Bw(e._repo,e,a)}function p_(e,t,n,r){return f_(e,"value",t,n,r)}!function(e){Oe(!yx,"__referenceConstructor has already been defined"),yx=e}(o_),function(e){Oe(!vx,"__referenceConstructor has already been defined"),vx=e}(o_);const m_={};let g_=!1;function y_(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||my("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hy("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s,a,l=Zw(o,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDQIMqO4bJ-k4-pjjGnHGwCbCYUFUQe7Hw",REACT_APP_FIREBASE_APP_ID:"1:300630412358:web:44afc1a224507ccb764e47",REACT_APP_FIREBASE_AUTH_DOMAIN:"smartecolock.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://smartecolock-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-PNBNJ39FE0",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"300630412358",REACT_APP_FIREBASE_PROJECT_ID:"smartecolock",REACT_APP_FIREBASE_STORAGE_BUCKET:"smartecolock.firebasestorage.app",REACT_APP_GEMINI_API_KEY:"AIzaSyBYLXhvqwNsxNzMAMcxBlnAulcFOhNQhEk"}.FIREBASE_DATABASE_EMULATOR_HOST),a?(s=!0,o=`http://${a}?ns=${c.namespace}`,l=Zw(o,i),c=l.repoInfo):s=!l.repoInfo.secure;const u=i&&s?new Oy(Oy.OWNER):new Py(e.name,e.options,t);_w("Invalid Firebase Database URL",l),dv(l.path)||my("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=m_[t.name];i||(i={},m_[t.name]=i);let o=i[e.toURLString()];o&&my("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new Aw(e,g_,n,r),i[e.toURLString()]=o,o}(c,e,u,new Iy(e.name,n));return new v_(d,e)}class v_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Iw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new o_(this._repo,rv())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=m_[t];n&&n[e.key]===e||my(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Uw(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&my("Cannot call "+e+" on a deleted database.")}}function b_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn(),t=arguments.length>1?arguments[1]:void 0;const n=Bn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=We("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Tt(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&my("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&my('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Oy(Oy.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Xe(r.mockUserToken,e.app.options.projectId);o=new Oy(t)}!function(e,t,n,r){e.repoInfo_=new By(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...e)}return n}xv.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},xv.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Jg($n),Fn(new jt("database",((e,t)=>{let{instanceIdentifier:n}=t;return y_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Wn(Xg,Qg,e),Wn(Xg,Qg,"esm2017")}();const x_=Hn({apiKey:"AIzaSyDQIMqO4bJ-k4-pjjGnHGwCbCYUFUQe7Hw",authDomain:"smartecolock.firebaseapp.com",projectId:"smartecolock",storageBucket:"smartecolock.firebasestorage.app",messagingSenderId:"300630412358",appId:"1:300630412358:web:44afc1a224507ccb764e47",measurementId:"G-PNBNJ39FE0",databaseURL:"https://smartecolock-default-rtdb.asia-southeast1.firebasedatabase.app"}),w_=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn();e=Tt(e);const t=Bn(e,vg);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Bn(e,vg);if(n.isInitialized()){const e=n.getImmediate();if(mt(t,n.getOptions()))return e;throw wg.create("already-initialized")}const r=n.initialize({options:t})}(e)}(x_),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn();const t=Bn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Bn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(mt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;cr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ws,persistence:[Io,po,go]}),r=Ye("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Cs)return;const r=null===t||void 0===t?void 0:t.token;Ts!==r&&(Ts=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Tt(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Tt(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const o=qe("auth");return o&&ki(n,`http://${o}`),n}(x_)),__=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Bn("object"==typeof e?e:qn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=We("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=cp(e,hp))._getSettings(),s=`${t}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$s.MOCK_USER;else{t=Xe(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new ta(ea.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $s(o)}e._authCredentials=new oa(new ra(t,n))}}(r,...e)}return r}(x_),S_=b_(x_);var E_=n(579);const C_=(0,r.createContext)(void 0),T_=()=>{const e=(0,r.useContext)(C_);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},j_=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!0),a=te(),l=async e=>{try{const t=await bm(yp(__,"users",e.uid));if(t.exists()){const n=t.data();return{...e,role:"admin",fullName:n.fullName,department:n.department}}const n=await bm(yp(__,"teachers",e.uid));if(n.exists()){const t=n.data();return{...e,role:"instructor",fullName:t.fullName,department:t.department}}const r=await bm(yp(__,"students",e.uid));if(r.exists()){const t=r.data();return{...e,role:"student",fullName:t.fullName,department:t.department}}return e}catch(py){return console.error("Error fetching user data:",py),e}};(0,r.useEffect)((()=>{const e=function(e,t,n,r){return Tt(e).onAuthStateChanged(t,n,r)}(w_,(async e=>{if(e){const t=await l(e);i(t)}else i(null);s(!1)}));return()=>e()}),[]);const c={currentUser:n,login:async(e,t)=>{try{const{user:n}=await function(e,t,n){return Un(e.app)?Promise.reject(hr(e)):io(Tt(e),$i.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&so(e),t}))}(w_,e,t),r=await l(n);if(i(r),!r.role)throw new Error("User role not found");{const e={admin:"/admin/dashboard",instructor:"/instructor/dashboard",student:"/students/dashboard"};console.log("Redirecting to:",e[r.role]),a(e[r.role],{replace:!0})}}catch(py){throw console.error("Login error:",py),py}},register:async(e,t,n)=>{try{const{user:n}=await ao(w_,e,t)}catch(py){throw py}},logout:async()=>{try{await lo(w_),i(null),a("/login",{replace:!0})}catch(py){throw console.error("Logout error:",py),py}},loading:o};return(0,E_.jsx)(C_.Provider,{value:c,children:!o&&t})};function k_(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function N_(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function A_(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function I_(e,t,n,r){if("function"===typeof t){const[i,o]=A_(r);t=t(void 0!==n?n:e.custom,i,o)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[i,o]=A_(r);t=t(void 0!==n?n:e.custom,i,o)}return t}function P_(e,t,n){const r=e.getProps();return I_(r,t,void 0!==n?n:r.custom,e)}function O_(e){let t;return()=>(void 0===t&&(t=e()),t)}const M_=O_((()=>void 0!==window.ScrollTimeline));class R_{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>"finished"in e?e.finished:e)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map((n=>M_()&&n.attachTimeline?n.attachTimeline(e):"function"===typeof t?t(n):void 0));return()=>{n.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class D_ extends R_{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function L_(e,t){return e?e[t]||e.default||e:void 0}const F_=2e4;function B_(e){let t=0;let n=e.next(t);for(;!n.done&&t<F_;)t+=50,n=e.next(t);return t>=F_?1/0:t}function U_(e){return"function"===typeof e}function V_(e,t){e.timeline=t,e.onfinish=null}const z_=e=>Array.isArray(e)&&"number"===typeof e[0],$_={linearEasing:void 0};function H_(e,t){const n=O_(e);return()=>{var e;return null!==(e=$_[t])&&void 0!==e?e:n()}}const q_=H_((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(zH){return!1}return!0}),"linearEasing"),W_=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},K_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const i=Math.max(Math.round(t/n),2);for(let o=0;o<i;o++)r+=e(W_(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function Y_(e){return Boolean("function"===typeof e&&q_()||!e||"string"===typeof e&&(e in X_||q_())||z_(e)||Array.isArray(e)&&e.every(Y_))}const G_=e=>{let[t,n,r,i]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${i})`},X_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:G_([0,.65,.55,1]),circOut:G_([.55,0,1,.45]),backIn:G_([.31,.01,.66,-.59]),backOut:G_([.33,1.53,.69,.99])};function Q_(e,t){return e?"function"===typeof e&&q_()?K_(e,t):z_(e)?G_(e):Array.isArray(e)?e.map((e=>Q_(e,t)||X_.easeOut)):X_[e]:void 0}const Z_={x:!1,y:!1};function J_(){return Z_.x||Z_.y}function eS(e,t){const n=function(e,t,n){var r;if(e instanceof EventTarget)return[e];if("string"===typeof e){let i=document;t&&(i=t.current);const o=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:i.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function tS(e){return!("touch"===e.pointerType||J_())}const nS=(e,t)=>!!t&&(e===t||nS(e,t.parentElement)),rS=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary,iS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const oS=new WeakSet;function sS(e){return t=>{"Enter"===t.key&&e(t)}}function aS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function lS(e){return rS(e)&&!J_()}function cS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,o]=eS(e,n),s=e=>{const n=e.currentTarget;if(!n||!lS(e)||oS.has(n))return;if(oS.add(n),n.setPointerCapture&&void 0!==e.pointerId)try{n.setPointerCapture(e.pointerId)}catch(zH){}const r=t(n,e),o=(e,t)=>{if(n.removeEventListener("pointerup",s),n.removeEventListener("pointercancel",a),n.releasePointerCapture&&void 0!==e.pointerId)try{n.releasePointerCapture(e.pointerId)}catch(zH){}lS(e)&&oS.has(n)&&(oS.delete(n),"function"===typeof r&&r(e,{success:t}))},s=e=>{const t=!!e.isTrusted&&(r=e,i=n instanceof Element?n.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight},r.clientX<i.left||r.clientX>i.right||r.clientY<i.top||r.clientY>i.bottom);var r,i;o(e,!t&&(!(n instanceof Element)||nS(n,e.target)))},a=e=>{o(e,!1)};n.addEventListener("pointerup",s,i),n.addEventListener("pointercancel",a,i),n.addEventListener("lostpointercapture",a,i)};return r.forEach((e=>{let t=!1;var r;(e=n.useGlobalTarget?window:e)instanceof HTMLElement&&(t=!0,r=e,iS.has(r.tagName)||-1!==r.tabIndex||null!==e.getAttribute("tabindex")||(e.tabIndex=0)),e.addEventListener("pointerdown",s,i),t&&e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=sS((()=>{if(oS.has(n))return;aS(n,"down");const e=sS((()=>{aS(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>aS(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,i)),i)})),o}const uS=e=>1e3*e,dS=e=>e/1e3,hS=e=>e;const fS=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pS=new Set(fS),mS=new Set(["width","height","top","left","right","bottom",...fS]),gS=e=>Array.isArray(e),yS=e=>gS(e)?e[e.length-1]||0:e,vS=!1,bS=!1,xS=["read","resolveKeyframes","update","preRender","render","postRender"],wS={value:null,addProjectionMetrics:null};function _S(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,s=xS.reduce(((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,o=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){s.has(t)&&(u.schedule(t),e()),l++,t(a)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),s.delete(e)},process:e=>{a=e,i?o=!0:(i=!0,[n,r]=[r,n],n.forEach(c),t&&wS.value&&wS.value.frameloop[t].push(l),l=0,n.clear(),i=!1,o&&(o=!1,u.process(e)))}};return u}(o,t?n:void 0),e)),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=s,f=()=>{const o=bS?i.timestamp:performance.now();n=!1,bS||(i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1)),i.timestamp=o,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(f))},p=xS.reduce(((t,o)=>{const a=s[o];return t[o]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(f)),a.schedule(t,o,s)},t}),{});return{schedule:p,cancel:e=>{for(let t=0;t<xS.length;t++)s[xS[t]].cancel(e)},state:i,steps:s}}const{schedule:SS,cancel:ES,state:CS,steps:TS}=_S("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:hS,!0);let jS;function kS(){jS=void 0}const NS={now:()=>(void 0===jS&&NS.set(CS.isProcessing||bS?CS.timestamp:performance.now()),jS),set:e=>{jS=e,queueMicrotask(kS)}};function AS(e,t){-1===e.indexOf(t)&&e.push(t)}function IS(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class PS{constructor(){this.subscriptions=[]}add(e){return AS(this.subscriptions,e),()=>IS(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function OS(e,t){return t?e*(1e3/t):0}const MS={current:void 0};class RS{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="12.4.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=NS.now();t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=NS.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new PS);const n=this.events[e].add(t);return"change"===e?()=>{n(),SS.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return MS.current&&MS.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=NS.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return OS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function DS(e,t){return new RS(e,t)}function LS(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,DS(n))}const FS=e=>Boolean(e&&e.getVelocity);function BS(e,t){const n=e.getValue("willChange");if(function(e){return Boolean(FS(e)&&e.add)}(n))return n.add(t)}const US=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),VS="data-"+US("framerAppearId");function zS(e){return e.props[VS]}const $S=!1,HS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function qS(e,t,n,r){if(e===t&&n===r)return hS;const i=t=>function(e,t,n,r,i){let o,s,a=0;do{s=t+(n-t)/2,o=HS(s,r,i)-e,o>0?n=s:t=s}while(Math.abs(o)>1e-7&&++a<12);return s}(t,0,1,e,n);return e=>0===e||1===e?e:HS(i(e),t,r)}const WS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,KS=e=>t=>1-e(1-t),YS=qS(.33,1.53,.69,.99),GS=KS(YS),XS=WS(GS),QS=e=>(e*=2)<1?.5*GS(e):.5*(2-Math.pow(2,-10*(e-1))),ZS=e=>1-Math.sin(Math.acos(e)),JS=KS(ZS),eE=WS(ZS),tE=e=>/^0[^.\s]+$/u.test(e);function nE(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||tE(e))}const rE=(e,t,n)=>n>t?t:n<e?e:n,iE={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},oE={...iE,transform:e=>rE(0,1,e)},sE={...iE,default:1},aE=e=>Math.round(1e5*e)/1e5,lE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const cE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uE=(e,t)=>n=>Boolean("string"===typeof n&&cE.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),dE=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[i,o,s,a]=r.match(lE);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},hE={...iE,transform:e=>Math.round((e=>rE(0,255,e))(e))},fE={test:uE("rgb","red"),parse:dE("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+hE.transform(t)+", "+hE.transform(n)+", "+hE.transform(r)+", "+aE(oE.transform(i))+")"}};const pE={test:uE("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:fE.transform},mE=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),gE=mE("deg"),yE=mE("%"),vE=mE("px"),bE=mE("vh"),xE=mE("vw"),wE={...yE,parse:e=>yE.parse(e)/100,transform:e=>yE.transform(100*e)},_E={test:uE("hsl","hue"),parse:dE("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+yE.transform(aE(n))+", "+yE.transform(aE(r))+", "+aE(oE.transform(i))+")"}},SE={test:e=>fE.test(e)||pE.test(e)||_E.test(e),parse:e=>fE.test(e)?fE.parse(e):_E.test(e)?_E.parse(e):pE.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?fE.transform(e):_E.transform(e)},EE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const CE="number",TE="color",jE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kE(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=t.replace(jE,(e=>(SE.test(e)?(r.color.push(o),i.push(TE),n.push(SE.parse(e))):e.startsWith("var(")?(r.var.push(o),i.push("var"),n.push(e)):(r.number.push(o),i.push(CE),n.push(parseFloat(e))),++o,"${}"))).split("${}");return{values:n,split:s,indexes:r,types:i}}function NE(e){return kE(e).values}function AE(e){const{split:t,types:n}=kE(e),r=t.length;return e=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],void 0!==e[o]){const t=n[o];i+=t===CE?aE(e[o]):t===TE?SE.transform(e[o]):e[o]}return i}}const IE=e=>"number"===typeof e?0:e;const PE={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(lE))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(EE))||void 0===n?void 0:n.length)||0)>0},parse:NE,createTransformer:AE,getAnimatableNone:function(e){const t=NE(e);return AE(e)(t.map(IE))}},OE=new Set(["brightness","contrast","saturate","opacity"]);function ME(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(lE)||[];if(!r)return e;const i=n.replace(r,"");let o=OE.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const RE=/\b([a-z-]*)\(.*?\)/gu,DE={...PE,getAnimatableNone:e=>{const t=e.match(RE);return t?t.map(ME).join(" "):e}},LE={borderWidth:vE,borderTopWidth:vE,borderRightWidth:vE,borderBottomWidth:vE,borderLeftWidth:vE,borderRadius:vE,radius:vE,borderTopLeftRadius:vE,borderTopRightRadius:vE,borderBottomRightRadius:vE,borderBottomLeftRadius:vE,width:vE,maxWidth:vE,height:vE,maxHeight:vE,top:vE,right:vE,bottom:vE,left:vE,padding:vE,paddingTop:vE,paddingRight:vE,paddingBottom:vE,paddingLeft:vE,margin:vE,marginTop:vE,marginRight:vE,marginBottom:vE,marginLeft:vE,backgroundPositionX:vE,backgroundPositionY:vE},FE={rotate:gE,rotateX:gE,rotateY:gE,rotateZ:gE,scale:sE,scaleX:sE,scaleY:sE,scaleZ:sE,skew:gE,skewX:gE,skewY:gE,distance:vE,translateX:vE,translateY:vE,translateZ:vE,x:vE,y:vE,z:vE,perspective:vE,transformPerspective:vE,opacity:oE,originX:wE,originY:wE,originZ:vE},BE={...iE,transform:Math.round},UE={...LE,...FE,zIndex:BE,size:vE,fillOpacity:oE,strokeOpacity:oE,numOctaves:BE},VE={...UE,color:SE,backgroundColor:SE,outlineColor:SE,fill:SE,stroke:SE,borderColor:SE,borderTopColor:SE,borderRightColor:SE,borderBottomColor:SE,borderLeftColor:SE,filter:DE,WebkitFilter:DE},zE=e=>VE[e];function $E(e,t){let n=zE(e);return n!==DE&&(n=PE),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const HE=new Set(["auto","none","0"]);const qE=e=>e===iE||e===vE,WE=(e,t)=>parseFloat(e.split(", ")[t]),KE=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/u);if(o)return WE(o[1],t);{const t=i.match(/^matrix\((.+)\)$/u);return t?WE(t[1],e):0}},YE=new Set(["x","y","z"]),GE=fS.filter((e=>!YE.has(e)));const XE={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:KE(4,13),y:KE(5,14)};XE.translateX=XE.x,XE.translateY=XE.y;const QE=new Set;let ZE=!1,JE=!1;function eC(){if(JE){const e=Array.from(QE).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return GE.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{let[n,r]=t;var i;null===(i=e.getValue(n))||void 0===i||i.set(r)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}JE=!1,ZE=!1,QE.forEach((e=>e.complete())),QE.clear()}function tC(){QE.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(JE=!0)}))}class nC{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(QE.add(this),ZE||(ZE=!0,SS.read(tC),SS.resolveKeyframes(eC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let i=0;i<e.length;i++)if(null===e[i])if(0===i){const i=null===r||void 0===r?void 0:r.get(),o=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,o);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=o),r&&void 0===i&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),QE.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,QE.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let rC=hS,iC=hS;const oC=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),sC=e=>t=>"string"===typeof t&&t.startsWith(e),aC=sC("--"),lC=sC("var(--"),cC=e=>!!lC(e)&&uC.test(e.split("/*")[0].trim()),uC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;iC(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,i]=function(e){const t=dC.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${null!==n&&void 0!==n?n:r}`,i]}(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const e=o.trim();return oC(e)?parseFloat(e):e}return cC(i)?hC(i,t,n+1):i}const fC=e=>t=>t.test(e),pC=[iE,vE,yE,gE,xE,bE,{test:e=>"auto"===e,parse:e=>e}],mC=e=>pC.find(fC(e));class gC extends nC{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),cC(n))){const r=hC(n,t.current);void 0!==r&&(e[a]=r),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!mS.has(n)||2!==e.length)return;const[r,i]=e,o=mC(r),s=mC(i);if(o!==s)if(qE(o)&&qE(s))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)nE(e[r])&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"===typeof t&&!HE.has(t)&&kE(t).values.length&&(r=e[i]),i++}if(r&&n)for(const o of t)e[o]=$E(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=XE[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,s=r[o];r[o]=XE[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),this.resolveNoneKeyframes()}}const yC=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!PE.test(e)&&"0"!==e||e.startsWith("url(")));function vC(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],s=yC(i,t),a=yC(o,t);return rC(s===a,`You are trying to animate ${t} from "${i}" to "${o}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${o} via the \`style\` property.`),!(!s||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||U_(n))&&r)}const bC=e=>null!==e;function xC(e,t,n){let{repeat:r,repeatType:i="loop"}=t;const o=e.filter(bC),s=r&&"loop"!==i&&r%2===1?0:o.length-1;return s&&void 0!==n?n:o[s]}class wC{constructor(e){let{autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:s="loop",...a}=e;this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=NS.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(tC(),eC()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=NS.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:i,delay:o,onComplete:s,onUpdate:a,isGenerator:l}=this.options;if(!l&&!vC(e,n,r,i)){if($S||!o)return a&&a(xC(e,this.options,t)),s&&s(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const _C={layout:0,mainThread:0,waapi:0},SC=(e,t,n)=>e+(t-e)*n;function EC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function CC(e,t){return n=>n>0?t:e}const TC=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},jC=[pE,fE,_E];function kC(e){const t=(e=>jC.find((t=>t.test(e))))(e);if(rC(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(t))return!1;let n=t.parse(e);return t===_E&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let o=0,s=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;o=EC(i,e,t+1/3),s=EC(i,e,t),a=EC(i,e,t-1/3)}else o=s=a=r;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*a),alpha:i}}(n)),n}const NC=(e,t)=>{const n=kC(e),r=kC(t);if(!n||!r)return CC(e,t);const i={...n};return e=>(i.red=TC(n.red,r.red,e),i.green=TC(n.green,r.green,e),i.blue=TC(n.blue,r.blue,e),i.alpha=SC(n.alpha,r.alpha,e),fE.transform(i))},AC=(e,t)=>n=>t(e(n)),IC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(AC)},PC=new Set(["none","hidden"]);function OC(e,t){return n=>SC(e,t,n)}function MC(e){return"number"===typeof e?OC:"string"===typeof e?cC(e)?CC:SE.test(e)?NC:LC:Array.isArray(e)?RC:"object"===typeof e?SE.test(e)?NC:DC:CC}function RC(e,t){const n=[...e],r=n.length,i=e.map(((e,n)=>MC(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function DC(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=MC(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const LC=(e,t)=>{const n=PE.createTransformer(t),r=kE(e),i=kE(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?PC.has(e)&&!i.values.length||PC.has(t)&&!r.values.length?function(e,t){return PC.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):IC(RC(function(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const s=t.types[o],a=e.indexes[s][i[s]],l=null!==(n=e.values[a])&&void 0!==n?n:0;r[o]=l,i[s]++}return r}(r,i),i.values),n):(rC(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),CC(e,t))};function FC(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return SC(e,t,n);return MC(e)(e,t)}function BC(e,t,n){const r=Math.max(t-5,0);return OS(n-e(r),t-r)}const UC={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},VC=.001;function zC(e){let t,n,{duration:r=UC.duration,bounce:i=UC.bounce,velocity:o=UC.velocity,mass:s=UC.mass}=e;rC(r<=uS(UC.maxDuration),"Spring duration must be 10 seconds or less");let a=1-i;a=rE(UC.minDamping,UC.maxDamping,a),r=rE(UC.minDuration,UC.maxDuration,dS(r)),a<1?(t=e=>{const t=e*a,n=t*r,i=t-o,s=HC(e,a),l=Math.exp(-n);return VC-i/s*l},n=e=>{const n=e*a*r,i=n*o+o,s=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=HC(Math.pow(e,2),a);return(-t(e)+VC>0?-1:1)*((i-s)*l)/c}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const l=function(e,t,n){let r=n;for(let i=1;i<$C;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=uS(r),isNaN(l))return{stiffness:UC.stiffness,damping:UC.damping,duration:r};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:r}}}const $C=12;function HC(e,t){return e*Math.sqrt(1-t*t)}const qC=["duration","bounce"],WC=["stiffness","damping","mass"];function KC(e,t){return t.some((t=>void 0!==e[t]))}function YC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UC.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UC.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:UC.velocity,stiffness:UC.stiffness,damping:UC.damping,mass:UC.mass,isResolvedFromDuration:!1,...e};if(!KC(e,WC)&&KC(e,qC))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,o=2*rE(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:UC.mass,stiffness:i,damping:o}}else{const n=zC(e);t={...t,...n,mass:UC.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-dS(n.velocity||0)}),p=h||0,m=c/(2*Math.sqrt(l*u)),g=s-o,y=dS(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?UC.restSpeed.granular:UC.restSpeed.default),i||(i=v?UC.restDelta.granular:UC.restDelta.default),m<1){const e=HC(y,m);b=t=>{const n=Math.exp(-m*y*t);return s-n*((p+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>s-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return s-n*((p+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const x={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)a.done=e>=d;else{let n=0;m<1&&(n=0===e?uS(p):BC(b,e,t));const o=Math.abs(n)<=r,l=Math.abs(s-t)<=i;a.done=o&&l}return a.value=a.done?s:t,a},toString:()=>{const e=Math.min(B_(x),F_),t=K_((t=>x.next(e*t).value),e,30);return e+"ms "+t}};return x}function GC(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,y=void 0===a?g:a(g);y!==g&&(m=y-h);const v=e=>-m*Math.exp(-e/i),b=e=>y+v(e),x=e=>{const t=v(e),n=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let w,_;const S=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(w=e,_=YC({keyframes:[f.value,p(f.value)],velocity:BC(b,e,f.value),damping:o,stiffness:s,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return _||void 0!==w||(t=!0,x(e),S(e)),void 0!==w&&e>=w?_.next(e-w):(!t&&x(e),f)}}}const XC=qS(.42,0,1,1),QC=qS(0,0,.58,1),ZC=qS(.42,0,.58,1),JC={linear:hS,easeIn:XC,easeInOut:ZC,easeOut:QC,circIn:ZS,circInOut:eE,circOut:JS,backIn:GS,backInOut:XS,backOut:YS,anticipate:QS},eT=e=>{if(z_(e)){iC(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return qS(t,n,r,i)}return"string"===typeof e?(iC(void 0!==JC[e],`Invalid easing type '${e}'`),JC[e]):e};function tT(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(iC(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const r=[],i=n||FC,o=e.length-1;for(let s=0;s<o;s++){let n=i(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||hS:t;n=IC(e,n)}r.push(n)}return r}(t,r,i),l=a.length,c=n=>{if(s&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=W_(e[r],e[r+1],n);return a[r](i)};return n?t=>c(rE(e[0],e[o-1],t)):c}function nT(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=W_(0,t,r);e.push(SC(n,1,i))}}(t,e.length-1),t}function rT(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const o=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(eT):eT(i),s={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:nT(n),t),l=tT(a,n,{ease:Array.isArray(o)?o:(c=n,u=o,c.map((()=>u||ZC)).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}const iT=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>SS.update(t,!0),stop:()=>ES(t),now:()=>CS.isProcessing?CS.timestamp:NS.now()}},oT={decay:GC,inertia:GC,tween:rT,keyframes:rT,spring:YC},sT=e=>e/100;class aT extends wC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:r,keyframes:i}=this.options,o=(null===r||void 0===r?void 0:r.KeyframeResolver)||nC;this.resolver=new o(i,((e,t)=>this.onKeyframesResolved(e,t)),t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=this.options,s=U_(t)?t:oT[t]||rT;let a,l;s!==rT&&"number"!==typeof e[0]&&(a=IC(sT,FC(e[0],e[1])),e=[0,100]);const c=s({...this.options,keyframes:e});"mirror"===i&&(l=s({...this.options,keyframes:[...e].reverse(),velocity:-o})),null===c.calculatedDuration&&(c.calculatedDuration=B_(c));const{calculatedDuration:u}=c,d=u+r;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(n+1)-r}}onPostResolved(){const{autoplay:e=!0}=this.options;_C.mainThread++,this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:o,mapPercentToKeyframes:s,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return i.next(0);const{delay:d,repeat:h,repeatType:f,repeatDelay:p,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let v=this.currentTime,b=i;if(h){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===f?(n=1-n,p&&(n-=p/u)):"mirror"===f&&(b=o)),v=rE(0,1,n)*u}const x=y?{done:!1,value:a[0]}:b.next(v);s&&(x.value=s(x.value));let{done:w}=x;y||null===l||(w=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return _&&void 0!==r&&(x.value=xC(a,this.options,r)),m&&m(x.value),_&&this.finish(),x}get duration(){const{resolved:e}=this;return e?dS(e.calculatedDuration):0}get time(){return dS(this.currentTime)}set time(e){e=uS(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=dS(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=iT,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!==n&&void 0!==n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel(),_C.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const lT=new Set(["opacity","clipPath","filter","transform"]);const cT=O_((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const uT={anticipate:QS,backInOut:XS,circInOut:eE};class dT extends wC{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new gC(i,((e,t)=>this.onKeyframesResolved(e,t)),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:i,type:o,motionValue:s,name:a,startTime:l}=this.options;if(!s.owner||!s.owner.current)return!1;var c;if("string"===typeof i&&q_()&&i in uT&&(i=uT[i]),U_((c=this.options).type)||"spring"===c.type||!Y_(c.ease)){const{onComplete:t,onUpdate:s,motionValue:a,element:l,...c}=this.options,u=function(e,t){const n=new aT({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let o=0;for(;!r.done&&o<2e4;)r=n.sample(o),i.push(r.value),o+=10;return{times:void 0,keyframes:i,duration:o-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),n=u.duration,r=u.times,i=u.ease,o="keyframes"}const u=function(e,t,n){let{delay:r=0,duration:i=300,repeat:o=0,repeatType:s="loop",ease:a="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=Q_(a,i);Array.isArray(u)&&(c.easing=u),wS.value&&_C.waapi++;const d=e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:"reverse"===s?"alternate":"normal"});return wS.value&&d.finished.finally((()=>{_C.waapi--})),d}(s.owner.current,a,e,{...this.options,duration:n,times:r,ease:i});return u.startTime=null!==l&&void 0!==l?l:this.calcStartTime(),this.pendingTimeline?(V_(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;s.set(xC(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:r,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return dS(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return dS(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=uS(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return hS;const{animation:n}=t;V_(n,e)}else this.pendingTimeline=e;return hS}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:i,ease:o,times:s}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:a,element:l,...c}=this.options,u=new aT({...c,keyframes:n,duration:r,type:i,ease:o,times:s,isGenerator:!0}),d=uS(this.time);e.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:o,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=t.owner.getProps();return cT()&&n&&lT.has(n)&&!a&&!l&&!r&&"mirror"!==i&&0!==o&&"inertia"!==s}}const hT={type:"spring",stiffness:500,damping:25,restSpeed:10},fT={type:"keyframes",duration:.8},pT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mT=(e,t)=>{let{keyframes:n}=t;return n.length>2?fT:pS.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:hT:pT};const gT=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return s=>{const a=L_(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c-=uS(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:o?void 0:i};(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length})(a)||(u={...u,...mT(e,u)}),u.duration&&(u.duration=uS(u.duration)),u.repeatDelay&&(u.repeatDelay=uS(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),($S||vS)&&(d=!0,u.duration=0,u.delay=0),d&&!o&&void 0!==t.get()){const e=xC(u.keyframes,a);if(void 0!==e)return SS.update((()=>{u.onUpdate(e),u.onComplete()})),new D_([])}return!o&&dT.supports(u)?new dT(u):new aT(u)}};function yT(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function vT(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o;let{transition:s=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(s=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const t=e.getValue(d,null!==(o=e.latestValues[d])&&void 0!==o?o:null),r=l[d];if(void 0===r||u&&yT(u,d))continue;const i={delay:n,...L_(s||{},d)};let a=!1;if(window.MotionHandoffAnimation){const t=zS(e);if(t){const e=window.MotionHandoffAnimation(t,d,SS);null!==e&&(i.startTime=e,a=!0)}}BS(e,d),t.start(gT(d,t,r,e.shouldReduceMotion&&mS.has(d)?{type:!1}:i,e,a));const h=t.animation;h&&c.push(h)}return a&&Promise.all(c).then((()=>{SS.update((()=>{a&&function(e,t){const n=P_(e,t);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const s in o)LS(e,s,yS(o[s]))}(e,a)}))})),c}function bT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const i=P_(e,t,"exit"===n.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const s=i?()=>Promise.all(vT(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:s,staggerDirection:a}=o;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const s=[],a=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(xT).forEach(((e,r)=>{e.notify("AnimationStart",t),s.push(bT(e,t,{...o,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(s)}(e,t,i+r,s,a,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[e,t]="beforeChildren"===l?[s,a]:[a,s];return e().then((()=>t()))}return Promise.all([s(),a(n.delay)])}function xT(e,t){return e.sortNodePosition(t)}function wT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function _T(e){return"string"===typeof e||Array.isArray(e)}const ST=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ET=["initial",...ST],CT=ET.length;function TT(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&TT(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<CT;n++){const r=ET[n],i=e.props[r];(_T(i)||!1===i)&&(t[r]=i)}return t}const jT=[...ST].reverse(),kT=ST.length;function NT(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>bT(e,t,r)));n=Promise.all(i)}else if("string"===typeof t)n=bT(e,t,r);else{const i="function"===typeof t?P_(e,t,r.custom):t;n=Promise.all(vT(e,i,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,r)})))}function AT(e){let t=NT(e),n=OT(),r=!0;const i=t=>(n,r)=>{var i;const o=P_(e,r,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(o){const{transition:e,transitionEnd:t,...r}=o;n={...n,...r,...t}}return n};function o(o){const{props:s}=e,a=TT(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<kT;t++){const h=jT[t],f=n[h],p=void 0!==s[h]?s[h]:a[h],m=_T(p),g=h===o?f.isActive:null;!1===g&&(d=t);let y=p===a[h]&&p!==s[h]&&m;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!p&&!f.prevProp||N_(p)||"boolean"===typeof p)continue;const v=IT(f.prevProp,p);let b=v||h===o&&f.isActive&&!y&&m||t>d&&m,x=!1;const w=Array.isArray(p)?p:[p];let _=w.reduce(i(h),{});!1===g&&(_={});const{prevResolvedValues:S={}}=f,E={...S,..._},C=t=>{b=!0,c.has(t)&&(x=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in E){const t=_[e],n=S[e];if(u.hasOwnProperty(e))continue;let r=!1;r=gS(t)&&gS(n)?!wT(t,n):t!==n,r?void 0!==t&&null!==t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=_,f.isActive&&(u={...u,..._}),r&&e.blockInitialAnimation&&(b=!1);b&&(!(y&&v)||x)&&l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};if("boolean"!==typeof s.initial){const n=P_(e,Array.isArray(s.initial)?s.initial[0]:s.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach((n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null})),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const s=o(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=OT(),r=!0}}}function IT(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!wT(t,e)}function PT(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OT(){return{animate:PT(!0),whileInView:PT(),whileHover:PT(),whileTap:PT(),whileDrag:PT(),whileFocus:PT(),exit:PT()}}class MT{constructor(e){this.isMounted=!1,this.node=e}update(){}}let RT=0;const DT={animation:{Feature:class extends MT{constructor(e){super(e),e.animationState||(e.animationState=AT(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();N_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends MT{constructor(){super(...arguments),this.id=RT++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function LT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function FT(e){return{point:{x:e.pageX,y:e.pageY}}}function BT(e,t,n,r){return LT(e,t,(e=>t=>rS(t)&&e(t,FT(t)))(n),r)}function UT(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function VT(e){return e.max-e.min}function zT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=SC(t.min,t.max,e.origin),e.scale=VT(n)/VT(t),e.translate=SC(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function $T(e,t,n,r){zT(e.x,t.x,n.x,r?r.originX:void 0),zT(e.y,t.y,n.y,r?r.originY:void 0)}function HT(e,t,n){e.min=n.min+t.min,e.max=e.min+VT(t)}function qT(e,t,n){e.min=t.min-n.min,e.max=e.min+VT(t)}function WT(e,t,n){qT(e.x,t.x,n.x),qT(e.y,t.y,n.y)}const KT=()=>({x:{min:0,max:0},y:{min:0,max:0}});function YT(e){return[e("x"),e("y")]}function GT(e){return void 0===e||1===e}function XT(e){let{scale:t,scaleX:n,scaleY:r}=e;return!GT(t)||!GT(n)||!GT(r)}function QT(e){return XT(e)||ZT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ZT(e){return JT(e.x)||JT(e.y)}function JT(e){return e&&"0%"!==e}function ej(e,t,n){return n+t*(e-n)}function tj(e,t,n,r,i){return void 0!==i&&(e=ej(e,i,r)),ej(e,n,r)+t}function nj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=tj(e.min,t,n,r,i),e.max=tj(e.max,t,n,r,i)}function rj(e,t){let{x:n,y:r}=t;nj(e.x,n.translate,n.scale,n.originPoint),nj(e.y,r.translate,r.scale,r.originPoint)}const ij=.999999999999,oj=1.0000000000001;function sj(e,t){e.min=e.min+t,e.max=e.max+t}function aj(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;nj(e,t,n,SC(e.min,e.max,i),r)}function lj(e,t){aj(e.x,t.x,t.scaleX,t.scale,t.originX),aj(e.y,t.y,t.scaleY,t.scale,t.originY)}function cj(e,t){return UT(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}function uj(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const dj=(e,t)=>Math.abs(e-t);class hj{constructor(e,t){let{transformPagePoint:n,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=mj(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=dj(e.x,t.x),r=dj(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=CS;this.history.push({...r,timestamp:i});const{onStart:o,onMove:s}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{if(e.currentTarget instanceof Element&&e.currentTarget.hasPointerCapture&&void 0!==e.pointerId)try{if(!e.currentTarget.hasPointerCapture(e.pointerId))return}catch(zH){}this.lastMoveEvent=e,this.lastMoveEventInfo=fj(t,this.transformPagePoint),SS.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{bj(e,"release"),this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=mj("pointercancel"===e.type||"lostpointercapture"===e.type?this.lastMoveEventInfo:fj(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),r&&r(e,o)},!rS(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n;const i=fj(FT(e),this.transformPagePoint),{point:o}=i,{timestamp:s}=CS;this.history=[{...o,timestamp:s}];const{onSessionStart:a}=t;a&&a(e,mj(i,this.history)),bj(e,"set"),this.removeListeners=IC(BT(e.currentTarget,"pointermove",this.handlePointerMove),BT(e.currentTarget,"pointerup",this.handlePointerUp),BT(e.currentTarget,"pointercancel",this.handlePointerUp),BT(e.currentTarget,"lostpointercapture",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ES(this.updatePoint)}}function fj(e,t){return t?{point:t(e.point)}:e}function pj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mj(e,t){let{point:n}=e;return{point:n,delta:pj(n,yj(t)),offset:pj(n,gj(t)),velocity:vj(t,.1)}}function gj(e){return e[0]}function yj(e){return e[e.length-1]}function vj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=yj(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>uS(t)));)n--;if(!r)return{x:0,y:0};const o=dS(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function bj(e,t){const n=`${t}PointerCapture`;if(e.currentTarget instanceof Element&&n in e.currentTarget&&void 0!==e.pointerId)try{e.currentTarget[n](e.pointerId)}catch(zH){}}function xj(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function wj(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const _j=.35;function Sj(e,t,n){return{min:Ej(e,t),max:Ej(e,n)}}function Ej(e,t){return"number"===typeof e?e:e[t]||0}const Cj=new WeakMap;class Tj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new hj(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(FT(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?Z_[o]?null:(Z_[o]=!0,()=>{Z_[o]=!1}):Z_.x||Z_.y?null:(Z_.x=Z_.y=!0,()=>{Z_.x=Z_.y=!1}),!this.openDragLock))return;var o;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),YT((e=>{let t=this.getAxisMotionValue(e).get()||0;if(yE.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=VT(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&SS.postRender((()=>i(e,t))),BS(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>YT((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&SS.postRender((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!jj(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?SC(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?SC(i,e,n.max):Math.min(e,i)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&uj(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:o}=t;return{x:xj(e.x,r,o),y:xj(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_j;return!1===e?e=0:!0===e&&(e=_j),{x:Sj(e,"left","right"),y:Sj(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&YT((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!uj(e))return!1;const n=e.current;iC(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=cj(e,n),{scroll:i}=t;return i&&(sj(r.x,i.offset.x),sj(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:wj(e.x,t.x),y:wj(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=UT(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},l=YT((s=>{if(!jj(s,t,this.currentDirection))return;let l=a&&a[s]||{};o&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(s,d)}));return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return BS(this.visualElement,e),n.start(gT(e,n,0,t,this.visualElement,!1))}stopAnimation(){YT((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){YT((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){YT((t=>{const{drag:n}=this.getProps();if(!jj(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[t];i.set(e[t]-SC(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!uj(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};YT((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=VT(e),i=VT(t);return i>r?n=W_(t.min,t.max-r,e.min):r>i&&(n=W_(e.min,e.max-i,t.min)),rE(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),YT((t=>{if(!jj(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:o}=this.constraints[t];n.set(SC(i,o,r[t]))}))}addListeners(){if(!this.visualElement.current)return;Cj.set(this.visualElement,this);const e=BT(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();uj(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),SS.read(t);const i=LT(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(YT((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{i(),e(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=_j,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:s}}}function jj(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const kj=e=>(t,n)=>{e&&SS.postRender((()=>e(t,n)))};const Nj=(0,r.createContext)(null);function Aj(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,r.useContext)(Nj);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=t,s=(0,r.useId)();(0,r.useEffect)((()=>{e&&o(s)}),[e]);const a=(0,r.useCallback)((()=>e&&i&&i(s)),[s,i,e]);return!n&&i?[!1,a]:[!0]}const Ij=(0,r.createContext)({}),Pj=(0,r.createContext)({}),Oj={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Mj(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Rj={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!vE.test(e))return e;e=parseFloat(e)}return`${Mj(e,t.target.x)}% ${Mj(e,t.target.y)}%`}},Dj={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,o=PE.parse(e);if(o.length>5)return i;const s=PE.createTransformer(e),a="number"!==typeof o[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;o[0+a]/=l,o[1+a]/=c;const u=SC(l,c,.5);return"number"===typeof o[2+a]&&(o[2+a]/=u),"number"===typeof o[3+a]&&(o[3+a]/=u),s(o)}},Lj={};const{schedule:Fj,cancel:Bj}=_S(queueMicrotask,!1);class Uj extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)Lj[t]=e[t],aC(t)&&(Lj[t].isCSSVariable=!0)}(zj),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Oj.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o?(o.isPresent=i,r||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||SS.postRender((()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fj.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Vj(e){const[t,n]=Aj(),i=(0,r.useContext)(Ij);return(0,E_.jsx)(Uj,{...e,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(Pj),isPresent:t,safeToRemove:n})}const zj={borderRadius:{...Rj,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rj,borderTopRightRadius:Rj,borderBottomLeftRadius:Rj,borderBottomRightRadius:Rj,boxShadow:Dj};const $j=(e,t)=>e.depth-t.depth;class Hj{constructor(){this.children=[],this.isDirty=!1}add(e){AS(this.children,e),this.isDirty=!0}remove(e){IS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($j),this.isDirty=!1,this.children.forEach(e)}}function qj(e,t){const n=NS.now(),r=i=>{let{timestamp:o}=i;const s=o-n;s>=t&&(ES(r),e(s-t))};return SS.read(r,!0),()=>ES(r)}function Wj(e){const t=FS(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const Kj=["TopLeft","TopRight","BottomLeft","BottomRight"],Yj=Kj.length,Gj=e=>"string"===typeof e?parseFloat(e):e,Xj=e=>"number"===typeof e||vE.test(e);function Qj(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Zj=ek(0,.5,JS),Jj=ek(.5,.95,hS);function ek(e,t,n){return r=>r<e?0:r>t?1:n(W_(e,t,r))}function tk(e,t){e.min=t.min,e.max=t.max}function nk(e,t){tk(e.x,t.x),tk(e.y,t.y)}function rk(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ik(e,t,n,r,i){return e=ej(e-=t,1/n,r),void 0!==i&&(e=ej(e,1/i,r)),e}function ok(e,t,n,r,i){let[o,s,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;yE.test(t)&&(t=parseFloat(t),t=SC(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let a=SC(o.min,o.max,r);e===o&&(a-=t),e.min=ik(e.min,t,n,a,i),e.max=ik(e.max,t,n,a,i)}(e,t[o],t[s],t[a],t.scale,r,i)}const sk=["x","scaleX","originX"],ak=["y","scaleY","originY"];function lk(e,t,n,r){ok(e.x,t,sk,n?n.x:void 0,r?r.x:void 0),ok(e.y,t,ak,n?n.y:void 0,r?r.y:void 0)}function ck(e){return 0===e.translate&&1===e.scale}function uk(e){return ck(e.x)&&ck(e.y)}function dk(e,t){return e.min===t.min&&e.max===t.max}function hk(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function fk(e,t){return hk(e.x,t.x)&&hk(e.y,t.y)}function pk(e){return VT(e.x)/VT(e.y)}function mk(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class gk{constructor(){this.members=[]}add(e){AS(this.members,e),e.scheduleRender()}remove(e){if(IS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const yk={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},vk=["","X","Y","Z"],bk={visibility:"hidden"};let xk=0;function wk(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function _k(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=zS(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",SS,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&_k(r)}function Sk(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=xk++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wS.value&&(yk.nodes=yk.calculatedTargetDeltas=yk.calculatedProjections=0),this.nodes.forEach(Tk),this.nodes.forEach(Ok),this.nodes.forEach(Mk),this.nodes.forEach(jk),wS.addProjectionMetrics&&wS.addProjectionMetrics(yk)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Hj)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new PS),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:o,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(o||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=qj(r,250),Oj.hasAnimatedSinceResize&&(Oj.hasAnimatedSinceResize=!1,this.nodes.forEach(Pk))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&s&&(i||o)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||Uk,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!fk(this.targetLayout,i),u=!n&&r;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...L_(o,"layout"),onPlay:a,onComplete:l};(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||Pk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ES(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rk),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_k(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Nk);this.isUpdating||this.nodes.forEach(Ak),this.isUpdating=!1,this.nodes.forEach(Ik),this.nodes.forEach(Ek),this.nodes.forEach(Ck),this.clearAllSnapshots();const e=NS.now();CS.delta=rE(0,1e3/60,e-CS.timestamp),CS.timestamp=e,CS.isProcessing=!0,TS.update.process(CS),TS.preRender.process(CS),TS.render.process(CS),CS.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kk),this.sharedNodes.forEach(Dk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,SS.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){SS.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||VT(this.snapshot.measuredBox.x)||VT(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!uk(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||QT(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),$k((r=n).x),$k(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(qk))){const{scroll:e}=this.root;e&&(sj(n.x,e.offset.x),sj(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(nk(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:o}=t;t!==this.root&&i&&o.layoutScroll&&(i.wasRoot&&nk(n,e),sj(n.x,i.offset.x),sj(n.y,i.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};nk(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&lj(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),QT(e.latestValues)&&lj(n,e.latestValues)}return QT(this.latestValues)&&lj(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};nk(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!QT(e.latestValues))continue;XT(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};nk(r,e.measurePageBox()),lk(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return QT(this.latestValues)&&lk(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==CS.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:o}=this.options;if(this.layout&&(i||o)){if(this.resolvedRelativeTargetAt=CS.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},WT(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),nk(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,l=this.relativeParent.target,HT(s.x,a.x,l.x),HT(s.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):nk(this.target,this.layout.layoutBox),rj(this.target,this.targetDelta)):nk(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},WT(this.relativeTargetOrigin,this.target,e.target),nk(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wS.value&&yk.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!XT(this.parent.latestValues)&&!ZT(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===CS.timestamp&&(r=!1),r)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;nk(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let o,s;t.x=t.y=1;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const{visualElement:i}=o.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&lj(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,rj(e,s)),r&&QT(o.latestValues)&&lj(e,o.latestValues))}t.x<oj&&t.x>ij&&(t.x=1),t.y<oj&&t.y>ij&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(rk(this.prevProjectionDelta.x,this.projectionDelta.x),rk(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),$T(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&mk(this.projectionDelta.x,this.prevProjectionDelta.x)&&mk(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),wS.value&&yk.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(Bk));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;Lk(o.x,e.x,n),Lk(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(WT(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){Fk(e.x,t.x,n.x,r),Fk(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,s,n),d&&function(e,t){return dk(e.x,t.x)&&dk(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),nk(d,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,o){i?(e.opacity=SC(0,void 0!==n.opacity?n.opacity:1,Zj(r)),e.opacityExit=SC(void 0!==t.opacity?t.opacity:1,0,Jj(r))):o&&(e.opacity=SC(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let s=0;s<Yj;s++){const i=`border${Kj[s]}Radius`;let o=Qj(t,i),a=Qj(n,i);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||Xj(o)===Xj(a)?(e[i]=Math.max(SC(Gj(o),Gj(a),r),0),(yE.test(a)||yE.test(o))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=SC(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ES(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=SS.update((()=>{Oj.hasAnimatedSinceResize=!0,_C.layout++,this.currentAnimation=function(e,t,n){const r=FS(e)?e:DS(e);return r.start(gT("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{_C.layout--},onComplete:()=>{_C.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Hk(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=VT(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=VT(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}nk(t,n),lj(t,i),$T(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new gk);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&wk("z",e,r,this.animationValues);for(let i=0;i<vk.length;i++)wk(`rotate${vk[i]}`,e,r,this.animationValues),wk(`skew${vk[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bk;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Wj(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Wj(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!QT(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const s=o.animationValues||o.latestValues;this.applyTransformsToTarget(),r.transform=function(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y,s=(null===n||void 0===n?void 0:n.z)||0;if((i||o||s)&&(r=`translate3d(${i}px, ${o}px, ${s}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:o,skewX:s,skewY:a}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),o&&(r+=`rotateY(${o}deg) `),s&&(r+=`skewX(${s}deg) `),a&&(r+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(r+=`scale(${a}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),i&&(r.transform=i(s,r.transform));const{x:a,y:l}=this.projectionDelta;r.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,o.animationValues?r.opacity=o===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=o===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in Lj){if(void 0===s[c])continue;const{correct:e,applyTo:t,isCSSVariable:n}=Lj[c],i="none"===r.transform?s[c]:e(s[c],o);if(t){const e=t.length;for(let n=0;n<e;n++)r[t[n]]=i}else n?this.options.visualElement.renderState.vars[c]=i:r[c]=i}return this.options.layoutId&&(r.pointerEvents=o===this?Wj(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Nk),this.root.sharedNodes.clear()}}}function Ek(e){e.updateLayout()}function Ck(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;"size"===i?YT((e=>{const r=o?n.measuredBox[e]:n.layoutBox[e],i=VT(r);r.min=t[e].min,r.max=r.min+i})):Hk(i,n.layoutBox,t)&&YT((r=>{const i=o?n.measuredBox[r]:n.layoutBox[r],s=VT(t[r]);i.max=i.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)}));const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};$T(s,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o?$T(a,e.applyTransform(r,!0),n.measuredBox):$T(a,t,n.layoutBox);const l=!uk(s);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const s={x:{min:0,max:0},y:{min:0,max:0}};WT(s,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};WT(a,t,o.layoutBox),fk(s,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Tk(e){wS.value&&yk.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function jk(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function kk(e){e.clearSnapshot()}function Nk(e){e.clearMeasurements()}function Ak(e){e.isLayoutDirty=!1}function Ik(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Pk(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Ok(e){e.resolveTargetDelta()}function Mk(e){e.calcProjection()}function Rk(e){e.resetSkewAndRotation()}function Dk(e){e.removeLeadSnapshot()}function Lk(e,t,n){e.translate=SC(t.translate,0,n),e.scale=SC(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Fk(e,t,n,r){e.min=SC(t.min,n.min,r),e.max=SC(t.max,n.max,r)}function Bk(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Uk={duration:.45,ease:[.4,0,.1,1]},Vk=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),zk=Vk("applewebkit/")&&!Vk("chrome/")?Math.round:hS;function $k(e){e.min=zk(e.min),e.max=zk(e.max)}function Hk(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}(pk(t),pk(n),.2)}function qk(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Wk=Sk({attachResizeListener:(e,t)=>LT(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kk={current:void 0},Yk=Sk({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Kk.current){const e=new Wk({});e.mount(window),e.setOptions({layoutScroll:!0}),Kk.current=e}return Kk.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Gk={pan:{Feature:class extends MT{constructor(){super(...arguments),this.removePointerDownListener=hS}onPointerDown(e){this.session=new hj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:kj(e),onStart:kj(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&SS.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=BT(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends MT{constructor(e){super(e),this.removeGroupControls=hS,this.removeListeners=hS,this.controls=new Tj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hS}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Yk,MeasureLayout:Vj}};function Xk(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&SS.postRender((()=>i(t,FT(t))))}function Qk(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&SS.postRender((()=>i(t,FT(t))))}const Zk=new WeakMap,Jk=new WeakMap,eN=e=>{const t=Zk.get(e.target);t&&t(e)},tN=e=>{e.forEach(eN)};function nN(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;Jk.has(r)||Jk.set(r,{});const i=Jk.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(tN,{root:t,...n})),i[o]}(t);return Zk.set(e,n),r.observe(e),()=>{Zk.delete(e),r.unobserve(e)}}const rN={some:0,all:1};const iN={inView:{Feature:class extends MT{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:rN[r]};return nN(this.node.current,o,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=t?n:r;o&&o(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends MT{mount(){const{current:e}=this.node;e&&(this.unmount=cS(e,((e,t)=>(Qk(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return Qk(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends MT{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(zH){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=IC(LT(this.node.current,"focus",(()=>this.onFocus())),LT(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends MT{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,o]=eS(e,n),s=e=>{if(!tS(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const o=e=>{tS(e)&&(r(e),n.removeEventListener("pointerleave",o))};n.addEventListener("pointerleave",o,i)};return r.forEach((e=>{e.addEventListener("pointerenter",s,i)})),o}(e,((e,t)=>(Xk(this.node,t,"Start"),e=>Xk(this.node,e,"End")))))}unmount(){}}}},oN={layout:{ProjectionNode:Yk,MeasureLayout:Vj}},sN=(0,r.createContext)({strict:!1}),aN=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),lN=(0,r.createContext)({});function cN(e){return N_(e.animate)||ET.some((t=>_T(e[t])))}function uN(e){return Boolean(cN(e)||e.variants)}function dN(e){const{initial:t,animate:n}=function(e,t){if(cN(e)){const{initial:t,animate:n}=e;return{initial:!1===t||_T(t)?t:void 0,animate:_T(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(lN));return(0,r.useMemo)((()=>({initial:t,animate:n})),[hN(t),hN(n)])}function hN(e){return Array.isArray(e)?e.join(" "):e}const fN="undefined"!==typeof window,pN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mN={};for(const n in pN)mN[n]={isEnabled:e=>pN[n].some((t=>!!e[t]))};const gN=Symbol.for("motionComponentSymbol");function yN(e,t,n){return(0,r.useCallback)((r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):uj(n)&&(n.current=r))}),[t])}const vN=fN?r.useLayoutEffect:r.useEffect;function bN(e,t,n,i,o){var s,a;const{visualElement:l}=(0,r.useContext)(lN),c=(0,r.useContext)(sN),u=(0,r.useContext)(Nj),d=(0,r.useContext)(aN).reducedMotion,h=(0,r.useRef)(null);i=i||c.renderer,!h.current&&i&&(h.current=i(e,{visualState:t,parent:l,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:d}));const f=h.current,p=(0,r.useContext)(Pj);!f||f.projection||!o||"html"!==f.type&&"svg"!==f.type||function(e,t,n,r){const{layoutId:i,layout:o,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:xN(e.parent)),e.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:Boolean(s)||a&&uj(a),visualElement:e,animationType:"string"===typeof o?o:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}(h.current,n,o,p);const m=(0,r.useRef)(!1);(0,r.useInsertionEffect)((()=>{f&&m.current&&f.update(n,u)}));const g=n[VS],y=(0,r.useRef)(Boolean(g)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return vN((()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Fj.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())})),(0,r.useEffect)((()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)})),y.current=!1))})),f}function xN(e){if(e)return!1!==e.options.allowProjection?e.projection:xN(e.parent)}function wN(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:o,Component:s}=e;var a,l;function c(e,t){let a;const l={...(0,r.useContext)(aN),...e,layoutId:_N(e)},{isStatic:c}=l,u=dN(e),d=o(e,c);if(!c&&fN){!function(){(0,r.useContext)(sN).strict;0}();const e=function(e){const{drag:t,layout:n}=mN;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===n||void 0===n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);a=e.MeasureLayout,u.visualElement=bN(s,d,l,n,e.ProjectionNode)}return(0,E_.jsxs)(lN.Provider,{value:u,children:[a&&u.visualElement?(0,E_.jsx)(a,{visualElement:u.visualElement,...l}):null,i(s,e,yN(d,u.visualElement,t),d,c,u.visualElement)]})}t&&function(e){for(const t in e)mN[t]={...mN[t],...e[t]}}(t),c.displayName=`motion.${"string"===typeof s?s:`create(${null!==(l=null!==(a=s.displayName)&&void 0!==a?a:s.name)&&void 0!==l?l:""})`}`;const u=(0,r.forwardRef)(c);return u[gN]=s,u}function _N(e){let{layoutId:t}=e;const n=(0,r.useContext)(Ij).id;return n&&void 0!==t?n+"-"+t:t}function SN(e,t){let{layout:n,layoutId:r}=t;return pS.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Lj[e]||"opacity"===e)}const EN=(e,t)=>t&&"number"===typeof e?t.transform(e):e,CN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TN=fS.length;function jN(e,t,n){const{style:r,vars:i,transformOrigin:o}=e;let s=!1,a=!1;for(const l in t){const e=t[l];if(pS.has(l))s=!0;else if(aC(l))i[l]=e;else{const t=EN(e,UE[l]);l.startsWith("origin")?(a=!0,o[l]=t):r[l]=t}}if(t.transform||(s||n?r.transform=function(e,t,n){let r="",i=!0;for(let o=0;o<TN;o++){const s=fS[o],a=e[s];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(s.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=EN(a,UE[s]);l||(i=!1,r+=`${CN[s]||s}(${e}) `),n&&(t[s]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin=`${e} ${t} ${n}`}}const kN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function NN(e,t,n){for(const r in t)FS(t[r])||SN(r,n)||(e[r]=t[r])}function AN(e,t){const n={};return NN(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,r.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return jN(e,t,n),Object.assign({},e.vars,e.style)}),[t])}(e,t)),n}function IN(e,t){const n={},r=AN(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const PN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ON(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||PN.has(e)}let MN=e=>!ON(e);try{(RN=require("@emotion/is-prop-valid").default)&&(MN=e=>e.startsWith("on")?!ON(e):RN(e))}catch(lre){}var RN;const DN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function LN(e){return"string"===typeof e&&!e.includes("-")&&!!(DN.indexOf(e)>-1||/[A-Z]/u.test(e))}const FN={offset:"stroke-dashoffset",array:"stroke-dasharray"},BN={offset:"strokeDashoffset",array:"strokeDasharray"};function UN(e,t,n){return"string"===typeof e?e:vE.transform(t+n*e)}function VN(e,t,n,r){let{attrX:i,attrY:o,attrScale:s,originX:a,originY:l,pathLength:c,pathSpacing:u=1,pathOffset:d=0,...h}=t;if(jN(e,h,r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:m}=e;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(void 0!==a||void 0!==l||p.transform)&&(p.transformOrigin=function(e,t,n){return`${UN(t,e.x,e.width)} ${UN(n,e.y,e.height)}`}(m,void 0!==a?a:.5,void 0!==l?l:.5)),void 0!==i&&(f.x=i),void 0!==o&&(f.y=o),void 0!==s&&(f.scale=s),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=i?FN:BN;e[o.offset]=vE.transform(-r);const s=vE.transform(t),a=vE.transform(n);e[o.array]=`${s} ${a}`}(f,c,u,d,!1)}const zN=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),$N=e=>"string"===typeof e&&"svg"===e.toLowerCase();function HN(e,t,n,i){const o=(0,r.useMemo)((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return VN(n,t,$N(i),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};NN(t,e.style,e),o.style={...t,...o.style}}return o}function qN(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,o,s)=>{let{latestValues:a}=o;const l=(LN(t)?HN:IN)(n,a,s,t),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(MN(i)||!0===n&&ON(i)||!t&&!ON(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),u=t!==r.Fragment?{...c,...l,ref:i}:{},{children:d}=n,h=(0,r.useMemo)((()=>FS(d)?d.get():d),[d]);return(0,r.createElement)(t,{...u,children:h})}}function WN(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const KN=e=>(t,n)=>{const i=(0,r.useContext)(lN),o=(0,r.useContext)(Nj),s=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o,onUpdate:s}=e;const a={latestValues:YN(t,n,r,i),renderState:o()};return s&&(a.onMount=e=>s({props:t,current:e,...a}),a.onUpdate=e=>s(e)),a}(e,t,i,o);return n?s():WN(s)};function YN(e,t,n,r){const i={},o=r(e,{});for(const h in o)i[h]=Wj(o[h]);let{initial:s,animate:a}=e;const l=cN(e),c=uN(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const d=u?a:s;if(d&&"boolean"!==typeof d&&!N_(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=I_(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}function GN(e,t,n){var r;const{style:i}=e,o={};for(const s in i)(FS(i[s])||t.style&&FS(t.style[s])||SN(s,e)||void 0!==(null===(r=null===n||void 0===n?void 0:n.getValue(s))||void 0===r?void 0:r.liveStyle))&&(o[s]=i[s]);return o}const XN={useVisualState:KN({scrapeMotionValuesFromProps:GN,createRenderState:kN})};function QN(e,t){try{t.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(zH){t.dimensions={x:0,y:0,width:0,height:0}}}function ZN(e,t,n,r){let{style:i,vars:o}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const s in o)e.style.setProperty(s,o[s])}const JN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eA(e,t,n,r){ZN(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(JN.has(i)?i:US(i),t.attrs[i])}function tA(e,t,n){const r=GN(e,t,n);for(const i in e)if(FS(e[i])||FS(t[i])){r[-1!==fS.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}const nA=["x","y","width","height","cx","cy","r"],rA={useVisualState:KN({scrapeMotionValuesFromProps:tA,createRenderState:zN,onUpdate:e=>{let{props:t,prevProps:n,current:r,renderState:i,latestValues:o}=e;if(!r)return;let s=!!t.drag;if(!s)for(const l in o)if(pS.has(l)){s=!0;break}if(!s)return;let a=!n;if(n)for(let l=0;l<nA.length;l++){const e=nA[l];t[e]!==n[e]&&(a=!0)}a&&SS.read((()=>{QN(r,i),SS.render((()=>{VN(i,o,$N(r.tagName),t.transformTemplate),eA(r,i)}))}))}})};function iA(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return wN({...LN(n)?rA:XN,preloadedFeatures:e,useRender:qN(r),createVisualElement:t,Component:n})}}const oA={current:null},sA={current:!1};const aA=[...pC,SE,PE],lA=new WeakMap;const cA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uA{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=NS.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,SS.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=s;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=cN(n),this.isVariantNode=uN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const e=h[f];void 0!==l[f]&&FS(e)&&e.set(l[f],!1)}}mount(e){this.current=e,lA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),sA.current||function(){if(sA.current=!0,fN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>oA.current=e.matches;e.addListener(t),t()}else oA.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||oA.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ES(this.notifyUpdate),ES(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=pS.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&SS.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),i(),o&&o(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in mN){const t=mN[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<cA.length;n++){const t=cA[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],o=n[r];if(FS(i))e.addValue(r,i);else if(FS(o))e.addValue(r,DS(i,{owner:e}));else if(o!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,DS(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=DS(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(oC(r)||tE(r))?r=parseFloat(r):!(e=>aA.find(fC(e)))(r)&&PE.test(t)&&(r=$E(e,t)),this.setBaseTarget(e,FS(r)?r.get():r)),FS(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"===typeof n||"object"===typeof n){const i=I_(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);i&&(r=i[e])}if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||FS(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new PS),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class dA extends uA{constructor(){super(...arguments),this.KeyframeResolver=gC}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;FS(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class hA extends dA{constructor(){super(...arguments),this.type="html",this.renderInstance=ZN}readValueFromInstance(e,t){if(pS.has(t)){const e=zE(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(aC(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return cj(e,n)}build(e,t,n){jN(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return GN(e,t,n)}}class fA extends dA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=KT,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&QN(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(pS.has(t)){const e=zE(t);return e&&e.default||0}return t=JN.has(t)?t:US(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return tA(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&SS.postRender(this.updateDimensions)}build(e,t,n){VN(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){eA(e,t,0,r)}mount(e){this.isSVGTag=$N(e.tagName),super.mount(e)}}const pA=k_(iA({...DT,...iN,...Gk,...oN},((e,t)=>LN(e)?new fA(t):new hA(t,{allowProjection:e!==r.Fragment}))));function mA(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const gA=r.forwardRef(mA);function yA(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),r.createElement("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),r.createElement("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"}))}const vA=r.forwardRef(yA);function bA(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),r.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const xA=r.forwardRef(bA);function wA(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}const _A=r.forwardRef(wA);function SA(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const EA=r.forwardRef(SA);var CA=n(64),TA=n.n(CA);const jA=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)({id:!1,password:!1}),{login:d}=T_(),h=te();return(0,E_.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600",children:[(0,E_.jsx)("div",{className:"absolute inset-0 bg-pattern opacity-10"}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md px-8 py-10 bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl relative overflow-hidden",children:[(0,E_.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 pointer-events-none"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsxs)("div",{className:"text-center mb-8",children:[(0,E_.jsx)(pA.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"w-16 h-16 bg-white rounded-2xl shadow-lg mx-auto mb-4 flex items-center justify-center",children:(0,E_.jsx)(gA,{className:"w-8 h-8 text-indigo-600"})}),(0,E_.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),(0,E_.jsx)("p",{className:"text-white/80",children:"Sign in to your account"})]}),(0,E_.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(!0);try{const t=[{name:"users",role:"admin"},{name:"teachers",role:"instructor"},{name:"students",role:"student"}];let r=null,i="",o="";for(const n of t){const t=tm(gp(__,n.name),rm("idNumber","==",e)),s=await wm(t);if(!s.empty){const e=s.docs[0];r={id:e.id,...e.data()},i=r.email,o=n.role;break}}if(!r)throw new Error("No user found with this ID number");await d(i,n),localStorage.setItem("userRole",o),localStorage.setItem("userData",JSON.stringify(r)),TA().fire({icon:"success",title:`Welcome, ${r.fullName}!`,text:`Logged in as ${o}`,showConfirmButton:!1,timer:1500,background:"#f8fafc",iconColor:"#3b82f6"}),h("student"===o?"/students/dashboard":"instructor"===o?"/instructor/dashboard":"/admin/dashboard")}catch(py){console.error("Login Error:",py),TA().fire({icon:"error",title:"Login Failed",text:py instanceof Error?py.message:"Invalid credentials",background:"#f8fafc",confirmButtonColor:"#3b82f6"})}finally{s(!1)}},className:"space-y-6",children:[(0,E_.jsx)("div",{className:"mb-8",children:(0,E_.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,E_.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-white",children:"Student"}),(0,E_.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-white",children:"Instructor"}),(0,E_.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-white",children:"Admin"})]})}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"ID Number"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onFocus:()=>u({...c,id:!0}),onBlur:()=>u({...c,id:!1}),className:"\n                    w-full px-4 py-3 rounded-xl\n                    bg-white/10 border border-white/20\n                    text-white placeholder-white/50\n                    focus:outline-none focus:ring-2 focus:ring-white/30\n                    transition-all duration-200\n                  ",placeholder:"Enter your ID number",required:!0}),(0,E_.jsx)("div",{className:"absolute left-3 top-3"})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Password"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:a?"text":"password",value:n,onChange:e=>i(e.target.value),onFocus:()=>u({...c,password:!0}),onBlur:()=>u({...c,password:!1}),className:"\n                    w-full px-4 py-3 rounded-xl\n                    bg-white/10 border border-white/20\n                    text-white placeholder-white/50\n                    focus:outline-none focus:ring-2 focus:ring-white/30\n                    transition-all duration-200\n                  ",placeholder:"Enter your password",required:!0}),(0,E_.jsx)("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-3 text-white/50 hover:text-white/80 transition-colors",children:a?(0,E_.jsx)(vA,{className:"w-6 h-6"}):(0,E_.jsx)(xA,{className:"w-6 h-6"})})]})]}),(0,E_.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,E_.jsxs)("label",{className:"flex items-center text-white/80",children:[(0,E_.jsx)("input",{type:"checkbox",className:"rounded border-white/20 bg-white/10 text-indigo-600 focus:ring-indigo-500"}),(0,E_.jsx)("span",{className:"ml-2",children:"Remember me"})]}),(0,E_.jsx)(je,{to:"/reset-password",className:"text-white/80 hover:text-white transition-colors",children:"Forgot password?"})]}),(0,E_.jsx)("button",{type:"submit",disabled:o,className:`\n                w-full py-3 px-4 rounded-xl\n                bg-white text-indigo-600 font-medium\n                hover:bg-indigo-50 \n                focus:outline-none focus:ring-2 focus:ring-white/50\n                transition-all duration-200\n                flex items-center justify-center\n                ${o?"opacity-80 cursor-not-allowed":""}\n              `,children:o?(0,E_.jsx)(_A,{className:"w-5 h-5 animate-spin"}):(0,E_.jsxs)(E_.Fragment,{children:["Sign In",(0,E_.jsx)(EA,{className:"w-5 h-5 ml-2"})]})}),(0,E_.jsxs)("p",{className:"text-center text-white/80",children:["Don't have an account?"," ",(0,E_.jsx)(je,{to:"/rfid-registration",className:"text-white font-medium hover:underline",children:"Sign up"})]})]})]})]})]})};var kA,NA,AA;!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(kA||(kA={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(NA||(NA={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(AA||(AA={}));const IA=["user","model","function","system"];var PA,OA,MA,RA,DA,LA,FA,BA;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(PA||(PA={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(OA||(OA={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(MA||(MA={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(RA||(RA={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"}(DA||(DA={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(LA||(LA={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(FA||(FA={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(BA||(BA={}));class UA extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class VA extends UA{constructor(e,t){super(e),this.response=t}}class zA extends UA{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class $A extends UA{}var HA;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(HA||(HA={}));class qA{constructor(e,t,n,r,i){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=i}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let r=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function WA(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null===e||void 0===e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.21.0"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(zH){throw new $A(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${zH.message}`)}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new $A(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new $A(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function KA(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const{url:a,fetchOptions:l}=await async function(e,t,n,r,i,o){const s=new qA(e,t,n,r,o);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},YA(o)),{method:"POST",headers:await WA(s),body:i})}}(e,t,n,r,i,o);return async function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await r(e,t)}catch(zH){!function(e,t){let n=e;e instanceof zA||e instanceof $A||(n=new UA(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack);throw n}(zH,e)}n.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(zH){}throw new zA(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}(n,e);return n}(a,l,s)}function YA(e){const t={};if(void 0!==(null===e||void 0===e?void 0:e.signal)||(null===e||void 0===e?void 0:e.timeout)>=0){const n=new AbortController;(null===e||void 0===e?void 0:e.timeout)>=0&&setTimeout((()=>n.abort()),e.timeout),(null===e||void 0===e?void 0:e.signal)&&e.signal.addEventListener("abort",(()=>{n.abort()})),t.signal=n.signal}return t}function GA(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ZA(e.candidates[0]))throw new VA(`${JA(e)}`,e);return function(e){var t,n,r,i;const o=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const s of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)s.text&&o.push(s.text),s.executableCode&&o.push("\n```"+s.executableCode.language+"\n"+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&o.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}(e)}if(e.promptFeedback)throw new VA(`Text not available. ${JA(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ZA(e.candidates[0]))throw new VA(`${JA(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),XA(e)[0]}if(e.promptFeedback)throw new VA(`Function call not available. ${JA(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ZA(e.candidates[0]))throw new VA(`${JA(e)}`,e);return XA(e)}if(e.promptFeedback)throw new VA(`Function call not available. ${JA(e)}`,e)},e}function XA(e){var t,n,r,i;const o=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const s of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)s.functionCall&&o.push(s.functionCall);return o.length>0?o:void 0}const QA=[DA.RECITATION,DA.SAFETY,DA.LANGUAGE];function ZA(e){return!!e.finishReason&&QA.includes(e.finishReason)}function JA(e){var t,n,r;let i="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];ZA(t)&&(i+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(i+=`: ${t.finishMessage}`))}}else i+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(i+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);return i}function eI(e){return this instanceof eI?(this.v=e,this):new eI(e)}function tI(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof eI?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(i[e](t))}catch(zH){u(o[0][3],zH)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const nI=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function rI(e){const t=function(e){const t=e.getReader(),n=new ReadableStream({start(e){let n="";return r();function r(){return t.read().then((t=>{let{value:i,done:o}=t;if(o)return n.trim()?void e.error(new UA("Failed to parse stream")):void e.close();n+=i;let s,a=n.match(nI);for(;a;){try{s=JSON.parse(a[1])}catch(zH){return void e.error(new UA(`Error parsing JSON response: "${a[1]}"`))}e.enqueue(s),n=n.substring(a[0].length),a=n.match(nI)}return r()}))}}});return n}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:oI(n),response:iI(r)}}async function iI(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return GA(sI(t));t.push(r)}}function oI(e){return tI(this,arguments,(function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield eI(t.read());if(n)break;yield yield eI(GA(e))}}))}function sI(e){const t=e[e.length-1],n={promptFeedback:null===t||void 0===t?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const e of r.candidates){const t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});const r={};for(const i of e.content.parts)i.text&&(r.text=i.text),i.functionCall&&(r.functionCall=i.functionCall),i.executableCode&&(r.executableCode=i.executableCode),i.codeExecutionResult&&(r.codeExecutionResult=i.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[t].content.parts.push(r)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function aI(e,t,n,r){return rI(await KA(t,HA.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function lI(e,t,n,r){const i=await KA(t,HA.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:GA(await i.json())}}function cI(e){if(null!=e)return"string"===typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function uI(e){let t=[];if("string"===typeof e)t=[{text:e}];else for(const n of e)"string"===typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const o of e)"functionResponse"in o?(n.parts.push(o),i=!0):(t.parts.push(o),r=!0);if(r&&i)throw new UA("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new UA("No content is provided for sending chat message.");if(r)return t;return n}(t)}function dI(e){let t;if(e.contents)t=e;else{t={contents:[uI(e)]}}return e.systemInstruction&&(t.systemInstruction=cI(e.systemInstruction)),t}const hI=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],fI={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};const pI="SILENT_ERROR";class mI{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null===n||void 0===n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new UA(`First content should be with role 'user', got ${e}`);if(!IA.includes(e))throw new UA(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(IA)}`);if(!Array.isArray(r))throw new UA("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new UA("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of r)for(const e of hI)e in t&&(i[e]+=1);const o=fI[e];for(const t of hI)if(!o.includes(t)&&i[t]>0)throw new UA(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,o,s,a;await this._sendPromise;const l=uI(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(o=this.params)||void 0===o?void 0:o.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t);let d;return this._sendPromise=this._sendPromise.then((()=>lI(this._apiKey,this.model,c,u))).then((e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=JA(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}d=e})),await this._sendPromise,d}async sendMessageStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,o,s,a;await this._sendPromise;const l=uI(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(o=this.params)||void 0===o?void 0:o.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),d=aI(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then((()=>d)).catch((e=>{throw new Error(pI)})).then((e=>e.response)).then((e=>{if(e.candidates&&e.candidates.length>0){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=JA(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}})).catch((e=>{e.message!==pI&&console.error(e)})),d}}class gI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=cI(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=dI(e),i=Object.assign(Object.assign({},this._requestOptions),t);return lI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}async generateContentStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=dI(e),i=Object.assign(Object.assign({},this._requestOptions),t);return aI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}startChat(e){var t;return new mI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e,t){var n;let r={model:null===t||void 0===t?void 0:t.model,generationConfig:null===t||void 0===t?void 0:t.generationConfig,safetySettings:null===t||void 0===t?void 0:t.safetySettings,tools:null===t||void 0===t?void 0:t.tools,toolConfig:null===t||void 0===t?void 0:t.toolConfig,systemInstruction:null===t||void 0===t?void 0:t.systemInstruction,cachedContent:null===(n=null===t||void 0===t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const i=null!=e.generateContentRequest;if(e.contents){if(i)throw new $A("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(i)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=uI(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await KA(t,HA.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async embedContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if("string"===typeof e||Array.isArray(e))return{content:uI(e)};return e}(e),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await KA(t,HA.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const i=n.requests.map((e=>Object.assign(Object.assign({},e),{model:t})));return(await KA(t,HA.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),r)).json()}(this.apiKey,this.model,e,n)}}class yI{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new UA("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new gI(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new $A("Cached content must contain a `name` field.");if(!e.model)throw new $A("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if((null===t||void 0===t?void 0:t[o])&&e[o]&&(null===t||void 0===t?void 0:t[o])!==e[o]){if("model"===o){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new $A(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}const i=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new gI(this.apiKey,i,n)}}function vI(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const bI=r.forwardRef(vI);function xI(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const wI=r.forwardRef(xI);function _I(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const SI=r.forwardRef(_I);function EI(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const CI=r.forwardRef(EI);function TI(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),r.createElement("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),r.createElement("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"}))}const jI=r.forwardRef(TI);function kI(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),r.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const NI=r.forwardRef(kI);!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var AI=e=>"number"==typeof e&&!isNaN(e),II=e=>"string"==typeof e,PI=e=>"function"==typeof e,OI=e=>(0,r.isValidElement)(e)||II(e)||PI(e)||AI(e);function MI(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:o=!0,collapseDuration:s=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=e,p=i?`${t}--${l}`:t,m=i?`${n}--${l}`:n,g=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{let e=d.current,t=p.split(" "),n=r=>{r.target===d.current&&(f(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,u,s):u()};h||(c?t():(g.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))}),[h]),r.createElement(r.Fragment,null,a)}}var RI=1,DI=()=>""+RI++;var LI=new Map,FI=[],BI=new Set,UI=()=>LI.size>0;function VI(e,t){var n;if(t)return!(null==(n=LI.get(t))||!n.isToastActive(e));let r=!1;return LI.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function zI(e){if(UI()){if(null==e||(e=>II(e)||AI(e))(e))LI.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=LI.get(e.containerId);t?t.removeToast(e.id):LI.forEach((t=>{t.removeToast(e.id)}))}}else FI=FI.filter((t=>null!=e&&t.options.toastId!==e))}function $I(e,t){OI(e)&&(UI()||FI.push({content:e,options:t}),LI.forEach((n=>{n.buildToast(e,t)})))}function HI(e,t){LI.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function qI(e){return e&&(II(e.toastId)||AI(e.toastId))?e.toastId:DI()}function WI(e,t){return $I(e,t),t.toastId}function KI(e,t){return{...t,type:t&&t.type||e,toastId:qI(t)}}function YI(e){return(t,n)=>WI(t,KI(e,n))}function GI(e,t){return WI(e,KI("default",t))}GI.loading=(e,t)=>WI(e,KI("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),GI.promise=function(e,t,n){let r,{pending:i,error:o,success:s}=t;i&&(r=II(i)?GI.loading(i,n):GI.loading(i.render,{...n,...i}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void GI.dismiss(r);let o={type:e,...a,...n,data:i},s=II(t)?{render:t}:t;return r?GI.update(r,{...o,...s}):GI(s.render,{...o,...s}),i},c=PI(e)?e():e;return c.then((e=>l("success",s,e))).catch((e=>l("error",o,e))),c},GI.success=YI("success"),GI.info=YI("info"),GI.error=YI("error"),GI.warning=YI("warning"),GI.warn=GI.warning,GI.dark=(e,t)=>WI(e,KI("default",{theme:"dark",...t})),GI.dismiss=function(e){zI(e)},GI.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};LI.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},GI.isActive=VI,GI.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=LI.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:DI()};o.toastId!==e&&(o.staleId=e);let s=o.render||i;delete o.render,WI(s,o)}},GI.done=e=>{GI.update(e,{progress:1})},GI.onChange=function(e){return BI.add(e),()=>{BI.delete(e)}},GI.play=e=>HI(!0,e),GI.pause=e=>HI(!1,e);"undefined"!=typeof window?r.useLayoutEffect:r.useEffect;var XI=function(e){return{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}};MI(XI("bounce",!0)),MI(XI("slide",!0)),MI(XI("zoom")),MI(XI("flip"));function QI(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const ZI=r.forwardRef(QI);function JI(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const eP=r.forwardRef(JI),tP=e=>{let{currentTime:t,instructor:n,classStatus:i}=e;const{currentUser:o}=T_(),s=te(),[a,l]=(0,r.useState)(!1);return(0,E_.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg z-50",children:(0,E_.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,E_.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)("div",{className:"flex-shrink-0",children:(0,E_.jsx)(ZI,{className:"h-8 w-8 text-indigo-300"})}),(0,E_.jsxs)("div",{className:"ml-4",children:[(0,E_.jsx)("h1",{className:"text-xl font-semibold",children:"Smart EcoLock"}),(0,E_.jsx)("p",{className:"text-sm text-indigo-200",children:n.department})]})]}),(0,E_.jsx)("div",{className:"flex-1 flex items-center justify-center px-4",children:(0,E_.jsx)("div",{className:`\n              px-6 py-2 rounded-full \n              ${"Class In Session"===i.status?"bg-green-500/20 border border-green-400/50":"Starting Soon"===i.status?"bg-indigo-500/20 border border-indigo-400/50":"Classes Ended"===i.status?"bg-amber-500/20 border border-amber-400/50":"bg-gray-500/20 border border-gray-400/50"}\n            `,children:(0,E_.jsxs)("div",{className:"flex items-center space-x-3",children:["Class In Session"===i.status?(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-green-400 animate-pulse mr-2"}),(0,E_.jsx)("span",{className:"font-medium text-green-300",children:"Active"})]}):"Starting Soon"===i.status?(0,E_.jsx)(bI,{className:"h-5 w-5 text-indigo-300"}):(0,E_.jsx)(SI,{className:"h-5 w-5 text-amber-300"}),(0,E_.jsxs)("div",{className:"flex flex-col",children:[(0,E_.jsx)("span",{className:"text-sm font-medium",children:i.status}),(0,E_.jsx)("span",{className:"text-xs opacity-75",children:i.details})]})]})})}),(0,E_.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,E_.jsxs)("div",{className:"hidden md:flex flex-col items-end",children:[(0,E_.jsx)("span",{className:"text-sm font-medium",children:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,E_.jsx)("span",{className:"text-xs text-indigo-200",children:"Class Time"})]}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsxs)("button",{onClick:()=>l(!a),className:"flex items-center space-x-3 focus:outline-none hover:opacity-80 transition-opacity",children:[(0,E_.jsxs)("div",{className:"flex flex-col items-end",children:[(0,E_.jsx)("span",{className:"text-sm font-medium",children:n.fullName}),(0,E_.jsx)("span",{className:"text-xs text-indigo-200",children:"Instructor"})]}),(0,E_.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-500/30 flex items-center justify-center",children:(0,E_.jsx)(eP,{className:"h-6 w-6 text-indigo-200"})})]}),a&&(0,E_.jsx)(pA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-48 rounded-xl shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 z-50",children:(0,E_.jsxs)("button",{onClick:async()=>{try{await lo(w_),s("/login"),TA().fire({icon:"success",title:"Logged Out Successfully",text:"You have been logged out of your account.",showConfirmButton:!1,timer:1500,background:"#F9FAFB",customClass:{popup:"rounded-xl border border-indigo-100",title:"text-indigo-900",htmlContainer:"text-indigo-700"}})}catch(py){console.error("Error logging out:",py),TA().fire({icon:"error",title:"Logout Failed",text:"There was an error logging out. Please try again.",confirmButtonColor:"#4F46E5",background:"#F9FAFB",customClass:{popup:"rounded-xl border border-indigo-100",title:"text-indigo-900",htmlContainer:"text-indigo-700",confirmButton:"bg-indigo-600 hover:bg-indigo-700"}})}},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 transition-colors",children:[(0,E_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E_.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})]})]})})})};function nP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const rP=r.forwardRef(nP);function iP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const oP=r.forwardRef(iP);function sP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const aP=r.forwardRef(sP);function lP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),r.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const cP=r.forwardRef(lP);function uP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm5.845 17.03a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72V12a.75.75 0 0 0-1.5 0v4.19l-1.72-1.72a.75.75 0 0 0-1.06 1.06l3 3Z",clipRule:"evenodd"}),r.createElement("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"}))}const dP=r.forwardRef(uP);function hP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"}))}const fP=r.forwardRef(hP);function pP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm5.03 4.72a.75.75 0 0 1 0 1.06l-1.72 1.72h10.94a.75.75 0 0 1 0 1.5H10.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const mP=r.forwardRef(pP);function gP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))}const yP=r.forwardRef(gP);function vP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const bP=r.forwardRef(vP);function xP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),r.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const wP=r.forwardRef(xP),_P="from-teal-50 via-sky-50 to-emerald-50",SP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;const n=new Date,r=new Date(e.getTime()+6e4*t);return n>=e&&n<=r?"ongoing":n<e?"upcoming":"completed"},EP=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=new yI("AIzaSyBYLXhvqwNsxNzMAMcxBlnAulcFOhNQhEk");(0,r.useEffect)((()=>{(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[n]);const d=()=>Math.random().toString(36).substr(2,9),h=async()=>{if(!o.trim())return;const e={id:d(),content:o,sender:"user",timestamp:new Date};i((t=>[...t,e])),s(""),l(!0);try{const e=(await f(o)).split("\n\n"),t=e[0]||"I'm sorry, but I couldn't generate an answer.",n=e[1]||"",r=e[2]||"",s=e[3]||"",a={id:d(),content:`${t}\n\n${n}\n\n${r}\n\n${s}`,sender:"ai",timestamp:new Date};i((e=>[...e,a]))}catch(py){console.error("Gemini API Error:",py);const t={id:d(),content:"\ud83d\udea8 **Error:** I encountered an issue while processing your request. Please check your input or try again later.",sender:"ai",timestamp:new Date};i((e=>[...e,t]))}finally{l(!1)}},f=async e=>{try{const t=u.getGenerativeModel({model:"gemini-pro"});return(await t.generateContent(`You are a helpful AI assistant that can answer any questions accurately, can answer about Mark Lloyd Cuizon, Clarence Emmanuel Jamora and Jean Ricka Rosalita - Creators of Smart EcoLock. \n      They are 4rth year BS Computer Engineering Students   from CIT-U and for Smart EcoLock, addresses energy management, attendance control, and security for CIT-U's rooms and offices. \n        It uses an ESP32 microcontroller for efficient sensor handling and low power consumption. With occupancy recognition, it turns off lights and electronics \n        in unoccupied rooms, reducing energy waste. LDR sensors are used to automatically control lighting based on natural light levels in classrooms, optimizing \n        energy use. Attendance is tracked through access control data, with real-time monitoring in a unified database. Security is enhanced via RFID or biometric \n        access control, ensuring only authorized individuals enter. Weight sensors in chairs add precision to attendance tracking. A React.js website with Firebase \n        backend allows system monitoring and control. This system boosts sustainability, management efficiency, and security at CIT-U. \n        Provide complete answers, ensuring clarity and professionalism. Always include full code implementations when relevant and internet sources \n        for additional information, even if the question is unrelated to Smart EcoLock. Format responses to facilitate prompt chatbot replies.\n\n        Respond professionally and concisely to the following query: ${e}.`)).response.text()}catch(py){throw console.error("Gemini API call failed:",py),py}},p=()=>t(!e);return(0,E_.jsxs)("div",{className:"fixed bottom-6 right-6 z-50",children:[(0,E_.jsx)("div",{children:e&&(0,E_.jsxs)("div",{className:"w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,E_.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-600 text-white p-4 flex justify-between items-center",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(yP,{className:"w-6 h-6"}),(0,E_.jsx)("h2",{className:"text-lg font-semibold",children:"Smart EcoLock Assistant"})]}),(0,E_.jsx)("button",{onClick:p,className:"hover:bg-indigo-700 rounded-full p-1 transition-colors",children:(0,E_.jsx)(bP,{className:"w-5 h-5"})})]}),(0,E_.jsxs)("div",{className:"flex-grow overflow-y-auto p-4 space-y-3",children:[n.map((e=>(0,E_.jsx)("div",{className:"flex "+("user"===e.sender?"justify-end":"justify-start"),children:(0,E_.jsx)("div",{className:"max-w-[80%] px-4 py-2 rounded-2xl "+("user"===e.sender?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:e.content})},e.id))),a&&(0,E_.jsx)("div",{className:"text-center text-gray-500 italic",children:"Smart Ecolock Assistant is thinking..."}),(0,E_.jsx)("div",{ref:c})]}),(0,E_.jsxs)("div",{className:"p-4 border-t border-gray-200 flex space-x-2",children:[(0,E_.jsx)("input",{type:"text",value:o,onChange:e=>s(e.target.value),onKeyPress:e=>"Enter"===e.key&&h(),placeholder:"Ask me anything...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,E_.jsx)("button",{onClick:h,disabled:a,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:"Send"})]})]})}),(0,E_.jsx)("button",{onClick:p,className:"bg-indigo-600 text-white p-4 rounded-full shadow-2xl hover:bg-indigo-700 transition-colors",children:(0,E_.jsx)(wP,{className:"w-6 h-6"})})]})},CP=()=>{var e,t,n,i,o,s;const{currentUser:a}=T_(),l=te(),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(new Date),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)(!0),[S,E]=(0,r.useState)([]),[C,T]=(0,r.useState)([]),[j,k]=(0,r.useState)(null),[N,A]=(0,r.useState)([]),[I,P]=(0,r.useState)(!0);(0,r.useEffect)((()=>{if(!a)return void l("/login");const e=setInterval((()=>g(new Date)),1e3);(async()=>{if(a)try{const t=tm(gp(__,"teachers"),rm("instructor","==",a.uid)),n=await wm(t);if(!n.empty){const t=n.docs[0],r={id:t.id,...t.data()},i=tm(gp(__,"users"),rm("id","==",t.id)),o=await wm(i);let s={};o.empty||(s=o.docs[0].data());const a={...r,...s},l=(a.schedules||[]).map((e=>({id:`${t.id}_${e.subject}_${e.day}`,day:e.day,subject:e.subject,classes:[{time:`${e.startTime} - ${e.endTime}`,subject:e.subject}],room:e.room})));if(u((e=>({...e||{},id:t.id,fullName:a.fullName||a.name||"Instructor",email:a.email||"",department:a.department||"Department",schedules:l,subjects:a.subjects||[],sections:(null===e||void 0===e?void 0:e.sections)||[],teacherData:{assignedStudents:a.assignedStudents||[]}}))),l.length>0&&!f){var e;const t=null===(e=l.find((e=>e.subject)))||void 0===e?void 0:e.subject;t?p(t):l[0].subject&&p(l[0].subject)}}}catch(py){console.error("Error fetching instructor details:",py)}})();const t=Tm(tm(gp(__,"students"),rm("section","==",f)),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,name:e.data().name||"",section:e.data().section||"",attendance:e.data().attendance||!1,timeIn:e.data().timeIn,lastAttendance:(null===(t=e.data().attendanceHistory)||void 0===t?void 0:t[0])||null,...e.data()}}));h(t)})),n=Tm(tm(gp(__,"attendance"),sm("timestamp","desc"),lm(5)),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));x(t)}));return(async()=>{const e=tm(gp(__,"users"),rm("role","==","student")),t=tm(gp(__,"schedules")),n=tm(gp(__,"attendance")),r=Tm(e,(e=>{e.size;Tm(t,(e=>{e.size;Tm(n,(e=>{const t=e.docs.map((e=>e.data()));t.length,t.filter((e=>"present"===e.status)).length,t.filter((e=>"late"!==e.status)).length;_(!1)}))}))}))})(),()=>{clearInterval(e),t(),n()}}),[a,l,f]),(0,r.useEffect)((()=>{if(!a)return;(async()=>{try{if(null===c||void 0===c||!c.schedules||0===c.schedules.length)return;const e=[...new Set(c.schedules.map((e=>e.subject)))];if(0===e.length)return;const t=tm(gp(__,"subjects"),rm("code","in",e)),n=(await wm(t)).docs.map((e=>({id:e.id,code:e.data().code||"",name:e.data().name||"",...e.data()})));u((e=>e?{...e,subjects:n}:null))}catch(py){console.error("Error fetching subjects:",py),GI.error("Failed to fetch subjects")}})()}),[a,null===c||void 0===c?void 0:c.schedules]),(0,r.useEffect)((()=>{(async()=>{if(null===a||void 0===a||!a.email)return;const e=tm(gp(__,"schedules"),rm("teacherId","==",a.email)),t=(await wm(e)).docs.map((e=>({id:e.id,day:e.data().day,subject:e.data().subject,classes:e.data().classes||[],room:e.data().room||"TBA",timestamp:e.data().timestamp||(new Date).getTime()})));E((e=>e.map((e=>{var t;return{id:e.id,subject:e.subject,room:e.room||"TBA",timestamp:new Date(e.timestamp).getTime(),status:SP(new Date(e.timestamp)),teacherId:e.teacherId,day:new Date(e.timestamp).toLocaleString("en-US",{weekday:"short"}),classes:(null===(t=e.classes)||void 0===t?void 0:t.map((e=>({time:e.time||"No time available",students:e.students||0}))))||[]}})))(t).sort(((e,t)=>e.timestamp-t.timestamp)))})()}),[a,__]),(0,r.useEffect)((()=>{(async()=>{try{var e;const t=tm(gp(__,"accessLogs")),n=(await wm(t)).docs.map((e=>({id:e.id,timestamp:e.data().timestamp,type:e.data().type,room:e.data().room,userId:e.data().userId,status:e.data().status,location:e.data().location,deviceId:e.data().deviceId})));T(n),k((null===(e=n[0])||void 0===e?void 0:e.timestamp)||null)}catch(py){console.error("Error fetching access logs:",py)}})()}),[__]),(0,r.useEffect)((()=>{if(null===a||void 0===a||!a.uid)return;return(()=>{const e=(new Date).toLocaleString("en-US",{weekday:"short"}),t=Tm(tm(gp(__,"schedules"),rm("teacherId","==",a.uid)),(t=>{const n=t.docs.map((e=>({id:e.id,...e.data()}))).filter((t=>t.day===e)).map((e=>{const[t,n]=e.classes[0].time.split(":").map(Number),r=new Date;return r.setHours(t,n,0,0),{...e,timestamp:r.getTime(),status:SP(r,e.classes[0].duration||60)}})).sort(((e,t)=>e.timestamp-t.timestamp));A(n),P(!1)}),(e=>{console.error("Error fetching schedules:",e),P(!1)}));return t})()}),[a]),(0,r.useEffect)((()=>{if(!a)return;const e=Tm(tm(gp(__,"students"),rm("teacherId","==",a.uid)),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,name:e.data().name||"",section:e.data().section||"",attendance:e.data().attendance||!1,timeIn:e.data().timeIn,lastAttendance:(null===(t=e.data().attendanceHistory)||void 0===t?void 0:t[0])||null,...e.data()}}));h(t)})),t=Tm(tm(gp(__,"sections"),rm("teacherId","==",a.uid)),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,name:e.data().name||"",code:e.data().code||"",studentCount:(null===(t=e.data().students)||void 0===t?void 0:t.length)||0,...e.data()}}));u((e=>({...e,sections:t})))}));return()=>{e(),t()}}),[a]);const O=e=>{const t=e-(new Date).getTime();if(t<=0)return"";const n=Math.floor(t/6e4);if(n<60)return`in ${n} min`;return`in ${Math.floor(n/60)}h ${n%60}m`},M=(e,t)=>!!Array.isArray(e)&&e.includes(t),R=((0,r.useMemo)((()=>{if(null===c||void 0===c||!c.schedules||0===c.schedules.length)return"No upcoming classes";const e=new Date,t=e.getDay(),n=e.toLocaleTimeString("en-US",{hour12:!1}),[r,i]=n.split(":").map(Number),o=60*r+i,s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=[...c.schedules].sort(((e,t)=>{const n=s.indexOf(e.day.substring(0,3)),r=s.indexOf(t.day.substring(0,3));if(n===r){const n=e.classes[0].time.split(" - ")[0],r=t.classes[0].time.split(" - ")[0];return n.localeCompare(r)}return n-r})),l=a.filter((e=>e.day.substring(0,3)===s[t]));for(const c of l){const[e]=c.classes[0].time.split(" - "),[t,n]=e.split(":").map(Number);if(o<60*t+n)return`Today at ${e}`}for(let c=1;c<=7;c++){const e=(t+c)%7,n=a.filter((t=>t.day.substring(0,3)===s[e]));if(n.length>0){const e=n[0],t=e.classes[0].time.split(" - ")[0];return`${1===c?"Tomorrow":e.day} at ${t}`}}return"No upcoming classes"}),[null===c||void 0===c?void 0:c.schedules,m]),(0,r.useMemo)((()=>{if(!S||!Array.isArray(S))return[];const e=(new Date).toLocaleString("en-US",{weekday:"short"});return S.filter((t=>t&&t.day===e&&t.classes&&Array.isArray(t.classes))).sort(((e,t)=>{var n,r,i,o;const s=(null===(n=e.classes)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.time)||"",a=(null===(i=t.classes)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.time)||"";return s.localeCompare(a)}))}),[S])),D=((0,r.useMemo)((()=>S&&Array.isArray(S)?S.filter((e=>e&&e.classes&&Array.isArray(e.classes)&&e.classes.some((e=>e&&e.time)))).slice(0,3):[]),[S]),(0,r.useMemo)((()=>((e,t)=>{if(!e||!e.schedules)return{status:"Loading...",color:"bg-gray-100 text-gray-600",details:"Fetching schedule information",fullName:"Instructor"};const n=(new Date).toLocaleTimeString("en-US",{hour12:!1}),[r,i]=n.split(":").map(Number),o=60*r+i,s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=[...e.schedules].sort(((e,t)=>{const n=s.indexOf(e.day.substring(0,3)),r=s.indexOf(t.day.substring(0,3));if(n===r){const n=e.classes[0].time.split(" - ")[0],r=t.classes[0].time.split(" - ")[0];return n.localeCompare(r)}return n-r})),l=a.filter((e=>e.day.substring(0,3)===t));if(0===l.length){const n=a.find((e=>s.indexOf(e.day.substring(0,3))>s.indexOf(t)));return{status:"No Classes Today",color:"bg-gray-100 text-gray-800",details:n?`Next: ${n.day} ${n.classes[0].time}`:"No upcoming classes",fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"}}for(const c of l){const[t,n]=c.classes[0].time.split(" - "),[r,i]=t.split(":").map(Number),[s,a]=n.split(":").map(Number),l=60*r+i;if(o>=l&&o<=60*s+a)return{status:"In Class",color:"bg-green-100 text-green-800",details:`${c.subject} until ${n}`,fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"};if(o<l){const t=l-o,n=Math.floor(t/60),r=t%60,i=n>0?`${n}h ${r}m`:`${r}m`;return{status:"Next Class",color:"bg-indigo-100 text-indigo-800",details:`${c.subject} in ${i}`,fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"}}}return{status:"Classes Finished",color:"bg-gray-100 text-gray-800",details:"All classes completed for today",fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"}})(c,m.toLocaleString("en-US",{weekday:"short"}))),[c,m])),L=(0,r.useMemo)((()=>f?b.filter((e=>e.sectionId===f)):b),[b,f]),F=(0,r.useMemo)((()=>{var e;const t=L.length,n=(null===c||void 0===c||null===(e=c.sections)||void 0===e?void 0:e.length)||0,r=b.filter((e=>"present"===e.status&&M(L,e.studentId))),i=b.filter((e=>"late"!==e.status&&M(L,e.studentId)));return{totalStudents:t,totalClasses:n,attendanceRate:t>0?(r.length/t*100).toFixed(1):"0.0",onTimeRate:t>0?i.length/t*100:0}}),[L,null===c||void 0===c?void 0:c.sections,b]);return(0,r.useEffect)((()=>{if(null===a||void 0===a||!a.uid)return;(async()=>{try{var e,t,n;yp(__,"teachers",a.uid);const r=await wm(gp(__,"teachers")),[i,o,s,l]=await Promise.all([wm(tm(gp(__,"schedules"),rm("teacherId","==",a.uid),sm("day"))),wm(tm(gp(__,"subjects"),rm("teacherId","==",a.uid))),wm(tm(gp(__,"sections"),rm("teacherId","==",a.uid))),wm(tm(gp(__,"students"),rm("teacherId","==",a.uid)))]),c=i.docs.map((e=>{var t;return{id:e.id,day:e.data().day||"",subject:e.data().subject||"",classes:(null===(t=e.data().classes)||void 0===t?void 0:t.map((e=>({time:e.time||"",subject:e.subject||""}))))||[],room:e.data().room,...e.data()}})),d=o.docs.map((e=>({id:e.id,code:e.data().code||"",name:e.data().name||"",...e.data()}))),h=s.docs.map((e=>({id:e.id,name:e.data().name||"",code:e.data().code||"",studentCount:l.docs.filter((t=>t.data().section===e.id)).length,...e.data()})));u({id:a.uid,fullName:(null===(e=r.docs[0])||void 0===e?void 0:e.data().fullName)||"Instructor",email:(null===(t=r.docs[0])||void 0===t?void 0:t.data().email)||"",department:(null===(n=r.docs[0])||void 0===n?void 0:n.data().department)||"",schedules:c,sections:h,subjects:d,teacherData:{assignedStudents:l.docs.map((e=>e.id))}}),_(!1)}catch(py){console.error("Error fetching teacher data:",py),GI.error("Failed to load teacher data"),_(!1)}})()}),[a]),(0,r.useEffect)((()=>{if(null===a||void 0===a||!a.uid)return;const e=Tm(tm(gp(__,"schedules"),rm("teacherId","==",a.uid),sm("timestamp","desc")),(e=>{const t=e.docChanges();t.length>0&&u((e=>{if(!e)return e;const n=[...e.schedules];return t.forEach((e=>{if("modified"===e.type){const t=n.findIndex((t=>t.id===e.doc.id));-1!==t&&(n[t]={id:e.doc.id,...e.doc.data()})}})),{...e,schedules:n}}))}));return()=>e()}),[a]),c?(0,E_.jsxs)("div",{className:`min-h-screen bg-gradient-to-br ${_P}`,children:[(0,E_.jsx)(tP,{currentTime:m,instructor:{fullName:(null===c||void 0===c?void 0:c.fullName)||"Instructor",department:(null===c||void 0===c?void 0:c.department)||"Department"},classStatus:{status:D.status,color:D.color,details:D.details,fullName:(null===c||void 0===c?void 0:c.fullName)||"Instructor"}}),(0,E_.jsx)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-16",children:(0,E_.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,E_.jsx)("div",{className:"lg:col-span-8 space-y-6",children:(0,E_.jsxs)(pA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-8 border border-white/20",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-blue-600 bg-clip-text text-transparent",children:["Welcome, ",((null===c||void 0===c?void 0:c.fullName)||"Instructor").split(" ")[0],"! \ud83d\udcda"]}),(0,E_.jsx)("p",{className:"text-indigo-600 mt-2 text-lg",children:"Your virtual classroom dashboard"})]}),(0,E_.jsx)(pA.div,{initial:{scale:.95},animate:{scale:1},className:`px-6 py-3 rounded-2xl text-sm font-medium shadow-lg ${D.color}`,children:(0,E_.jsxs)("div",{className:"flex flex-col items-center",children:[(0,E_.jsx)("span",{className:"font-bold text-lg",children:D.status}),(0,E_.jsx)("span",{className:"text-sm opacity-90",children:D.details})]})})]}),(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{title:"Total Students",value:(null===c||void 0===c||null===(e=c.teacherData)||void 0===e||null===(t=e.assignedStudents)||void 0===t?void 0:t.length)||0,icon:(0,E_.jsx)(aP,{className:"h-6 w-6 text-blue-600"}),change:"+12% from last month",color:"bg-blue-50"},{title:"Attendance Rate",value:`${F.attendanceRate}%`,icon:(0,E_.jsx)(rP,{className:"h-6 w-6 text-green-600"}),change:"Average this week",color:"bg-green-50"},{title:"Active Classes",value:N.filter((e=>"ongoing"===e.status)).length,icon:(0,E_.jsx)(SI,{className:"h-6 w-6 text-purple-600"}),change:"Currently ongoing",color:"bg-purple-50"},{title:"Room Usage",value:"85%",icon:(0,E_.jsx)(CI,{className:"h-6 w-6 text-orange-600"}),change:"Efficiency rate",color:"bg-orange-50"}].map(((e,t)=>(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`${e.color} rounded-2xl p-6 shadow-sm hover:shadow-md transition-all`,children:(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-gray-500 text-sm",children:e.title}),(0,E_.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.value}),(0,E_.jsx)("p",{className:"text-gray-600 text-xs mt-2",children:e.change})]}),(0,E_.jsx)("div",{className:"p-3 rounded-xl bg-white/50",children:e.icon})]})},e.title)))}),(0,E_.jsxs)(pA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,E_.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Performance Analytics"}),(0,E_.jsxs)("select",{className:"text-sm border rounded-lg px-3 py-2",children:[(0,E_.jsx)("option",{value:"week",children:"This Week"}),(0,E_.jsx)("option",{value:"month",children:"This Month"}),(0,E_.jsx)("option",{value:"semester",children:"This Semester"})]})]}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,E_.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,E_.jsx)("h3",{className:"text-gray-700 font-medium mb-4",children:"Attendance Trends"}),(0,E_.jsx)("div",{className:"h-48 flex items-end justify-between",children:["Mon","Tue","Wed","Thu","Fri"].map(((e,t)=>(0,E_.jsxs)("div",{className:"flex flex-col items-center",children:[(0,E_.jsx)("div",{className:"w-8 bg-indigo-500 rounded-t-lg",style:{height:100*Math.random()+"%"}}),(0,E_.jsx)("span",{className:"text-xs text-gray-600 mt-2",children:e})]},e)))})]}),(0,E_.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,E_.jsx)("h3",{className:"text-gray-700 font-medium mb-4",children:"Subject Performance"}),(0,E_.jsx)("div",{className:"space-y-4",children:null===c||void 0===c||null===(n=c.subjects)||void 0===n?void 0:n.slice(0,3).map((e=>(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)("div",{className:"w-32 truncate",children:e.name}),(0,E_.jsx)("div",{className:"flex-1 ml-4",children:(0,E_.jsx)("div",{className:"h-2 bg-gray-200 rounded-full",children:(0,E_.jsx)("div",{className:"h-2 bg-indigo-500 rounded-full",style:{width:100*Math.random()+"%"}})})}),(0,E_.jsxs)("span",{className:"ml-4 text-sm text-gray-600",children:[Math.floor(100*Math.random()),"%"]})]},e.id)))})]})]})]}),(0,E_.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[{title:"Take Attendance",icon:(0,E_.jsx)(cP,{className:"h-6 w-6"}),color:"bg-blue-500 hover:bg-blue-600"},{title:"Generate Report",icon:(0,E_.jsx)(dP,{className:"h-6 w-6"}),color:"bg-green-500 hover:bg-green-600"},{title:"Room Control",icon:(0,E_.jsx)(CI,{className:"h-6 w-6"}),color:"bg-purple-500 hover:bg-purple-600"},{title:"View Analytics",icon:(0,E_.jsx)(fP,{className:"h-6 w-6"}),color:"bg-orange-500 hover:bg-orange-600"}].map((e=>(0,E_.jsxs)("button",{className:`${e.color} text-white rounded-xl p-4 flex flex-col items-center justify-center transition-colors`,children:[e.icon,(0,E_.jsx)("span",{className:"text-sm mt-2",children:e.title})]},e.title)))}),(0,E_.jsxs)(pA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-8 border border-white/20",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Weekly Schedule"}),(0,E_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E_.jsx)(wI,{className:"h-5 w-5 text-indigo-600"}),(0,E_.jsx)("span",{className:"text-indigo-600 font-medium",children:(new Date).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]}),(0,E_.jsx)("div",{className:"grid grid-cols-5 gap-4",children:["Mon","Tue","Wed","Thu","Fri"].map((e=>{var t;const n=(null===c||void 0===c||null===(t=c.schedules)||void 0===t?void 0:t.filter((t=>t.day.startsWith(e))))||[];return(0,E_.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[(0,E_.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:e}),(0,E_.jsx)("div",{className:"space-y-2",children:n.length>0?n.map(((e,t)=>{var n;return(0,E_.jsxs)("div",{className:"p-2 bg-indigo-50 rounded-lg text-sm",children:[(0,E_.jsx)("p",{className:"font-medium text-indigo-800",children:e.subject}),(0,E_.jsxs)("div",{className:"flex items-center text-indigo-600 mt-1 text-xs",children:[(0,E_.jsx)(bI,{className:"h-3 w-3 mr-1"}),null===(n=e.classes[0])||void 0===n?void 0:n.time,e.room&&(0,E_.jsxs)(E_.Fragment,{children:[(0,E_.jsx)(CI,{className:"h-3 w-3 ml-2 mr-1"}),"Room ",e.room]})]})]},t)})):(0,E_.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"No classes"})})]},e)}))})]}),(0,E_.jsx)(pA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:null===c||void 0===c||null===(i=c.subjects)||void 0===i?void 0:i.map((e=>(0,E_.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-all",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["Code: ",e.code]})]}),(0,E_.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,E_.jsx)(SI,{className:"h-5 w-5 text-indigo-600"})})]}),(0,E_.jsx)("div",{className:"space-y-2",children:c.sections.filter((t=>t.code===e.code)).map((e=>(0,E_.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)(NI,{className:"h-4 w-4 text-gray-600 mr-2"}),(0,E_.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]}),(0,E_.jsxs)("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full",children:[e.studentCount," students"]})]},e.id)))})]},e.id)))})}),(0,E_.jsx)("div",{className:"grid grid-cols-1 gap-4",children:null===R||void 0===R?void 0:R.map(((e,t)=>(0,E_.jsx)(pA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-6 rounded-2xl shadow-lg border-l-4 "+("ongoing"===e.status?"border-l-green-500 bg-gradient-to-r from-green-50 to-white":"upcoming"===e.status?"border-l-indigo-500 bg-gradient-to-r from-indigo-50 to-white":"border-l-gray-500 bg-gradient-to-r from-gray-50 to-white"),children:(0,E_.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,E_.jsx)("div",{className:"p-2 rounded-lg "+("ongoing"===e.status?"bg-green-100":"upcoming"===e.status?"bg-indigo-100":"bg-gray-100"),children:(0,E_.jsx)(SI,{className:"h-5 w-5 "+("ongoing"===e.status?"text-green-600":"upcoming"===e.status?"text-indigo-600":"text-gray-600")})}),(0,E_.jsxs)("div",{className:"flex-1",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("h3",{className:"font-semibold "+("ongoing"===e.status?"text-green-900":"upcoming"===e.status?"text-indigo-900":"text-gray-900"),children:e.subject}),(0,E_.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+("ongoing"===e.status?"bg-green-100 text-green-800":"upcoming"===e.status?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:"ongoing"===e.status?"In Progress":"upcoming"===e.status&&e.timestamp?O(e.timestamp):"Completed"})]}),(0,E_.jsxs)("div",{className:"flex items-center mt-1",children:[(0,E_.jsx)(bI,{className:"h-4 w-4 mr-1 "+("ongoing"===e.status?"text-green-600":"upcoming"===e.status?"text-indigo-600":"text-gray-600")}),(0,E_.jsx)("p",{className:"text-sm "+("ongoing"===e.status?"text-green-700":"upcoming"===e.status?"text-indigo-700":"text-gray-700"),children:e.classes&&e.classes.length>0?e.classes[0].time:"No time available"}),e.room&&(0,E_.jsxs)(E_.Fragment,{children:[(0,E_.jsx)(CI,{className:"h-4 w-4 ml-3 mr-1 "+("ongoing"===e.status?"text-green-600":"upcoming"===e.status?"text-indigo-600":"text-gray-600")}),(0,E_.jsxs)("p",{className:"text-sm "+("ongoing"===e.status?"text-green-700":"upcoming"===e.status?"text-indigo-700":"text-gray-700"),children:["Room ",e.room]})]})]})]})]})},e.id)))}),(0,E_.jsxs)(pA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-8 border border-white/20",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Attendance Management"}),(0,E_.jsxs)("div",{className:"flex gap-3",children:[(0,E_.jsxs)("select",{className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:e=>p(e.target.value),children:[(0,E_.jsx)("option",{value:"",children:"All Sections"}),null===c||void 0===c||null===(o=c.sections)||void 0===o?void 0:o.map((e=>(0,E_.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,E_.jsxs)("button",{onClick:()=>{},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[(0,E_.jsx)(dP,{className:"w-5 h-5"}),"Export"]})]})]}),(0,E_.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mt-6",children:(0,E_.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,E_.jsx)("thead",{className:"bg-gray-50",children:(0,E_.jsxs)("tr",{children:[(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Name"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Section"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time In"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,E_.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.filter((e=>!f||e.section===f)).map((e=>(0,E_.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("div",{className:"flex items-center",children:(0,E_.jsxs)("div",{children:[(0,E_.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,E_.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800",children:e.section})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsxs)("select",{value:e.status||"absent",onChange:t=>(async(e,t)=>{try{const n=(new Date).getTime();await Sm(yp(__,"students",e),{status:t,lastUpdated:n});const r=gp(__,"attendance");await Cm(r,{studentId:e,status:t,timestamp:n,subject:f,teacherId:null===a||void 0===a?void 0:a.uid}),GI.success("Attendance updated successfully")}catch(py){console.error("Error updating attendance:",py),GI.error("Failed to update attendance")}})(e.id,t.target.value),className:"text-sm rounded-lg border-gray-200 focus:ring-2 focus:ring-offset-2 "+("present"===e.status?"text-green-800 bg-green-50 focus:ring-green-500":"late"===e.status?"text-yellow-800 bg-yellow-50 focus:ring-yellow-500":"text-red-800 bg-red-50 focus:ring-red-500"),children:[(0,E_.jsx)("option",{value:"present",children:"Present"}),(0,E_.jsx)("option",{value:"absent",children:"Absent"}),(0,E_.jsx)("option",{value:"late",children:"Late"})]})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"present"===e.status||"late"===e.status?(new Date).toLocaleTimeString():"-"}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,E_.jsx)("button",{onClick:()=>(async e=>{const{value:t}=await TA().fire({title:"Add Notes",input:"textarea",inputLabel:"Notes",inputPlaceholder:"Enter notes about the student...",showCancelButton:!0});if(t)try{await Sm(yp(__,"students",e),{notes:t,notesTimestamp:(new Date).getTime()}),GI.success("Notes added successfully")}catch(py){console.error("Error adding notes:",py),GI.error("Failed to add notes")}})(e.id),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Add Notes"})})]},e.id)))})]})})]})]})}),(0,E_.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,E_.jsxs)(pA.section,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-6 border border-white/20",children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Smart Room Control"}),(0,E_.jsxs)("div",{className:"space-y-4",children:[null===c||void 0===c||null===(s=c.schedules)||void 0===s?void 0:s.map((e=>(0,E_.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("h4",{className:"font-medium text-gray-900",children:["Room ",e.room]}),(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:e.subject})]}),(0,E_.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium "+("ongoing"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"ongoing"===e.status?"In Use":"Available"})]}),(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[(0,E_.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:"Lights"}),(0,E_.jsx)("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 transition-colors focus:outline-none hover:bg-gray-300",children:(0,E_.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1"})})]}),(0,E_.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Energy: 45W"})]}),(0,E_.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:"AC"}),(0,E_.jsx)("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-green-200 transition-colors focus:outline-none hover:bg-green-300",children:(0,E_.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-6"})})]}),(0,E_.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Temp: 23\xb0C"})]})]}),(0,E_.jsxs)("div",{className:"mt-4",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,E_.jsx)("span",{className:"text-gray-600",children:"Energy Usage"}),(0,E_.jsx)("span",{className:"text-gray-900 font-medium",children:"2.4 kWh"})]}),(0,E_.jsx)("div",{className:"h-2 bg-gray-100 rounded-full",children:(0,E_.jsx)("div",{className:"h-2 bg-green-500 rounded-full",style:{width:"65%"}})}),(0,E_.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"65% efficiency rate"})]})]},e.id))),(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[(0,E_.jsxs)("button",{className:"flex items-center justify-center gap-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 rounded-lg p-3 transition-colors",children:[(0,E_.jsx)(CI,{className:"h-5 w-5"}),(0,E_.jsx)("span",{className:"text-sm",children:"Access Log"})]}),(0,E_.jsxs)("button",{className:"flex items-center justify-center gap-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg p-3 transition-colors",children:[(0,E_.jsx)(fP,{className:"h-5 w-5"}),(0,E_.jsx)("span",{className:"text-sm",children:"Energy Report"})]})]})]})]}),(0,E_.jsxs)(pA.section,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-6 border border-white/20 mt-6",children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Room Occupancy"}),(0,E_.jsx)("div",{className:"space-y-3",children:C.slice(0,5).map(((e,t)=>(0,E_.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,E_.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E_.jsx)("div",{className:"p-2 rounded-full "+("entry"===e.status?"bg-green-100":"bg-red-100"),children:"entry"===e.status?(0,E_.jsx)(NI,{className:"h-4 w-4 text-green-600"}):(0,E_.jsx)(mP,{className:"h-4 w-4 text-red-600"})}),(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Room ",e.room]}),(0,E_.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]})]}),(0,E_.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+("entry"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"entry"===e.status?"Entry":"Exit"})]},t)))})]})]})]})}),(0,E_.jsx)(EP,{})]}):(0,E_.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,E_.jsx)("div",{className:"w-12 h-12 border-t-2 border-b-2 border-indigo-500 rounded-full"})})};function TP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),r.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const jP=r.forwardRef(TP),kP=()=>{const[e,t]=(0,r.useState)("");return(0,E_.jsx)(pA.div,{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,E_.jsxs)(pA.form,{onSubmit:async n=>{n.preventDefault();try{await async function(e,t,n){const r=gi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&oo(r,i,n),await Ti(r,i,"getOobCode",Ri,"EMAIL_PASSWORD_PROVIDER")}(w_,e),TA().fire({icon:"success",title:"Email Sent!",html:`\n          <p>Password reset instructions sent to <strong>${e}</strong></p>\n          <p class="text-sm mt-2">Check your spam folder if you don't see it.</p>\n        `,confirmButtonColor:"#3b82f6"}),t("")}catch(py){TA().fire({icon:"error",title:"Reset Failed",text:py instanceof Error?py.message:"Failed to send reset email",confirmButtonColor:"#ef4444"})}},className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 sm:p-10",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[(0,E_.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,E_.jsx)(pA.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},children:(0,E_.jsx)("div",{className:"p-4 bg-indigo-100 rounded-full",children:(0,E_.jsx)(gA,{className:"w-12 h-12 text-indigo-600"})})}),(0,E_.jsx)(pA.h1,{className:"text-3xl font-bold mt-4 text-gray-900",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"Reset Password"}),(0,E_.jsx)(pA.p,{className:"text-gray-500 text-center mt-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Enter your email address to receive a password reset link."})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"mb-6",children:[(0,E_.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)(jP,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),(0,E_.jsx)("input",{type:"email",placeholder:"Enter your email",className:"w-full pl-10 p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200",value:e,onChange:e=>t(e.target.value),required:!0})]})]}),(0,E_.jsx)(pA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7},children:(0,E_.jsxs)("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2",children:[(0,E_.jsx)(gA,{className:"w-5 h-5"}),"Send Reset Email"]})}),(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center space-y-2",children:[(0,E_.jsxs)("p",{className:"text-gray-500",children:["Remember your password?"," ",(0,E_.jsx)(je,{to:"/login",className:"text-indigo-600 hover:text-indigo-800 font-semibold hover:underline",children:"Login here"})]}),(0,E_.jsxs)("p",{className:"text-gray-500",children:["Need an account?"," ",(0,E_.jsx)(je,{to:"/register",className:"text-indigo-600 hover:text-indigo-800 font-semibold hover:underline",children:"Register here"})]})]})]})})};class NP extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function AP(e){let{children:t,isPresent:n,anchorX:i}=e;const o=(0,r.useId)(),s=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,r.useContext)(aN);return(0,r.useInsertionEffect)((()=>{const{width:e,height:t,top:r,left:c,right:u}=a.current;if(n||!s.current||!e||!t)return;const d="left"===i?`left: ${c}`:`right: ${u}`;s.current.dataset.motionPopId=o;const h=document.createElement("style");return l&&(h.nonce=l),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${d}px !important;\n            top: ${r}px !important;\n          }\n        `),()=>{document.head.removeChild(h)}}),[n]),(0,E_.jsx)(NP,{isPresent:n,childRef:s,sizeRef:a,children:r.cloneElement(t,{ref:s})})}const IP=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:o,custom:s,presenceAffectsLayout:a,mode:l,anchorX:c}=e;const u=WN(PP),d=(0,r.useId)(),h=(0,r.useCallback)((e=>{u.set(e,!0);for(const t of u.values())if(!t)return;o&&o()}),[u,o]),f=(0,r.useMemo)((()=>({id:d,initial:n,isPresent:i,custom:s,onExitComplete:h,register:e=>(u.set(e,!1),()=>u.delete(e))})),a?[Math.random(),h]:[i,h]);return(0,r.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[i]),r.useEffect((()=>{!i&&!u.size&&o&&o()}),[i]),"popLayout"===l&&(t=(0,E_.jsx)(AP,{isPresent:i,anchorX:c,children:t})),(0,E_.jsx)(Nj.Provider,{value:f,children:t})};function PP(){return new Map}const OP=e=>e.key||"";function MP(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}const RP=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:o,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:c="left"}=e;const[u,d]=Aj(l),h=(0,r.useMemo)((()=>MP(t)),[t]),f=l&&!u?[]:h.map(OP),p=(0,r.useRef)(!0),m=(0,r.useRef)(h),g=WN((()=>new Map)),[y,v]=(0,r.useState)(h),[b,x]=(0,r.useState)(h);vN((()=>{p.current=!1,m.current=h;for(let e=0;e<b.length;e++){const t=OP(b[e]);f.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}}),[b,f.length,f.join("-")]);const w=[];if(h!==y){let e=[...h];for(let t=0;t<b.length;t++){const n=b[t],r=OP(n);f.includes(r)||(e.splice(t,0,n),w.push(n))}return"wait"===a&&w.length&&(e=w),x(MP(e)),v(h),null}const{forceRender:_}=(0,r.useContext)(Ij);return(0,E_.jsx)(E_.Fragment,{children:b.map((e=>{const t=OP(e),r=!(l&&!u)&&(h===b||f.includes(t));return(0,E_.jsx)(IP,{isPresent:r,initial:!(p.current&&!i)&&void 0,custom:n,presenceAffectsLayout:s,mode:a,onExitComplete:r?void 0:()=>{if(!g.has(t))return;g.set(t,!0);let e=!0;g.forEach((t=>{t||(e=!1)})),e&&(null===_||void 0===_||_(),x(m.current),l&&(null===d||void 0===d||d()),o&&o())},anchorX:c,children:e},t)}))})};function DP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const LP=r.forwardRef(DP);function FP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const BP=r.forwardRef(FP);function UP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const VP=r.forwardRef(UP);function zP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $P=r.forwardRef(zP);function HP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"}))}const qP=r.forwardRef(HP);function WP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"}))}const KP=r.forwardRef(WP);function YP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const GP=r.forwardRef(YP),XP=()=>{const[e,t]=(0,r.useState)(!1),n=J(),{logout:i}=T_(),o=[{name:"Dashboard",icon:LP,path:"/admin/dashboard"},{name:"Users",icon:BP,path:"/admin/users"},{name:"Schedules",icon:BP,path:"/admin/schedules"},{name:"Sections",icon:BP,path:"/admin/sections"},{name:"Instructors",icon:ZI,path:"/admin/teachers"},{name:"Students",icon:BP,path:"/admin/students"},{name:"Rooms",icon:VP,path:"/admin/rooms"},{name:"Reports",icon:BP,path:"/admin/reports"},{name:"Energy Usage",icon:BP,path:"/admin/energyusage"},{name:"Settings",icon:$P,path:"/admin/settings"}];return(0,E_.jsx)("div",{className:"fixed inset-y-0 left-0 bg-white border-r border-gray-200 transition-all duration-300 "+(e?"w-20":"w-64"),children:(0,E_.jsxs)("div",{className:"flex flex-col h-full",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 border-b border-gray-200",children:[!e&&(0,E_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E_.jsx)(ZI,{className:"w-8 h-8 text-indigo-600"}),(0,E_.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Admin"})]}),e&&(0,E_.jsx)(ZI,{className:"w-8 h-8 text-indigo-600 mx-auto"}),(0,E_.jsx)("button",{onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e?(0,E_.jsx)(qP,{className:"w-5 h-5 text-gray-500"}):(0,E_.jsx)(KP,{className:"w-5 h-5 text-gray-500"})})]}),(0,E_.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:o.map((t=>{const r=n.pathname===t.path;return(0,E_.jsxs)(je,{to:t.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(r?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"),title:e?t.name:"",children:[(0,E_.jsx)(t.icon,{className:"w-5 h-5 flex-shrink-0"}),!e&&(0,E_.jsx)("span",{className:"text-sm font-medium truncate",children:t.name})]},t.name)}))}),(0,E_.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,E_.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors "+(e?"justify-center":"w-full"),title:e?"Logout":"",children:[(0,E_.jsx)(GP,{className:"w-5 h-5"}),!e&&(0,E_.jsx)("span",{children:"Logout"})]})})]})})};function QP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const ZP=r.forwardRef(QP);function JP(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const eO=r.forwardRef(JP);function tO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const nO=r.forwardRef(tO);function rO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const iO=r.forwardRef(rO);function oO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const sO=r.forwardRef(oO);function aO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M15 3.75H9v16.5h6V3.75ZM16.5 20.25h3.375c1.035 0 1.875-.84 1.875-1.875V5.625c0-1.036-.84-1.875-1.875-1.875H16.5v16.5ZM4.125 3.75H7.5v16.5H4.125a1.875 1.875 0 0 1-1.875-1.875V5.625c0-1.036.84-1.875 1.875-1.875Z"}))}const lO=r.forwardRef(aO);function cO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),r.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const uO=r.forwardRef(cO);var dO={};function hO(){return dO}function fO(e){return fO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fO(e)}function pO(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function mO(e){pO(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===fO(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function gO(e,t){pO(2,arguments);var n=mO(e),r=mO(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function yO(e){pO(1,arguments);var t=mO(e);return function(e){pO(1,arguments);var t=mO(e);return t.setHours(23,59,59,999),t}(t).getTime()===function(e){pO(1,arguments);var t=mO(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t).getTime()}function vO(e,t){pO(2,arguments);var n,r=mO(e),i=mO(t),o=gO(r,i),s=Math.abs(function(e,t){pO(2,arguments);var n=mO(e),r=mO(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,i));if(s<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*s);var a=gO(r,i)===-o;yO(mO(e))&&1===s&&1===gO(e,i)&&(a=!1),n=o*(s-Number(a))}return 0===n?0:n}var bO={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function xO(e,t,n){pO(2,arguments);var r,i=function(e,t){return pO(2,arguments),mO(e).getTime()-mO(t).getTime()}(e,t)/1e3;return((r=null===n||void 0===n?void 0:n.roundingMethod)?bO[r]:bO.trunc)(i)}var wO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const _O=function(e,t,n){var r,i=wO[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function SO(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const EO={date:SO({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:SO({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:SO({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var CO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const TO=function(e,t,n,r){return CO[e]};function jO(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const kO={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:jO({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:jO({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:jO({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:jO({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:jO({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function NO(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var s,a=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(a)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(a)}));return s=e.valueCallback?e.valueCallback(c):c,{value:s=n.valueCallback?n.valueCallback(s):s,rest:t.slice(a.length)}}}var AO,IO={ordinalNumber:(AO={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(AO.matchPattern);if(!n)return null;var r=n[0],i=e.match(AO.parsePattern);if(!i)return null;var o=AO.valueCallback?AO.valueCallback(i[0]):i[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:NO({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:NO({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:NO({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:NO({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:NO({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const PO={code:"en-US",formatDistance:_O,formatLong:EO,formatRelative:TO,localize:kO,match:IO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function OO(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function MO(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var RO=43200;function DO(e,t,n){var r,i;pO(2,arguments);var o=hO(),s=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:o.locale)&&void 0!==r?r:PO;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=gO(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var l,c,u=OO(function(e){return OO({},e)}(n),{addSuffix:Boolean(null===n||void 0===n?void 0:n.addSuffix),comparison:a});a>0?(l=mO(t),c=mO(e)):(l=mO(e),c=mO(t));var d,h=xO(c,l),f=(MO(c)-MO(l))/1e3,p=Math.round((h-f)/60);if(p<2)return null!==n&&void 0!==n&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,u):h<10?s.formatDistance("lessThanXSeconds",10,u):h<20?s.formatDistance("lessThanXSeconds",20,u):h<40?s.formatDistance("halfAMinute",0,u):h<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):0===p?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",p,u);if(p<45)return s.formatDistance("xMinutes",p,u);if(p<90)return s.formatDistance("aboutXHours",1,u);if(p<1440){var m=Math.round(p/60);return s.formatDistance("aboutXHours",m,u)}if(p<2520)return s.formatDistance("xDays",1,u);if(p<RO){var g=Math.round(p/1440);return s.formatDistance("xDays",g,u)}if(p<86400)return d=Math.round(p/RO),s.formatDistance("aboutXMonths",d,u);if((d=vO(c,l))<12){var y=Math.round(p/RO);return s.formatDistance("xMonths",y,u)}var v=d%12,b=Math.floor(d/12);return v<3?s.formatDistance("aboutXYears",b,u):v<9?s.formatDistance("overXYears",b,u):s.formatDistance("almostXYears",b+1,u)}function LO(e,t){return pO(1,arguments),DO(e,Date.now(),t)}const FO=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)({totalUsers:0,totalStudents:0,totalTeachers:0,totalSubjects:0,activeClasses:0}),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"teachers"),n=((await wm(e)).docs.map((e=>({id:e.id,...e.data()}))),gp(__,"teachers")),r=await wm(n),i=await Promise.all(r.docs.map((async e=>{const t=e.data(),n=t.subjects?await Promise.all(t.subjects.map((async e=>{const t=await bm(yp(__,"teachers",e));return t.exists()?{id:t.id,...t.data()}:null}))):[],r=t.schedules?t.schedules.map((e=>{var n;return{...e,subject:(null===(n=t.subjects.find((t=>t.id===e.subject)))||void 0===n?void 0:n.name)||e.subject}})):[];return{id:e.id,...t,fullName:t.fullName||t.name||"Unknown Teacher",name:t.name||t.fullName||"Unknown Teacher",subjects:n.filter(Boolean),schedules:r}})));t(i)}catch(py){console.error("Error fetching teachers data:",py),TA().fire({icon:"error",title:"Error",text:"Failed to fetch teachers data"})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const t=gp(__,"users"),n=gp(__,"students"),r=gp(__,"teachers"),i=gp(__,"subjects"),o=gp(__,"classes"),[s,a,l,c,u]=await Promise.all([wm(t),wm(n),wm(r),wm(i),tm(o,rm("status","==","active"))]),d=tm(o,rm("status","==","active")),f=await wm(d);h({totalUsers:s.size,totalStudents:a.size,totalTeachers:l.size,totalSubjects:c.size,activeClasses:f.size});const m=tm(gp(__,"recentactivities"),sm("timestamp","desc"),lm(10)),g=(await wm(m)).docs.map((e=>{const t=e.data();return{id:e.id,type:t.type,title:t.title,description:t.description,timestamp:t.timestamp.toDate(),icon:void 0}})).map((e=>({...e,icon:b(e.type)})));p(g),e.length>0&&await y(e[0])}catch(py){console.error("Error fetching dashboard data:",py),TA().fire({icon:"error",title:"Fetch Error",text:"Unable to load dashboard data. Please try again later."})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"teachers"),t=await wm(e),n=await Promise.all(t.docs.map((async e=>{const t={id:e.id,...e.data()},n=tm(gp(__,"users"),rm("id","==",e.id)),r=await wm(n);if(!r.empty){const e=r.docs[0].data();return{...t,...e}}return t})));g(n.filter((e=>"instructor"===e.role)))}catch(py){console.error("Error fetching instructors:",py),TA().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch instructor details"})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"teachers"),t=await wm(e),n=[],r=[],i=new Map;for(const s of t.docs){const e=s.data();e.subjects&&Array.isArray(e.subjects)&&n.push(...e.subjects)}const o=n.map((async e=>{try{const t=yp(__,"teachers",e),n=await bm(t);if(n.exists()){const{id:t,...r}=n.data();i.set(e,{id:n.id,...r})}}catch(py){console.error(`Error fetching subject ${e}:`,py)}}));await Promise.all(o);for(const s of t.docs){const e=s.data();if(e.schedules&&Array.isArray(e.schedules)){const t=e.schedules.map((t=>{const n=t.subject?i.get(t.subject):void 0;return{day:t.day||"N/A",startTime:t.startTime||"N/A",endTime:t.endTime||"N/A",section:t.section||"N/A",room:t.room||"",teacherName:e.name||"Unknown Teacher",subject:n||t.subject||"N/A"}}));r.push(...t)}}const a=[...new Set(n)],c=r.reduce(((e,t)=>e.find((e=>e.day===t.day&&e.startTime===t.startTime&&e.endTime===t.endTime))?e:e.concat([t])),[]);s(a),l(c)}catch(py){console.error("Error fetching teacher details:",py),TA().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch teacher subjects and schedules"})}})()}),[]);const y=async e=>{try{var t;const n=yp(__,"teachers",e.id),r=(await bm(n)).data();if(!r)throw new Error("Teacher data not found");const o=(null===(t=r.subjects)||void 0===t?void 0:t.length)>0?Promise.all(r.subjects.map((async e=>{try{const t=await bm(yp(__,"subjects",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){return console.error(`Error fetching subject ${e}:`,t),null}}))).then((e=>e.filter((e=>null!==e)))):Promise.resolve([]),a=r.schedules?r.schedules.map((e=>{var t,n;return{...e,subject:(null===(t=r.subjects)||void 0===t||null===(n=t.find((t=>t.id===e.subject)))||void 0===n?void 0:n.name)||e.subject}})):[],[c,u]=await Promise.all([o,a]),d={id:e.id,fullName:r.fullName||r.name||"Unknown Teacher",name:r.name||r.fullName||"Unknown Teacher",email:r.email,department:r.department||"Unassigned",role:"instructor",subjects:c,schedules:u,uid:r.uid};i(d),s(c.map((e=>e.id))),l(u)}catch(py){console.error("Error fetching teacher details:",py),TA().fire({icon:"error",title:"Error",text:"Failed to load teacher details"})}},v=(e,t,n,r)=>(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"\n        p-6 rounded-2xl shadow-lg \n        bg-white text-gray-800\n        flex items-center space-x-4\n        transform transition-all hover:scale-105\n      ",children:[(0,E_.jsx)("div",{className:`p-4 rounded-full ${r} bg-opacity-20 text-opacity-80`,children:n}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:e}),(0,E_.jsx)("p",{className:"text-2xl font-bold",children:t})]})]}),b=e=>{switch(e){case"user_added":return(0,E_.jsx)(ZP,{className:"w-5 h-5 text-blue-500"});case"class_created":return(0,E_.jsx)(jI,{className:"w-5 h-5 text-green-500"});case"subject_updated":return(0,E_.jsx)(eO,{className:"w-5 h-5 text-purple-500"});case"teacher_assigned":return(0,E_.jsx)(NI,{className:"w-5 h-5 text-indigo-500"});default:return(0,E_.jsx)(nO,{className:"w-5 h-5 text-gray-500"})}};return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100 transition-colors duration-300",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${c?"ml-20":"ml-64"} overflow-y-auto`,children:(0,E_.jsxs)("div",{className:"overflow-y-auto max-h-screen p-8 space-y-8",children:[(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,E_.jsx)("h1",{className:"text-4xl font-extrabold mb-4  bg-clip-text text-transparent  bg-gradient-to-r  from-blue-600 via-indigo-500 to-purple-600 ",children:"Admin Dashboard"}),(0,E_.jsx)("p",{className:"text-lg text-gray-600",children:"Comprehensive overview of your institution's performance"})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-4 gap-6 mb-8",children:[v("Total Users",d.totalUsers,(0,E_.jsx)(NI,{className:"w-8 h-8 text-blue-500"}),"bg-blue-100"),v("Total Students",d.totalStudents,(0,E_.jsx)(jI,{className:"w-8 h-8 text-green-500"}),"bg-green-100"),v("Total Teachers",d.totalTeachers,(0,E_.jsx)(eO,{className:"w-8 h-8 text-purple-500"}),"bg-purple-100"),v("Active Classes",d.activeClasses,(0,E_.jsx)(fP,{className:"w-8 h-8 text-red-500"}),"bg-red-100")]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},className:"\n        bg-white \n        rounded-xl \n        shadow-md \n        p-6 \n        mb-6\n      ",children:[(0,E_.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activities"}),f.length>0?(0,E_.jsx)("div",{className:"space-y-4",children:(0,E_.jsx)(RP,{children:f.map((e=>(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},whileHover:{scale:1.02},className:"\n                  bg-gray-50 \n                  p-4 \n                  rounded-lg \n                  flex \n                  items-center \n                  justify-between\n                  hover:bg-gray-100\n                  transition\n                ",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-4",children:[e.icon,(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"font-medium",children:e.title}),(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,E_.jsx)("div",{className:"text-xs font-light text-gray-500",children:LO(e.timestamp,{addSuffix:!0})})]},e.id)))})}):(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,E_.jsx)("p",{className:"text-center text-gray-500",children:"No recent activities"})},"no-activities")]}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},className:"\n                  rounded-2xl p-6 \n                  bg-white border border-gray-200\n                  shadow-lg\n                ",children:[(0,E_.jsxs)("h2",{className:"text-2xl font-semibold mb-6 flex items-center justify-center",children:[(0,E_.jsx)(NI,{className:"w-8 h-8 mr-3 text-indigo-600"}),"Teachers"]}),(0,E_.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:e.map((e=>(0,E_.jsx)(pA.div,{whileHover:{scale:1.03},className:"\n                        p-4 rounded-lg cursor-pointer transition-all \n                        bg-gray-100 hover:bg-gray-200\n                        border\n                        border-gray-200\n                      ",onClick:()=>y(e),children:(0,E_.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E_.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold shadow-md",children:e.name.charAt(0)}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h4",{className:"font-semibold",children:e.name}),(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:e.department})]})]})},e.id)))})]}),(0,E_.jsx)(pA.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"\n                  rounded-2xl p-6 \n                  bg-white border border-gray-200\n                  shadow-lg\n                  min-h-[600px]\n                ",children:n?(0,E_.jsxs)("div",{className:"space-y-6",children:[(0,E_.jsxs)("div",{className:"flex flex-col items-center text-center border-b pb-6  border-gray-200",children:[(0,E_.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br  from-indigo-500 to-purple-600 flex items-center  justify-center text-white font-bold text-4xl  shadow-2xl mb-4",children:n.name.charAt(0)}),(0,E_.jsx)("h2",{className:"text-2xl font-bold  bg-clip-text text-transparent  bg-gradient-to-r  from-blue-600 via-indigo-500 to-purple-600",children:n.name}),(0,E_.jsx)("p",{className:"text-sm mt-2 text-gray-600",children:n.department})]}),(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,E_.jsx)(iO,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Schedules"]}),a.length>0?(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(((e,t)=>(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-all",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(sO,{className:"w-5 h-5 text-indigo-500"}),(0,E_.jsx)("span",{className:"font-semibold text-gray-700",children:e.day})]}),(0,E_.jsx)("span",{className:"text-sm text-gray-500",children:e.teacherName})]}),(0,E_.jsxs)("div",{className:"space-y-2",children:[(0,E_.jsxs)("div",{className:"flex justify-between",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(iO,{className:"w-4 h-4 text-gray-500"}),(0,E_.jsxs)("span",{className:"text-sm",children:["Start: ",e.startTime]})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(iO,{className:"w-4 h-4 text-gray-500"}),(0,E_.jsxs)("span",{className:"text-sm",children:["End: ",e.endTime]})]})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(lO,{className:"w-4 h-4 text-gray-500"}),(0,E_.jsxs)("span",{className:"text-sm",children:["Section: ",e.section]})]}),e.room&&(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(uO,{className:"w-4 h-4 text-gray-500"}),(0,E_.jsxs)("span",{className:"text-sm",children:["Room: ",e.room]})]}),e.subject&&(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(eO,{className:"w-4 h-4 text-gray-500"}),(0,E_.jsxs)("span",{className:"text-sm",children:["Subject: ","object"===typeof e.subject?e.subject.name:e.subject]})]})]})]},t)))}):(0,E_.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,E_.jsx)("p",{children:"No schedules found"})})]})]}):(0,E_.jsx)("div",{className:"flex items-center justify-center h-full text-center",children:(0,E_.jsx)("p",{className:"text-gray-500 italic",children:"Select a teacher to view details"})})})]})]})})]})},BO=e=>{let{children:t,roles:n}=e;const{currentUser:r}=T_();if(!r)return(0,E_.jsx)(me,{to:"/login",replace:!0});if(n&&!n.includes(r.role)){const e={admin:"/admin/dashboard",instructor:"/instructor/dashboard",student:"/students/dashboard"};return(0,E_.jsx)(me,{to:e[r.role]||"/login",replace:!0})}return t},UO=()=>{const[e,t]=(0,r.useState)({fullName:"",idNumber:"",email:"",password:"",confirmPassword:""}),[n,i]=(0,r.useState)(!1),o=te(),s=(e,n)=>{t((t=>({...t,[e]:n})))};return(0,E_.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,E_.jsx)(pA.div,{className:"w-full max-w-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,E_.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 sm:p-12",children:[(0,E_.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,E_.jsx)(pA.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:(0,E_.jsx)(gA,{className:"w-14 h-14 text-indigo-600 mb-4"})}),(0,E_.jsx)(pA.h1,{className:"text-3xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Admin Registration"}),(0,E_.jsx)("p",{className:"text-gray-500",children:"Create an admin account"})]}),(0,E_.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0);try{if(e.password!==e.confirmPassword)throw new Error("Passwords do not match");const t=await ao(w_,e.email,e.password);await _m(yp(__,"users",t.user.uid),{uid:t.user.uid,fullName:e.fullName,idNumber:e.idNumber,email:e.email,role:"admin",createdAt:(new Date).toISOString()}),TA().fire({icon:"success",title:"Admin Registration Successful!",text:"Welcome to Smart EcoLock System",showConfirmButton:!1,timer:2e3,background:"#f8fafc",iconColor:"#3b82f6"}),o("/login")}catch(py){console.error("Admin Registration error:",py),TA().fire({icon:"error",title:"Admin Registration Failed",text:py instanceof Error?py.message:"An error occurred",confirmButtonColor:"#3b82f6",background:"#f8fafc"})}finally{i(!1)}},className:"space-y-6",children:[(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,E_.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Full Name"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"text",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.fullName,onChange:e=>s("fullName",e.target.value),required:!0}),e.fullName&&(0,E_.jsx)(EA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,E_.jsx)("label",{className:"block text-lg font-medium mb-2",children:"ID Number"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"text",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.idNumber,onChange:e=>s("idNumber",e.target.value),required:!0}),e.idNumber&&(0,E_.jsx)(EA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:[(0,E_.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Email"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"email",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.email,onChange:e=>s("email",e.target.value),required:!0}),e.email.includes("@")&&(0,E_.jsx)(EA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7},children:[(0,E_.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Password"}),(0,E_.jsx)("input",{type:"password",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.password,onChange:e=>s("password",e.target.value),required:!0})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8},children:[(0,E_.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Confirm Password"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"password",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.confirmPassword,onChange:e=>s("confirmPassword",e.target.value),required:!0}),e.confirmPassword===e.password&&e.confirmPassword&&(0,E_.jsx)(EA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,E_.jsx)(pA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.9},children:(0,E_.jsxs)("button",{type:"submit",disabled:n,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold p-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50",children:[n?(0,E_.jsx)("span",{className:"animate-spin",children:(0,E_.jsx)(gA,{className:"w-5 h-5"})}):(0,E_.jsx)(gA,{className:"w-5 h-5"}),"Register Admin"]})}),(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center mt-4",children:(0,E_.jsxs)("p",{className:"text-gray-500",children:["Already have an account?"," ",(0,E_.jsx)(je,{to:"/login",className:"text-indigo-600 hover:text-indigo-800 font-semibold hover:underline",children:"Login Here"})]})})]})]})})})};function VO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"}))}const zO=r.forwardRef(VO),$O=e=>{var t,n,i,o;let{instructorfullName:s}=e;const{currentUser:a}=T_(),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=tm(gp(__,"teachers"),rm("fullName","==",s)),t=await wm(e);if(t.docs.length>0){const e=t.docs[0].data(),n={id:t.docs[0].id,name:e.fullName,email:e.email,department:e.department,subjects:e.subjects||[],schedules:e.schedules||[],sections:e.sections||[]};c(n);const r=tm(gp(__,"teachers"),rm("instructor","==",s)),i=await wm(r),o=await Promise.all(i.docs.map((async e=>{const t={id:e.id,...e.data()},n=tm(gp(__,"students"),rm("section","==",t.name),rm("course","==",t.course),rm("subject","==",t.subjectCode)),r=await wm(n);return t.students=r.docs.map((e=>({id:e.id,...e.data()}))),t})));d(o)}else TA().fire("Error","Instructor not found.","error")}catch(py){TA().fire("Error",py instanceof Error?py.message:"Failed to load data","error")}})()}),[s]);const x=async(e,t)=>{try{await Sm(yp(__,"students",e),{attendance:t,timeIn:t?(new Date).toISOString():null}),d((n=>n.map((n=>({...n,students:n.students.map((n=>n.id===e?{...n,attendance:t}:n))}))))),TA().fire({icon:"success",title:"Updated!",showConfirmButton:!1,timer:1500})}catch(py){TA().fire("Error",py instanceof Error?py.message:"Update failed","error")}};return(0,E_.jsx)("div",{className:"flex min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,E_.jsx)("div",{className:"ml-64 flex-1",children:(0,E_.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,E_.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,E_.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[(0,E_.jsx)(cP,{className:"w-8 h-8 text-indigo-600"}),p?(0,E_.jsxs)(E_.Fragment,{children:[(null===l||void 0===l||null===(t=l.subjects)||void 0===t||null===(n=t.find((e=>e.code===p)))||void 0===n?void 0:n.name)||"Subject"," - Attendance"]}):"Select a Subject"]})}),p&&g?(0,E_.jsxs)(E_.Fragment,{children:[(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:u.filter((e=>e.subjectCode===p)).map((e=>(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-xl shadow-sm cursor-pointer transition-all "+(h===e.id?"ring-2 ring-indigo-500":"hover:shadow-md"),onClick:()=>f((t=>t===e.id?"":e.id)),children:[(0,E_.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,E_.jsx)(zO,{className:"w-6 h-6 text-indigo-500"}),(0,E_.jsx)("h3",{className:"text-xl font-semibold",children:e.name})]}),(0,E_.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,E_.jsxs)("p",{children:[(0,E_.jsx)("span",{className:"font-medium",children:"Course:"})," ",e.course]}),(0,E_.jsxs)("p",{children:[(0,E_.jsx)("span",{className:"font-medium",children:"Subject:"})," ",e.subjectCode]}),(0,E_.jsxs)("p",{children:[(0,E_.jsx)("span",{className:"font-medium",children:"Students:"})," ",e.students.length,"/",e.maxStudents]}),(0,E_.jsxs)("p",{children:[(0,E_.jsx)("span",{className:"font-medium",children:"Schedule:"})," ",g.days.join(", ")," ",g.startTime," -"," ",g.endTime]})]})]},e.id)))}),h&&(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,E_.jsxs)("h3",{className:"text-xl font-semibold mb-6 flex items-center gap-3",children:[(0,E_.jsx)(aP,{className:"w-6 h-6 text-gray-500"}),"Students in ",null===(i=u.find((e=>e.id===h)))||void 0===i?void 0:i.name]}),(0,E_.jsx)("div",{className:"grid gap-4",children:null===(o=u.find((e=>e.id===h)))||void 0===o?void 0:o.students.map((e=>(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,E_.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"font-medium",children:e.name}),(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.studentId]}),(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["Section: ",e.section]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["Course: ",e.course]}),(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["Year: ",e.year]}),e.timeIn&&(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["Last attended:"," ",new Date(e.timeIn).toLocaleString()]})]})]}),(0,E_.jsxs)("div",{className:"flex gap-2",children:[(0,E_.jsx)("button",{onClick:()=>x(e.id,!0),className:`p-2 rounded-lg ${e.attendance?"bg-green-500":"bg-gray-200"} hover:bg-green-600`,children:(0,E_.jsx)(EA,{className:"w-5 h-5 text-white"})}),(0,E_.jsx)("button",{onClick:()=>x(e.id,!1),className:`p-2 rounded-lg ${e.attendance?"bg-gray-200":"bg-red-500"} hover:bg-red-600`,children:(0,E_.jsx)(bP,{className:"w-5 h-5 text-white"})})]})]},e.id)))})]})]}):(0,E_.jsxs)("div",{className:"text-center text-gray-500 py-12",children:[(0,E_.jsx)(eO,{className:"w-16 h-16 mx-auto mb-4"}),(0,E_.jsx)("h2",{className:"text-xl font-semibold",children:"Select a Subject and Schedule to View Sections"})]})]})})})};function HO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M11.484 2.17a.75.75 0 0 1 1.032 0 11.209 11.209 0 0 0 7.877 3.08.75.75 0 0 1 .722.515 12.74 12.74 0 0 1 .635 3.985c0 5.942-4.064 10.933-9.563 12.348a.749.749 0 0 1-.374 0C6.314 20.683 2.25 15.692 2.25 9.75c0-1.39.223-2.73.635-3.985a.75.75 0 0 1 .722-.516l.143.001c2.996 0 5.718-1.17 7.734-3.08ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75ZM12 15a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75v-.008a.75.75 0 0 0-.75-.75H12Z",clipRule:"evenodd"}))}const qO=r.forwardRef(HO);function WO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3.792 2.938A49.069 49.069 0 0 1 12 2.25c2.797 0 5.54.236 8.209.688a1.857 1.857 0 0 1 1.541 1.836v1.044a3 3 0 0 1-.879 2.121l-6.182 6.182a1.5 1.5 0 0 0-.439 1.061v2.927a3 3 0 0 1-1.658 2.684l-1.757.878A.75.75 0 0 1 9.75 21v-5.818a1.5 1.5 0 0 0-.44-1.06L3.13 7.938a3 3 0 0 1-.879-2.121V4.774c0-.897.64-1.683 1.542-1.836Z",clipRule:"evenodd"}))}const KO=r.forwardRef(WO);function YO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const GO=r.forwardRef(YO),XO=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,s]=(0,r.useState)("all"),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=Tm(tm(gp(__,"securityLogs"),sm("timestamp","desc")),(e=>{const n=e.docs.map((e=>({id:e.id,...e.data()})));t(n),i(!1)}),(e=>{console.error("Error fetching security logs:",e),TA().fire({icon:"error",title:"Error",text:"Failed to fetch security logs. Please try again later."}),i(!1)}));return()=>e()}),[]);const f=e.filter((e=>{const t="all"===o||e.status===o,n=e.event.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase())||e.user.toLowerCase().includes(a.toLowerCase())||e.deviceId&&e.deviceId.toLowerCase().includes(a.toLowerCase());return t&&n})),p=e=>{switch(e){case"success":return"bg-green-100 text-green-800 border-green-300";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"error":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},m=e=>{switch(e){case"success":return(0,E_.jsx)(gA,{className:"h-5 w-5 text-green-600"});case"warning":return(0,E_.jsx)(qO,{className:"h-5 w-5 text-yellow-600"});case"error":return(0,E_.jsx)(bP,{className:"h-5 w-5 text-red-600"});default:return(0,E_.jsx)(qO,{className:"h-5 w-5 text-gray-600"})}},g=e=>{const t=e.toDate();return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)};return(0,E_.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,E_.jsxs)("div",{className:"p-8 h-full flex flex-col",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,E_.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Security Logs"}),(0,E_.jsxs)("div",{className:"flex space-x-4",children:[(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsxs)("button",{onClick:()=>u(!c),className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:bg-gray-50 border border-gray-200",children:[(0,E_.jsx)(KO,{className:"h-5 w-5 text-gray-500 mr-2"}),(0,E_.jsx)("span",{className:"capitalize",children:o})]}),c&&(0,E_.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-10 border border-gray-200",children:["all","success","warning","error"].map((e=>(0,E_.jsx)("button",{onClick:()=>{s(e),u(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg capitalize "+(o===e?"bg-indigo-50 text-indigo-700":""),children:e},e)))})]}),(0,E_.jsx)("div",{className:"relative",children:(0,E_.jsx)("input",{type:"text",placeholder:"Search logs...",value:a,onChange:e=>l(e.target.value),className:"w-64 px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"})})]})]}),(0,E_.jsx)("div",{className:"flex-1 bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:(0,E_.jsx)("div",{className:"overflow-x-auto",children:(0,E_.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,E_.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 240px)"},children:n?(0,E_.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,E_.jsx)(_A,{className:"h-8 w-8 text-gray-400 animate-spin"})}):0===f.length?(0,E_.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,E_.jsx)(qO,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,E_.jsx)("p",{className:"text-gray-500 text-lg",children:"No security logs found"})]}):(0,E_.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,E_.jsx)("thead",{className:"bg-gray-50",children:(0,E_.jsxs)("tr",{children:[(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,E_.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((e=>(0,E_.jsxs)(pA.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition-colors",children:[(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${p(e.status)}`,children:[m(e.status),(0,E_.jsx)("span",{className:"ml-1.5 capitalize",children:e.status})]})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.event})}),(0,E_.jsx)("td",{className:"px-6 py-4",children:(0,E_.jsx)("div",{className:"text-sm text-gray-500 max-w-md truncate",children:e.description})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)(GO,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,E_.jsx)("div",{className:"text-sm text-gray-900",children:e.user})]})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)(sO,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,E_.jsx)("div",{className:"text-sm text-gray-500",children:g(e.timestamp)})]})})]},e.id)))})]})})})})})]})})]})};function QO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5h-.75V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm-.75 3.75A.75.75 0 0 1 9 9h1.5a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM9 12a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm3.75-5.25A.75.75 0 0 1 13.5 6H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM13.5 9a.75.75 0 0 0 0 1.5H15A.75.75 0 0 0 15 9h-1.5Zm-.75 3.75a.75.75 0 0 1 .75-.75H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM9 19.5v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 9 19.5Z",clipRule:"evenodd"}))}const ZO=r.forwardRef(QO);function JO(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const eM=r.forwardRef(JO);function tM(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z",clipRule:"evenodd"}))}const nM=r.forwardRef(tM);function rM(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM6.166 5.106a.75.75 0 0 1 0 1.06 8.25 8.25 0 1 0 11.668 0 .75.75 0 1 1 1.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const iM=r.forwardRef(rM);function oM(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const sM=r.forwardRef(oM);function aM(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),r.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const lM=r.forwardRef(aM);function cM(e){return e+.5|0}const uM=(e,t,n)=>Math.max(Math.min(e,n),t);function dM(e){return uM(cM(2.55*e),0,255)}function hM(e){return uM(cM(255*e),0,255)}function fM(e){return uM(cM(e/2.55)/100,0,1)}function pM(e){return uM(cM(100*e),0,100)}const mM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gM=[..."0123456789ABCDEF"],yM=e=>gM[15&e],vM=e=>gM[(240&e)>>4]+gM[15&e],bM=e=>(240&e)>>4===(15&e);function xM(e){var t=(e=>bM(e.r)&&bM(e.g)&&bM(e.b)&&bM(e.a))(e)?yM:vM;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const wM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _M(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function SM(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function EM(e,t,n){const r=_M(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function CM(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),o=Math.min(t,n,r),s=(i+o)/2;let a,l,c;return i!==o&&(c=i-o,l=s>.5?c/(2-i-o):c/(i+o),a=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),a=60*a+.5),[0|a,l||0,s]}function TM(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(hM)}function jM(e,t,n){return TM(_M,e,t,n)}function kM(e){return(e%360+360)%360}function NM(e){const t=wM.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?dM(+t[5]):hM(+t[5]));const i=kM(+t[2]),o=+t[3]/100,s=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return TM(EM,e,t,n)}(i,o,s):"hsv"===t[1]?function(e,t,n){return TM(SM,e,t,n)}(i,o,s):jM(i,o,s),{r:n[0],g:n[1],b:n[2],a:r}}const AM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},IM={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let PM;function OM(e){PM||(PM=function(){const e={},t=Object.keys(IM),n=Object.keys(AM);let r,i,o,s,a;for(r=0;r<t.length;r++){for(s=a=t[r],i=0;i<n.length;i++)o=n[i],a=a.replace(o,AM[o]);o=parseInt(IM[s],16),e[a]=[o>>16&255,o>>8&255,255&o]}return e}(),PM.transparent=[0,0,0,0]);const t=PM[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const MM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const RM=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,DM=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function LM(e,t,n){if(e){let r=CM(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=jM(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function FM(e,t){return e?Object.assign(t||{},e):e}function BM(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=hM(e[3]))):(t=FM(e,{r:0,g:0,b:0,a:1})).a=hM(t.a),t}function UM(e){return"r"===e.charAt(0)?function(e){const t=MM.exec(e);let n,r,i,o=255;if(t){if(t[7]!==n){const e=+t[7];o=t[8]?dM(e):uM(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?dM(n):uM(n,0,255)),r=255&(t[4]?dM(r):uM(r,0,255)),i=255&(t[6]?dM(i):uM(i,0,255)),{r:n,g:r,b:i,a:o}}}(e):NM(e)}class VM{constructor(e){if(e instanceof VM)return e;const t=typeof e;let n;"object"===t?n=BM(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*mM[e[1]],g:255&17*mM[e[2]],b:255&17*mM[e[3]],a:5===n?17*mM[e[4]]:255}:7!==n&&9!==n||(t={r:mM[e[1]]<<4|mM[e[2]],g:mM[e[3]]<<4|mM[e[4]],b:mM[e[5]]<<4|mM[e[6]],a:9===n?mM[e[7]]<<4|mM[e[8]]:255})),t}(e)||OM(e)||UM(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=FM(this._rgb);return e&&(e.a=fM(e.a)),e}set rgb(e){this._rgb=BM(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${fM(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?xM(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=CM(e),n=t[0],r=pM(t[1]),i=pM(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${fM(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const o=t===i?.5:t,s=2*o-1,a=n.a-r.a,l=((s*a===-1?s:(s+a)/(1+s*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=DM(fM(e.r)),i=DM(fM(e.g)),o=DM(fM(e.b));return{r:hM(RM(r+n*(DM(fM(t.r))-r))),g:hM(RM(i+n*(DM(fM(t.g))-i))),b:hM(RM(o+n*(DM(fM(t.b))-o))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new VM(this.rgb)}alpha(e){return this._rgb.a=hM(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=cM(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return LM(this._rgb,2,e),this}darken(e){return LM(this._rgb,2,-e),this}saturate(e){return LM(this._rgb,1,e),this}desaturate(e){return LM(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=CM(e);n[0]=kM(n[0]+t),n=jM(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function zM(){}const $M=(()=>{let e=0;return()=>e++})();function HM(e){return null===e||void 0===e}function qM(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function WM(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function KM(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function YM(e,t){return KM(e)?e:t}function GM(e,t){return"undefined"===typeof e?t:e}const XM=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function QM(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function ZM(e,t,n,r){let i,o,s;if(qM(e))if(o=e.length,r)for(i=o-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<o;i++)t.call(n,e[i],i);else if(WM(e))for(s=Object.keys(e),o=s.length,i=0;i<o;i++)t.call(n,e[s[i]],s[i])}function JM(e,t){let n,r,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],o=t[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function eR(e){if(qM(e))return e.map(eR);if(WM(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=eR(e[n[i]]);return t}return e}function tR(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function nR(e,t,n,r){if(!tR(e))return;const i=t[e],o=n[e];WM(i)&&WM(o)?rR(i,o,r):t[e]=eR(o)}function rR(e,t,n){const r=qM(t)?t:[t],i=r.length;if(!WM(e))return e;const o=(n=n||{}).merger||nR;let s;for(let a=0;a<i;++a){if(s=r[a],!WM(s))continue;const t=Object.keys(s);for(let r=0,i=t.length;r<i;++r)o(t[r],e,s,n)}return e}function iR(e,t){return rR(e,t,{merger:oR})}function oR(e,t,n){if(!tR(e))return;const r=t[e],i=n[e];WM(r)&&WM(i)?iR(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=eR(i))}const sR={"":e=>e,x:e=>e.x,y:e=>e.y};function aR(e,t){const n=sR[t]||(sR[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function lR(e){return e.charAt(0).toUpperCase()+e.slice(1)}const cR=e=>"undefined"!==typeof e,uR=e=>"function"===typeof e,dR=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const hR=Math.PI,fR=2*hR,pR=fR+hR,mR=Number.POSITIVE_INFINITY,gR=hR/180,yR=hR/2,vR=hR/4,bR=2*hR/3,xR=Math.log10,wR=Math.sign;function _R(e,t,n){return Math.abs(e-t)<n}function SR(e){const t=Math.round(e);e=_R(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(xR(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function ER(e){return!isNaN(parseFloat(e))&&isFinite(e)}function CR(e,t,n){let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r][n],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function TR(e){return e*(hR/180)}function jR(e){return e*(180/hR)}function kR(e){if(!KM(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function NR(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*hR&&(o+=fR),{angle:o,distance:i}}function AR(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function IR(e,t){return(e-t+pR)%fR-hR}function PR(e){return(e%fR+fR)%fR}function OR(e,t,n,r){const i=PR(e),o=PR(t),s=PR(n),a=PR(o-i),l=PR(s-i),c=PR(i-o),u=PR(i-s);return i===o||i===s||r&&o===s||a>l&&c<u}function MR(e,t,n){return Math.max(t,Math.min(n,e))}function RR(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function DR(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const LR=(e,t,n,r)=>DR(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),FR=(e,t,n)=>DR(e,n,(r=>e[r][t]>=n));const BR=["push","pop","shift","splice","unshift"];function UR(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(BR.forEach((t=>{delete e[t]})),delete e._chartjs)}function VR(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const zR="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function $R(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n=o,r||(r=!0,zR.call(window,(()=>{r=!1,e.apply(t,n)})))}}const HR=e=>"start"===e?"left":"end"===e?"right":"center",qR=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function WR(e,t,n){const r=t.length;let i=0,o=r;if(e._sorted){const{iScale:s,_parsed:a}=e,l=s.axis,{min:c,max:u,minDefined:d,maxDefined:h}=s.getUserBounds();d&&(i=MR(Math.min(LR(a,l,c).lo,n?r:LR(t,l,s.getPixelForValue(c)).lo),0,r-1)),o=h?MR(Math.max(LR(a,s.axis,u,!0).hi+1,n?0:LR(t,l,s.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function KR(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const YR=e=>0===e||1===e,GR=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*fR/n),XR=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*fR/n)+1,QR={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*yR),easeOutSine:e=>Math.sin(e*yR),easeInOutSine:e=>-.5*(Math.cos(hR*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>YR(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>YR(e)?e:GR(e,.075,.3),easeOutElastic:e=>YR(e)?e:XR(e,.075,.3),easeInOutElastic(e){const t=.1125;return YR(e)?e:e<.5?.5*GR(2*e,t,.45):.5+.5*XR(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-QR.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*QR.easeInBounce(2*e):.5*QR.easeOutBounce(2*e-1)+.5};function ZR(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function JR(e){return ZR(e)?e:new VM(e)}function eD(e){return ZR(e)?e:new VM(e).saturate(.5).darken(.1).hexString()}const tD=["x","y","borderWidth","radius","tension"],nD=["color","borderColor","backgroundColor"];const rD=new Map;function iD(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=rD.get(n);return r||(r=new Intl.NumberFormat(e,t),rD.set(n,r)),r}(t,n).format(e)}const oD={values:e=>qM(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,o=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),o=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const s=xR(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),iD(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(xR(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?oD.numeric.call(this,e,t,n):""}};var sD={formatters:oD};const aD=Object.create(null),lD=Object.create(null);function cD(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function uD(e,t,n){return"string"===typeof t?rR(cD(e,t),n):rR(cD(e,""),t)}class dD{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>eD(t.backgroundColor),this.hoverBorderColor=(e,t)=>eD(t.borderColor),this.hoverColor=(e,t)=>eD(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return uD(this,e,t)}get(e){return cD(this,e)}describe(e,t){return uD(lD,e,t)}override(e,t){return uD(aD,e,t)}route(e,t,n,r){const i=cD(this,e),o=cD(this,n),s="_"+t;Object.defineProperties(i,{[s]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=o[r];return WM(e)?Object.assign({},t,e):GM(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach((e=>e(this)))}}var hD=new dD({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:nD},numbers:{type:"number",properties:tD}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function fD(e,t,n,r,i){let o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>r&&(r=o),r}function pD(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function mD(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function gD(e,t,n,r){yD(e,t,n,r,null)}function yD(e,t,n,r,i){let o,s,a,l,c,u,d,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*gR;if(f&&"object"===typeof f&&(o=f.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,fR):e.arc(n,r,m,0,fR),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=bR,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=bR,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,s=Math.cos(g+vR)*l,d=Math.cos(g+vR)*(i?i/2-c:l),a=Math.sin(g+vR)*l,h=Math.sin(g+vR)*(i?i/2-c:l),e.arc(n-d,r-a,c,g-hR,g-yR),e.arc(n+h,r-s,c,g-yR,g),e.arc(n+d,r+a,c,g,g+yR),e.arc(n-h,r+s,c,g+yR,g+hR),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=vR;case"rectRot":d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+h,r-s),e.lineTo(n+d,r+a),e.lineTo(n-h,r+s),e.closePath();break;case"crossRot":g+=vR;case"cross":d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+d,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"star":d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+d,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s),g+=vR,d=Math.cos(g)*(i?i/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+d,r+a),e.moveTo(n+h,r-s),e.lineTo(n-h,r+s);break;case"line":s=i?i/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(n-s,r-a),e.lineTo(n+s,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function vD(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function bD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function xD(e){e.restore()}function wD(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function _D(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function SD(e,t,n,r,i){if(i.strikethrough||i.underline){const o=e.measureText(r),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,u),e.lineTo(a,u),e.stroke()}}function ED(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function CD(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=qM(t)?t:[t],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),HM(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&ED(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),HM(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,n,r,o.maxWidth)),e.fillText(c,n,r,o.maxWidth),SD(e,n,r,c,o),r+=Number(i.lineHeight);e.restore()}function TD(e,t){const{x:n,y:r,w:i,h:o,radius:s}=t;e.arc(n+s.topLeft,r+s.topLeft,s.topLeft,1.5*hR,hR,!0),e.lineTo(n,r+o-s.bottomLeft),e.arc(n+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,hR,yR,!0),e.lineTo(n+i-s.bottomRight,r+o),e.arc(n+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,yR,0,!0),e.lineTo(n+i,r+s.topRight),e.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-yR,!0),e.lineTo(n+s.topLeft,r)}const jD=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,kD=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ND(e,t){const n=(""+e).match(jD);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const AD=e=>+e||0;function ID(e,t){const n={},r=WM(t),i=r?Object.keys(t):t,o=WM(e)?r?n=>GM(e[n],e[t[n]]):t=>e[t]:()=>e;for(const s of i)n[s]=AD(o(s));return n}function PD(e){return ID(e,{top:"y",right:"x",bottom:"y",left:"x"})}function OD(e){return ID(e,["topLeft","topRight","bottomLeft","bottomRight"])}function MD(e){const t=PD(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function RD(e,t){e=e||{},t=t||hD.font;let n=GM(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=GM(e.style,t.style);r&&!(""+r).match(kD)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:GM(e.family,t.family),lineHeight:ND(GM(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:GM(e.weight,t.weight),string:""};return i.string=function(e){return!e||HM(e.size)||HM(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function DD(e,t,n,r){let i,o,s,a=!0;for(i=0,o=e.length;i<o;++i)if(s=e[i],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),a=!1),void 0!==n&&qM(s)&&(s=s[n%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function LD(e,t){return Object.assign(Object.create(e),t)}function FD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=GD("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>FD([r,...e],t,i,n)};return new Proxy(o,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>$D(n,r,(()=>function(e,t,n,r){let i;for(const o of t)if(i=GD(VD(o,e),n),"undefined"!==typeof i)return zD(e,i)?KD(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>XD(e).includes(t),ownKeys:e=>XD(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function BD(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:UD(e,r),setContext:t=>BD(e,t,n,r),override:i=>BD(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>$D(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=e;let a=r[t];uR(a)&&s.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,s||r);a.delete(e),zD(e,l)&&(l=KD(i._scopes,i,e,l));return l}(t,a,e,n));qM(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;if("undefined"!==typeof o.index&&r(e))return t[o.index%t.length];if(WM(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=KD(r,i,e,l);t.push(BD(n,o,s&&s[e],a))}}return t}(t,a,e,s.isIndexable));zD(t,a)&&(a=BD(a,i,o&&o[t],s));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function UD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:uR(n)?n:()=>n,isIndexable:uR(r)?r:()=>r}}const VD=(e,t)=>e?e+lR(t):t,zD=(e,t)=>WM(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function $D(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function HD(e,t,n){return uR(e)?e(t,n):e}const qD=(e,t)=>!0===e?t:"string"===typeof e?aR(t,e):void 0;function WD(e,t,n,r,i){for(const o of t){const t=qD(n,o);if(t){e.add(t);const o=HD(t._fallback,n,i);if("undefined"!==typeof o&&o!==n&&o!==r)return o}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function KD(e,t,n,r){const i=t._rootScopes,o=HD(t._fallback,n,r),s=[...e,...i],a=new Set;a.add(r);let l=YD(a,s,n,o||n,r);return null!==l&&(("undefined"===typeof o||o===n||(l=YD(a,s,o,l,r),null!==l))&&FD(Array.from(a),[""],i,o,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(qM(i)&&WM(n))return n;return i||{}}(t,n,r))))}function YD(e,t,n,r,i){for(;n;)n=WD(e,t,n,r,i);return n}function GD(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function XD(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}const QD=Number.EPSILON||1e-14,ZD=(e,t)=>t<e.length&&!e[t].skip&&e[t],JD=e=>"x"===e?"y":"x";function eL(e,t,n,r){const i=e.skip?t:e,o=t,s=n.skip?t:n,a=AR(o,i),l=AR(s,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:o.x-d*(s.x-i.x),y:o.y-d*(s.y-i.y)},next:{x:o.x+h*(s.x-i.x),y:o.y+h*(s.y-i.y)}}}function tL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=JD(t),r=e.length,i=Array(r).fill(0),o=Array(r);let s,a,l,c=ZD(e,0);for(s=0;s<r;++s)if(a=l,l=c,c=ZD(e,s+1),l){if(c){const e=c[t]-l[t];i[s]=0!==e?(c[n]-l[n])/e:0}o[s]=a?c?wR(i[s-1])!==wR(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(e,t,n){const r=e.length;let i,o,s,a,l,c=ZD(e,0);for(let u=0;u<r-1;++u)l=c,c=ZD(e,u+1),l&&c&&(_R(t[u],0,QD)?n[u]=n[u+1]=0:(i=n[u]/t[u],o=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[u]=i*s*t[u],n[u+1]=o*s*t[u])))}(e,i,o),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=JD(n),i=e.length;let o,s,a,l=ZD(e,0);for(let c=0;c<i;++c){if(s=a,a=l,l=ZD(e,c+1),!a)continue;const i=a[n],u=a[r];s&&(o=(i-s[n])/3,a[`cp1${n}`]=i-o,a[`cp1${r}`]=u-o*t[c]),l&&(o=(l[n]-i)/3,a[`cp2${n}`]=i+o,a[`cp2${r}`]=u+o*t[c])}}(e,o,t)}function nL(e,t,n){return Math.max(Math.min(e,n),t)}function rL(e,t,n,r,i){let o,s,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)tL(e,i);else{let n=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)a=e[o],l=eL(n,a,e[Math.min(o+1,s-(r?0:1))%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,o,s,a=vD(e[0],t);for(n=0,r=e.length;n<r;++n)s=o,o=a,a=n<r-1&&vD(e[n+1],t),o&&(i=e[n],s&&(i.cp1x=nL(i.cp1x,t.left,t.right),i.cp1y=nL(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=nL(i.cp2x,t.left,t.right),i.cp2y=nL(i.cp2y,t.top,t.bottom)))}(e,n)}function iL(){return"undefined"!==typeof window&&"undefined"!==typeof document}function oL(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function sL(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const aL=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const lL=["top","right","bottom","left"];function cL(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=lL[i];r[o]=parseFloat(e[t+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function uL(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=aL(n),o="border-box"===i.boxSizing,s=cL(i,"padding"),a=cL(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:o}=r;let s,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,o,e.target))s=i,a=o;else{const e=t.getBoundingClientRect();s=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:s,y:a,box:l}}(e,n),d=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:f,height:p}=t;return o&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const dL=e=>Math.round(10*e)/10;function hL(e,t,n,r){const i=aL(e),o=cL(i,"margin"),s=sL(i.maxWidth,e,"clientWidth")||mR,a=sL(i.maxHeight,e,"clientHeight")||mR,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const o=e&&oL(e);if(o){const e=o.getBoundingClientRect(),s=aL(o),a=cL(s,"border","width"),l=cL(s,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,r=sL(s.maxWidth,o,"clientWidth"),i=sL(s.maxHeight,o,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||mR,maxHeight:i||mR}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=cL(i,"border","width"),t=cL(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-o.width),u=Math.max(0,r?c/r:u-o.height),c=dL(Math.min(c,s,l.maxWidth)),u=dL(Math.min(u,a,l.maxHeight)),c&&!u&&(u=dL(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=dL(Math.floor(u*r))),{width:c,height:u}}function fL(e,t,n){const r=t||1,i=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(e.currentDevicePixelRatio=r,s.height=i,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const pL=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};iL()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(zH){}return e}();function mL(e,t){const n=function(e,t){return aL(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function gL(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function yL(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function vL(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},s=gL(e,i,n),a=gL(i,o,n),l=gL(o,t,n),c=gL(s,a,n),u=gL(a,l,n);return gL(c,u,n)}function bL(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function xL(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function wL(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function _L(e){return"angle"===e?{between:OR,compare:IR,normalize:PR}:{between:RR,compare:(e,t)=>e-t,normalize:e=>e}}function SL(e){let{start:t,end:n,count:r,loop:i,style:o}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:o}}function EL(e,t,n){if(!n)return[e];const{property:r,start:i,end:o}=n,s=t.length,{compare:a,between:l,normalize:c}=_L(r),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:o}=n,{between:s,normalize:a}=_L(r),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&s(a(t[d%l][r]),i,o);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,y,v=!1,b=null;const x=()=>v||l(i,y,m)&&0!==a(i,y),w=()=>!v||0===a(o,m)||l(o,y,m);for(let _=u,S=u;_<=d;++_)g=t[_%s],g.skip||(m=c(g[r]),m!==y&&(v=l(m,i,o),null===b&&x()&&(b=0===a(m,i)?_:S),null!==b&&w()&&(p.push(SL({start:b,end:_,loop:h,count:s,style:f})),b=null),S=_,y=m));return null!==b&&p.push(SL({start:b,end:d,loop:h,count:s,style:f})),p}function CL(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const o=EL(r[i],e.points,t);o.length&&n.push(...o)}return n}function TL(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),o=jL(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=n.length,c=[];let u=o,d=t[0].start,h=d;function f(e,t,r,i){const o=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=o;for(;n[t%l].skip;)t+=o;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,d=t%l)}}for(const p of t){d=a?d:p.start;let e,t=n[d%l];for(h=d+1;h<=p.end;h++){const o=n[h%l];e=jL(r.setContext(LD(i,{type:"segment",p0:t,p1:o,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),kL(e,u)&&f(d,h-1,p.loop,u),t=o,u=e}d<h-1&&f(d,h-1,p.loop,u)}return c}(e,t,n,r):t}function jL(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function kL(e,t){if(!t)return!1;const n=[],r=function(e,t){return ZR(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}class NL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],o=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=zR.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(e),a=!0):(i[s]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var AL=new NL;const IL="transparent",PL={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=JR(e||IL),i=r.valid&&JR(t||IL);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class OL{constructor(e,t,n,r){const i=t[n];r=DD([e.to,r,i,e.from]);const o=DD([e.from,i,r]);this._active=!0,this._fn=e.fn||PL[e.type||typeof o],this._easing=QR[e.easing]||QR.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=DD([e.to,t,r,e.from]),this._from=DD([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||t<n),!this._active)return this._target[r]=s,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,s,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class ML{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!WM(e))return;const t=Object.keys(hD.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!WM(i))return;const o={};for(const e of t)o[e]=i[e];(qM(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,o)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(i[l]=u=new OL(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(AL.add(this._chart,n),!0):void 0}}function RL(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:i,end:r?i:o}}function DL(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function LL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,o="single"===r.mode;let s,a,l,c;if(null===t)return;let u=!1;for(s=0,a=i.length;s<a;++s){if(l=+i[s],l===n){if(u=!0,r.all)continue;break}c=e.values[l],KM(c)&&(o||0===t||wR(t)===wR(c))&&(t+=c)}return u||r.all?t:0}function FL(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function BL(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function UL(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function VL(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,c=s.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(o,s,r),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:o}=e;h=(e._stacks||(e._stacks={}))[c]=BL(i,u,n),h[a]=o,h._top=UL(h,s,!0,r.type),h._bottom=UL(h,s,!1,r.type);(h._visualValues||(h._visualValues={}))[a]=o}}function zL(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function $L(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const HL=e=>"reset"===e||"none"===e,qL=(e,t)=>t?e:Object.assign({},e);class WL{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=FL(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&$L(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=GM(n.xAxisID,zL(e,"x")),o=t.yAxisID=GM(n.yAxisID,zL(e,"y")),s=t.rAxisID=GM(n.rAxisID,zL(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,i,o,s),c=t.vAxisID=r(a,o,i,s);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&UR(this._data,this),e._stacked&&$L(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(WM(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",o="x"===r.axis?"x":"y",s=Object.keys(e),a=new Array(s.length);let l,c,u;for(l=0,c=s.length;l<c;++l)u=s[l],a[l]={[i]:u,[o]:e[u]};return a}(t,e)}else if(n!==t){if(n){UR(n,this);const e=this._cachedMeta;$L(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),BR.forEach((t=>{const n="_onData"+lR(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];const s=r.apply(this,i);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...i)})),s}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=FL(t.vScale,t),t.stack!==n.stack&&(r=!0,$L(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(VL(this,t._parsed),t._stacked=FL(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,s=i.axis;let a,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=qM(r[e])?this.parseArrayData(n,r,e,t):WM(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[s]||d&&l[s]<d[s];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(i()&&(u=!1),d=l);n._sorted=u}o&&VL(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:o}=e,s=i.axis,a=o.axis,l=i.getLabels(),c=i===o,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[s]:c||i.parse(l[f],f),[a]:o.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:o}=e,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],s[a]={x:i.parse(u[0],c),y:o.parse(u[1],c)};return s}parseObjectData(e,t,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:i.parse(aR(h,s),d),y:o.parse(aR(h,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,o=t[e.axis];return LL({keys:DL(r,!0),values:t._stacks[e.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let o=null===i?NaN:i;const s=r&&n._stacks[t.axis];r&&s&&(r.values=s,o=LL(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,s=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:DL(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let d,h;function f(){h=r[d];const t=h[s.axis];return!KM(h[e.axis])||c>t||u<t}for(d=0;d<o&&(f()||(this.updateRangeFromParsed(l,e,h,a),!i));++d);if(i)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r][e.axis],KM(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return WM(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(GM(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=RL(e,n),i=RL(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,s,a),c=s;c<s+a;++c){const t=r[c];t.hidden||(t.active&&l?o.push(t):t.draw(e,i))}for(c=0;c<o.length;++c)o[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return LD(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return LD(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,o=e+"-"+t,s=i[o],a=this.enableOptionSharing&&cR(n);if(s)return qL(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(hD.elements[e]),f=l.resolveNamedOptions(d,h,(()=>this.getContext(n,r,t)),u);return f.$shared&&(f.$shared=a,i[o]=Object.freeze(qL(f,a))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${t}`,s=i[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),o=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(o,this.getContext(e,n,t))}const l=new ML(r,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||HL(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:o}}updateElement(e,t,n,r){HL(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!HL(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[s,a,l]of this._syncList)this[s](a,l);this._syncList=[];const r=n.length,i=t.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,o=e+t;let s;const a=e=>{for(e.length+=t,s=e.length-1;s>=o;s--)e[s]=e[s-t]};for(a(i),s=e;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&$L(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class KL extends WL{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,o=this.chart._animationsDisabled;let{start:s,count:a}=WR(t,r,o);this._drawStart=s,this._drawCount=a,KR(t)&&(s=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(r,s,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=o.axis,h=s.axis,{spanGaps:f,segment:p}=this.options,m=ER(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],f=g?n:{};if(x<t||x>=y){f.skip=!0;continue}const v=this.getParsed(x),w=HM(v[h]),_=f[d]=o.getPixelForValue(v[d],x),S=f[h]=i||w?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,v,a):v[h],x);f.skip=isNaN(_)||isNaN(S)||w,f.stop=x>0&&Math.abs(v[d]-b[d])>m,p&&(f.parsed=v,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":r)),g||this.updateElement(n,x,f,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function YL(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class GL{static override(e){Object.assign(GL.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return YL()}parse(){return YL()}format(){return YL()}add(){return YL()}diff(){return YL()}startOf(){return YL()}endOf(){return YL()}}var XL=GL;function QL(e,t,n,r){const{controller:i,data:o,_sorted:s}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&s&&o.length){const e=a._reversePixels?FR:LR;if(!r)return e(o,t,n);if(i._sharedOptions){const r=o[0],i="function"===typeof r.getRange&&r.getRange(t);if(i){const r=e(o,t,n-i),s=e(o,t,n+i);return{lo:r.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function ZL(e,t,n,r,i){const o=e.getSortedVisibleDatasetMetas(),s=n[t];for(let a=0,l=o.length;a<l;++a){const{index:e,data:n}=o[a],{lo:l,hi:c}=QL(o[a],t,s,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function JL(e,t,n,r,i){const o=[];if(!i&&!e.isPointInArea(t))return o;return ZL(e,n,t,(function(n,s,a){(i||vD(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&o.push({element:n,datasetIndex:s,index:a})}),!0),o}function eF(e,t,n,r,i,o){let s=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return ZL(e,n,t,(function(n,c,u){const d=n.inRange(t.x,t.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!o||e.isPointInArea(h))&&!d)return;const f=a(t,h);f<l?(s=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&s.push({element:n,datasetIndex:c,index:u})})),s}function tF(e,t,n,r,i,o){return o||e.isPointInArea(t)?"r"!==n||r?eF(e,t,n,r,i,o):function(e,t,n,r){let i=[];return ZL(e,n,t,(function(e,n,o){const{startAngle:s,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=NR(e,{x:t.x,y:t.y});OR(l,s,a)&&i.push({element:e,datasetIndex:n,index:o})})),i}(e,t,n,i):[]}function nF(e,t,n,r,i){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return ZL(e,n,t,((e,r,l)=>{e[s]&&e[s](t[n],i)&&(o.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,i))})),r&&!a?[]:o}var rF={evaluateInteractionItems:ZL,modes:{index(e,t,n,r){const i=uL(t,e),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?JL(e,i,o,r,s):tF(e,i,o,!1,r,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=uL(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?JL(e,i,o,r,s):tF(e,i,o,!1,r,s);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>JL(e,uL(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=uL(t,e),o=n.axis||"xy",s=n.includeInvisible||!1;return tF(e,i,o,n.intersect,r,s)},x:(e,t,n,r)=>nF(e,uL(t,e),"x",n.intersect,r),y:(e,t,n,r)=>nF(e,uL(t,e),"y",n.intersect,r)}};const iF=["left","top","right","bottom"];function oF(e,t){return e.filter((e=>e.pos===t))}function sF(e,t){return e.filter((e=>-1===iF.indexOf(e.pos)&&e.box.axis===t))}function aF(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function lF(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!iF.includes(r))continue;const o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let o,s,a;for(o=0,s=e.length;o<s;++o){a=e[o];const{fullSize:s}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:s&&t.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:s&&t.availableHeight)}return n}function cF(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function uF(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function dF(e,t,n,r){const{pos:i,box:o}=n,s=e.maxPadding;if(!WM(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?o.height:o.width),n.size=t.size/t.count,e[i]+=n.size}o.getPadding&&uF(s,o.getPadding());const a=Math.max(0,t.outerWidth-cF(s,e,"left","right")),l=Math.max(0,t.outerHeight-cF(s,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hF(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function fF(e,t,n,r){const i=[];let o,s,a,l,c,u;for(o=0,s=e.length,c=0;o<s;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,hF(a.horizontal,t));const{same:s,other:d}=dF(t,n,a,r);c|=s&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&fF(i,t,n,r)||u}function pF(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function mF(e,t,n,r){const i=n.padding;let{x:o,y:s}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,o=l.size||e.height;cR(l.start)&&(s=l.start),e.fullSize?pF(e,i.left,s,n.outerWidth-i.right-i.left,o):pF(e,t.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=e.bottom}else{const r=t.h*c,s=l.size||e.width;cR(l.start)&&(o=l.start),e.fullSize?pF(e,o,i.top,s,n.outerHeight-i.bottom-i.top):pF(e,o,t.top+l.placed,s,r),l.start=o,l.placed+=r,o=e.right}}t.x=o,t.y=s}var gF={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=MD(e.options.layout.padding),o=Math.max(t-i.width,0),s=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,o,s,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:o,options:{stack:s,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return t}(e),n=aF(t.filter((e=>e.box.fullSize)),!0),r=aF(oF(t,"left"),!0),i=aF(oF(t,"right")),o=aF(oF(t,"top"),!0),s=aF(oF(t,"bottom")),a=sF(t,"x"),l=sF(t,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(s).concat(a),chartArea:oF(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(s).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;ZM(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},i);uF(h,MD(r));const f=Object.assign({maxPadding:h,w:o,h:s,x:i.left,y:i.top},i),p=lF(l.concat(c),d);fF(a.fullSize,f,d,p),fF(l,f,d,p),fF(c,f,d,p)&&fF(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),mF(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,mF(a.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ZM(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class yF{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class vF extends yF{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const bF="$chartjs",xF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wF=e=>null===e||""===e;const _F=!!pL&&{passive:!0};function SF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,_F)}function EF(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function CF(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||EF(n.addedNodes,r),t=t&&!EF(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function TF(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||EF(n.removedNodes,r),t=t&&!EF(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const jF=new Map;let kF=0;function NF(){const e=window.devicePixelRatio;e!==kF&&(kF=e,jF.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function AF(e,t,n){const r=e.canvas,i=r&&oL(r);if(!i)return;const o=$R(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),s=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||o(n,r)}));return s.observe(i),function(e,t){jF.size||window.addEventListener("resize",NF),jF.set(e,t)}(e,o),s}function IF(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){jF.delete(e),jF.size||window.removeEventListener("resize",NF)}(e)}function PF(e,t,n){const r=e.canvas,i=$R((t=>{null!==e.ctx&&n(function(e,t){const n=xF[e.type]||e.type,{x:r,y:i}=uL(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,_F)}(r,t,i),i}class OF extends yF{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[bF]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",wF(i)){const t=mL(e,"width");void 0!==t&&(e.width=t)}if(wF(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=mL(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[bF])return!1;const n=t[bF].initial;["height","width"].forEach((e=>{const r=n[e];HM(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[bF],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:CF,detach:TF,resize:AF}[t]||PF;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:IF,detach:IF,resize:IF}[t]||SF)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return hL(e,t,n,r)}isAttached(e){const t=e&&oL(e);return!(!t||!t.isConnected)}}class MF{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return ER(this.x)&&ER(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function RF(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>i)return function(e,t,n,r){let i,o=0,s=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===s&&(t.push(e[i]),o++,s=n[o*r])}(t,c,o,s/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const o=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let s=0,a=o.length-1;s<a;s++){const e=o[s];if(e>i)return e}return Math.max(i,1)}(o,t,i);if(s>0){let e,n;const r=s>1?Math.round((l-a)/(s-1)):null;for(DF(t,c,u,HM(r)?0:a-r,a),e=0,n=s-1;e<n;e++)DF(t,c,u,o[e],o[e+1]);return DF(t,c,u,l,HM(r)?t.length:l+r),c}return DF(t,c,u),c}function DF(e,t,n,r,i){const o=GM(r,0),s=Math.min(GM(i,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=o;c<0;)u++,c=Math.round(o+u*n);for(l=Math.max(o,0);l<s;l++)l===c&&(t.push(e[l]),u++,c=Math.round(o+u*n))}const LF=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,FF=(e,t)=>Math.min(t||e,e);function BF(e,t){const n=[],r=e.length/t,i=e.length;let o=0;for(;o<i;o+=r)n.push(e[Math.floor(o)]);return n}function UF(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),o=e._startPixel,s=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<o-a||c>s+a)))return c}function VF(e){return e.drawTicks?e.tickLength:0}function zF(e,t){if(!e.display)return 0;const n=RD(e.font,t),r=MD(e.padding);return(qM(e.text)?e.text.length:1)*n.lineHeight+r.height}function $F(e,t,n){let r=HR(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class HF extends MF{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=YM(e,Number.POSITIVE_INFINITY),t=YM(t,Number.NEGATIVE_INFINITY),n=YM(n,Number.POSITIVE_INFINITY),r=YM(r,Number.NEGATIVE_INFINITY),{min:YM(e,n),max:YM(t,r),minDefined:KM(e),maxDefined:KM(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),o||(r=Math.max(r,t.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:YM(n,YM(r,n)),max:YM(r,YM(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){QM(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,o=XM(t,(i-r)/2),s=(e,t)=>n&&0===e?0:e+t;return{min:s(r,-Math.abs(o)),max:s(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?BF(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=RF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){QM(this.options.afterUpdate,[this])}beforeSetDimensions(){QM(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){QM(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),QM(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){QM(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=QM(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){QM(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){QM(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=FF(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let o,s,a,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=MR(this.chart.width-u,0,this.maxWidth);o=e.offset?this.maxWidth/n:h/(n-1),u+6>o&&(o=h/(n-(e.offset?.5:1)),s=this.maxHeight-VF(e.grid)-t.padding-zF(e.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=jR(Math.min(Math.asin(MR((c.highest.height+6)/o,-1,1)),Math.asin(MR(s/a,-1,1))-Math.asin(MR(d/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){QM(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){QM(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=zF(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=VF(i)+o):(e.height=this.maxHeight,e.width=VF(i)+o),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:o}=this._getLabelSizes(),a=2*n.padding,l=TR(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const t=n.mirror?0:u*i.width+c*o.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*i.width+u*o.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===i?d=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+o)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){QM(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)HM(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=BF(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,o=[],s=[],a=Math.floor(t/FF(t,n));let l,c,u,d,h,f,p,m,g,y,v,b=0,x=0;for(l=0;l<t;l+=a){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=i[f]=i[f]||{data:{},gc:[]},m=h.lineHeight,g=y=0,HM(d)||qM(d)){if(qM(d))for(c=0,u=d.length;c<u;++c)v=d[c],HM(v)||qM(v)||(g=fD(r,p.data,p.gc,g,v),y+=m)}else g=fD(r,p.data,p.gc,g,d),y=m;o.push(g),s.push(y),b=Math.max(g,b),x=Math.max(y,x)}!function(e,t){ZM(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const w=o.indexOf(b),_=s.indexOf(x),S=e=>({width:o[e]||0,height:s[e]||0});return{first:S(0),last:S(t-1),widest:S(w),highest:S(_),widths:o,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return MR(e,-32768,32767)}(this._alignToPixels?pD(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return LD(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return LD(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=TR(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,s=i?i.widest.width+o:0,a=i?i.highest.height+o:0;return this.isHorizontal()?a*n>s*r?s/n:a/r:a*r<s*n?a/n:s/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:s}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=VF(i),d=[],h=s.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return pD(n,e,f)};let g,y,v,b,x,w,_,S,E,C,T,j;if("top"===o)g=m(this.bottom),w=this.bottom-u,S=g-p,C=m(e.top)+p,j=e.bottom;else if("bottom"===o)g=m(this.top),C=e.top,j=m(e.bottom)-p,w=g+p,S=this.top+u;else if("left"===o)g=m(this.right),x=this.right-u,_=g-p,E=m(e.left)+p,T=e.right;else if("right"===o)g=m(this.left),E=e.left,T=m(e.right)-p,x=g+p,_=this.left+u;else if("x"===t){if("center"===o)g=m((e.top+e.bottom)/2+.5);else if(WM(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}C=e.top,j=e.bottom,w=g+p,S=w+u}else if("y"===t){if("center"===o)g=m((e.left+e.right)/2);else if(WM(o)){const e=Object.keys(o)[0],t=o[e];g=m(this.chart.scales[e].getPixelForValue(t))}x=g-p,_=x-u,E=e.left,T=e.right}const k=GM(r.ticks.maxTicksLimit,c),N=Math.max(1,Math.ceil(c/k));for(y=0;y<c;y+=N){const e=this.getContext(y),t=i.setContext(e),r=s.setContext(e),o=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=UF(this,y,a),void 0!==v&&(b=pD(n,v,o),l?x=_=E=T=b:w=S=C=j=b,d.push({tx1:x,ty1:w,tx2:_,ty2:S,x1:E,y1:C,x2:T,y2:j,width:o,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,d=VF(n.grid),h=d+c,f=u?-c:h,p=-TR(this.labelRotation),m=[];let g,y,v,b,x,w,_,S,E,C,T,j,k="middle";if("top"===r)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(WM(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-h;else if(WM(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?k="top":"end"===a&&(k="bottom"));const N=this._getLabelSizes();for(g=0,y=s.length;g<y;++g){v=s[g],b=v.label;const e=i.setContext(this.getContext(g));S=this.getPixelForTick(g)+i.labelOffset,E=this._resolveTickFontOptions(g),C=E.lineHeight,T=qM(b)?b.length:1;const t=T/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,h=_;if(o?(x=S,"inner"===_&&(h=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),j="top"===r?"near"===l||0!==p?-T*C+C/2:"center"===l?-N.highest.height/2-t*C+C:-N.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?N.highest.height/2-t*C:N.highest.height-T*C,u&&(j*=-1),0===p||e.showLabelBackdrop||(x+=C/2*Math.sin(p))):(w=S,j=(1-T)*C/2),e.showLabelBackdrop){const t=MD(e.backdropPadding),n=N.heights[g],r=N.widths[g];let i=j-t.top,o=0-t.left;switch(k){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":o-=r/2;break;case"right":o-=r;break;case"inner":g===y-1?o-=r:g>0&&(o-=r/2)}d={left:o,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:E,textOffset:j,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:k,translation:[x,w],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-TR(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=e+i,s=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const s=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,o=r.length;i<o;++i){const e=r[i];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const s=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=pD(e,this.left,o)-o/2,c=pD(e,this.right,s)+s/2,u=d=a):(u=pD(e,this.top,o)-o/2,d=pD(e,this.bottom,s)+s/2,l=c=a),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&bD(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;CD(t,i.label,0,i.textOffset,n,e)}n&&xD(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=RD(n.font),o=MD(n.padding),s=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||WM(t)?(a+=o.bottom,qM(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:i,left:o,bottom:s,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,p=0;const m=s-i,g=a-o;if(e.isHorizontal()){if(h=qR(r,o,a),WM(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:LF(e,n,t);d=a-o}else{if(WM(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:LF(e,n,t);f=qR(r,s,i),p="left"===n?-yR:yR}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,a,t,s);CD(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:$F(s,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=GM(e.grid&&e.grid.z,-1),r=GM(e.border&&e.border.z,0);return this._isVisible()&&this.draw===HF.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=t.length;i<o;++i){const o=t[i];o[n]!==this.id||e&&o.type!==e||r.push(o)}return r}_resolveTickFontOptions(e){return RD(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qF{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=rR(Object.create(null),[n?hD.get(n):{},hD.get(t),e.defaults]);hD.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),o=[e].concat(r).join("."),s=t[n].split("."),a=s.pop(),l=s.join(".");hD.route(o,i,l,a)}))}(t,e.defaultRoutes);e.descriptors&&hD.describe(t,e.descriptors)}(e,o,n),this.override&&hD.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in hD[r]&&(delete hD[r][n],this.override&&delete aD[n])}}class WF{constructor(){this.controllers=new qF(WL,"datasets",!0),this.elements=new qF(MF,"elements"),this.plugins=new qF(Object,"plugins"),this.scales=new qF(HF,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):ZM(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=lR(e);QM(n["before"+r],[],n),t[e](n),QM(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var KF=new WF;class YF{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===QM(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){HM(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=GM(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(KF.plugins.items);for(let o=0;o<r.length;o++)n.push(KF.getPlugin(r[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const e=i[o];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:o}=t;const s=[],a=e.getContext();for(const l of i){const t=l.id,i=GF(n[t],r);null!==i&&s.push({plugin:l,options:XF(e.config,{plugin:l,local:o[t]},i,a)})}return s}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function GF(e,t){return t||!1!==e?!0===e?{}:e:null}function XF(e,t,n,r){let{plugin:i,local:o}=t;const s=e.pluginScopeKeys(i),a=e.getOptionScopes(n,s);return o&&i.defaults&&a.push(i.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function QF(e,t){const n=hD.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ZF(e){if("x"===e||"y"===e||"r"===e)return e}function JF(e){if(ZF(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const o of n){const t=o.axis||("top"===(i=o.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&ZF(e[0].toLowerCase());if(t)return t}var i;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function eB(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function tB(e,t){const n=aD[e.type]||{scales:{}},r=t.scales||{},i=QF(e.type,t),o=Object.create(null);return Object.keys(r).forEach((t=>{const s=r[t];if(!WM(s))return console.error(`Invalid scale configuration for scale: ${t}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=JF(t,s,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return eB(e,"x",n[0])||eB(e,"y",n[0])}return{}}(t,e),hD.scales[s.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,i),c=n.scales||{};o[t]=iR(Object.create(null),[{axis:a},s,c[a],c[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,s=n.indexAxis||QF(i,t),a=(aD[i]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),i=n[t+"AxisID"]||t;o[i]=o[i]||Object.create(null),iR(o[i],[{axis:t},r[i],a[e]])}))})),Object.keys(o).forEach((e=>{const t=o[e];iR(t,[hD.scales[t.type],hD.scale])})),o}function nB(e){const t=e.options||(e.options={});t.plugins=GM(t.plugins,{}),t.scales=tB(e,t)}function rB(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const iB=new Map,oB=new Set;function sB(e,t){let n=iB.get(e);return n||(n=t(),iB.set(e,n),oB.add(n)),n}const aB=(e,t,n)=>{const r=aR(t,n);void 0!==r&&e.add(r)};class lB{constructor(e){this._config=function(e){return(e=e||{}).data=rB(e.data),nB(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rB(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nB(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return sB(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return sB(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return sB(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return sB(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),s=o.get(t);if(s)return s;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>aB(a,e,t)))),t.forEach((e=>aB(a,r,e))),t.forEach((e=>aB(a,aD[i]||{},e))),t.forEach((e=>aB(a,hD,e))),t.forEach((e=>aB(a,lD,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),oB.has(t)&&o.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,aD[t]||{},hD.datasets[t]||{},{type:t},hD,lD]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:o,subPrefixes:s}=cB(this._resolverCache,e,r);let a=o;if(function(e,t){const{isScriptable:n,isIndexable:r}=UD(e);for(const i of t){const t=n(i),o=r(i),s=(o||t)&&e[i];if(t&&(uR(s)||uB(s))||o&&qM(s))return!0}return!1}(o,t)){i.$shared=!1;a=BD(o,n=uR(n)?n():n,this.createResolver(e,n,s))}for(const l of t)i[l]=a[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=cB(this._resolverCache,e,n);return WM(t)?BD(i,t,void 0,r):i}}function cB(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let o=r.get(i);if(!o){o={resolver:FD(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,o)}return o}const uB=e=>WM(e)&&Object.getOwnPropertyNames(e).some((t=>uR(e[t])));const dB=["top","bottom","left","right","chartArea"];function hB(e,t){return"top"===e||"bottom"===e||-1===dB.indexOf(e)&&"x"===t}function fB(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function pB(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),QM(n&&n.onComplete,[e],t)}function mB(e){const t=e.chart,n=t.options.animation;QM(n&&n.onProgress,[e],t)}function gB(e){return iL()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const yB={},vB=e=>{const t=gB(e);return Object.values(yB).filter((e=>e.canvas===t)).pop()};function bB(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function xB(e,t,n){return e.options.clip?e[n]:t[n]}class wB{static defaults=(()=>hD)();static instances=(()=>yB)();static overrides=(()=>aD)();static registry=(()=>KF)();static version="4.4.7";static getChart=(()=>vB)();static register(){KF.add(...arguments),_B()}static unregister(){KF.remove(...arguments),_B()}constructor(e,t){const n=this.config=new lB(t),r=gB(e),i=vB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!iL()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?vF:OF}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=$M(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new YF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),o.resizeDelay||0),this._dataChanges=[],yB[this.id]=this,s&&a?(AL.listen(this,"complete",pB),AL.listen(this,"progress",mB),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return HM(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return KF}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fL(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mD(this.canvas,this.ctx),this}stop(){return AL.stop(this),this}resize(e,t){AL.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,fL(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),QM(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){ZM(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=JF(e,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),ZM(i,(t=>{const i=t.options,o=i.id,s=JF(o,i),a=GM(i.type,t.dtype);void 0!==i.position&&hB(i.position,s)===hB(t.dposition)||(i.position=t.dposition),r[o]=!0;let l=null;if(o in n&&n[o].type===a)l=n[o];else{l=new(KF.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),ZM(r,((e,t)=>{e||delete n[t]})),ZM(n,(e=>{gF.configure(this,e,e.options),gF.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(fB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||QF(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=KF.getController(o),{datasetElementType:r,dataElementType:s}=hD.datasets[o];Object.assign(t,{dataElementType:KF.getElement(s),datasetElementType:r&&KF.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){ZM(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||ZM(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fB("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){ZM(this.scales,(e=>{gF.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);dR(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){bB(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!dR(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;gF.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],ZM(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,uR(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(AL.has(this)?this.attached&&!AL.running(this)&&AL.start(this):(this.draw(),pB({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:xB(n,t,"left"),right:xB(n,t,"right"),top:xB(r,t,"top"),bottom:xB(r,t,"bottom")}:t}(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&bD(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&xD(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return vD(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=rF.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=LD(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);cR(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),AL.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),mD(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete yB[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};ZM(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},t.isAttached(this.canvas)?s():o()}unbindEvents(){ZM(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},ZM(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,o,s,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=e.length;s<a;++s){o=e[s];const t=o&&this.getDatasetMeta(o.datasetIndex).controller;t&&t[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!JM(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),o=i(t,e),s=n?e:i(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,o=t,s=this._getActiveElements(e,r,n,o),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,QM(i.onHover,[e,s,this],this),a&&QM(i.onClick,[e,s,this],this));const c=!JM(s,r);return(c||t)&&(this._active=s,this._updateHoverStyles(s,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function _B(){return ZM(wB.instances,(e=>e._plugins.invalidate()))}function SB(e,t,n,r){const i=function(e){return ID(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),o=(n-t)/2,s=Math.min(o,r*t/2),a=e=>{const t=(n-Math.min(o,e))*r/2;return MR(e,0,Math.min(o,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:MR(i.innerStart,0,s),innerEnd:MR(i.innerEnd,0,s)}}function EB(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function CB(e,t,n,r,i,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*d-n/hR)/d)/2,g=l+m+f,y=i-m-f,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=SB(t,h,d,y-g),_=d-v,S=d-b,E=g+v/_,C=y-b/S,T=h+x,j=h+w,k=g+x/T,N=y-w/j;if(e.beginPath(),o){const t=(E+C)/2;if(e.arc(s,a,d,E,t),e.arc(s,a,d,t,C),b>0){const t=EB(S,C,s,a);e.arc(t.x,t.y,b,C,y+yR)}const n=EB(j,y,s,a);if(e.lineTo(n.x,n.y),w>0){const t=EB(j,N,s,a);e.arc(t.x,t.y,w,y+yR,N+Math.PI)}const r=(y-w/h+(g+x/h))/2;if(e.arc(s,a,h,y-w/h,r,!0),e.arc(s,a,h,r,g+x/h,!0),x>0){const t=EB(T,k,s,a);e.arc(t.x,t.y,x,k+Math.PI,g-yR)}const i=EB(_,g,s,a);if(e.lineTo(i.x,i.y),v>0){const t=EB(_,E,s,a);e.arc(t.x,t.y,v,g-yR,E)}}else{e.moveTo(s,a);const t=Math.cos(E)*d+s,n=Math.sin(E)*d+a;e.lineTo(t,n);const r=Math.cos(C)*d+s,i=Math.sin(C)*d+a;e.lineTo(r,i)}e.closePath()}function TB(e,t,n,r,i){const{fullCircles:o,startAngle:s,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(o){CB(e,t,n,r,p,i);for(let t=0;t<o;++t)e.stroke();isNaN(a)||(p=s+(a%fR||fR))}f&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(o,s,a,r-c,n+c),l>i?(c=i/l,e.arc(o,s,l,n+c,r-c,!0)):e.arc(o,s,i,n+yR,r-yR),e.closePath(),e.clip()}(e,t,p),o||(CB(e,t,n,r,p,i),e.stroke())}class jB extends MF{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=NR(r,{x:e,y:t}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=GM(u,a-s),f=OR(i,s,a)&&s!==a,p=h>=fR||f,m=RR(o,l+d,c+d);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(o+s+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>fR?Math.floor(n/fR):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*r,Math.sin(s)*r);const a=r*(1-Math.sin(Math.min(hR,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:o,startAngle:s,circumference:a}=t;let l=t.endAngle;if(o){CB(e,t,n,r,l,i);for(let t=0;t<o;++t)e.fill();isNaN(a)||(l=s+(a%fR||fR))}CB(e,t,n,r,l,i),e.fill()}(e,this,a,i,o),TB(e,this,a,i,o),e.restore()}}function kB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=GM(n.borderCapStyle,t.borderCapStyle),e.setLineDash(GM(n.borderDash,t.borderDash)),e.lineDashOffset=GM(n.borderDashOffset,t.borderDashOffset),e.lineJoin=GM(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=GM(n.borderWidth,t.borderWidth),e.strokeStyle=GM(n.borderColor,t.borderColor)}function NB(e,t,n){e.lineTo(n.x,n.y)}function AB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:o=r-1}=n,{start:s,end:a}=t,l=Math.max(i,s),c=Math.min(o,a),u=i<s&&o<s||i>a&&o>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function IB(e,t,n,r){const{points:i,options:o}=t,{count:s,start:a,loop:l,ilen:c}=AB(i,n,r),u=function(e){return e.stepped?wD:e.tension||"monotone"===e.cubicInterpolationMode?_D:NB}(o);let d,h,f,{move:p=!0,reverse:m}=r||{};for(d=0;d<=c;++d)h=i[(a+(m?c-d:d))%s],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):u(e,f,h,m,o.stepped),f=h);return l&&(h=i[(a+(m?c:0))%s],u(e,f,h,m,o.stepped)),!!l}function PB(e,t,n,r){const i=t.points,{count:o,start:s,ilen:a}=AB(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,p,m,g=0,y=0;const v=e=>(s+(c?a-e:e))%o,b=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(d=i[v(0)],e.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=i[v(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<f?f=n:n>p&&(p=n),g=(y*g+t)/++y):(b(),e.lineTo(t,n),h=r,y=0,f=p=n),m=n}b()}function OB(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?PB:IB}const MB="function"===typeof Path2D;function RB(e,t,n,r){MB&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),kB(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:o}=t,s=OB(t);for(const a of i)kB(e,o,a.style),e.beginPath(),s(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class DB extends MF{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;rL(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const o=!!e._loop,{start:s,end:a}=function(e,t,n,r){let i=0,o=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(o+=i);o>i&&e[o%t].skip;)o--;return o%=t,{start:i,end:o}}(n,i,o,r);return TL(e,!0===r?[{start:s,end:a,loop:o}]:function(e,t,n,r){const i=e.length,o=[];let s,a=t,l=e[t];for(s=t+1;s<=n;++s){const n=e[s%i];n.skip||n.stop?l.skip||(r=!1,o.push({start:t%i,end:(s-1)%i,loop:r}),t=a=n.stop?s:null):(a=s,l.skip&&(t=s)),l=n}return null!==a&&o.push({start:t%i,end:a%i,loop:r}),o}(n,s,a<s?a+i:a,!!e._fullLoop&&0===s&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,o=CL(this,{property:t,start:r,end:r});if(!o.length)return;const s=[],a=function(e){return e.stepped?yL:e.tension||"monotone"===e.cubicInterpolationMode?vL:gL}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],d=i[c],h=i[u];if(d===h){s.push(d);continue}const f=a(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],s.push(f)}return 1===s.length?s[0]:s}pathSegment(e,t,n){return OB(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=OB(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const s of r)o&=i(e,this,s,{start:t,end:t+n-1});return!!o}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),RB(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function LB(e,t,n,r){const i=e.options,{[n]:o}=e.getProps([n],r);return Math.abs(t-o)<i.radius+i.hitRadius}class FB extends MF{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return LB(this,e,"x",t)}inYRange(e,t){return LB(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!vD(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,gD(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function BB(e,t){const{x:n,y:r,base:i,width:o,height:s}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=s/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=o/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function UB(e,t,n,r){return e?0:MR(t,n,r)}function VB(e){const t=BB(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,o=PD(r);return{t:UB(i.top,o.top,0,n),r:UB(i.right,o.right,0,t),b:UB(i.bottom,o.bottom,0,n),l:UB(i.left,o.left,0,t)}}(e,n/2,r/2),o=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=OD(i),s=Math.min(t,n),a=e.borderSkipped,l=r||WM(i);return{topLeft:UB(!l||a.top||a.left,o.topLeft,0,s),topRight:UB(!l||a.top||a.right,o.topRight,0,s),bottomLeft:UB(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:UB(!l||a.bottom||a.right,o.bottomRight,0,s)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:o},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function zB(e,t,n,r){const i=null===t,o=null===n,s=e&&!(i&&o)&&BB(e,r);return s&&(i||RR(t,s.left,s.right))&&(o||RR(n,s.top,s.bottom))}function $B(e,t){e.rect(t.x,t.y,t.w,t.h)}function HB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,o=(e.x+e.w!==n.x+n.w?t:0)-r,s=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+o,h:e.h+s,radius:e.radius}}class qB extends MF{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=VB(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?TD:$B;var a;e.save(),o.w===i.w&&o.h===i.h||(e.beginPath(),s(e,HB(o,t,i)),e.clip(),s(e,HB(i,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,HB(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return zB(this,e,t,n)}inXRange(e,t){return zB(this,e,null,t)}inYRange(e,t){return zB(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}const WB=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class KB extends MF{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=QM(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=RD(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=WB(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,i,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,r,s,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let u=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*s>o)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+s})),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-e;let u=s,d=0,h=0,f=0,p=0;return this.legendItems.forEach(((e,o)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const o=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),s=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=YB(t,n));return r}(i,r,t.lineHeight);return{itemWidth:o,itemHeight:s}}(n,t,i,e,r);o>0&&h+g+2*s>c&&(u+=d+s,l.push({width:d,height:h}),f+=d+s,p++,d=h=0),a[o]={left:f,top:h,col:p,width:m,height:g},d=Math.max(d,m),h+=g+s})),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,o=bL(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=qR(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,s=qR(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let i=0,s=qR(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,s=qR(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;bD(e,this),this._draw(),xD(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,s=hD.color,a=bL(e.rtl,this.left,this.width),l=RD(o.font),{padding:c}=o,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=WB(o,u),g=this.isHorizontal(),y=this._computeTitleHeight();h=g?{x:qR(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:qR(i,this.top+y+c,this.bottom-t[0].height),line:0},xL(this.ctx,e.textDirection);const v=m+c;this.legendItems.forEach(((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,_=a.textAlign(b.textAlign||(b.textAlign=o.textAlign)),S=f+d+w;let E=h.x,C=h.y;a.setWidth(this.width),g?x>0&&E+S+c>this.right&&(C=h.y+=v,h.line++,E=h.x=qR(i,this.left+c,this.right-n[h.line])):x>0&&C+v>this.bottom&&(E=h.x=E+t[h.line].width+c,h.line++,C=h.y=qR(i,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=GM(n.lineWidth,1);if(r.fillStyle=GM(n.fillStyle,s),r.lineCap=GM(n.lineCap,"butt"),r.lineDashOffset=GM(n.lineDashOffset,0),r.lineJoin=GM(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=GM(n.strokeStyle,s),r.setLineDash(GM(n.lineDash,[])),o.usePointStyle){const s={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(e,f/2);yD(r,s,l,t+d,o.pointStyleWidth&&f)}else{const o=t+Math.max((u-p)/2,0),s=a.leftForLtr(e,f),l=OD(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?TD(r,{x:s,y:o,w:f,h:p,radius:l}):r.rect(s,o,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(E),C,b),E=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,E+f+d,g?E+S:this.right,e.rtl),function(e,t,n){CD(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(E),C,b),g)h.x+=S+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=YB(b,e)+c}else h.y+=v})),wL(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=RD(t.font),r=MD(t.padding);if(!t.display)return;const i=bL(e.rtl,this.left,this.width),o=this.ctx,s=t.position,a=n.size/2,l=r.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=qR(e.align,u,this.right-d);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+qR(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=qR(s,u,u+d);o.textAlign=i.textAlign(HR(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,CD(o,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=RD(e.font),n=MD(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(RR(e,this.left,this.right)&&RR(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],RR(e,r.left,r.left+r.width)&&RR(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&QM(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&QM(t.onHover,[e,n,this],this)}else n&&QM(t.onClick,[e,n,this],this)}}function YB(e,t){return t*(e.text?e.text.length:0)}var GB={id:"legend",_element:KB,start(e,t,n){const r=e.legend=new KB({ctx:e.ctx,options:n,chart:e});gF.configure(e,r,n),gF.addBox(e,r)},stop(e){gF.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;gF.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=MD(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class XB extends MF{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=qM(n.text)?n.text.length:1;this._padding=MD(n.padding);const i=r*RD(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:o}=this,s=o.align;let a,l,c,u=0;return this.isHorizontal()?(l=qR(s,n,i),c=t+e,a=i-n):("left"===o.position?(l=n+e,c=qR(s,r,t),u=-.5*hR):(l=i-e,c=qR(s,t,r),u=.5*hR),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=RD(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);CD(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:a,textAlign:HR(t.align),textBaseline:"middle",translation:[i,o]})}}var QB={id:"title",_element:XB,start(e,t,n){!function(e,t){const n=new XB({ctx:e.ctx,options:t,chart:e});gF.configure(e,n,t),gF.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;gF.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;gF.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const ZB={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,o=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++o}}if(0===o||0===r.size)return!1;const s=[...r].reduce(((e,t)=>e+t))/r.size;return{x:s,y:i/o}},nearest(e,t){if(!e.length)return!1;let n,r,i,o=t.x,s=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=AR(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();o=e.x,s=e.y}return{x:o,y:s}}};function JB(e,t){return t&&(qM(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function eU(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function tU(e,t){const{element:n,datasetIndex:r,index:i}=t,o=e.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:e,label:s,parsed:o.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function nU(e,t){const n=e.chart.ctx,{body:r,footer:i,title:o}=e,{boxWidth:s,boxHeight:a}=t,l=RD(t.bodyFont),c=RD(t.titleFont),u=RD(t.footerFont),d=o.length,h=i.length,f=r.length,p=MD(t.padding);let m=p.height,g=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){m+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const b=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,ZM(e.title,b),n.font=l.string,ZM(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?s+2+t.boxPadding:0,ZM(r,(e=>{ZM(e.before,b),ZM(e.lines,b),ZM(e.after,b)})),v=0,n.font=u.string,ZM(e.footer,b),n.restore(),g+=p.width,{width:g,height:m}}function rU(e,t,n,r){const{x:i,width:o}=n,{width:s,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=s-o/2&&(c="right"),function(e,t,n,r){const{x:i,width:o}=r,s=n.caretSize+n.caretPadding;return"left"===e&&i+o+s>t.width||"right"===e&&i-o-s<0||void 0}(c,e,t,n)&&(c="center"),c}function iU(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||rU(e,t,n,r),yAlign:r}}function oU(e,t,n,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:l}=n,c=i+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=OD(s);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+i:"right"===a&&(p+=Math.max(d,f)+i),{x:MR(p,0,r.width-t.width),y:MR(m,0,r.height-t.height)}}function sU(e,t,n){const r=MD(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function aU(e){return JB([],eU(e))}function lU(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const cU={beforeTitle:zM,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:zM,beforeBody:zM,beforeLabel:zM,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return HM(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:zM,afterBody:zM,beforeFooter:zM,footer:zM,afterFooter:zM};function uU(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?cU[t].call(n,r):i}class dU extends MF{static positioners=(()=>ZB)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new ML(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,LD(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=uU(n,"beforeTitle",this,e),i=uU(n,"title",this,e),o=uU(n,"afterTitle",this,e);let s=[];return s=JB(s,eU(r)),s=JB(s,eU(i)),s=JB(s,eU(o)),s}getBeforeBody(e,t){return aU(uU(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return ZM(e,(e=>{const t={before:[],lines:[],after:[]},i=lU(n,e);JB(t.before,eU(uU(i,"beforeLabel",this,e))),JB(t.lines,uU(i,"label",this,e)),JB(t.after,eU(uU(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return aU(uU(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=uU(n,"beforeFooter",this,e),i=uU(n,"footer",this,e),o=uU(n,"afterFooter",this,e);let s=[];return s=JB(s,eU(r)),s=JB(s,eU(i)),s=JB(s,eU(o)),s}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],o=[];let s,a,l=[];for(s=0,a=t.length;s<a;++s)l.push(tU(this.chart,t[s]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),ZM(l,(t=>{const n=lU(e.callbacks,t);r.push(uU(n,"labelColor",this,t)),i.push(uU(n,"labelPointStyle",this,t)),o.push(uU(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const e=ZB[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const t=this._size=nU(this,n),s=Object.assign({},e,t),a=iU(this.chart,n,s),l=oU(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=OD(s),{x:d,y:h}=e,{width:f,height:p}=t;let m,g,y,v,b,x;return"center"===i?(b=h+p/2,"left"===r?(m=d,g=m-o,v=b+o,x=b-o):(m=d+f,g=m+o,v=b-o,x=b+o),y=m):(g="left"===r?d+Math.max(a,c)+o:"right"===r?d+f-Math.max(l,u)-o:this.caretX,"top"===i?(v=h,b=v-o,m=g-o,y=g+o):(v=h+p,b=v+o,m=g+o,y=g-o),x=v),{x1:m,x2:g,x3:y,y1:v,y2:b,y3:x}}drawTitle(e,t,n){const r=this.title,i=r.length;let o,s,a;if(i){const l=bL(n.rtl,this.x,this.width);for(e.x=sU(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",o=RD(n.titleFont),s=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,a=0;a<i;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,a+1===i&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,t,n,r,i){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=RD(i.bodyFont),u=sU(this,"left",i),d=r.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,gD(e,t,n,c),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,gD(e,t,n,c)}else{e.lineWidth=WM(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),s=OD(o.borderRadius);Object.values(s).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,TD(e,{x:t,y:f,w:l,h:a,radius:s}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),TD(e,{x:n,y:f+1,w:l-2,h:a-2,radius:s}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=o.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=RD(n.bodyFont);let d=u.lineHeight,h=0;const f=bL(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+i},m=f.textAlign(o);let g,y,v,b,x,w,_;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=sU(this,m,n),t.fillStyle=n.bodyColor,ZM(this.beforeBody,p),h=s&&"right"!==m?"center"===o?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(g=r[b],y=this.labelTextColors[b],t.fillStyle=y,ZM(g.before,p),v=g.lines,s&&v.length&&(this._drawColorBox(t,e,b,f,n),d=Math.max(u.lineHeight,a)),x=0,_=v.length;x<_;++x)p(v[x]),d=u.lineHeight;ZM(g.after,p)}h=0,d=u.lineHeight,ZM(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let o,s;if(i){const a=bL(n.rtl,this.x,this.width);for(e.x=sU(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",o=RD(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,s=0;s<i;++s)t.fillText(r[s],a.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:o}=this,{x:s,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=OD(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+u,a),"top"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+l-d,a),t.quadraticCurveTo(s+l,a,s+l,a+d),"center"===o&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(s+l,a+c-f),t.quadraticCurveTo(s+l,a+c,s+l-f,a+c),"bottom"===o&&this.drawCaret(e,t,n,r),t.lineTo(s+h,a+c),t.quadraticCurveTo(s,a+c,s,a+c-h),"center"===o&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(s,a+u),t.quadraticCurveTo(s,a,s+u,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=ZB[e.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=nU(this,e),s=Object.assign({},n,this._size),a=iU(t,e,s),l=oU(e,s,a,t);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=MD(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),xL(e,t.textDirection),i.y+=o.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),wL(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!JM(n,r),o=this._positionChanged(r,t);(i||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,t,n),s=this._positionChanged(o,e),a=t||!JM(o,i)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,o=ZB[i.position].call(this,e,t);return!1!==o&&(n!==o.x||r!==o.y)}}var hU={id:"tooltip",_element:dU,positioners:ZB,afterInit(e,t,n){n&&(e.tooltip=new dU({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cU},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function fU(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function pU(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class mU extends HF{static id="category";static defaults=(()=>({ticks:{callback:pU}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(HM(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:MR(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:fU(n,e,GM(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return pU.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function gU(e,t){const n=[],{bounds:r,step:i,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=i||1,f=c-1,{min:p,max:m}=t,g=!HM(o),y=!HM(s),v=!HM(l),b=(m-p)/(u+1);let x,w,_,S,E=SR((m-p)/f/h)*h;if(E<1e-14&&!g&&!y)return[{value:p},{value:m}];S=Math.ceil(m/E)-Math.floor(p/E),S>f&&(E=SR(S*E/f/h)*h),HM(a)||(x=Math.pow(10,a),E=Math.ceil(E*x)/x),"ticks"===r?(w=Math.floor(p/E)*E,_=Math.ceil(m/E)*E):(w=p,_=m),g&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((s-o)/i,E/1e3)?(S=Math.round(Math.min((s-o)/E,c)),E=(s-o)/S,w=o,_=s):v?(w=g?o:w,_=y?s:_,S=l-1,E=(_-w)/S):(S=(_-w)/E,S=_R(S,Math.round(S),E/1e3)?Math.round(S):Math.ceil(S));const C=Math.max(kR(E),kR(w));x=Math.pow(10,HM(a)?C:a),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let T=0;for(g&&(d&&w!==o?(n.push({value:o}),w<o&&T++,_R(Math.round((w+T*E)*x)/x,o,yU(o,b,e))&&T++):w<o&&T++);T<S;++T){const e=Math.round((w+T*E)*x)/x;if(y&&e>s)break;n.push({value:e})}return y&&d&&_!==s?n.length&&_R(n[n.length-1].value,s,yU(s,b,e))?n[n.length-1].value=s:n.push({value:s}):y&&_!==s||n.push({value:_}),n}function yU(e,t,n){let{horizontal:r,minRotation:i}=n;const o=TR(i),s=(r?Math.sin(o):Math.cos(o))||.001,a=.75*t*(""+e).length;return Math.min(t/s,a)}class vU extends HF{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return HM(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=e=>r=t?r:e,s=e=>i=n?i:e;if(e){const e=wR(r),t=wR(i);e<0&&t<0?s(0):e>0&&t>0&&o(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);s(i+t),e||o(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=gU({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&CR(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return iD(e,this.chart.options.locale,this.options.ticks.format)}}class bU extends vU{static id="linear";static defaults=(()=>({ticks:{callback:sD.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=KM(e)?e:0,this.max=KM(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=TR(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}sD.formatters.logarithmic;sD.formatters.numeric;const xU={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wU=Object.keys(xU);function _U(e,t){return e-t}function SU(e,t){if(HM(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:o}=e._parseOpts;let s=t;return"function"===typeof r&&r(s),KM(s)||("string"===typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&("week"!==i||!ER(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function EU(e,t,n,r){const i=wU.length;for(let o=wU.indexOf(e);o<i-1;++o){const e=xU[wU[o]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return wU[o]}return wU[i-1]}function CU(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=DR(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function TU(e,t,n){const r=[],i={},o=t.length;let s,a;for(0;s<o;++s)t[s],i[a]=s,r.push({value:a,major:!1});return 0!==o&&n?function(e,t,n,r){const i=e._adapter,o=+i.startOf(t[0].value,r),s=t[t.length-1].value;let a,l;for(o;a<=s;+i.add(a,1,r))n[a],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class jU extends HF{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new XL(e.adapters.date);r.init(t),iR(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:SU(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();function a(e){o||isNaN(e.min)||Math.min(r,e.min),s||isNaN(e.max)||Math.max(i,e.max)}o&&s||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),KM(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),KM(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(e[0],e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)0;for(;i>r&&e[i-1]>n;)0;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?EU(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let o=wU.length-1;o>=wU.indexOf(n);o--){const n=wU[o];if(xU[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return wU[n?wU.indexOf(n):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=wU.indexOf(e)+1,n=wU.length;t<n;++t)if(xU[wU[t]].common)return wU[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),TU(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(this.getDecimalForValue(n[0]),1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,this.getDecimalForValue(n[n.length-1]),1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const o=n.length<3?.5:.25;MR(r,0,o),MR(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||EU(i.minUnit,t,n,this._getLabelCapacity(t)),s=GM(r.ticks.stepSize,1),a="week"===o&&i.isoWeekday,l=ER(a)||!0===a,c={};let u,d,h=t;if(l&&+e.startOf(h,"isoWeek",a),+e.startOf(h,l?"day":o),e.diff(n,t,o)>1e5*s)throw new Error(t+" and "+n+" are too far apart with stepSize of "+s+" "+o);const f="data"===r.ticks.source&&this.getDataTimestamps();for(0;u<n;+e.add(u,s,o),d++)CU(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||CU(c,u,f),Object.keys(c).sort(_U).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,o=i.ticks.callback;if(o)return QM(o,[e,t,n],this);const s=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&s[a],u=l&&s[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(e.length;t<n;++t)e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=TR(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*o,h:n*o+s*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,TU(this,[e],this._majorUnit),r),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(r.length;e<t;++e)n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(r.length;t<n;++t)e.push(SU(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return VR(e.sort(_U))}}const kU="label";function NU(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function AU(e,t){e.labels=t}function IU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kU;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):{...t}}))}function PU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kU;const n={labels:[],datasets:[]};return AU(n,e.labels),IU(n,e.datasets,t),n}function OU(e,t){const{height:n=150,width:i=300,redraw:o=!1,datasetIdKey:s,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,p=(0,r.useRef)(null),m=(0,r.useRef)(null),g=()=>{p.current&&(m.current=new wB(p.current,{type:a,data:PU(l,s),options:c&&{...c},plugins:u}),NU(t,m.current))},y=()=>{NU(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,r.useEffect)((()=>{!o&&m.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,c)}),[o,c]),(0,r.useEffect)((()=>{!o&&m.current&&AU(m.current.config.data,l.labels)}),[o,l.labels]),(0,r.useEffect)((()=>{!o&&m.current&&l.datasets&&IU(m.current.config.data,l.datasets,s)}),[o,l.datasets]),(0,r.useEffect)((()=>{m.current&&(o?(y(),setTimeout(g)):m.current.update(h))}),[o,c,l.labels,l.datasets,h]),(0,r.useEffect)((()=>{m.current&&(y(),setTimeout(g))}),[a]),(0,r.useEffect)((()=>(g(),()=>y())),[]),r.createElement("canvas",{ref:p,role:"img",height:n,width:i,...f},d)}const MU=(0,r.forwardRef)(OU);function RU(e,t){return wB.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(MU,{...t,ref:n,type:e})))}const DU=RU("line",KL);wB.register(mU,bU,FB,DB,QB,hU,GB);const LU=e=>{let{icon:t,title:n,value:r,description:i}=e;return(0,E_.jsx)(pA.div,{whileHover:{scale:1.02},className:"bg-white p-6 rounded-xl shadow-sm",children:(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,E_.jsx)(t,{className:"w-6 h-6 text-indigo-600"})}),(0,E_.jsxs)("div",{className:"ml-4",children:[(0,E_.jsx)("p",{className:"text-sm font-medium text-gray-600",children:n}),(0,E_.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:r}),(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:i})]})]})})},FU=e=>{let{label:t,value:n,color:r,icon:i}=e;return(0,E_.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,E_.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,E_.jsx)(i,{className:"w-5 h-5",style:{color:r}}),(0,E_.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t})]}),(0,E_.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,E_.jsxs)("span",{className:"text-2xl font-semibold",style:{color:r},children:[n.toFixed(2)," kWh"]})}),(0,E_.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,E_.jsx)("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:n/10*100+"%",backgroundColor:r,boxShadow:`0 0 8px ${r}40`}})})]})},BU=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)("hour"),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"teachers"),t=await wm(e),r=new Set,o=[];t.docs.forEach((e=>{const t=e.data();t.roomNumber&&!r.has(t.roomNumber)&&(r.add(t.roomNumber),o.push({id:e.id,roomNumber:t.roomNumber,department:t.department||"Unknown"}))})),u(o.sort(((e,t)=>e.roomNumber.localeCompare(t.roomNumber)))),o.length>0&&!n&&i(o[0].roomNumber)}catch(py){console.error("Error fetching rooms:",py),TA().fire("Error","Failed to fetch rooms","error")}})()}),[]),(0,r.useEffect)((()=>{if(!n)return;(async()=>{try{const e=tm(gp(__,"energyUsage"),rm("classroomId","==",n),rm("timestamp",">",(()=>{const e=new Date;switch(o){case"hour":return new Date(e.getTime()-36e5);case"day":return new Date(e.getTime()-864e5);case"week":return new Date(e.getTime()-6048e5)}})())),r=Tm(e,(e=>{const n=e.docs.map((e=>({id:e.id,...e.data(),timestamp:e.data().timestamp.toDate()})));t(n),l(!1)}));return()=>r()}catch(py){console.error("Error fetching energy data:",py),TA().fire("Error","Failed to fetch energy data","error"),l(!1)}})()}),[n,o]);const f={labels:e.map((e=>e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}))),datasets:[{label:"Total Energy Consumption (kWh)",data:e.map((e=>e.consumptionKWh)),borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.5)",tension:.4}]},p=e.reduce(((e,t)=>e+t.consumptionKWh),0),m=p/(e.length||1),g=e.length>0?Math.max(...e.map((e=>e.consumptionKWh))):0;return(0,E_.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${d?"ml-20":"ml-64"} overflow-y-auto`,children:(0,E_.jsxs)("div",{className:"p-8",children:[(0,E_.jsxs)("div",{className:"mb-8",children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Energy Usage Analytics"}),(0,E_.jsx)("p",{className:"mt-2 text-gray-600",children:"Monitor and analyze classroom energy consumption"})]}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,E_.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,E_.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,E_.jsx)(ZO,{className:"w-5 h-5 inline-block mr-2 text-indigo-600"}),"Select Classroom"]}),c.length>0?(0,E_.jsx)("select",{value:n,onChange:e=>i(e.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2.5",children:c.map((e=>(0,E_.jsxs)("option",{value:e.roomNumber,children:["Room ",e.roomNumber," - ",e.department]},e.id)))}):(0,E_.jsxs)("div",{className:"flex items-center text-yellow-600",children:[(0,E_.jsx)(eM,{className:"w-5 h-5 mr-2"}),(0,E_.jsx)("span",{children:"No rooms available"})]})]}),(0,E_.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,E_.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,E_.jsx)(iO,{className:"w-5 h-5 inline-block mr-2 text-indigo-600"}),"Time Range"]}),(0,E_.jsx)("div",{className:"flex gap-3",children:["hour","day","week"].map((e=>(0,E_.jsx)("button",{onClick:()=>s(e),className:"flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-200 "+(o===e?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"hour"===e?"Last Hour":"day"===e?"Last 24 Hours":"Last Week"},e)))})]})]}),a?(0,E_.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,E_.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,E_.jsxs)(E_.Fragment,{children:[(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,E_.jsx)(LU,{icon:nM,title:"Total Consumption",value:`${p.toFixed(2)} kWh`,description:"Total energy used"}),(0,E_.jsx)(LU,{icon:fP,title:"Average Consumption",value:`${m.toFixed(2)} kWh`,description:"Average per reading"}),(0,E_.jsx)(LU,{icon:iM,title:"Peak Usage",value:`${g.toFixed(2)} kWh`,description:"Highest consumption"}),(0,E_.jsx)(LU,{icon:sM,title:"Readings",value:e.length,description:"Total data points"})]}),(0,E_.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm mb-8",children:(0,E_.jsx)("div",{className:"h-[400px]",children:(0,E_.jsx)(DU,{data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Energy Consumption Over Time",font:{size:16,weight:"bold"}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Energy (kWh)"}},x:{title:{display:!0,text:"Time"}}}}})})}),e.length>0&&(0,E_.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Device Energy Breakdown"}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,E_.jsx)(FU,{label:"Lighting",value:e[e.length-1].devices.lighting,color:"rgb(59, 130, 246)",icon:lM}),(0,E_.jsx)(FU,{label:"Projection",value:e[e.length-1].devices.projection,color:"rgb(16, 185, 129)",icon:fP}),(0,E_.jsx)(FU,{label:"Computers",value:e[e.length-1].devices.computers,color:"rgb(245, 158, 11)",icon:iM}),(0,E_.jsx)(FU,{label:"HVAC",value:e[e.length-1].devices.hvac,color:"rgb(239, 68, 68)",icon:sM})]})]})]})]})})]})};function UU(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some((t=>e.test(t.brand))))||e.test(window.navigator.userAgent))}function VU(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function zU(e){let t=null;return()=>(null==t&&(t=e()),t)}const $U=zU((function(){return VU(/^Mac/i)})),HU=zU((function(){return VU(/^iPhone/i)})),qU=zU((function(){return VU(/^iPad/i)||$U()&&navigator.maxTouchPoints>1})),WU=zU((function(){return HU()||qU()})),KU=(zU((function(){return $U()||WU()})),zU((function(){return UU(/AppleWebKit/i)&&!KU()})),zU((function(){return UU(/Chrome/i)}))),YU=zU((function(){return UU(/Android/i)}));zU((function(){return UU(/Firefox/i)}));const GU=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.ownerDocument)&&void 0!==t?t:document},XU=e=>{if(e&&"window"in e&&e.window===e)return e;return GU(e).defaultView||window};let QU=null,ZU=new Set,JU=new Map,eV=!1,tV=!1;const nV={Tab:!0,Escape:!0};function rV(e,t){for(let n of ZU)n(e,t)}function iV(e){eV=!0,function(e){return!(e.metaKey||!$U()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(QU="keyboard",rV("keyboard",e))}function oV(e){QU="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(eV=!0,rV("pointer",e))}function sV(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(YU()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(eV=!0,QU="virtual")}function aV(e){e.target!==window&&e.target!==document&&(eV||tV||(QU="virtual",rV("virtual",e)),eV=!1,tV=!1)}function lV(){eV=!1,tV=!0}function cV(e){if("undefined"===typeof window||JU.get(XU(e)))return;const t=XU(e),n=GU(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){eV=!0,r.apply(this,arguments)},n.addEventListener("keydown",iV,!0),n.addEventListener("keyup",iV,!0),n.addEventListener("click",sV,!0),t.addEventListener("focus",aV,!0),t.addEventListener("blur",lV,!1),"undefined"!==typeof PointerEvent?(n.addEventListener("pointerdown",oV,!0),n.addEventListener("pointermove",oV,!0),n.addEventListener("pointerup",oV,!0)):(n.addEventListener("mousedown",oV,!0),n.addEventListener("mousemove",oV,!0),n.addEventListener("mouseup",oV,!0)),t.addEventListener("beforeunload",(()=>{uV(e)}),{once:!0}),JU.set(t,{focus:r})}const uV=(e,t)=>{const n=XU(e),r=GU(e);t&&r.removeEventListener("DOMContentLoaded",t),JU.has(n)&&(n.HTMLElement.prototype.focus=JU.get(n).focus,r.removeEventListener("keydown",iV,!0),r.removeEventListener("keyup",iV,!0),r.removeEventListener("click",sV,!0),n.removeEventListener("focus",aV,!0),n.removeEventListener("blur",lV,!1),"undefined"!==typeof PointerEvent?(r.removeEventListener("pointerdown",oV,!0),r.removeEventListener("pointermove",oV,!0),r.removeEventListener("pointerup",oV,!0)):(r.removeEventListener("mousedown",oV,!0),r.removeEventListener("mousemove",oV,!0),r.removeEventListener("mouseup",oV,!0)),JU.delete(n))};function dV(){return"pointer"!==QU}"undefined"!==typeof document&&function(e){const t=GU(e);let n;"loading"!==t.readyState?cV(e):(n=()=>{cV(e)},t.addEventListener("DOMContentLoaded",n))}();const hV=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function fV(e,t,n){cV(),(0,r.useEffect)((()=>{let t=(t,r)=>{(function(e,t,n){var r;const i="undefined"!==typeof window?XU(null===n||void 0===n?void 0:n.target).HTMLInputElement:HTMLInputElement,o="undefined"!==typeof window?XU(null===n||void 0===n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,s="undefined"!==typeof window?XU(null===n||void 0===n?void 0:n.target).HTMLElement:HTMLElement,a="undefined"!==typeof window?XU(null===n||void 0===n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||(null===n||void 0===n?void 0:n.target)instanceof i&&!hV.has(null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.type)||(null===n||void 0===n?void 0:n.target)instanceof o||(null===n||void 0===n?void 0:n.target)instanceof s&&(null===n||void 0===n?void 0:n.target.isContentEditable))&&"keyboard"===t&&n instanceof a&&!nV[n.key])})(!!(null===n||void 0===n?void 0:n.isTextInput),t,r)&&e(dV())};return ZU.add(t),()=>{ZU.delete(t)}}),t)}const pV="undefined"!==typeof document?r.useLayoutEffect:()=>{};function mV(e){const t=(0,r.useRef)(null);return pV((()=>{t.current=e}),[e]),(0,r.useCallback)((function(){const e=t.current;return null===e||void 0===e?void 0:e(...arguments)}),[])}class gV{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function yV(e){let t=(0,r.useRef)({isFocused:!1,observer:null});pV((()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]);let n=mV((t=>{null===e||void 0===e||e(t)}));return(0,r.useCallback)((e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target,i=e=>{t.current.isFocused=!1,r.disabled&&n(new gV("blur",e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver((()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}})),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}}),[n])}function vV(e){let{isDisabled:t,onFocus:n,onBlur:i,onFocusChange:o}=e;const s=(0,r.useCallback)((e=>{if(e.target===e.currentTarget)return i&&i(e),o&&o(!1),!0}),[i,o]),a=yV(s),l=(0,r.useCallback)((e=>{const t=GU(e.target);e.target===e.currentTarget&&t.activeElement===e.target&&(n&&n(e),o&&o(!0),a(e))}),[o,n,a]);return{focusProps:{onFocus:!t&&(n||o||i)?l:void 0,onBlur:t||!i&&!o?void 0:s}}}function bV(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:i,onFocusWithinChange:o}=e,s=(0,r.useRef)({isFocusWithin:!1}),a=(0,r.useCallback)((e=>{s.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(e),o&&o(!1))}),[n,o,s]),l=yV(a),c=(0,r.useCallback)((e=>{s.current.isFocusWithin||document.activeElement!==e.target||(i&&i(e),o&&o(!0),s.current.isFocusWithin=!0,l(e))}),[i,o,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:a}}}function xV(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFocus:t=!1,isTextInput:n,within:i}=e,o=(0,r.useRef)({isFocused:!1,isFocusVisible:t||dV()}),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)((()=>o.current.isFocused&&o.current.isFocusVisible)),u=(0,r.useCallback)((()=>c(o.current.isFocused&&o.current.isFocusVisible)),[]),d=(0,r.useCallback)((e=>{o.current.isFocused=e,a(e),u()}),[u]);fV((e=>{o.current.isFocusVisible=e,u()}),[],{isTextInput:n});let{focusProps:h}=vV({isDisabled:i,onFocusChange:d}),{focusWithinProps:f}=bV({isDisabled:!i,onFocusWithinChange:d});return{isFocused:s,isFocusVisible:l,focusProps:i?f:h}}let wV=!1,_V=0;function SV(){wV=!0,setTimeout((()=>{wV=!1}),50)}function EV(e){"touch"===e.pointerType&&SV()}function CV(){if("undefined"!==typeof document)return"undefined"!==typeof PointerEvent?document.addEventListener("pointerup",EV):document.addEventListener("touchend",SV),_V++,()=>{_V--,_V>0||("undefined"!==typeof PointerEvent?document.removeEventListener("pointerup",EV):document.removeEventListener("touchend",SV))}}var TV=Object.defineProperty,jV=(e,t,n)=>(((e,t,n)=>{t in e?TV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let kV=new class{constructor(){jV(this,"current",this.detect()),jV(this,"handoffState","pending"),jV(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function NV(e){return kV.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function AV(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function IV(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i={current:!0};return AV((()=>{i.current&&n[0]()})),t.add((()=>{i.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=IV();return e(t),this.add((()=>t.dispose()))},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function PV(){let[e]=(0,r.useState)(IV);return(0,r.useEffect)((()=>()=>e.dispose()),[e]),e}let OV=(e,t)=>{kV.isServer?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)};function MV(e){let t=(0,r.useRef)(e);return OV((()=>{t.current=e}),[e]),t}let RV=function(e){let t=MV(e);return r.useCallback((function(){return t.current(...arguments)}),[t])};function DV(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,i]=(0,r.useReducer)((()=>({})),{}),o=(0,r.useMemo)((()=>function(e){if(null===e)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}(e)),[e,n]);return OV((()=>{if(!e)return;let t=new ResizeObserver(i);return t.observe(e),()=>{t.disconnect()}}),[e]),t?{width:`${o.width}px`,height:`${o.height}px`}:o}class LV extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}function FV(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];let a=t[e].call(n,...o);a&&(n=a,r.forEach((e=>e())))}}}function BV(e){return(0,r.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}let UV=new LV((()=>FV((()=>[]),{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(-1===t)return this;let n=this.slice();return n.splice(t,1),n}})));function VV(e,t){let n=UV.get(t),i=(0,r.useId)(),o=BV(n);if(OV((()=>{if(e)return n.dispatch("ADD",i),()=>n.dispatch("REMOVE",i)}),[n,e]),!e)return!1;let s=o.indexOf(i),a=o.length;return-1===s&&(s=a,a+=1),s===a-1}let zV=new Map,$V=new Map;function HV(e){var t;let n=null!=(t=$V.get(e))?t:0;return $V.set(e,n+1),0!==n||(zV.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>qV(e)}function qV(e){var t;let n=null!=(t=$V.get(e))?t:1;if(1===n?$V.delete(e):$V.set(e,n-1),1!==n)return;let r=zV.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,zV.delete(e))}function WV(e){let{allowed:t,disallowed:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=VV(e,"inert-others");OV((()=>{var e,i;if(!r)return;let o=IV();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&o.add(HV(t));let s=null!=(i=null==t?void 0:t())?i:[];for(let t of s){if(!t)continue;let e=NV(t);if(!e)continue;let n=t.parentElement;for(;n&&n!==e.body;){for(let e of n.children)s.some((t=>e.contains(t)))||o.add(HV(e));n=n.parentElement}}return o.dispose}),[r,t,n])}function KV(e,t){if(e in t){let o=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof o?o(...r):o}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,KV),o}let YV=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(","),GV=["[data-autofocus]"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var XV=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(XV||{}),QV=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(QV||{}),ZV=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(ZV||{});function JV(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(YV)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var ez=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ez||{});function tz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return e!==(null==(n=NV(e))?void 0:n.body)&&KV(t,{0:()=>e.matches(YV),1(){let t=e;for(;null!==t;){if(t.matches(YV))return!0;t=t.parentElement}return!1}})}function nz(e){let t=NV(e);IV().nextFrame((()=>{t&&!tz(t.activeElement,0)&&function(e){null==e||e.focus({preventScroll:!0})}(e)}))}var rz=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(rz||{});"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let iz=["textarea","input"].join(",");function oz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function sz(e,t){return function(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?oz(e):e:64&t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(GV)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}(e):JV(e);i.length>0&&s.length>1&&(s=s.filter((e=>!i.some((t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))))),r=null!=r?r:o.activeElement;let a,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,s.indexOf(r))-1;if(4&t)return Math.max(0,s.indexOf(r))+1;if(8&t)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},d=0,h=s.length;do{if(d>=h||d+h<=0)return 0;let e=c+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}a=s[e],null==a||a.focus(u),d+=l}while(a!==o.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,iz))&&n}(a)&&a.select(),2}(JV(),t,{relativeTo:e})}function az(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function lz(){return az()||/Android/gi.test(window.navigator.userAgent)}function cz(e,t,n,i){let o=MV(n);(0,r.useEffect)((()=>{if(e)return document.addEventListener(t,n,i),()=>document.removeEventListener(t,n,i);function n(e){o.current(e)}}),[e,t,i])}function uz(e,t,n){let i=VV(e,"outside-click"),o=MV(n),s=(0,r.useCallback)((function(e,n){if(e.defaultPrevented)return;let r=n(e);if(null===r||!r.getRootNode().contains(r)||!r.isConnected)return;let i=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of i)if(null!==t&&(t.contains(r)||e.composed&&e.composedPath().includes(t)))return;return!tz(r,ez.Loose)&&-1!==r.tabIndex&&e.preventDefault(),o.current(e,r)}),[o,t]),a=(0,r.useRef)(null);cz(i,"pointerdown",(e=>{var t,n;a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),cz(i,"mousedown",(e=>{var t,n;a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),cz(i,"click",(e=>{lz()||a.current&&(s(e,(()=>a.current)),a.current=null)}),!0);let l=(0,r.useRef)({x:0,y:0});cz(i,"touchstart",(e=>{l.current.x=e.touches[0].clientX,l.current.y=e.touches[0].clientY}),!0),cz(i,"touchend",(e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-l.current.x)>=30||Math.abs(n-l.current.y)>=30))return s(e,(()=>e.target instanceof HTMLElement?e.target:null))}),!0),function(e,t,n,i){let o=MV(n);(0,r.useEffect)((()=>{if(e)return window.addEventListener(t,n,i),()=>window.removeEventListener(t,n,i);function n(e){o.current(e)}}),[e,t,i])}(i,"blur",(e=>s(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}function dz(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)((()=>NV(...t)),[...t])}function hz(e,t){return(0,r.useMemo)((()=>{var n;if(e.type)return e.type;let r=null!=(n=e.as)?n:"button";return"string"==typeof r&&"button"===r.toLowerCase()||"BUTTON"===(null==t?void 0:t.tagName)&&!t.hasAttribute("type")?"button":void 0}),[e.type,e.as,t])}function fz(){let e;return{before(t){let{doc:n}=t;var r;let i=n.documentElement,o=null!=(r=n.defaultView)?r:window;e=Math.max(0,o.innerWidth-i.clientWidth)},after(t){let{doc:n,d:r}=t,i=n.documentElement,o=Math.max(0,i.clientWidth-i.offsetWidth),s=Math.max(0,e-o);r.style(i,"paddingRight",`${s}px`)}}}function pz(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let mz=FV((()=>new Map),{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:IV(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT(e){let{doc:t,d:n,meta:r}=e,i={doc:t,d:n,meta:pz(r)},o=[az()?{before(e){let{doc:t,d:n,meta:r}=e;function i(e){return r.containers.flatMap((e=>e())).some((t=>t.contains(e)))}n.microTask((()=>{var e;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let e=IV();e.style(t.documentElement,"scrollBehavior","auto"),n.add((()=>n.microTask((()=>e.dispose()))))}let r=null!=(e=window.scrollY)?e:window.pageYOffset,o=null;n.addEventListener(t,"click",(e=>{if(e.target instanceof HTMLElement)try{let n=e.target.closest("a");if(!n)return;let{hash:r}=new URL(n.href),s=t.querySelector(r);s&&!i(s)&&(o=s)}catch{}}),!0),n.addEventListener(t,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(i(e.target)){let t=e.target;for(;t.parentElement&&i(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")})),n.addEventListener(t,"touchmove",(e=>{if(e.target instanceof HTMLElement){if("INPUT"===e.target.tagName)return;if(i(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}}),{passive:!1}),n.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;r!==t&&window.scrollTo(0,r),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)}))}))}}:{},fz(),{before(e){let{doc:t,d:n}=e;n.style(t.documentElement,"overflow","hidden")}}];o.forEach((e=>{let{before:t}=e;return null==t?void 0:t(i)})),o.forEach((e=>{let{after:t}=e;return null==t?void 0:t(i)}))},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}});function gz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>({containers:[]}),r=BV(mz),i=t?r.get(t):void 0,o=!!i&&i.count>0;OV((()=>{if(t&&e)return mz.dispatch("PUSH",t,n),()=>mz.dispatch("POP",t,n)}),[e,t])}(VV(e,"scroll-lock"),t,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}}))}mz.subscribe((()=>{let e=mz.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&mz.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&mz.dispatch("TEARDOWN",n)}}));let yz=Symbol();function vz(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=(0,r.useRef)(t);(0,r.useEffect)((()=>{i.current=t}),[t]);let o=RV((e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return t.every((e=>null==e||(null==e?void 0:e[yz])))?void 0:o}let bz=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function xz(e){var t,n;let r=null!=(t=e.innerText)?t:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let o=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),o=!0;let s=o?null!=(n=i.innerText)?n:"":r;return bz.test(s)&&(s=s.replace(bz,"")),s}function wz(e){let t=(0,r.useRef)(""),n=(0,r.useRef)("");return RV((()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let o=function(e){let t=e.getAttribute("aria-label");if("string"==typeof t)return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let e=n.split(" ").map((e=>{let t=document.getElementById(e);if(t){let e=t.getAttribute("aria-label");return"string"==typeof e?e.trim():xz(t).trim()}return null})).filter(Boolean);if(e.length>0)return e.join(", ")}return xz(e).trim()}(r).trim().toLowerCase();return t.current=i,n.current=o,o}))}function _z(e){return[e.screenX,e.screenY]}var Sz,Ez;"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(Sz=null==process?void 0:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDQIMqO4bJ-k4-pjjGnHGwCbCYUFUQe7Hw",REACT_APP_FIREBASE_APP_ID:"1:300630412358:web:44afc1a224507ccb764e47",REACT_APP_FIREBASE_AUTH_DOMAIN:"smartecolock.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://smartecolock-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-PNBNJ39FE0",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"300630412358",REACT_APP_FIREBASE_PROJECT_ID:"smartecolock",REACT_APP_FIREBASE_STORAGE_BUCKET:"smartecolock.firebasestorage.app",REACT_APP_GEMINI_API_KEY:"AIzaSyBYLXhvqwNsxNzMAMcxBlnAulcFOhNQhEk"})?void 0:Sz.NODE_ENV)&&"undefined"==typeof(null==(Ez=null==Element?void 0:Element.prototype)?void 0:Ez.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join("\n")),[]});var Cz=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Cz||{});function Tz(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}function jz(e,t,n,i){let[o,s]=(0,r.useState)(n),{hasFlag:a,addFlag:l,removeFlag:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,n]=(0,r.useState)(e),i=(0,r.useCallback)((e=>n(e)),[t]),o=(0,r.useCallback)((e=>n((t=>t|e))),[t]),s=(0,r.useCallback)((e=>(t&e)===e),[t]),a=(0,r.useCallback)((e=>n((t=>t&~e))),[n]),l=(0,r.useCallback)((e=>n((t=>t^e))),[n]);return{flags:t,setFlag:i,addFlag:o,hasFlag:s,removeFlag:a,toggleFlag:l}}(e&&o?3:0),u=(0,r.useRef)(!1),d=(0,r.useRef)(!1),h=PV();return OV((()=>{var r;if(e)return n&&s(!0),t?(null==(r=null==i?void 0:i.start)||r.call(i,n),function(e,t){let{prepare:n,run:r,done:i,inFlight:o}=t,s=IV();return function(e,t){let{inFlight:n,prepare:r}=t;if(null!=n&&n.current)return void r();let i=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=i}(e,{prepare:n,inFlight:o}),s.nextFrame((()=>{r(),s.requestAnimationFrame((()=>{s.add(function(e,t){var n,r;let i=IV();if(!e)return i.dispose;let o=!1;i.add((()=>{o=!0}));let s=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter((e=>e instanceof CSSTransition)))?r:[];return 0===s.length?(t(),i.dispose):(Promise.allSettled(s.map((e=>e.finished))).then((()=>{o||t()})),i.dispose)}(e,i))}))})),s.dispose}(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){d.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var e;d.current&&"function"==typeof t.getAnimations&&t.getAnimations().length>0||(u.current=!1,c(7),n||s(!1),null==(e=null==i?void 0:i.end)||e.call(i,n))}})):void(n&&l(3))}),[e,n,t,h]),e?[o,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function kz(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}const Nz=Math.min,Az=Math.max,Iz=Math.round,Pz=Math.floor,Oz=e=>({x:e,y:e}),Mz={left:"right",right:"left",bottom:"top",top:"bottom"},Rz={start:"end",end:"start"};function Dz(e,t,n){return Az(e,Nz(t,n))}function Lz(e,t){return"function"===typeof e?e(t):e}function Fz(e){return e.split("-")[0]}function Bz(e){return e.split("-")[1]}function Uz(e){return"x"===e?"y":"x"}function Vz(e){return"y"===e?"height":"width"}function zz(e){return["top","bottom"].includes(Fz(e))?"y":"x"}function $z(e){return Uz(zz(e))}function Hz(e){return e.replace(/start|end/g,(e=>Rz[e]))}function qz(e){return e.replace(/left|right|bottom|top/g,(e=>Mz[e]))}function Wz(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Kz(){return"undefined"!==typeof window}function Yz(e){return Qz(e)?(e.nodeName||"").toLowerCase():"#document"}function Gz(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Xz(e){var t;return null==(t=(Qz(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Qz(e){return!!Kz()&&(e instanceof Node||e instanceof Gz(e).Node)}function Zz(e){return!!Kz()&&(e instanceof Element||e instanceof Gz(e).Element)}function Jz(e){return!!Kz()&&(e instanceof HTMLElement||e instanceof Gz(e).HTMLElement)}function e$(e){return!(!Kz()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Gz(e).ShadowRoot)}function t$(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=a$(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function n$(e){return["table","td","th"].includes(Yz(e))}function r$(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(zH){return!1}}))}function i$(e){const t=o$(),n=Zz(e)?a$(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function o$(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function s$(e){return["html","body","#document"].includes(Yz(e))}function a$(e){return Gz(e).getComputedStyle(e)}function l$(e){return Zz(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function c$(e){if("html"===Yz(e))return e;const t=e.assignedSlot||e.parentNode||e$(e)&&e.host||Xz(e);return e$(t)?t.host:t}function u$(e){const t=c$(e);return s$(t)?e.ownerDocument?e.ownerDocument.body:e.body:Jz(t)&&t$(t)?t:u$(t)}function d$(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=u$(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=Gz(i);if(o){const e=h$(s);return t.concat(s,s.visualViewport||[],t$(i)?i:[],e&&n?d$(e):[])}return t.concat(i,d$(i,[],n))}function h$(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function f$(e,t,n){let{reference:r,floating:i}=e;const o=zz(t),s=$z(t),a=Vz(s),l=Fz(t),c="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Bz(t)){case"start":f[s]-=h*(n&&c?-1:1);break;case"end":f[s]+=h*(n&&c?-1:1)}return f}async function p$(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Lz(t,e),p=function(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(f),m=a[h?"floating"===d?"reference":"floating":d],g=Wz(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),b=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},x=Wz(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-x.top+p.top)/b.y,bottom:(x.bottom-g.bottom+p.bottom)/b.y,left:(g.left-x.left+p.left)/b.x,right:(x.right-g.right+p.right)/b.x}}function m$(e){const t=a$(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Jz(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=Iz(n)!==o||Iz(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function g$(e){return Zz(e)?e:e.contextElement}function y$(e){const t=g$(e);if(!Jz(t))return Oz(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=m$(t);let s=(o?Iz(n.width):n.width)/r,a=(o?Iz(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const v$=Oz(0);function b$(e){const t=Gz(e);return o$()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:v$}function x$(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=g$(e);let s=Oz(1);t&&(r?Zz(r)&&(s=y$(r)):s=y$(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Gz(e))&&t}(o,n,r)?b$(o):Oz(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const e=Gz(o),t=r&&Zz(r)?Gz(r):r;let n=e,i=h$(n);for(;i&&r&&t!==n;){const e=y$(i),t=i.getBoundingClientRect(),r=a$(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=s,n=Gz(i),i=h$(n)}}return Wz({width:u,height:d,x:l,y:c})}function w$(e,t){const n=l$(e).scrollLeft;return t?t.left+n:x$(Xz(e)).left+n}function _$(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:w$(e,r)),y:r.top+t.scrollTop}}function S$(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Gz(e),r=Xz(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=o$();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=Xz(e),n=l$(e),r=e.ownerDocument.body,i=Az(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Az(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+w$(e);const a=-n.scrollTop;return"rtl"===a$(r).direction&&(s+=Az(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(Xz(e));else if(Zz(t))r=function(e,t){const n=x$(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Jz(e)?y$(e):Oz(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=b$(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Wz(r)}function E$(e,t){const n=c$(e);return!(n===t||!Zz(n)||s$(n))&&("fixed"===a$(n).position||E$(n,t))}function C$(e,t,n){const r=Jz(t),i=Xz(t),o="fixed"===n,s=x$(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Oz(0);if(r||!r&&!o)if(("body"!==Yz(t)||t$(i))&&(a=l$(t)),r){const e=x$(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=w$(i));const c=!i||r||o?Oz(0):_$(i,a);return{x:s.left+a.scrollLeft-l.x-c.x,y:s.top+a.scrollTop-l.y-c.y,width:s.width,height:s.height}}function T$(e){return"static"===a$(e).position}function j$(e,t){if(!Jz(e)||"fixed"===a$(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Xz(e)===n&&(n=n.ownerDocument.body),n}function k$(e,t){const n=Gz(e);if(r$(e))return n;if(!Jz(e)){let t=c$(e);for(;t&&!s$(t);){if(Zz(t)&&!T$(t))return t;t=c$(t)}return n}let r=j$(e,t);for(;r&&n$(r)&&T$(r);)r=j$(r,t);return r&&s$(r)&&T$(r)&&!i$(r)?n:r||function(e){let t=c$(e);for(;Jz(t)&&!s$(t);){if(i$(t))return t;if(r$(t))return null;t=c$(t)}return null}(e)||n}const N$={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,s=Xz(r),a=!!t&&r$(t.floating);if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Oz(1);const u=Oz(0),d=Jz(r);if((d||!d&&!o)&&(("body"!==Yz(r)||t$(s))&&(l=l$(r)),Jz(r))){const e=x$(r);c=y$(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!s||d||o?Oz(0):_$(s,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Xz,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?r$(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=d$(e,[],!1).filter((e=>Zz(e)&&"body"!==Yz(e))),i=null;const o="fixed"===a$(e).position;let s=o?c$(e):e;for(;Zz(s)&&!s$(s);){const t=a$(s),n=i$(s);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||t$(s)&&!n&&E$(e,s))?r=r.filter((e=>e!==s)):i=t,s=c$(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=o[0],a=o.reduce(((e,n)=>{const r=S$(t,n,i);return e.top=Az(r.top,e.top),e.right=Nz(r.right,e.right),e.bottom=Nz(r.bottom,e.bottom),e.left=Az(r.left,e.left),e}),S$(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:k$,getElementRects:async function(e){const t=this.getOffsetParent||k$,n=this.getDimensions,r=await n(e.floating);return{reference:C$(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=m$(e);return{width:t,height:n}},getScale:y$,isElement:Zz,isRTL:function(e){return"rtl"===a$(e).direction}};function A$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function I$(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=g$(e),u=i||o?[...c?d$(c):[],...d$(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const i=Xz(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||t(),!h||!f)return;const p={rootMargin:-Pz(d)+"px "+-Pz(i.clientWidth-(u+h))+"px "+-Pz(i.clientHeight-(d+f))+"px "+-Pz(u)+"px",threshold:Az(0,Nz(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return s();r?s(!1,r):n=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==r||A$(c,e.getBoundingClientRect())||s(),m=!1}try{r=new IntersectionObserver(g,{...p,root:i.ownerDocument})}catch(zH){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),o}(c,n):null;let h,f=-1,p=null;s&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let m=l?x$(e):null;return l&&function t(){const r=x$(e);m&&!A$(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const P$=p$,O$=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=Fz(n),a=Bz(n),l="y"===zz(n),c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=Lz(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"===typeof p&&(f="end"===a?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},M$=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Lz(e,t),c={x:n,y:r},u=await p$(t,l),d=zz(Fz(i)),h=Uz(d);let f=c[h],p=c[d];if(o){const e="y"===h?"bottom":"right";f=Dz(f+u["y"===h?"top":"left"],f,f-u[e])}if(s){const e="y"===d?"bottom":"right";p=Dz(p+u["y"===d?"top":"left"],p,p-u[e])}const m=a.fn({...t,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:o,[d]:s}}}}}},R$=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Lz(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const y=Fz(i),v=zz(a),b=Fz(a)===a,x=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(b||!m?[qz(a)]:function(e){const t=qz(e);return[Hz(e),t,Hz(t)]}(a)),_="none"!==p;!h&&_&&w.push(...function(e,t,n,r){const i=Bz(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}(Fz(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(Hz)))),o}(a,m,p,x));const S=[a,...w],E=await p$(t,g),C=[];let T=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&C.push(E[y]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=Bz(e),i=$z(e),o=Vz(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=qz(s)),[s,qz(s)]}(i,s,x);C.push(E[e[0]],E[e[1]])}if(T=[...T,{placement:i,overflows:C}],!C.every((e=>e<=0))){var j,k;const e=((null==(j=o.flip)?void 0:j.index)||0)+1,t=S[e];if(t)return{data:{index:e,overflows:T},reset:{placement:t}};let n=null==(k=T.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:k.placement;if(!n)switch(f){case"bestFit":{var N;const e=null==(N=T.filter((e=>{if(_){const t=zz(e.placement);return t===v||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:N[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},D$=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:l=()=>{},...c}=Lz(e,t),u=await p$(t,c),d=Fz(i),h=Bz(i),f="y"===zz(i),{width:p,height:m}=o.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const v=m-u.top-u.bottom,b=p-u.left-u.right,x=Nz(m-u[g],v),w=Nz(p-u[y],b),_=!t.middlewareData.shift;let S=x,E=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(E=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(S=v),_&&!h){const e=Az(u.left,0),t=Az(u.right,0),n=Az(u.top,0),r=Az(u.bottom,0);f?E=p-2*(0!==e||0!==t?e+t:Az(u.left,u.right)):S=m-2*(0!==n||0!==r?n+r:Az(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:S});const C=await s.getDimensions(a.floating);return p!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}},L$=(e,t,n)=>{const r=new Map,i={platform:N$,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=f$(c,r,l),h=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:n,fn:o}=a[m],{x:g,y:y,data:v,reset:b}=await o({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,f={...f,[n]:{...f[n],...v}},b&&p<=50&&(p++,"object"===typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=f$(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}})(e,t,{...i,platform:o})};var F$="undefined"!==typeof document?r.useLayoutEffect:r.useEffect;function B$(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!B$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!B$(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function U$(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function V$(e,t){const n=U$(e);return Math.round(t*n)/n}function z$(e){const t=r.useRef(e);return F$((()=>{t.current=e})),t}const $$=(e,t)=>({...O$(e),options:[e,t]}),H$=(e,t)=>({...R$(e),options:[e,t]}),q$=(e,t)=>({...D$(e),options:[e,t]});const W$={...i},K$=W$.useInsertionEffect||(e=>e());function Y$(e){const t=r.useRef((()=>{0}));return K$((()=>{t.current=e})),r.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}const G$="ArrowUp",X$="ArrowDown",Q$="ArrowLeft",Z$="ArrowRight";var J$="undefined"!==typeof document?r.useLayoutEffect:r.useEffect;const eH=[Q$,Z$],tH=[G$,X$];let nH=!1,rH=0;const iH=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+rH++;const oH=W$.useId||function(){const[e,t]=r.useState((()=>nH?iH():void 0));return J$((()=>{null==e&&t(iH())}),[]),r.useEffect((()=>{nH=!0}),[]),e};function sH(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}const aH=r.createContext(null),lH=r.createContext(null),cH=()=>{var e;return(null==(e=r.useContext(aH))?void 0:e.id)||null},uH=()=>r.useContext(lH);const dH="data-floating-ui-focusable";function hH(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:i}=e,o=oH(),s=r.useRef({}),[a]=r.useState((()=>sH())),l=null!=cH(),[c,u]=r.useState(i.reference),d=Y$(((e,t,r)=>{s.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)})),h=r.useMemo((()=>({setPositionReference:u})),[]),f=r.useMemo((()=>({reference:c||i.reference||null,floating:i.floating||null,domReference:i.reference})),[c,i.reference,i.floating]);return r.useMemo((()=>({dataRef:s,open:t,onOpenChange:d,elements:f,events:a,floatingId:o,refs:h})),[t,d,f,a,o,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||n,o=i.elements,[a,l]=r.useState(null),[c,u]=r.useState(null),d=(null==o?void 0:o.domReference)||a,h=r.useRef(null),f=uH();J$((()=>{d&&(h.current=d)}),[d]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:o,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=e,[h,f]=r.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=r.useState(i);B$(p,i)||m(i);const[g,y]=r.useState(null),[v,b]=r.useState(null),x=r.useCallback((e=>{e!==E.current&&(E.current=e,y(e))}),[]),w=r.useCallback((e=>{e!==C.current&&(C.current=e,b(e))}),[]),_=a||g,S=l||v,E=r.useRef(null),C=r.useRef(null),T=r.useRef(h),j=null!=u,k=z$(u),N=z$(o),A=z$(d),I=r.useCallback((()=>{if(!E.current||!C.current)return;const e={placement:t,strategy:n,middleware:p};N.current&&(e.platform=N.current),L$(E.current,C.current,e).then((e=>{const t={...e,isPositioned:!1!==A.current};P.current&&!B$(T.current,t)&&(T.current=t,s.flushSync((()=>{f(t)})))}))}),[p,t,n,N,A]);F$((()=>{!1===d&&T.current.isPositioned&&(T.current.isPositioned=!1,f((e=>({...e,isPositioned:!1}))))}),[d]);const P=r.useRef(!1);F$((()=>(P.current=!0,()=>{P.current=!1})),[]),F$((()=>{if(_&&(E.current=_),S&&(C.current=S),_&&S){if(k.current)return k.current(_,S,I);I()}}),[_,S,I,k,j]);const O=r.useMemo((()=>({reference:E,floating:C,setReference:x,setFloating:w})),[x,w]),M=r.useMemo((()=>({reference:_,floating:S})),[_,S]),R=r.useMemo((()=>{const e={position:n,left:0,top:0};if(!M.floating)return e;const t=V$(M.floating,h.x),r=V$(M.floating,h.y);return c?{...e,transform:"translate("+t+"px, "+r+"px)",...U$(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,c,M.floating,h.x,h.y]);return r.useMemo((()=>({...h,update:I,refs:O,elements:M,floatingStyles:R})),[h,I,O,M,R])}({...e,elements:{...o,...c&&{reference:c}}}),m=r.useCallback((e=>{const t=Zz(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u(t),p.refs.setReference(t)}),[p.refs]),g=r.useCallback((e=>{(Zz(e)||null===e)&&(h.current=e,l(e)),(Zz(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!Zz(e))&&p.refs.setReference(e)}),[p.refs]),y=r.useMemo((()=>({...p.refs,setReference:g,setPositionReference:m,domReference:h})),[p.refs,g,m]),v=r.useMemo((()=>({...p.elements,domReference:d})),[p.elements,d]),b=r.useMemo((()=>({...p,...i,refs:y,elements:v,nodeId:t})),[p,y,v,t,i]);return J$((()=>{i.dataRef.current.floatingContext=b;const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===t));e&&(e.context=b)})),r.useMemo((()=>({...p,context:b,refs:y,elements:v})),[p,y,v,b])}const fH="active",pH="selected";function mH(e,t,n){const r=new Map,i="item"===n;let o=e;if(i&&e){const{[fH]:t,[pH]:n,...r}=e;o=r}return{..."floating"===n&&{tabIndex:-1,[dH]:""},...o,...t.map((t=>{const r=t?t[n]:null;return"function"===typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,o]=t;var s;i&&[fH,pH].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"===typeof o&&(null==(s=r.get(n))||s.push(o),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return null==(e=r.get(n))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[n]=o)})),e):e),{})}}function gH(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}let yH=(0,r.createContext)({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});yH.displayName="FloatingContext";let vH=(0,r.createContext)(null);vH.displayName="PlacementContext";function bH(e){let{children:t,enabled:n=!0}=e,[i,o]=(0,r.useState)(null),[a,l]=(0,r.useState)(0),c=(0,r.useRef)(null),[u,d]=(0,r.useState)(null);!function(e){OV((()=>{if(!e)return;let t=new MutationObserver((()=>{let t=window.getComputedStyle(e).maxHeight,n=parseFloat(t);if(isNaN(n))return;let r=parseInt(t);isNaN(r)||n!==r&&(e.style.maxHeight=`${Math.ceil(n)}px`)}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}}),[e])}(u);let h=n&&null!==i&&null!==u,{to:f="bottom",gap:p=0,offset:m=0,padding:g=0,inner:y}=function(e,t){var n,r,i;let o=xH(null!=(n=null==e?void 0:e.gap)?n:"var(--anchor-gap, 0)",t),s=xH(null!=(r=null==e?void 0:e.offset)?r:"var(--anchor-offset, 0)",t),a=xH(null!=(i=null==e?void 0:e.padding)?i:"var(--anchor-padding, 0)",t);return{...e,gap:o,offset:s,padding:a}}(i,u),[v,b="center"]=f.split(" ");OV((()=>{h&&l(0)}),[h]);let{refs:x,floatingStyles:w,context:_}=hH({open:h,placement:"selection"===v?"center"===b?"bottom":`bottom-${b}`:"center"===b?`${v}`:`${v}-${b}`,strategy:"absolute",transform:!1,middleware:[$$({mainAxis:"selection"===v?0:p,crossAxis:m}),(T={padding:g},{...M$(T),options:[T,j]}),"selection"!==v&&H$({padding:g}),"selection"===v&&y?(C={...y,padding:g,overflowRef:c,offset:a,minItemsVisible:4,referenceOverflowThreshold:g,onFallbackChange(e){var t,n;if(!e)return;let r=_.elements.floating;if(!r)return;let i=parseFloat(getComputedStyle(r).scrollPaddingBottom)||0,o=Math.min(4,r.childElementCount),s=0,a=0;for(let l of null!=(n=null==(t=_.elements.floating)?void 0:t.childNodes)?n:[])if(l instanceof HTMLElement){let e=l.offsetTop,t=e+l.clientHeight+i,n=r.scrollTop,c=n+r.clientHeight;if(!(e>=n&&t<=c)){a=Math.max(0,Math.min(t,c)-Math.max(e,n)),s=l.clientHeight;break}o--}o>=1&&l((e=>{let t=s*o-a+i;return e>=t?e:t}))}},{name:"inner",options:C,async fn(e){const{listRef:t,overflowRef:n,onFallbackChange:r,offset:i=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=Lz(C,e),{rects:d,elements:{floating:h}}=e,f=t.current[o],p=(null==c?void 0:c.current)||h,m=h.clientTop||p.clientTop,g=0!==h.clientTop,y=0!==p.clientTop,v=h===p;if(!f)return{};const b={...e,...await $$(-f.offsetTop-h.clientTop-d.reference.height/2-f.offsetHeight/2-i).fn(e)},x=await P$(gH(b,p.scrollHeight+m+h.clientTop),u),w=await P$(b,{...u,elementContext:"reference"}),_=Az(0,x.top),S=b.y+_,E=p.scrollHeight>p.clientHeight?e=>e:Iz,T=E(Az(0,p.scrollHeight+(g&&v||y?2*m:0)-_-Az(0,x.bottom)));if(p.style.maxHeight=T+"px",p.scrollTop=_,r){const e=p.offsetHeight<f.offsetHeight*Nz(a,t.current.length)-1||w.top>=-l||w.bottom>=-l;s.flushSync((()=>r(e)))}return n&&(n.current=await P$(gH({...b,y:S},p.offsetHeight+m+h.clientTop),u)),{y:S}}}):null,q$({padding:g,apply(e){let{availableWidth:t,availableHeight:n,elements:r}=e;Object.assign(r.floating.style,{overflow:"auto",maxWidth:`${t}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${n}px)`})}})].filter(Boolean),whileElementsMounted:I$}),[S=v,E=b]=_.placement.split("-");var C,T,j;"selection"===v&&(S="selection");let k=(0,r.useMemo)((()=>({anchor:[S,E].filter(Boolean).join(" ")})),[S,E]),N=function(e,t){const{open:n,elements:i}=e,{enabled:o=!0,overflowRef:a,scrollRef:l,onChange:c}=t,u=Y$(c),d=r.useRef(!1),h=r.useRef(null),f=r.useRef(null);r.useEffect((()=>{if(!o)return;function e(e){if(e.ctrlKey||!t||null==a.current)return;const n=e.deltaY,r=a.current.top>=-.5,i=a.current.bottom>=-.5,o=t.scrollHeight-t.clientHeight,l=n<0?-1:1,c=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!i&&n<0?(e.preventDefault(),s.flushSync((()=>{u((e=>e+Math[c](n,o*l)))}))):/firefox/i.test(kz())&&(t.scrollTop+=n))}const t=(null==l?void 0:l.current)||i.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{h.current=t.scrollTop,null!=a.current&&(f.current={...a.current})})),()=>{h.current=null,f.current=null,t.removeEventListener("wheel",e)}):void 0}),[o,n,i.floating,a,l,u]);const p=r.useMemo((()=>({onKeyDown(){d.current=!0},onWheel(){d.current=!1},onPointerMove(){d.current=!1},onScroll(){const e=(null==l?void 0:l.current)||i.floating;if(a.current&&e&&d.current){if(null!==h.current){const t=e.scrollTop-h.current;(a.current.bottom<-.5&&t<-1||a.current.top<-.5&&t>1)&&s.flushSync((()=>u((e=>e+t))))}requestAnimationFrame((()=>{h.current=e.scrollTop}))}}})),[i.floating,u,a,l]);return r.useMemo((()=>o?{floating:p}:{}),[o,p])}(_,{overflowRef:c,onChange:l}),{getReferenceProps:A,getFloatingProps:I}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),i=e.map((e=>null==e?void 0:e.item)),o=r.useCallback((t=>mH(t,e,"reference")),t),s=r.useCallback((t=>mH(t,e,"floating")),n),a=r.useCallback((t=>mH(t,e,"item")),i);return r.useMemo((()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:a})),[o,s,a])}([N]),P=RV((e=>{d(e),x.setFloating(e)}));return r.createElement(vH.Provider,{value:o},r.createElement(yH.Provider,{value:{setFloating:P,setReference:x.setReference,styles:w,getReferenceProps:A,getFloatingProps:I,slot:k}},t))}function xH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=PV(),o=RV(((e,t)=>{if(null==e)return[n,null];if("number"==typeof e)return[e,null];if("string"==typeof e){if(!t)return[n,null];let r=_H(e,t);return[r,n=>{let o=wH(e);{let s=o.map((e=>window.getComputedStyle(t).getPropertyValue(e)));i.requestAnimationFrame((function a(){i.nextFrame(a);let l=!1;for(let[e,n]of o.entries()){let r=window.getComputedStyle(t).getPropertyValue(n);if(s[e]!==r){s[e]=r,l=!0;break}}if(!l)return;let c=_H(e,t);r!==c&&(n(c),r=c)}))}return i.dispose}]}return[n,null]})),s=(0,r.useMemo)((()=>o(e,t)[0]),[e,t]),[a=s,l]=(0,r.useState)();return OV((()=>{let[n,r]=o(e,t);if(l(n),r)return r(l)}),[e,t]),a}function wH(e){let t=/var\((.*)\)/.exec(e);if(t){let e=t[1].indexOf(",");if(-1===e)return[t[1]];let n=t[1].slice(0,e).trim(),r=t[1].slice(e+1).trim();return r?[n,...wH(r)]:[n]}return[]}function _H(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let SH=(0,r.createContext)(null);SH.displayName="OpenClosedContext";var EH=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(EH||{});function CH(){return(0,r.useContext)(SH)}function TH(e){let{value:t,children:n}=e;return r.createElement(SH.Provider,{value:t},n)}function jH(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}var kH=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(kH||{});function NH(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=null!=r?r:-1;switch(e.focus){case 0:for(let e=0;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 1:-1===i&&(i=n.length);for(let e=i-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 2:for(let e=i+1;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 3:for(let e=n.length-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 4:for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return r;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}function AH(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}var IH=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(IH||{}),PH=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(PH||{});function OH(){let e=function(){let e=(0,r.useRef)([]),t=(0,r.useCallback)((t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)}),[]);return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.every((e=>null==e)))return e.current=r,t}}();return(0,r.useCallback)((t=>function(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:o,visible:s=!0,name:a,mergeRefs:l}=e;l=null!=l?l:RH;let c=DH(n,t);if(s)return MH(c,r,i,a,l);let u=null!=o?o:0;if(2&u){let{static:e=!1,...t}=c;if(e)return MH(t,r,i,a,l)}if(1&u){let{unmount:e=!0,...t}=c;return KV(e?0:1,{0:()=>null,1:()=>MH({...t,hidden:!0,style:{display:"none"}},r,i,a,l)})}return MH(c,r,i,a,l)}({mergeRefs:e,...t})),[e])}function MH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,{as:s=n,children:a,refName:l="ref",...c}=UH(e,["unmount","static"]),u=void 0!==e.ref?{[l]:e.ref}:{},d="function"==typeof a?a(t):a;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(t){let e=!1,n=[];for(let[r,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&n.push(r.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)));if(e){h["data-headlessui-state"]=n.join(" ");for(let e of n)h[`data-${e}`]=""}}if(s===r.Fragment&&(Object.keys(BH(c)).length>0||Object.keys(BH(h)).length>0)){if((0,r.isValidElement)(d)&&!(Array.isArray(d)&&d.length>1)){let e=d.props,t=null==e?void 0:e.className,n="function"==typeof t?function(){return AH(t(...arguments),c.className)}:AH(t,c.className),i=n?{className:n}:{},s=DH(d.props,BH(UH(c,["ref"])));for(let r in h)r in s&&delete h[r];return(0,r.cloneElement)(d,Object.assign({},s,h,u,{ref:o(VH(d),u.ref)},i))}if(Object.keys(BH(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(BH(c)).concat(Object.keys(BH(h))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"))}return(0,r.createElement)(s,Object.assign({},UH(c,["ref"]),s!==r.Fragment&&u,s!==r.Fragment&&h),d)}function RH(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}function DH(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let o of t)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=i[e]||(i[e]=[]),i[e].push(o[e])):r[e]=o[e];if(r.disabled||r["aria-disabled"])for(let o in i)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(o)&&(i[o]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let o in i)Object.assign(r,{[o](e){let t=i[o];for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function LH(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let o of t)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=i[e]||(i[e]=[]),i[e].push(o[e])):r[e]=o[e];for(let o in i)Object.assign(r,{[o](){let e=i[o];for(let t of e)null==t||t(...arguments)}});return r}function FH(e){var t;return Object.assign((0,r.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function BH(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function UH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function VH(e){return r.version.split(".")[0]>="19"?e.props.ref:e.ref}let zH=(0,r.createContext)(void 0);function $H(){return(0,r.useContext)(zH)}let HH=(0,r.createContext)(null);function qH(){let e=(0,r.useContext)(HH);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,qH),e}return e}HH.displayName="DescriptionContext";let WH=FH((function(e,t){let n=(0,r.useId)(),i=$H(),{id:o=`headlessui-description-${n}`,...s}=e,a=qH(),l=vz(t);OV((()=>a.register(o)),[o,a.register]);let c=i||!1,u=(0,r.useMemo)((()=>({...a.slot,disabled:c})),[a.slot,c]),d={ref:l,...a.props,id:o};return OH()({ourProps:d,theirProps:s,slot:u,defaultTag:"p",name:a.name||"Description"})}));Object.assign(WH,{});var KH=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(KH||{});let YH=(0,r.createContext)(void 0);let GH=(0,r.createContext)(null);function XH(){let e=(0,r.useContext)(GH);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,XH),e}return e}function QH(){let{inherit:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){var t,n,i;let o=null!=(n=null==(t=(0,r.useContext)(GH))?void 0:t.value)?n:void 0;return(null!=(i=null==e?void 0:e.length)?i:0)>0?[o,...e].filter(Boolean).join(" "):o}(),[n,i]=(0,r.useState)([]),o=e?[t,...n].filter(Boolean):n;return[o.length>0?o.join(" "):void 0,(0,r.useMemo)((()=>function(e){let t=RV((e=>(i((t=>[...t,e])),()=>i((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),n=(0,r.useMemo)((()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value})),[t,e.slot,e.name,e.props,e.value]);return r.createElement(GH.Provider,{value:n},e.children)}),[i])]}GH.displayName="LabelContext";let ZH=FH((function(e,t){var n;let i=(0,r.useId)(),o=XH(),s=(0,r.useContext)(YH),a=$H(),{id:l=`headlessui-label-${i}`,htmlFor:c=(null!=s?s:null==(n=o.props)?void 0:n.htmlFor),passive:u=!1,...d}=e,h=vz(t);OV((()=>o.register(l)),[l,o.register]);let f=RV((e=>{let t=e.currentTarget;if(t instanceof HTMLLabelElement&&e.preventDefault(),o.props&&"onClick"in o.props&&"function"==typeof o.props.onClick&&o.props.onClick(e),t instanceof HTMLLabelElement){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(e instanceof HTMLInputElement&&("radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}})),p=a||!1,m=(0,r.useMemo)((()=>({...o.slot,disabled:p})),[o.slot,p]),g={ref:h,...o.props,id:l,htmlFor:c,onClick:f};return u&&("onClick"in g&&(delete g.htmlFor,delete g.onClick),"onClick"in d&&delete d.onClick),OH()({ourProps:g,theirProps:d,slot:m,defaultTag:c?"label":"div",name:o.name||"Label"})}));Object.assign(ZH,{});function JH(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(i)((()=>()=>{}),(()=>!1),(()=>!e))}(),[t,n]=r.useState(kV.isHandoffComplete);return t&&!1===kV.isHandoffComplete&&n(!1),r.useEffect((()=>{!0!==t&&n(!0)}),[t]),r.useEffect((()=>kV.handoff()),[]),!e&&t}let eq=(0,r.createContext)(!1);function tq(e){let t=(0,r.useContext)(eq),n=(0,r.useContext)(oq),i=dz(e),[o,s]=(0,r.useState)((()=>{var e;if(!t&&null!==n)return null!=(e=n.current)?e:null;if(kV.isServer)return null;let r=null==i?void 0:i.getElementById("headlessui-portal-root");if(r)return r;if(null===i)return null;let o=i.createElement("div");return o.setAttribute("id","headlessui-portal-root"),i.body.appendChild(o)}));return(0,r.useEffect)((()=>{null!==o&&(null!=i&&i.body.contains(o)||null==i||i.body.appendChild(o))}),[o,i]),(0,r.useEffect)((()=>{t||null!==n&&s(n.current)}),[n,s,t]),o}let nq=r.Fragment,rq=FH((function(e,t){let n=e,i=(0,r.useRef)(null),o=vz(function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[yz]:t})}((e=>{i.current=e})),t),a=dz(i),l=tq(i),[c]=(0,r.useState)((()=>{var e;return kV.isServer?null:null!=(e=null==a?void 0:a.createElement("div"))?e:null})),u=(0,r.useContext)(sq),d=JH();OV((()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))}),[l,c]),OV((()=>{if(c&&u)return u.register(c)}),[u,c]),function(e){let t=RV(e),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>(n.current=!1,()=>{n.current=!0,AV((()=>{n.current&&t()}))})),[t])}((()=>{var e;!l||!c||(c instanceof Node&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&(null==(e=l.parentElement)||e.removeChild(l)))}));let h=OH();return d&&l&&c?(0,s.createPortal)(h({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:nq,name:"Portal"}),c):null}));let iq=r.Fragment,oq=(0,r.createContext)(null);let sq=(0,r.createContext)(null);let aq=FH((function(e,t){let n=vz(t),{enabled:i=!0,...o}=e,s=OH();return i?r.createElement(rq,{...o,ref:n}):s({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:nq,name:"Portal"})})),lq=FH((function(e,t){let{target:n,...i}=e,o={ref:vz(t)},s=OH();return r.createElement(oq.Provider,{value:n},s({ourProps:o,theirProps:i,defaultTag:iq,name:"Popover.Group"}))})),cq=Object.assign(aq,{Group:lq});var uq=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(uq||{}),dq=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(dq||{}),hq=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(hq||{});function fq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,r=oz(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),i=n?r.indexOf(n):null;return-1===i&&(i=null),{items:r,activeItemIndex:i}}let pq={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var n,r,i,o,s;if(1===e.menuState)return e;let a={...e,searchQuery:"",activationTrigger:null!=(n=t.trigger)?n:1,__demoMode:!1};if(t.focus===kH.Nothing)return{...a,activeItemIndex:null};if(t.focus===kH.Specific)return{...a,activeItemIndex:e.items.findIndex((e=>e.id===t.id))};if(t.focus===kH.Previous){let n=e.activeItemIndex;if(null!==n){let o=e.items[n].dataRef.current.domRef,s=NH(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==s){let t=e.items[s].dataRef.current.domRef;if((null==(r=o.current)?void 0:r.previousElementSibling)===t.current||null===(null==(i=t.current)?void 0:i.previousElementSibling))return{...a,activeItemIndex:s}}}}else if(t.focus===kH.Next){let n=e.activeItemIndex;if(null!==n){let r=e.items[n].dataRef.current.domRef,i=NH(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==i){let t=e.items[i].dataRef.current.domRef;if((null==(o=r.current)?void 0:o.nextElementSibling)===t.current||null===(null==(s=t.current)?void 0:s.nextElementSibling))return{...a,activeItemIndex:i}}}}let l=fq(e),c=NH(t,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...a,...l,activeItemIndex:c}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))&&!e.dataRef.current.disabled})),o=i?e.items.indexOf(i):-1;return-1===o||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=fq(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=fq(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},mq=(0,r.createContext)(null);function gq(e){let t=(0,r.useContext)(mq);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,gq),t}return t}function yq(e,t){return KV(t.type,pq,e,t)}mq.displayName="MenuContext";let vq=r.Fragment;let bq=IH.RenderStrategy|IH.Static;let xq=r.Fragment;let wq=FH((function(e,t){let{__demoMode:n=!1,...i}=e,o=(0,r.useReducer)(yq,{__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsElement:a,buttonElement:l},c]=o,u=vz(t);uz(0===s,[l,a],((e,t)=>{c({type:1}),tz(t,ez.Loose)||(e.preventDefault(),null==l||l.focus())}));let d=RV((()=>{c({type:1})})),h=(0,r.useMemo)((()=>({open:0===s,close:d})),[s,d]),f={ref:u},p=OH();return r.createElement(bH,null,r.createElement(mq.Provider,{value:o},r.createElement(TH,{value:KV(s,{0:EH.Open,1:EH.Closed})},p({ourProps:f,theirProps:i,slot:h,defaultTag:vq,name:"Menu"}))))})),_q=FH((function(e,t){var n;let i=(0,r.useId)(),{id:o=`headlessui-menu-button-${i}`,disabled:a=!1,autoFocus:l=!1,...c}=e,[u,d]=gq("Menu.Button"),h=(0,r.useContext)(yH).getReferenceProps,f=vz(t,(0,r.useContext)(yH).setReference,RV((e=>d({type:7,element:e})))),p=RV((e=>{switch(e.key){case KH.Space:case KH.Enter:case KH.ArrowDown:e.preventDefault(),e.stopPropagation(),(0,s.flushSync)((()=>d({type:0}))),d({type:2,focus:kH.First});break;case KH.ArrowUp:e.preventDefault(),e.stopPropagation(),(0,s.flushSync)((()=>d({type:0}))),d({type:2,focus:kH.Last})}})),m=RV((e=>{if(e.key===KH.Space)e.preventDefault()})),g=RV((e=>{var t;if(jH(e.currentTarget))return e.preventDefault();a||(0===u.menuState?((0,s.flushSync)((()=>d({type:1}))),null==(t=u.buttonElement)||t.focus({preventScroll:!0})):(e.preventDefault(),d({type:0})))})),{isFocusVisible:y,focusProps:v}=xV({autoFocus:l}),{isHovered:b,hoverProps:x}=function(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:i,isDisabled:o}=e,[s,a]=(0,r.useState)(!1),l=(0,r.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,r.useEffect)(CV,[]);let{hoverProps:c,triggerHoverEnd:u}=(0,r.useMemo)((()=>{let e=(e,r)=>{if(l.pointerType=r,o||"touch"===r||l.isHovered||!e.currentTarget.contains(e.target))return;l.isHovered=!0;let i=e.currentTarget;l.target=i,t&&t({type:"hoverstart",target:i,pointerType:r}),n&&n(!0),a(!0)},r=(e,t)=>{if(l.pointerType="",l.target=null,"touch"===t||!l.isHovered)return;l.isHovered=!1;let r=e.currentTarget;i&&i({type:"hoverend",target:r,pointerType:t}),n&&n(!1),a(!1)},s={};return"undefined"!==typeof PointerEvent?(s.onPointerEnter=t=>{wV&&"mouse"===t.pointerType||e(t,t.pointerType)},s.onPointerLeave=e=>{!o&&e.currentTarget.contains(e.target)&&r(e,e.pointerType)}):(s.onTouchStart=()=>{l.ignoreEmulatedMouseEvents=!0},s.onMouseEnter=t=>{l.ignoreEmulatedMouseEvents||wV||e(t,"mouse"),l.ignoreEmulatedMouseEvents=!1},s.onMouseLeave=e=>{!o&&e.currentTarget.contains(e.target)&&r(e,"mouse")}),{hoverProps:s,triggerHoverEnd:r}}),[t,n,i,o,l]);return(0,r.useEffect)((()=>{o&&u({currentTarget:l.target},l.pointerType)}),[o]),{hoverProps:c,isHovered:s}}({isDisabled:a}),{pressed:w,pressProps:_}=function(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1),o=PV(),s=RV((()=>{t.current=null,i(!1),o.dispose()})),a=RV((e=>{if(o.dispose(),null===t.current){t.current=e.currentTarget,i(!0);{let n=NV(e.currentTarget);o.addEventListener(n,"pointerup",s,!1),o.addEventListener(n,"pointermove",(e=>{if(t.current){let n=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);i(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(n,t.current.getBoundingClientRect()))}}),!1),o.addEventListener(n,"pointercancel",s,!1)}}}));return{pressed:n,pressProps:e?{}:{onPointerDown:a,onPointerUp:s,onClick:s}}}({disabled:a}),S=(0,r.useMemo)((()=>({open:0===u.menuState,active:w||0===u.menuState,disabled:a,hover:b,focus:y,autofocus:l})),[u,b,y,w,a,l]),E=LH(h(),{ref:f,id:o,type:hz(e,u.buttonElement),"aria-haspopup":"menu","aria-controls":null==(n=u.itemsElement)?void 0:n.id,"aria-expanded":0===u.menuState,disabled:a||void 0,autoFocus:l,onKeyDown:p,onKeyUp:m,onClick:g},v,x,_);return OH()({ourProps:E,theirProps:c,slot:S,defaultTag:"button",name:"Menu.Button"})})),Sq=FH((function(e,t){var n,i;let o=(0,r.useId)(),{id:a=`headlessui-menu-items-${o}`,anchor:l,portal:c=!1,modal:u=!0,transition:d=!1,...h}=e,f=function(e){return(0,r.useMemo)((()=>e?"string"==typeof e?{to:e}:e:null),[e])}(l),[p,m]=gq("Menu.Items"),[g,y]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===e&&(e=null),"string"==typeof e&&(e={to:e});let t=(0,r.useContext)(vH),n=(0,r.useMemo)((()=>e),[JSON.stringify(e,((e,t)=>{var n;return null!=(n=null==t?void 0:t.outerHTML)?n:t}))]);OV((()=>{null==t||t(null!=n?n:null)}),[t,n]);let i=(0,r.useContext)(yH);return(0,r.useMemo)((()=>[i.setFloating,e?i.styles:{}]),[i.setFloating,e,i.styles])}(f),v=function(){let{getFloatingProps:e,slot:t}=(0,r.useContext)(yH);return(0,r.useCallback)((function(){return Object.assign({},e(...arguments),{"data-anchor":t.anchor})}),[e,t])}(),[b,x]=(0,r.useState)(null),w=vz(t,f?g:null,RV((e=>m({type:8,element:e}))),x),_=dz(p.itemsElement);f&&(c=!0);let S=CH(),[E,C]=jz(d,b,null!==S?(S&EH.Open)===EH.Open:0===p.menuState);!function(e,t,n){let i=MV((e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&n()}));(0,r.useEffect)((()=>{if(!e)return;let n=null===t?null:t instanceof HTMLElement?t:t.current;if(!n)return;let r=IV();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver((()=>i.current(n)));e.observe(n),r.add((()=>e.disconnect()))}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver((()=>i.current(n)));e.observe(n),r.add((()=>e.disconnect()))}return()=>r.dispose()}),[t,i,e])}(E,p.buttonElement,(()=>{m({type:1})})),gz(!p.__demoMode&&(u&&0===p.menuState),_),WV(!p.__demoMode&&(u&&0===p.menuState),{allowed:(0,r.useCallback)((()=>[p.buttonElement,p.itemsElement]),[p.buttonElement,p.itemsElement])});let T=!function(e,t){let n=(0,r.useRef)({left:0,top:0});if(OV((()=>{if(!t)return;let e=t.getBoundingClientRect();e&&(n.current=e)}),[e,t]),null==t||!e||t===document.activeElement)return!1;let i=t.getBoundingClientRect();return i.top!==n.current.top||i.left!==n.current.left}(0!==p.menuState,p.buttonElement)&&E;(0,r.useEffect)((()=>{let e=p.itemsElement;e&&0===p.menuState&&e!==(null==_?void 0:_.activeElement)&&e.focus({preventScroll:!0})}),[p.menuState,p.itemsElement,_]),function(e,t){let{container:n,accept:i,walk:o}=t,s=(0,r.useRef)(i),a=(0,r.useRef)(o);(0,r.useEffect)((()=>{s.current=i,a.current=o}),[i,o]),OV((()=>{if(!n||!e)return;let t=NV(n);if(!t)return;let r=s.current,i=a.current,o=Object.assign((e=>r(e)),{acceptNode:r}),l=t.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,o,!1);for(;l.nextNode();)i(l.currentNode)}),[n,e,s,a])}(0===p.menuState,{container:p.itemsElement,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let j=PV(),k=RV((e=>{var t,n,r;switch(j.dispose(),e.key){case KH.Space:if(""!==p.searchQuery)return e.preventDefault(),e.stopPropagation(),m({type:3,value:e.key});case KH.Enter:if(e.preventDefault(),e.stopPropagation(),m({type:1}),null!==p.activeItemIndex){let{dataRef:e}=p.items[p.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}nz(p.buttonElement);break;case KH.ArrowDown:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:kH.Next});case KH.ArrowUp:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:kH.Previous});case KH.Home:case KH.PageUp:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:kH.First});case KH.End:case KH.PageDown:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:kH.Last});case KH.Escape:e.preventDefault(),e.stopPropagation(),(0,s.flushSync)((()=>m({type:1}))),null==(r=p.buttonElement)||r.focus({preventScroll:!0});break;case KH.Tab:e.preventDefault(),e.stopPropagation(),(0,s.flushSync)((()=>m({type:1}))),sz(p.buttonElement,e.shiftKey?XV.Previous:XV.Next);break;default:1===e.key.length&&(m({type:3,value:e.key}),j.setTimeout((()=>m({type:4})),350))}})),N=RV((e=>{if(e.key===KH.Space)e.preventDefault()})),A=(0,r.useMemo)((()=>({open:0===p.menuState})),[p.menuState]),I=LH(f?v():{},{"aria-activedescendant":null===p.activeItemIndex||null==(n=p.items[p.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(i=p.buttonElement)?void 0:i.id,id:a,onKeyDown:k,onKeyUp:N,role:"menu",tabIndex:0===p.menuState?0:void 0,ref:w,style:{...h.style,...y,"--button-width":DV(p.buttonElement,!0).width},...Tz(C)}),P=OH();return r.createElement(cq,{enabled:!!c&&(e.static||E)},P({ourProps:I,theirProps:h,slot:A,defaultTag:"div",features:bq,visible:T,name:"Menu.Items"}))})),Eq=FH((function(e,t){let n=(0,r.useId)(),{id:i=`headlessui-menu-item-${n}`,disabled:o=!1,...s}=e,[a,l]=gq("Menu.Item"),c=null!==a.activeItemIndex&&a.items[a.activeItemIndex].id===i,u=(0,r.useRef)(null),d=vz(t,u);OV((()=>{if(!a.__demoMode&&0===a.menuState&&c&&0!==a.activationTrigger)return IV().requestAnimationFrame((()=>{var e,t;null==(t=null==(e=u.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})}))}),[a.__demoMode,u,c,a.menuState,a.activationTrigger,a.activeItemIndex]);let h=wz(u),f=(0,r.useRef)({disabled:o,domRef:u,get textValue(){return h()}});OV((()=>{f.current.disabled=o}),[f,o]),OV((()=>(l({type:5,id:i,dataRef:f}),()=>l({type:6,id:i}))),[f,i]);let p=RV((()=>{l({type:1})})),m=RV((e=>{if(o)return e.preventDefault();l({type:1}),nz(a.buttonElement)})),g=RV((()=>{if(o)return l({type:2,focus:kH.Nothing});l({type:2,focus:kH.Specific,id:i})})),y=function(){let e=(0,r.useRef)([-1,-1]);return{wasMoved(t){let n=_z(t);return(e.current[0]!==n[0]||e.current[1]!==n[1])&&(e.current=n,!0)},update(t){e.current=_z(t)}}}(),v=RV((e=>{y.update(e),!o&&(c||l({type:2,focus:kH.Specific,id:i,trigger:0}))})),b=RV((e=>{y.wasMoved(e)&&(o||c||l({type:2,focus:kH.Specific,id:i,trigger:0}))})),x=RV((e=>{y.wasMoved(e)&&(o||c&&l({type:2,focus:kH.Nothing}))})),[w,_]=QH(),[S,E]=function(){let[e,t]=(0,r.useState)([]);return[e.length>0?e.join(" "):void 0,(0,r.useMemo)((()=>function(e){let n=RV((e=>(t((t=>[...t,e])),()=>t((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,r.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value})),[n,e.slot,e.name,e.props,e.value]);return r.createElement(HH.Provider,{value:i},e.children)}),[t])]}(),C=(0,r.useMemo)((()=>({active:c,focus:c,disabled:o,close:p})),[c,o,p]),T={id:i,ref:d,role:"menuitem",tabIndex:!0===o?void 0:-1,"aria-disabled":!0===o||void 0,"aria-labelledby":w,"aria-describedby":S,disabled:void 0,onClick:m,onFocus:g,onPointerEnter:v,onMouseEnter:v,onPointerMove:b,onMouseMove:b,onPointerLeave:x,onMouseLeave:x},j=OH();return r.createElement(_,null,r.createElement(E,null,j({ourProps:T,theirProps:s,slot:C,defaultTag:xq,name:"Menu.Item"})))})),Cq=FH((function(e,t){let[n,i]=QH(),o=e,s={ref:t,"aria-labelledby":n,role:"group"},a=OH();return r.createElement(i,null,a({ourProps:s,theirProps:o,slot:{},defaultTag:"div",name:"Menu.Section"}))})),Tq=FH((function(e,t){let n=(0,r.useId)(),{id:i=`headlessui-menu-heading-${n}`,...o}=e,s=XH();OV((()=>s.register(i)),[i,s.register]);let a={id:i,ref:t,role:"presentation",...s.props};return OH()({ourProps:a,theirProps:o,slot:{},defaultTag:"header",name:"Menu.Heading"})})),jq=FH((function(e,t){let n=e,r={ref:t,role:"separator"};return OH()({ourProps:r,theirProps:n,slot:{},defaultTag:"div",name:"Menu.Separator"})})),kq=Object.assign(wq,{Button:_q,Items:Sq,Item:Eq,Section:Cq,Heading:Tq,Separator:jq});function Nq(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(t=e.as)?t:Rq)!==r.Fragment||1===r.Children.count(e.children)}let Aq=(0,r.createContext)(null);Aq.displayName="TransitionContext";var Iq=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Iq||{});let Pq=(0,r.createContext)(null);function Oq(e){return"children"in e?Oq(e.children):e.current.filter((e=>{let{el:t}=e;return null!==t.current})).filter((e=>{let{state:t}=e;return"visible"===t})).length>0}function Mq(e,t){let n=MV(e),i=(0,r.useRef)([]),o=function(){let e=(0,r.useRef)(!1);return OV((()=>(e.current=!0,()=>{e.current=!1})),[]),e}(),s=PV(),a=RV((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PH.Hidden,r=i.current.findIndex((t=>{let{el:n}=t;return n===e}));-1!==r&&(KV(t,{[PH.Unmount](){i.current.splice(r,1)},[PH.Hidden](){i.current[r].state="hidden"}}),s.microTask((()=>{var e;!Oq(i)&&o.current&&(null==(e=n.current)||e.call(n))})))})),l=RV((e=>{let t=i.current.find((t=>{let{el:n}=t;return n===e}));return t?"visible"!==t.state&&(t.state="visible"):i.current.push({el:e,state:"visible"}),()=>a(e,PH.Unmount)})),c=(0,r.useRef)([]),u=(0,r.useRef)(Promise.resolve()),d=(0,r.useRef)({enter:[],leave:[]}),h=RV(((e,n,r)=>{c.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter((t=>{let[n]=t;return n!==e}))),null==t||t.chains.current[n].push([e,new Promise((e=>{c.current.push(e)}))]),null==t||t.chains.current[n].push([e,new Promise((e=>{Promise.all(d.current[n].map((e=>{let[t,n]=e;return n}))).then((()=>e()))}))]),"enter"===n?u.current=u.current.then((()=>null==t?void 0:t.wait.current)).then((()=>r(n))):r(n)})),f=RV(((e,t,n)=>{Promise.all(d.current[t].splice(0).map((e=>{let[t,n]=e;return n}))).then((()=>{var e;null==(e=c.current.shift())||e()})).then((()=>n(t)))}));return(0,r.useMemo)((()=>({children:i,register:l,unregister:a,onStart:h,onStop:f,wait:u,chains:d})),[l,a,i,h,f,d,u])}Pq.displayName="NestingContext";let Rq=r.Fragment,Dq=IH.RenderStrategy;let Lq=FH((function(e,t){let{show:n,appear:i=!1,unmount:o=!0,...s}=e,a=(0,r.useRef)(null),l=vz(...Nq(e)?[a,t]:null===t?[]:[t]);JH();let c=CH();if(void 0===n&&null!==c&&(n=(c&EH.Open)===EH.Open),void 0===n)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=(0,r.useState)(n?"visible":"hidden"),h=Mq((()=>{n||d("hidden")})),[f,p]=(0,r.useState)(!0),m=(0,r.useRef)([n]);OV((()=>{!1!==f&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))}),[m,n]);let g=(0,r.useMemo)((()=>({show:n,appear:i,initial:f})),[n,i,f]);OV((()=>{n?d("visible"):!Oq(h)&&null!==a.current&&d("hidden")}),[n,h]);let y={unmount:o},v=RV((()=>{var t;f&&p(!1),null==(t=e.beforeEnter)||t.call(e)})),b=RV((()=>{var t;f&&p(!1),null==(t=e.beforeLeave)||t.call(e)})),x=OH();return r.createElement(Pq.Provider,{value:h},r.createElement(Aq.Provider,{value:g},x({ourProps:{...y,as:r.Fragment,children:r.createElement(Fq,{ref:l,...y,...s,beforeEnter:v,beforeLeave:b})},theirProps:{},defaultTag:r.Fragment,features:Dq,visible:"visible"===u,name:"Transition"})))})),Fq=FH((function(e,t){var n,i;let{transition:o=!0,beforeEnter:s,afterEnter:a,beforeLeave:l,afterLeave:c,enter:u,enterFrom:d,enterTo:h,entered:f,leave:p,leaveFrom:m,leaveTo:g,...y}=e,[v,b]=(0,r.useState)(null),x=(0,r.useRef)(null),w=Nq(e),_=vz(...w?[x,t,b]:null===t?[]:[t]),S=null==(n=y.unmount)||n?PH.Unmount:PH.Hidden,{show:E,appear:C,initial:T}=function(){let e=(0,r.useContext)(Aq);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[j,k]=(0,r.useState)(E?"visible":"hidden"),N=function(){let e=(0,r.useContext)(Pq);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:A,unregister:I}=N;OV((()=>A(x)),[A,x]),OV((()=>{if(S===PH.Hidden&&x.current)return E&&"visible"!==j?void k("visible"):KV(j,{hidden:()=>I(x),visible:()=>A(x)})}),[j,x,A,I,E,S]);let P=JH();OV((()=>{if(w&&P&&"visible"===j&&null===x.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[x,j,P,w]);let O=T&&!C,M=C&&E&&T,R=(0,r.useRef)(!1),D=Mq((()=>{R.current||(k("hidden"),I(x))}),N),L=RV((e=>{R.current=!0;let t=e?"enter":"leave";D.onStart(x,t,(e=>{"enter"===e?null==s||s():"leave"===e&&(null==l||l())}))})),F=RV((e=>{let t=e?"enter":"leave";R.current=!1,D.onStop(x,t,(e=>{"enter"===e?null==a||a():"leave"===e&&(null==c||c())})),"leave"===t&&!Oq(D)&&(k("hidden"),I(x))}));(0,r.useEffect)((()=>{w&&o||(L(E),F(E))}),[E,w,o]);let B=!(!o||!w||!P||O),[,U]=jz(B,v,E,{start:L,end:F}),V=BH({ref:_,className:(null==(i=AH(y.className,M&&u,M&&d,U.enter&&u,U.enter&&U.closed&&d,U.enter&&!U.closed&&h,U.leave&&p,U.leave&&!U.closed&&m,U.leave&&U.closed&&g,!U.transition&&E&&f))?void 0:i.trim())||void 0,...Tz(U)}),z=0;"visible"===j&&(z|=EH.Open),"hidden"===j&&(z|=EH.Closed),U.enter&&(z|=EH.Opening),U.leave&&(z|=EH.Closing);let $=OH();return r.createElement(Pq.Provider,{value:D},r.createElement(TH,{value:z},$({ourProps:V,theirProps:y,defaultTag:Rq,features:Dq,visible:"visible"===j,name:"Transition.Child"})))})),Bq=FH((function(e,t){let n=null!==(0,r.useContext)(Aq),i=null!==CH();return r.createElement(r.Fragment,null,!n&&i?r.createElement(Lq,{ref:t,...e}):r.createElement(Fq,{ref:t,...e}))})),Uq=Object.assign(Lq,{Child:Bq,Root:Lq});function Vq(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const zq=r.forwardRef(Vq),$q=e=>{let{student:t}=e;const{logout:n}=T_(),i=te(),o=async()=>{try{await n(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),i("/login")}catch(py){console.error("Logout failed:",py)}};return(0,E_.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-md z-50",children:(0,E_.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,E_.jsxs)("div",{className:"flex justify-between h-16",children:[(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)(ZI,{className:"h-8 w-8 text-indigo-600"}),(0,E_.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-800",children:"Student Portal"})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E_.jsx)(je,{to:"/student/dashboard",className:"text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),(0,E_.jsx)(je,{to:"/student/attendance",className:"text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium",children:"Attendance"}),(0,E_.jsx)(je,{to:"/student/schedule",className:"text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium",children:"Schedule"}),(0,E_.jsxs)("button",{className:"relative p-2 text-gray-600 hover:text-indigo-600",children:[(0,E_.jsx)(zq,{className:"h-6 w-6"}),(0,E_.jsx)("span",{className:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"})]}),(0,E_.jsxs)(kq,{as:"div",className:"relative ml-3",children:[(0,E_.jsxs)(kq.Button,{className:"flex items-center space-x-3 text-sm focus:outline-none",children:[(0,E_.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,E_.jsx)(eP,{className:"h-5 w-5 text-indigo-600"})}),(0,E_.jsxs)("div",{className:"text-left hidden md:block",children:[(0,E_.jsx)("p",{className:"text-sm font-medium text-gray-800",children:t.fullName}),(0,E_.jsx)("p",{className:"text-xs text-gray-500",children:t.section})]})]}),(0,E_.jsx)(Uq,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,E_.jsx)(kq.Items,{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,E_.jsxs)("div",{className:"py-1",children:[(0,E_.jsx)(kq.Item,{children:e=>{let{active:t}=e;return(0,E_.jsx)(je,{to:"/student/profile",className:(t?"bg-gray-100":"")+" block px-4 py-2 text-sm text-gray-700",children:"Your Profile"})}}),(0,E_.jsx)(kq.Item,{children:e=>{let{active:t}=e;return(0,E_.jsx)("button",{onClick:o,className:(t?"bg-gray-100":"")+" block w-full text-left px-4 py-2 text-sm text-red-600",children:"Sign out"})}})]})})})]})]})]})})})};function Hq(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Hq(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const qq=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Hq(e))&&(r&&(r+=" "),r+=t);return r};var Wq=n(9889),Kq=n.n(Wq),Yq=n(620),Gq=n.n(Yq),Xq=n(5268),Qq=n.n(Xq),Zq=n(3097),Jq=n.n(Zq),eW=n(9160),tW=n.n(eW),nW=function(e){return 0===e?0:e>0?1:-1},rW=function(e){return Gq()(e)&&e.indexOf("%")===e.length-1},iW=function(e){return tW()(e)&&!Qq()(e)},oW=function(e){return iW(e)||Gq()(e)},sW=0,aW=function(e){var t=++sW;return"".concat(e||"").concat(t)},lW=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!iW(e)&&!Gq()(e))return r;if(rW(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return Qq()(n)&&(n=r),i&&n>t&&(n=t),n},cW=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},uW=function(e,t){return iW(e)&&iW(t)?function(n){return e+n*(t-e)}:function(){return t}};function dW(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):Jq()(e,t))===n})):null}var hW=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},fW=n(9686),pW=n.n(fW),mW=n(1629),gW=n.n(mW),yW=n(6686),vW=n.n(yW),bW=n(9062);function xW(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function wW(e){return wW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wW(e)}var _W=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],SW=["points","pathLength"],EW={svg:["viewBox","children"],polygon:SW,polyline:SW},CW=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],TW=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,r.isValidElement)(e)&&(n=e.props),!vW()(n))return null;var i={};return Object.keys(n).forEach((function(e){CW.includes(e)&&(i[e]=t||function(t){return n[e](n,t)})})),i},jW=function(e,t,n){if(!vW()(e)||"object"!==wW(e))return null;var r=null;return Object.keys(e).forEach((function(i){var o=e[i];CW.includes(i)&&"function"===typeof o&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(o,t,n))})),r},kW=["children"],NW=["children"];function AW(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var IW={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},PW=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},OW=null,MW=null,RW=function e(t){if(t===OW&&Array.isArray(MW))return MW;var n=[];return r.Children.forEach(t,(function(t){pW()(t)||((0,bW.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),MW=n,OW=t,n};function DW(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map((function(e){return PW(e)})):[PW(t)],RW(e).forEach((function(e){var t=Jq()(e,"type.displayName")||Jq()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n}function LW(e,t){var n=DW(e,t);return n&&n[0]}var FW=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!iW(n)||n<=0||!iW(r)||r<=0)},BW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],UW=function(e){return e&&e.type&&Gq()(e.type)&&BW.indexOf(e.type)>=0},VW=function(e,t,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,r.isValidElement)(e)&&(i=e.props),!vW()(i))return null;var o={};return Object.keys(i).forEach((function(e){var r;(function(e,t,n,r){var i,o=null!==(i=null===EW||void 0===EW?void 0:EW[r])&&void 0!==i?i:[];return!gW()(e)&&(r&&o.includes(t)||_W.includes(t))||n&&CW.includes(t)})(null===(r=i)||void 0===r?void 0:r[e],e,t,n)&&(o[e]=i[e])})),o},zW=function e(t,n){if(t===n)return!0;var i=r.Children.count(t);if(i!==r.Children.count(n))return!1;if(0===i)return!0;if(1===i)return $W(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<i;o++){var s=t[o],a=n[o];if(Array.isArray(s)||Array.isArray(a)){if(!e(s,a))return!1}else if(!$W(s,a))return!1}return!0},$W=function(e,t){if(pW()(e)&&pW()(t))return!0;if(!pW()(e)&&!pW()(t)){var n=e.props||{},r=n.children,i=AW(n,kW),o=t.props||{},s=o.children,a=AW(o,NW);return r&&s?xW(i,a)&&zW(r,s):!r&&!s&&xW(i,a)}return!1},HW=function(e,t){var n=[],r={};return RW(e).forEach((function(e,i){if(UW(e))n.push(e);else if(e){var o=PW(e.type),s=t[o]||{},a=s.handler,l=s.once;if(a&&(!l||!r[o])){var c=a(e,o,i);n.push(c),r[o]=!0}}})),n},qW=function(e,t){return RW(t).indexOf(e)};function WW(e){return WW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WW(e)}function KW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KW(Object(n),!0).forEach((function(t){GW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GW(e,t,n){return t=function(e){var t=function(e,t){if("object"!=WW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=WW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WW(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return QW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QW(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ZW=(0,r.forwardRef)((function(e,t){var n=e.aspect,i=e.initialDimension,o=void 0===i?{width:-1,height:-1}:i,s=e.width,a=void 0===s?"100%":s,l=e.height,c=void 0===l?"100%":l,u=e.minWidth,d=void 0===u?0:u,h=e.minHeight,f=e.maxHeight,p=e.children,m=e.debounce,g=void 0===m?0:m,y=e.id,v=e.className,b=e.onResize,x=e.style,w=void 0===x?{}:x,_=(0,r.useRef)(null),S=(0,r.useRef)();S.current=b,(0,r.useImperativeHandle)(t,(function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})}));var E=XW((0,r.useState)({containerWidth:o.width,containerHeight:o.height}),2),C=E[0],T=E[1],j=(0,r.useCallback)((function(e,t){T((function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,r.useEffect)((function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;j(r,i),null===(t=S.current)||void 0===t||t.call(S,r,i)};g>0&&(e=Kq()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=_.current.getBoundingClientRect(),r=n.width,i=n.height;return j(r,i),t.observe(_.current),function(){t.disconnect()}}),[j,g]);var k=(0,r.useMemo)((function(){var e=C.containerWidth,t=C.containerHeight;if(e<0||t<0)return null;hW(rW(a)||rW(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,c),hW(!n||n>0,"The aspect(%s) must be greater than zero.",n);var i=rW(a)?e:a,o=rW(c)?t:c;n&&n>0&&(i?o=i/n:o&&(i=o*n),f&&o>f&&(o=f)),hW(i>0||o>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,o,a,c,d,h,n);var s=!Array.isArray(p)&&PW(p.type).endsWith("Chart");return r.Children.map(p,(function(e){return r.isValidElement(e)?(0,r.cloneElement)(e,YW({width:i,height:o},s?{style:YW({height:"100%",width:"100%",maxHeight:o,maxWidth:i},e.props.style)}:{})):e}))}),[n,p,c,f,h,d,C,a]);return r.createElement("div",{id:y?"".concat(y):void 0,className:qq("recharts-responsive-container",v),style:YW(YW({},w),{},{width:a,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:_},k)})),JW=n(6604),eK=n.n(JW),tK=n(7424),nK=n.n(tK),rK="Invariant failed";function iK(e,t){if(!e)throw new Error(rK)}var oK=["children","width","height","viewBox","className","style","title","desc"];function sK(){return sK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sK.apply(this,arguments)}function aK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lK(e){var t=e.children,n=e.width,i=e.height,o=e.viewBox,s=e.className,a=e.style,l=e.title,c=e.desc,u=aK(e,oK),d=o||{width:n,height:i,x:0,y:0},h=qq("recharts-surface",s);return r.createElement("svg",sK({},VW(u,!0,"svg"),{className:h,width:n,height:i,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),r.createElement("title",null,l),r.createElement("desc",null,c),t)}var cK=["children","className"];function uK(){return uK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uK.apply(this,arguments)}function dK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var hK=r.forwardRef((function(e,t){var n=e.children,i=e.className,o=dK(e,cK),s=qq("recharts-layer",i);return r.createElement("g",uK({className:s},VW(o,!0),{ref:t}),n)}));function fK(e){return fK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fK(e)}function pK(){return pK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pK.apply(this,arguments)}function mK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gK(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yK(Object(n),!0).forEach((function(t){bK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bK(e,t,n){return t=function(e){var t=function(e,t){if("object"!=fK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fK(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xK(e){return Array.isArray(e)&&oW(e[0])&&oW(e[1])?e.join(" ~ "):e}var wK=function(e){var t=e.separator,n=void 0===t?" : ":t,i=e.contentStyle,o=void 0===i?{}:i,s=e.itemStyle,a=void 0===s?{}:s,l=e.labelStyle,c=void 0===l?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,f=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=void 0!==y&&y,b=vK({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=vK({margin:0},c),w=!pW()(m),_=w?m:"",S=qq("recharts-default-tooltip",f),E=qq("recharts-tooltip-label",p);w&&g&&void 0!==u&&null!==u&&(_=g(m,u));var C=v?{role:"status","aria-live":"assertive"}:{};return r.createElement("div",pK({className:S,style:b},C),r.createElement("p",{className:E,style:x},r.isValidElement(_)?_:"".concat(_)),function(){if(u&&u.length){var e=(h?nK()(u,h):u).map((function(e,t){if("none"===e.type)return null;var i=vK({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),o=e.formatter||d||xK,s=e.value,l=e.name,c=s,h=l;if(o&&null!=c&&null!=h){var f=o(s,l,e,t,u);if(Array.isArray(f)){var p=mK(f,2);c=p[0],h=p[1]}else c=f}return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:i},oW(h)?r.createElement("span",{className:"recharts-tooltip-item-name"},h):null,oW(h)?r.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,r.createElement("span",{className:"recharts-tooltip-item-value"},c),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function _K(e){return _K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_K(e)}function SK(e,t,n){return t=function(e){var t=function(e,t){if("object"!=_K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_K(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var EK="recharts-tooltip-wrapper",CK={visibility:"hidden"};function TK(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return qq(EK,SK(SK(SK(SK({},"".concat(EK,"-right"),iW(n)&&t&&iW(t.x)&&n>=t.x),"".concat(EK,"-left"),iW(n)&&t&&iW(t.x)&&n<t.x),"".concat(EK,"-bottom"),iW(r)&&t&&iW(t.y)&&r>=t.y),"".concat(EK,"-top"),iW(r)&&t&&iW(t.y)&&r<t.y))}function jK(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,o=e.position,s=e.reverseDirection,a=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(o&&iW(o[r]))return o[r];var u=n[r]-a-i,d=n[r]+i;return t[r]?s[r]?u:d:s[r]?u<l[r]?Math.max(d,l[r]):Math.max(u,l[r]):d+a>l[r]+c?Math.max(u,l[r]):Math.max(d,l[r])}function kK(e){return kK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kK(e)}function NK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NK(Object(n),!0).forEach((function(t){DK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LK(r.key),r)}}function PK(e,t,n){return t=MK(t),function(e,t){if(t&&("object"===kK(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,OK()?Reflect.construct(t,n||[],MK(e).constructor):t.apply(e,n))}function OK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OK=function(){return!!e})()}function MK(e){return MK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},MK(e)}function RK(e,t){return RK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RK(e,t)}function DK(e,t,n){return(t=LK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LK(e){var t=function(e,t){if("object"!=kK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kK(t)?t:t+""}var FK=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return DK(e=PK(this,t,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),DK(e,"handleKeyDown",(function(t){var n,r,i,o;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(o=e.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==i?i:0}})})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RK(e,t)}(t,e),n=t,i=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,i=t.allowEscapeViewBox,o=t.animationDuration,s=t.animationEasing,a=t.children,l=t.coordinate,c=t.hasPayload,u=t.isAnimationActive,d=t.offset,h=t.position,f=t.reverseDirection,p=t.useTranslate3d,m=t.viewBox,g=t.wrapperStyle,y=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,o=e.offsetTopLeft,s=e.position,a=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=jK({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:o,position:s,reverseDirection:a,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=jK({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:o,position:s,reverseDirection:a,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):CK,cssClasses:TK({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),v=y.cssClasses,b=y.cssProperties,x=AK(AK({transition:u&&n?"transform ".concat(o,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return r.createElement("div",{tabIndex:-1,className:v,style:x,ref:function(t){e.wrapperNode=t}},a)}}],i&&IK(n.prototype,i),o&&IK(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent),BK={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return BK[e]},set:function(e,t){if("string"===typeof e)BK[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){BK[t]=e[t]}))}}},UK=n(977),VK=n.n(UK);function zK(e,t,n){return!0===t?VK()(e,n):gW()(t)?VK()(e,t):e}function $K(e){return $K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$K(e)}function HK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HK(Object(n),!0).forEach((function(t){QK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZK(r.key),r)}}function KK(e,t,n){return t=GK(t),function(e,t){if(t&&("object"===$K(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YK()?Reflect.construct(t,n||[],GK(e).constructor):t.apply(e,n))}function YK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YK=function(){return!!e})()}function GK(e){return GK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GK(e)}function XK(e,t){return XK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XK(e,t)}function QK(e,t,n){return(t=ZK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZK(e){var t=function(e,t){if("object"!=$K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$K(t)?t:t+""}function JK(e){return e.dataKey}var eY=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KK(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XK(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this,t=this.props,n=t.active,i=t.allowEscapeViewBox,o=t.animationDuration,s=t.animationEasing,a=t.content,l=t.coordinate,c=t.filterNull,u=t.isAnimationActive,d=t.offset,h=t.payload,f=t.payloadUniqBy,p=t.position,m=t.reverseDirection,g=t.useTranslate3d,y=t.viewBox,v=t.wrapperStyle,b=null!==h&&void 0!==h?h:[];c&&b.length&&(b=zK(h.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),f,JK));var x=b.length>0;return r.createElement(FK,{allowEscapeViewBox:i,animationDuration:o,animationEasing:s,isAnimationActive:u,active:n,coordinate:l,hasPayload:x,offset:d,position:p,reverseDirection:m,useTranslate3d:g,viewBox:y,wrapperStyle:v},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):"function"===typeof e?r.createElement(e,t):r.createElement(wK,t)}(a,qK(qK({},this.props),{},{payload:b})))}}],i&&WK(n.prototype,i),o&&WK(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent);QK(eY,"displayName","Tooltip"),QK(eY,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!BK.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var tY=n(643),nY=n.n(tY);Math.abs,Math.atan2;const rY=Math.cos,iY=(Math.max,Math.min,Math.sin),oY=Math.sqrt,sY=Math.PI,aY=2*sY;const lY={draw(e,t){const n=oY(t/sY);e.moveTo(n,0),e.arc(0,0,n,0,aY)}},cY={draw(e,t){const n=oY(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},uY=oY(1/3),dY=2*uY,hY={draw(e,t){const n=oY(t/dY),r=n*uY;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},fY={draw(e,t){const n=oY(t),r=-n/2;e.rect(r,r,n,n)}},pY=iY(sY/10)/iY(7*sY/10),mY=iY(aY/10)*pY,gY=-rY(aY/10)*pY,yY={draw(e,t){const n=oY(.8908130915292852*t),r=mY*n,i=gY*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const t=aY*o/5,s=rY(t),a=iY(t);e.lineTo(a*n,-s*n),e.lineTo(s*r-a*i,a*r+s*i)}e.closePath()}},vY=oY(3),bY={draw(e,t){const n=-oY(t/(3*vY));e.moveTo(0,2*n),e.lineTo(-vY*n,-n),e.lineTo(vY*n,-n),e.closePath()}},xY=-.5,wY=oY(3)/2,_Y=1/oY(12),SY=3*(_Y/2+1),EY={draw(e,t){const n=oY(t/SY),r=n/2,i=n*_Y,o=r,s=n*_Y+n,a=-o,l=s;e.moveTo(r,i),e.lineTo(o,s),e.lineTo(a,l),e.lineTo(xY*r-wY*i,wY*r+xY*i),e.lineTo(xY*o-wY*s,wY*o+xY*s),e.lineTo(xY*a-wY*l,wY*a+xY*l),e.lineTo(xY*r+wY*i,xY*i-wY*r),e.lineTo(xY*o+wY*s,xY*s-wY*o),e.lineTo(xY*a+wY*l,xY*l-wY*a),e.closePath()}};function CY(e){return function(){return e}}const TY=Math.PI,jY=2*TY,kY=1e-6,NY=jY-kY;function AY(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class IY{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?AY:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return AY;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,a=n-e,l=r-t,c=o-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>kY)if(Math.abs(u*a-l*c)>kY&&i){let h=n-o,f=r-s,p=a*a+l*l,m=h*h+f*f,g=Math.sqrt(p),y=Math.sqrt(d),v=i*Math.tan((TY-Math.acos((p+d-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>kY&&this._append`L${e+b*c},${t+b*u}`,this._append`A${i},${i},0,0,${+(u*h>c*f)},${this._x1=e+x*a},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),a=n*Math.sin(r),l=e+s,c=t+a,u=1^o,d=o?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>kY||Math.abs(this._y1-c)>kY)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%jY+jY),d>NY?this._append`A${n},${n},0,1,${u},${e-s},${t-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>kY&&this._append`A${n},${n},0,${+(d>=TY)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function PY(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new IY(t)}oY(3),oY(3);function OY(e){return OY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OY(e)}var MY=["type","size","sizeType"];function RY(){return RY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RY.apply(this,arguments)}function DY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DY(Object(n),!0).forEach((function(t){FY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=OY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OY(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BY(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var UY={symbolCircle:lY,symbolCross:cY,symbolDiamond:hY,symbolSquare:fY,symbolStar:yY,symbolTriangle:bY,symbolWye:EY},VY=Math.PI/180,zY=function(e){var t=e.type,n=void 0===t?"circle":t,i=e.size,o=void 0===i?64:i,s=e.sizeType,a=void 0===s?"area":s,l=LY(LY({},BY(e,MY)),{},{type:n,size:o,sizeType:a}),c=l.className,u=l.cx,d=l.cy,h=VW(l,!0);return u===+u&&d===+d&&o===+o?r.createElement("path",RY({},h,{className:qq("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:function(){var e=function(e){var t="symbol".concat(nY()(e));return UY[t]||lY}(n),t=function(e,t){let n=null,r=PY(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:CY(e||lY),t="function"===typeof t?t:CY(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:CY(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:CY(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*VY;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(o,a,n));return t()}()})):null};function $Y(e){return $Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$Y(e)}function HY(){return HY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HY.apply(this,arguments)}function qY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZY(r.key),r)}}function KY(e,t,n){return t=GY(t),function(e,t){if(t&&("object"===$Y(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YY()?Reflect.construct(t,n||[],GY(e).constructor):t.apply(e,n))}function YY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YY=function(){return!!e})()}function GY(e){return GY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GY(e)}function XY(e,t){return XY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XY(e,t)}function QY(e,t,n){return(t=ZY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZY(e){var t=function(e,t){if("object"!=$Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$Y(t)?t:t+""}zY.registerSymbol=function(e,t){UY["symbol".concat(nY()(e))]=t};var JY=32,eG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KY(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XY(e,t)}(t,e),n=t,i=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,i=JY/6,o=JY/3,s=e.inactive?t:e.color;if("plainline"===e.type)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:JY,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(n,"h").concat(o,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,"\n            H").concat(JY,"M").concat(2*o,",").concat(n,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return r.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(JY,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(e.legendIcon)){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qY(Object(n),!0).forEach((function(t){QY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete a.legendIcon,r.cloneElement(e.legendIcon,a)}return r.createElement(zY,{fill:s,cx:n,cy:n,size:JY,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,i=t.iconSize,o=t.layout,s=t.formatter,a=t.inactiveColor,l={x:0,y:0,width:JY,height:JY},c={display:"horizontal"===o?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var o=t.formatter||s,d=qq(QY(QY({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var h=gW()(t.value)?null:t.value;hW(!gW()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var f=t.inactive?a:t.color;return r.createElement("li",HY({className:d,style:c,key:"legend-item-".concat(n)},jW(e.props,t,n)),r.createElement(lK,{width:i,height:i,viewBox:l,style:u},e.renderIcon(t)),r.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},o?o(h,t,n):h))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,i=e.align;if(!t||!t.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===n?i:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}],i&&WY(n.prototype,i),o&&WY(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent);function tG(e){return tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tG(e)}QY(eG,"displayName","Legend"),QY(eG,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var nG=["ref"];function rG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rG(Object(n),!0).forEach((function(t){uG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dG(r.key),r)}}function sG(e,t,n){return t=lG(t),function(e,t){if(t&&("object"===tG(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,aG()?Reflect.construct(t,n||[],lG(e).constructor):t.apply(e,n))}function aG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aG=function(){return!!e})()}function lG(e){return lG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lG(e)}function cG(e,t){return cG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cG(e,t)}function uG(e,t,n){return(t=dG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dG(e){var t=function(e,t){if("object"!=tG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tG(t)?t:t+""}function hG(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fG(e){return e.value}var pG=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return uG(e=sG(this,t,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cG(e,t)}(t,e),n=t,i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?iG({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,o=r.align,s=r.verticalAlign,a=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:a&&a.right||0}:{left:a&&a.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===s?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===s?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),iG(iG({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,i=t.width,o=t.height,s=t.wrapperStyle,a=t.payloadUniqBy,l=t.payload,c=iG(iG({position:"absolute",width:i||"auto",height:o||"auto"},this.getDefaultPosition(s)),s);return r.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(r.isValidElement(e))return r.cloneElement(e,t);if("function"===typeof e)return r.createElement(e,t);t.ref;var n=hG(t,nG);return r.createElement(eG,n)}(n,iG(iG({},this.props),{},{payload:zK(l,a,fG)})))}}],o=[{key:"getWithHeight",value:function(e,t){var n=iG(iG({},this.defaultProps),e.props).layout;return"vertical"===n&&iW(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],i&&oG(n.prototype,i),o&&oG(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent);function mG(){return mG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mG.apply(this,arguments)}uG(pG,"displayName","Legend"),uG(pG,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var gG=function(e){var t=e.cx,n=e.cy,i=e.r,o=e.className,s=qq("recharts-dot",o);return t===+t&&n===+n&&i===+i?r.createElement("circle",mG({},VW(e,!1),TW(e),{className:s,cx:t,cy:n,r:i})):null},yG=n(5173),vG=n.n(yG),bG=Object.getOwnPropertyNames,xG=Object.getOwnPropertySymbols,wG=Object.prototype.hasOwnProperty;function _G(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function SG(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var i=r.cache,o=i.get(t),s=i.get(n);if(o&&s)return o===n&&s===t;i.set(t,n),i.set(n,t);var a=e(t,n,r);return i.delete(t),i.delete(n),a}}function EG(e){return bG(e).concat(xG(e))}var CG=Object.hasOwn||function(e,t){return wG.call(e,t)};function TG(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var jG=Object.getOwnPropertyDescriptor,kG=Object.keys;function NG(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function AG(e,t){return TG(e.getTime(),t.getTime())}function IG(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function PG(e,t){return e===t}function OG(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,o,s=new Array(r),a=e.entries(),l=0;(i=a.next())&&!i.done;){for(var c=t.entries(),u=!1,d=0;(o=c.next())&&!o.done;)if(s[d])d++;else{var h=i.value,f=o.value;if(n.equals(h[0],f[0],l,d,e,t,n)&&n.equals(h[1],f[1],h[0],f[0],e,t,n)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}var MG=TG;function RG(e,t,n){var r=kG(e),i=r.length;if(kG(t).length!==i)return!1;for(;i-- >0;)if(!zG(e,t,n,r[i]))return!1;return!0}function DG(e,t,n){var r,i,o,s=EG(e),a=s.length;if(EG(t).length!==a)return!1;for(;a-- >0;){if(!zG(e,t,n,r=s[a]))return!1;if(i=jG(e,r),o=jG(t,r),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function LG(e,t){return TG(e.valueOf(),t.valueOf())}function FG(e,t){return e.source===t.source&&e.flags===t.flags}function BG(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,o,s=new Array(r),a=e.values();(i=a.next())&&!i.done;){for(var l=t.values(),c=!1,u=0;(o=l.next())&&!o.done;){if(!s[u]&&n.equals(i.value,o.value,i.value,o.value,e,t,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function UG(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function VG(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function zG(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||CG(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var $G=Array.isArray,HG="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,qG=Object.assign,WG=Object.prototype.toString.call.bind(Object.prototype.toString);var KG=YG();YG({strict:!0}),YG({circular:!0}),YG({circular:!0,strict:!0}),YG({createInternalComparator:function(){return TG}}),YG({strict:!0,createInternalComparator:function(){return TG}}),YG({circular:!0,createInternalComparator:function(){return TG}}),YG({circular:!0,createInternalComparator:function(){return TG},strict:!0});function YG(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,i=e.createInternalComparator,o=e.createState,s=e.strict,a=void 0!==s&&s,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?DG:NG,areDatesEqual:AG,areErrorsEqual:IG,areFunctionsEqual:PG,areMapsEqual:r?_G(OG,DG):OG,areNumbersEqual:MG,areObjectsEqual:r?DG:RG,arePrimitiveWrappersEqual:LG,areRegExpsEqual:FG,areSetsEqual:r?_G(BG,DG):BG,areTypedArraysEqual:r?DG:UG,areUrlsEqual:VG};if(n&&(i=qG({},i,n(i))),t){var o=SG(i.areArraysEqual),s=SG(i.areMapsEqual),a=SG(i.areObjectsEqual),l=SG(i.areSetsEqual);i=qG({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,o=e.areMapsEqual,s=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,f,p){if(e===f)return!0;if(null==e||null==f)return!1;var m=typeof e;if(m!==typeof f)return!1;if("object"!==m)return"number"===m?s(e,f,p):"function"===m&&i(e,f,p);var g=e.constructor;if(g!==f.constructor)return!1;if(g===Object)return a(e,f,p);if($G(e))return t(e,f,p);if(null!=HG&&HG(e))return d(e,f,p);if(g===Date)return n(e,f,p);if(g===RegExp)return c(e,f,p);if(g===Map)return o(e,f,p);if(g===Set)return u(e,f,p);var y=WG(e);return"[object Date]"===y?n(e,f,p):"[object RegExp]"===y?c(e,f,p):"[object Map]"===y?o(e,f,p):"[object Set]"===y?u(e,f,p):"[object Object]"===y?"function"!==typeof e.then&&"function"!==typeof f.then&&a(e,f,p):"[object URL]"===y?h(e,f,p):"[object Error]"===y?r(e,f,p):"[object Arguments]"===y?a(e,f,p):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&l(e,f,p)}}(l),u=i?i(c):(t=c,function(e,n,r,i,o,s,a){return t(e,n,a)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(e,s){var a=r(),l=a.cache,c=void 0===l?t?new WeakMap:void 0:l,u=a.meta;return n(e,s,{cache:c,equals:i,meta:u,strict:o})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(e,t){return n(e,t,s)}}({circular:r,comparator:c,createState:o,equals:u,strict:a})}function GG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)}))}function XG(e){return XG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XG(e)}function QG(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ZG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZG(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JG(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=QG(r),o=i[0],s=i.slice(1);return"number"===typeof o?void GG(n.bind(null,s),o):(n(o),void GG(n.bind(null,s)))}"object"===XG(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function eX(e){return eX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eX(e)}function tX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tX(Object(n),!0).forEach((function(t){rX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rX(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==eX(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eX(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iX=function(e){return e},oX=function(e,t){return Object.keys(t).reduce((function(n,r){return nX(nX({},n),{},rX({},r,e(r,t[r])))}),{})},sX=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function aX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||cX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lX(e){return function(e){if(Array.isArray(e))return uX(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cX(e,t){if(e){if("string"===typeof e)return uX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uX(e,t):void 0}}function uX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dX=1e-4,hX=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},fX=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},pX=function(e,t){return function(n){var r=hX(e,t);return fX(r,n)}},mX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],s=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,o=1,s=1;break;case"ease":r=.25,i=.1,o=.25,s=1;break;case"ease-in":r=.42,i=0,o=1,s=1;break;case"ease-out":r=.42,i=0,o=.58,s=1;break;case"ease-in-out":r=0,i=0,o=.58,s=1;break;default:var a=t[0].split("(");if("cubic-bezier"===a[0]&&4===a[1].split(")")[0].split(",").length){var l=a[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=aX(l,4);r=c[0],i=c[1],o=c[2],s=c[3]}}[r,o,i,s].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var u,d,h=pX(r,o),f=pX(i,s),p=(u=r,d=o,function(e){var t=hX(u,d),n=[].concat(lX(t.map((function(e,t){return e*t})).slice(1)),[0]);return fX(n,e)}),m=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=h(n)-t,o=p(n);if(Math.abs(i-t)<dX||o<dX)return f(n);n=m(n-i/o)}return f(n)};return g.isStepper=!1,g},gX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mX(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,o=e.dt,s=void 0===o?17:o,a=function(e,t,r){var o=r+(-(e-t)*n-r*i)*s/1e3,a=r*s/1e3+e;return Math.abs(a-t)<dX&&Math.abs(o)<dX?[t,0]:[a,o]};return a.isStepper=!0,a.dt=s,a}();default:if("cubic-bezier"===r.split("(")[0])return mX(r)}return"function"===typeof r?r:null};function yX(e){return yX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yX(e)}function vX(e){return function(e){if(Array.isArray(e))return EX(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||SX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bX(Object(n),!0).forEach((function(t){wX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wX(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==yX(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yX(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||SX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SX(e,t){if(e){if("string"===typeof e)return EX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EX(e,t):void 0}}function EX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var CX=function(e,t,n){return e+(t-e)*n},TX=function(e){return e.from!==e.to},jX=function e(t,n,r){var i=oX((function(e,n){if(TX(n)){var r=_X(t(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return xX(xX({},n),{},{from:i,velocity:o})}return n}),n);return r<1?oX((function(e,t){return TX(t)?xX(xX({},t),{},{velocity:CX(t.velocity,i[e].velocity,r),from:CX(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};const kX=function(e,t,n,r,i){var o,s,a,l,c=(o=e,s=t,[Object.keys(o),Object.keys(s)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),u=c.reduce((function(n,r){return xX(xX({},n),{},wX({},r,[e[r],t[r]]))}),{}),d=c.reduce((function(n,r){return xX(xX({},n),{},wX({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),h=-1,f=function(){return null};return f=n.isStepper?function(r){a||(a=r);var o=(r-a)/n.dt;d=jX(n,d,o),i(xX(xX(xX({},e),t),oX((function(e,t){return t.from}),d))),a=r,Object.values(d).filter(TX).length&&(h=requestAnimationFrame(f))}:function(o){l||(l=o);var s=(o-l)/r,a=oX((function(e,t){return CX.apply(void 0,vX(t).concat([n(s)]))}),u);if(i(xX(xX(xX({},e),t),a)),s<1)h=requestAnimationFrame(f);else{var c=oX((function(e,t){return CX.apply(void 0,vX(t).concat([n(1)]))}),u);i(xX(xX(xX({},e),t),c))}},function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(h)}}};function NX(e){return NX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NX(e)}var AX=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function IX(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function PX(e){return function(e){if(Array.isArray(e))return OX(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return OX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function MX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MX(Object(n),!0).forEach((function(t){DX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DX(e,t,n){return(t=FX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FX(r.key),r)}}function FX(e){var t=function(e,t){if("object"!==NX(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==NX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===NX(t)?t:String(t)}function BX(e,t){return BX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BX(e,t)}function UX(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(zH){return!1}}();return function(){var n,r=$X(e);if(t){var i=$X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VX(this,n)}}function VX(e,t){if(t&&("object"===NX(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zX(e)}function zX(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $X(e){return $X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$X(e)}var HX=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BX(e,t)}(s,e);var t,n,i,o=UX(s);function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=(n=o.call(this,e,t)).props,i=r.isActive,a=r.attributeName,l=r.from,c=r.to,u=r.steps,d=r.children,h=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(zX(n)),n.changeStyle=n.changeStyle.bind(zX(n)),!i||h<=0)return n.state={style:{}},"function"===typeof d&&(n.state={style:c}),VX(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof d)return n.state={style:l},VX(n);n.state={style:a?DX({},a,l):l}}else n.state={style:{}};return n}return t=s,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,o=t.shouldReAnimate,s=t.to,a=t.from,l=this.state.style;if(r)if(n){if(!(KG(e.to,s)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||o?a:e.to;if(this.state&&l){var d={style:i?DX({},i,u):u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(d)}this.runAnimation(RX(RX({},this.props),{},{from:u,begin:0}))}}else{var h={style:i?DX({},i,s):s};this.state&&l&&(i&&l[i]!==s||!i&&l!==s)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,o=e.easing,s=e.begin,a=e.onAnimationEnd,l=e.onAnimationStart,c=kX(n,r,gX(o),i,this.changeStyle);this.manager.start([l,s,function(){t.stopJSAnimation=c()},i,a])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,o=n[0],s=o.style,a=o.duration,l=void 0===a?0:a;return this.manager.start([i].concat(PX(n.reduce((function(e,r,i){if(0===i)return e;var o=r.duration,s=r.easing,a=void 0===s?"ease":s,l=r.style,c=r.properties,u=r.onAnimationEnd,d=i>0?n[i-1]:r,h=c||Object.keys(l);if("function"===typeof a||"spring"===a)return[].concat(PX(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:o,easing:a}),o]);var f=sX(h,o,a),p=RX(RX(RX({},d.style),l),{},{transition:f});return[].concat(PX(e),[p,o,u]).filter(iX)}),[s,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=JG());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,o=e.easing,s=e.onAnimationStart,a=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof c&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var d=r?DX({},r,i):i,h=sX(Object.keys(d),n,o);u.start([s,t,RX(RX({},d),{},{transition:h}),n,a])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration),i=(e.attributeName,e.easing,e.isActive),o=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,IX(e,AX)),s=r.Children.count(t),a=this.state.style;if("function"===typeof t)return t(a);if(!i||0===s||n<=0)return t;var l=function(e){var t=e.props,n=t.style,i=void 0===n?{}:n,s=t.className;return(0,r.cloneElement)(e,RX(RX({},o),{},{style:RX(RX({},i),a),className:s}))};return 1===s?l(r.Children.only(t)):r.createElement("div",null,r.Children.map(t,(function(e){return l(e)})))}}],n&&LX(t.prototype,n),i&&LX(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.PureComponent);HX.displayName="Animate",HX.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},HX.propTypes={from:vG().oneOfType([vG().object,vG().string]),to:vG().oneOfType([vG().object,vG().string]),attributeName:vG().string,duration:vG().number,begin:vG().number,easing:vG().oneOfType([vG().string,vG().func]),steps:vG().arrayOf(vG().shape({duration:vG().number.isRequired,style:vG().object.isRequired,easing:vG().oneOfType([vG().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),vG().func]),properties:vG().arrayOf("string"),onAnimationEnd:vG().func})),children:vG().oneOfType([vG().node,vG().func]),isActive:vG().bool,canBegin:vG().bool,onAnimationEnd:vG().func,shouldReAnimate:vG().bool,onAnimationStart:vG().func,onAnimationReStart:vG().func};const qX=HX;function WX(e){return WX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WX(e)}function KX(){return KX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KX.apply(this,arguments)}function YX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return GX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GX(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XX(Object(n),!0).forEach((function(t){ZX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=WX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=WX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WX(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JX=function(e,t,n,r,i){var o,s=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(s>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>s?s:i[d];o="M".concat(e,",").concat(t+a*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),o+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+a*u[1])),o+="L ".concat(e+n,",").concat(t+r-a*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),o+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-a*u[3])),o+="Z"}else if(s>0&&i===+i&&i>0){var h=Math.min(s,i);o="M ".concat(e,",").concat(t+a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+a*h,"\n            L ").concat(e+n,",").concat(t+r-a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-a*h," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},eQ=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,o=t.y,s=t.width,a=t.height;if(Math.abs(s)>0&&Math.abs(a)>0){var l=Math.min(i,i+s),c=Math.max(i,i+s),u=Math.min(o,o+a),d=Math.max(o,o+a);return n>=l&&n<=c&&r>=u&&r<=d}return!1},tQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nQ=function(e){var t=QX(QX({},tQ),e),n=(0,r.useRef)(),i=YX((0,r.useState)(-1),2),o=i[0],s=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(t){}}),[]);var a=t.x,l=t.y,c=t.width,u=t.height,d=t.radius,h=t.className,f=t.animationEasing,p=t.animationDuration,m=t.animationBegin,g=t.isAnimationActive,y=t.isUpdateAnimationActive;if(a!==+a||l!==+l||c!==+c||u!==+u||0===c||0===u)return null;var v=qq("recharts-rectangle",h);return y?r.createElement(qX,{canBegin:o>0,from:{width:c,height:u,x:a,y:l},to:{width:c,height:u,x:a,y:l},duration:p,animationEasing:f,isActive:y},(function(e){var i=e.width,s=e.height,a=e.x,l=e.y;return r.createElement(qX,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:g,easing:f},r.createElement("path",KX({},VW(t,!0),{className:v,d:JX(a,l,i,s,d),ref:n})))})):r.createElement("path",KX({},VW(t,!0),{className:v,d:JX(a,l,c,u,d)}))};function rQ(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function iQ(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class oQ extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cQ;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(sQ(this,e))}has(e){return super.has(sQ(this,e))}set(e,t){return super.set(aQ(this,e),t)}delete(e){return super.delete(lQ(this,e))}}Set;function sQ(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function aQ(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function lQ(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function cQ(e){return null!==e&&"object"===typeof e?e.valueOf():e}const uQ=Symbol("implicit");function dQ(){var e=new oQ,t=[],n=[],r=uQ;function i(i){let o=e.get(i);if(void 0===o){if(r!==uQ)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new oQ;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return dQ(t,n).unknown(r)},rQ.apply(i,arguments),i}function hQ(){var e,t,n=dQ().unknown(void 0),r=n.domain,i=n.range,o=0,s=1,a=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=s<o,h=d?s:o,f=d?o:s;e=(f-h)/Math.max(1,n-l+2*c),a&&(e=Math.floor(e)),h+=(f-h-e*(n-l))*u,t=e*(1-l),a&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}(n).map((function(t){return h+e*t}));return i(d?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([o,s]=e,o=+o,s=+s,d()):[o,s]},n.rangeRound=function(e){return[o,s]=e,o=+o,s=+s,a=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,d()):a},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return hQ(r(),[o,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},rQ.apply(d(),arguments)}function fQ(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fQ(t())},e}function pQ(){return fQ(hQ.apply(null,arguments).paddingInner(1))}function mQ(e){return mQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mQ(e)}function gQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gQ(Object(n),!0).forEach((function(t){vQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vQ(e,t,n){return t=function(e){var t=function(e,t){if("object"!=mQ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mQ(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bQ={widthCache:{},cacheCount:0},xQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wQ="recharts_measurement_span";var _Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||BK.isSsr)return{width:0,height:0};var n=function(e){var t=yQ({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(bQ.widthCache[r])return bQ.widthCache[r];try{var i=document.getElementById(wQ);i||((i=document.createElement("span")).setAttribute("id",wQ),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=yQ(yQ({},xQ),n);Object.assign(i.style,o),i.textContent="".concat(e);var s=i.getBoundingClientRect(),a={width:s.width,height:s.height};return bQ.widthCache[r]=a,++bQ.cacheCount>2e3&&(bQ.cacheCount=0,bQ.widthCache={}),a}catch(zH){return{width:0,height:0}}};function SQ(e){return SQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SQ(e)}function EQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return CQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CQ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function TQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jQ(r.key),r)}}function jQ(e){var t=function(e,t){if("object"!=SQ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SQ(t)?t:t+""}var kQ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NQ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,IQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},OQ=Object.keys(PQ),MQ="NaN";var RQ=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||AQ.test(n)||(this.num=NaN,this.unit=""),OQ.includes(n)&&(this.num=function(e,t){return e*PQ[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=EQ(null!==(n=IQ.exec(t))&&void 0!==n?n:[],3),i=r[1],o=r[2];return new e(parseFloat(i),null!==o&&void 0!==o?o:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&TQ(t.prototype,n),r&&TQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function DQ(e){if(e.includes(MQ))return MQ;for(var t=e;t.includes("*")||t.includes("/");){var n,r=EQ(null!==(n=kQ.exec(t))&&void 0!==n?n:[],4),i=r[1],o=r[2],s=r[3],a=RQ.parse(null!==i&&void 0!==i?i:""),l=RQ.parse(null!==s&&void 0!==s?s:""),c="*"===o?a.multiply(l):a.divide(l);if(c.isNaN())return MQ;t=t.replace(kQ,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=EQ(null!==(u=NQ.exec(t))&&void 0!==u?u:[],4),h=d[1],f=d[2],p=d[3],m=RQ.parse(null!==h&&void 0!==h?h:""),g=RQ.parse(null!==p&&void 0!==p?p:""),y="+"===f?m.add(g):m.subtract(g);if(y.isNaN())return MQ;t=t.replace(NQ,y.toString())}return t}var LQ=/\(([^()]*)\)/;function FQ(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=EQ(LQ.exec(t),2)[1];t=t.replace(LQ,DQ(n))}return t}(t),t=DQ(t)}function BQ(e){var t=function(e){try{return FQ(e)}catch(zH){return MQ}}(e.slice(5,-1));return t===MQ?"":t}var UQ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],VQ=["dx","dy","angle","className","breakAll"];function zQ(){return zQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zQ.apply(this,arguments)}function $Q(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qQ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var WQ=/[ \f\n\r\t\v\u2028\u2029]+/,KQ=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return pW()(t)||(i=n?t.toString().split(""):t.toString().split(WQ)),{wordsWithComputedWidth:i.map((function(e){return{word:e,width:_Q(e,r).width}})),spaceWidth:n?0:_Q("\xa0",r).width}}catch(zH){return null}},YQ=function(e){return[{words:pW()(e)?[]:e.toString().split(WQ)}]},GQ=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,o=e.breakAll,s=e.maxLines;if((t||n)&&!BK.isSsr){var a=KQ({breakAll:o,children:r,style:i});return a?function(e,t,n,r,i){var o=e.maxLines,s=e.children,a=e.style,l=e.breakAll,c=iW(o),u=s,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var o=t.word,s=t.width,a=e[e.length-1];if(a&&(null==r||i||a.width+s+n<Number(r)))a.words.push(o),a.width+=s+n;else{var l={words:[o],width:s};e.push(l)}return e}),[])},h=d(t);if(!c)return h;for(var f,p=function(e){var t=u.slice(0,e),n=KQ({breakAll:l,style:a,children:t+"\u2026"}).wordsWithComputedWidth,i=d(n),s=i.length>o||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>Number(r);return[s,i]},m=0,g=u.length-1,y=0;m<=g&&y<=u.length-1;){var v=Math.floor((m+g)/2),b=HQ(p(v-1),2),x=b[0],w=b[1],_=HQ(p(v),1)[0];if(x||_||(m=v+1),x&&_&&(g=v-1),!x&&_){f=w;break}y++}return f||h}({breakAll:o,children:r,maxLines:s,style:i},a.wordsWithComputedWidth,a.spaceWidth,t,n):YQ(r)}return YQ(r)},XQ="#808080",QQ=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,s=e.lineHeight,a=void 0===s?"1em":s,l=e.capHeight,c=void 0===l?"0.71em":l,u=e.scaleToFit,d=void 0!==u&&u,h=e.textAnchor,f=void 0===h?"start":h,p=e.verticalAnchor,m=void 0===p?"end":p,g=e.fill,y=void 0===g?XQ:g,v=$Q(e,UQ),b=(0,r.useMemo)((function(){return GQ({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})}),[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),x=v.dx,w=v.dy,_=v.angle,S=v.className,E=v.breakAll,C=$Q(v,VQ);if(!oW(n)||!oW(o))return null;var T,j=n+(iW(x)?x:0),k=o+(iW(w)?w:0);switch(m){case"start":T=BQ("calc(".concat(c,")"));break;case"middle":T=BQ("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:T=BQ("calc(".concat(b.length-1," * -").concat(a,")"))}var N=[];if(d){var A=b[0].width,I=v.width;N.push("scale(".concat((iW(I)?I/A:1)/A,")"))}return _&&N.push("rotate(".concat(_,", ").concat(j,", ").concat(k,")")),N.length&&(C.transform=N.join(" ")),r.createElement("text",zQ({},VW(C,!0),{x:j,y:k,className:qq("recharts-text",S),textAnchor:f,fill:y.includes("url")?XQ:y}),b.map((function(e,t){var n=e.words.join(E?"":" ");return r.createElement("tspan",{x:j,dy:0===t?T:a,key:"".concat(n,"-").concat(t)},n)})))};const ZQ=Math.sqrt(50),JQ=Math.sqrt(10),eZ=Math.sqrt(2);function tZ(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=ZQ?10:o>=JQ?5:o>=eZ?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?tZ(e,t,2*n):[a,l,c]}function nZ(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,o,s]=r?tZ(t,e,n):tZ(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function rZ(e,t,n){return tZ(e=+e,t=+t,n=+n)[2]}function iZ(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?rZ(t,e,n):rZ(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function oZ(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sZ(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function aZ(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=oZ,n=(t,n)=>oZ(e(t),n),r=(t,n)=>e(t)-n):(t=e===oZ||e===sZ?e:lZ,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function lZ(){return 0}function cZ(e){return null===e?NaN:+e}const uZ=aZ(oZ),dZ=uZ.right,hZ=(uZ.left,aZ(cZ).center,dZ);function fZ(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pZ(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mZ(){}var gZ=.7,yZ=1/gZ,vZ="\\s*([+-]?\\d+)\\s*",bZ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xZ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wZ=/^#([0-9a-f]{3,8})$/,_Z=new RegExp(`^rgb\\(${vZ},${vZ},${vZ}\\)$`),SZ=new RegExp(`^rgb\\(${xZ},${xZ},${xZ}\\)$`),EZ=new RegExp(`^rgba\\(${vZ},${vZ},${vZ},${bZ}\\)$`),CZ=new RegExp(`^rgba\\(${xZ},${xZ},${xZ},${bZ}\\)$`),TZ=new RegExp(`^hsl\\(${bZ},${xZ},${xZ}\\)$`),jZ=new RegExp(`^hsla\\(${bZ},${xZ},${xZ},${bZ}\\)$`),kZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function NZ(){return this.rgb().formatHex()}function AZ(){return this.rgb().formatRgb()}function IZ(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?PZ(t):3===n?new RZ(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?OZ(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?OZ(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=_Z.exec(e))?new RZ(t[1],t[2],t[3],1):(t=SZ.exec(e))?new RZ(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=EZ.exec(e))?OZ(t[1],t[2],t[3],t[4]):(t=CZ.exec(e))?OZ(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=TZ.exec(e))?VZ(t[1],t[2]/100,t[3]/100,1):(t=jZ.exec(e))?VZ(t[1],t[2]/100,t[3]/100,t[4]):kZ.hasOwnProperty(e)?PZ(kZ[e]):"transparent"===e?new RZ(NaN,NaN,NaN,0):null}function PZ(e){return new RZ(e>>16&255,e>>8&255,255&e,1)}function OZ(e,t,n,r){return r<=0&&(e=t=n=NaN),new RZ(e,t,n,r)}function MZ(e,t,n,r){return 1===arguments.length?function(e){return e instanceof mZ||(e=IZ(e)),e?new RZ((e=e.rgb()).r,e.g,e.b,e.opacity):new RZ}(e):new RZ(e,t,n,null==r?1:r)}function RZ(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function DZ(){return`#${UZ(this.r)}${UZ(this.g)}${UZ(this.b)}`}function LZ(){const e=FZ(this.opacity);return`${1===e?"rgb(":"rgba("}${BZ(this.r)}, ${BZ(this.g)}, ${BZ(this.b)}${1===e?")":`, ${e})`}`}function FZ(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function BZ(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function UZ(e){return((e=BZ(e))<16?"0":"")+e.toString(16)}function VZ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $Z(e,t,n,r)}function zZ(e){if(e instanceof $Z)return new $Z(e.h,e.s,e.l,e.opacity);if(e instanceof mZ||(e=IZ(e)),!e)return new $Z;if(e instanceof $Z)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=t===o?(n-r)/a+6*(n<r):n===o?(r-t)/a+2:(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new $Z(s,a,l,e.opacity)}function $Z(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function HZ(e){return(e=(e||0)%360)<0?e+360:e}function qZ(e){return Math.max(0,Math.min(1,e||0))}function WZ(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function KZ(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}fZ(mZ,IZ,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:NZ,formatHex:NZ,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return zZ(this).formatHsl()},formatRgb:AZ,toString:AZ}),fZ(RZ,MZ,pZ(mZ,{brighter(e){return e=null==e?yZ:Math.pow(yZ,e),new RZ(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?gZ:Math.pow(gZ,e),new RZ(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new RZ(BZ(this.r),BZ(this.g),BZ(this.b),FZ(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DZ,formatHex:DZ,formatHex8:function(){return`#${UZ(this.r)}${UZ(this.g)}${UZ(this.b)}${UZ(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:LZ,toString:LZ})),fZ($Z,(function(e,t,n,r){return 1===arguments.length?zZ(e):new $Z(e,t,n,null==r?1:r)}),pZ(mZ,{brighter(e){return e=null==e?yZ:Math.pow(yZ,e),new $Z(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?gZ:Math.pow(gZ,e),new $Z(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new RZ(WZ(e>=240?e-240:e+120,i,r),WZ(e,i,r),WZ(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new $Z(HZ(this.h),qZ(this.s),qZ(this.l),FZ(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=FZ(this.opacity);return`${1===e?"hsl(":"hsla("}${HZ(this.h)}, ${100*qZ(this.s)}%, ${100*qZ(this.l)}%${1===e?")":`, ${e})`}`}}));const YZ=e=>()=>e;function GZ(e,t){return function(n){return e+n*t}}function XZ(e){return 1===(e=+e)?QZ:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):YZ(isNaN(t)?n:t)}}function QZ(e,t){var n=t-e;return n?GZ(e,n):YZ(isNaN(e)?t:e)}const ZZ=function e(t){var n=XZ(t);function r(e,t){var r=n((e=MZ(e)).r,(t=MZ(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),s=QZ(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function JZ(e){return function(t){var n,r,i=t.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=MZ(t[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=e(o),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=o(e),r.g=s(e),r.b=a(e),r+""}}}JZ((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return KZ((n-r/t)*t,s,i,o,a)}})),JZ((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return KZ((n-r/t)*t,i,o,s,a)}}));function eJ(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=lJ(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=o[n](e);return s}}function tJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function nJ(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function rJ(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=lJ(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var iJ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oJ=new RegExp(iJ.source,"g");function sJ(e,t){var n,r,i,o=iJ.lastIndex=oJ.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=iJ.exec(e))&&(r=oJ.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:nJ(n,r)})),o=oJ.lastIndex;return o<t.length&&(i=t.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function aJ(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function lJ(e,t){var n,r=typeof t;return null==t||"boolean"===r?YZ(t):("number"===r?nJ:"string"===r?(n=IZ(t))?(t=n,ZZ):sJ:t instanceof IZ?ZZ:t instanceof Date?tJ:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?aJ:Array.isArray(t)?eJ:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?rJ:nJ)(e,t)}function cJ(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function uJ(e){return+e}var dJ=[0,1];function hJ(e){return e}function fJ(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function pJ(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=fJ(i,r),o=n(s,o)):(r=fJ(r,i),o=n(o,s)),function(e){return o(r(e))}}function mJ(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=fJ(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(t){var n=hZ(e,t,1,r)-1;return o[n](i[n](t))}}function gJ(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function yJ(){var e,t,n,r,i,o,s=dJ,a=dJ,l=lJ,c=hJ;function u(){var e=Math.min(s.length,a.length);return c!==hJ&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),r=e>2?mJ:pJ,i=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(s.map(e),a,l)))(e(c(t)))}return d.invert=function(n){return c(t((o||(o=r(a,s.map(e),nJ)))(n)))},d.domain=function(e){return arguments.length?(s=Array.from(e,uJ),u()):s.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),l=cJ,u()},d.clamp=function(e){return arguments.length?(c=!!e||hJ,u()):c!==hJ},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function vJ(){return yJ()(hJ,hJ)}var bJ,xJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wJ(e){if(!(t=xJ.exec(e)))throw new Error("invalid format: "+e);var t;return new _J({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function _J(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function SJ(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function EJ(e){return(e=SJ(Math.abs(e)))?e[1]:NaN}function CJ(e,t){var n=SJ(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}wJ.prototype=_J.prototype,_J.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const TJ={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CJ(100*e,t),r:CJ,s:function(e,t){var n=SJ(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(bJ=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+SJ(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jJ(e){return e}var kJ,NJ,AJ,IJ=Array.prototype.map,PJ=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function OJ(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?jJ:(t=IJ.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(e.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?jJ:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(IJ.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=wJ(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):TJ[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===h?o:/[%p]/.test(v)?l:"",w=TJ[v],_=/[defgprs%]/.test(v);function S(e){var i,o,l,h=b,S=x;if("c"===v)S=w(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==d&&(E=!1),h=(E?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===v?PJ[8+bJ/3]:"")+S+(E&&"("===d?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?s+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var C=h.length+e.length+S.length,T=C<p?new Array(p-C+1).join(t):"";switch(m&&f&&(e=r(T+e,T.length?p-S.length:1/0),T=""),n){case"<":e=h+e+S+T;break;case"=":e=h+T+e+S;break;case"^":e=T.slice(0,C=T.length>>1)+h+e+S+T.slice(C);break;default:e=T+h+e+S}return a(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=wJ(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(EJ(t)/3))),i=Math.pow(10,-r),o=PJ[8+r/3];return function(e){return n(i*e)+o}}}}function MJ(e,t,n,r){var i,o=iZ(e,t,n);switch((r=wJ(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(EJ(t)/3)))-EJ(Math.abs(e)))}(o,s))||(r.precision=i),AJ(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,EJ(t)-EJ(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-EJ(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return NJ(r)}function RJ(e){var t=e.domain;return e.ticks=function(e){var n=t();return nZ(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return MJ(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),s=0,a=o.length-1,l=o[s],c=o[a],u=10;for(c<l&&(i=l,l=c,c=i,i=s,s=a,a=i);u-- >0;){if((i=rZ(l,c,n))===r)return o[s]=l,o[a]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function DJ(){var e=vJ();return e.copy=function(){return gJ(e,DJ())},rQ.apply(e,arguments),RJ(e)}function LJ(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,uJ),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return LJ(e).unknown(t)},e=arguments.length?Array.from(e,uJ):[0,1],RJ(n)}function FJ(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],s=e[i];return s<o&&(n=r,r=i,i=n,n=o,o=s,s=n),e[r]=t.floor(o),e[i]=t.ceil(s),e}function BJ(e){return Math.log(e)}function UJ(e){return Math.exp(e)}function VJ(e){return-Math.log(-e)}function zJ(e){return-Math.exp(-e)}function $J(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HJ(e){return(t,n)=>-e(-t,n)}function qJ(e){const t=e(BJ,UJ),n=t.domain;let r,i,o=10;function s(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?$J:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=HJ(r),i=HJ(i),e(VJ,zJ)):e(BJ,UJ),t}return t.base=function(e){return arguments.length?(o=+e,s()):o},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{const t=n();let s=t[0],a=t[t.length-1];const l=a<s;l&&([s,a]=[a,s]);let c,u,d=r(s),h=r(a);const f=null==e?10:+e;let p=[];if(!(o%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<o;++c)if(u=d<0?c/i(-d):c*i(d),!(u<s)){if(u>a)break;p.push(u)}}else for(;d<=h;++d)for(c=o-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<s)){if(u>a)break;p.push(u)}2*p.length<f&&(p=nZ(s,a,f))}else p=nZ(d,h,Math.min(h-d,f)).map(i);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=wJ(n)).precision||(n.trim=!0),n=NJ(n)),e===1/0)return n;const s=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=s?n(e):""}},t.nice=()=>n(FJ(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function WJ(){const e=qJ(yJ()).domain([1,10]);return e.copy=()=>gJ(e,WJ()).base(e.base()),rQ.apply(e,arguments),e}function KJ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function YJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function GJ(e){var t=1,n=e(KJ(t),YJ(t));return n.constant=function(n){return arguments.length?e(KJ(t=+n),YJ(t)):t},RJ(n)}function XJ(){var e=GJ(yJ());return e.copy=function(){return gJ(e,XJ()).constant(e.constant())},rQ.apply(e,arguments)}function QJ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ZJ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function JJ(e){return e<0?-e*e:e*e}function e0(e){var t=e(hJ,hJ),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(hJ,hJ):.5===n?e(ZJ,JJ):e(QJ(n),QJ(1/n)):n},RJ(t)}function t0(){var e=e0(yJ());return e.copy=function(){return gJ(e,t0()).exponent(e.exponent())},rQ.apply(e,arguments),e}function n0(){return t0.apply(null,arguments).exponent(.5)}function r0(e){return Math.sign(e)*e*e}function i0(){var e,t=vJ(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(r0(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,uJ)).map(r0)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return i0(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},rQ.apply(i,arguments),RJ(i)}function o0(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function s0(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function a0(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oZ;if(e===oZ)return l0;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function l0(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function c0(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?l0:a0(i);r>n;){if(r-n>600){const o=r-n+1,s=t-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);c0(e,t,Math.max(n,Math.floor(t-s*l/o+c)),Math.min(r,Math.floor(t+(o-s)*l/o+c)),i)}const o=e[t];let s=n,a=r;for(u0(e,n,t),i(e[r],o)>0&&u0(e,n,r);s<a;){for(u0(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}0===i(e[n],o)?u0(e,n,a):(++a,u0(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function u0(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function d0(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return s0(e);if(t>=1)return o0(e);var r,i=(r-1)*t,o=Math.floor(i),s=o0(c0(e,o).subarray(0,o+1));return s+(s0(e.subarray(o+1))-s)*(i-o)}}function h0(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cZ;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(i-o)}}function f0(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=h0(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[hZ(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(oZ),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return f0().domain(t).range(n).unknown(e)},rQ.apply(o,arguments)}function p0(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[hZ(i,t,0,r)]:e}function a(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return s}return s.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,a()):[t,n]},s.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,a()):o.slice()},s.invertExtent=function(e){var s=o.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,i[0]]:s>=r?[i[r-1],n]:[i[s-1],i[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return p0().domain([t,n]).range(o).unknown(e)},rQ.apply(RJ(s),arguments)}function m0(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[hZ(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return m0().domain(t).range(n).unknown(e)},rQ.apply(i,arguments)}kJ=OJ({thousands:",",grouping:[3],currency:["$",""]}),NJ=kJ.format,AJ=kJ.formatPrefix;const g0=1e3,y0=6e4,v0=36e5,b0=864e5,x0=6048e5,w0=2592e6,_0=31536e6,S0=new Date,E0=new Date;function C0(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;let a;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=n=>C0((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(S0.setTime(+t),E0.setTime(+r),e(S0),e(E0),Math.floor(n(S0,E0))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const T0=C0((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));T0.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?C0((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):T0:null);T0.range;const j0=C0((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*g0)}),((e,t)=>(t-e)/g0),(e=>e.getUTCSeconds())),k0=(j0.range,C0((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*g0)}),((e,t)=>{e.setTime(+e+t*y0)}),((e,t)=>(t-e)/y0),(e=>e.getMinutes()))),N0=(k0.range,C0((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*y0)}),((e,t)=>(t-e)/y0),(e=>e.getUTCMinutes()))),A0=(N0.range,C0((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*g0-e.getMinutes()*y0)}),((e,t)=>{e.setTime(+e+t*v0)}),((e,t)=>(t-e)/v0),(e=>e.getHours()))),I0=(A0.range,C0((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*v0)}),((e,t)=>(t-e)/v0),(e=>e.getUTCHours()))),P0=(I0.range,C0((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*y0)/b0),(e=>e.getDate()-1))),O0=(P0.range,C0((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/b0),(e=>e.getUTCDate()-1))),M0=(O0.range,C0((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/b0),(e=>Math.floor(e/b0))));M0.range;function R0(e){return C0((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*y0)/x0))}const D0=R0(0),L0=R0(1),F0=R0(2),B0=R0(3),U0=R0(4),V0=R0(5),z0=R0(6);D0.range,L0.range,F0.range,B0.range,U0.range,V0.range,z0.range;function $0(e){return C0((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/x0))}const H0=$0(0),q0=$0(1),W0=$0(2),K0=$0(3),Y0=$0(4),G0=$0(5),X0=$0(6),Q0=(H0.range,q0.range,W0.range,K0.range,Y0.range,G0.range,X0.range,C0((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),Z0=(Q0.range,C0((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),J0=(Z0.range,C0((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));J0.every=e=>isFinite(e=Math.floor(e))&&e>0?C0((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;J0.range;const e1=C0((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));e1.every=e=>isFinite(e=Math.floor(e))&&e>0?C0((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;e1.range;function t1(e,t,n,r,i,o){const s=[[j0,1,g0],[j0,5,5e3],[j0,15,15e3],[j0,30,3e4],[o,1,y0],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,v0],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,b0],[r,2,1728e5],[n,1,x0],[t,1,w0],[t,3,7776e6],[e,1,_0]];function a(t,n,r){const i=Math.abs(n-t)/r,o=aZ((e=>{let[,,t]=e;return t})).right(s,i);if(o===s.length)return e.every(iZ(t/_0,n/_0,r));if(0===o)return T0.every(Math.max(iZ(t,n,r),1));const[a,l]=s[i/s[o-1][2]<s[o][2]/i?o-1:o];return a.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:a(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},a]}const[n1,r1]=t1(e1,Z0,H0,M0,I0,N0),[i1,o1]=t1(J0,Q0,D0,P0,A0,k0);function s1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function l1(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var c1,u1,d1,h1={"-":"",_:" ",0:"0"},f1=/^\s*\d+/,p1=/^%/,m1=/[\\^$*+?|[\]().{}]/g;function g1(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function y1(e){return e.replace(m1,"\\$&")}function v1(e){return new RegExp("^(?:"+e.map(y1).join("|")+")","i")}function b1(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function x1(e,t,n){var r=f1.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function w1(e,t,n){var r=f1.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function _1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function S1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function E1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function C1(e,t,n){var r=f1.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function T1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function j1(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function k1(e,t,n){var r=f1.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function N1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function A1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function I1(e,t,n){var r=f1.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function P1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function O1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function M1(e,t,n){var r=f1.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function R1(e,t,n){var r=f1.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function D1(e,t,n){var r=f1.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function L1(e,t,n){var r=p1.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function F1(e,t,n){var r=f1.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function B1(e,t,n){var r=f1.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function U1(e,t){return g1(e.getDate(),t,2)}function V1(e,t){return g1(e.getHours(),t,2)}function z1(e,t){return g1(e.getHours()%12||12,t,2)}function $1(e,t){return g1(1+P0.count(J0(e),e),t,3)}function H1(e,t){return g1(e.getMilliseconds(),t,3)}function q1(e,t){return H1(e,t)+"000"}function W1(e,t){return g1(e.getMonth()+1,t,2)}function K1(e,t){return g1(e.getMinutes(),t,2)}function Y1(e,t){return g1(e.getSeconds(),t,2)}function G1(e){var t=e.getDay();return 0===t?7:t}function X1(e,t){return g1(D0.count(J0(e)-1,e),t,2)}function Q1(e){var t=e.getDay();return t>=4||0===t?U0(e):U0.ceil(e)}function Z1(e,t){return e=Q1(e),g1(U0.count(J0(e),e)+(4===J0(e).getDay()),t,2)}function J1(e){return e.getDay()}function e2(e,t){return g1(L0.count(J0(e)-1,e),t,2)}function t2(e,t){return g1(e.getFullYear()%100,t,2)}function n2(e,t){return g1((e=Q1(e)).getFullYear()%100,t,2)}function r2(e,t){return g1(e.getFullYear()%1e4,t,4)}function i2(e,t){var n=e.getDay();return g1((e=n>=4||0===n?U0(e):U0.ceil(e)).getFullYear()%1e4,t,4)}function o2(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+g1(t/60|0,"0",2)+g1(t%60,"0",2)}function s2(e,t){return g1(e.getUTCDate(),t,2)}function a2(e,t){return g1(e.getUTCHours(),t,2)}function l2(e,t){return g1(e.getUTCHours()%12||12,t,2)}function c2(e,t){return g1(1+O0.count(e1(e),e),t,3)}function u2(e,t){return g1(e.getUTCMilliseconds(),t,3)}function d2(e,t){return u2(e,t)+"000"}function h2(e,t){return g1(e.getUTCMonth()+1,t,2)}function f2(e,t){return g1(e.getUTCMinutes(),t,2)}function p2(e,t){return g1(e.getUTCSeconds(),t,2)}function m2(e){var t=e.getUTCDay();return 0===t?7:t}function g2(e,t){return g1(H0.count(e1(e)-1,e),t,2)}function y2(e){var t=e.getUTCDay();return t>=4||0===t?Y0(e):Y0.ceil(e)}function v2(e,t){return e=y2(e),g1(Y0.count(e1(e),e)+(4===e1(e).getUTCDay()),t,2)}function b2(e){return e.getUTCDay()}function x2(e,t){return g1(q0.count(e1(e)-1,e),t,2)}function w2(e,t){return g1(e.getUTCFullYear()%100,t,2)}function _2(e,t){return g1((e=y2(e)).getUTCFullYear()%100,t,2)}function S2(e,t){return g1(e.getUTCFullYear()%1e4,t,4)}function E2(e,t){var n=e.getUTCDay();return g1((e=n>=4||0===n?Y0(e):Y0.ceil(e)).getUTCFullYear()%1e4,t,4)}function C2(){return"+0000"}function T2(){return"%"}function j2(e){return+e}function k2(e){return Math.floor(+e/1e3)}function N2(e){return new Date(e)}function A2(e){return e instanceof Date?+e:+new Date(+e)}function I2(e,t,n,r,i,o,s,a,l,c){var u=vJ(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(l(e)<e?f:a(e)<e?p:s(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,A2)):h().map(N2)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(FJ(n,e)):u},u.copy=function(){return gJ(u,I2(e,t,n,r,i,o,s,a,l,c))},u}function P2(){return rQ.apply(I2(i1,o1,J0,Q0,D0,P0,A0,k0,j0,u1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function O2(){return rQ.apply(I2(n1,r1,e1,Z0,H0,O0,I0,N0,j0,d1).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function M2(){var e,t,n,r,i,o=0,s=1,a=hJ,l=!1;function c(t){return null==t||isNaN(t=+t)?i:a(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,a=e(n,r),c):[a(0),a(1)]}}return c.domain=function(i){return arguments.length?([o,s]=i,e=r(o=+o),t=r(s=+s),n=e===t?0:1/(t-e),c):[o,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(a=e,c):a},c.range=u(lJ),c.rangeRound=u(cJ),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(s),n=e===t?0:1/(t-e),c}}function R2(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function D2(){var e=RJ(M2()(hJ));return e.copy=function(){return R2(e,D2())},iQ.apply(e,arguments)}function L2(){var e=qJ(M2()).domain([1,10]);return e.copy=function(){return R2(e,L2()).base(e.base())},iQ.apply(e,arguments)}function F2(){var e=GJ(M2());return e.copy=function(){return R2(e,F2()).constant(e.constant())},iQ.apply(e,arguments)}function B2(){var e=e0(M2());return e.copy=function(){return R2(e,B2()).exponent(e.exponent())},iQ.apply(e,arguments)}function U2(){return B2.apply(null,arguments).exponent(.5)}function V2(){var e=[],t=hJ;function n(n){if(null!=n&&!isNaN(n=+n))return t((hZ(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(oZ),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>d0(e,r/t)))},n.copy=function(){return V2(t).domain(e)},iQ.apply(n,arguments)}function z2(){var e,t,n,r,i,o,s,a=0,l=.5,c=1,u=1,d=hJ,h=!1;function f(e){return isNaN(e=+e)?s:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:i),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,d=function(e,t){void 0===t&&(t=e,e=lJ);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,i]),f):[d(0),d(.5),d(1)]}}return f.domain=function(s){return arguments.length?([a,l,c]=s,e=o(a=+a),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f):[a,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=p(lJ),f.rangeRound=p(cJ),f.unknown=function(e){return arguments.length?(s=e,f):s},function(s){return o=s,e=s(a),t=s(l),n=s(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function $2(){var e=RJ(z2()(hJ));return e.copy=function(){return R2(e,$2())},iQ.apply(e,arguments)}function H2(){var e=qJ(z2()).domain([.1,1,10]);return e.copy=function(){return R2(e,H2()).base(e.base())},iQ.apply(e,arguments)}function q2(){var e=GJ(z2());return e.copy=function(){return R2(e,q2()).constant(e.constant())},iQ.apply(e,arguments)}function W2(){var e=e0(z2());return e.copy=function(){return R2(e,W2()).exponent(e.exponent())},iQ.apply(e,arguments)}function K2(){return W2.apply(null,arguments).exponent(.5)}function Y2(e,t){if((i=e.length)>1)for(var n,r,i,o=1,s=e[t[0]],a=s.length;o<i;++o)for(r=s,s=e[t[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){c1=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=v1(i),u=b1(i),d=v1(o),h=b1(o),f=v1(s),p=b1(s),m=v1(a),g=b1(a),y=v1(l),v=b1(l),b={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:null,d:U1,e:U1,f:q1,g:n2,G:i2,H:V1,I:z1,j:$1,L:H1,m:W1,M:K1,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:j2,s:k2,S:Y1,u:G1,U:X1,V:Z1,w:J1,W:e2,x:null,X:null,y:t2,Y:r2,Z:o2,"%":T2},x={a:function(e){return s[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return a[e.getUTCMonth()]},c:null,d:s2,e:s2,f:d2,g:_2,G:E2,H:a2,I:l2,j:c2,L:u2,m:h2,M:f2,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:j2,s:k2,S:p2,u:m2,U:g2,V:v2,w:b2,W:x2,x:null,X:null,y:w2,Y:S2,Z:C2,"%":T2},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:A1,e:A1,f:D1,g:T1,G:C1,H:P1,I:P1,j:I1,L:R1,m:N1,M:O1,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:k1,Q:F1,s:B1,S:M1,u:w1,U:_1,V:S1,w:x1,W:E1,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:T1,Y:C1,Z:j1,"%":L1};function _(e,t){return function(n){var r,i,o,s=[],a=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===e.charCodeAt(a)&&(s.push(e.slice(l,a)),null!=(i=h1[r=e.charAt(++a)])?r=e.charAt(++a):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),s.push(r),l=a+1);return s.push(e.slice(l,a)),s.join("")}}function S(e,t){return function(n){var r,i,o=l1(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=a1(l1(o.y,0,1))).getUTCDay(),r=i>4||0===i?q0.ceil(r):q0(r),r=O0.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=s1(l1(o.y,0,1))).getDay(),r=i>4||0===i?L0.ceil(r):L0(r),r=P0.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?a1(l1(o.y,0,1)).getUTCDay():s1(l1(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,a1(o)):s1(o)}}function E(e,t,n,r){for(var i,o,s=0,a=t.length,l=n.length;s<a;){if(r>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(i=t.charAt(s++),!(o=w[i in h1?t.charAt(s++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),u1=c1.format,c1.parse,d1=c1.utcFormat,c1.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function G2(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function X2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Q2(e,t){return e[t]}function Z2(e){const t=[];return t.key=e,t}var J2=n(539),e5=n.n(J2),t5=n(6745),n5=n.n(t5),r5=n(3538),i5=n.n(r5),o5=n(9853),s5=n.n(o5),a5=n(8210),l5=n.n(a5);function c5(e){return function(e){if(Array.isArray(e))return u5(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u5(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d5=function(e){return e},h5={"@@functional/placeholder":!0},f5=function(e){return e===h5},p5=function(e){return function t(){return 0===arguments.length||1===arguments.length&&f5(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},m5=function e(t,n){return 1===t?n:p5((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter((function(e){return e!==h5})).length;return s>=t?n.apply(void 0,i):e(t-s,p5((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=i.map((function(e){return f5(e)?t.shift():e}));return n.apply(void 0,c5(o).concat(t))})))}))},g5=function(e){return m5(e.length,e)},y5=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},v5=g5((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),b5=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return d5;var r=t.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},x5=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},w5=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var _5=g5((function(e,t,n){var r=+e;return r+n*(+t-r)})),S5=g5((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),E5=g5((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const C5={rangeStep:function(e,t,n){for(var r=new(l5())(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(e){return 0===e?1:Math.floor(new(l5())(e).abs().log(10).toNumber())+1},interpolateNumber:_5,uninterpolateNumber:S5,uninterpolateTruncation:E5};function T5(e){return function(e){if(Array.isArray(e))return N5(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k5(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||k5(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k5(e,t){if(e){if("string"===typeof e)return N5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N5(e,t):void 0}}function N5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A5(e){var t=j5(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function I5(e,t,n){if(e.lte(0))return new(l5())(0);var r=C5.getDigitCount(e.toNumber()),i=new(l5())(10).pow(r),o=e.div(i),s=1!==r?.05:.1,a=new(l5())(Math.ceil(o.div(s).toNumber())).add(n).mul(s).mul(i);return t?a:new(l5())(Math.ceil(a))}function P5(e,t,n){var r=1,i=new(l5())(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new(l5())(10).pow(C5.getDigitCount(e)-1),i=new(l5())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(l5())(Math.floor(e)))}else 0===e?i=new(l5())(Math.floor((t-1)/2)):n||(i=new(l5())(Math.floor(e)));var s=Math.floor((t-1)/2);return b5(v5((function(e){return i.add(new(l5())(e-s).mul(r)).toNumber()})),y5)(0,t)}function O5(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(l5())(0),tickMin:new(l5())(0),tickMax:new(l5())(0)};var o,s=I5(new(l5())(t).sub(e).div(n-1),r,i);o=e<=0&&t>=0?new(l5())(0):(o=new(l5())(e).add(t).div(2)).sub(new(l5())(o).mod(s));var a=Math.ceil(o.sub(e).div(s).toNumber()),l=Math.ceil(new(l5())(t).sub(o).div(s).toNumber()),c=a+l+1;return c>n?O5(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,a=t>0?a:a+(n-c)),{step:s,tickMin:o.sub(new(l5())(a).mul(s)),tickMax:o.add(new(l5())(l).mul(s))})}var M5=w5((function(e){var t=j5(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(i,2),a=j5(A5([n,r]),2),l=a[0],c=a[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(T5(y5(0,i-1).map((function(){return 1/0})))):[].concat(T5(y5(0,i-1).map((function(){return-1/0}))),[c]);return n>r?x5(u):u}if(l===c)return P5(l,i,o);var d=O5(l,c,s,o),h=d.step,f=d.tickMin,p=d.tickMax,m=C5.rangeStep(f,p.add(new(l5())(.1).mul(h)),h);return n>r?x5(m):m})),R5=(w5((function(e){var t=j5(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(i,2),a=j5(A5([n,r]),2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return P5(l,i,o);var u=I5(new(l5())(c).sub(l).div(s-1),o,0),d=b5(v5((function(e){return new(l5())(l).add(new(l5())(e).mul(u)).toNumber()})),y5)(0,s).filter((function(e){return e>=l&&e<=c}));return n>r?x5(d):d})),w5((function(e,t){var n=j5(e,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=j5(A5([r,i]),2),a=s[0],l=s[1];if(a===-1/0||l===1/0)return[r,i];if(a===l)return[a];var c=Math.max(t,2),u=I5(new(l5())(l).sub(a).div(c-1),o,0),d=[].concat(T5(C5.rangeStep(new(l5())(a),new(l5())(l).sub(new(l5())(.99).mul(u)),u)),[l]);return r>i?x5(d):d}))),D5=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function L5(e){return L5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L5(e)}function F5(){return F5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F5.apply(this,arguments)}function B5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U5(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V5(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function z5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y5(r.key),r)}}function $5(e,t,n){return t=q5(t),function(e,t){if(t&&("object"===L5(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H5()?Reflect.construct(t,n||[],q5(e).constructor):t.apply(e,n))}function H5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H5=function(){return!!e})()}function q5(e){return q5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q5(e)}function W5(e,t){return W5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W5(e,t)}function K5(e,t,n){return(t=Y5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y5(e){var t=function(e,t){if("object"!=L5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L5(t)?t:t+""}var G5=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$5(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W5(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,i=e.width,o=e.dataKey,s=e.data,a=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,u=V5(e,D5),d=VW(u,!1);"x"===this.props.direction&&"number"!==l.type&&iK(!1);var h=s.map((function(e){var s=a(e,o),u=s.x,h=s.y,f=s.value,p=s.errorVal;if(!p)return null;var m,g,y=[];if(Array.isArray(p)){var v=B5(p,2);m=v[0],g=v[1]}else m=g=p;if("vertical"===n){var b=l.scale,x=h+t,w=x+i,_=x-i,S=b(f-m),E=b(f+g);y.push({x1:E,y1:w,x2:E,y2:_}),y.push({x1:S,y1:x,x2:E,y2:x}),y.push({x1:S,y1:w,x2:S,y2:_})}else if("horizontal"===n){var C=c.scale,T=u+t,j=T-i,k=T+i,N=C(f-m),A=C(f+g);y.push({x1:j,y1:A,x2:k,y2:A}),y.push({x1:T,y1:N,x2:T,y2:A}),y.push({x1:j,y1:N,x2:k,y2:N})}return r.createElement(hK,F5({className:"recharts-errorBar",key:"bar-".concat(y.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},d),y.map((function(e){return r.createElement("line",F5({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return r.createElement(hK,{className:"recharts-errorBars"},h)}}],i&&z5(n.prototype,i),o&&z5(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.Component);function X5(e){return X5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X5(e)}function Q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q5(Object(n),!0).forEach((function(t){J5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J5(e,t,n){return t=function(e){var t=function(e,t){if("object"!=X5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=X5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X5(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}K5(G5,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),K5(G5,"displayName","ErrorBar");var e3=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,i=e.legendContent,o=LW(t,pG);if(!o)return null;var s,a=pG.defaultProps,l=void 0!==a?Z5(Z5({},a),o.props):{};return s=o.props&&o.props.payload?o.props&&o.props.payload:"children"===i?(n||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:o.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(n||[]).map((function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?Z5(Z5({},n),t.props):{},i=r.dataKey,o=r.name,s=r.legendType;return{inactive:r.hide,dataKey:i,type:l.iconType||s||"square",color:c3(t),value:o||i,payload:r}})),Z5(Z5(Z5({},l),pG.getWithHeight(o,r)),{},{payload:s,item:o})};function t3(e){return t3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t3(e)}function n3(e){return function(e){if(Array.isArray(e))return r3(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return r3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r3(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i3(Object(n),!0).forEach((function(t){s3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s3(e,t,n){return t=function(e){var t=function(e,t){if("object"!=t3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=t3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t3(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a3(e,t,n){return pW()(e)||pW()(t)?n:oW(t)?Jq()(e,t,n):gW()(t)?t(e):n}function l3(e,t,n,r){var i=i5()(e,(function(e){return a3(e,t)}));if("number"===n){var o=i.filter((function(e){return iW(e)||parseFloat(e)}));return o.length?[n5()(o),e5()(o)]:[1/0,-1/0]}return(r?i.filter((function(e){return!pW()(e)})):i).map((function(e){return oW(e)||e instanceof Date?e:""}))}var c3=function(e){var t,n,r=e.type.displayName,i=null!==(t=e.type)&&void 0!==t&&t.defaultProps?o3(o3({},e.type.defaultProps),e.props):e.props,o=i.stroke,s=i.fill;switch(r){case"Line":n=o;break;case"Area":case"Radar":n=o&&"none"!==o?o:s;break;default:n=s}return n},u3=function(e,t,n,r,i){var o=DW(t.props.children,G5).filter((function(e){return function(e,t,n){return!!pW()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)}));if(o&&o.length){var s=o.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=a3(t,n);if(pW()(r))return e;var i=Array.isArray(r)?[n5()(r),e5()(r)]:[r,r],o=s.reduce((function(e,n){var r=a3(t,n,0),o=i[0]-Math.abs(Array.isArray(r)?r[0]:r),s=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(s,e[1])]}),[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}),[1/0,-1/0])}return null},d3=function(e,t,n,r,i){var o=t.map((function(t){var o=t.props.dataKey;return"number"===n&&o&&u3(e,t,o,r)||l3(e,o,n,i)}));if("number"===n)return o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var s={};return o.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)s[t[n]]||(s[t[n]]=!0,e.push(t[n]));return e}),[])},h3=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},f3=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,o=e.type,s=e.range,a="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/a:0;return l="angleAxis"===e.axisType&&(null===s||void 0===s?void 0:s.length)>=2?2*nW(s[0]-s[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}})).filter((function(e){return!Qq()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+l,value:e,offset:l}})):r.domain().map((function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}}))},p3=new WeakMap,m3=function(e,t){if("function"!==typeof t)return e;p3.has(e)||p3.set(e,new WeakMap);var n=p3.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},g3=1e-4,y3={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,s=0;s<t;++s){var a=Qq()(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=i,e[s][n][1]=i+a,i=e[s][n][1]):(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,s=e[0].length;o<s;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}Y2(e,t)}},none:Y2,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var s=0,a=0;s<n;++s)a+=e[s][r][1]||0;i[r][1]+=i[r][0]=-a/2}Y2(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,s=1;s<r;++s){for(var a=0,l=0,c=0;a<i;++a){for(var u=e[t[a]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,f=0;f<a;++f){var p=e[t[f]];h+=(p[s][1]||0)-(p[s-1][1]||0)}l+=d,c+=h*d}n[s-1][1]+=n[s-1][0]=o,l&&(o-=c/l)}n[s-1][1]+=n[s-1][0]=o,Y2(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var s=Qq()(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=i,e[o][n][1]=i+s,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},v3=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=y3[n],o=function(){var e=CY([]),t=X2,n=Y2,r=Q2;function i(i){var o,s,a=Array.from(e.apply(this,arguments),Z2),l=a.length,c=-1;for(const e of i)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(e,a[o].key,c,i)]).data=e;for(o=0,s=G2(t(a));o<l;++o)a[s[o]].index=o;return n(a,s),a}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:CY(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:CY(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?X2:"function"===typeof e?e:CY(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Y2:e,i):n},i}().keys(r).value((function(e,t){return+a3(e,t,0)})).order(X2).offset(i);return o(e)};var b3=function(e,t,n){return Object.keys(e).reduce((function(r,i){var o=e[i].stackedData.reduce((function(e,r){var i=function(e){return e.reduce((function(e,t){return[n5()(t.concat([e[0]]).filter(iW)),e5()(t.concat([e[1]]).filter(iW))]}),[1/0,-1/0])}(r.slice(t,n+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},x3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,w3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_3=function(e,t,n){if(gW()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(iW(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(x3.test(e[0])){var i=+x3.exec(e[0])[1];r[0]=t[0]-i}else gW()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(iW(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(w3.test(e[1])){var o=+w3.exec(e[1])[1];r[1]=t[1]+o}else gW()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},S3=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=nK()(t,(function(e){return e.coordinate})),o=1/0,s=1,a=i.length;s<a;s++){var l=i[s],c=i[s-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},E3=function(e,t,n){return e&&e.length?s5()(e,Jq()(n,"type.defaultProps.domain"))?t:e:t},C3=function(e,t){var n=e.type.defaultProps?o3(o3({},e.type.defaultProps),e.props):e.props,r=n.dataKey,i=n.name,o=n.unit,s=n.formatter,a=n.tooltipType,l=n.chartType,c=n.hide;return o3(o3({},VW(e,!1)),{},{dataKey:r,unit:o,formatter:s,name:i||r,color:c3(e),value:a3(t,r),type:a,payload:t,chartType:l,hide:c})};function T3(e){return T3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T3(e)}function j3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j3(Object(n),!0).forEach((function(t){N3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N3(e,t,n){return t=function(e){var t=function(e,t){if("object"!=T3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T3(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A3=["Webkit","Moz","O","ms"];function I3(e){return I3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I3(e)}function P3(){return P3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P3.apply(this,arguments)}function O3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O3(Object(n),!0).forEach((function(t){U3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V3(r.key),r)}}function D3(e,t,n){return t=F3(t),function(e,t){if(t&&("object"===I3(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L3()?Reflect.construct(t,n||[],F3(e).constructor):t.apply(e,n))}function L3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L3=function(){return!!e})()}function F3(e){return F3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F3(e)}function B3(e,t){return B3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B3(e,t)}function U3(e,t,n){return(t=V3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V3(e){var t=function(e,t){if("object"!=I3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I3(t)?t:t+""}var z3=function(e){return e.changedTouches&&!!e.changedTouches.length},$3=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U3(n=D3(this,t,[e]),"handleDrag",(function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)})),U3(n,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])})),U3(n,"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,i=e.startIndex;null===r||void 0===r||r({endIndex:t,startIndex:i})})),n.detachDragEndListener()})),U3(n,"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),U3(n,"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),U3(n,"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),U3(n,"handleSlideDragStart",(function(e){var t=z3(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B3(e,t)}(t,e),n=t,i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var n=e.startX,r=e.endX,i=this.state.scaleValues,o=this.props,s=o.gap,a=o.data.length-1,l=Math.min(n,r),c=Math.max(n,r),u=t.getIndexInRange(i,l),d=t.getIndexInRange(i,c);return{startIndex:u-u%s,endIndex:d===a?a:d-d%s}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,o=a3(n[e],i,e);return gW()(r)?r(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,o=this.props,s=o.x,a=o.width,l=o.travellerWidth,c=o.startIndex,u=o.endIndex,d=o.onChange,h=e.pageX-n;h>0?h=Math.min(h,s+a-l-i,s+a-l-r):h<0&&(h=Math.max(h,s-r,s-i));var f=this.getIndex({startX:r+h,endX:i+h});f.startIndex===c&&f.endIndex===u||!d||d(f),this.setState({startX:r+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=z3(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,o=t.startX,s=this.state[r],a=this.props,l=a.x,c=a.width,u=a.travellerWidth,d=a.onChange,h=a.gap,f=a.data,p={startX:this.state.startX,endX:this.state.endX},m=e.pageX-n;m>0?m=Math.min(m,l+c-u-s):m<0&&(m=Math.max(m,l-s)),p[r]=s+m;var g=this.getIndex(p),y=g.startIndex,v=g.endIndex;this.setState(U3(U3({},r,s+m),"brushMoveStartX",e.pageX),(function(){d&&function(){var e=f.length-1;return"startX"===r&&(i>o?y%h===0:v%h===0)||i<o&&v===e||"endX"===r&&(i>o?v%h===0:y%h===0)||i>o&&v===e}()&&d(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,o=r.startX,s=r.endX,a=this.state[t],l=i.indexOf(a);if(-1!==l){var c=l+e;if(!(-1===c||c>=i.length)){var u=i[c];"startX"===t&&u>=s||"endX"===t&&u<=o||this.setState(U3({},t,u),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,i=e.width,o=e.height,s=e.fill,a=e.stroke;return r.createElement("rect",{stroke:a,fill:s,x:t,y:n,width:i,height:o})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,i=e.width,o=e.height,s=e.data,a=e.children,l=e.padding,c=r.Children.only(a);return c?r.cloneElement(c,{x:t,y:n,width:i,height:o,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(e,n){var i,o,s=this,a=this.props,l=a.y,c=a.travellerWidth,u=a.height,d=a.traveller,h=a.ariaLabel,f=a.data,p=a.startIndex,m=a.endIndex,g=Math.max(e,this.props.x),y=M3(M3({},VW(this.props,!1)),{},{x:g,y:l,width:c,height:u}),v=h||"Min value: ".concat(null===(i=f[p])||void 0===i?void 0:i.name,", Max value: ").concat(null===(o=f[m])||void 0===o?void 0:o.name);return r.createElement(hK,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,y))}},{key:"renderSlide",value:function(e,t){var n=this.props,i=n.y,o=n.height,s=n.stroke,a=n.travellerWidth,l=Math.min(e,t)+a,c=Math.max(Math.abs(t-e)-a,0);return r.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:i,width:c,height:o})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,i=e.y,o=e.height,s=e.travellerWidth,a=e.stroke,l=this.state,c=l.startX,u=l.endX,d={pointerEvents:"none",fill:a};return r.createElement(hK,{className:"recharts-brush-texts"},r.createElement(QQ,P3({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:i+o/2},d),this.getTextOfTick(t)),r.createElement(QQ,P3({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+s+5,y:i+o/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,i=e.children,o=e.x,s=e.y,a=e.width,l=e.height,c=e.alwaysShowText,u=this.state,d=u.startX,h=u.endX,f=u.isTextActive,p=u.isSlideMoving,m=u.isTravellerMoving,g=u.isTravellerFocused;if(!t||!t.length||!iW(o)||!iW(s)||!iW(a)||!iW(l)||a<=0||l<=0)return null;var y=qq("recharts-brush",n),v=1===r.Children.count(i),b=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=A3.reduce((function(e,r){return k3(k3({},e),{},N3({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return r.createElement(hK,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(d,h),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(h,"endX"),(f||p||m||g||c)&&this.renderText())}}],o=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,i=e.width,o=e.height,s=e.stroke,a=Math.floor(n+o/2)-1;return r.createElement(r.Fragment,null,r.createElement("rect",{x:t,y:n,width:i,height:o,fill:s,stroke:"none"}),r.createElement("line",{x1:t+1,y1:a,x2:t+i-1,y2:a,fill:"none",stroke:"#fff"}),r.createElement("line",{x1:t+1,y1:a+2,x2:t+i-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return r.isValidElement(e)?r.cloneElement(e,n):gW()(e)?e(n):t.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,o=e.travellerWidth,s=e.updateId,a=e.startIndex,l=e.endIndex;if(n!==t.prevData||s!==t.prevUpdateId)return M3({prevData:n,prevTravellerWidth:o,prevUpdateId:s,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,o=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var a=t.length,l=pQ().domain(eK()(0,a)).range([i,i+o-s]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:o,startIndex:a,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([i,i+r-o]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:s,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],i&&R3(n.prototype,i),o&&R3(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent);function H3(e){return H3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H3(e)}function q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q3(Object(n),!0).forEach((function(t){K3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K3(e,t,n){return t=function(e){var t=function(e,t){if("object"!=H3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H3(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return G3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G3(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}U3($3,"displayName","Brush"),U3($3,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var X3=Math.PI/180,Q3=function(e){return 180*e/Math.PI},Z3=function(e,t,n,r){return{x:e+Math.cos(-X3*r)*n,y:t+Math.sin(-X3*r)*n}},J3=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},e4=function(e,t){var n=e.x,r=e.y,i=t.cx,o=t.cy,s=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s};var a=(n-i)/s,l=Math.acos(a);return r>o&&(l=2*Math.PI-l),{radius:s,angle:Q3(l),angleInRadian:l}},t4=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(i,o)},n4=function(e,t){var n=e.x,r=e.y,i=e4({x:n,y:r},t),o=i.radius,s=i.angle,a=t.innerRadius,l=t.outerRadius;if(o<a||o>l)return!1;if(0===o)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-360*o,endAngle:n-360*o}}(t),d=u.startAngle,h=u.endAngle,f=s;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;c=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;c=f>=h&&f<=d}return c?W3(W3({},t),{},{radius:o,angle:t4(f,t)}):null},r4=function(e){return(0,r.isValidElement)(e)||gW()(e)||"boolean"===typeof e?"":e.className};function i4(e){return i4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i4(e)}var o4=["offset"];function s4(e){return function(e){if(Array.isArray(e))return a4(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return a4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a4(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l4(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c4(Object(n),!0).forEach((function(t){d4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d4(e,t,n){return t=function(e){var t=function(e,t){if("object"!=i4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i4(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h4(){return h4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h4.apply(this,arguments)}var f4=function(e,t,n){var i,o,s=e.position,a=e.viewBox,l=e.offset,c=e.className,u=a,d=u.cx,h=u.cy,f=u.innerRadius,p=u.outerRadius,m=u.startAngle,g=u.endAngle,y=u.clockWise,v=(f+p)/2,b=function(e,t){return nW(t-e)*Math.min(Math.abs(t-e),360)}(m,g),x=b>=0?1:-1;"insideStart"===s?(i=m+x*l,o=y):"insideEnd"===s?(i=g-x*l,o=!y):"end"===s&&(i=g+x*l,o=y),o=b<=0?o:!o;var w=Z3(d,h,v,i),_=Z3(d,h,v,i+359*(o?1:-1)),S="M".concat(w.x,",").concat(w.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(o?0:1,",\n    ").concat(_.x,",").concat(_.y),E=pW()(e.id)?aW("recharts-radial-line-"):e.id;return r.createElement("text",h4({},n,{dominantBaseline:"central",className:qq("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:E,d:S})),r.createElement("textPath",{xlinkHref:"#".concat(E)},t))};function p4(e){var t,n=e.offset,i=u4({offset:void 0===n?5:n},l4(e,o4)),o=i.viewBox,s=i.position,a=i.value,l=i.children,c=i.content,u=i.className,d=void 0===u?"":u,h=i.textBreakAll;if(!o||pW()(a)&&pW()(l)&&!(0,r.isValidElement)(c)&&!gW()(c))return null;if((0,r.isValidElement)(c))return(0,r.cloneElement)(c,i);if(gW()(c)){if(t=(0,r.createElement)(c,i),(0,r.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=pW()(e.children)?t:e.children;return gW()(n)?n(r):r}(i);var f=function(e){return"cx"in e&&iW(e.cx)}(o),p=VW(i,!0);if(f&&("insideStart"===s||"insideEnd"===s||"end"===s))return f4(i,t,p);var m=f?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,o=i.cx,s=i.cy,a=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=Z3(o,s,l+n,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=Z3(o,s,(a+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(i):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,o=t,s=o.x,a=o.y,l=o.width,c=o.height,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",f=u>0?"start":"end",p=l>=0?1:-1,m=p*r,g=p>0?"end":"start",y=p>0?"start":"end";if("top"===i)return u4(u4({},{x:s+l/2,y:a-u*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(a-n.y,0),width:l}:{});if("bottom"===i)return u4(u4({},{x:s+l/2,y:a+c+d,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(a+c),0),width:l}:{});if("left"===i){var v={x:s-m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"};return u4(u4({},v),n?{width:Math.max(v.x-n.x,0),height:c}:{})}if("right"===i){var b={x:s+l+m,y:a+c/2,textAnchor:y,verticalAnchor:"middle"};return u4(u4({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:c}:{})}var x=n?{width:l,height:c}:{};return"insideLeft"===i?u4({x:s+m,y:a+c/2,textAnchor:y,verticalAnchor:"middle"},x):"insideRight"===i?u4({x:s+l-m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?u4({x:s+l/2,y:a+d,textAnchor:"middle",verticalAnchor:f},x):"insideBottom"===i?u4({x:s+l/2,y:a+c-d,textAnchor:"middle",verticalAnchor:h},x):"insideTopLeft"===i?u4({x:s+m,y:a+d,textAnchor:y,verticalAnchor:f},x):"insideTopRight"===i?u4({x:s+l-m,y:a+d,textAnchor:g,verticalAnchor:f},x):"insideBottomLeft"===i?u4({x:s+m,y:a+c-d,textAnchor:y,verticalAnchor:h},x):"insideBottomRight"===i?u4({x:s+l-m,y:a+c-d,textAnchor:g,verticalAnchor:h},x):vW()(i)&&(iW(i.x)||rW(i.x))&&(iW(i.y)||rW(i.y))?u4({x:s+lW(i.x,l),y:a+lW(i.y,c),textAnchor:"end",verticalAnchor:"end"},x):u4({x:s+l/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(i);return r.createElement(QQ,h4({className:qq("recharts-label",d)},p,m,{breakAll:h}),t)}p4.displayName="Label";var m4=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,o=e.endAngle,s=e.r,a=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,f=e.left,p=e.width,m=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(iW(p)&&iW(m)){if(iW(u)&&iW(d))return{x:u,y:d,width:p,height:m};if(iW(h)&&iW(f))return{x:h,y:f,width:p,height:m}}return iW(u)&&iW(d)?{x:u,y:d,width:0,height:0}:iW(t)&&iW(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:c||a||s||0,clockWise:g}:e.viewBox?e.viewBox:{}};p4.parseViewBox=m4,p4.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=m4(e),s=DW(i,p4).map((function(e,n){return(0,r.cloneElement)(e,{viewBox:t||o,key:"label-".concat(n)})}));if(!n)return s;var a=function(e,t){return e?!0===e?r.createElement(p4,{key:"label-implicit",viewBox:t}):oW(e)?r.createElement(p4,{key:"label-implicit",viewBox:t,value:e}):(0,r.isValidElement)(e)?e.type===p4?(0,r.cloneElement)(e,{key:"label-implicit",viewBox:t}):r.createElement(p4,{key:"label-implicit",content:e,viewBox:t}):gW()(e)?r.createElement(p4,{key:"label-implicit",content:e,viewBox:t}):vW()(e)?r.createElement(p4,h4({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||o);return[a].concat(s4(s))};var g4=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},y4=n(1733),v4=n.n(y4),b4=n(7002),x4=n.n(b4);function w4(e){return w4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w4(e)}function _4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T4(r.key),r)}}function S4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S4(Object(n),!0).forEach((function(t){C4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C4(e,t,n){return(t=T4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T4(e){var t=function(e,t){if("object"!=w4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w4(t)?t:t+""}var j4=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},k4=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&_4(t.prototype,n),r&&_4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();C4(k4,"EPS",1e-4);var N4=function(e){var t=Object.keys(e).reduce((function(t,n){return E4(E4({},t),{},C4({},n,k4.create(e[n])))}),{});return E4(E4({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return v4()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return x4()(e,(function(e,n){return t[n].isInRange(e)}))}})};function A4(){return A4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A4.apply(this,arguments)}function I4(e){return I4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I4(e)}function P4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P4(Object(n),!0).forEach((function(t){B4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U4(r.key),r)}}function R4(e,t,n){return t=L4(t),function(e,t){if(t&&("object"===I4(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D4()?Reflect.construct(t,n||[],L4(e).constructor):t.apply(e,n))}function D4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D4=function(){return!!e})()}function L4(e){return L4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L4(e)}function F4(e,t){return F4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F4(e,t)}function B4(e,t,n){return(t=U4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U4(e){var t=function(e,t){if("object"!=I4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I4(t)?t:t+""}var V4=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R4(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F4(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,n=e.x,i=e.y,o=e.r,s=e.alwaysShow,a=e.clipPathId,l=oW(n),c=oW(i);if(hW(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var u=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,o=N4({x:r.scale,y:i.scale}),s=o.apply({x:t,y:n},{bandAware:!0});return g4(e,"discard")&&!o.isInRange(s)?null:s}(this.props);if(!u)return null;var d=u.x,h=u.y,f=this.props,p=f.shape,m=f.className,g=O4(O4({clipPath:g4(this.props,"hidden")?"url(#".concat(a,")"):void 0},VW(this.props,!0)),{},{cx:d,cy:h});return r.createElement(hK,{className:qq("recharts-reference-dot",m)},t.renderDot(p,g),p4.renderCallByParent(this.props,{x:d-o,y:h-o,width:2*o,height:2*o}))}}],i&&M4(n.prototype,i),o&&M4(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.Component);B4(V4,"displayName","ReferenceDot"),B4(V4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),B4(V4,"renderDot",(function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):gW()(e)?e(t):r.createElement(gG,A4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))}));var z4=n(4597),$4=n.n(z4),H4=(n(8990),n(5797)),q4=n.n(H4)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var W4=(0,r.createContext)(void 0),K4=(0,r.createContext)(void 0),Y4=(0,r.createContext)(void 0),G4=(0,r.createContext)({}),X4=(0,r.createContext)(void 0),Q4=(0,r.createContext)(0),Z4=(0,r.createContext)(0),J4=function(e){var t=e.state,n=t.xAxisMap,i=t.yAxisMap,o=t.offset,s=e.clipPathId,a=e.children,l=e.width,c=e.height,u=q4(o);return r.createElement(W4.Provider,{value:n},r.createElement(K4.Provider,{value:i},r.createElement(G4.Provider,{value:o},r.createElement(Y4.Provider,{value:u},r.createElement(X4.Provider,{value:s},r.createElement(Q4.Provider,{value:c},r.createElement(Z4.Provider,{value:l},a)))))))};function e6(e){return e6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e6(e)}function t6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c6(r.key),r)}}function n6(e,t,n){return t=i6(t),function(e,t){if(t&&("object"===e6(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r6()?Reflect.construct(t,n||[],i6(e).constructor):t.apply(e,n))}function r6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r6=function(){return!!e})()}function i6(e){return i6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i6(e)}function o6(e,t){return o6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o6(e,t)}function s6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s6(Object(n),!0).forEach((function(t){l6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l6(e,t,n){return(t=c6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c6(e){var t=function(e,t){if("object"!=e6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e6(t)?t:t+""}function u6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d6(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h6(){return h6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h6.apply(this,arguments)}function f6(e){var t=e.x,n=e.y,i=e.segment,o=e.xAxisId,s=e.yAxisId,a=e.shape,l=e.className,c=e.alwaysShow,u=(0,r.useContext)(X4),d=function(e){var t=(0,r.useContext)(W4);null==t&&iK(!1);var n=t[e];return null==n&&iK(!1),n}(o),h=function(e){var t=(0,r.useContext)(K4);null==t&&iK(!1);var n=t[e];return null==n&&iK(!1),n}(s),f=(0,r.useContext)(Y4);if(!u||!f)return null;hW(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,n,r,i,o,s,a,l){var c=i.x,u=i.y,d=i.width,h=i.height;if(n){var f=l.y,p=e.y.apply(f,{position:o});if(g4(l,"discard")&&!e.y.isInRange(p))return null;var m=[{x:c+d,y:p},{x:c,y:p}];return"left"===a?m.reverse():m}if(t){var g=l.x,y=e.x.apply(g,{position:o});if(g4(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:u+h},{x:y,y:u}];return"top"===s?v.reverse():v}if(r){var b=l.segment.map((function(t){return e.apply(t,{position:o})}));return g4(l,"discard")&&$4()(b,(function(t){return!e.isInRange(t)}))?null:b}return null}(N4({x:d.scale,y:h.scale}),oW(t),oW(n),i&&2===i.length,f,e.position,d.orientation,h.orientation,e);if(!p)return null;var m=u6(p,2),g=m[0],y=g.x,v=g.y,b=m[1],x=b.x,w=b.y,_=a6(a6({clipPath:g4(e,"hidden")?"url(#".concat(u,")"):void 0},VW(e,!0)),{},{x1:y,y1:v,x2:x,y2:w});return r.createElement(hK,{className:qq("recharts-reference-line",l)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):gW()(e)?e(t):r.createElement("line",h6({},t,{className:"recharts-reference-line-line"}))}(a,_),p4.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return j4({x:t,y:n},{x:r,y:i})}({x1:y,y1:v,x2:x,y2:w})))}var p6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n6(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o6(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){return r.createElement(f6,this.props)}}])&&t6(n.prototype,i),o&&t6(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.Component);function m6(){return m6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m6.apply(this,arguments)}function g6(e){return g6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g6(e)}function y6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y6(Object(n),!0).forEach((function(t){E6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C6(r.key),r)}}function x6(e,t,n){return t=_6(t),function(e,t){if(t&&("object"===g6(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w6()?Reflect.construct(t,n||[],_6(e).constructor):t.apply(e,n))}function w6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w6=function(){return!!e})()}function _6(e){return _6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_6(e)}function S6(e,t){return S6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S6(e,t)}function E6(e,t,n){return(t=C6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C6(e){var t=function(e,t){if("object"!=g6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g6(t)?t:t+""}l6(p6,"displayName","ReferenceLine"),l6(p6,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var T6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x6(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S6(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,n=e.x1,i=e.x2,o=e.y1,s=e.y2,a=e.className,l=e.alwaysShow,c=e.clipPathId;hW(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=oW(n),d=oW(i),h=oW(o),f=oW(s),p=this.props.shape;if(!u&&!d&&!h&&!f&&!p)return null;var m=function(e,t,n,r,i){var o=i.x1,s=i.x2,a=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var d=N4({x:c.scale,y:u.scale}),h={x:e?d.x.apply(o,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(a,{position:"start"}):d.y.rangeMin},f={x:t?d.x.apply(s,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!g4(i,"discard")||d.isInRange(h)&&d.isInRange(f)?j4(h,f):null}(u,d,h,f,this.props);if(!m&&!p)return null;var g=g4(this.props,"hidden")?"url(#".concat(c,")"):void 0;return r.createElement(hK,{className:qq("recharts-reference-area",a)},t.renderRect(p,v6(v6({clipPath:g},VW(this.props,!0)),m)),p4.renderCallByParent(this.props,m))}}],i&&b6(n.prototype,i),o&&b6(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.Component);function j6(e){return function(e){if(Array.isArray(e))return k6(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return k6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k6(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}E6(T6,"displayName","ReferenceArea"),E6(T6,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),E6(T6,"renderRect",(function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):gW()(e)?e(t):r.createElement(nQ,m6({},t,{className:"recharts-reference-area-rect"}))}));var N6=function(e,t,n,r,i){var o=DW(e,p6),s=DW(e,V4),a=[].concat(j6(o),j6(s)),l=DW(e,T6),c="".concat(r,"Id"),u=r[0],d=t;if(a.length&&(d=a.reduce((function(e,t){if(t.props[c]===n&&g4(t.props,"extendDomain")&&iW(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),d)),l.length){var h="".concat(u,"1"),f="".concat(u,"2");d=l.reduce((function(e,t){if(t.props[c]===n&&g4(t.props,"extendDomain")&&iW(t.props[h])&&iW(t.props[f])){var r=t.props[h],i=t.props[f];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),d)}return i&&i.length&&(d=i.reduce((function(e,t){return iW(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),d)),d},A6=n(7283),I6=new(n.n(A6)()),P6="recharts.syncMouseEvents";function O6(e){return O6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O6(e)}function M6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D6(r.key),r)}}function R6(e,t,n){return(t=D6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D6(e){var t=function(e,t){if("object"!=O6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O6(t)?t:t+""}var L6=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R6(this,"activeIndex",0),R6(this,"coordinateList",[]),R6(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,o=void 0===i?null:i,s=e.layout,a=void 0===s?null:s,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==o&&void 0!==o?o:this.container,this.layout=null!==a&&void 0!==a?a:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==d&&void 0!==d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,o=n.height,s=this.coordinateList[this.activeIndex].coordinate,a=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+s+a,u=i+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}],t&&M6(e.prototype,t),n&&M6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var F6=n(2322),B6=n.n(F6),U6=n(6361),V6=n.n(U6);function z6(e){return z6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z6(e)}function $6(){return $6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$6.apply(this,arguments)}function H6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q6(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W6(Object(n),!0).forEach((function(t){Y6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y6(e,t,n){return t=function(e){var t=function(e,t){if("object"!=z6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z6(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G6=function(e,t,n,r,i){var o,s=n-r;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-s/2,",").concat(t+i),o+="L ".concat(e+n-s/2-r,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z")},X6={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q6=function(e){var t=K6(K6({},X6),e),n=(0,r.useRef)(),i=H6((0,r.useState)(-1),2),o=i[0],s=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(t){}}),[]);var a=t.x,l=t.y,c=t.upperWidth,u=t.lowerWidth,d=t.height,h=t.className,f=t.animationEasing,p=t.animationDuration,m=t.animationBegin,g=t.isUpdateAnimationActive;if(a!==+a||l!==+l||c!==+c||u!==+u||d!==+d||0===c&&0===u||0===d)return null;var y=qq("recharts-trapezoid",h);return g?r.createElement(qX,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:d,x:a,y:l},to:{upperWidth:c,lowerWidth:u,height:d,x:a,y:l},duration:p,animationEasing:f,isActive:g},(function(e){var i=e.upperWidth,s=e.lowerWidth,a=e.height,l=e.x,c=e.y;return r.createElement(qX,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:f},r.createElement("path",$6({},VW(t,!0),{className:y,d:G6(l,c,i,s,a),ref:n})))})):r.createElement("g",null,r.createElement("path",$6({},VW(t,!0),{className:y,d:G6(a,l,c,u,d)})))};function Z6(e){return Z6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z6(e)}function J6(){return J6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J6.apply(this,arguments)}function e7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e7(Object(n),!0).forEach((function(t){n7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function n7(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Z6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z6(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r7=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,o=e.sign,s=e.isExternal,a=e.cornerRadius,l=e.cornerIsExternal,c=a*(s?1:-1)+r,u=Math.asin(a/c)/X3,d=l?i:i+o*u,h=l?i-o*u:i;return{center:Z3(t,n,c,d),circleTangency:Z3(t,n,r,d),lineTangency:Z3(t,n,c*Math.cos(u*X3),h),theta:u}},i7=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.startAngle,s=function(e,t){return nW(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),a=o+s,l=Z3(t,n,i,o),c=Z3(t,n,i,a),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(o>a),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var d=Z3(t,n,r,o),h=Z3(t,n,r,a);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(o<=a),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},o7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},s7=function(e){var t=t7(t7({},o7),e),n=t.cx,i=t.cy,o=t.innerRadius,s=t.outerRadius,a=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=t.className;if(s<o||u===d)return null;var f,p=qq("recharts-sector",h),m=s-o,g=lW(a,m,0,!0);return f=g>0&&Math.abs(u-d)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,a=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=nW(c-l),d=r7({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:o,cornerIsExternal:a}),h=d.circleTangency,f=d.lineTangency,p=d.theta,m=r7({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:a}),g=m.circleTangency,y=m.lineTangency,v=m.theta,b=a?Math.abs(l-c):Math.abs(l-c)-p-v;if(b<0)return s?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):i7({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var x="M ".concat(f.x,",").concat(f.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var w=r7({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),_=w.circleTangency,S=w.lineTangency,E=w.theta,C=r7({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:a}),T=C.circleTangency,j=C.lineTangency,k=C.theta,N=a?Math.abs(l-c):Math.abs(l-c)-E-k;if(N<0&&0===o)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(j.x,",").concat(j.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(T.x,",").concat(T.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(N>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:n,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):i7({cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:d}),r.createElement("path",J6({},VW(t,!0),{className:p,d:f,role:"img"}))},a7=["option","shapeType","propTransformer","activeClassName","isActive"];function l7(e){return l7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l7(e)}function c7(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u7(Object(n),!0).forEach((function(t){h7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h7(e,t,n){return t=function(e){var t=function(e,t){if("object"!=l7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l7(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f7(e,t){return d7(d7({},t),e)}function p7(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return r.createElement(nQ,n);case"trapezoid":return r.createElement(Q6,n);case"sector":return r.createElement(s7,n);case"symbols":if(function(e){return"symbols"===e}(t))return r.createElement(zY,n);break;default:return null}}function m7(e){var t,n=e.option,i=e.shapeType,o=e.propTransformer,s=void 0===o?f7:o,a=e.activeClassName,l=void 0===a?"recharts-active-shape":a,c=e.isActive,u=c7(e,a7);if((0,r.isValidElement)(n))t=(0,r.cloneElement)(n,d7(d7({},u),function(e){return(0,r.isValidElement)(e)?e.props:e}(n)));else if(gW()(n))t=n(u);else if(B6()(n)&&!V6()(n)){var d=s(n,u);t=r.createElement(p7,{shapeType:i,elementProps:d})}else{var h=u;t=r.createElement(p7,{shapeType:i,elementProps:h})}return c?r.createElement(hK,{className:l},t):t}function g7(e,t){return null!=t&&"trapezoids"in e.props}function y7(e,t){return null!=t&&"sectors"in e.props}function v7(e,t){return null!=t&&"points"in e.props}function b7(e,t){var n,r,i=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,o=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&o}function x7(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function w7(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function _7(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return g7(e,t)?n="trapezoids":y7(e,t)?n="sectors":v7(e,t)&&(n="points"),n}(n,t),o=function(e,t){var n,r;return g7(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:y7(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:v7(e,t)?t.payload:{}}(n,t),s=r.filter((function(e,r){var s=s5()(o,e),a=n.props[i].filter((function(e){var r=function(e,t){var n;return g7(e,t)?n=b7:y7(e,t)?n=x7:v7(e,t)&&(n=w7),n}(n,t);return r(e,t)})),l=n.props[i].indexOf(a[a.length-1]);return s&&r===l}));return r.indexOf(s[s.length-1])}function S7(){}function E7(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function C7(e){this._context=e}function T7(e){this._context=e}function j7(e){this._context=e}C7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E7(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E7(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},T7.prototype={areaStart:S7,areaEnd:S7,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:E7(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},j7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:E7(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class k7{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function N7(e){this._context=e}function A7(e){this._context=e}function I7(e){return new A7(e)}function P7(e){return e<0?-1:1}function O7(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(P7(o)+P7(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function M7(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function R7(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function D7(e){this._context=e}function L7(e){this._context=new F7(e)}function F7(e){this._context=e}function B7(e){this._context=e}function U7(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function V7(e,t){this._context=e,this._t=t}function z7(e){return e[0]}function $7(e){return e[1]}function H7(e,t){var n=CY(!0),r=null,i=I7,o=null,s=PY(a);function a(a){var l,c,u,d=(a=G2(a)).length,h=!1;for(null==r&&(o=i(u=s())),l=0;l<=d;++l)!(l<d&&n(c=a[l],l,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,l,a),+t(c,l,a));if(u)return o=null,u+""||null}return e="function"===typeof e?e:void 0===e?z7:CY(e),t="function"===typeof t?t:void 0===t?$7:CY(t),a.x=function(t){return arguments.length?(e="function"===typeof t?t:CY(+t),a):e},a.y=function(e){return arguments.length?(t="function"===typeof e?e:CY(+e),a):t},a.defined=function(e){return arguments.length?(n="function"===typeof e?e:CY(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}function q7(e,t,n){var r=null,i=CY(!0),o=null,s=I7,a=null,l=PY(c);function c(c){var u,d,h,f,p,m=(c=G2(c)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(a=s(p=l())),u=0;u<=m;++u){if(!(u<m&&i(f=c[u],u,c))===g)if(g=!g)d=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=u-1;h>=d;--h)a.point(y[h],v[h]);a.lineEnd(),a.areaEnd()}g&&(y[u]=+e(f,u,c),v[u]=+t(f,u,c),a.point(r?+r(f,u,c):y[u],n?+n(f,u,c):v[u]))}if(p)return a=null,p+""||null}function u(){return H7().defined(i).curve(s).context(o)}return e="function"===typeof e?e:void 0===e?z7:CY(+e),t="function"===typeof t?t:CY(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?$7:CY(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:CY(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:CY(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:CY(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:CY(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:CY(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:CY(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:CY(!!e),c):i},c.curve=function(e){return arguments.length?(s=e,null!=o&&(a=s(o)),c):s},c.context=function(e){return arguments.length?(null==e?o=a=null:a=s(o=e),c):o},c}function W7(e){return W7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W7(e)}function K7(){return K7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K7.apply(this,arguments)}function Y7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y7(Object(n),!0).forEach((function(t){X7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X7(e,t,n){return t=function(e){var t=function(e,t){if("object"!=W7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=W7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W7(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}N7.prototype={areaStart:S7,areaEnd:S7,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},A7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},D7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:R7(this,this._t0,M7(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,R7(this,M7(this,n=O7(this,e,t)),n);break;default:R7(this,this._t0,n=O7(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(L7.prototype=Object.create(D7.prototype)).point=function(e,t){D7.prototype.point.call(this,t,e)},F7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},B7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=U7(e),i=U7(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},V7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Q7={curveBasisClosed:function(e){return new T7(e)},curveBasisOpen:function(e){return new j7(e)},curveBasis:function(e){return new C7(e)},curveBumpX:function(e){return new k7(e,!0)},curveBumpY:function(e){return new k7(e,!1)},curveLinearClosed:function(e){return new N7(e)},curveLinear:I7,curveMonotoneX:function(e){return new D7(e)},curveMonotoneY:function(e){return new L7(e)},curveNatural:function(e){return new B7(e)},curveStep:function(e){return new V7(e,.5)},curveStepAfter:function(e){return new V7(e,1)},curveStepBefore:function(e){return new V7(e,0)}},Z7=function(e){return e.x===+e.x&&e.y===+e.y},J7=function(e){return e.x},e8=function(e){return e.y},t8=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,o=void 0===i?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(gW()(e))return e;var n="curve".concat(nY()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Q7[n]||I7:Q7["".concat(n).concat("vertical"===t?"Y":"X")]}(r,a),d=c?o.filter((function(e){return Z7(e)})):o;if(Array.isArray(s)){var h=c?s.filter((function(e){return Z7(e)})):s,f=d.map((function(e,t){return G7(G7({},e),{},{base:h[t]})}));return t="vertical"===a?q7().y(e8).x1(J7).x0((function(e){return e.base.x})):q7().x(J7).y1(e8).y0((function(e){return e.base.y})),t.defined(Z7).curve(u),t(f)}return(t="vertical"===a&&iW(s)?q7().y(e8).x1(J7).x0(s):iW(s)?q7().x(J7).y1(e8).y0(s):H7().x(J7).y(e8)).defined(Z7).curve(u),t(d)},n8=function(e){var t=e.className,n=e.points,i=e.path,o=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?t8(e):i;return r.createElement("path",K7({},VW(e,!1),TW(e),{className:qq("recharts-curve",t),d:s,ref:o}))};function r8(e){return r8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r8(e)}var i8=["x","y","top","left","width","height","className"];function o8(){return o8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o8.apply(this,arguments)}function s8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=r8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=r8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l8(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c8=function(e,t,n,r,i,o){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)},u8=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,s=e.top,a=void 0===s?0:s,l=e.left,c=void 0===l?0:l,u=e.width,d=void 0===u?0:u,h=e.height,f=void 0===h?0:h,p=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s8(Object(n),!0).forEach((function(t){a8(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:n,y:o,top:a,left:c,width:d,height:f},l8(e,i8));return iW(n)&&iW(o)&&iW(d)&&iW(f)&&iW(a)&&iW(c)?r.createElement("path",o8({},VW(m,!0),{className:qq("recharts-cross",p),d:c8(n,o,d,f,a,c)})):null};function d8(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,o=e.endAngle;return{points:[Z3(t,n,r,i),Z3(t,n,r,o)],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function h8(e,t,n){var r,i,o,s;if("horizontal"===e)o=r=t.x,i=n.top,s=n.top+n.height;else if("vertical"===e)s=i=t.y,r=n.left,o=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return d8(t);var a=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=Z3(a,l,c,d),f=Z3(a,l,u,d);r=h.x,i=h.y,o=f.x,s=f.y}return[{x:r,y:i},{x:o,y:s}]}function f8(e){return f8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f8(e)}function p8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p8(Object(n),!0).forEach((function(t){g8(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=f8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y8(e){var t,n,i,o=e.element,s=e.tooltipEventType,a=e.isActive,l=e.activeCoordinate,c=e.activePayload,u=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,m=null!==(t=o.props.cursor)&&void 0!==t?t:null===(n=o.type.defaultProps)||void 0===n?void 0:n.cursor;if(!o||!m||!a||!l||"ScatterChart"!==p&&"axis"!==s)return null;var g=n8;if("ScatterChart"===p)i=l,g=u8;else if("BarChart"===p)i=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(f,l,u,h),g=nQ;else if("radial"===f){var y=d8(l),v=y.cx,b=y.cy,x=y.radius;i={cx:v,cy:b,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:x,outerRadius:x},g=s7}else i={points:h8(f,l,u)},g=n8;var w=m8(m8(m8(m8({stroke:"#ccc",pointerEvents:"none"},u),i),VW(m,!1)),{},{payload:c,payloadIndex:d,className:qq("recharts-tooltip-cursor",m.className)});return(0,r.isValidElement)(m)?(0,r.cloneElement)(m,w):(0,r.createElement)(g,w)}var v8=["item"],b8=["children","className","width","height","style","compact","title","desc"];function x8(e){return x8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x8(e)}function w8(){return w8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w8.apply(this,arguments)}function _8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||A8(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S8(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R8(r.key),r)}}function C8(e,t,n){return t=j8(t),function(e,t){if(t&&("object"===x8(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T8()?Reflect.construct(t,n||[],j8(e).constructor):t.apply(e,n))}function T8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T8=function(){return!!e})()}function j8(e){return j8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j8(e)}function k8(e,t){return k8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k8(e,t)}function N8(e){return function(e){if(Array.isArray(e))return I8(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A8(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A8(e,t){if(e){if("string"===typeof e)return I8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I8(e,t):void 0}}function I8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P8(Object(n),!0).forEach((function(t){M8(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M8(e,t,n){return(t=R8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R8(e){var t=function(e,t){if("object"!=x8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x8(t)?t:t+""}var D8={xAxis:["bottom","top"],yAxis:["left","right"]},L8={width:"100%",height:"100%"},F8={x:0,y:0};function B8(e){return e}var U8=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,o=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(N8(e),N8(n)):e}),[]);return o.length>0?o:e&&e.length&&iW(r)&&iW(i)?e.slice(r,i+1):[]};function V8(e){return"number"===e?[0,"auto"]:void 0}var z8=function(e,t,n,r){var i=e.graphicalItems,o=e.tooltipAxis,s=U8(t,e);return n<0||!i||!i.length||n>=s.length?null:i.reduce((function(i,a){var l,c,u=null!==(l=a.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),o.dataKey&&!o.allowDuplicatedCategory)?c=dW(void 0===u?s:u,o.dataKey,r):c=u&&u[n]||s[n];return c?[].concat(N8(i),[C3(a,c)]):i}),[])},$8=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},o=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),s=e.orderedTooltipTicks,a=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(s<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var a=i.range,l=0;l<s;l++){var c=l>0?r[l-1].coordinate:r[s-1].coordinate,u=r[l].coordinate,d=l>=s-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(nW(u-c)!==nW(d-u)){var f=[];if(nW(d-u)===nW(a[1]-a[0])){h=d;var p=u+a[1]-a[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var m=d+a[1]-a[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){o=r[l].index;break}}else{var y=Math.min(c,d),v=Math.max(c,d);if(e>(y+u)/2&&e<=(v+u)/2){o=r[l].index;break}}}else for(var b=0;b<s;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<s-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===s-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){o=n[b].index;break}return o}(o,s,l,a);if(c>=0&&l){var u=l[c]&&l[c].value,d=z8(e,t,c,u),h=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var o=i.coordinate,s=r.radius;return O8(O8(O8({},r),Z3(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var a=i.coordinate,l=r.angle;return O8(O8(O8({},r),Z3(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return F8}(n,s,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},H8=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,o=t.axisIdKey,s=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=h3(c,i);return n.reduce((function(t,n){var f,p=void 0!==n.type.defaultProps?O8(O8({},n.type.defaultProps),n.props):n.props,m=p.type,g=p.dataKey,y=p.allowDataOverflow,v=p.allowDuplicatedCategory,b=p.scale,x=p.ticks,w=p.includeHidden,_=p[o];if(t[_])return t;var S,E,C,T=U8(e.data,{graphicalItems:r.filter((function(e){var t;return(o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o])===_})),dataStartIndex:a,dataEndIndex:l}),j=T.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(r&&i&&iW(r)&&iW(i))return!0}return!1})(p.domain,y,m)&&(S=_3(p.domain,null,y),!h||"number"!==m&&"auto"===b||(C=l3(T,g,"category")));var k=V8(m);if(!S||0===S.length){var N,A=null!==(N=p.domain)&&void 0!==N?N:k;if(g){if(S=l3(T,g,m),"category"===m&&h){var I=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);v&&I?(E=S,S=eK()(0,j)):v||(S=E3(A,S,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(N8(e),[t])}),[]))}else if("category"===m)S=v?S.filter((function(e){return""!==e&&!pW()(e)})):E3(A,S,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||pW()(t)?e:[].concat(N8(e),[t])}),[]);else if("number"===m){var P=function(e,t,n,r,i){var o=t.map((function(t){return u3(e,t,n,i,r)})).filter((function(e){return!pW()(e)}));return o&&o.length?o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(T,r.filter((function(e){var t,n,r=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===_&&(w||!i)})),g,i,c);P&&(S=P)}!h||"number"!==m&&"auto"===b||(C=l3(T,g,"category"))}else S=h?eK()(0,j):s&&s[_]&&s[_].hasStack&&"number"===m?"expand"===d?[0,1]:b3(s[_].stackGroups,a,l):d3(T,r.filter((function(e){var t=o in e.props?e.props[o]:e.type.defaultProps[o],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===_&&(w||!n)})),m,c,!0);if("number"===m)S=N6(u,S,_,i,x),A&&(S=_3(A,S,y));else if("category"===m&&A){var O=A;S.every((function(e){return O.indexOf(e)>=0}))&&(S=O)}}return O8(O8({},t),{},M8({},_,O8(O8({},p),{},{axisType:i,domain:S,categoricalDomain:C,duplicateDomain:E,originalDomain:null!==(f=p.domain)&&void 0!==f?f:k,isCategorical:h,layout:c})))}),{})},q8=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,o=t.graphicalItems,s=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),d=DW(c,i),h={};return d&&d.length?h=H8(e,{axes:d,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:s,dataStartIndex:a,dataEndIndex:l}):o&&o.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,s=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=U8(e.data,{graphicalItems:n,dataStartIndex:a,dataEndIndex:l}),h=d.length,f=h3(c,i),p=-1;return n.reduce((function(e,t){var m,g=(void 0!==t.type.defaultProps?O8(O8({},t.type.defaultProps),t.props):t.props)[o],y=V8("number");return e[g]?e:(p++,f?m=eK()(0,h):s&&s[g]&&s[g].hasStack?(m=b3(s[g].stackGroups,a,l),m=N6(u,m,g,i)):(m=_3(y,d3(d,n.filter((function(e){var t,n,r=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!i})),"number",c),r.defaultProps.allowDataOverflow),m=N6(u,m,g,i)),O8(O8({},e),{},M8({},g,O8(O8({axisType:i},r.defaultProps),{},{hide:!0,orientation:Jq()(D8,"".concat(i,".").concat(p%2),null),domain:m,originalDomain:y,isCategorical:f,layout:c}))))}),{})}(e,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:s,dataStartIndex:a,dataEndIndex:l})),h},W8=function(e){var t=e.children,n=e.defaultShowTooltip,r=LW(t,$3),i=0,o=0;return e.data&&0!==e.data.length&&(o=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(o=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},K8=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Y8=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,o=e.yAxisMap,s=void 0===o?{}:o,a=n.width,l=n.height,c=n.children,u=n.margin||{},d=LW(c,$3),h=LW(c,pG),f=Object.keys(s).reduce((function(e,t){var n=s[t],r=n.orientation;return n.mirror||n.hide?e:O8(O8({},e),{},M8({},r,e[r]+n.width))}),{left:u.left||0,right:u.right||0}),p=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:O8(O8({},e),{},M8({},r,Jq()(e,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),m=O8(O8({},p),f),g=m.bottom;d&&(m.bottom+=d.props.height||$3.defaultProps.height),h&&t&&(m=function(e,t,n,r){var i=n.children,o=n.width,s=n.margin,a=o-(s.left||0)-(s.right||0),l=e3({children:i,legendWidth:a});if(l){var c=r||{},u=c.width,d=c.height,h=l.align,f=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===f)&&"center"!==h&&iW(e[h]))return o3(o3({},e),{},s3({},h,e[h]+(u||0)));if(("horizontal"===p||"vertical"===p&&"center"===h)&&"middle"!==f&&iW(e[f]))return o3(o3({},e),{},s3({},f,e[f]+(d||0)))}return e}(m,0,n,t));var y=a-m.left-m.right,v=l-m.top-m.bottom;return O8(O8({brushBottom:g},m),{},{width:Math.max(y,0),height:Math.max(v,0)})},G8=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},X8=["points","className","baseLinePoints","connectNulls"];function Q8(){return Q8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q8.apply(this,arguments)}function Z8(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J8(e){return function(e){if(Array.isArray(e))return e9(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return e9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e9(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var t9=function(e){return e&&e.x===+e.x&&e.y===+e.y},n9=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){t9(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),t9(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(J8(e),J8(t))}),[])]);var r=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(r,"Z"):r},r9=function(e){var t=e.points,n=e.className,i=e.baseLinePoints,o=e.connectNulls,s=Z8(e,X8);if(!t||!t.length)return null;var a=qq("recharts-polygon",n);if(i&&i.length){var l=s.stroke&&"none"!==s.stroke,c=function(e,t,n){var r=n9(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(n9(t.reverse(),n).slice(1))}(t,i,o);return r.createElement("g",{className:a},r.createElement("path",Q8({},VW(s,!0),{fill:"Z"===c.slice(-1)?s.fill:"none",stroke:"none",d:c})),l?r.createElement("path",Q8({},VW(s,!0),{fill:"none",d:n9(t,o)})):null,l?r.createElement("path",Q8({},VW(s,!0),{fill:"none",d:n9(i,o)})):null)}var u=n9(t,o);return r.createElement("path",Q8({},VW(s,!0),{fill:"Z"===u.slice(-1)?s.fill:"none",className:a,d:u}))};function i9(e){return i9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i9(e)}function o9(){return o9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o9.apply(this,arguments)}function s9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s9(Object(n),!0).forEach((function(t){f9(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p9(r.key),r)}}function c9(e,t,n){return t=d9(t),function(e,t){if(t&&("object"===i9(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u9()?Reflect.construct(t,n||[],d9(e).constructor):t.apply(e,n))}function u9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u9=function(){return!!e})()}function d9(e){return d9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d9(e)}function h9(e,t){return h9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h9(e,t)}function f9(e,t,n){return(t=p9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p9(e){var t=function(e,t){if("object"!=i9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i9(t)?t:t+""}var m9=Math.PI/180,g9=1e-5,y9=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c9(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h9(e,t)}(t,e),n=t,i=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,i=t.radius,o=t.orientation,s=t.tickSize||8,a=Z3(n,r,i,e.coordinate),l=Z3(n,r,i+("inner"===o?-1:1)*s,e.coordinate);return{x1:a.x,y1:a.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*m9);return n>g9?"outer"===t?"start":"end":n<-g9?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,i=e.radius,o=e.axisLine,s=e.axisLineType,a=a9(a9({},VW(this.props,!1)),{},{fill:"none"},VW(o,!1));if("circle"===s)return r.createElement(gG,o9({className:"recharts-polar-angle-axis-line"},a,{cx:t,cy:n,r:i}));var l=this.props.ticks.map((function(e){return Z3(t,n,i,e.coordinate)}));return r.createElement(r9,o9({className:"recharts-polar-angle-axis-line"},a,{points:l}))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,o=n.tick,s=n.tickLine,a=n.tickFormatter,l=n.stroke,c=VW(this.props,!1),u=VW(o,!1),d=a9(a9({},c),{},{fill:"none"},VW(s,!1)),h=i.map((function(n,i){var h=e.getTickLineCoord(n),f=a9(a9(a9({textAnchor:e.getTickTextAnchor(n)},c),{},{stroke:"none",fill:l},u),{},{index:i,payload:n,x:h.x2,y:h.y2});return r.createElement(hK,o9({className:qq("recharts-polar-angle-axis-tick",r4(o)),key:"tick-".concat(n.coordinate)},jW(e.props,n,i)),s&&r.createElement("line",o9({className:"recharts-polar-angle-axis-tick-line"},d,h)),o&&t.renderTickItem(o,f,a?a(n.value,i):n.value))}));return r.createElement(hK,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,i=e.axisLine;return n<=0||!t||!t.length?null:r.createElement(hK,{className:qq("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],o=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):gW()(e)?e(t):r.createElement(QQ,o9({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],i&&l9(n.prototype,i),o&&l9(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent);f9(y9,"displayName","PolarAngleAxis"),f9(y9,"axisType","angleAxis"),f9(y9,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var v9=n(2794),b9=n.n(v9),x9=n(9364),w9=n.n(x9),_9=["cx","cy","angle","ticks","axisLine"],S9=["ticks","tick","angle","tickFormatter","stroke"];function E9(e){return E9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E9(e)}function C9(){return C9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C9.apply(this,arguments)}function T9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T9(Object(n),!0).forEach((function(t){M9(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k9(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function N9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R9(r.key),r)}}function A9(e,t,n){return t=P9(t),function(e,t){if(t&&("object"===E9(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I9()?Reflect.construct(t,n||[],P9(e).constructor):t.apply(e,n))}function I9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I9=function(){return!!e})()}function P9(e){return P9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P9(e)}function O9(e,t){return O9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O9(e,t)}function M9(e,t,n){return(t=R9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e){var t=function(e,t){if("object"!=E9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E9(t)?t:t+""}var D9=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A9(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O9(e,t)}(t,e),n=t,i=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,i=n.cx,o=n.cy;return Z3(i,o,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,o=b9()(i,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:w9()(i,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:o.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,i=e.angle,o=e.ticks,s=e.axisLine,a=k9(e,_9),l=o.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),c=Z3(t,n,l[0],i),u=Z3(t,n,l[1],i),d=j9(j9(j9({},VW(a,!1)),{},{fill:"none"},VW(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return r.createElement("line",C9({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,o=n.tick,s=n.angle,a=n.tickFormatter,l=n.stroke,c=k9(n,S9),u=this.getTickTextAnchor(),d=VW(c,!1),h=VW(o,!1),f=i.map((function(n,i){var c=e.getTickValueCoord(n),f=j9(j9(j9(j9({textAnchor:u,transform:"rotate(".concat(90-s,", ").concat(c.x,", ").concat(c.y,")")},d),{},{stroke:"none",fill:l},h),{},{index:i},c),{},{payload:n});return r.createElement(hK,C9({className:qq("recharts-polar-radius-axis-tick",r4(o)),key:"tick-".concat(n.coordinate)},jW(e.props,n,i)),t.renderTickItem(o,f,a?a(n.value,i):n.value))}));return r.createElement(hK,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,i=e.tick;return t&&t.length?r.createElement(hK,{className:qq("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),i&&this.renderTicks(),p4.renderCallByParent(this.props,this.getViewBox())):null}}],o=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):gW()(e)?e(t):r.createElement(QQ,C9({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],i&&N9(n.prototype,i),o&&N9(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent);M9(D9,"displayName","PolarRadiusAxis"),M9(D9,"axisType","radiusAxis"),M9(D9,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var L9=n(4065),F9=n.n(L9);function B9(e){return B9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B9(e)}var U9=["valueAccessor"],V9=["data","dataKey","clockWise","id","textBreakAll"];function z9(e){return function(e){if(Array.isArray(e))return $9(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $9(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H9(){return H9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H9.apply(this,arguments)}function q9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q9(Object(n),!0).forEach((function(t){K9(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K9(e,t,n){return t=function(e){var t=function(e,t){if("object"!=B9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B9(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y9(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var G9=function(e){return Array.isArray(e.value)?F9()(e.value):e.value};function X9(e){var t=e.valueAccessor,n=void 0===t?G9:t,i=Y9(e,U9),o=i.data,s=i.dataKey,a=i.clockWise,l=i.id,c=i.textBreakAll,u=Y9(i,V9);return o&&o.length?r.createElement(hK,{className:"recharts-label-list"},o.map((function(e,t){var i=pW()(s)?n(e,t):a3(e&&e.payload,s),o=pW()(l)?{}:{id:"".concat(l,"-").concat(t)};return r.createElement(p4,H9({},VW(e,!0),u,o,{parentViewBox:e.parentViewBox,value:i,textBreakAll:c,viewBox:p4.parseViewBox(pW()(a)?e:W9(W9({},e),{},{clockWise:a})),key:"label-".concat(t),index:t}))}))):null}X9.displayName="LabelList",X9.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=DW(e.children,X9).map((function(e,n){return(0,r.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return i;var o=function(e,t){return e?!0===e?r.createElement(X9,{key:"labelList-implicit",data:t}):r.isValidElement(e)||gW()(e)?r.createElement(X9,{key:"labelList-implicit",data:t,content:e}):vW()(e)?r.createElement(X9,H9({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[o].concat(z9(i))};var Q9,Z9=function(e){return null};function J9(e){return J9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J9(e)}function eee(){return eee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eee.apply(this,arguments)}function tee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tee(Object(n),!0).forEach((function(t){lee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ree(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cee(r.key),r)}}function iee(e,t,n){return t=see(t),function(e,t){if(t&&("object"===J9(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oee()?Reflect.construct(t,n||[],see(e).constructor):t.apply(e,n))}function oee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oee=function(){return!!e})()}function see(e){return see=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},see(e)}function aee(e,t){return aee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aee(e,t)}function lee(e,t,n){return(t=cee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cee(e){var t=function(e,t){if("object"!=J9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=J9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J9(t)?t:t+""}Z9.displayName="Cell";var uee=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lee(n=iee(this,t,[e]),"pieRef",null),lee(n,"sectorRefs",[]),lee(n,"id",aW("recharts-pie-")),lee(n,"handleAnimationEnd",(function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),gW()(e)&&e()})),lee(n,"handleAnimationStart",(function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),gW()(e)&&e()})),n.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aee(e,t)}(t,e),n=t,i=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.label,o=n.labelLine,s=n.dataKey,a=n.valueKey,l=VW(this.props,!1),c=VW(i,!1),u=VW(o,!1),d=i&&i.offsetRadius||20,h=e.map((function(e,n){var h=(e.startAngle+e.endAngle)/2,f=Z3(e.cx,e.cy,e.outerRadius+d,h),p=nee(nee(nee(nee({},l),e),{},{stroke:"none"},c),{},{index:n,textAnchor:t.getTextAnchor(f.x,e.cx)},f),m=nee(nee(nee(nee({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:n,points:[Z3(e.cx,e.cy,e.outerRadius,h),f]}),g=s;return pW()(s)&&pW()(a)?g="value":pW()(s)&&(g=a),r.createElement(hK,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(n)},o&&t.renderLabelLineItem(o,m,"line"),t.renderLabelItem(i,p,a3(e,g)))}));return r.createElement(hK,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,i=n.activeShape,o=n.blendStroke,s=n.inactiveShape;return e.map((function(n,a){if(0===(null===n||void 0===n?void 0:n.startAngle)&&0===(null===n||void 0===n?void 0:n.endAngle)&&1!==e.length)return null;var l=t.isActiveIndex(a),c=s&&t.hasActiveIndex()?s:null,u=l?i:c,d=nee(nee({},n),{},{stroke:o?n.fill:n.stroke,tabIndex:-1});return r.createElement(hK,eee({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},jW(t.props,n,a),{key:"sector-".concat(null===n||void 0===n?void 0:n.startAngle,"-").concat(null===n||void 0===n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(a)}),r.createElement(m7,eee({option:u,isActive:l,shapeType:"sector"},d)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,i=t.isAnimationActive,o=t.animationBegin,s=t.animationDuration,a=t.animationEasing,l=t.animationId,c=this.state,u=c.prevSectors,d=c.prevIsAnimationActive;return r.createElement(qX,{begin:o,duration:s,isActive:i,easing:a,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var i=t.t,o=[],s=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=u&&u[t],r=t>0?Jq()(e,"paddingAngle",0):0;if(n){var a=uW(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=nee(nee({},e),{},{startAngle:s+r,endAngle:s+a(i)+r});o.push(l),s=l.endAngle}else{var c=e.endAngle,d=e.startAngle,h=uW(0,c-d)(i),f=nee(nee({},e),{},{startAngle:s+r,endAngle:s+h+r});o.push(f),s=f.endAngle}})),r.createElement(hK,null,e.renderSectorsStatically(o))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&s5()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,i=t.sectors,o=t.className,s=t.label,a=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.isAnimationActive,h=this.state.isAnimationFinished;if(n||!i||!i.length||!iW(a)||!iW(l)||!iW(c)||!iW(u))return null;var f=qq("recharts-pie",o);return r.createElement(hK,{tabIndex:this.props.rootTabIndex,className:f,ref:function(t){e.pieRef=t}},this.renderSectors(),s&&this.renderLabels(i),p4.renderCallByParent(this.props,null,!1),(!d||h)&&X9.renderCallByParent(this.props,i,!1))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,n){if(r.isValidElement(e))return r.cloneElement(e,t);if(gW()(e))return e(t);var i=qq("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return r.createElement(n8,eee({},t,{key:n,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(e,t,n){if(r.isValidElement(e))return r.cloneElement(e,t);var i=n;if(gW()(e)&&(i=e(t),r.isValidElement(i)))return i;var o=qq("recharts-pie-label-text","boolean"===typeof e||gW()(e)?"":e.className);return r.createElement(QQ,eee({},t,{alignmentBaseline:"middle",className:o}),i)}}],i&&ree(n.prototype,i),o&&ree(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(r.PureComponent);Q9=uee,lee(uee,"displayName","Pie"),lee(uee,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!BK.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),lee(uee,"parseDeltaAngle",(function(e,t){return nW(t-e)*Math.min(Math.abs(t-e),360)})),lee(uee,"getRealPieData",(function(e){var t=e.data,n=e.children,r=VW(e,!1),i=DW(n,Z9);return t&&t.length?t.map((function(e,t){return nee(nee(nee({payload:e},r),e),i&&i[t]&&i[t].props)})):i&&i.length?i.map((function(e){return nee(nee({},r),e.props)})):[]})),lee(uee,"parseCoordinateOfPie",(function(e,t){var n=t.top,r=t.left,i=t.width,o=t.height,s=J3(i,o);return{cx:r+lW(e.cx,i,i/2),cy:n+lW(e.cy,o,o/2),innerRadius:lW(e.innerRadius,s,0),outerRadius:lW(e.outerRadius,s,.8*s),maxRadius:e.maxRadius||Math.sqrt(i*i+o*o)/2}})),lee(uee,"getComposedData",(function(e){var t=e.item,n=e.offset,r=void 0!==t.type.defaultProps?nee(nee({},t.type.defaultProps),t.props):t.props,i=Q9.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,s=r.startAngle,a=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,h=r.tooltipType,f=Math.abs(r.minAngle),p=Q9.parseCoordinateOfPie(r,n),m=Q9.parseDeltaAngle(s,a),g=Math.abs(m),y=c;pW()(c)&&pW()(d)?(hW(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):pW()(c)&&(hW(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=d);var v,b,x=i.filter((function(e){return 0!==a3(e,y,0)})).length,w=g-x*f-(g>=360?x:x-1)*l,_=i.reduce((function(e,t){var n=a3(t,y,0);return e+(iW(n)?n:0)}),0);_>0&&(v=i.map((function(e,t){var n,r=a3(e,y,0),i=a3(e,u,t),a=(iW(r)?r:0)/_,c=(n=t?b.endAngle+nW(m)*l*(0!==r?1:0):s)+nW(m)*((0!==r?f:0)+a*w),d=(n+c)/2,g=(p.innerRadius+p.outerRadius)/2,v=[{name:i,value:r,payload:e,dataKey:y,type:h}],x=Z3(p.cx,p.cy,g,d);return b=nee(nee(nee({percent:a,cornerRadius:o,name:i,tooltipPayload:v,midAngle:d,middleRadius:g,tooltipPosition:x},e),p),{},{value:a3(e,y),startAngle:n,endAngle:c,payload:e,paddingAngle:nW(m)*l})})));return nee(nee({},p),{},{sectors:v,data:i})}));var dee=function(e){var t=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,o=void 0===i?"axis":i,s=e.validateTooltipEventTypes,a=void 0===s?["axis"]:s,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,o=t.updateId,s=t.dataStartIndex,a=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,f=e.maxBarSize,p=K8(u),m=p.numericAxisName,g=p.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some((function(e){var t=PW(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,p){var b=U8(e.data,{graphicalItems:[n],dataStartIndex:s,dataEndIndex:a}),x=void 0!==n.type.defaultProps?O8(O8({},n.type.defaultProps),n.props):n.props,w=x.dataKey,_=x.maxBarSize,S=x["".concat(m,"Id")],E=x["".concat(g,"Id")],C=l.reduce((function(e,n){var r=t["".concat(n.axisType,"Map")],i=x["".concat(n.axisType,"Id")];r&&r[i]||"zAxis"===n.axisType||iK(!1);var o=r[i];return O8(O8({},e),{},M8(M8({},n.axisType,o),"".concat(n.axisType,"Ticks"),f3(o)))}),{}),T=C[g],j=C["".concat(g,"Ticks")],k=r&&r[S]&&r[S].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?o3(o3({},e.type.defaultProps),e.props):e.props).stackId;if(oW(r)){var i=t[r];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null}(n,r[S].stackGroups),N=PW(n.type).indexOf("Bar")>=0,A=S3(T,j),I=[],P=y&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var o={},s=Object.keys(i),a=0,l=s.length;a<l;a++)for(var c=i[s[a]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var f=c[u[d]],p=f.items,m=f.cateAxisId,g=p.filter((function(e){return PW(e.type).indexOf("Bar")>=0}));if(g&&g.length){var y=g[0].type.defaultProps,v=void 0!==y?o3(o3({},y),g[0].props):g[0].props,b=v.barSize,x=v[m];o[x]||(o[x]=[]);var w=pW()(b)?t:b;o[x].push({item:g[0],stackList:g.slice(1),barSize:pW()(w)?void 0:lW(w,n,0)})}}return o}({barSize:c,stackGroups:r,totalSize:G8(C,g)});if(N){var O,M,R=pW()(_)?f:_,D=null!==(O=null!==(M=S3(T,j,!0))&&void 0!==M?M:R)&&void 0!==O?O:0;I=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,o=void 0===i?[]:i,s=e.maxBarSize,a=o.length;if(a<1)return null;var l,c=lW(t,r,0,!0),u=[];if(o[0].barSize===+o[0].barSize){var d=!1,h=r/a,f=o.reduce((function(e,t){return e+t.barSize||0}),0);(f+=(a-1)*c)>=r&&(f-=(a-1)*c,c=0),f>=r&&h>0&&(d=!0,f=a*(h*=.9));var p={offset:((r-f)/2|0)-c,size:0};l=o.reduce((function(e,t){var n={item:t.item,position:{offset:p.offset+p.size+c,size:d?h:t.barSize}},r=[].concat(n3(e),[n]);return p=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:p})})),r}),u)}else{var m=lW(n,r,0,!0);r-2*m-(a-1)*c<=0&&(c=0);var g=(r-2*m-(a-1)*c)/a;g>1&&(g>>=0);var y=s===+s?Math.min(g,s):g;l=o.reduce((function(e,t,n){var r=[].concat(n3(e),[{item:t.item,position:{offset:m+(g+c)*n+(g-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),u)}return l}({barGap:d,barCategoryGap:h,bandSize:D!==A?D:A,sizeList:P[E],maxBarSize:R}),D!==A&&(I=I.map((function(e){return O8(O8({},e),{},{position:O8(O8({},e.position),{},{offset:e.position.offset-D/2})})})))}var L=n&&n.type&&n.type.getComposedData;L&&v.push({props:O8(O8({},L(O8(O8({},C),{},{displayedData:b,props:e,dataKey:w,item:n,bandSize:A,barPosition:I,offset:i,stackedData:k,layout:u,dataStartIndex:s,dataEndIndex:a}))),{},M8(M8(M8({key:n.key||"item-".concat(p)},m,C[m]),g,C[g]),"animationId",o)),childIndex:qW(n,e.children),item:n})})),v},f=function(e,r){var i=e.props,o=e.dataStartIndex,s=e.dataEndIndex,a=e.updateId;if(!FW({props:i}))return null;var c=i.children,d=i.layout,f=i.stackOffset,p=i.data,m=i.reverseStackOrder,g=K8(d),y=g.numericAxisName,v=g.cateAxisName,b=DW(c,n),x=function(e,t,n,r,i,o){if(!e)return null;var s=(o?t.reverse():t).reduce((function(e,t){var i,o=null!==(i=t.type)&&void 0!==i&&i.defaultProps?o3(o3({},t.type.defaultProps),t.props):t.props,s=o.stackId;if(o.hide)return e;var a=o[n],l=e[a]||{hasStack:!1,stackGroups:{}};if(oW(s)){var c=l.stackGroups[s]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[s]=c}else l.stackGroups[aW("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return o3(o3({},e),{},s3({},a,l))}),{});return Object.keys(s).reduce((function(t,o){var a=s[o];return a.hasStack&&(a.stackGroups=Object.keys(a.stackGroups).reduce((function(t,o){var s=a.stackGroups[o];return o3(o3({},t),{},s3({},o,{numericAxisId:n,cateAxisId:r,items:s.items,stackedData:v3(e,s.items,i)}))}),{})),o3(o3({},t),{},s3({},o,a))}),{})}(p,b,"".concat(y,"Id"),"".concat(v,"Id"),f,m),w=l.reduce((function(e,t){var n="".concat(t.axisType,"Map");return O8(O8({},e),{},M8({},n,q8(i,O8(O8({},t),{},{graphicalItems:b,stackGroups:t.axisType===y&&x,dataStartIndex:o,dataEndIndex:s}))))}),{}),_=Y8(O8(O8({},w),{},{props:i,graphicalItems:b}),null===r||void 0===r?void 0:r.legendBBox);Object.keys(w).forEach((function(e){w[e]=u(i,w[e],_,e.replace("Map",""),t)}));var S=function(e){var t=cW(e),n=f3(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:nK()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:S3(t,n)}}(w["".concat(v,"Map")]),E=h(i,O8(O8({},w),{},{dataStartIndex:o,dataEndIndex:s,updateId:a,graphicalItems:b,stackGroups:x,offset:_}));return O8(O8({formattedGraphicalItems:E,graphicalItems:b,offset:_,stackGroups:x},S),w)},p=function(e){function n(e){var i,o,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),M8(s=C8(this,n,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),M8(s,"accessibilityManager",new L6),M8(s,"handleLegendBBoxUpdate",(function(e){if(e){var t=s.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;s.setState(O8({legendBBox:e},f({props:s.props,dataStartIndex:n,dataEndIndex:r,updateId:i},O8(O8({},s.state),{},{legendBBox:e}))))}})),M8(s,"handleReceiveSyncEvent",(function(e,t,n){if(s.props.syncId===e){if(n===s.eventEmitterSymbol&&"function"!==typeof s.props.syncMethod)return;s.applySyncEvent(t)}})),M8(s,"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==s.state.dataStartIndex||n!==s.state.dataEndIndex){var r=s.state.updateId;s.setState((function(){return O8({dataStartIndex:t,dataEndIndex:n},f({props:s.props,dataStartIndex:t,dataEndIndex:n,updateId:r},s.state))})),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),M8(s,"handleMouseEnter",(function(e){var t=s.getMouseInfo(e);if(t){var n=O8(O8({},t),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var r=s.props.onMouseEnter;gW()(r)&&r(n,e)}})),M8(s,"triggeredAfterMouseMove",(function(e){var t=s.getMouseInfo(e),n=t?O8(O8({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(n),s.triggerSyncEvent(n);var r=s.props.onMouseMove;gW()(r)&&r(n,e)})),M8(s,"handleItemMouseEnter",(function(e){s.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),M8(s,"handleItemMouseLeave",(function(){s.setState((function(){return{isTooltipActive:!1}}))})),M8(s,"handleMouseMove",(function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)})),M8(s,"handleMouseLeave",(function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var n=s.props.onMouseLeave;gW()(n)&&n(t,e)})),M8(s,"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&IW[t]?IW[t]:null}(e),r=Jq()(s.props,"".concat(n));n&&gW()(r)&&r(null!==(t=/.*touch.*/i.test(n)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)})),M8(s,"handleClick",(function(e){var t=s.getMouseInfo(e);if(t){var n=O8(O8({},t),{},{isTooltipActive:!0});s.setState(n),s.triggerSyncEvent(n);var r=s.props.onClick;gW()(r)&&r(n,e)}})),M8(s,"handleMouseDown",(function(e){var t=s.props.onMouseDown;gW()(t)&&t(s.getMouseInfo(e),e)})),M8(s,"handleMouseUp",(function(e){var t=s.props.onMouseUp;gW()(t)&&t(s.getMouseInfo(e),e)})),M8(s,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),M8(s,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])})),M8(s,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])})),M8(s,"handleDoubleClick",(function(e){var t=s.props.onDoubleClick;gW()(t)&&t(s.getMouseInfo(e),e)})),M8(s,"handleContextMenu",(function(e){var t=s.props.onContextMenu;gW()(t)&&t(s.getMouseInfo(e),e)})),M8(s,"triggerSyncEvent",(function(e){void 0!==s.props.syncId&&I6.emit(P6,s.props.syncId,e,s.eventEmitterSymbol)})),M8(s,"applySyncEvent",(function(e){var t=s.props,n=t.layout,r=t.syncMethod,i=s.state.updateId,o=e.dataStartIndex,a=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(O8({dataStartIndex:o,dataEndIndex:a},f({props:s.props,dataStartIndex:o,dataEndIndex:a,updateId:i},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=s.state,h=d.offset,p=d.tooltipTicks;if(!h)return;if("function"===typeof r)u=r(p,e);else if("value"===r){u=-1;for(var m=0;m<p.length;m++)if(p[m].value===e.activeLabel){u=m;break}}var g=O8(O8({},h),{},{x:h.left,y:h.top}),y=Math.min(l,g.x+g.width),v=Math.min(c,g.y+g.height),b=p[u]&&p[u].value,x=z8(s.state,s.props.data,u),w=p[u]?{x:"horizontal"===n?p[u].coordinate:y,y:"horizontal"===n?v:p[u].coordinate}:F8;s.setState(O8(O8({},e),{},{activeLabel:b,activeCoordinate:w,activePayload:x,activeTooltipIndex:u}))}else s.setState(e)})),M8(s,"renderCursor",(function(e){var n,i=s.state,o=i.isTooltipActive,a=i.activeCoordinate,l=i.activePayload,c=i.offset,u=i.activeTooltipIndex,d=i.tooltipAxisBandSize,h=s.getTooltipEventType(),f=null!==(n=e.props.active)&&void 0!==n?n:o,p=s.props.layout,m=e.key||"_recharts-cursor";return r.createElement(y8,{key:m,activeCoordinate:a,activePayload:l,activeTooltipIndex:u,chartName:t,element:e,isActive:f,layout:p,offset:c,tooltipAxisBandSize:d,tooltipEventType:h})})),M8(s,"renderPolarAxis",(function(e,t,n){var i=Jq()(e,"type.axisType"),o=Jq()(s.state,"".concat(i,"Map")),a=e.type.defaultProps,l=void 0!==a?O8(O8({},a),e.props):e.props,c=o&&o[l["".concat(i,"Id")]];return(0,r.cloneElement)(e,O8(O8({},c),{},{className:qq(i,c.className),key:e.key||"".concat(t,"-").concat(n),ticks:f3(c,!0)}))})),M8(s,"renderPolarGrid",(function(e){var t=e.props,n=t.radialLines,i=t.polarAngles,o=t.polarRadius,a=s.state,l=a.radiusAxisMap,c=a.angleAxisMap,u=cW(l),d=cW(c),h=d.cx,f=d.cy,p=d.innerRadius,m=d.outerRadius;return(0,r.cloneElement)(e,{polarAngles:Array.isArray(i)?i:f3(d,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(o)?o:f3(u,!0).map((function(e){return e.coordinate})),cx:h,cy:f,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:n})})),M8(s,"renderLegend",(function(){var e=s.state.formattedGraphicalItems,t=s.props,n=t.children,i=t.width,o=t.height,a=s.props.margin||{},l=i-(a.left||0)-(a.right||0),u=e3({children:n,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!u)return null;var d=u.item,h=S8(u,v8);return(0,r.cloneElement)(d,O8(O8({},h),{},{chartWidth:i,chartHeight:o,margin:a,onBBoxUpdate:s.handleLegendBBoxUpdate}))})),M8(s,"renderTooltip",(function(){var e,t=s.props,n=t.children,i=t.accessibilityLayer,o=LW(n,eY);if(!o)return null;var a=s.state,l=a.isTooltipActive,c=a.activeCoordinate,u=a.activePayload,d=a.activeLabel,h=a.offset,f=null!==(e=o.props.active)&&void 0!==e?e:l;return(0,r.cloneElement)(o,{viewBox:O8(O8({},h),{},{x:h.left,y:h.top}),active:f,label:d,payload:f?u:[],coordinate:c,accessibilityLayer:i})})),M8(s,"renderBrush",(function(e){var t=s.props,n=t.margin,i=t.data,o=s.state,a=o.offset,l=o.dataStartIndex,c=o.dataEndIndex,u=o.updateId;return(0,r.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:m3(s.handleBrushChange,e.props.onChange),data:i,x:iW(e.props.x)?e.props.x:a.left,y:iW(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(n.bottom||0),width:iW(e.props.width)?e.props.width:a.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})})),M8(s,"renderReferenceElement",(function(e,t,n){if(!e)return null;var i=s.clipPathId,o=s.state,a=o.xAxisMap,l=o.yAxisMap,c=o.offset,u=e.type.defaultProps||{},d=e.props,h=d.xAxisId,f=void 0===h?u.xAxisId:h,p=d.yAxisId,m=void 0===p?u.yAxisId:p;return(0,r.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:a[f],yAxis:l[m],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:i})})),M8(s,"renderActivePoints",(function(e){var t=e.item,r=e.activePoint,i=e.basePoint,o=e.childIndex,s=e.isRange,a=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?O8(O8({},t.item.type.defaultProps),t.item.props):t.item.props,u=c.activeDot,d=O8(O8({index:o,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:c3(t.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},VW(u,!1)),TW(u));return a.push(n.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(o))),i?a.push(n.renderActiveDot(u,O8(O8({},d),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(o))):s&&a.push(null),a})),M8(s,"renderGraphicChild",(function(e,t,n){var i=s.filterFormatItem(e,t,n);if(!i)return null;var o=s.getTooltipEventType(),a=s.state,l=a.isTooltipActive,c=a.tooltipAxis,u=a.activeTooltipIndex,d=a.activeLabel,h=LW(s.props.children,eY),f=i.props,p=f.points,m=f.isRange,g=f.baseLine,y=void 0!==i.item.type.defaultProps?O8(O8({},i.item.type.defaultProps),i.item.props):i.item.props,v=y.activeDot,b=y.hide,x=y.activeBar,w=y.activeShape,_=Boolean(!b&&l&&h&&(v||x||w)),S={};"axis"!==o&&h&&"click"===h.props.trigger?S={onClick:m3(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==o&&(S={onMouseLeave:m3(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:m3(s.handleItemMouseEnter,e.props.onMouseEnter)});var E=(0,r.cloneElement)(e,O8(O8({},i.props),S));if(_){if(!(u>=0)){var C,T=(null!==(C=s.getItemByXY(s.state.activeCoordinate))&&void 0!==C?C:{graphicalItem:E}).graphicalItem,j=T.item,k=void 0===j?e:j,N=T.childIndex,A=O8(O8(O8({},i.props),S),{},{activeIndex:N});return[(0,r.cloneElement)(k,A),null,null]}var I,P;if(c.dataKey&&!c.allowDuplicatedCategory){var O="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());I=dW(p,O,d),P=m&&g&&dW(g,O,d)}else I=null===p||void 0===p?void 0:p[u],P=m&&g&&g[u];if(w||x){var M=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,r.cloneElement)(e,O8(O8(O8({},i.props),S),{},{activeIndex:M})),null,null]}if(!pW()(I))return[E].concat(N8(s.renderActivePoints({item:i,activePoint:I,basePoint:P,childIndex:u,isRange:m})))}return m?[E,null,null]:[E,null]})),M8(s,"renderCustomized",(function(e,t,n){return(0,r.cloneElement)(e,O8(O8({key:"recharts-customized-".concat(n)},s.props),s.state))})),M8(s,"renderMap",{CartesianGrid:{handler:B8,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:B8},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:B8},YAxis:{handler:B8},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(i=e.id)&&void 0!==i?i:aW("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=Kq()(s.triggeredAfterMouseMove,null!==(o=e.throttleDelay)&&void 0!==o?o:1e3/60),s.state={},s}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k8(e,t)}(n,e),i=n,s=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,o=LW(t,eY);if(o){var s=o.props.defaultIndex;if(!("number"!==typeof s||s<0||s>this.state.tooltipTicks.length-1)){var a=this.state.tooltipTicks[s]&&this.state.tooltipTicks[s].value,l=z8(this.state,n,s,a),c=this.state.tooltipTicks[s].coordinate,u=(this.state.offset.top+r)/2,d="horizontal"===i?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));h&&(d=O8(O8({},d),h.props.points[s].tooltipPosition),l=h.props.points[s].tooltipPayload);var f={activeTooltipIndex:s,isTooltipActive:!0,activeLabel:a,activePayload:l,activeCoordinate:d};this.setState(f),this.renderCursor(o),this.accessibilityManager.setIndex(s)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){zW([LW(e.children,eY)],[LW(this.props.children,eY)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=LW(this.props.children,eY);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return a.indexOf(t)>=0?t:o}return o}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},o={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},s=r.width/n.offsetWidth||1,a=this.inRange(o.chartX,o.chartY,s);if(!a)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&u){var d=cW(c).scale,h=cW(u).scale,f=d&&d.invert?d.invert(o.chartX):null,p=h&&h.invert?h.invert(o.chartY):null;return O8(O8({},o),{},{xValue:f,yValue:p})}var m=$8(this.state,this.props.data,this.props.layout,a);return m?O8(O8({},o),m):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,o=t/n;if("horizontal"===r||"vertical"===r){var s=this.state.offset;return i>=s.left&&i<=s.left+s.width&&o>=s.top&&o<=s.top+s.height?{x:i,y:o}:null}var a=this.state,l=a.angleAxisMap,c=a.radiusAxisMap;if(l&&c){var u=cW(l);return n4({x:i,y:o},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=LW(e,eY),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),O8(O8({},TW(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){I6.on(P6,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){I6.removeListener(P6,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var s=r[i];if(s.item===e||s.props.key===e.key||t===PW(s.item.type)&&n===s.childIndex)return s}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,i=t.top,o=t.height,s=t.width;return r.createElement("defs",null,r.createElement("clipPath",{id:e},r.createElement("rect",{x:n,y:i,height:o,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=_8(t,2),r=n[0],i=n[1];return O8(O8({},e),{},M8({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=_8(t,2),r=n[0],i=n[1];return O8(O8({},e),{},M8({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,o=n.length;i<o;i++){var s=n[i],a=s.props,l=s.item,c=void 0!==l.type.defaultProps?O8(O8({},l.type.defaultProps),l.props):l.props,u=PW(l.type);if("Bar"===u){var d=(a.data||[]).find((function(t){return eQ(e,t)}));if(d)return{graphicalItem:s,payload:d}}else if("RadialBar"===u){var h=(a.data||[]).find((function(t){return n4(e,t)}));if(h)return{graphicalItem:s,payload:h}}else if(g7(s,r)||y7(s,r)||v7(s,r)){var f=_7({graphicalItem:s,activeTooltipItem:r,itemData:c.data}),p=void 0===c.activeIndex?f:c.activeIndex;return{graphicalItem:O8(O8({},s),{},{childIndex:p}),payload:v7(s,r)?c.data[f]:s.props.data[f]}}}return null}},{key:"render",value:function(){var e=this;if(!FW(this))return null;var t,n,i=this.props,o=i.children,s=i.className,a=i.width,l=i.height,c=i.style,u=i.compact,d=i.title,h=i.desc,f=S8(i,b8),p=VW(f,!1);if(u)return r.createElement(J4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement(lK,w8({},p,{width:a,height:l,title:d,desc:h}),this.renderClipPath(),HW(o,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return r.createElement(J4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement("div",w8({className:qq("recharts-wrapper",s),style:O8({position:"relative",cursor:"default",width:a,height:l},c)},m,{ref:function(t){e.container=t}}),r.createElement(lK,w8({},p,{width:a,height:l,title:d,desc:h,style:L8}),this.renderClipPath(),HW(o,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],s&&E8(i.prototype,s),l&&E8(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,s,l}(r.Component);M8(p,"displayName",t),M8(p,"defaultProps",O8({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),M8(p,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,r=e.data,i=e.children,o=e.width,s=e.height,a=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=W8(e);return O8(O8(O8({},h),{},{updateId:0},f(O8(O8({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:s,prevLayout:a,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||o!==t.prevWidth||s!==t.prevHeight||a!==t.prevLayout||l!==t.prevStackOffset||!xW(c,t.prevMargin)){var p=W8(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=O8(O8({},$8(t,r,a)),{},{updateId:t.updateId+1}),y=O8(O8(O8({},p),m),g);return O8(O8(O8({},y),f(O8({props:e},y),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:s,prevLayout:a,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!zW(i,t.prevChildren)){var v,b,x,w,_=LW(i,$3),S=_&&null!==(v=null===(b=_.props)||void 0===b?void 0:b.startIndex)&&void 0!==v?v:u,E=_&&null!==(x=null===(w=_.props)||void 0===w?void 0:w.endIndex)&&void 0!==x?x:d,C=S!==u||E!==d,T=!pW()(r)&&!C?t.updateId:t.updateId+1;return O8(O8({updateId:T},f(O8(O8({props:e},t),{},{updateId:T,dataStartIndex:S,dataEndIndex:E}),t)),{},{prevChildren:i,dataStartIndex:S,dataEndIndex:E})}return null})),M8(p,"renderActiveDot",(function(e,t,n){var i;return i=(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):gW()(e)?e(t):r.createElement(gG,t),r.createElement(hK,{className:"recharts-active-dot",key:n},i)}));var m=(0,r.forwardRef)((function(e,t){return r.createElement(p,w8({},e,{ref:t}))}));return m.displayName=p.displayName,m}({chartName:"PieChart",GraphicalChild:uee,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:y9},{axisType:"radiusAxis",AxisComp:D9}],formatAxisMap:function(t,n,r,i,o){var s=t.width,a=t.height,l=t.startAngle,c=t.endAngle,u=lW(t.cx,s,s/2),d=lW(t.cy,a,a/2),h=J3(s,a,r),f=lW(t.innerRadius,h,0),p=lW(t.outerRadius,h,.8*h);return Object.keys(n).reduce((function(t,r){var s,a=n[r],h=a.domain,m=a.reversed;if(pW()(a.range))"angleAxis"===i?s=[l,c]:"radiusAxis"===i&&(s=[f,p]),m&&(s=[s[1],s[0]]);else{var g=Y3(s=a.range,2);l=g[0],c=g[1]}var y=function(t,n,r){var i=t.scale,o=t.type,s=t.layout,a=t.axisType;if("auto"===i)return"radial"===s&&"radiusAxis"===a?{scale:hQ(),realScaleType:"band"}:"radial"===s&&"angleAxis"===a?{scale:DJ(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:pQ(),realScaleType:"point"}:"category"===o?{scale:hQ(),realScaleType:"band"}:{scale:DJ(),realScaleType:"linear"};if(Gq()(i)){var l="scale".concat(nY()(i));return{scale:(e[l]||pQ)(),realScaleType:e[l]?l:"point"}}return gW()(i)?{scale:i}:{scale:pQ(),realScaleType:"point"}}(a,o),v=y.realScaleType,b=y.scale;b.domain(h).range(s),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-g3,o=Math.max(r[0],r[1])+g3,s=e(t[0]),a=e(t[n-1]);(s<i||s>o||a<i||a>o)&&e.domain([t[0],t[n-1]])}}(b);var x=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,o=t.originalDomain,s=t.allowDecimals,a=n||t.scale;if("auto"!==a&&"linear"!==a)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var c=M5(l,i,s);return e.domain([n5()(c),e5()(c)]),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:R5(u,i,s)}}return null}(b,W3(W3({},a),{},{realScaleType:v})),w=W3(W3(W3({},a),x),{},{range:s,radius:p,realScaleType:v,scale:b,cx:u,cy:d,innerRadius:f,outerRadius:p,startAngle:l,endAngle:c});return W3(W3({},t),{},K3({},r,w))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function hee(e){if(pO(1,arguments),!function(e){return pO(1,arguments),e instanceof Date||"object"===fO(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=mO(e);return!isNaN(Number(t))}function fee(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function pee(e,t){return pO(2,arguments),function(e,t){pO(2,arguments);var n=mO(e).getTime(),r=fee(t);return new Date(n+r)}(e,-fee(t))}function mee(e){pO(1,arguments);var t=mO(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function gee(e){pO(1,arguments);var t=mO(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=mee(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var s=mee(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function yee(e){pO(1,arguments);var t=mO(e),n=mee(t).getTime()-function(e){pO(1,arguments);var t=gee(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),mee(n)}(t).getTime();return Math.round(n/6048e5)+1}function vee(e,t){var n,r,i,o,s,a,l,c;pO(1,arguments);var u=hO(),d=fee(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=mO(e),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function bee(e,t){var n,r,i,o,s,a,l,c;pO(1,arguments);var u=mO(e),d=u.getUTCFullYear(),h=hO(),f=fee(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=vee(p,t),g=new Date(0);g.setUTCFullYear(d,0,f),g.setUTCHours(0,0,0,0);var y=vee(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=y.getTime()?d:d-1}function xee(e,t){pO(1,arguments);var n=mO(e),r=vee(n,t).getTime()-function(e,t){var n,r,i,o,s,a,l,c;pO(1,arguments);var u=hO(),d=fee(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=bee(e,t),f=new Date(0);return f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0),vee(f,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function wee(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var _ee={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return wee("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):wee(n+1,2)},d:function(e,t){return wee(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return wee(e.getUTCHours()%12||12,t.length)},H:function(e,t){return wee(e.getUTCHours(),t.length)},m:function(e,t){return wee(e.getUTCMinutes(),t.length)},s:function(e,t){return wee(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return wee(Math.floor(r*Math.pow(10,n-3)),t.length)}};const See=_ee;var Eee="midnight",Cee="noon",Tee="morning",jee="afternoon",kee="evening",Nee="night",Aee={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return See.y(e,t)},Y:function(e,t,n,r){var i=bee(e,r),o=i>0?i:1-i;return"YY"===t?wee(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):wee(o,t.length)},R:function(e,t){return wee(gee(e),t.length)},u:function(e,t){return wee(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return wee(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return wee(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return See.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return wee(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=xee(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):wee(i,t.length)},I:function(e,t,n){var r=yee(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):wee(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):See.d(e,t)},D:function(e,t,n){var r=function(e){pO(1,arguments);var t=mO(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):wee(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return wee(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return wee(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return wee(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?Cee:0===i?Eee:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?kee:i>=12?jee:i>=4?Tee:Nee,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return See.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):See.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):wee(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):wee(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):See.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):See.s(e,t)},S:function(e,t){return See.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Pee(i);case"XXXX":case"XX":return Oee(i);default:return Oee(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return Pee(i);case"xxxx":case"xx":return Oee(i);default:return Oee(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Iee(i,":");default:return"GMT"+Oee(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Iee(i,":");default:return"GMT"+Oee(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return wee(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return wee((r._originalDate||e).getTime(),t.length)}};function Iee(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var s=t||"";return n+String(i)+s+wee(o,2)}function Pee(e,t){return e%60===0?(e>0?"-":"+")+wee(Math.abs(e)/60,2):Oee(e,t)}function Oee(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+wee(Math.floor(i/60),2)+n+wee(i%60,2)}const Mee=Aee;var Ree=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Dee=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Lee={p:Dee,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return Ree(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Ree(i,t)).replace("{{time}}",Dee(o,t))}};const Fee=Lee;var Bee=["D","DD"],Uee=["YY","YYYY"];function Vee(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$ee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hee=/^'([^]*?)'?$/,qee=/''/g,Wee=/[a-zA-Z]/;function Kee(e,t,n){var r,i,o,s,a,l,c,u,d,h,f,p,m,g,y,v,b,x;pO(2,arguments);var w=String(t),_=hO(),S=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:_.locale)&&void 0!==r?r:PO,E=fee(null!==(o=null!==(s=null!==(a=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:_.firstWeekContainsDate)&&void 0!==s?s:null===(d=_.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=fee(null!==(f=null!==(p=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(y=n.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==m?m:_.weekStartsOn)&&void 0!==p?p:null===(b=_.locale)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==f?f:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var T=mO(e);if(!hee(T))throw new RangeError("Invalid time value");var j=pee(T,MO(T)),k={firstWeekContainsDate:E,weekStartsOn:C,locale:S,_originalDate:T};return w.match($ee).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Fee[t])(e,S.formatLong):e})).join("").match(zee).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(Hee);if(!t)return e;return t[1].replace(qee,"'")}(r);var o,s=Mee[i];if(s)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||(o=r,-1===Uee.indexOf(o))||Vee(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==Bee.indexOf(e)}(r)||Vee(r,t,String(e)),s(j,r,S.localize,k);if(i.match(Wee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}Math.pow(10,8);var Yee=6e4,Gee=36e5;function Xee(e,t){var n;pO(1,arguments);var r=fee(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,o=function(e){var t,n={},r=e.split(Qee.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],Qee.timeZoneDelimiter.test(n.date)&&(n.date=e.split(Qee.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var i=Qee.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e);if(o.date){var s=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(o.date,r);i=function(e,t){if(null===t)return new Date(NaN);var n=e.match(Zee);if(!n)return new Date(NaN);var r=!!n[4],i=tte(n[1]),o=tte(n[2])-1,s=tte(n[3]),a=tte(n[4]),l=tte(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,a,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=r.getUTCDay()||7,o=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(t,a,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(rte[t]||(ite(e)?29:28))}(t,o,s)&&function(e,t){return t>=1&&t<=(ite(e)?366:365)}(t,i)?(c.setUTCFullYear(t,o,Math.max(i,s)),c):new Date(NaN)}(s.restDateString,s.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var a,l=i.getTime(),c=0;if(o.time&&(c=function(e){var t=e.match(Jee);if(!t)return NaN;var n=nte(t[1]),r=nte(t[2]),i=nte(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*Gee+r*Yee+1e3*i}(o.time),isNaN(c)))return new Date(NaN);if(!o.timezone){var u=new Date(l+c),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return a=function(e){if("Z"===e)return 0;var t=e.match(ete);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*Gee+i*Yee)}(o.timezone),isNaN(a)?new Date(NaN):new Date(l+c+a)}var Qee={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Zee=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Jee=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ete=/^([+-])(\d{2})(?::?(\d{2}))?$/;function tte(e){return e?parseInt(e):1}function nte(e){return e&&parseFloat(e.replace(",","."))||0}var rte=[31,null,31,30,31,30,31,31,30,31,30,31];function ite(e){return e%400===0||e%4===0&&e%100!==0}const ote=()=>{var e,t,n,i;const[o,s]=(0,r.useState)(null),{currentUser:a}=T_(),l=te(),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)("weekly"),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[b,x]=(0,r.useState)("overview"),[w,_]=(0,r.useState)(!1),[S,E]=(0,r.useState)(null),[C,T]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=localStorage.getItem("userData");e&&s(JSON.parse(e)),a&&"student"===localStorage.getItem("userRole")||l("/login");(async()=>{if(a)try{const e=tm(gp(__,"students"),rm("uid","==",a.uid)),t=await wm(e);if(t.empty)console.error("Student record not found");else{const e=t.docs[0].data();s(e);const n=e.section||"";h(n);const r=tm(gp(__,"attendance"),rm("studentId","==",e.id)),i=await wm(r);u(i.docs.map((e=>e.data())));const o=tm(gp(__,"notifications"),rm("studentId","==",e.id),sm("date","desc"),lm(5)),a=await wm(o);if(g(a.docs.map((e=>e.data()))),e.section){const t=tm(gp(__,"sections"),rm("code","==",e.section)),n=await wm(t);if(!n.empty){const e={id:n.docs[0].id,...n.docs[0].data()};if(E(e),e.instructorId){const t=await bm(yp(__,"teachers",e.instructorId));t.exists()&&T({id:t.id,...t.data()})}}}}}catch(py){console.error("Error fetching student data:",py)}finally{v(!1)}})()}),[a,l]);const j=["#4F46E5","#10B981","#F59E0B","#EF4444"],k=()=>{c.length;const e=c.filter((e=>"present"===e.status)).length,t=c.filter((e=>"late"===e.status)).length,n=c.filter((e=>"absent"===e.status)).length;return[{name:"Present",value:e},{name:"Late",value:t},{name:"Absent",value:n}]};if(y)return(0,E_.jsx)("div",{className:"p-8 text-center",children:"Loading student data..."});if(!o)return(0,E_.jsx)("div",{className:"p-8 text-center",children:"No student data found."});const N=c||[],A=N.length>0?(N.filter((e=>"present"===e.status)).length/N.length*100||0).toFixed(1):0;return(0,E_.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,E_.jsx)($q,{student:o}),(0,E_.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24",children:[(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-indigo-600 to-blue-500 rounded-2xl shadow-xl p-8 mb-8",children:(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsxs)("div",{className:"text-white",children:[(0,E_.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",o.fullName,"!"]}),(0,E_.jsxs)("p",{className:"opacity-90",children:[o.department," \u2022 ",o.yearLevel]})]}),(0,E_.jsxs)("div",{className:"bg-white/20 backdrop-blur-lg rounded-xl p-4",children:[(0,E_.jsx)("p",{className:"text-white text-sm",children:"Current Section"}),(0,E_.jsx)("p",{className:"text-white text-2xl font-bold",children:o.section})]})]})}),(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{title:"Attendance Rate",value:`${A}%`,icon:(0,E_.jsx)(fP,{className:"h-6 w-6"}),color:"from-emerald-500 to-teal-600"},{title:"Total Classes",value:(null===(e=o.courses)||void 0===e?void 0:e.length)||0,icon:(0,E_.jsx)(eO,{className:"h-6 w-6"}),color:"from-blue-500 to-indigo-600"},{title:"Present Today",value:c.filter((e=>"present"===e.status&&Kee(Xee(e.date),"yyyy-MM-dd")===Kee(new Date,"yyyy-MM-dd"))).length,icon:(0,E_.jsx)(iO,{className:"h-6 w-6"}),color:"from-violet-500 to-purple-600"},{title:"Next Class",value:(null===(t=o.schedule)||void 0===t?void 0:t.startTime)||"N/A",icon:(0,E_.jsx)(sO,{className:"h-6 w-6"}),color:"from-orange-500 to-red-600"}].map(((e,t)=>(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`bg-gradient-to-r ${e.color} rounded-xl p-6 text-white shadow-lg`,children:(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-white/80 text-sm",children:e.title}),(0,E_.jsx)("p",{className:"text-2xl font-bold mt-1",children:e.value})]}),(0,E_.jsx)("div",{className:"bg-white/20 p-3 rounded-lg",children:e.icon})]})},e.title)))}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg p-6 lg:col-span-2",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,E_.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Today's Schedule"}),(0,E_.jsx)("select",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm",value:d,onChange:e=>h(e.target.value),children:null===(n=o.sections)||void 0===n?void 0:n.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))})]}),(0,E_.jsx)("div",{className:"space-y-4",children:null===(i=o.schedule)||void 0===i?void 0:i.days.map(((e,t)=>{var n,r;return(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,E_.jsxs)("div",{className:"flex items-center gap-4",children:[(0,E_.jsx)("div",{className:"bg-indigo-100 p-3 rounded-xl",children:(0,E_.jsx)(iO,{className:"h-6 w-6 text-indigo-600"})}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"font-medium text-gray-900",children:e}),(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(n=o.schedule)||void 0===n?void 0:n.startTime," - ",null===(r=o.schedule)||void 0===r?void 0:r.endTime]})]})]}),(0,E_.jsx)("span",{className:"px-4 py-2 bg-indigo-100 text-indigo-600 rounded-lg text-sm font-medium",children:d})]},t)}))})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,E_.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Attendance Overview"}),(0,E_.jsx)("div",{className:"h-64",children:(0,E_.jsx)(ZW,{width:"100%",height:"100%",children:(0,E_.jsxs)(dee,{children:[(0,E_.jsx)(uee,{data:k(),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:k().map(((e,t)=>(0,E_.jsx)(Z9,{fill:j[t%j.length]},`cell-${t}`)))}),(0,E_.jsx)(eY,{})]})})}),(0,E_.jsx)("div",{className:"grid grid-cols-3 gap-4 mt-6",children:k().map(((e,t)=>(0,E_.jsxs)("div",{className:"text-center",children:[(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:e.name}),(0,E_.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.value})]},e.name)))})]})]}),S&&(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6 mt-8",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:S.name}),(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["Section Code: ",S.code]})]}),(0,E_.jsx)("div",{className:"bg-indigo-100 p-3 rounded-xl",children:(0,E_.jsx)(jI,{className:"w-8 h-8 text-indigo-600"})})]}),C&&(0,E_.jsxs)("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:[(0,E_.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Instructor"}),(0,E_.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,E_.jsx)("div",{className:"bg-white p-2 rounded-lg",children:(0,E_.jsx)(GO,{className:"w-6 h-6 text-gray-600"})}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"font-medium text-gray-900",children:C.fullName}),(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:C.email}),(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:C.department})]})]})]}),(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Schedule Details"}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg",children:[(0,E_.jsx)(sO,{className:"w-5 h-5 text-gray-600"}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-xs text-gray-500",children:"Days"}),(0,E_.jsx)("p",{className:"text-sm font-medium text-gray-900",children:S.schedule.days.join(", ")})]})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg",children:[(0,E_.jsx)(iO,{className:"w-5 h-5 text-gray-600"}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-xs text-gray-500",children:"Time"}),(0,E_.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[S.schedule.startTime," - ",S.schedule.endTime]})]})]}),S.schedule.room&&(0,E_.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg",children:[(0,E_.jsx)(ZO,{className:"w-5 h-5 text-gray-600"}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-xs text-gray-500",children:"Room"}),(0,E_.jsx)("p",{className:"text-sm font-medium text-gray-900",children:S.schedule.room})]})]})]})]})]})]})]})};function ste(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875ZM9.75 17.25a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-.75Zm2.25-3a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75Zm3.75-1.5a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-5.25Z",clipRule:"evenodd"}),r.createElement("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"}))}const ate=r.forwardRef(ste);wB.register(mU,bU,qB,QB,hU,GB,jB);const lte=()=>{const[e,t]=(0,r.useState)(!0),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)("today"),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),{currentUser:b}=T_();(0,r.useEffect)((()=>{(async()=>{if(b)try{t(!0);const e=gp(__,"attendance"),n=gp(__,"students"),r=gp(__,"teachers"),o=tm(e,sm("date","desc")),s=await wm(o),a=await wm(n),l=new Map(a.docs.map((e=>[e.data().studentId,e.data().department]))),c=await wm(r),u=new Map(c.docs.map((e=>[e.data().uid,e.data().department]))),d=s.docs.map((e=>{const t=e.data(),n=l.get(t.studentId),r=u.get(b.uid);return{...t,id:e.id,department:n||r||"Unknown"}}));i(d),t(!1)}catch(py){console.error("Error fetching attendance data:",py),TA().fire("Error","Failed to fetch attendance data","error"),t(!1)}else t(!1)})()}),[b]),(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"teachers"),t=await wm(e),n=Array.from(new Set(t.docs.map((e=>e.data().department)).filter((e=>e))));h(n)}catch(py){console.error("Error fetching departments:",py)}})()}),[]);const x=e=>{switch(e){case"present":return"bg-green-100 text-green-800 border-green-300";case"late":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"absent":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},w=e=>{switch(e){case"present":return(0,E_.jsx)(rP,{className:"h-5 w-5 text-green-600"});case"late":return(0,E_.jsx)(iO,{className:"h-5 w-5 text-yellow-600"});case"absent":return(0,E_.jsx)(oP,{className:"h-5 w-5 text-red-600"});default:return(0,E_.jsx)(GO,{className:"h-5 w-5 text-gray-600"})}},_=()=>n.filter((e=>{const t="all"===c||e.department===c,n="all"===a||e.section===a,r=e.studentName.toLowerCase().includes(m.toLowerCase())||e.section.toLowerCase().includes(m.toLowerCase()),i=e.date.toDate(),o=new Date;let s=!1;switch(f){case"today":s=i.toDateString()===o.toDateString();break;case"week":s=i>=new Date(o.getTime()-6048e5);break;case"month":s=i>=new Date(o.getTime()-2592e6)}return t&&n&&r&&s})),S=(()=>{const e=_(),t=e.length,n=e.filter((e=>"present"===e.status)).length,r=e.filter((e=>"late"===e.status)).length,i=e.filter((e=>"absent"===e.status)).length;return{total:t,present:n,late:r,absent:i,presentPercentage:t?n/t*100:0,latePercentage:t?r/t*100:0,absentPercentage:t?i/t*100:0}})(),E=_();return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${y?"ml-20":"ml-64"} overflow-y-auto`,children:(0,E_.jsxs)("div",{className:"p-8",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Reports"}),(0,E_.jsxs)("div",{className:"flex space-x-4",children:[(0,E_.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,E_.jsx)("option",{value:"all",children:"All Departments"}),d.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]}),(0,E_.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,E_.jsx)("option",{value:"all",children:"All Sections"}),o.map((e=>(0,E_.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,E_.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,E_.jsx)("option",{value:"today",children:"Today"}),(0,E_.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,E_.jsx)("option",{value:"month",children:"Last 30 Days"})]}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"text",placeholder:"Search students or sections",value:m,onChange:e=>g(e.target.value),className:"px-4 py-2 pr-10 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,E_.jsx)(KO,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"})]})]})]}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-md p-6 border border-green-100 hover:shadow-lg transition-all",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Present"}),(0,E_.jsx)(rP,{className:"h-8 w-8 text-green-500"})]}),(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-3xl font-bold text-green-600",children:S.present}),(0,E_.jsxs)("span",{className:"text-sm text-green-500",children:[S.presentPercentage.toFixed(1),"%"]})]})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-md p-6 border border-yellow-100 hover:shadow-lg transition-all",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Late"}),(0,E_.jsx)(iO,{className:"h-8 w-8 text-yellow-500"})]}),(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-3xl font-bold text-yellow-600",children:S.late}),(0,E_.jsxs)("span",{className:"text-sm text-yellow-500",children:[S.latePercentage.toFixed(1),"%"]})]})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-md p-6 border border-red-100 hover:shadow-lg transition-all",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Absent"}),(0,E_.jsx)(oP,{className:"h-8 w-8 text-red-500"})]}),(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-3xl font-bold text-red-600",children:S.absent}),(0,E_.jsxs)("span",{className:"text-sm text-red-500",children:[S.absentPercentage.toFixed(1),"%"]})]})]})]}),(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"bg-white rounded-lg shadow-md overflow-hidden",children:e?(0,E_.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,E_.jsx)(_A,{className:"h-10 w-10 text-indigo-500 animate-spin"})}):0===E.length?(0,E_.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,E_.jsx)(ate,{className:"h-16 w-16 mb-4"}),(0,E_.jsx)("p",{className:"text-xl",children:"No attendance records found"})]}):(0,E_.jsxs)("table",{className:"w-full",children:[(0,E_.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,E_.jsxs)("tr",{children:[(0,E_.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,E_.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),(0,E_.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,E_.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,E_.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,E_.jsx)("tbody",{children:E.map((e=>(0,E_.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[(0,E_.jsxs)("td",{className:"p-4 flex items-center",children:[(0,E_.jsx)(GO,{className:"h-6 w-6 text-gray-400 mr-3"}),(0,E_.jsx)("span",{className:"font-medium",children:e.studentName})]}),(0,E_.jsx)("td",{className:"p-4",children:e.section}),(0,E_.jsx)("td",{className:"p-4",children:e.subjectCode}),(0,E_.jsx)("td",{className:"p-4",children:e.date.toDate().toLocaleDateString()}),(0,E_.jsx)("td",{className:"p-4",children:(0,E_.jsxs)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${x(e.status)}`,children:[w(e.status),(0,E_.jsx)("span",{className:"ml-2 capitalize",children:e.status})]})})]},e.id)))})]})})]})})]})};function cte(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const ute=r.forwardRef(cte);function dte(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const hte=r.forwardRef(dte),fte=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)("name"),[m,g]=(0,r.useState)("asc"),[y,v]=(0,r.useState)([]),[b,x]=(0,r.useState)(!1),[w,_]=(0,r.useState)([]),[S,E]=(0,r.useState)(null),[C,T]=(0,r.useState)({subjects:[],schedules:[]}),[j,k]=(0,r.useState)(!1),[N,A]=(0,r.useState)(null),[I,P]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{s(!0);const e=gp(__,"users"),n=gp(__,"teachers"),r=gp(__,"students"),i=(await wm(e)).docs.map((e=>({id:e.id,...e.data()}))),o=(await wm(n)).docs.map((e=>{const t=e.data();return{id:e.id,fullName:t.fullName,email:t.email,role:"instructor",department:t.department,uid:t.uid}})),a=(await wm(r)).docs.map((e=>{const t=e.data();return{id:e.id,fullName:t.fullName,email:t.email,role:"student",department:t.department,studentId:t.studentId,uid:t.uid}})),l=[...i,...o.filter((e=>!i.some((t=>t.uid===e.uid)))),...a.filter((e=>!i.some((t=>t.uid===e.uid))))];t(l),s(!1)}catch(py){console.error("Error fetching users:",py),TA().fire("Error","Failed to fetch users","error"),s(!1)}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"subjects"),t=(await wm(e)).docs.map((e=>({id:e.id,...e.data()})));_(t)}catch(py){console.error("Error fetching subjects:",py),TA().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch subjects"})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"subjects"),t=(await wm(e)).docs.map((e=>({id:e.id,...e.data()})));_(t.filter((e=>"active"===e.status)))}catch(py){console.error("Error fetching subjects:",py)}})()}),[]);const O=Array.from(new Set(e.map((e=>e.department||"Unknown")))),M=()=>{T((e=>({...e,schedules:[...e.schedules||[],{day:"",startTime:"",endTime:"",section:"",room:"",subject:""}]})))},R=async()=>{try{if(!N)return void TA().fire({icon:"error",title:"Error",text:"Please select a teacher first"});const e=(C.subjects||[]).map((e=>{const t=w.find((t=>t.id===e));return t?t.name:""})).filter((e=>""!==e)),t=(C.schedules||[]).filter((e=>e.startTime&&e.endTime&&e.section&&e.day)),n={subjects:e,schedules:t},r=yp(__,"teachers",N),i=(await bm(r)).data();await Sm(r,n);const o=gp(__,"subjects"),s=[...e,...t.map((e=>e.subject||"")).filter(Boolean)];for(const a of s){const e=tm(o,rm("name","==",a),rm("department","==",null===i||void 0===i?void 0:i.department));(await wm(e)).empty&&await Cm(o,{name:a,department:(null===i||void 0===i?void 0:i.department)||"Unassigned",status:"active",createdAt:new Date})}TA().fire({icon:"success",title:"Assignments Saved",text:"Teacher assignments and subjects have been successfully updated",timer:2e3,showConfirmButton:!1}),k(!1)}catch(py){console.error("Error saving assignments:",py),TA().fire({icon:"error",title:"Save Error",text:py instanceof Error?py.message:"Failed to save teacher assignments"})}},D=()=>(C.schedules||[]).map(((e,t)=>(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"grid grid-cols-6 gap-4 mb-4 items-center",children:[(0,E_.jsxs)("select",{value:e.day,onChange:e=>{const n=[...C.schedules||[]];n[t]={...n[t],day:e.target.value},T((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,E_.jsx)("option",{value:"",children:"Select Day"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]}),(0,E_.jsx)("input",{type:"time",value:e.startTime,onChange:e=>{const n=[...C.schedules||[]];n[t]={...n[t],startTime:e.target.value},T((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,E_.jsx)("input",{type:"time",value:e.endTime,onChange:e=>{const n=[...C.schedules||[]];n[t]={...n[t],endTime:e.target.value},T((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,E_.jsx)("input",{type:"text",placeholder:"Section",value:e.section,onChange:e=>{const n=[...C.schedules||[]];n[t]={...n[t],section:e.target.value},T((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,E_.jsx)("input",{type:"text",placeholder:"Room",value:e.room||"",onChange:e=>{const n=[...C.schedules||[]];n[t]={...n[t],room:e.target.value},T((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,E_.jsxs)("select",{value:e.subject,onChange:e=>((e,t)=>{T((n=>{const r=[...n.schedules||[]];return r[e]={...r[e],subject:t},{...n,schedules:r}}))})(t,e.target.value),className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,E_.jsx)("option",{value:"",children:"Select Subject"}),w.map((e=>(0,E_.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,E_.jsx)("button",{onClick:()=>{T((e=>({...e,schedules:(e.schedules||[]).filter(((e,n)=>n!==t))})))},className:"text-red-500 hover:text-red-700",children:(0,E_.jsx)(ute,{className:"w-5 h-5"})})]},t))),L=e.filter((e=>{var t,n,r,i;return("all"===a||e.role===a)&&("all"===c||(null===(t=e.department)||void 0===t?void 0:t.toLowerCase())===c.toLowerCase())&&(""===d||(null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase().includes(d.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(d.toLowerCase()))||(null===(i=e.department)||void 0===i?void 0:i.toLowerCase().includes(d.toLowerCase())))})).sort(((e,t)=>{var n,r,i,o,s,a;let l,c;switch(f){case"name":l=(null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase())||"",c=(null===(r=t.fullName)||void 0===r?void 0:r.toLowerCase())||"";break;case"role":l=(null===(i=e.role)||void 0===i?void 0:i.toLowerCase())||"",c=(null===(o=t.role)||void 0===o?void 0:o.toLowerCase())||"";break;case"department":l=(null===(s=e.department)||void 0===s?void 0:s.toLowerCase())||"",c=(null===(a=t.department)||void 0===a?void 0:a.toLowerCase())||"";break;default:l="",c=""}return"asc"===m?l.localeCompare(c):c.localeCompare(l)}));return(0,E_.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${n?"ml-20":"ml-64"} overflow-y-auto`,children:(0,E_.jsxs)("div",{className:"p-8 space-y-8",children:[(0,E_.jsxs)("div",{className:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:items-center md:justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Users Management"}),(0,E_.jsxs)("p",{className:"mt-2 text-gray-600",children:[L.length," users found"]})]}),(0,E_.jsx)("div",{className:"relative",children:(0,E_.jsx)("input",{type:"text",placeholder:"Search users...",value:d,onChange:e=>h(e.target.value),className:"w-full md:w-64 px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})})]}),(0,E_.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[(0,E_.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,E_.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,E_.jsx)("option",{value:"all",children:"All Roles"}),(0,E_.jsx)("option",{value:"admin",children:"Admin"}),(0,E_.jsx)("option",{value:"instructor",children:"Instructor"}),(0,E_.jsx)("option",{value:"student",children:"Student"})]}),(0,E_.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,E_.jsx)("option",{value:"all",children:"All Departments"}),O.map((e=>(0,E_.jsx)("option",{value:e,children:e||"Unknown"},e)))]})]}),(0,E_.jsxs)("div",{className:"flex gap-4",children:[(0,E_.jsxs)("select",{value:f,onChange:e=>{return t=e.target.value,void(f===t?g("asc"===m?"desc":"asc"):(p(t),g("asc")));var t},className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,E_.jsx)("option",{value:"name",children:"Sort by Name"}),(0,E_.jsx)("option",{value:"role",children:"Sort by Role"}),(0,E_.jsx)("option",{value:"department",children:"Sort by Department"})]}),(0,E_.jsx)("button",{onClick:()=>g("asc"===m?"desc":"asc"),className:"px-4 py-2 bg-white border border-gray-200 hover:bg-gray-50",children:"asc"===m?"\u2191":"\u2193"})]})]}),y.length>0&&(0,E_.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg flex items-center justify-between",children:[(0,E_.jsxs)("span",{className:"text-indigo-700",children:[y.length," users selected"]}),(0,E_.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Selected"})]}),o?(0,E_.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,E_.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map((e=>(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`\n        bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden\n        ${y.includes(e.id)?"ring-2 ring-indigo-500":""}\n      `,children:(0,E_.jsxs)("div",{className:"p-6",children:[(0,E_.jsxs)("div",{className:"flex items-start justify-between",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E_.jsx)("input",{type:"checkbox",checked:y.includes(e.id),onChange:t=>{t.target.checked?v([...y,e.id]):v(y.filter((t=>t!==e.id)))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,E_.jsx)("div",{className:`\n              w-12 h-12 rounded-full flex items-center justify-center\n              ${"admin"===e.role?"bg-blue-100":"instructor"===e.role?"bg-purple-100":"bg-green-100"}\n            `,children:"student"===e.role?(0,E_.jsx)(jI,{className:"w-6 h-6 text-green-600"}):(0,E_.jsx)(GO,{className:"w-6 h-6 "+("admin"===e.role?"text-blue-600":"text-purple-600")})}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.fullName}),(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,E_.jsx)("div",{className:"flex items-center space-x-2",children:"instructor"===e.role&&(0,E_.jsxs)("button",{onClick:()=>(async e=>{try{const t=(await bm(yp(__,"teachers",e.id))).data()||{};E(e),A(e.id),T({subjects:t.subjects||[],schedules:t.schedules||[]}),k(!0)}catch(py){console.error("Error fetching instructor details:",py),TA().fire("Error","Failed to load instructor details","error")}})(e),className:"p-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition-colors duration-200 flex items-center space-x-2",children:[(0,E_.jsx)(hte,{className:"w-5 h-5 mr-1"}),"Assign"]})})]}),(0,E_.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,E_.jsx)("span",{className:`\n            px-3 py-1 rounded-full text-xs font-medium\n            ${"admin"===e.role?"bg-blue-100 text-blue-800":"instructor"===e.role?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}\n          `,children:e.role.charAt(0).toUpperCase()+e.role.slice(1)}),e.department&&(0,E_.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.department}),e.studentId&&(0,E_.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["ID: ",e.studentId]})]})]})},e.id)))})]})}),b&&(0,E_.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,E_.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,E_.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Delete Selected Users"}),(0,E_.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",y.length," selected users? This action cannot be undone."]}),(0,E_.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,E_.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,E_.jsx)("button",{onClick:async()=>{try{await Promise.all(y.map((t=>{const n=e.find((e=>e.id===t));if(n){const e="instructor"===n.role?"teachers":"student"===n.role?"students":"users";return Em(yp(__,e,t))}}))),v([]),x(!1),TA().fire({icon:"success",title:"Users Deleted",text:"Selected users have been removed successfully.",background:"#f8fafc",iconColor:"#3b82f6",confirmButtonColor:"#3b82f6"})}catch(py){console.error("Error deleting users:",py),TA().fire("Error","Failed to delete users","error")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete Users"})]})]})}),(()=>{var e,t;return j&&S?(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,E_.jsxs)(pA.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},transition:{type:"spring",stiffness:300,damping:20},className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[95vh] overflow-y-auto flex",children:[(0,E_.jsxs)("div",{className:"w-1/3 bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-8 flex flex-col justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,E_.jsx)("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,E_.jsx)(GO,{className:"w-8 h-8 text-white"})}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h2",{className:"text-xl font-bold",children:S.fullName}),(0,E_.jsx)("p",{className:"text-sm opacity-75",children:S.email})]})]}),(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm opacity-75 mb-1",children:"Department"}),(0,E_.jsx)("p",{className:"font-semibold",children:S.department||"Not Specified"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm opacity-75 mb-1",children:"Current Assignments"}),(0,E_.jsx)("div",{className:"flex flex-wrap gap-2",children:0===(null===(e=C.subjects)||void 0===e?void 0:e.length)?(0,E_.jsx)("span",{className:"text-xs bg-white bg-opacity-10 px-2 py-1 rounded",children:"No subjects assigned"}):null===(t=C.subjects)||void 0===t?void 0:t.map((e=>{const t=w.find((t=>t.id===e));return(0,E_.jsx)("span",{className:"text-xs bg-white bg-opacity-10 px-2 py-1 rounded",children:null===t||void 0===t?void 0:t.name},e)}))})]})]})]}),(0,E_.jsxs)("div",{className:"mt-auto",children:[(0,E_.jsx)("p",{className:"text-xs opacity-75 mb-2",children:"Last Updated"}),(0,E_.jsx)("p",{className:"text-sm font-medium",children:(new Date).toLocaleDateString()})]})]}),(0,E_.jsxs)("div",{className:"w-2/3 p-8 overflow-y-auto",children:[(0,E_.jsx)("div",{className:"space-y-8",children:(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,E_.jsx)(iO,{className:"w-6 h-6 mr-3 text-green-600"}),"Weekly Schedule"]}),(0,E_.jsxs)("div",{className:"space-y-4",children:[D(),(0,E_.jsx)("div",{className:"flex justify-center",children:(0,E_.jsxs)("button",{onClick:M,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2",children:[(0,E_.jsx)(hte,{className:"w-5 h-5"}),(0,E_.jsx)("span",{children:"Add New Schedule"})]})})]})]})}),(0,E_.jsxs)("div",{className:"mt-8 flex justify-end space-x-4 border-t pt-6",children:[(0,E_.jsx)(pA.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>k(!1),className:"px-6 py-2 text-gray-600 hover:text-gray-800 rounded-lg border",children:"Cancel"}),(0,E_.jsxs)(pA.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:R,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center",children:[(0,E_.jsx)(EA,{className:"w-5 h-5 mr-2"}),"Save Assignments"]})]})]})]})}):null})()]})};function pte(e){let{isOpen:t,onClose:n,title:r,children:i}=e;return t?(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:n,children:(0,E_.jsxs)(pA.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-lg p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,E_.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:r}),(0,E_.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\u2715"})]}),i]})}):null}let mte={data:""},gte=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||mte,yte=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,vte=/\/\*[^]*?\*\/|  +/g,bte=/\n+/g,xte=(e,t)=>{let n="",r="",i="";for(let o in e){let s=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+s+";":r+="f"==o[1]?xte(s,o):o+"{"+xte(s,"k"==o[1]?"":t)+"}":"object"==typeof s?r+=xte(s,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=s&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=xte.p?xte.p(o,s):o+":"+s+";")}return n+(t&&i?t+"{"+i+"}":i)+r},wte={},_te=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+_te(e[n]);return t}return e};function Ste(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,r,i)=>{let o=_te(e),s=wte[o]||(wte[o]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(o));if(!wte[s]){let t=o!==e?e:(e=>{let t,n,r=[{}];for(;t=yte.exec(e.replace(vte,""));)t[4]?r.shift():t[3]?(n=t[3].replace(bte," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(bte," ").trim();return r[0]})(e);wte[s]=xte(i?{["@keyframes "+s]:t}:t,n?"":"."+s)}let a=n&&wte.g?wte.g:null;return n&&(wte.g=wte[s]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(wte[s],t,r,a),s})(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let o=t[i];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":xte(e,""):!1===e?"":e}return e+r+(null==o?"":o)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,gte(t.target),t.g,t.o,t.k)}Ste.bind({g:1});let Ete,Cte,Tte,jte=Ste.bind({k:1});function kte(e,t){let n=this||{};return function(){let r=arguments;function i(o,s){let a=Object.assign({},o),l=a.className||i.className;n.p=Object.assign({theme:Cte&&Cte()},a),n.o=/ *go\d+/.test(l),a.className=Ste.apply(n,r)+(l?" "+l:""),t&&(a.ref=s);let c=e;return e[0]&&(c=a.as||e,delete a.as),Tte&&c[0]&&Tte(a),Ete(c,a)}return t?t(i):i}}var Nte=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Ate=(()=>{let e=0;return()=>(++e).toString()})(),Ite=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Pte=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return Pte(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},Ote=[],Mte={toasts:[],pausedAt:void 0},Rte=e=>{Mte=Pte(Mte,e),Ote.forEach((e=>{e(Mte)}))},Dte=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||Ate()}}(t,e,n);return Rte({type:2,toast:r}),r.id},Lte=(e,t)=>Dte("blank")(e,t);Lte.error=Dte("error"),Lte.success=Dte("success"),Lte.loading=Dte("loading"),Lte.custom=Dte("custom"),Lte.dismiss=e=>{Rte({type:3,toastId:e})},Lte.remove=e=>Rte({type:4,toastId:e}),Lte.promise=(e,t,n)=>{let r=Lte.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?Nte(t.success,e):void 0;return i?Lte.success(i,{id:r,...n,...null==n?void 0:n.success}):Lte.dismiss(r),e})).catch((e=>{let i=t.error?Nte(t.error,e):void 0;i?Lte.error(i,{id:r,...n,...null==n?void 0:n.error}):Lte.dismiss(r)})),e};new Map;var Fte=jte`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Bte=jte`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ute=jte`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Vte=kte("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Fte} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Bte} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ute} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,zte=jte`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,$te=kte("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${zte} 1s linear infinite;
`,Hte=jte`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qte=jte`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Wte=kte("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Hte} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qte} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Kte=kte("div")`
  position: absolute;
`,Yte=kte("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Gte=jte`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xte=kte("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Gte} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Qte=e=>{let{toast:t}=e,{icon:n,type:i,iconTheme:o}=t;return void 0!==n?"string"==typeof n?r.createElement(Xte,null,n):n:"blank"===i?null:r.createElement(Yte,null,r.createElement($te,{...o}),"loading"!==i&&r.createElement(Kte,null,"error"===i?r.createElement(Vte,{...o}):r.createElement(Wte,{...o})))},Zte=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Jte=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,ene=kte("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,tne=kte("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`;r.memo((e=>{let{toast:t,position:n,style:i,children:o}=e,s=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=Ite()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Zte(n),Jte(n)];return{animation:t?`${jte(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${jte(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},a=r.createElement(Qte,{toast:t}),l=r.createElement(tne,{...t.ariaProps},Nte(t.message,t));return r.createElement(ene,{className:t.className,style:{...s,...i,...t.style}},"function"==typeof o?o({icon:a,message:l}):r.createElement(r.Fragment,null,a,l))}));!function(e,t,n,r){xte.p=t,Ete=e,Cte=n,Tte=r}(r.createElement);Ste`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const nne=()=>{const{currentUser:e}=T_(),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)("all"),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"subjects"),t=(await wm(e)).docs.map((e=>({id:e.id,...e.data()}))),r=gp(__,"teachers"),i=(await wm(r)).docs.map((e=>({id:e.id,...e.data()}))),o=Array.from(new Set(i.map((e=>e.department)))).filter(Boolean);a(t),n(i),c(o),m(!1)}catch(py){console.error("Error fetching data:",py),Lte.error("Failed to load teachers"),m(!1)}})()}),[]),(0,r.useEffect)((()=>{v()}),[u,t,g]);const v=()=>{let e=[...t];if("all"!==u&&(e=e.filter((e=>e.department===u))),g){const t=g.toLowerCase();e=e.filter((e=>e.fullName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.department.toLowerCase().includes(t)))}o(e)};return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:"flex-1 transition-all duration-300 ml-[80px] lg:ml-64 p-8 overflow-y-auto",children:(0,E_.jsxs)("div",{className:"container mx-auto",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("h1",{className:"text-3xl font-bold text-blue-800 flex items-center",children:[(0,E_.jsx)(NI,{className:"h-10 w-10 mr-3 text-blue-600"}),"Teachers Management"]}),(0,E_.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage and view all registered instructors"})]}),(0,E_.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[(0,E_.jsx)(hte,{className:"h-5 w-5 mr-2"}),"Add Teacher"]})]}),(0,E_.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Teachers"}),(0,E_.jsx)("input",{type:"text",placeholder:"Search by name, email, or department...",value:g,onChange:e=>y(e.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Department"}),(0,E_.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,E_.jsx)("option",{value:"all",children:"All Departments"}),l.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]})]}),(0,E_.jsx)("div",{className:"flex items-end",children:(0,E_.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[(0,E_.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Total Teachers"}),(0,E_.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:i.length})]})})]})}),(0,E_.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:p?(0,E_.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,E_.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,E_.jsxs)("div",{className:"overflow-x-auto",children:[(0,E_.jsxs)("table",{className:"w-full text-left",children:[(0,E_.jsx)("thead",{children:(0,E_.jsxs)("tr",{className:"border-b",children:[(0,E_.jsx)("th",{className:"py-3 px-4",children:"Name"}),(0,E_.jsx)("th",{className:"py-3 px-4",children:"Department"}),(0,E_.jsx)("th",{className:"py-3 px-4",children:"Email"}),(0,E_.jsx)("th",{className:"py-3 px-4",children:"Status"}),(0,E_.jsx)("th",{className:"py-3 px-4",children:"Subjects"})]})}),(0,E_.jsx)("tbody",{children:i.map((e=>{return(0,E_.jsxs)("tr",{className:"border-b hover:bg-blue-50 transition",children:[(0,E_.jsx)("td",{className:"py-3 px-4",children:(0,E_.jsxs)("div",{className:"flex items-center",children:[e.photoURL?(0,E_.jsx)("img",{src:e.photoURL,alt:e.fullName,className:"h-8 w-8 rounded-full mr-3"}):(0,E_.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:(0,E_.jsx)(NI,{className:"h-4 w-4 text-blue-600"})}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("div",{className:"font-medium",children:e.fullName}),(0,E_.jsxs)("div",{className:"text-sm text-gray-500",children:["Joined ",new Date(e.dateJoined).toLocaleDateString()]})]})]})}),(0,E_.jsx)("td",{className:"py-3 px-4",children:(0,E_.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[(0,E_.jsx)(jI,{className:"h-4 w-4 mr-1"}),e.department]})}),(0,E_.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,E_.jsx)("td",{className:"py-3 px-4",children:(0,E_.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,E_.jsx)("td",{className:"py-3 px-4",children:(0,E_.jsx)("div",{className:"flex flex-wrap gap-1",children:(t=e.subjects,t.map((e=>{const t=s.find((t=>t.id===e));return t?t.name:e}))).map(((e,t)=>(0,E_.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e},t)))})}),(0,E_.jsx)("td",{className:"py-3 px-4",children:(0,E_.jsx)("div",{className:"flex space-x-2"})})]},e.id);var t}))})]}),0===i.length&&(0,E_.jsx)("div",{className:"text-center py-8",children:(0,E_.jsx)("div",{className:"text-gray-500",children:"No teachers found"})})]})})]})}),(0,E_.jsx)(pte,{isOpen:h,onClose:()=>f(!1),title:"Add New Teacher",children:(0,E_.jsx)("div",{className:"p-6",children:(0,E_.jsx)("p",{children:"Teacher form coming soon..."})})})]})};function rne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const ine=r.forwardRef(rne);function one(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const sne=r.forwardRef(one);function ane(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const lne=r.forwardRef(ane);function cne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const une=r.forwardRef(cne);function dne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const hne=r.forwardRef(dne),fne={button:{primary:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",secondary:"flex items-center px-4 py-2 border border-purple-200 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors",danger:"flex items-center px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition-colors"},card:"bg-white rounded-xl shadow-sm border border-blue-100/50 p-6",input:"w-full p-2 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",badge:{success:"bg-green-100 text-green-800",error:"bg-rose-100 text-rose-800",warning:"bg-amber-100 text-amber-800",info:"bg-blue-100 text-blue-800"}},pne={h1:"text-4xl font-bold",h2:"text-3xl font-bold",h3:"text-2xl font-bold",h4:"text-xl font-bold",body:"text-base",small:"text-sm"},mne=e=>{var t,n,i;let{isOpen:o,onClose:s,userId:a,userType:l}=e;const[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{o&&a&&b()}),[o,a]);const b=async()=>{try{g(!0);const e=yp(__,"student"===l?"students":"teachers",a),t=await bm(e);let n=null;if(!t.exists())return console.error("User document does not exist"),void g(!1);{const e=t.data();n={...e,id:a},u(n),p(e.roomAssigned||"")}const r=gp(__,"rooms"),i=(await wm(r)).docs.map((e=>({id:e.id,...e.data()}))).filter((e=>{var t;return"available"===e.status||e.id===(null===(t=n)||void 0===t?void 0:t.roomAssigned)}));h(i),g(!1)}catch(py){console.error("Error fetching data:",py),g(!1),TA().fire("Error","Failed to load user or room data","error")}};return o?(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,E_.jsxs)(pA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,E_.jsxs)("h2",{className:pne.h3,children:[null===c||void 0===c?void 0:c.fullName," - ","student"===l?"Student":"Teacher"," Details"]}),(0,E_.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:(0,E_.jsx)(hne,{className:"w-6 h-6"})})]}),m?(0,E_.jsx)("div",{className:"p-6 text-center",children:(0,E_.jsx)("p",{className:"text-gray-500",children:"Loading..."})}):(0,E_.jsxs)(E_.Fragment,{children:[(0,E_.jsxs)("div",{className:"p-6 space-y-4",children:[(0,E_.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:"ID Number"}),(0,E_.jsx)("p",{className:"font-medium",children:null===c||void 0===c?void 0:c.idNumber})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,E_.jsx)("p",{className:"font-medium",children:null===c||void 0===c?void 0:c.email})]}),(null===c||void 0===c?void 0:c.department)&&(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:"Department"}),(0,E_.jsx)("p",{className:"font-medium",children:c.department})]}),(null===c||void 0===c?void 0:c.major)&&(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:"Major"}),(0,E_.jsx)("p",{className:"font-medium",children:c.major})]})]})}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Room"}),(0,E_.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:fne.input,children:[(0,E_.jsx)("option",{value:"",children:"No Room Assigned"}),d.map((e=>(0,E_.jsxs)("option",{value:e.id,children:[e.name," - ",e.building,", Floor ",e.floor]},e.id)))]}),f&&(0,E_.jsxs)("div",{className:`mt-4 ${y?"bg-green-50":"bg-blue-50"} p-3 rounded-lg flex items-start transition-colors duration-300`,children:[(0,E_.jsx)(VP,{className:`w-5 h-5 ${y?"text-green-500":"text-blue-500"} mt-0.5 mr-2`}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm font-medium "+(y?"text-green-700":"text-blue-700"),children:y?"Room Assignment Updated!":"Current Room Assignment"}),(0,E_.jsxs)("p",{className:"text-sm "+(y?"text-green-600":"text-blue-600"),children:[null===(t=d.find((e=>e.id===f)))||void 0===t?void 0:t.name," -",null===(n=d.find((e=>e.id===f)))||void 0===n?void 0:n.building,", Floor ",null===(i=d.find((e=>e.id===f)))||void 0===i?void 0:i.floor]})]})]})]})]}),(0,E_.jsxs)("div",{className:"flex justify-end space-x-4 p-6 border-t",children:[(0,E_.jsx)("button",{type:"button",onClick:s,className:fne.button.secondary,children:"Cancel"}),(0,E_.jsx)("button",{onClick:async()=>{try{if(!c||!c.id)return console.error("User data is missing or incomplete"),void TA().fire({icon:"error",title:"Error",text:"User data is missing or incomplete"});console.log("Updating user:",c.id,"with room:",f);const e=yp(__,"student"===l?"students":"teachers",c.id);if(await Sm(e,{roomAssigned:f}),f){const e=yp(__,"rooms",f);await Sm(e,{status:"occupied"})}if(c.roomAssigned&&c.roomAssigned!==f){const e=yp(__,"rooms",c.roomAssigned);await Sm(e,{status:"available"})}TA().fire({icon:"success",title:"Room Assigned Successfully",showConfirmButton:!1,timer:1500,position:"top-end",toast:!0}),u((e=>e?{...e,roomAssigned:f}:null)),b(),v(!0),setTimeout((()=>{v(!1)}),3e3)}catch(py){console.error("Error assigning room:",py),TA().fire({icon:"error",title:"Error",text:`Failed to assign room: ${py instanceof Error?py.message:"Unknown error"}`}),v(!1)}},className:fne.button.primary,children:f?"Assign Selected Room":"Clear Room Assignment"})]})]})]})}):null},gne=()=>{const{currentUser:e}=T_(),[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)({department:"all",yearLevel:"all",status:"all"}),[v,b]=(0,r.useState)({key:"name",direction:"asc"}),[x,w]=(0,r.useState)(!1),[_,S]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=Tm(tm(gp(__,"students"),sm("createdAt","desc")),(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,...e.data()})})),o(t),a(!1)}),(e=>{console.error("Error fetching students:",e),TA().fire("Error","Failed to fetch students data","error"),a(!1)}));return()=>e()}),[]);const E=(0,r.useMemo)((()=>Array.from(new Set(i.map((e=>e.department))))),[i]),C=(0,r.useMemo)((()=>Array.from(new Set(i.map((e=>e.yearLevel)))).sort()),[i]),T=(0,r.useMemo)((()=>i.filter((e=>("all"===g.department||e.department===g.department)&&("all"===g.yearLevel||e.yearLevel.toString()===g.yearLevel)&&("all"===g.status||e.status===g.status)&&(""===p||e.name.toLowerCase().includes(p.toLowerCase())||e.email.toLowerCase().includes(p.toLowerCase())||e.studentId.toLowerCase().includes(p.toLowerCase())))).sort(((e,t)=>{const n=e[v.key],r=t[v.key];return"string"===typeof n&&"string"===typeof r?"asc"===v.direction?n.localeCompare(r):r.localeCompare(n):"asc"===v.direction?n-r:r-n}))),[i,g,p,v]),j=(0,r.useMemo)((()=>(e=>{const t={total:e.length,active:e.filter((e=>"active"===e.status)).length,inactive:e.filter((e=>"inactive"===e.status)).length,byDepartment:{},byYearLevel:{},byStatus:{active:0,inactive:0}};return e.forEach((e=>{t.byDepartment[e.department]||(t.byDepartment[e.department]=0),t.byDepartment[e.department]++;const n=e.yearLevel.toString();t.byYearLevel[n]||(t.byYearLevel[n]=0),t.byYearLevel[n]++,t.byStatus[e.status]++})),t})(T)),[T]),k=e=>1===e?"st":2===e?"nd":3===e?"rd":"th";return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("main",{className:`flex-1 transition-all duration-300 ${t?"ml-20":"ml-64"} p-8 overflow-y-auto`,children:(0,E_.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,E_.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,E_.jsxs)("div",{className:"flex items-center",children:[(0,E_.jsx)(jI,{className:"h-10 w-10 text-indigo-600 mr-3"}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Students"}),(0,E_.jsx)("p",{className:"text-gray-600",children:"Manage and monitor student records"})]})]}),(0,E_.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)(ine,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,E_.jsx)("input",{type:"text",placeholder:"Search students...",value:p,onChange:e=>m(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,E_.jsxs)("select",{value:g.department,onChange:e=>y((t=>({...t,department:e.target.value}))),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,E_.jsx)("option",{value:"all",children:"All Departments"}),E.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]}),(0,E_.jsxs)("select",{value:g.yearLevel,onChange:e=>y((t=>({...t,yearLevel:e.target.value}))),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,E_.jsx)("option",{value:"all",children:"All Year Levels"}),C.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]}),(0,E_.jsx)("button",{onClick:()=>d(!0),className:"p-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600",children:(0,E_.jsx)(fP,{className:"h-5 w-5"})}),(0,E_.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,E_.jsx)(hte,{className:"h-5 w-5"}),"Add Student"]})]})]}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:"Total Students"}),(0,E_.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:j.total})]}),(0,E_.jsx)(jI,{className:"h-8 w-8 text-indigo-600"})]})}),(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:"Active Students"}),(0,E_.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:j.active})]}),(0,E_.jsx)(rP,{className:"h-8 w-8 text-green-600"})]})}),(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:"Inactive Students"}),(0,E_.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:j.inactive})]}),(0,E_.jsx)(oP,{className:"h-8 w-8 text-red-600"})]})})]}),(0,E_.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:(0,E_.jsx)("div",{className:"overflow-x-auto",children:(0,E_.jsxs)("table",{className:"w-full",children:[(0,E_.jsx)("thead",{className:"bg-gray-50",children:(0,E_.jsxs)("tr",{children:[(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{return e="name",void b((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"})));var e},children:(0,E_.jsxs)("div",{className:"flex items-center gap-2",children:["Name","name"===v.key&&("asc"===v.direction?(0,E_.jsx)(sne,{className:"h-4 w-4"}):(0,E_.jsx)(lne,{className:"h-4 w-4"}))]})}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year Level"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,E_.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,E_.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,E_.jsx)(RP,{children:T.map((e=>(0,E_.jsxs)(pA.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition",children:[(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("div",{className:"flex items-center",children:(0,E_.jsxs)("div",{className:"ml-4",children:[(0,E_.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,E_.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("div",{className:"text-sm text-gray-900",children:e.studentId})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("div",{className:"text-sm text-gray-900",children:e.department})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("div",{className:"text-sm text-gray-900",children:e.yearLevel})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,E_.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E_.jsx)("button",{onClick:()=>f(e),className:"text-indigo-600 hover:text-indigo-900",children:(0,E_.jsx)(une,{className:"h-5 w-5"})}),(0,E_.jsx)("button",{onClick:()=>(async e=>{try{await TA().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{t.isConfirmed&&(await Em(yp(__,"students",e)),TA().fire("Deleted!","Student has been deleted.","success"))}))}catch(py){console.error("Error deleting student:",py),TA().fire("Error","Failed to delete student","error")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,E_.jsx)(ute,{className:"h-5 w-5"})}),(0,E_.jsx)("button",{onClick:()=>{return t=e.id,S(t),void w(!0);var t},className:fne.button.secondary,children:"View/Edit Details"})]})})]},e.id)))})})]})})})]})}),(0,E_.jsx)(RP,{children:u&&(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,E_.jsxs)(pA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 max-w-lg w-full",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Student Statistics"}),(0,E_.jsx)("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,E_.jsx)(bP,{className:"h-6 w-6 text-gray-500"})})]}),(0,E_.jsxs)("div",{className:"space-y-6",children:[(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,E_.jsx)("p",{className:"text-sm text-indigo-600 mb-1",children:"Total Students"}),(0,E_.jsx)("p",{className:"text-2xl font-bold text-indigo-900",children:j.total})]}),(0,E_.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,E_.jsx)("p",{className:"text-sm text-green-600 mb-1",children:"Active Students"}),(0,E_.jsx)("p",{className:"text-2xl font-bold text-green-900",children:j.active})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Students by Department"}),(0,E_.jsx)("div",{className:"space-y-2",children:Object.entries(j.byDepartment).map((e=>{let[t,n]=e;return(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-gray-600",children:t}),(0,E_.jsx)("span",{className:"font-semibold text-gray-800",children:n})]},t)}))})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Students by Year Level"}),(0,E_.jsx)("div",{className:"space-y-2",children:Object.entries(j.byYearLevel).map((e=>{let[t,n]=e;return(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-gray-600",children:`${t}${k(parseInt(t))} Year`}),(0,E_.jsx)("span",{className:"font-semibold text-gray-800",children:n})]},t)}))})]})]})]})},"stats-modal")}),(0,E_.jsx)(RP,{children:(l||h)&&(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,E_.jsxs)(pA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 max-w-2xl w-full",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:h?"Edit Student":"Add New Student"}),(0,E_.jsx)("button",{onClick:()=>{c(!1),f(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,E_.jsx)(bP,{className:"h-6 w-6 text-gray-500"})})]}),(0,E_.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const t=e.target,n=new FormData(t),r={name:n.get("name"),email:n.get("email"),department:n.get("department"),yearLevel:parseInt(n.get("yearLevel")),section:n.get("section"),studentId:n.get("studentId"),status:n.get("status"),attendance:(null===h||void 0===h?void 0:h.attendance)||{present:0,absent:0,late:0},createdAt:(null===h||void 0===h?void 0:h.createdAt)||new Date};h?(await Sm(yp(__,"students",h.id),r),TA().fire("Success","Student updated successfully","success")):(await Cm(gp(__,"students"),r),TA().fire("Success","Student added successfully","success")),t.reset(),c(!1),f(null)}catch(py){console.error("Error saving student:",py),TA().fire("Error","Failed to save student data","error")}},className:"space-y-6",children:[(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,E_.jsx)("input",{type:"text",name:"name",defaultValue:null===h||void 0===h?void 0:h.name,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter full name"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student ID"}),(0,E_.jsx)("input",{type:"text",name:"studentId",defaultValue:null===h||void 0===h?void 0:h.studentId,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter student ID"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,E_.jsx)("input",{type:"email",name:"email",defaultValue:null===h||void 0===h?void 0:h.email,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter email address"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),(0,E_.jsxs)("select",{name:"department",defaultValue:null===h||void 0===h?void 0:h.department,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,E_.jsx)("option",{value:"",children:"Select Department"}),E.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year Level"}),(0,E_.jsxs)("select",{name:"yearLevel",defaultValue:null===h||void 0===h?void 0:h.yearLevel,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,E_.jsx)("option",{value:"",children:"Select Year Level"}),[1,2,3,4,5].map((e=>(0,E_.jsxs)("option",{value:e,children:[e,"st Year"]},e)))]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),(0,E_.jsx)("input",{type:"text",name:"section",defaultValue:null===h||void 0===h?void 0:h.section,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter section"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,E_.jsxs)("select",{name:"status",defaultValue:(null===h||void 0===h?void 0:h.status)||"active",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,E_.jsx)("option",{value:"active",children:"Active"}),(0,E_.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,E_.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,E_.jsx)("button",{type:"button",onClick:()=>{c(!1),f(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,E_.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:h?"Update Student":"Add Student"})]})]})]})},"add-edit-modal")}),(0,E_.jsx)(mne,{isOpen:x,onClose:()=>w(!1),userId:_,userType:"student"})]})};function yne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))}const vne=r.forwardRef(yne);function bne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M17.004 10.407c.138.435-.216.842-.672.842h-3.465a.75.75 0 0 1-.65-.375l-1.732-3c-.229-.396-.053-.907.393-1.004a5.252 5.252 0 0 1 6.126 3.537ZM8.12 8.464c.307-.338.838-.235 1.066.16l1.732 3a.75.75 0 0 1 0 .75l-1.732 3c-.229.397-.76.5-1.067.161A5.23 5.23 0 0 1 6.75 12a5.23 5.23 0 0 1 1.37-3.536ZM10.878 17.13c-.447-.098-.623-.608-.394-1.004l1.733-3.002a.75.75 0 0 1 .65-.375h3.465c.457 0 .81.407.672.842a5.252 5.252 0 0 1-6.126 3.539Z"}),r.createElement("path",{fillRule:"evenodd",d:"M21 12.75a.75.75 0 1 0 0-1.5h-.783a8.22 8.22 0 0 0-.237-1.357l.734-.267a.75.75 0 1 0-.513-1.41l-.735.268a8.24 8.24 0 0 0-.689-1.192l.6-.503a.75.75 0 1 0-.964-1.149l-.6.504a8.3 8.3 0 0 0-1.054-.885l.391-.678a.75.75 0 1 0-1.299-.75l-.39.676a8.188 8.188 0 0 0-1.295-.47l.136-.77a.75.75 0 0 0-1.477-.26l-.136.77a8.36 8.36 0 0 0-1.377 0l-.136-.77a.75.75 0 1 0-1.477.26l.136.77c-.448.121-.88.28-1.294.47l-.39-.676a.75.75 0 0 0-1.3.75l.392.678a8.29 8.29 0 0 0-1.054.885l-.6-.504a.75.75 0 1 0-.965 1.149l.6.503a8.243 8.243 0 0 0-.689 1.192L3.8 8.216a.75.75 0 1 0-.513 1.41l.735.267a8.222 8.222 0 0 0-.238 1.356h-.783a.75.75 0 0 0 0 1.5h.783c.042.464.122.917.238 1.356l-.735.268a.75.75 0 0 0 .513 1.41l.735-.268c.197.417.428.816.69 1.191l-.6.504a.75.75 0 0 0 .963 1.15l.601-.505c.326.323.679.62 1.054.885l-.392.68a.75.75 0 0 0 1.3.75l.39-.679c.414.192.847.35 1.294.471l-.136.77a.75.75 0 0 0 1.477.261l.137-.772a8.332 8.332 0 0 0 1.376 0l.136.772a.75.75 0 1 0 1.477-.26l-.136-.771a8.19 8.19 0 0 0 1.294-.47l.391.677a.75.75 0 0 0 1.3-.75l-.393-.679a8.29 8.29 0 0 0 1.054-.885l.601.504a.75.75 0 0 0 .964-1.15l-.6-.503c.261-.375.492-.774.69-1.191l.735.267a.75.75 0 1 0 .512-1.41l-.734-.267c.115-.439.195-.892.237-1.356h.784Zm-2.657-3.06a6.744 6.744 0 0 0-1.19-2.053 6.784 6.784 0 0 0-1.82-1.51A6.705 6.705 0 0 0 12 5.25a6.8 6.8 0 0 0-1.225.11 6.7 6.7 0 0 0-2.15.793 6.784 6.784 0 0 0-2.952 3.489.76.76 0 0 1-.036.098A6.74 6.74 0 0 0 5.251 12a6.74 6.74 0 0 0 3.366 5.842l.009.005a6.704 6.704 0 0 0 2.18.798l.022.003a6.792 6.792 0 0 0 2.368-.004 6.704 6.704 0 0 0 2.205-.811 6.785 6.785 0 0 0 1.762-1.484l.009-.01.009-.01a6.743 6.743 0 0 0 1.18-2.066c.253-.707.39-1.469.39-2.263a6.74 6.74 0 0 0-.408-2.309Z",clipRule:"evenodd"}))}const xne=r.forwardRef(bne),wne=()=>{var e,t;const{currentUser:n}=T_(),[i,o]=(0,r.useState)(!1),s={profile:{icon:GO,title:"Profile Settings",description:"Manage your personal information",content:(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Full Name"}),(0,E_.jsx)("input",{type:"text",defaultValue:null!==(e=null===n||void 0===n?void 0:n.fullName)&&void 0!==e?e:void 0,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Email"}),(0,E_.jsx)("input",{type:"email",defaultValue:null!==(t=null===n||void 0===n?void 0:n.email)&&void 0!==t?t:void 0,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})},security:{icon:gA,title:"Security Settings",description:"Update your password and security preferences",content:(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Current Password"}),(0,E_.jsx)("input",{type:"password",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"New Password"}),(0,E_.jsx)("input",{type:"password",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Confirm New Password"}),(0,E_.jsx)("input",{type:"password",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})},notifications:{icon:vne,title:"Notification Settings",description:"Manage your notification preferences",content:(0,E_.jsx)("div",{})},general:{icon:xne,title:"General Settings",description:"Configure general application settings",content:(0,E_.jsx)("div",{})}},[a,l]=(0,r.useState)(0);return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:`flex-1 transition-all duration-300 ${i?"ml-20":"ml-64"} p-8 overflow-y-auto`,children:(0,E_.jsxs)("div",{className:"container mx-auto",children:[(0,E_.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,E_.jsxs)("h1",{className:"text-3xl font-bold text-blue-800 flex items-center",children:[(0,E_.jsx)(xne,{className:"h-10 w-10 mr-3 text-blue-600"}),"Settings"]})}),(0,E_.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,E_.jsx)("div",{className:"col-span-3 bg-white rounded-xl shadow-md p-4",children:Object.keys(s).map(((e,t)=>(0,E_.jsx)("button",{onClick:()=>l(t),className:"w-full text-left px-4 py-3 rounded-lg mb-2 transition "+(a===t?"bg-blue-100 text-blue-800":"hover:bg-blue-50 text-blue-600"),children:(0,E_.jsx)("div",{className:"flex items-center",children:(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"font-semibold",children:s[e].title}),(0,E_.jsx)("p",{className:"text-xs text-blue-400",children:s[e].description})]})})},t)))}),(0,E_.jsxs)("div",{className:"col-span-9 bg-white rounded-xl shadow-md p-6",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-blue-800 mb-6 flex items-center",children:"profile"===Object.keys(s)[a]?"Profile Settings":"security"===Object.keys(s)[a]?"Security Settings":"notifications"===Object.keys(s)[a]?"Notification Settings":"General Settings"}),"profile"===Object.keys(s)[a]?s.profile.content:"security"===Object.keys(s)[a]?s.security.content:"notifications"===Object.keys(s)[a]?s.notifications.content:s.general.content,(0,E_.jsx)("div",{className:"mt-6 flex justify-end",children:(0,E_.jsxs)("button",{className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[(0,E_.jsx)(vne,{className:"h-5 w-5 mr-2"}),"Save Changes"]})})]})]})]})})]})},_ne=()=>{const{currentUser:e}=T_(),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[s,a]=(0,r.useState)(new Date),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const i=tm(gp(__,"classes"),rm("instructorId","==",e.uid)),s=await wm(i),a=[],l=new Set;for(const e of s.docs){var t,r;const n=e.data(),i=await wm(tm(gp(__,"subjects"),rm("code","==",n.subjectCode))),o=tm(gp(__,"enrollments"),rm("classId","==",e.id)),s=await wm(o);l.add(n.department),a.push({...n,id:e.id,subjectName:(null===(t=i.docs[0])||void 0===t||null===(r=t.data())||void 0===r?void 0:r.name)||"Unknown Subject",studentCount:s.size})}n(a),c(Array.from(l)),o(!1)}catch(py){console.error("Error fetching classes:",py),o(!1)}})()}),[e]);const h=()=>{const e=Kee(s,"EEEE").toLowerCase();return t.filter((t=>t.days.includes(e)))};return i?(0,E_.jsxs)("div",{className:"flex h-screen",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:"flex-1 p-8",children:(0,E_.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,E_.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})})]}):(0,E_.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${u?"ml-20":"ml-64"} overflow-y-auto`,children:(0,E_.jsxs)("div",{className:"p-8",children:[(0,E_.jsxs)("div",{className:"mb-6",children:[(0,E_.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"My Classes"}),(0,E_.jsx)("input",{type:"date",value:Kee(s,"yyyy-MM-dd"),onChange:e=>a(new Date(e.target.value)),className:"px-4 py-2 border rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),l.map((e=>{const t=(e=>h().filter((t=>t.department===e)))(e);return 0===t.length?null:(0,E_.jsxs)("div",{className:"mb-8",children:[(0,E_.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:e}),(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((e=>(0,E_.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.subjectName}),(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:e.subjectCode})]}),(0,E_.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800",children:["Room ",e.roomNumber]})]}),(0,E_.jsxs)("div",{className:"space-y-2",children:[(0,E_.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,E_.jsx)("span",{className:"text-gray-600",children:"Time:"}),(0,E_.jsxs)("span",{className:"text-gray-800",children:[e.startTime," - ",e.endTime]})]}),(0,E_.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,E_.jsx)("span",{className:"text-gray-600",children:"Students:"}),(0,E_.jsx)("span",{className:"text-gray-800",children:e.studentCount||0})]}),(0,E_.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,E_.jsx)("span",{className:"text-gray-600",children:"Days:"}),(0,E_.jsx)("span",{className:"text-gray-800",children:e.days.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(", ")})]})]})]},e.id)))})]},e)})),0===h().length&&(0,E_.jsx)("div",{className:"text-center py-12",children:(0,E_.jsxs)("p",{className:"text-gray-600 text-lg",children:["No classes scheduled for ",Kee(s,"EEEE, MMMM do, yyyy")]})})]})})]})},Sne=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)({department:"all",day:"all",semester:"all"}),{currentUser:f}=T_(),p="admin"===(null===f||void 0===f?void 0:f.role),m=(null===f||void 0===f||f.role,async()=>{try{s(!0);const e=gp(__,"subjects"),n=await wm(e),r=new Map(n.docs.map((e=>{const t=e.data();return[e.id,{id:e.id,code:t.code||"",name:t.name||""}]}))),i=gp(__,"teachers"),o=await wm(i),a=[];o.docs.forEach((e=>{const t=e.data(),n=(t.schedules||[]).map(((n,i)=>{const o=n.subject?r.get(n.subject):null;return{...n,id:`${e.id}-${n.section}`,subject:o?o.name:n.subject,subjectCode:o?o.code:n.subjectCode,instructor:t.fullName,department:t.department,semester:t.currentSemester||"Current Semester"}}));a.push(...n)})),a.sort(((e,t)=>{const n=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n};return n(e.startTime)-n(t.startTime)})),t(a),s(!1)}catch(py){console.error("Error fetching schedules:",py),TA().fire("Error","Failed to fetch schedules","error"),s(!1)}});(0,r.useEffect)((()=>{if(f&&"admin"===f.role)m();else{if(f){const e=Tm(tm(gp(__,"teachers"),rm("uid","==",f.uid)),(async e=>{if(!e.empty){const n=e.docs[0],r=n.data().schedules||[];t(r.map(((e,t)=>({...e,id:`${n.id}_${t}`}))))}s(!1)}),(e=>{console.error("Error fetching schedules:",e),TA().fire({icon:"error",title:"Fetch Error",text:e.message||"Failed to fetch schedules",confirmButtonColor:"#3b82f6"}),s(!1)}));return()=>e()}s(!1)}}),[f]);const g=(0,r.useMemo)((()=>e.filter((e=>{var t,n,r,i;const o=!c||(null===(t=e.subject)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.instructor)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.department)||void 0===r?void 0:r.toLowerCase().includes(c.toLowerCase()))||(null===(i=e.roomNumber)||void 0===i?void 0:i.toLowerCase().includes(c.toLowerCase())),s="all"===d.department||e.department===d.department,a="all"===d.day||e.days&&e.days.includes(d.day),l="all"===d.semester||e.semester===d.semester;return o&&s&&a&&l}))),[e,c,d]),{departments:y,days:v,semesters:b}=(()=>{const t=Array.from(new Set(e.map((e=>e.department||"Unassigned")))),n=Array.from(new Set(e.flatMap((e=>e.days||[])))),r=Array.from(new Set(e.map((e=>e.semester||"Current Semester"))));return{departments:t,days:n,semesters:r}})();return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsxs)("div",{className:`\n        flex-1 p-8 transition-all duration-300 \n        ${n?"ml-20":"ml-64"}\n        overflow-y-auto\n      `,children:[(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Course Schedules"}),(0,E_.jsx)("p",{className:"text-gray-600",children:"View and manage course schedules across departments"})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-8 flex flex-wrap gap-4 items-center justify-between",children:[(0,E_.jsx)("div",{className:"flex-grow max-w-md",children:(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"text",placeholder:"Search schedules...",value:c,onChange:e=>u(e.target.value),className:" w-full px-4 py-2 pl-10  border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 "}),(0,E_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E_.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,E_.jsxs)("div",{className:"flex space-x-4",children:[(0,E_.jsxs)("select",{value:d.department,onChange:e=>h((t=>({...t,department:e.target.value}))),className:" px-4 py-2 border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 ",children:[(0,E_.jsx)("option",{value:"all",children:"All Departments"}),y.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]}),(0,E_.jsxs)("select",{value:d.day,onChange:e=>h((t=>({...t,day:e.target.value}))),className:" px-4 py-2 border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 ",children:[(0,E_.jsx)("option",{value:"all",children:"All Days"}),v.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]}),(0,E_.jsxs)("select",{value:d.semester,onChange:e=>h((t=>({...t,semester:e.target.value}))),className:" px-4 py-2 border border-gray-300 rounded-lg  focus:outline-none focus:ring-2 focus:ring-primary-500 ",children:[(0,E_.jsx)("option",{value:"all",children:"All Semesters"}),b.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]}),p&&(0,E_.jsxs)("button",{onClick:()=>l(!0),className:" px-4 py-2 bg-primary-500 text-white  rounded-lg hover:bg-primary-600  transition-colors flex items-center ",children:[(0,E_.jsx)(hte,{className:"w-5 h-5 mr-2"}),"Add Schedule"]})]})]}),o?(0,E_.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,E_.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-primary-500"})}):0===g.length?(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16 bg-white rounded-2xl shadow-md",children:[(0,E_.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"No schedules found"}),(0,E_.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter options"})]}):(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((e=>(e=>{var t;const n={"Computer Science":"bg-blue-50 border-blue-200 text-blue-800",Mathematics:"bg-green-50 border-green-200 text-green-800",Physics:"bg-purple-50 border-purple-200 text-purple-800",Engineering:"bg-indigo-50 border-indigo-200 text-indigo-800",default:"bg-gray-50 border-gray-200 text-gray-800"}[e.department||"default"];return(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`\n          ${n}\n          rounded-2xl p-6 \n          border \n          shadow-md \n          hover:shadow-lg \n          transition-all \n          duration-300 \n          transform \n          hover:-translate-y-2\n          space-y-4\n        `,children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.subject||"Unassigned Subject"}),(0,E_.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,E_.jsxs)("span",{className:"flex items-center",children:[(0,E_.jsx)(iO,{className:"w-4 h-4 mr-1"}),e.startTime," - ",e.endTime]}),(0,E_.jsxs)("span",{className:"flex items-center",children:[(0,E_.jsx)(sO,{className:"w-4 h-4 mr-1"}),(null===(t=e.days)||void 0===t?void 0:t.join(", "))||"N/A"]})]})]}),(0,E_.jsxs)("div",{className:"text-right",children:[(0,E_.jsxs)("p",{className:"text-sm font-medium text-gray-500",children:["Room: ",e.roomNumber||"TBD"]}),(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:e.instructor||"Unassigned"})]})]}),(0,E_.jsxs)("div",{className:"border-t border-gray-200 pt-3 mt-3 flex justify-between items-center",children:[(0,E_.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full  bg-gray-100 text-gray-600",children:e.department||"Unassigned Department"}),(0,E_.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full  bg-gray-100 text-gray-600",children:e.semester||"Current Semester"})]})]},e.id)})(e)))})]})]})};function Ene(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const Cne=r.forwardRef(Ene),Tne={"Computer Science":"bg-blue-100 text-blue-800",Mathematics:"bg-green-100 text-green-800",Physics:"bg-purple-100 text-purple-800",Biology:"bg-teal-100 text-teal-800",Chemistry:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},jne=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)(null),[a,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)({key:"day",direction:"asc"}),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)({subject:"",room:"",day:"Monday",startTime:"08:00",endTime:"09:00",department:"",status:"active"}),[y,v]=(0,r.useState)([]),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)(!1),{currentUser:S}=T_();(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"teachers"),n=(await wm(e)).docs.map((e=>({id:e.id,...e.data()}))),r=gp(__,"teachers"),o=(await wm(r)).docs.map((e=>({id:e.id,...e.data()}))),s=Array.from(new Set(o.map((e=>e.department)))).filter(Boolean);v(n),t(o),i(s)}catch(py){console.error("Error fetching data:",py),TA().fire({icon:"error",title:"Error",text:"Failed to fetch schedules and subjects"})}})()}),[]);(0,r.useEffect)((()=>{(async()=>{try{_(!0);const e=gp(__,"teachers"),t=await wm(e),n=[],r=[];for(const a of t.docs){const e=a.data();e.subjects&&r.push(...e.subjects);const t=(e.schedules||[]).map((t=>({...t,id:`${a.id}_${t.subject}`,instructor:e.fullName,instructorEmail:e.email,instructorDepartment:e.department})));n.push(...t)}const i=Array.from(new Set(r)),o=new Map(i.map((e=>[e,{name:e,department:"Unassigned",id:e.toLowerCase().replace(/\s+/g,"-")}]))),s=n.map((e=>({...e,subjectDetails:o.get(e.subject)||null}))).sort(((e,t)=>e.startTime.localeCompare(t.startTime)));x(s),_(!1)}catch(py){console.error("Error fetching schedules:",py),TA().fire({icon:"error",title:"Fetch Error",text:py instanceof Error?py.message:"Failed to fetch schedules"}),_(!1)}})()}),[]);(0,r.useMemo)((()=>o&&o.schedules?[...o.schedules||[]].sort(((e,t)=>{var n,r;const i=e=>{var t;return(null===(t=e.subjectDetails)||void 0===t?void 0:t.name)||e.subject},o="subject"===c.key?i(e):null!==(n=e[c.key])&&void 0!==n?n:"",s="subject"===c.key?i(t):null!==(r=t[c.key])&&void 0!==r?r:"",a=String(o).localeCompare(String(s));return"asc"===c.direction?a:-a})):[]),[o,c]);const E=(0,r.useMemo)((()=>"all"===a?e:e.filter((e=>e.department===a))),[e,a]),C=e=>Tne[e]||Tne.default;return!S||"admin"!==S.role&&"instructor"!==S.role?(0,E_.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,E_.jsxs)("div",{className:"text-center",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,E_.jsx)("p",{className:"mt-2 text-gray-600",children:"You don't have permission to view this page."})]})}):(0,E_.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:"flex-1 transition-all duration-300 "+(f?"ml-20":"ml-64"),children:(0,E_.jsx)("div",{className:"p-8",children:(0,E_.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,E_.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Schedule Management"}),(0,E_.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage schedules by teacher and department"})]})}),(0,E_.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white p-4 rounded-xl shadow",children:[(0,E_.jsxs)("div",{className:"flex items-center mb-4",children:[(0,E_.jsx)(KO,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,E_.jsx)("h3",{className:"text-lg font-semibold",children:"Filter by Department"})]}),(0,E_.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:a,onChange:e=>l(e.target.value),children:[(0,E_.jsx)("option",{value:"all",children:"All Departments"}),n.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]})]}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-white p-4 rounded-xl shadow",children:[(0,E_.jsxs)("div",{className:"flex items-center mb-4",children:[(0,E_.jsx)(Cne,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,E_.jsx)("h3",{className:"text-lg font-semibold",children:"Select Teacher"})]}),(0,E_.jsxs)("select",{className:"w-full p-2 border rounded-lg",onChange:t=>{const n=e.find((e=>e.id===t.target.value));s(n||null)},children:[(0,E_.jsx)("option",{value:"",children:"Select a Teacher"}),E.map((e=>(0,E_.jsxs)("option",{value:e.id,children:[e.fullName," (",e.department,")"]},e.id)))]})]})]}),o&&(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-white rounded-xl shadow overflow-hidden",children:[(0,E_.jsx)("div",{className:"p-6 border-b flex justify-between items-center",children:(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("h2",{className:"text-2xl font-semibold",children:[o.fullName,"'s Schedules"]}),(0,E_.jsx)("div",{className:`inline-block px-2 py-1 rounded mt-2 text-sm ${C(o.department)}`,children:o.department})]})}),(0,E_.jsx)("div",{className:"overflow-x-auto",children:(0,E_.jsxs)("table",{className:"w-full",children:[(0,E_.jsx)("thead",{className:"bg-gray-50",children:(0,E_.jsx)("tr",{children:["subject","instructor","day","startTime","room"].map((e=>(0,E_.jsx)("th",{onClick:()=>(e=>{u((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"})))})(e),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:(0,E_.jsxs)("div",{className:"flex items-center",children:[e.charAt(0).toUpperCase()+e.slice(1),c.key===e&&(0,E_.jsx)("span",{className:"ml-2",children:"asc"===c.direction?"\u25b2":"\u25bc"})]})},e)))})}),(0,E_.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e=>{var t,n;return(0,E_.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsxs)("div",{className:"flex flex-col",children:[(0,E_.jsx)("div",{className:`inline-block px-2 py-1 rounded text-sm ${C((null===(t=e.subjectDetails)||void 0===t?void 0:t.department)||"default")}`,children:(null===(n=e.subjectDetails)||void 0===n?void 0:n.name)||e.subject}),e.subjectDetails&&(0,E_.jsx)("span",{className:"text-xs text-gray-500",children:e.subjectDetails.department})]})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,E_.jsxs)("div",{className:"flex flex-col",children:[(0,E_.jsx)("span",{children:e.instructor}),(0,E_.jsx)("span",{className:"text-xs text-gray-500",children:e.instructorEmail}),(0,E_.jsx)("div",{className:`inline-block px-1 py-0.5 rounded text-xs mt-1 ${C(e.instructorDepartment)}`,children:e.instructorDepartment})]})}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.day}),(0,E_.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.startTime," - ",e.endTime]}),(0,E_.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.room})]},e.id)}))})]})})]})]})})})]})};function kne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),r.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const Nne=r.forwardRef(kne);function Ane(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const Ine=r.forwardRef(Ane),Pne={"Computer Science":{bg:"bg-blue-50",border:"border-blue-400",text:"text-blue-800",icon:"text-blue-600",gradient:"from-blue-100 to-blue-200"},Mathematics:{bg:"bg-green-50",border:"border-green-400",text:"text-green-800",icon:"text-green-600",gradient:"from-green-100 to-green-200"},Physics:{bg:"bg-purple-50",border:"border-purple-400",text:"text-purple-800",icon:"text-purple-600",gradient:"from-purple-100 to-purple-200"},Engineering:{bg:"bg-red-50",border:"border-red-400",text:"text-red-800",icon:"text-red-600",gradient:"from-red-100 to-red-200"},Biology:{bg:"bg-teal-50",border:"border-teal-400",text:"text-teal-800",icon:"text-teal-600",gradient:"from-teal-100 to-teal-200"},Chemistry:{bg:"bg-yellow-50",border:"border-yellow-400",text:"text-yellow-800",icon:"text-yellow-600",gradient:"from-yellow-100 to-yellow-200"},default:{bg:"bg-gray-50",border:"border-gray-400",text:"text-gray-800",icon:"text-gray-600",gradient:"from-gray-100 to-gray-200"}},One=()=>{const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)("all"),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)("grid"),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[w,_]=(0,r.useState)("name"),[S,E]=(0,r.useState)("asc"),[C,T]=(0,r.useState)(null),{currentUser:j}=T_();(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"teachers"),n=await wm(e),r=new Set,o=[];n.docs.forEach((e=>{const t={id:e.id,...e.data()};o.push(t),t.department&&r.add(t.department)}));const a=gp(__,"subjects"),c=await wm(a),u={};c.docs.forEach((e=>{const t={id:e.id,...e.data()},n=t.department||"Unassigned";u[n]||(u[n]=[]),u[n].push(t)})),t(u),i(o),s(["all",...Array.from(r)]),l(!1)}catch(py){console.error("Error fetching subjects and teachers:",py),TA().fire("Error","Could not fetch subjects and teachers","error"),l(!1)}})()}),[]);const k=(0,r.useMemo)((()=>{let t=[];return Object.values(e).forEach((e=>{t=[...t,...e]})),t=t.filter((e=>{var t,n;return("all"===d||(null===(t=e.department)||void 0===t?void 0:t.toLowerCase())===d.toLowerCase())&&(""===c||e.name.toLowerCase().includes(c.toLowerCase())||e.code.toLowerCase().includes(c.toLowerCase())||(null===(n=e.department)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase())))})),t.sort(((e,t)=>{let n=0;switch(w){case"name":n=e.name.localeCompare(t.name);break;case"code":n=e.code.localeCompare(t.code);break;case"credits":n=(e.credits||0)-(t.credits||0)}return"asc"===S?n:-n}))}),[e,d,c,w,S]),N=(0,r.useMemo)((()=>{const e={totalSubjects:k.length,byDepartment:{},averageCredits:0,totalCredits:0};return k.forEach((t=>{const n=t.department||"Unassigned";e.byDepartment[n]=(e.byDepartment[n]||0)+1,e.totalCredits+=t.credits||0})),e.averageCredits=e.totalCredits/(k.length||1),e}),[k]),A=e=>{const t=Pne[e.department]||Pne.default;return(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},whileHover:{scale:1.05},className:`\n          ${t.bg} ${t.border}\n          border rounded-lg p-4 shadow-md transition-all duration-300 \n          bg-gradient-to-br ${t.gradient}\n          flex flex-col justify-between\n        `,children:[(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,E_.jsx)("h4",{className:`\n              font-bold text-lg \n              ${t.text}\n            `,children:e.name}),(0,E_.jsx)(Nne,{className:`h-6 w-6 \n                ${t.icon}\n              `})]}),(0,E_.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,E_.jsxs)("p",{children:[(0,E_.jsx)("strong",{children:"Code:"})," ",e.code]}),(0,E_.jsxs)("p",{children:[(0,E_.jsx)("strong",{children:"Department:"})," ",e.department||"N/A"]}),(0,E_.jsxs)("p",{children:[(0,E_.jsx)("strong",{children:"Credits:"})," ",e.credits||"N/A"]})]})]}),(0,E_.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(Ine,{className:"h-5 w-5 text-gray-500"}),(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:e.teacherName||"Unassigned"})]}),e.semester&&(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(iO,{className:"h-5 w-5 text-gray-500"}),(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:e.semester})]})]})]},e.id)},I=e=>(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center hover:shadow-md transition",children:[(0,E_.jsxs)("div",{className:"flex-1",children:[(0,E_.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,E_.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,E_.jsxs)("p",{children:[(0,E_.jsx)("strong",{children:"Code:"})," ",e.code]}),(0,E_.jsxs)("p",{children:[(0,E_.jsx)("strong",{children:"Department:"})," ",e.department||"N/A"]})]})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(Ine,{className:"h-5 w-5 text-gray-500"}),(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:e.teacherName||"Unassigned"})]}),(0,E_.jsx)(fP,{className:"h-6 w-6 text-primary-500"})]})]},e.id);return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto transition-all duration-300 "+(f?"ml-20":"ml-64"),children:(0,E_.jsxs)("div",{className:"container mx-auto p-6",children:[(0,E_.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Subject Management"}),(0,E_.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)(ine,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,E_.jsx)("input",{type:"text",placeholder:"Search subjects...",value:c,onChange:e=>u(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,E_.jsx)("select",{value:d,onChange:e=>h(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o.map((e=>(0,E_.jsx)("option",{value:e,children:"all"===e?"All Departments":e},e)))}),(0,E_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E_.jsxs)("select",{value:w,onChange:e=>_(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,E_.jsx)("option",{value:"name",children:"Sort by Name"}),(0,E_.jsx)("option",{value:"code",children:"Sort by Code"}),(0,E_.jsx)("option",{value:"credits",children:"Sort by Credits"})]}),(0,E_.jsx)("button",{onClick:()=>E((e=>"asc"===e?"desc":"asc")),className:"p-2 rounded-lg hover:bg-gray-100",children:"asc"===S?"\u2191":"\u2193"})]}),(0,E_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E_.jsx)("button",{onClick:()=>g((e=>"grid"===e?"list":"grid")),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-600",children:"grid"===m?"List View":"Grid View"}),(0,E_.jsx)("button",{onClick:()=>x(!0),className:"p-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600",children:(0,E_.jsx)(fP,{className:"h-5 w-5"})}),"admin"===(null===j||void 0===j?void 0:j.role)&&(0,E_.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,E_.jsx)(hte,{className:"h-5 w-5"}),"Add Subject"]})]})]})]}),a?(0,E_.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,E_.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,E_.jsx)(RP,{children:(0,E_.jsx)("div",{className:`\n                ${"grid"===m?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"}\n              `,children:k.map((e=>(0,E_.jsx)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},whileHover:{scale:1.05},className:`\n                      ${"grid"===m?A(e):I(e)}\n                    `},e.id)))})}),0===k.length&&!a&&(0,E_.jsxs)(pA.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-64",children:[(0,E_.jsx)(Nne,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,E_.jsx)("p",{className:"text-xl text-gray-600",children:"No subjects found matching your criteria"})]})]})}),(0,E_.jsx)(RP,{children:b&&(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,E_.jsxs)(pA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 max-w-lg w-full",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Subject Statistics"}),(0,E_.jsx)("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,E_.jsx)(bP,{className:"h-6 w-6 text-gray-500"})})]}),(0,E_.jsxs)("div",{className:"space-y-6",children:[(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,E_.jsx)("p",{className:"text-sm text-indigo-600 mb-1",children:"Total Subjects"}),(0,E_.jsx)("p",{className:"text-2xl font-bold text-indigo-900",children:N.totalSubjects})]}),(0,E_.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,E_.jsx)("p",{className:"text-sm text-green-600 mb-1",children:"Average Credits"}),(0,E_.jsx)("p",{className:"text-2xl font-bold text-green-900",children:N.averageCredits.toFixed(1)})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Subjects by Department"}),(0,E_.jsx)("div",{className:"space-y-2",children:Object.entries(N.byDepartment).map((e=>{let[t,n]=e;return(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-gray-600",children:t}),(0,E_.jsx)("span",{className:"font-semibold text-gray-800",children:n})]},t)}))})]})]})]})},"stats-modal")}),(0,E_.jsx)(RP,{children:(y||C)&&(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},"add-edit-modal")})]})},Mne={"Computer Science":"bg-blue-100 text-blue-800",Mathematics:"bg-green-100 text-green-800",Physics:"bg-purple-100 text-purple-800",Biology:"bg-teal-100 text-teal-800",Chemistry:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},Rne=()=>{const{currentUser:e}=T_(),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)("all"),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"});(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"subjects"),t=(await wm(e)).docs.map((e=>({id:e.id,...e.data()}))),r=gp(__,"teachers"),i=await wm(r),s=Array.from(new Set(i.docs.map((e=>e.data().department)).filter(Boolean)));n(t),o(s)}catch(py){console.error("Error fetching data:",py),TA().fire({icon:"error",title:"Error",text:"Failed to fetch subjects and departments. Please try again."})}})()}),[]);const p=(0,r.useMemo)((()=>"all"===s?t:t.filter((e=>e.department===s))),[t,s]);return e&&"admin"===e.role?(0,E_.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:"flex-1 transition-all duration-300 "+(u?"ml-20":"ml-64"),children:(0,E_.jsx)("div",{className:"p-8",children:(0,E_.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Subject Management"}),(0,E_.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage subjects across different departments"})]}),(0,E_.jsxs)(pA.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{f({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"}),c(!0)},className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors flex items-center",children:[(0,E_.jsx)(hte,{className:"h-5 w-5 mr-2"}),"Add New Subject"]})]}),(0,E_.jsx)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white p-4 rounded-xl shadow",children:[(0,E_.jsxs)("div",{className:"flex items-center mb-4",children:[(0,E_.jsx)(KO,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,E_.jsx)("h3",{className:"text-lg font-semibold",children:"Filter by Department"})]}),(0,E_.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:s,onChange:e=>a(e.target.value),children:[(0,E_.jsx)("option",{value:"all",children:"All Departments"}),i.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]})]})}),(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map((e=>(0,E_.jsxs)(pA.div,{whileHover:{scale:1.05},className:`\n                    bg-white rounded-xl shadow-lg p-6 \n                    border-l-4 ${Mne[e.department]||Mne.default}\n                  `,children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,E_.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,E_.jsxs)("div",{className:"flex space-x-2",children:[(0,E_.jsx)(pA.button,{whileHover:{scale:1.1},onClick:()=>{f(e),c(!0)},className:"text-indigo-600 hover:text-indigo-800",children:(0,E_.jsx)(une,{className:"h-5 w-5"})}),(0,E_.jsx)(pA.button,{whileHover:{scale:1.1},onClick:()=>(async e=>{if((await TA().fire({title:"Are you sure?",text:"Do you want to delete this subject?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await Em(yp(__,"subjects",e)),n((t=>t.filter((t=>t.id!==e)))),TA().fire({icon:"success",title:"Deleted!",text:"Subject has been deleted.",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}catch(py){console.error("Error deleting subject:",py),TA().fire({icon:"error",title:"Error",text:"Failed to delete subject. Please try again."})}})(e.id),className:"text-red-600 hover:text-red-800",children:(0,E_.jsx)(ute,{className:"h-5 w-5"})})]})]}),(0,E_.jsxs)("div",{className:"space-y-2",children:[(0,E_.jsx)("p",{className:"text-gray-600 mb-2",children:e.details||"No details provided"}),e.code&&(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Code:"}),(0,E_.jsx)("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.code})]}),void 0!==e.credits&&(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Credits:"}),(0,E_.jsx)("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.credits})]}),e.prerequisites&&e.prerequisites.length>0&&(0,E_.jsxs)("div",{children:[(0,E_.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Prerequisites:"}),(0,E_.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.prerequisites.map(((e,t)=>(0,E_.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e},t)))})]}),e.learningObjectives&&e.learningObjectives.length>0&&(0,E_.jsxs)("div",{children:[(0,E_.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Learning Objectives:"}),(0,E_.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 mt-1",children:e.learningObjectives.map(((e,t)=>(0,E_.jsx)("li",{children:e},t)))})]}),(0,E_.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,E_.jsx)("span",{className:`\n                        px-2 py-1 rounded-full text-xs font-medium\n                        ${"active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}\n                      `,children:e.status}),(0,E_.jsx)("span",{className:"text-sm text-gray-500",children:e.department})]})]})]},e.id)))}),(0,E_.jsx)(pte,{isOpen:l,onClose:()=>c(!1),title:h.id?"Edit Subject":"New Subject",children:(0,E_.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=gp(__,"subjects");if(h.id){const e=yp(__,"subjects",h.id),{id:t,...r}=h;await Sm(e,r),n((e=>e.map((e=>e.id===h.id?{...h}:e))))}else{const{id:t,...r}=h,i=await Cm(e,r);n((e=>[...e,{...h,id:i.id}]))}f({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"}),c(!1),TA().fire({icon:"success",title:"Success",text:h.id?"Subject updated successfully":"Subject added successfully",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}catch(py){console.error("Error saving subject:",py),TA().fire({icon:"error",title:"Error",text:"Failed to save subject. Please try again."})}},className:"space-y-4 p-6",children:[(0,E_.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Name"}),(0,E_.jsx)("input",{type:"text",required:!0,className:"w-full p-2 border rounded-lg",value:h.name,onChange:e=>f({...h,name:e.target.value})})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Department"}),(0,E_.jsxs)("select",{required:!0,className:"w-full p-2 border rounded-lg",value:h.department,onChange:e=>f({...h,department:e.target.value}),children:[(0,E_.jsx)("option",{value:"",children:"Select Department"}),i.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Code"}),(0,E_.jsx)("input",{type:"text",className:"w-full p-2 border rounded-lg",value:h.code,onChange:e=>f({...h,code:e.target.value})})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Credits"}),(0,E_.jsx)("input",{type:"number",className:"w-full p-2 border rounded-lg",value:h.credits,onChange:e=>f({...h,credits:parseInt(e.target.value)})})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Details"}),(0,E_.jsx)("textarea",{className:"w-full p-2 border rounded-lg",value:h.details,onChange:e=>f({...h,details:e.target.value})})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,E_.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:h.status,onChange:e=>f({...h,status:e.target.value}),children:[(0,E_.jsx)("option",{value:"active",children:"Active"}),(0,E_.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,E_.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,E_.jsx)("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),(0,E_.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:h.id?"Update Subject":"Create Subject"})]})]})})]})})})]}):(0,E_.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,E_.jsxs)("div",{className:"text-center",children:[(0,E_.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,E_.jsx)("p",{className:"mt-2 text-gray-600",children:"You don't have permission to view this page."})]})})},Dne=()=>{const e=te(),{currentUser:t}=T_(),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(new Date),f=(0,r.useMemo)((()=>d),[d]);(0,r.useEffect)((()=>{const e=setInterval((()=>{h(new Date)}),1e3);return()=>clearInterval(e)}),[]),(0,r.useEffect)((()=>{(async()=>{if(t)try{const e=tm(gp(__,"sections"),rm("instructorId","==",t.uid)),n=await wm(e);if(!n.empty){const e=n.docs[0],t={id:e.id,...e.data()};l(t);const r=tm(gp(__,"users"),rm("id","in",t.students)),i=(await wm(r)).docs.map((e=>({id:e.id,...e.data()})));s(i)}}catch(py){console.error("Error fetching sections and students:",py)}finally{u(!1)}})()}),[t]);const p=(e,t)=>{s(o.map((n=>n.id===e?{...n,attendanceStatus:t}:n)))};return c?(0,E_.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,E_.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,E_.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("main",{className:"container mx-auto px-6 py-8",children:(0,E_.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,E_.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:["Take Attendance - ",(null===a||void 0===a?void 0:a.name)||"Section"]}),(0,E_.jsx)("div",{className:"text-sm text-gray-600",children:f.toLocaleString()})]}),(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((e=>(0,E_.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 flex items-center justify-between",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,E_.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]}),(0,E_.jsxs)("div",{className:"flex space-x-2",children:[(0,E_.jsx)("button",{onClick:()=>p(e.id,"present"),className:`\n                        p-2 rounded-full \n                        ${"present"===e.attendanceStatus?"bg-green-500 text-white":"bg-green-100 text-green-600 hover:bg-green-200"}\n                      `,children:(0,E_.jsx)(rP,{className:"w-6 h-6"})}),(0,E_.jsx)("button",{onClick:()=>p(e.id,"late"),className:`\n                        p-2 rounded-full \n                        ${"late"===e.attendanceStatus?"bg-yellow-500 text-white":"bg-yellow-100 text-yellow-600 hover:bg-yellow-200"}\n                      `,children:(0,E_.jsx)(iO,{className:"w-6 h-6"})}),(0,E_.jsx)("button",{onClick:()=>p(e.id,"absent"),className:`\n                        p-2 rounded-full \n                        ${"absent"===e.attendanceStatus?"bg-red-500 text-white":"bg-red-100 text-red-600 hover:bg-red-200"}\n                      `,children:(0,E_.jsx)(oP,{className:"w-6 h-6"})})]})]},e.id)))}),(0,E_.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,E_.jsxs)("div",{className:"text-sm text-gray-600",children:["Total Students: ",o.length,(0,E_.jsxs)("span",{className:"ml-4",children:["Present: ",o.filter((e=>"present"===e.attendanceStatus)).length]}),(0,E_.jsxs)("span",{className:"ml-4",children:["Late: ",o.filter((e=>"late"===e.attendanceStatus)).length]}),(0,E_.jsxs)("span",{className:"ml-4",children:["Absent: ",o.filter((e=>"absent"===e.attendanceStatus)).length]})]}),(0,E_.jsx)("button",{onClick:async()=>{if(a)try{const t=o.map((e=>({studentId:e.id,studentName:e.name,sectionId:a.id,sectionName:a.name,status:e.attendanceStatus||"absent",timestamp:ma.now(),date:(new Date).toISOString().split("T")[0]}))),n=gp(__,"attendanceRecords"),r=t.map((e=>Cm(n,e)));await Promise.all(r),alert("Attendance submitted successfully!"),e("/dashboard")}catch(py){console.error("Error submitting attendance:",py),alert("Failed to submit attendance. Please try again.")}},className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition",children:"Submit Attendance"})]})]})})]})};function Lne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.5 3.75a3 3 0 0 0-3 3v.75h21v-.75a3 3 0 0 0-3-3h-15Z"}),r.createElement("path",{fillRule:"evenodd",d:"M22.5 9.75h-21v7.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-7.5Zm-18 3.75a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z",clipRule:"evenodd"}))}const Fne=r.forwardRef(Lne),Bne=()=>{const[e,t]=(0,r.useState)({role:"student",fullName:"",idNumber:"",email:"",mobileNumber:"",department:"",major:"",yearLevel:"",yearsOfExperience:"",password:"",confirmPassword:"",sections:[],schedule:{days:[],startTime:"",endTime:""},section:"",subject:"",selectedSchedule:null,rfidUid:""}),[n,i]=(0,r.useState)({subjects:[],sections:[],departments:[],courses:[]}),[o,s]=(0,r.useState)({fullName:!1,idNumber:!1,email:!1,mobileNumber:!1,department:!1,yearsOfExperience:!1,password:!1,confirmPassword:!1,yearLevel:!1,role:!1,major:!1,sections:!1,scheduleDays:!1,scheduleTime:!1,section:!1,subject:!1,rfidUid:!1}),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)({hasUpper:!1,hasLower:!1,hasNumber:!1,hasMinLength:!1,hasSpecial:!1}),[m,g]=(0,r.useState)(1),[y,v]=(0,r.useState)(0),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)([]),[S,E]=(0,r.useState)({fullName:!1,email:!1,password:!1,confirmPassword:!1,mobileNumber:!1,department:!1,yearLevel:!1,role:!1,major:!1,sections:!1,scheduleDays:!1,scheduleTime:!1,section:!1,subject:!1,rfidUid:!1}),[C,T]=(0,r.useState)(!1),j=te(),k=[{id:1,title:"Account Type",description:"Choose your role"},{id:2,title:"Personal Info",description:"Basic information"},{id:3,title:"Department",description:"Academic details"},{id:4,title:"Security",description:"Set up password"}];(0,r.useEffect)((()=>{(()=>{const e=m/k.length*100;v(e)})()}),[m]),(0,r.useEffect)((()=>{(()=>{const e=Tm(gp(__,"students"),(e=>{const t=new Set;e.forEach((e=>{const n=e.data().section;n&&t.add(n)})),i((e=>({...e,sections:Array.from(t).sort()})))})),t=["Computer Science","Information Technology","Electrical Engineering","Computer Engineering","Civil Engineering","Industrial Engineering","Mechanical Engineering","Chemical Engineering"];i((e=>({...e,departments:t,courses:t})))})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=gp(__,"subjects"),t=(await wm(e)).docs.map((e=>({id:e.id,...e.data()})));x(t.filter((e=>"active"===e.status)))}catch(py){console.error("Error fetching subjects:",py)}})()}),[]),(0,r.useEffect)((()=>((()=>{const t={hasUpper:/[A-Z]/.test(e.password),hasLower:/[a-z]/.test(e.password),hasNumber:/\d/.test(e.password),hasMinLength:e.password.length>=8,hasSpecial:/[^A-Za-z0-9]/.test(e.password)};p(t)})(),()=>{})),[e.password]),(0,r.useEffect)((()=>{const e=a_(S_,"/NewRFIDTag");return p_(e,(e=>{const n=e.val();n&&t((e=>({...e,rfidUid:n})))})),()=>{!function(e,t,n){let r=null;const i=n?new r_(n):null;"value"===t?r=new d_(i):t&&(r=new h_(t,i)),Bw(e._repo,e,r)}(e)}}),[]),(0,r.useEffect)((()=>{e.rfidUid&&(async e=>{if(C)alert("This UID has already been registered.");else{const t=a_(b_(),"/RegisteredUIDs/"+e);(await u_(t)).exists()?alert("This UID is already registered."):(await c_(t,{registered:!0}),T(!0),alert("UID registered successfully!"))}})(e.rfidUid)}),[e.rfidUid,C]);const N=()=>{m<k.length&&g((e=>e+1))},A=(e,n)=>{t((t=>({...t,[e]:"idNumber"===e||"mobileNumber"===e?n.replace(/\D/g,""):n})))},I=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4?arguments[4]:void 0;return(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:n}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:r,value:e[t],onChange:e=>A(t,e.target.value),onFocus:()=>s({...o,[t]:!0}),onBlur:()=>s({...o,[t]:!1}),className:"\n            w-full px-4 py-3 rounded-xl\n            bg-white/10 border border-white/20\n            text-white placeholder-white/50\n            focus:outline-none focus:ring-2 focus:ring-white/30\n            transition-all duration-200\n          ",placeholder:i,required:!0}),a&&(0,E_.jsx)("div",{className:"absolute right-3 top-3 text-white/50",children:a})]})]})},P=(t,n,r)=>(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:n}),(0,E_.jsx)("select",{value:e[t],onChange:e=>A(t,e.target.value),className:"\n          w-full px-4 py-3 rounded-xl\n          bg-white/10 border border-white/20\n          text-white\n          focus:outline-none focus:ring-2 focus:ring-white/30\n          transition-all duration-200\n        ",required:!0,children:r.map((e=>(0,E_.jsx)("option",{value:e.value,className:"bg-gray-800",children:e.label},e.value)))})]});return(0,E_.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 py-12 px-4",children:[(0,E_.jsx)("div",{className:"absolute inset-0 bg-pattern opacity-10"}),(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-2xl bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl relative overflow-hidden",children:[(0,E_.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 pointer-events-none"}),(0,E_.jsxs)("div",{className:"relative p-8",children:[(0,E_.jsxs)("div",{className:"text-center mb-8",children:[(0,E_.jsx)(pA.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"w-16 h-16 bg-white rounded-2xl shadow-lg mx-auto mb-4 flex items-center justify-center",children:(0,E_.jsx)(gA,{className:"w-8 h-8 text-indigo-600"})}),(0,E_.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),(0,E_.jsx)("p",{className:"text-white/80",children:"Join our community today"})]}),(0,E_.jsxs)("div",{className:"mb-8",children:[(0,E_.jsx)("div",{className:"flex justify-between mb-2",children:k.map((e=>(0,E_.jsx)("div",{className:"text-sm "+(m>=e.id?"text-white":"text-white/50"),children:e.title},e.id)))}),(0,E_.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,E_.jsx)(pA.div,{className:"h-full bg-white",initial:{width:0},animate:{width:`${y}%`},transition:{duration:.3}})})]}),(0,E_.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l(!0),e.password!==e.confirmPassword)return TA().fire({icon:"error",title:"Passwords do not match",text:"Please ensure your passwords are the same."}),void l(!1);try{const t=(await ao(w_,e.email,e.password)).user,n={uid:t.uid,fullName:e.fullName,idNumber:e.idNumber,email:e.email,mobileNumber:e.mobileNumber,role:e.role,createdAt:(new Date).toISOString(),rfidUid:e.rfidUid};"student"===e.role?(n.department=e.department,n.major=e.major,n.yearLevel=e.yearLevel,n.section=e.section):"instructor"===e.role&&(n.department=e.department,n.yearsOfExperience=e.yearsOfExperience,n.subject=e.subject);const r=yp(__,e.role+"s",t.uid);if(await _m(r,n),e.rfidUid){const n=yp(__,"UIDs",e.rfidUid);await _m(n,{uid:t.uid,role:e.role,fullName:e.fullName})}TA().fire({icon:"success",title:"Registration Successful!",text:"Your account has been created."}),j("/login")}catch(py){console.error("Registration Error:",py),TA().fire({icon:"error",title:"Registration Failed",text:py.message||"An error occurred during registration."})}finally{l(!1)}},className:"space-y-6",children:[(()=>{switch(m){case 1:return(0,E_.jsxs)("div",{className:"space-y-6",children:[(0,E_.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Choose Your Role"}),(0,E_.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["student","instructor"].map((n=>(0,E_.jsx)(pA.button,{type:"button",onClick:()=>{t({...e,role:n}),N()},whileHover:{scale:1.02},whileTap:{scale:.98},className:`\n                    p-6 rounded-xl text-center transition-all duration-200\n                    ${e.role===n?"bg-white text-indigo-600 shadow-lg":"bg-white/10 text-white hover:bg-white/20"}\n                  `,children:(0,E_.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:["student"===n?(0,E_.jsx)(jI,{className:"w-8 h-8"}):(0,E_.jsx)(GO,{className:"w-8 h-8"}),(0,E_.jsx)("span",{className:"text-lg font-medium",children:n.charAt(0).toUpperCase()+n.slice(1)}),(0,E_.jsx)("p",{className:"text-sm opacity-80",children:"student"===n?"Access your courses and track your progress":"Manage your classes and student records"})]})},n)))})]});case 2:return(0,E_.jsxs)("div",{className:"space-y-6",children:[(0,E_.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Personal Information"}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,E_.jsxs)("div",{className:"space-y-2",children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-white/90",children:"RFID Card"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)("input",{type:"text",name:"rfidUid",value:e.rfidUid,readOnly:!0,className:`\n                      w-full px-4 py-3 pl-12\n                      bg-white/10 border border-white/20 rounded-xl\n                      text-white placeholder-white/50\n                      focus:outline-none focus:ring-2 focus:ring-white/30\n                      transition-all duration-200\n                      ${e.rfidUid?"border-green-400":"border-white/20"}\n                    `,placeholder:"Tap your RFID card..."}),(0,E_.jsx)(Fne,{className:`\n                      absolute left-3 top-3.5 w-5 h-5\n                      transition-colors duration-200\n                      ${e.rfidUid?"text-green-400":"text-white/50"}\n                    `}),e.rfidUid&&(0,E_.jsxs)("div",{className:"absolute right-3 top-3.5 flex items-center space-x-1",children:[(0,E_.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,E_.jsx)("span",{className:"text-sm text-green-400",children:"Card detected"})]})]}),(0,E_.jsx)("p",{className:"text-sm text-white/60 mt-1",children:"Place your RFID card near the reader"})]}),I("fullName","Full Name","text","Enter your full name"),I("idNumber","ID Number","text","Enter your ID number"),I("email","Email","email","Enter your email"),I("mobileNumber","Mobile Number","tel","Enter your mobile number")]})]});case 3:return(0,E_.jsxs)("div",{className:"space-y-6",children:[(0,E_.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Academic Details"}),(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[P("department","Department",n.departments.map((e=>({value:e,label:e})))),"student"===e.role&&(0,E_.jsxs)(E_.Fragment,{children:[P("yearLevel","Year Level",[{value:"1st Year",label:"1st Year"},{value:"2nd Year",label:"2nd Year"},{value:"3rd Year",label:"3rd Year"},{value:"4th Year",label:"4th Year"}]),P("section","Section",[{value:"",label:"Select a section"},{value:"H1",label:"Section H1"},{value:"H2",label:"Section H2"},{value:"H3",label:"Section H3"},{value:"G1",label:"Section G1"},{value:"G2",label:"Section G2"},{value:"G3",label:"Section G3"}]),e.subject&&w.length>0&&(0,E_.jsxs)("div",{className:"space-y-2",children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Available Schedules"}),(0,E_.jsx)("div",{className:"space-y-2",children:w.map(((n,r)=>(0,E_.jsxs)("div",{onClick:()=>t((e=>({...e,selectedSchedule:n,schedule:{days:[n.day],startTime:n.startTime,endTime:n.endTime},section:n.section}))),className:"cursor-pointer p-3 rounded-lg border "+(e.selectedSchedule===n?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-indigo-300"),children:[(0,E_.jsx)("p",{className:"font-medium",children:n.day}),(0,E_.jsxs)("p",{className:"text-sm text-gray-600",children:[n.startTime," - ",n.endTime]}),(0,E_.jsxs)("p",{className:"text-sm text-gray-600",children:["Section: ",n.section]})]},r)))})]}),P("major","Major",n.courses.map((e=>({value:e,label:e}))))]}),"instructor"===e.role&&I("yearsOfExperience","Years of Experience","number","Years of teaching experience")]})]});case 4:return(0,E_.jsxs)("div",{className:"space-y-6",children:[(0,E_.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Set Your Password"}),(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("div",{className:"relative",children:I("password","Password",c?"text":"password","Enter your password",(0,E_.jsx)("button",{type:"button",onClick:()=>u(!c),className:"absolute right-2 top-[38px] hover:text-white/80 transition-colors",children:c?(0,E_.jsx)(vA,{className:"absolute right-1 bottom-[12px] w-6 h-6"}):(0,E_.jsx)(xA,{className:"absolute right-1 bottom-[12px] w-6 h-6"})}))}),(0,E_.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(EA,{className:"w-4 h-4 "+(f.hasMinLength?"text-green-400":"text-gray-400")}),(0,E_.jsx)("span",{className:"text-sm "+(f.hasMinLength?"text-green-400":"text-gray-300"),children:"At least 8 characters"})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(EA,{className:"w-4 h-4 "+(f.hasUpper?"text-green-400":"text-gray-400")}),(0,E_.jsx)("span",{className:"text-sm "+(f.hasUpper?"text-green-400":"text-gray-300"),children:"One uppercase letter"})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(EA,{className:"w-4 h-4 "+(f.hasLower?"text-green-400":"text-gray-400")}),(0,E_.jsx)("span",{className:"text-sm "+(f.hasLower?"text-green-400":"text-gray-300"),children:"One lowercase letter"})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(EA,{className:"w-4 h-4 "+(f.hasNumber?"text-green-400":"text-gray-400")}),(0,E_.jsx)("span",{className:"text-sm "+(f.hasNumber?"text-green-400":"text-gray-300"),children:"One number"})]}),(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)(EA,{className:"w-4 h-4 "+(f.hasSpecial?"text-green-400":"text-gray-400")}),(0,E_.jsx)("span",{className:"text-sm "+(f.hasSpecial?"text-green-400":"text-gray-300"),children:"One special character"})]})]})]}),(0,E_.jsxs)("div",{className:"relative",children:[I("confirmPassword","Confirm Password",d?"text":"password","Confirm your password",(0,E_.jsx)("button",{type:"button",onClick:()=>h(!d),className:"absolute right-2 top-[38px] hover:text-white/80 transition-colors",children:d?(0,E_.jsx)(vA,{className:"absolute right-1 bottom-[12px]  w-6 h-6"}):(0,E_.jsx)(xA,{className:"absolute right-1 bottom-[12px]  w-6 h-6"})})),e.confirmPassword&&(0,E_.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,E_.jsx)(EA,{className:"w-4 h-4 "+(e.password===e.confirmPassword?"text-green-400":"text-red-400")}),(0,E_.jsx)("span",{className:"text-sm "+(e.password===e.confirmPassword?"text-green-400":"text-red-400"),children:e.password===e.confirmPassword?"Passwords match":"Passwords do not match"})]})]})]})]})}})(),(0,E_.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t border-white/10",children:[m>1&&(0,E_.jsx)("button",{type:"button",onClick:()=>{m>1&&g((e=>e-1))},className:"px-6 py-3 rounded-xl bg-white/10 text-white hover:bg-white/20 transition-colors",children:"Back"}),m<k.length?(0,E_.jsx)("button",{type:"button",onClick:N,className:"px-6 py-3 rounded-xl bg-white text-indigo-600 hover:bg-indigo-50 transition-colors ml-auto",children:"Continue"}):(0,E_.jsx)("button",{type:"submit",disabled:a,className:`\n                    px-6 py-3 rounded-xl bg-white text-indigo-600\n                    hover:bg-indigo-50 transition-colors ml-auto\n                    flex items-center space-x-2\n                    ${a?"opacity-80 cursor-not-allowed":""}\n                  `,children:a?(0,E_.jsxs)(E_.Fragment,{children:[(0,E_.jsx)(_A,{className:"w-5 h-5 animate-spin"}),(0,E_.jsx)("span",{children:"Creating Account..."})]}):(0,E_.jsxs)(E_.Fragment,{children:[(0,E_.jsx)("span",{children:"Complete Registration"}),(0,E_.jsx)(EA,{className:"w-5 h-5"})]})})]})]}),(0,E_.jsxs)("p",{className:"text-center text-white/80 mt-6",children:["Already have an account?"," ",(0,E_.jsx)(je,{to:"/login",className:"text-white font-medium hover:underline",children:"Sign in"})]})]})]})]})};function Une(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Vne=r.forwardRef(Une);function zne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const $ne=r.forwardRef(zne);function Hne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const qne=r.forwardRef(Hne),Wne=e=>{let{isOpen:t,onClose:n,onSubmit:i}=e;const[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)({name:"",code:"",instructorId:"",schedule:{days:[],startTime:"",endTime:""}});(0,r.useEffect)((()=>{y()}),[]);const y=async()=>{try{const e=await wm(gp(__,"teachers")),t=await Promise.all(e.docs.map((async e=>{const t=e.data(),n=t.schedules||[];return{id:e.id,...t,schedules:n.map((e=>({id:e.id||"",days:Array.isArray(e.days)?e.days:[],startTime:e.startTime||"",endTime:e.endTime||"",sectionCode:e.sectionCode||"",subject:e.subject||"",room:e.room||"",status:e.status||"active",semester:e.semester||"",academicYear:e.academicYear||""})))}})));s(t);const n=(await wm(gp(__,"students"))).docs.map((e=>({id:e.id,...e.data()})));l(n)}catch(py){console.error("Error fetching data:",py)}};(0,r.useEffect)((()=>{if(m.instructorId){const e=o.find((e=>e.id===m.instructorId));h((null===e||void 0===e?void 0:e.schedules)||[])}else h([])}),[m.instructorId,o]),(0,r.useEffect)((()=>{var e;m.schedule.days.length&&m.schedule.startTime&&m.schedule.endTime&&p((e=m.schedule,d.some((t=>{if(!t.days||!e.days)return!1;if(!e.days.some((e=>{var n;return null===(n=t.days)||void 0===n?void 0:n.includes(e)})))return!1;const n=new Date(`2000/01/01 ${e.startTime}`),r=new Date(`2000/01/01 ${e.endTime}`),i=new Date(`2000/01/01 ${t.startTime||"00:00"}`),o=new Date(`2000/01/01 ${t.endTime||"23:59"}`);return n>=i&&n<o||r>i&&r<=o||n<=i&&r>=o}))))}),[m.schedule,d]);return t?(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,E_.jsxs)(pA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,E_.jsx)("h2",{className:pne.h3,children:"Add New Section"}),(0,E_.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,E_.jsx)(hne,{className:"w-6 h-6"})})]}),(0,E_.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...m,studentIds:c})},className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Name"}),(0,E_.jsx)("input",{type:"text",value:m.name,onChange:e=>g({...m,name:e.target.value}),className:fne.input,required:!0})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Code"}),(0,E_.jsx)("input",{type:"text",value:m.code,onChange:e=>g({...m,code:e.target.value}),className:fne.input,required:!0})]})]}),(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Instructor"}),(0,E_.jsxs)("select",{value:m.instructorId,onChange:e=>g({...m,instructorId:e.target.value}),className:fne.input,required:!0,children:[(0,E_.jsx)("option",{value:"",children:"Select an instructor"}),o.map((e=>(0,E_.jsxs)("option",{value:e.id,children:[e.fullName," - ",e.department]},e.id)))]})]}),m.instructorId&&(0,E_.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,E_.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,E_.jsx)("h4",{className:"font-medium text-gray-900",children:"Current Teaching Load"})}),d.length>0?(0,E_.jsx)("div",{className:"divide-y divide-gray-200",children:d.map(((e,t)=>(0,E_.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,E_.jsx)("div",{className:"flex items-start justify-between",children:(0,E_.jsxs)("div",{className:"space-y-1",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("h5",{className:"font-medium text-gray-900",children:e.subject||"Untitled Subject"}),(0,E_.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.status||"active"})]}),(0,E_.jsxs)("p",{className:"text-sm text-gray-600",children:["Section: ",e.sectionCode||"No Code"]}),(0,E_.jsxs)("div",{className:"flex items-center text-sm text-gray-500 space-x-3",children:[(0,E_.jsxs)("span",{className:"flex items-center",children:[(0,E_.jsx)(bI,{className:"w-4 h-4 mr-1"}),e.startTime&&e.endTime?`${e.startTime} - ${e.endTime}`:"No time set"]}),(0,E_.jsxs)("span",{className:"flex items-center",children:[(0,E_.jsx)(wI,{className:"w-4 h-4 mr-1"}),Array.isArray(e.days)&&e.days.length>0?e.days.join(", "):"No days set"]}),e.room&&(0,E_.jsxs)("span",{className:"flex items-center",children:[(0,E_.jsx)(VP,{className:"w-4 h-4 mr-1"}),e.room]})]}),(0,E_.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:[e.semester,e.academicYear].filter(Boolean).join(" | ")||"No term info"})]})})},t)))}):(0,E_.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No current teaching schedules"})]})]}),(0,E_.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,E_.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,E_.jsx)("h4",{className:"font-medium text-gray-900",children:"Schedule Details"})}),(0,E_.jsxs)("div",{className:"p-4",children:[(0,E_.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Days"}),(0,E_.jsx)("select",{multiple:!0,value:m.schedule.days,onChange:e=>g({...m,schedule:{...m.schedule,days:Array.from(e.target.selectedOptions,(e=>e.value))}}),className:`${fne.input} h-32`,children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),(0,E_.jsx)("input",{type:"time",value:m.schedule.startTime,onChange:e=>g({...m,schedule:{...m.schedule,startTime:e.target.value}}),className:fne.input,required:!0})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),(0,E_.jsx)("input",{type:"time",value:m.schedule.endTime,onChange:e=>g({...m,schedule:{...m.schedule,endTime:e.target.value}}),className:fne.input,required:!0})]})]}),f&&(0,E_.jsxs)("div",{className:"mt-4 flex items-center p-3 bg-red-50 text-red-700 rounded-lg",children:[(0,E_.jsx)(qne,{className:"w-5 h-5 mr-2"}),(0,E_.jsx)("span",{className:"text-sm",children:"This schedule conflicts with the instructor's existing schedule"})]})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Students"}),(0,E_.jsx)("div",{className:"border rounded-lg max-h-48 overflow-y-auto p-2",children:a.map((e=>(0,E_.jsxs)("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,E_.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>{return t=e.id,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mr-3"}),(0,E_.jsxs)("span",{children:[e.fullName," - ",e.idNumber]})]},e.id)))})]}),(0,E_.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[(0,E_.jsx)("button",{type:"button",onClick:n,className:fne.button.secondary,children:"Cancel"}),(0,E_.jsx)("button",{type:"submit",className:fne.button.primary,children:"Create Section"})]})]})]})}):null};function Kne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Yne=r.forwardRef(Kne),Gne=e=>{let{isOpen:t,onClose:n,onSubmit:i,currentStudentIds:o,sectionName:s}=e;const[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!0),[m,g]=(0,r.useState)("all"),y=[...new Set(a.map((e=>e.major)))].sort();(0,r.useEffect)((()=>{t&&v()}),[t]);const v=async()=>{try{p(!0);const e=tm(gp(__,"students"),rm("role","==","student"),rm("section","in",[null,""])),t=(await wm(e)).docs.map((e=>{const t=e.data();return{id:e.id,fullName:t.fullName||"",email:t.email||"",idNumber:t.idNumber||"",major:t.major||"",mobileNumber:t.mobileNumber||"",role:t.role||"student",schedule:t.schedule||{days:[],endTime:"",startTime:""},section:t.section||null,sections:t.sections||[],yearLevel:t.yearLevel||"",createdAt:t.createdAt||""}})),n=t.sort(((e,t)=>e.fullName.localeCompare(t.fullName)));l(n),p(!1)}catch(py){console.error("Error fetching students:",py),p(!1)}},b=a.filter((e=>{var t;return!o.includes(e.id)&&(e.fullName.toLowerCase().includes(d.toLowerCase())||e.idNumber.toLowerCase().includes(d.toLowerCase())||e.major.toLowerCase().includes(d.toLowerCase())||e.email.toLowerCase().includes(d.toLowerCase())||(null===(t=e.yearLevel)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase())))})).filter((e=>"all"===m||e.major===m));return t?(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,E_.jsxs)(pA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h2",{className:pne.h3,children:"Add Students"}),(0,E_.jsxs)("p",{className:"text-sm text-gray-600",children:["to ",s]})]}),(0,E_.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,E_.jsx)(hne,{className:"w-6 h-6"})})]}),(0,E_.jsxs)("div",{className:"p-6",children:[(0,E_.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,E_.jsxs)("div",{className:"flex-1",children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Program"}),(0,E_.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:fne.input,children:[(0,E_.jsx)("option",{value:"all",children:"All Programs"}),y.map((e=>(0,E_.jsx)("option",{value:e,children:e},e)))]})]}),(0,E_.jsxs)("div",{className:"flex-1",children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Students"}),(0,E_.jsxs)("div",{className:"relative",children:[(0,E_.jsx)(Yne,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,E_.jsx)("input",{type:"text",placeholder:"Search by name, ID, course...",value:d,onChange:e=>h(e.target.value),className:`${fne.input} pl-10`})]})]})]}),(0,E_.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,E_.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:f?(0,E_.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}):b.length>0?(0,E_.jsx)("div",{className:"divide-y divide-gray-200",children:b.map((e=>(0,E_.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,E_.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>{return t=e.id,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mr-4 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,E_.jsxs)("div",{className:"flex-1",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("h4",{className:"font-medium text-gray-900",children:e.fullName}),(0,E_.jsx)("span",{className:"text-sm text-gray-500",children:e.yearLevel})]}),(0,E_.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[(0,E_.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("span",{className:"font-medium",children:e.idNumber}),(0,E_.jsx)("span",{children:"\u2022"}),(0,E_.jsx)("span",{children:e.major})]}),(0,E_.jsx)("div",{className:"text-xs text-gray-400 mt-0.5",children:e.email})]})]})]},e.id)))}):(0,E_.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No available students found"})})})]}),(0,E_.jsxs)("div",{className:"flex justify-end space-x-4 p-6 border-t",children:[(0,E_.jsx)("button",{type:"button",onClick:n,className:fne.button.secondary,children:"Cancel"}),(0,E_.jsx)("button",{onClick:e=>{e.preventDefault(),i(c)},disabled:0===c.length,className:`${fne.button.primary} ${0===c.length?"opacity-50 cursor-not-allowed":""}`,children:"Add Selected Students"})]})]})}):null},Xne=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null);(0,r.useEffect)((()=>{m()}),[]);const m=async()=>{try{const e=(await wm(gp(__,"sections"))).docs.map((e=>({id:e.id,...e.data()})));t(e);const n=(await wm(gp(__,"teachers"))).docs.map((e=>({id:e.id,...e.data()})));i(n);const r=(await wm(gp(__,"students"))).docs.map((e=>({id:e.id,...e.data()})));s(r),l(!1)}catch(py){console.error("Error fetching data:",py),l(!1)}};return(0,E_.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,E_.jsx)(XP,{}),(0,E_.jsx)("div",{className:"transition-all duration-300 ml-[80px] lg:ml-64 py-8",children:(0,E_.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,E_.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Section Management"}),(0,E_.jsxs)("button",{onClick:()=>u(!0),className:fne.button.primary,children:[(0,E_.jsx)(Vne,{className:"w-5 h-5 mr-2"}),"Add Section"]})]}),(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t=>{var r,i,s,a,l,c,u;return(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:t.name}),(0,E_.jsxs)("p",{className:"text-sm text-gray-500",children:["Code: ",t.code]})]}),(0,E_.jsx)("div",{className:"bg-indigo-100 p-2 rounded-lg",children:(0,E_.jsx)(BP,{className:"w-6 h-6 text-indigo-600"})})]}),(0,E_.jsxs)("div",{className:"mb-4",children:[(0,E_.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Instructor"}),(0,E_.jsxs)("div",{className:"flex items-center bg-gray-50 p-3 rounded-lg",children:[(0,E_.jsx)(eP,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,E_.jsx)("span",{className:"text-sm text-gray-900",children:(null===(r=n.find((e=>e.id===t.instructorId)))||void 0===r?void 0:r.fullName)||"Not assigned"})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,E_.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Students (",(null===(i=t.studentIds)||void 0===i?void 0:i.length)||0,")"]}),(0,E_.jsx)("button",{onClick:()=>{p(t),h(!0)},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Add Student"})]}),(0,E_.jsx)("div",{className:"space-y-2",children:null===(s=t.studentIds)||void 0===s?void 0:s.map((n=>{const r=o.find((e=>e.id===n));return(0,E_.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg",children:[(0,E_.jsx)("span",{className:"text-sm text-gray-900",children:null===r||void 0===r?void 0:r.fullName}),(0,E_.jsx)("button",{onClick:()=>{TA().fire({title:"Remove Student",text:`Are you sure you want to remove ${null===r||void 0===r?void 0:r.fullName} from this section?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Yes, remove",cancelButtonText:"Cancel"}).then((r=>{r.isConfirmed&&(async(t,n)=>{try{const r=yp(__,"sections",t),i=e.find((e=>e.id===t));if(i){await Sm(r,{studentIds:i.studentIds.filter((e=>e!==n))});const e=yp(__,"students",n);await Sm(e,{section:null}),TA().fire({icon:"success",title:"Student Removed",showConfirmButton:!1,timer:1500}),m()}}catch(py){console.error("Error removing student:",py),TA().fire({icon:"error",title:"Error",text:"Failed to remove student"})}})(t.id,n)}))},className:"text-red-500 hover:text-red-700 transition-colors",children:(0,E_.jsx)($ne,{className:"w-4 h-4"})})]},n)}))})]}),(0,E_.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,E_.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Schedule"}),(0,E_.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(a=t.schedule)||void 0===a||null===(l=a.days)||void 0===l?void 0:l.join(", "))||"No days set"," ",(0,E_.jsx)("br",{}),null!==(c=t.schedule)&&void 0!==c&&c.startTime&&null!==(u=t.schedule)&&void 0!==u&&u.endTime?`${t.schedule.startTime} - ${t.schedule.endTime}`:"No time set"]})]})]},t.id)}))})]})}),(0,E_.jsx)(Wne,{isOpen:c,onClose:()=>u(!1),onSubmit:async e=>{try{if("existing"===e.type){var t;const n=yp(__,"teachers",e.instructorId),r=await bm(n),i=((null===(t=r.data())||void 0===t?void 0:t.schedules)||[]).map((t=>t.id===e.existingScheduleId?{...t,sections:[...t.sections||[],{code:e.code,name:e.name,days:e.schedule.days,startTime:e.schedule.startTime,endTime:e.schedule.endTime,room:e.schedule.room,studentIds:e.studentIds}]}:t));await Sm(n,{schedules:i})}else await Cm(gp(__,"sections"),{...e,createdAt:(new Date).toISOString()});u(!1),m(),TA().fire({icon:"success",title:"Section Added Successfully",showConfirmButton:!1,timer:1500})}catch(py){console.error("Error adding section:",py),TA().fire({icon:"error",title:"Error",text:"Failed to add section"})}}}),(0,E_.jsx)(Gne,{isOpen:d,onClose:()=>{h(!1),p(null)},onSubmit:async e=>{try{if(!f)return;const t=yp(__,"sections",f.id);await Sm(t,{studentIds:[...f.studentIds,...e]});for(const n of e){const e=yp(__,"students",n);await Sm(e,{section:f.code})}h(!1),m(),TA().fire({icon:"success",title:"Students Added Successfully",showConfirmButton:!1,timer:1500})}catch(py){console.error("Error adding students:",py),TA().fire({icon:"error",title:"Error",text:"Failed to add students"})}},currentStudentIds:(null===f||void 0===f?void 0:f.studentIds)||[],sectionName:(null===f||void 0===f?void 0:f.name)||""})]})};function Qne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const Zne=r.forwardRef(Qne);function Jne(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const ere=r.forwardRef(Jne);function tre(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const nre=r.forwardRef(tre),rre=e=>{let{children:t,title:n,subtitle:r,icon:i,actions:o}=e;return(0,E_.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 via-purple-50/30 to-rose-50/30",children:[(0,E_.jsx)(XP,{}),(0,E_.jsxs)("div",{className:"flex-1 transition-all duration-300 ml-[80px] lg:ml-64 p-8 overflow-y-auto",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("h1",{className:"text-2xl font-bold text-blue-900 flex items-center",children:[i&&(0,E_.jsx)("div",{className:"w-8 h-8 mr-3 text-blue-600",children:i}),n]}),r&&(0,E_.jsx)("p",{className:"mt-1 text-blue-600/80",children:r})]}),o&&(0,E_.jsx)("div",{className:"flex items-center space-x-4",children:o})]}),(0,E_.jsx)("div",{className:"space-y-6",children:t})]})]})},ire=e=>{let{isOpen:t,onClose:n,onSubmit:i}=e;const[o,s]=(0,r.useState)({name:"",building:"",floor:"",capacity:0,type:"classroom",status:"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1},energyStatus:{lights:!1,aircon:!1,computers:!1}});return t?(0,E_.jsx)(pA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,E_.jsxs)(pA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden",children:[(0,E_.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,E_.jsx)("h2",{className:pne.h3,children:"Add New Room"}),(0,E_.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,E_.jsx)(hne,{className:"w-6 h-6"})})]}),(0,E_.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(o),s({name:"",building:"",floor:"",capacity:0,type:"classroom",status:"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1},energyStatus:{lights:!1,aircon:!1,computers:!1}})},className:"p-6 space-y-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Name/Number"}),(0,E_.jsx)("input",{type:"text",value:o.name,onChange:e=>s({...o,name:e.target.value}),className:fne.input,required:!0,placeholder:"e.g., Room 101"})]}),(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Building"}),(0,E_.jsx)("input",{type:"text",value:o.building,onChange:e=>s({...o,building:e.target.value}),className:fne.input,required:!0,placeholder:"e.g., Main Building"})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Floor"}),(0,E_.jsx)("input",{type:"text",value:o.floor,onChange:e=>s({...o,floor:e.target.value}),className:fne.input,required:!0,placeholder:"e.g., 1st Floor"})]})]}),(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Type"}),(0,E_.jsxs)("select",{value:o.type,onChange:e=>s({...o,type:e.target.value}),className:fne.input,required:!0,children:[(0,E_.jsx)("option",{value:"classroom",children:"Classroom"}),(0,E_.jsx)("option",{value:"laboratory",children:"Laboratory"}),(0,E_.jsx)("option",{value:"lecture_hall",children:"Lecture Hall"}),(0,E_.jsx)("option",{value:"conference_room",children:"Conference Room"})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),(0,E_.jsx)("input",{type:"number",min:"1",value:o.capacity,onChange:e=>s({...o,capacity:parseInt(e.target.value)}),className:fne.input,required:!0,placeholder:"e.g., 30"})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,E_.jsxs)("select",{value:o.status,onChange:e=>s({...o,status:e.target.value}),className:fne.input,required:!0,children:[(0,E_.jsx)("option",{value:"available",children:"Available"}),(0,E_.jsx)("option",{value:"occupied",children:"Occupied"}),(0,E_.jsx)("option",{value:"maintenance",children:"Under Maintenance"})]})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facilities"}),(0,E_.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,E_.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("input",{type:"checkbox",checked:o.facilities.hasProjector,onChange:e=>s({...o,facilities:{...o.facilities,hasProjector:e.target.checked}}),className:"rounded text-indigo-600"}),(0,E_.jsx)("span",{className:"text-sm text-gray-700",children:"Projector"})]}),(0,E_.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("input",{type:"checkbox",checked:o.facilities.hasAC,onChange:e=>s({...o,facilities:{...o.facilities,hasAC:e.target.checked}}),className:"rounded text-indigo-600"}),(0,E_.jsx)("span",{className:"text-sm text-gray-700",children:"Air Conditioning"})]}),(0,E_.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("input",{type:"checkbox",checked:o.facilities.hasComputers,onChange:e=>s({...o,facilities:{...o.facilities,hasComputers:e.target.checked}}),className:"rounded text-indigo-600"}),(0,E_.jsx)("span",{className:"text-sm text-gray-700",children:"Computers"})]}),(0,E_.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,E_.jsx)("input",{type:"checkbox",checked:o.facilities.hasWifi,onChange:e=>s({...o,facilities:{...o.facilities,hasWifi:e.target.checked}}),className:"rounded text-indigo-600"}),(0,E_.jsx)("span",{className:"text-sm text-gray-700",children:"WiFi"})]})]})]}),(0,E_.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,E_.jsx)("button",{type:"button",onClick:n,className:fne.button.secondary,children:"Cancel"}),(0,E_.jsx)("button",{type:"submit",className:fne.button.primary,children:"Add Room"})]})]})]})}):null},ore=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{m()}),[]);const m=async()=>{try{const e=(await wm(gp(__,"rooms"))).docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"",building:t.building||"",floor:t.floor||"",capacity:t.capacity||0,type:t.type||"classroom",status:t.status||"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1,...t.facilities||{}},energyStatus:{lights:!1,aircon:!1,computers:!1,...t.energyStatus||{}}}}));t(e),i(!1)}catch(py){console.error("Error fetching rooms:",py),TA().fire("Error","Failed to fetch rooms","error"),i(!1)}},g=async(n,r)=>{try{const i=e.find((e=>e.id===n));if(!i)return;const o={...i.energyStatus,[r]:!i.energyStatus[r]};await Sm(yp(__,"rooms",n),{energyStatus:o}),t((e=>e.map((e=>e.id===n?{...e,energyStatus:o}:e)))),TA().fire({icon:"success",title:`${r} ${o[r]?"turned on":"turned off"}`,showConfirmButton:!1,timer:1500})}catch(py){console.error("Error updating facility status:",py),TA().fire("Error","Failed to update facility status","error")}},y=e.filter((e=>{var t,n,r,i;const o="all"===c||(null===e||void 0===e?void 0:e.status)===c,s=""===d||null!==(t=null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(d.toLowerCase()))&&void 0!==t&&t||null!==(r=null===e||void 0===e||null===(i=e.building)||void 0===i?void 0:i.toLowerCase().includes(d.toLowerCase()))&&void 0!==r&&r;return o&&s}));return(0,E_.jsxs)(rre,{title:"Room Management",subtitle:"Manage and monitor classroom facilities",icon:(0,E_.jsx)(VP,{}),actions:(0,E_.jsxs)("button",{onClick:()=>p(!0),className:fne.button.primary,children:[(0,E_.jsx)(Vne,{className:"w-5 h-5 mr-2"}),"Add Room"]}),children:[(0,E_.jsx)("div",{className:fne.card,children:(0,E_.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-teal-700 mb-2",children:"Search Rooms"}),(0,E_.jsx)("input",{type:"text",placeholder:"Search by room number, name...",value:d,onChange:e=>h(e.target.value),className:fne.input})]}),(0,E_.jsxs)("div",{children:[(0,E_.jsx)("label",{className:"block text-sm font-medium text-teal-700 mb-2",children:"Filter by Status"}),(0,E_.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:fne.input,children:[(0,E_.jsx)("option",{value:"all",children:"All Status"}),(0,E_.jsx)("option",{value:"available",children:"Available"}),(0,E_.jsx)("option",{value:"occupied",children:"Occupied"}),(0,E_.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]})]})}),(0,E_.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((e=>(0,E_.jsxs)(pA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:fne.card,children:[(0,E_.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,E_.jsxs)("div",{children:[(0,E_.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Room ",e.name]}),(0,E_.jsx)("p",{className:"text-sm text-gray-500",children:e.name})]}),(0,E_.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("available"===e.status?"bg-green-100 text-green-800":"occupied"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,E_.jsxs)("div",{className:"space-y-4",children:[(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:"Building"}),(0,E_.jsx)("span",{className:"text-sm font-medium",children:e.building})]}),(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:"Floor"}),(0,E_.jsx)("span",{className:"text-sm font-medium",children:e.floor})]}),(0,E_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E_.jsx)("span",{className:"text-sm text-gray-600",children:"Capacity"}),(0,E_.jsxs)("span",{className:"text-sm font-medium",children:[e.capacity," seats"]})]})]}),(0,E_.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,E_.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Facilities Control"}),(0,E_.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,E_.jsxs)("button",{onClick:()=>g(e.id,"lights"),className:"flex flex-col items-center p-3 rounded-lg "+(e.energyStatus.lights?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"),children:[(0,E_.jsx)(Zne,{className:"w-6 h-6 mb-1"}),(0,E_.jsx)("span",{className:"text-xs",children:"Lights"})]}),(0,E_.jsxs)("button",{onClick:()=>g(e.id,"aircon"),className:"flex flex-col items-center p-3 rounded-lg "+(e.energyStatus.aircon?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:[(0,E_.jsx)(ere,{className:"w-6 h-6 mb-1"}),(0,E_.jsx)("span",{className:"text-xs",children:"AC"})]}),(0,E_.jsxs)("button",{onClick:()=>g(e.id,"computers"),className:"flex flex-col items-center p-3 rounded-lg "+(e.energyStatus.computers?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:[(0,E_.jsx)(nre,{className:"w-6 h-6 mb-1"}),(0,E_.jsx)("span",{className:"text-xs",children:"PCs"})]})]})]})]},e.id)))}),(0,E_.jsx)(ire,{isOpen:f,onClose:()=>p(!1),onSubmit:async e=>{try{await Cm(gp(__,"rooms"),{...e,energyStatus:{lights:!1,aircon:!1,computers:!1},createdAt:(new Date).toISOString()}),p(!1),m(),TA().fire({icon:"success",title:"Room Added Successfully",showConfirmButton:!1,timer:1500})}catch(py){console.error("Error adding room:",py),TA().fire({icon:"error",title:"Error",text:"Failed to add room"})}}})]})},sre=()=>(0,E_.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,E_.jsxs)("div",{className:"text-center",children:[(0,E_.jsx)("h1",{className:"text-4xl font-bold text-indigo-600 mb-4",children:"404"}),(0,E_.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Page not found"}),(0,E_.jsx)(je,{to:"/",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Go back home"})]})}),are=()=>(0,E_.jsx)(Ee,{children:(0,E_.jsx)(j_,{children:(0,E_.jsxs)(ve,{children:[(0,E_.jsx)(ge,{path:"/login",element:(0,E_.jsx)(jA,{})}),(0,E_.jsx)(ge,{path:"/reset-password",element:(0,E_.jsx)(kP,{})}),(0,E_.jsx)(ge,{path:"/adminregistration",element:(0,E_.jsx)(UO,{})}),(0,E_.jsx)(ge,{path:"/rfid-registration",element:(0,E_.jsx)(Bne,{})}),(0,E_.jsx)(ge,{path:"/admin/dashboard",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(FO,{})})}),(0,E_.jsx)(ge,{path:"/admin/users",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(fte,{})})}),(0,E_.jsx)(ge,{path:"/admin/reports",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(lte,{})})}),(0,E_.jsx)(ge,{path:"/admin/security-logs",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(XO,{})})}),(0,E_.jsx)(ge,{path:"/admin/settings",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(wne,{})})}),(0,E_.jsx)(ge,{path:"/admin/teachers",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(nne,{})})}),(0,E_.jsx)(ge,{path:"/admin/students",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(gne,{})})}),(0,E_.jsx)(ge,{path:"/admin/energyusage",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(BU,{})})}),(0,E_.jsx)(ge,{path:"/admin/schedules",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(jne,{})})}),(0,E_.jsx)(ge,{path:"/admin/subjects",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(Rne,{})})}),(0,E_.jsx)(ge,{path:"/admin/sections",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(Xne,{})})}),(0,E_.jsx)(ge,{path:"/admin/rooms",element:(0,E_.jsx)(BO,{roles:["admin"],children:(0,E_.jsx)(ore,{})})}),(0,E_.jsx)(ge,{path:"/instructor/dashboard",element:(0,E_.jsx)(BO,{roles:["instructor"],children:(0,E_.jsx)(CP,{})})}),(0,E_.jsx)(ge,{path:"/instructor/attendance",element:(0,E_.jsx)(BO,{roles:["instructor"],children:(0,E_.jsx)($O,{instructorfullName:""})})}),(0,E_.jsx)(ge,{path:"/instructor/subjects",element:(0,E_.jsx)(BO,{roles:["instructor"],children:(0,E_.jsx)(One,{})})}),(0,E_.jsx)(ge,{path:"/instructor/schedules",element:(0,E_.jsx)(BO,{roles:["instructor"],children:(0,E_.jsx)(Sne,{})})}),(0,E_.jsx)(ge,{path:"/instructor/classes",element:(0,E_.jsx)(BO,{roles:["instructor"],children:(0,E_.jsx)(_ne,{})})}),(0,E_.jsx)(ge,{path:"/instructor/settings",element:(0,E_.jsx)(BO,{roles:["instructor"],children:(0,E_.jsx)(wne,{})})}),(0,E_.jsx)(ge,{path:"/instructor/take-attendance",element:(0,E_.jsx)(BO,{roles:["instructor"],children:(0,E_.jsx)(Dne,{})})}),(0,E_.jsx)(ge,{path:"/students/dashboard",element:(0,E_.jsx)(BO,{roles:["student"],children:(0,E_.jsx)(ote,{})})}),(0,E_.jsx)(ge,{path:"/students/attendance",element:(0,E_.jsx)(BO,{roles:["student"],children:(0,E_.jsx)($O,{instructorfullName:""})})}),(0,E_.jsx)(ge,{path:"/",element:(0,E_.jsx)(me,{to:"/login",replace:!0})}),(0,E_.jsx)(ge,{path:"*",element:(0,E_.jsx)(sre,{})})]})})});o.createRoot(document.getElementById("root")).render((0,E_.jsx)(r.StrictMode,{children:(0,E_.jsx)(are,{})}))})()})();
//# sourceMappingURL=main.22a42af3.js.map