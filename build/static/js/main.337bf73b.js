/*! For license information please see main.337bf73b.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},64:function(e){e.exports=function(){"use strict";function e(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function t(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n(t,n){return t.get(e(t,n))}function r(e,n,r){t(e,n),n.set(e,r)}function i(t,n,r){return t.set(e(t,n),r),r}const s=100,o={},a=()=>{o.previousActiveElement instanceof HTMLElement?(o.previousActiveElement.focus(),o.previousActiveElement=null):document.body&&document.body.focus()},l=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;o.restoreFocusTimeout=setTimeout((()=>{a(),t()}),s),window.scrollTo(n,r)})),c="swal2-",u=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce(((e,t)=>(e[t]=c+t,e)),{}),d=["success","warning","info","question","error"].reduce(((e,t)=>(e[t]=c+t,e)),{}),h="SweetAlert2:",f=e=>e.charAt(0).toUpperCase()+e.slice(1),p=e=>{console.warn(`${h} ${"object"===typeof e?e.join(" "):e}`)},m=e=>{console.error(`${h} ${e}`)},g=[],y=e=>{g.includes(e)||(g.push(e),p(e))},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},b=e=>"function"===typeof e?e():e,x=e=>e&&"function"===typeof e.toPromise,w=e=>x(e)?e.toPromise():Promise.resolve(e),_=e=>e&&Promise.resolve(e)===e,S=()=>document.body.querySelector(`.${u.container}`),E=e=>{const t=S();return t?t.querySelector(e):null},j=e=>E(`.${e}`),k=()=>j(u.popup),C=()=>j(u.icon),T=()=>j(u["icon-content"]),N=()=>j(u.title),I=()=>j(u["html-container"]),A=()=>j(u.image),O=()=>j(u["progress-steps"]),P=()=>j(u["validation-message"]),M=()=>E(`.${u.actions} .${u.confirm}`),D=()=>E(`.${u.actions} .${u.cancel}`),R=()=>E(`.${u.actions} .${u.deny}`),L=()=>j(u["input-label"]),F=()=>E(`.${u.loader}`),B=()=>j(u.actions),U=()=>j(u.footer),V=()=>j(u["timer-progress-bar"]),z=()=>j(u.close),$='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',H=()=>{const e=k();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")||"0"),r=parseInt(t.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=e.querySelectorAll($),i=Array.from(r).filter((e=>"-1"!==e.getAttribute("tabindex")));return[...new Set(n.concat(i))].filter((e=>ue(e)))},W=()=>G(document.body,u.shown)&&!G(document.body,u["toast-shown"])&&!G(document.body,u["no-backdrop"]),q=()=>{const e=k();return!!e&&G(e,u.toast)},K=()=>{const e=k();return!!e&&e.hasAttribute("data-loading")},Y=(e,t)=>{if(e.textContent="",t){const n=(new DOMParser).parseFromString(t,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((t=>{e.appendChild(t)}));const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},G=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},X=(e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(u).includes(n)||Object.values(d).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))},Q=(e,t,n)=>{if(X(e,t),!t.customClass)return;const r=t.customClass[n];r&&("string"===typeof r||r.forEach?te(e,r):p(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`))},Z=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${u.popup} > .${u[t]}`);case"checkbox":return e.querySelector(`.${u.popup} > .${u.checkbox} input`);case"radio":return e.querySelector(`.${u.popup} > .${u.radio} input:checked`)||e.querySelector(`.${u.popup} > .${u.radio} input:first-child`);case"range":return e.querySelector(`.${u.popup} > .${u.range} input`);default:return e.querySelector(`.${u.popup} > .${u.input}`)}},J=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},ee=(e,t,n)=>{e&&t&&("string"===typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},te=(e,t)=>{ee(e,t,!0)},ne=(e,t)=>{ee(e,t,!1)},re=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const e=n[r];if(e instanceof HTMLElement&&G(e,t))return e}},ie=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"===typeof n?`${n}px`:n):e.style.removeProperty(t)},se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},oe=e=>{e&&(e.style.display="none")},ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver((()=>{ce(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},le=(e,t,n,r)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,r)},ce=function(e,t){t?se(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):oe(e)},ue=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),de=()=>!ue(M())&&!ue(R())&&!ue(D()),he=e=>!!(e.scrollHeight>e.clientHeight),fe=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},pe=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=V();n&&ue(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"}),10))},me=()=>{const e=V();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`},ge=()=>"undefined"===typeof window||"undefined"===typeof document,ye=`\n <div aria-labelledby="${u.title}" aria-describedby="${u["html-container"]}" class="${u.popup}" tabindex="-1">\n   <button type="button" class="${u.close}"></button>\n   <ul class="${u["progress-steps"]}"></ul>\n   <div class="${u.icon}"></div>\n   <img class="${u.image}" />\n   <h2 class="${u.title}" id="${u.title}"></h2>\n   <div class="${u["html-container"]}" id="${u["html-container"]}"></div>\n   <input class="${u.input}" id="${u.input}" />\n   <input type="file" class="${u.file}" />\n   <div class="${u.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${u.select}" id="${u.select}"></select>\n   <div class="${u.radio}"></div>\n   <label class="${u.checkbox}">\n     <input type="checkbox" id="${u.checkbox}" />\n     <span class="${u.label}"></span>\n   </label>\n   <textarea class="${u.textarea}" id="${u.textarea}"></textarea>\n   <div class="${u["validation-message"]}" id="${u["validation-message"]}"></div>\n   <div class="${u.actions}">\n     <div class="${u.loader}"></div>\n     <button type="button" class="${u.confirm}"></button>\n     <button type="button" class="${u.deny}"></button>\n     <button type="button" class="${u.cancel}"></button>\n   </div>\n   <div class="${u.footer}"></div>\n   <div class="${u["timer-progress-bar-container"]}">\n     <div class="${u["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ve=()=>{const e=S();return!!e&&(e.remove(),ne([document.documentElement,document.body],[u["no-backdrop"],u["toast-shown"],u["has-column"]]),!0)},be=()=>{o.currentInstance.resetValidationMessage()},xe=()=>{const e=k(),t=re(e,u.input),n=re(e,u.file),r=e.querySelector(`.${u.range} input`),i=e.querySelector(`.${u.range} output`),s=re(e,u.select),o=e.querySelector(`.${u.checkbox} input`),a=re(e,u.textarea);t.oninput=be,n.onchange=be,s.onchange=be,o.onchange=be,a.oninput=be,r.oninput=()=>{be(),i.value=r.value},r.onchange=()=>{be(),i.value=r.value}},we=e=>"string"===typeof e?document.querySelector(e):e,_e=e=>{const t=k();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},Se=e=>{"rtl"===window.getComputedStyle(e).direction&&te(S(),u.rtl)},Ee=e=>{const t=ve();if(ge())return void m("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=u.container,t&&te(n,u["no-transition"]),Y(n,ye),n.dataset.swal2Theme=e.theme;const r=we(e.target);r.appendChild(n),_e(e),Se(r),xe()},je=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"===typeof e?ke(e,t):e&&Y(t,e)},ke=(e,t)=>{e.jquery?Ce(t,e):Y(t,e.toString())},Ce=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},Te=(e,t)=>{const n=B(),r=F();n&&r&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?se(n):oe(n),Q(n,t,"actions"),Ne(n,r,t),Y(r,t.loaderHtml||""),Q(r,t,"loader"))};function Ne(e,t,n){const r=M(),i=R(),s=D();r&&i&&s&&(Ae(r,"confirm",n),Ae(i,"deny",n),Ae(s,"cancel",n),Ie(r,i,s,n),n.reverseButtons&&(n.toast?(e.insertBefore(s,r),e.insertBefore(i,r)):(e.insertBefore(s,t),e.insertBefore(i,t),e.insertBefore(r,t))))}function Ie(e,t,n,r){r.buttonsStyling?(te([e,t,n],u.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,te(e,u["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,te(t,u["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,te(n,u["default-outline"]))):ne([e,t,n],u.styled)}function Ae(e,t,n){const r=f(t);ce(e,n[`show${r}Button`],"inline-block"),Y(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=u[t],Q(e,n,`${t}Button`)}const Oe=(e,t)=>{const n=z();n&&(Y(n,t.closeButtonHtml||""),Q(n,t,"closeButton"),ce(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},Pe=(e,t)=>{const n=S();n&&(Me(n,t.backdrop),De(n,t.position),Re(n,t.grow),Q(n,t,"container"))};function Me(e,t){"string"===typeof t?e.style.background=t:t||te([document.documentElement,document.body],u["no-backdrop"])}function De(e,t){t&&(t in u?te(e,u[t]):(p('The "position" parameter is not valid, defaulting to "center"'),te(e,u.center)))}function Re(e,t){t&&te(e,u[`grow-${t}`])}var Le={innerParams:new WeakMap,domCache:new WeakMap};const Fe=["input","file","range","select","radio","checkbox","textarea"],Be=(e,t)=>{const n=k();if(!n)return;const r=Le.innerParams.get(e),i=!r||t.input!==r.input;Fe.forEach((e=>{const r=re(n,u[e]);r&&(ze(e,t.inputAttributes),r.className=u[e],i&&oe(r))})),t.input&&(i&&Ue(t),$e(t))},Ue=e=>{if(!e.input)return;if(!Ye[e.input])return void m(`Unexpected type of input! Expected ${Object.keys(Ye).join(" | ")}, got "${e.input}"`);const t=qe(e.input);if(!t)return;const n=Ye[e.input](t,e);se(t),e.inputAutoFocus&&setTimeout((()=>{J(n)}))},Ve=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},ze=(e,t)=>{const n=k();if(!n)return;const r=Z(n,e);if(r){Ve(r);for(const e in t)r.setAttribute(e,t[e])}},$e=e=>{if(!e.input)return;const t=qe(e.input);t&&Q(t,e,"input")},He=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},We=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=u["input-label"];r.setAttribute("for",e.id),r.className=i,"object"===typeof n.customClass&&te(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},qe=e=>{const t=k();if(t)return re(t,u[e]||u.input)},Ke=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:_(t)||p(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Ye={};Ye.text=Ye.email=Ye.password=Ye.number=Ye.tel=Ye.url=Ye.search=Ye.date=Ye["datetime-local"]=Ye.time=Ye.week=Ye.month=(e,t)=>(Ke(e,t.inputValue),We(e,e,t),He(e,t),e.type=t.input,e),Ye.file=(e,t)=>(We(e,e,t),He(e,t),e),Ye.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return Ke(n,t.inputValue),n.type=t.input,Ke(r,t.inputValue),We(n,e,t),e},Ye.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");Y(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return We(e,e,t),e},Ye.radio=e=>(e.textContent="",e),Ye.checkbox=(e,t)=>{const n=Z(k(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return Y(r,t.inputPlaceholder||t.inputLabel),n},Ye.textarea=(e,t)=>{Ke(e,t.inputValue),He(e,t),We(e,e,t);const n=e=>parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight);return setTimeout((()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(k()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?k().style.width=`${i}px`:ie(k(),"width",t.width)})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const Ge=(e,t)=>{const n=I();n&&(ae(n),Q(n,t,"htmlContainer"),t.html?(je(t.html,n),se(n,"block")):t.text?(n.textContent=t.text,se(n,"block")):oe(n),Be(e,t))},Xe=(e,t)=>{const n=U();n&&(ae(n),ce(n,t.footer,"block"),t.footer&&je(t.footer,n),Q(n,t,"footer"))},Qe=(e,t)=>{const n=Le.innerParams.get(e),r=C();if(r){if(n&&t.icon===n.icon)return nt(r,t),void Ze(r,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(d).indexOf(t.icon))return m(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),void oe(r);se(r),nt(r,t),Ze(r,t),te(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Je)}else oe(r)}},Ze=(e,t)=>{for(const[n,r]of Object.entries(d))t.icon!==n&&ne(e,r);te(e,t.icon&&d[t.icon]),rt(e,t),Je(),Q(e,t,"icon")},Je=()=>{const e=k();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},et='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',tt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',nt=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=it(t.iconHtml):"success"===t.icon?(r=et,n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?r=tt:t.icon&&(r=it({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&Y(e,r)},rt=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])le(e,n,"background-color",t.iconColor);le(e,".swal2-success-ring","border-color",t.iconColor)}},it=e=>`<div class="${u["icon-content"]}">${e}</div>`,st=(e,t)=>{const n=A();n&&(t.imageUrl?(se(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),ie(n,"width",t.imageWidth),ie(n,"height",t.imageHeight),n.className=u.image,Q(n,t,"image")):oe(n))};let ot=!1,at=0,lt=0,ct=0,ut=0;const dt=e=>{e.addEventListener("mousedown",ft),document.body.addEventListener("mousemove",pt),e.addEventListener("mouseup",mt),e.addEventListener("touchstart",ft),document.body.addEventListener("touchmove",pt),e.addEventListener("touchend",mt)},ht=e=>{e.removeEventListener("mousedown",ft),document.body.removeEventListener("mousemove",pt),e.removeEventListener("mouseup",mt),e.removeEventListener("touchstart",ft),document.body.removeEventListener("touchmove",pt),e.removeEventListener("touchend",mt)},ft=e=>{const t=k();if(e.target===t||C().contains(e.target)){ot=!0;const n=gt(e);at=n.clientX,lt=n.clientY,ct=parseInt(t.style.insetInlineStart)||0,ut=parseInt(t.style.insetBlockStart)||0,te(t,"swal2-dragging")}},pt=e=>{const t=k();if(ot){let{clientX:n,clientY:r}=gt(e);t.style.insetInlineStart=`${ct+(n-at)}px`,t.style.insetBlockStart=`${ut+(r-lt)}px`}},mt=()=>{const e=k();ot=!1,ne(e,"swal2-dragging")},gt=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},yt=(e,t)=>{const n=S(),r=k();if(n&&r){if(t.toast){ie(n,"width",t.width),r.style.width="100%";const e=F();e&&r.insertBefore(e,C())}else ie(r,"width",t.width);ie(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),oe(P()),vt(r,t),t.draggable&&!t.toast?(te(r,u.draggable),dt(r)):(ne(r,u.draggable),ht(r))}},vt=(e,t)=>{const n=t.showClass||{};e.className=`${u.popup} ${ue(e)?n.popup:""}`,t.toast?(te([document.documentElement,document.body],u["toast-shown"]),te(e,u.toast)):te(e,u.modal),Q(e,t,"popup"),"string"===typeof t.customClass&&te(e,t.customClass),t.icon&&te(e,u[`icon-${t.icon}`])},bt=(e,t)=>{const n=O();if(!n)return;const{progressSteps:r,currentProgressStep:i}=t;r&&0!==r.length&&void 0!==i?(se(n),n.textContent="",i>=r.length&&p("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((e,s)=>{const o=xt(e);if(n.appendChild(o),s===i&&te(o,u["active-progress-step"]),s!==r.length-1){const e=wt(t);n.appendChild(e)}}))):oe(n)},xt=e=>{const t=document.createElement("li");return te(t,u["progress-step"]),Y(t,e),t},wt=e=>{const t=document.createElement("li");return te(t,u["progress-step-line"]),e.progressStepsDistance&&ie(t,"width",e.progressStepsDistance),t},_t=(e,t)=>{const n=N();n&&(ae(n),ce(n,t.title||t.titleText,"block"),t.title&&je(t.title,n),t.titleText&&(n.innerText=t.titleText),Q(n,t,"title"))},St=(e,t)=>{yt(e,t),Pe(e,t),bt(e,t),Qe(e,t),st(e,t),_t(e,t),Oe(e,t),Ge(e,t),Te(e,t),Xe(e,t);const n=k();"function"===typeof t.didRender&&n&&t.didRender(n),o.eventEmitter.emit("didRender",n)},Et=()=>ue(k()),jt=()=>{var e;return null===(e=M())||void 0===e?void 0:e.click()},kt=()=>{var e;return null===(e=R())||void 0===e?void 0:e.click()},Ct=()=>{var e;return null===(e=D())||void 0===e?void 0:e.click()},Tt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Nt=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},It=(e,t,n)=>{Nt(e),t.toast||(e.keydownHandler=e=>Mt(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:k(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},At=(e,t)=>{var n;const r=H();if(r.length)return(e+=t)===r.length?e=0:-1===e&&(e=r.length-1),void r[e].focus();null===(n=k())||void 0===n||n.focus()},Ot=["ArrowRight","ArrowDown"],Pt=["ArrowLeft","ArrowUp"],Mt=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Dt(t,e):"Tab"===t.key?Rt(t):[...Ot,...Pt].includes(t.key)?Lt(t.key):"Escape"===t.key&&Ft(t,e,n)))},Dt=(e,t)=>{if(!b(t.allowEnterKey))return;const n=Z(k(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;jt(),e.preventDefault()}},Rt=e=>{const t=e.target,n=H();let r=-1;for(let i=0;i<n.length;i++)if(t===n[i]){r=i;break}e.shiftKey?At(r,-1):At(r,1),e.stopPropagation(),e.preventDefault()},Lt=e=>{const t=B(),n=M(),r=R(),i=D();if(!t||!n||!r||!i)return;const s=[n,r,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const o=Ot.includes(e)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let e=0;e<t.children.length;e++){if(a=a[o],!a)return;if(a instanceof HTMLButtonElement&&ue(a))break}a instanceof HTMLButtonElement&&a.focus()}},Ft=(e,t,n)=>{b(t.allowEscapeKey)&&(e.preventDefault(),n(Tt.esc))};var Bt={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Ut=()=>{const e=S();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))}))},Vt=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},zt="undefined"!==typeof window&&!!window.GestureEvent,$t=()=>{if(zt&&!G(document.body,u.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",te(document.body,u.iosfix),Ht()}},Ht=()=>{const e=S();if(!e)return;let t;e.ontouchstart=e=>{t=Wt(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Wt=e=>{const t=e.target,n=S(),r=I();return!(!n||!r)&&!qt(e)&&!Kt(e)&&(t===n||!he(n)&&t instanceof HTMLElement&&"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&(!he(r)||!r.contains(t)))},qt=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Kt=e=>e.touches&&e.touches.length>1,Yt=()=>{if(G(document.body,u.iosfix)){const e=parseInt(document.body.style.top,10);ne(document.body,u.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},Gt=()=>{const e=document.createElement("div");e.className=u["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Xt=null;const Qt=e=>{null===Xt&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(Xt=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Xt+Gt()}px`)},Zt=()=>{null!==Xt&&(document.body.style.paddingRight=`${Xt}px`,Xt=null)};function Jt(e,t,n,r){q()?cn(e,r):(l(n).then((()=>cn(e,r))),Nt(o)),zt?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),W()&&(Zt(),Yt(),Vt()),en()}function en(){ne([document.documentElement,document.body],[u.shown,u["height-auto"],u["no-backdrop"],u["toast-shown"]])}function tn(e){e=on(e);const t=Bt.swalPromiseResolve.get(this),n=nn(this);this.isAwaitingPromise?e.isDismissed||(sn(this),t(e)):n&&t(e)}const nn=e=>{const t=k();if(!t)return!1;const n=Le.innerParams.get(e);if(!n||G(t,n.hideClass.popup))return!1;ne(t,n.showClass.popup),te(t,n.hideClass.popup);const r=S();return ne(r,n.showClass.backdrop),te(r,n.hideClass.backdrop),an(e,t,n),!0};function rn(e){const t=Bt.swalPromiseReject.get(this);sn(this),t&&t(e)}const sn=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Le.innerParams.get(e)||e._destroy())},on=e=>"undefined"===typeof e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),an=(e,t,n)=>{var r;const i=S(),s=fe(t);"function"===typeof n.willClose&&n.willClose(t),null===(r=o.eventEmitter)||void 0===r||r.emit("willClose",t),s?ln(e,t,i,n.returnFocus,n.didClose):Jt(e,i,n.returnFocus,n.didClose)},ln=(e,t,n,r,i)=>{o.swalCloseEventFinishedCallback=Jt.bind(null,e,n,r,i);const s=function(e){var n;e.target===t&&(null===(n=o.swalCloseEventFinishedCallback)||void 0===n||n.call(o),delete o.swalCloseEventFinishedCallback,t.removeEventListener("animationend",s),t.removeEventListener("transitionend",s))};t.addEventListener("animationend",s),t.addEventListener("transitionend",s)},cn=(e,t)=>{setTimeout((()=>{var n;"function"===typeof t&&t.bind(e.params)(),null===(n=o.eventEmitter)||void 0===n||n.emit("didClose"),e._destroy&&e._destroy()}))},un=e=>{let t=k();if(t||new fi,t=k(),!t)return;const n=F();q()?oe(C()):dn(t,e),se(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},dn=(e,t)=>{const n=B(),r=F();n&&r&&(!t&&ue(M())&&(t=M()),se(n),t&&(oe(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),te([e,n],u.loading))},hn=(e,t)=>{"select"===t.input||"radio"===t.input?yn(e,t):["text","email","number","tel","textarea"].some((e=>e===t.input))&&(x(t.inputValue)||_(t.inputValue))&&(un(M()),vn(e,t))},fn=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return pn(n);case"radio":return mn(n);case"file":return gn(n);default:return t.inputAutoTrim?n.value.trim():n.value}},pn=e=>e.checked?1:0,mn=e=>e.checked?e.value:null,gn=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,yn=(e,t)=>{const n=k();if(!n)return;const r=e=>{"select"===t.input?bn(n,wn(e),t):"radio"===t.input&&xn(n,wn(e),t)};x(t.inputOptions)||_(t.inputOptions)?(un(M()),w(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"===typeof t.inputOptions?r(t.inputOptions):m("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof t.inputOptions)},vn=(e,t)=>{const n=e.getInput();n&&(oe(n),w(t.inputValue).then((r=>{n.value="number"===t.input?`${parseFloat(r)||0}`:`${r}`,se(n),n.focus(),e.hideLoading()})).catch((t=>{m(`Error in inputValue promise: ${t}`),n.value="",se(n),n.focus(),e.hideLoading()})))};function bn(e,t,n){const r=re(e,u.select);if(!r)return;const i=(e,t,r)=>{const i=document.createElement("option");i.value=r,Y(i,t),i.selected=_n(r,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach((t=>i(e,t[1],t[0])))}else i(r,n,t)})),r.focus()}function xn(e,t,n){const r=re(e,u.radio);if(!r)return;t.forEach((e=>{const t=e[0],i=e[1],s=document.createElement("input"),o=document.createElement("label");s.type="radio",s.name=u.radio,s.value=t,_n(t,n.inputValue)&&(s.checked=!0);const a=document.createElement("span");Y(a,i),a.className=u.label,o.appendChild(s),o.appendChild(a),r.appendChild(o)}));const i=r.querySelectorAll("input");i.length&&i[0].focus()}const wn=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"===typeof r&&(r=wn(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"===typeof r&&(r=wn(r)),t.push([n,r])})),t},_n=(e,t)=>!!t&&t.toString()===e.toString(),Sn=e=>{const t=Le.innerParams.get(e);e.disableButtons(),t.input?kn(e,"confirm"):An(e,!0)},En=e=>{const t=Le.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?kn(e,"deny"):Tn(e,!1)},jn=(e,t)=>{e.disableButtons(),t(Tt.cancel)},kn=(e,t)=>{const n=Le.innerParams.get(e);if(!n.input)return void m(`The "input" parameter is needed to be set when using returnInputValueOn${f(t)}`);const r=e.getInput(),i=fn(e,n);n.inputValidator?Cn(e,i,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===t?Tn(e,i):An(e,i)},Cn=(e,t,n)=>{const r=Le.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>w(r.inputValidator(t,r.validationMessage)))).then((r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?Tn(e,t):An(e,t)}))},Tn=(e,t)=>{const n=Le.innerParams.get(e||void 0);n.showLoaderOnDeny&&un(R()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((()=>w(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),sn(e)):e.close({isDenied:!0,value:"undefined"===typeof n?t:n})})).catch((t=>In(e||void 0,t)))):e.close({isDenied:!0,value:t})},Nn=(e,t)=>{e.close({isConfirmed:!0,value:t})},In=(e,t)=>{e.rejectPromise(t)},An=(e,t)=>{const n=Le.innerParams.get(e||void 0);n.showLoaderOnConfirm&&un(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((()=>w(n.preConfirm(t,n.validationMessage)))).then((n=>{ue(P())||!1===n?(e.hideLoading(),sn(e)):Nn(e,"undefined"===typeof n?t:n)})).catch((t=>In(e||void 0,t)))):Nn(e,t)};function On(){const e=Le.innerParams.get(this);if(!e)return;const t=Le.domCache.get(this);oe(t.loader),q()?e.icon&&se(C()):Pn(t),ne([t.popup,t.actions],u.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Pn=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?se(t[0],"inline-block"):de()&&oe(e.actions)};function Mn(){const e=Le.innerParams.get(this),t=Le.domCache.get(this);return t?Z(t.popup,e.input):null}function Dn(e,t,n){const r=Le.domCache.get(e);t.forEach((e=>{r[e].disabled=n}))}function Rn(e,t){const n=k();if(n&&e)if("radio"===e.type){const e=n.querySelectorAll(`[name="${u.radio}"]`);for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function Ln(){Dn(this,["confirmButton","denyButton","cancelButton"],!1)}function Fn(){Dn(this,["confirmButton","denyButton","cancelButton"],!0)}function Bn(){Rn(this.getInput(),!1)}function Un(){Rn(this.getInput(),!0)}function Vn(e){const t=Le.domCache.get(this),n=Le.innerParams.get(this);Y(t.validationMessage,e),t.validationMessage.className=u["validation-message"],n.customClass&&n.customClass.validationMessage&&te(t.validationMessage,n.customClass.validationMessage),se(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",u["validation-message"]),J(r),te(r,u.inputerror))}function zn(){const e=Le.domCache.get(this);e.validationMessage&&oe(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),ne(t,u.inputerror))}const $n={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Hn=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Wn={allowEnterKey:void 0},qn=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Kn=e=>Object.prototype.hasOwnProperty.call($n,e),Yn=e=>-1!==Hn.indexOf(e),Gn=e=>Wn[e],Xn=e=>{Kn(e)||p(`Unknown parameter "${e}"`)},Qn=e=>{qn.includes(e)&&p(`The parameter "${e}" is incompatible with toasts`)},Zn=e=>{const t=Gn(e);t&&v(e,t)},Jn=e=>{!1===e.backdrop&&e.allowOutsideClick&&p('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","borderless"].includes(e.theme)&&p(`Invalid theme "${e.theme}". Expected "light", "dark", "auto", or "borderless"`);for(const t in e)Xn(t),e.toast&&Qn(t),Zn(t)};function er(e){const t=S(),n=k(),r=Le.innerParams.get(this);if(!n||G(n,r.hideClass.popup))return void p("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const i=tr(e),s=Object.assign({},r,i);Jn(s),t.dataset.swal2Theme=s.theme,St(this,s),Le.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const tr=e=>{const t={};return Object.keys(e).forEach((n=>{Yn(n)?t[n]=e[n]:p(`Invalid parameter to update: ${n}`)})),t};function nr(){const e=Le.domCache.get(this),t=Le.innerParams.get(this);t?(e.popup&&o.swalCloseEventFinishedCallback&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback),"function"===typeof t.didDestroy&&t.didDestroy(),o.eventEmitter.emit("didDestroy"),rr(this)):ir(this)}const rr=e=>{ir(e),delete e.params,delete o.keydownHandler,delete o.keydownTarget,delete o.currentInstance},ir=e=>{e.isAwaitingPromise?(sr(Le,e),e.isAwaitingPromise=!0):(sr(Bt,e),sr(Le,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},sr=(e,t)=>{for(const n in e)e[n].delete(t)};var or=Object.freeze({__proto__:null,_destroy:nr,close:tn,closeModal:tn,closePopup:tn,closeToast:tn,disableButtons:Fn,disableInput:Un,disableLoading:On,enableButtons:Ln,enableInput:Bn,getInput:Mn,handleAwaitingPromise:sn,hideLoading:On,rejectPromise:rn,resetValidationMessage:zn,showValidationMessage:Vn,update:er});const ar=(e,t,n)=>{e.toast?lr(e,t,n):(dr(t),hr(t),fr(e,t,n))},lr=(e,t,n)=>{t.popup.onclick=()=>{e&&(cr(e)||e.timer||e.input)||n(Tt.close)}},cr=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let ur=!1;const dr=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(ur=!0)}}},hr=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(ur=!0)}}},fr=(e,t,n)=>{t.container.onclick=r=>{ur?ur=!1:r.target===t.container&&b(e.allowOutsideClick)&&n(Tt.backdrop)}},pr=e=>"object"===typeof e&&e.jquery,mr=e=>e instanceof Element||pr(e),gr=e=>{const t={};return"object"!==typeof e[0]||mr(e[0])?["title","html","icon"].forEach(((n,r)=>{const i=e[r];"string"===typeof i||mr(i)?t[n]=i:void 0!==i&&m(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)})):Object.assign(t,e[0]),t};function yr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function vr(e){class t extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}return t}const br=()=>o.timeout&&o.timeout.getTimerLeft(),xr=()=>{if(o.timeout)return me(),o.timeout.stop()},wr=()=>{if(o.timeout){const e=o.timeout.start();return pe(e),e}},_r=()=>{const e=o.timeout;return e&&(e.running?xr():wr())},Sr=e=>{if(o.timeout){const t=o.timeout.increase(e);return pe(t,!0),t}},Er=()=>!(!o.timeout||!o.timeout.isRunning());let jr=!1;const kr={};function Cr(){kr[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,jr||(document.body.addEventListener("click",Tr),jr=!0)}const Tr=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in kr){const n=t.getAttribute(e);if(n)return void kr[e].fire({template:n})}};class Nr{constructor(){this.events={}}_getHandlersByEventName(e){return"undefined"===typeof this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const r=function(){n.removeListener(e,r);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];t.apply(n,s)};this.on(e,r)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,n)}catch(m){console.error(m)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}}o.eventEmitter=new Nr;const Ir=(e,t)=>{o.eventEmitter.on(e,t)},Ar=(e,t)=>{o.eventEmitter.once(e,t)},Or=(e,t)=>{e?t?o.eventEmitter.removeListener(e,t):o.eventEmitter.removeAllListeners(e):o.eventEmitter.reset()};var Pr=Object.freeze({__proto__:null,argsToParams:gr,bindClickHandler:Cr,clickCancel:Ct,clickConfirm:jt,clickDeny:kt,enableLoading:un,fire:yr,getActions:B,getCancelButton:D,getCloseButton:z,getConfirmButton:M,getContainer:S,getDenyButton:R,getFocusableElements:H,getFooter:U,getHtmlContainer:I,getIcon:C,getIconContent:T,getImage:A,getInputLabel:L,getLoader:F,getPopup:k,getProgressSteps:O,getTimerLeft:br,getTimerProgressBar:V,getTitle:N,getValidationMessage:P,increaseTimer:Sr,isDeprecatedParameter:Gn,isLoading:K,isTimerRunning:Er,isUpdatableParameter:Yn,isValidParameter:Kn,isVisible:Et,mixin:vr,off:Or,on:Ir,once:Ar,resumeTimer:wr,showLoading:un,stopTimer:xr,toggleTimer:_r});class Mr{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Dr=["swal-title","swal-html","swal-footer"],Rr=e=>{const t="string"===typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return Hr(n),Object.assign(Lr(n),Fr(n),Br(n),Ur(n),Vr(n),zr(n),$r(n,Dr))},Lr=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach((e=>{Wr(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&("boolean"===typeof $n[n]?t[n]="false"!==r:"object"===typeof $n[n]?t[n]=JSON.parse(r):t[n]=r)})),t},Fr=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]=new Function(`return ${r}`)())})),t},Br=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach((e=>{Wr(e,["type","color","aria-label"]);const n=e.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(t[`${n}ButtonText`]=e.innerHTML,t[`show${f(n)}Button`]=!0,e.hasAttribute("color")&&(t[`${n}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute("aria-label")))})),t},Ur=e=>{const t={},n=e.querySelector("swal-image");return n&&(Wr(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},Vr=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Wr(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},zr=e=>{const t={},n=e.querySelector("swal-input");n&&(Wr(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach((e=>{Wr(e,["value"]);const n=e.getAttribute("value");if(!n)return;const r=e.innerHTML;t.inputOptions[n]=r}))),t},$r=(e,t)=>{const n={};for(const r in t){const i=t[r],s=e.querySelector(i);s&&(Wr(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},Hr=e=>{const t=Dr.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||p(`Unrecognized element <${n}>`)}))},Wr=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&p([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."])}))},qr=10,Kr=e=>{const t=S(),n=k();"function"===typeof e.willOpen&&e.willOpen(n),o.eventEmitter.emit("willOpen",n);const r=window.getComputedStyle(document.body).overflowY;Qr(t,n,e),setTimeout((()=>{Gr(t,n)}),qr),W()&&(Xr(t,e.scrollbarPadding,r),Ut()),q()||o.previousActiveElement||(o.previousActiveElement=document.activeElement),"function"===typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),o.eventEmitter.emit("didOpen",n),ne(t,u["no-transition"])},Yr=e=>{const t=k();if(e.target!==t)return;const n=S();t.removeEventListener("animationend",Yr),t.removeEventListener("transitionend",Yr),n.style.overflowY="auto"},Gr=(e,t)=>{fe(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Yr),t.addEventListener("transitionend",Yr)):e.style.overflowY="auto"},Xr=(e,t,n)=>{$t(),t&&"hidden"!==n&&Qt(n),setTimeout((()=>{e.scrollTop=0}))},Qr=(e,t,n)=>{te(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),se(t,"grid"),setTimeout((()=>{te(t,n.showClass.popup),t.style.removeProperty("opacity")}),qr)):se(t,"grid"),te([document.documentElement,document.body],u.shown),n.heightAuto&&n.backdrop&&!n.toast&&te([document.documentElement,document.body],u["height-auto"])};var Zr={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Jr(e){e.inputValidator||("email"===e.input&&(e.inputValidator=Zr.email),"url"===e.input&&(e.inputValidator=Zr.url))}function ei(e){(!e.target||"string"===typeof e.target&&!document.querySelector(e.target)||"string"!==typeof e.target&&!e.target.appendChild)&&(p('Target parameter is not valid, defaulting to "body"'),e.target="body")}function ti(e){Jr(e),e.showLoaderOnConfirm&&!e.preConfirm&&p("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),ei(e),"string"===typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Ee(e)}let ni;var ri=new WeakMap;class ii{constructor(){if(r(this,ri,void 0),"undefined"===typeof window)return;ni=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=Object.freeze(this.constructor.argsToParams(t));this.params=s,this.isAwaitingPromise=!1,i(ri,this,this._main(ni.params))}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Jn(Object.assign({},t,e)),o.currentInstance){const e=Bt.swalPromiseResolve.get(o.currentInstance),{isAwaitingPromise:t}=o.currentInstance;o.currentInstance._destroy(),t||e({isDismissed:!0}),W()&&Vt()}o.currentInstance=ni;const n=oi(e,t);ti(n),Object.freeze(n),o.timeout&&(o.timeout.stop(),delete o.timeout),clearTimeout(o.restoreFocusTimeout);const r=ai(ni);return St(ni,n),Le.innerParams.set(ni,n),si(ni,r,n)}then(e){return n(ri,this).then(e)}finally(e){return n(ri,this).finally(e)}}const si=(e,t,n)=>new Promise(((r,i)=>{const s=t=>{e.close({isDismissed:!0,dismiss:t})};Bt.swalPromiseResolve.set(e,r),Bt.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{Sn(e)},t.denyButton.onclick=()=>{En(e)},t.cancelButton.onclick=()=>{jn(e,s)},t.closeButton.onclick=()=>{s(Tt.close)},ar(n,t,s),It(o,n,s),hn(e,n),Kr(n),li(o,n,s),ci(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),oi=(e,t)=>{const n=Rr(e),r=Object.assign({},$n,t,n,e);return r.showClass=Object.assign({},$n.showClass,r.showClass),r.hideClass=Object.assign({},$n.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},ai=e=>{const t={popup:k(),container:S(),actions:B(),confirmButton:M(),denyButton:R(),cancelButton:D(),loader:F(),closeButton:z(),validationMessage:P(),progressSteps:O()};return Le.domCache.set(e,t),t},li=(e,t,n)=>{const r=V();oe(r),t.timer&&(e.timeout=new Mr((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(se(r),Q(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&pe(t.timer)}))))},ci=(e,t)=>{if(!t.toast)return b(t.allowEnterKey)?void(ui(e)||di(e,t)||At(-1,1)):(v("allowEnterKey"),void hi())},ui=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&ue(n))return n.focus(),!0;return!1},di=(e,t)=>t.focusDeny&&ue(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ue(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ue(e.confirmButton))&&(e.confirmButton.focus(),!0),hi=()=>{document.activeElement instanceof HTMLElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!==typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${e}`)}ii.prototype.disableButtons=Fn,ii.prototype.enableButtons=Ln,ii.prototype.getInput=Mn,ii.prototype.disableInput=Un,ii.prototype.enableInput=Bn,ii.prototype.hideLoading=On,ii.prototype.disableLoading=On,ii.prototype.showValidationMessage=Vn,ii.prototype.resetValidationMessage=zn,ii.prototype.close=tn,ii.prototype.closePopup=tn,ii.prototype.closeModal=tn,ii.prototype.closeToast=tn,ii.prototype.rejectPromise=rn,ii.prototype.update=er,ii.prototype._destroy=nr,Object.assign(ii,Pr),Object.keys(or).forEach((e=>{ii[e]=function(){return ni&&ni[e]?ni[e](...arguments):null}})),ii.DismissReason=Tt,ii.version="11.17.2";const fi=ii;return fi.default=fi,fi}(),"undefined"!==typeof this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},539:(e,t,n)=>{var r=n(9742),i=n(7498),s=n(3279);e.exports=function(e){return e&&e.length?r(e,s,i):void 0}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},620:(e,t,n)=>{var r=n(6913),i=n(4052),s=n(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&s(e)&&"[object String]"==r(e)}},643:(e,t,n)=>{var r=n(7676)("toUpperCase");e.exports=r},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",s="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[s,o,a].join("|")+")"+c+l+")*"),d="(?:"+[s+r+"?",r,o,a,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},755:(e,t,n)=>{var r=n(8895),i=n(7116);e.exports=function e(t,n,s,o,a){var l=-1,c=t.length;for(s||(s=i),a||(a=[]);++l<c;){var u=t[l];n>0&&s(u)?n>1?e(u,n-1,s,o,a):r(a,u):o||(a[a.length]=u)}return a}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},801:(e,t,n)=>{var r=n(1141),i=n(6686),s=n(9841),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},929:(e,t,n)=>{var r=n(3211),i=n(6571),s=n(9194),o=n(6686);e.exports=function(e,t,n){if(!o(n))return!1;var a=typeof t;return!!("number"==a?i(n)&&s(t,n.length):"string"==a&&t in n)&&r(n[t],e)}},977:(e,t,n)=>{var r=n(9096),i=n(4416);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},1141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1268:(e,t,n)=>{var r=n(5428),i=n(7574),s=n(6832),o=s&&s.isTypedArray,a=o?i(o):r;e.exports=a},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},1629:(e,t,n)=>{var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},1733:(e,t,n)=>{var r=n(1775),i=n(4664),s=n(9096);e.exports=function(e,t){var n={};return t=s(t,3),i(e,(function(e,i,s){r(n,i,t(e,i,s))})),n}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},2154:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},2165:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},2322:(e,t,n)=>{var r=n(6913),i=n(5990),s=n(2761),o=Function.prototype,a=Object.prototype,l=o.toString,c=a.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},2520:(e,t,n)=>{var r=n(5816),i=n(9096),s=n(9140),o=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var l=null==n?0:s(n);return l<0&&(l=o(a+l,0)),r(e,i(t,3),l)}},2536:(e,t,n)=>{var r=n(149),i=n(2969),s=n(9096),o=n(8883),a=n(320),l=n(7574),c=n(5893),u=n(3279),d=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var h=-1;t=r(t,l(s));var f=o(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++h,value:e}}));return a(f,(function(e,t){return c(e,t,n)}))}},2541:e=>{e.exports=function(e){return function(){return e}}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},2597:(e,t,n)=>{var r=n(4052),i=n(9841),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(o.test(e)||!s.test(e)||null!=t&&e in Object(t))}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R,L=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case j:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Ee=null;function je(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function ke(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==Se||null!==Ee)&&(Ne(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Pe=!1}function De(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Re=!1,Le=null,Fe=!1,Be=null,Ue={onError:function(e){Re=!0,Le=e}};function Ve(e,t,n,r,i,s,o,a,l){Re=!1,Le=null,De.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,St,Et,jt,kt=!1,Ct=[],Tt=null,Nt=null,It=null,At=new Map,Ot=new Map,Pt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Rt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void jt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){kt=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==It&&Ft(It)&&(It=null),At.forEach(Bt),Ot.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==Nt&&Vt(Nt,e),null!==It&&Vt(It,e),At.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Pt.shift()}var $t=x.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,$t.transition=s}}function qt(e,t,n,r){var i=bt,s=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,$t.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Gt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Rt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Rt(Nt,e,t,n,r,i),!0;case"mouseover":return It=Rt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Rt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Rt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Gt(e,t,n,r))&&Hr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Gt(e,t,n,r){if(Yt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(L({},fn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function jn(){return En}var kn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),Tn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),In=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(An),Pn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Rn=u&&"TextEvent"in window&&!Dn,Ln=u&&(!Mn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Yn(e){Fr(e,0)}function Gn(e){if(K(xi(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Zn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Gn(Kn)){var t=[];Wn(t,Kn,e,we(e)),Ae(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Kn)}function sr(e,t){if("click"===e)return Gn(t)}function or(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function jr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var kr=jr("animationend"),Cr=jr("animationiteration"),Tr=jr("animationstart"),Nr=jr("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Mr=Ar[Pr];Or(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Or(kr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Tr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),Re){if(!Re)throw Error(s(198));var u=Le;Re=!1,Le=null,Fe||(Fe=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,a,c),s=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Rr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=we(n),o=[];e:{var a=Ir.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case Cr:case Tr:l=yn;break;case Nr:l=In;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:xi(l),f=null==c?a:xi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Yr(o,a,l,u,!1),null!==c&&null!==d&&Yr(o,d,c,u,!0)}if("select"===(l=(a=r?xi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Hn(a))if(Qn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?xi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,zn=!0)),0<(y=qr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Rn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Mn&&Un(e,t)?(e=en(),Jt=Zt=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Oe(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Oe(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(s(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var _i=[],Si=-1;function Ei(e){return{current:e}}function ji(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function ki(e,t){Si++,_i[Si]=e.current,e.current=t}var Ci={},Ti=Ei(Ci),Ni=Ei(!1),Ii=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){ji(Ni),ji(Ti)}function Mi(e,t,n){if(Ti.current!==Ci)throw Error(s(168));ki(Ti,t),ki(Ni,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return L({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ii=Ti.current,ki(Ti,e),ki(Ni,Ni.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,ji(Ni),ji(Ti),ki(Ti,e)):ji(Ni),ki(Ni,n)}var Fi=null,Bi=!1,Ui=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Je,zi),i}finally{bt=t,Ui=!1}}return null}var $i=[],Hi=0,Wi=null,qi=0,Ki=[],Yi=0,Gi=null,Xi=1,Qi="";function Zi(e,t){$i[Hi++]=qi,$i[Hi++]=Wi,Wi=e,qi=t}function Ji(e,t,n){Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=Gi,Gi=e;var r=Xi;e=Qi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Qi=s+e}else Xi=1<<s|n<<i|r,Qi=e}function es(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function ts(e){for(;e===Wi;)Wi=$i[--Hi],$i[Hi]=null,qi=$i[--Hi],$i[Hi]=null;for(;e===Gi;)Gi=Ki[--Yi],Ki[Yi]=null,Qi=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:Xi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=x.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),is&&Zi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Zi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Zi(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),is&&Zi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return is&&Zi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Zi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Dc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Mc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case _:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case O:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(D(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Lc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var xs=bs(!0),ws=bs(!1),_s=Ei(null),Ss=null,Es=null,js=null;function ks(){js=Es=Ss=null}function Cs(e){var t=_s.current;ji(_s),e._currentValue=t}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Ss=e,js=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(js!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=e,Ss.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var As=null;function Os(e){null===As?As=[e]:As.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Rl|=o,e.lanes=o,e.memoizedState=d}}function $s(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ws=Ei(Hs),qs=Ei(Hs),Ks=Ei(Hs);function Ys(e){if(e===Hs)throw Error(s(174));return e}function Gs(e,t){switch(ki(Ks,t),ki(qs,e),ki(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ji(Ws),ki(Ws,t)}function Xs(){ji(Ws),ji(qs),ji(Ks)}function Qs(e){Ys(Ks.current);var t=Ys(Ws.current),n=le(t,e.type);t!==n&&(ki(qs,e),ki(Ws,n))}function Zs(e){qs.current===e&&(ji(Ws),ji(qs))}var Js=Ei(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=x.ReactCurrentDispatcher,io=x.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Jo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Zo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function xo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,oo.lanes|=d,Rl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Rl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Eo(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ro(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ao(9,ko.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||jo(n,t,i)}return i}function jo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,To(t)&&No(e)}function Co(e,t,n){return n((function(){To(t)&&No(e)}))}function To(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Ms(e,1);null!==t&&nc(t,e,1,-1)}function Io(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return bo().memoizedState}function Po(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function Mo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ao(t,n,s,r))}oo.flags|=e,i.memoizedState=Ao(1|t,n,s,r)}function Do(e,t){return Po(8390656,8,e,t)}function Ro(e,t){return Mo(2048,8,e,t)}function Lo(e,t){return Mo(4,2,e,t)}function Fo(e,t){return Mo(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4,4,Bo.bind(null,t,e),n)}function Vo(){}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Rl|=n,e.baseState=!0),t)}function Wo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function qo(){return bo().memoizedState}function Ko(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Go(e))Xo(t,n);else if(null!==(n=Ps(e,t,n,r))){nc(n,e,r,ec()),Qo(n,t,r)}}function Yo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Go(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(nc(n,e,r,i=ec()),Qo(n,t,r))}}function Go(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Is,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Jo={readContext:Is,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Io,useDebugValue:Vo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Io(!1),t=e[0];return e=Wo.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&so)||jo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Do(Co.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Nl.identifierPrefix;if(is){var n=Qi;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Is,useCallback:zo,useContext:Is,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:$o,useReducer:wo,useRef:Oo,useState:function(){return wo(xo)},useDebugValue:Vo,useDeferredValue:function(e){return Ho(bo(),ao.memoizedState,e)},useTransition:function(){return[wo(xo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:qo,unstable_isNewReconciler:!1},ta={readContext:Is,useCallback:zo,useContext:Is,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:$o,useReducer:_o,useRef:Oo,useState:function(){return _o(xo)},useDebugValue:Vo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[_o(xo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:qo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bs(e,i,r))&&(nc(t,e,r,n),Us(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Oi(t)?Ii:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Oi(t)?Ii:Ti.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),da(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Bs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=x.ReactCurrentOwner,ba=!1;function xa(e,t,n,r){t.child=null===e?ws(t,null,n,r):xs(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||ba?(is&&n&&es(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function _a(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Pl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Pl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Pl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Pl,Ol),Ol|=r;return xa(e,t,i,n),t.child}function ja(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Oi(n)?Ii:Ti.current;return s=Ai(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||ba?(is&&r&&es(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ca(e,t,n,r,i){if(Oi(n)){var s=!0;Ri(t)}else s=!1;if(Ns(t,i),null===t.stateNode)$a(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Ai(t,c=Oi(n)?Ii:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ds=!1;var h=t.memoizedState;o.state=h,zs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ni.current||Ds?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ds||sa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ls(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=Ai(t,l=Oi(n)?Ii:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,r,l),Ds=!1,h=t.memoizedState,o.state=h,zs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ni.current||Ds?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ds||sa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ta(e,t,n,r,s,i)}function Ta(e,t,n,r,i,s){ja(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Li(t,n,!1),Ha(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,a,s)):xa(e,t,a,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Gs(e,t.containerInfo)}function Ia(e,t,n,r,i){return fs(),ps(i),t.flags|=256,xa(e,t,n,r),t.child}var Aa,Oa,Pa,Ma,Da={dehydrated:null,treeContext:null,retryLane:0};function Ra(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,o=Js.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Js,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Rc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ra(n),t.memoizedState=Da,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Rc({mode:"visible",children:r.children},i,0,null),(o=Dc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&xs(t,e.child,null,a),t.child.memoizedState=Ra(a),t.memoizedState=Da,o);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ms(e,i),nc(r,e,i,-1))}return mc(),Ba(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=Gi,Xi=e.id,Qi=e.overflow,Gi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Pc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ra(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Pc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&ps(r),xs(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=Js.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Js,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(t),null;case 1:case 17:return Oi(t.type)&&Pi(),qa(t),null;case 3:return r=t.stateNode,Xs(),ji(Ni),ji(Ti),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Oa(e,t),qa(t),null;case 5:Zs(t);var i=Ys(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return qa(t),null}if(e=Ys(Ws.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":q(r),J(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":X(e,r),i=G(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Br("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ys(Ks.current),Ys(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qa(t),null;case 13:if(ji(Js),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Js.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),qa(t),null);case 4:return Xs(),Oa(e,t),null===e&&zr(t.stateNode.containerInfo),qa(t),null;case 10:return Cs(t.type._context),qa(t),null;case 19:if(ji(Js),null===(o=t.memoizedState))return qa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Js,1&Js.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>zl&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return qa(t),null}else 2*Qe()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=Js.current,ki(Js,r?1&n|2:1&n),t):(qa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qa(t),6&t.subtreeFlags&&(t.flags|=8192)):qa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),ji(Ni),ji(Ti),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(ji(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ji(Js),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ys(Ws.current);var s,o=null;switch(n){case"input":i=G(e,i),r=G(e,r),o=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ga=!1,Xa=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Za=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||Ja(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xa&&(Ja(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,hl(e,t,n),Xa=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Ja(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Qe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||d,ml(t,e),Xa=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Za=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ec(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ga;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ga;var c=Xa;if(Ga=o,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?_l(i):null!==l?(l.return=o,Za=l):_l(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Ga=a,Xa=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):xl(e)}}function xl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&$s(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$s(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function wl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function _l(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{il(t)}catch(l){Ec(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Ec(t,o,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,El=Math.ceil,jl=x.ReactCurrentDispatcher,kl=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Tl=0,Nl=null,Il=null,Al=0,Ol=0,Pl=Ei(0),Ml=0,Dl=null,Rl=0,Ll=0,Fl=0,Bl=null,Ul=null,Vl=0,zl=1/0,$l=null,Hl=!1,Wl=null,ql=null,Kl=!1,Yl=null,Gl=0,Xl=0,Ql=null,Zl=-1,Jl=0;function ec(){return 0!==(6&Tl)?Qe():-1!==Zl?Zl:Zl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Al?Al&-Al:null!==ms.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Ql=null,Error(s(185));yt(e,n,r),0!==(2&Tl)&&e===Nl||(e===Nl&&(0===(2&Tl)&&(Ll|=n),4===Ml&&ac(e,Al)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(zl=Qe()+500,Bi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Nl?Al:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bi=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),oi((function(){0===(6&Tl)&&zi()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,Jl=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Tl;Tl|=2;var o=pc();for(Nl===e&&Al===t||($l=null,zl=Qe()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}ks(),jl.current=o,Tl=i,null!==Il?t=0:(Nl=null,Al=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Qe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,$l);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,$l),t);break}wc(e,Ul,$l);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,$l),r);break}wc(e,Ul,$l);break;default:throw Error(s(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Qe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,$l),rc(e,Qe()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(zl=Qe()+500,Bi&&zi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Tl=t))&&zi()}}function dc(){Ol=Pl.current,ji(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xs(),ji(Ni),ji(Ti),no();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:ji(Js);break;case 10:Cs(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Il=e=Pc(e.current,null),Al=Ol=t,Ml=0,Dl=null,Fl=Ll=Rl=0,Ul=Bl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=Il;try{if(ks(),ro.current=Zo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){Ml=1,Dl=t,Il=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[o]:Bl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pc(){var e=jl.current;return jl.current=Zo,null===e?Zo:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Nl||0===(268435455&Rl)&&0===(268435455&Ll)||ac(Nl,Al)}function gc(e,t){var n=Tl;Tl|=2;var r=pc();for(Nl===e&&Al===t||($l=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(ks(),Tl=n,jl.current=r,null!==Il)throw Error(s(261));return Nl=null,Al=0,Ml}function yc(){for(;null!==Il;)bc(Il)}function vc(){for(;null!==Il&&!Ge();)bc(Il)}function bc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Il=t,kl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Ol)))return void(Il=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ml=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Yl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Il=Nl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=bt;bt=1;var l=Tl;Tl|=4,kl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Xe(),Tl=l,bt=a,Cl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Gl=i),o=e.pendingLanes,0===o&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Gl)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,zi()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function _c(){if(null!==Yl){var e=xt(Gl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Gl=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var f=(d=Za).sibling,p=d.return;if(sl(d),d===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var b=e.current;for(Za=b;null!==Za;){var x=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,Za=x;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ec(l,l.return,_)}if(l===a){Za=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break e}Za=l.return}}if(Tl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Bs(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Bs(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Al&n)===n&&(4===Ml||3===Ml&&(130023424&Al)===Al&&500>Qe()-Vl?hc(e,0):Fl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ms(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Nc(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dc(n.children,i,o,t);case E:a=8,i|=8;break;case j:return(e=Ac(12,n,t,2|i)).elementType=j,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case I:return(e=Ac(19,n,t,i)).elementType=I,e.lanes=o,e;case P:return Rc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case T:a=11;break e;case A:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,o,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Vc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=Uc(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Bs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function $c(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bs(i,t,o))&&(nc(e,i,o,s),Us(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:Qs(t);break;case 1:Oi(t.type)&&Ri(t);break;case 4:Gs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(_s,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Js,1&Js.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(ki(Js,1&Js.current),null!==(e=Ha(e,t,n))?e.sibling:null);ki(Js,1&Js.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Js,Js.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Ji(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Ai(t,Ti.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ta(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=_a(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ls(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ia(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ja(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return La(e,t,n);case 4:return Gs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(_s,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ts(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ts(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=Is(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),_a(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),$a(e,t),t.tag=1,Oi(r)?(e=!0,Ri(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),Ta(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Ea(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}$c(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Gc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$c(e,t,null,null)},Gc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[pi]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Qe()),0===(6&Tl)&&(zl=Qe()+500,zi()))}break;case 13:uc((function(){var t=Ms(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},_t=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ms(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Et=function(){return bt},jt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[bi,xi,wi,ke,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(s(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(s(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,n)=>{var r=n(5193),i=n(2761),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},2794:(e,t,n)=>{var r=n(9742),i=n(7498),s=n(9096);e.exports=function(e,t){return e&&e.length?r(e,s(t,2),i):void 0}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},2969:(e,t,n)=>{var r=n(5324),i=n(914);e.exports=function(e,t){for(var n=0,s=(t=r(t,e)).length;null!=e&&n<s;)e=e[i(t[n++])];return n&&n==s?e:void 0}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3204:(e,t,n)=>{var r=n(3343),i=n(2777),s=n(4052),o=n(4543),a=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),u=!n&&i(e),d=!n&&!u&&o(e),h=!n&&!u&&!d&&l(e),f=n||u||d||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||p.push(g);return p}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:e=>{e.exports=function(e){return e}},3331:(e,t,n)=>{var r=n(9676),i=n(929),s=n(7303);e.exports=function(e){return function(t,n,o){return o&&"number"!=typeof o&&i(t,n,o)&&(n=o=void 0),t=s(t),void 0===n?(n=t,t=0):n=s(n),o=void 0===o?t<n?1:-1:s(o),r(t,n,o,e)}}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},3366:(e,t,n)=>{var r=n(7894),i=n(9057);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3411:(e,t,n)=>{var r=n(149),i=n(9096),s=n(8883),o=n(4052);e.exports=function(e,t){return(o(e)?r:s)(e,i(t,3))}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},3538:(e,t,n)=>{var r=n(755),i=n(3411);e.exports=function(e,t){return r(i(e,t),1)}},3668:(e,t,n)=>{var r=n(8902),i=n(2587),s=n(8114);e.exports=function(e,t,n,o,a,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var y=e[p],v=t[p];if(o)var b=c?o(v,y,p,t,e,l):o(y,v,p,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!s(g,t)&&(y===e||a(y,e,n,o,l)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!a(y,v,n,o,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},3713:(e,t,n)=>{var r=n(6140),i=n(1143),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},3781:(e,t,n)=>{var r=n(9417),i=n(8673);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var s=t[n],o=e[s];t[n]=[s,o,r(o)]}return t}},3871:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,n)=>{var r=n(396),i=n(2866),s=n(2597),o=n(914);e.exports=function(e){return s(e)?r(o(e)):i(e)}},3950:(e,t,n)=>{var r=n(6686),i=n(4757),s=n(801),o=Math.max,a=Math.min;e.exports=function(e,t,n){var l,c,u,d,h,f,p=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=c;return l=c=void 0,p=t,d=e.apply(r,n)}function b(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-p>=u}function x(){var e=i();if(b(e))return w(e);h=setTimeout(x,function(e){var n=t-(e-f);return g?a(n,u-(e-p)):n}(e))}function w(e){return h=void 0,y&&l?v(e):(l=c=void 0,d)}function _(){var e=i(),n=b(e);if(l=arguments,c=this,f=e,n){if(void 0===h)return function(e){return p=e,h=setTimeout(x,t),m?v(e):d}(f);if(g)return clearTimeout(h),h=setTimeout(x,t),v(f)}return void 0===h&&(h=setTimeout(x,t)),d}return t=s(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?o(s(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=c=h=void 0},_.flush=function(){return void 0===h?d:w(i())},_}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079:(e,t,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)})),t}));e.exports=o},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+T(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},M={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4262:(e,t,n)=>{var r=n(8895),i=n(4052);e.exports=function(e,t,n){var s=t(e);return i(e)?s:r(s,n(e))}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4416:(e,t,n)=>{var r=n(8902),i=n(5866),s=n(1558),o=n(8114),a=n(8182),l=n(2074);e.exports=function(e,t,n){var c=-1,u=i,d=e.length,h=!0,f=[],p=f;if(n)h=!1,u=s;else if(d>=200){var m=t?null:a(e);if(m)return l(m);h=!1,u=o,p=new r}else p=t?[]:f;e:for(;++c<d;){var g=e[c],y=t?t(g):g;if(g=n||0!==g?g:0,h&&y===y){for(var v=p.length;v--;)if(p[v]===y)continue e;t&&p.push(y),f.push(g)}else u(p,y,n)||(p!==f&&p.push(y),f.push(g))}return f}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),i=n(14),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},4552:(e,t,n)=>{var r=n(9812),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var i=o.call(e);return r&&(t?e[a]=n:delete e[a]),i}},4597:(e,t,n)=>{var r=n(2587),i=n(9096),s=n(2165),o=n(4052),a=n(929);e.exports=function(e,t,n){var l=o(e)?r:s;return n&&a(e,t,n)&&(t=void 0),l(e,i(t,3))}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,n)=>{var r=n(4258),i=n(8673);e.exports=function(e,t){return e&&r(e,t,i)}},4746:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},4816:(e,t,n)=>{var r=n(7251),i=n(7159),s=n(438),o=n(9394),a=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},5029:(e,t,n)=>{var r=n(6989),i=n(3097),s=n(3366),o=n(2597),a=n(9417),l=n(1310),c=n(914);e.exports=function(e,t){return o(e)&&a(t)?l(c(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?s(n,e):r(t,o,3)}}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5173:(e,t,n)=>{e.exports=n(1497)()},5193:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},5268:(e,t,n)=>{var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},5295:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},5324:(e,t,n)=>{var r=n(4052),i=n(2597),s=n(4079),o=n(1069);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:s(o(e))}},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},5428:(e,t,n)=>{var r=n(6913),i=n(6173),s=n(2761),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&i(e.length)&&!!o[r(e)]}},5538:(e,t,n)=>{var r=n(7160),i=n(4545),s=n(793),o=n(7760),a=n(3892),l=n(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=l,e.exports=c},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},5636:(e,t,n)=>{var r=n(1170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,a=i(s.length-t,0),l=Array(a);++o<a;)l[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=n(l),r(e,this,c)}}},5647:(e,t,n)=>{var r=n(3279),i=n(5636),s=n(6350);e.exports=function(e,t){return s(i(e,t,r),e+"")}},5652:(e,t,n)=>{var r=n(4664),i=n(6516)(r);e.exports=i},5654:(e,t,n)=>{var r=n(7937),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},5713:e=>{e.exports=function(){}},5752:(e,t,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,o,a){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:i.call(t,h)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=l;++d<u;){var y=e[h=c[d]],v=t[h];if(s)var b=l?s(v,y,h,t,e,a):s(y,v,h,e,t,a);if(!(void 0===b?y===v||o(y,v,n,s,a):b)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}},5797:(e,t,n)=>{var r=n(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},5816:e=>{e.exports=function(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var i=-1,s=e.criteria,o=t.criteria,a=s.length,l=n.length;++i<a;){var c=r(s[i],o[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===n(s[l],l,s))break}return t}}},5967:e=>{e.exports=function(e){return e.split("")}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6350:(e,t,n)=>{var r=n(8325),i=n(6578)(r);e.exports=i},6361:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},6378:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case a:case o:case h:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isFragment=function(e){return y(e)===s}},6399:(e,t,n)=>{var r=n(5538),i=n(3668),s=n(9987),o=n(5752),a=n(6924),l=n(4052),c=n(4543),u=n(1268),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),x=v?h:a(e),w=b?h:a(t),_=(x=x==d?f:x)==f,S=(w=w==d?f:w)==f,E=x==w;if(E&&c(e)){if(!c(t))return!1;v=!0,_=!1}if(E&&!_)return y||(y=new r),v||u(e)?i(e,t,n,m,g,y):s(e,t,x,n,m,g,y);if(!(1&n)){var j=_&&p.call(e,"__wrapped__"),k=S&&p.call(t,"__wrapped__");if(j||k){var C=j?e.value():e,T=k?t.value():t;return y||(y=new r),g(C,T,n,m,y)}}return!!E&&(y||(y=new r),o(e,t,n,m,g,y))}},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var s=n.length,o=t?s:-1,a=Object(n);(t?o--:++o<s)&&!1!==i(a[o],o,a););return n}}},6532:(e,t,n)=>{var r=n(5538),i=n(6989);e.exports=function(e,t,n,s){var o=n.length,a=o,l=!s;if(null==e)return!a;for(e=Object(e);o--;){var c=n[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=n[o])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var f=new r;if(s)var p=s(d,h,u,e,t,f);if(!(void 0===p?i(h,d,3,s,f):p))return!1}}return!0}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();e.exports=s},6571:(e,t,n)=>{var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),s=16-(i-r);if(r=i,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,s=e===e,o=r(e),a=void 0!==t,l=null===t,c=t===t,u=r(t);if(!l&&!u&&!o&&e>t||o&&a&&c&&!l&&!u||i&&a&&c||!n&&c||!s)return 1;if(!i&&!o&&!u&&e<t||u&&n&&s&&!i&&!o||l&&n&&s||!a&&s||!c)return-1}return 0}},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},6604:(e,t,n)=>{var r=n(3331)();e.exports=r},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6745:(e,t,n)=>{var r=n(9742),i=n(61),s=n(3279);e.exports=function(e){return e&&e.length?r(e,s,i):void 0}},6788:(e,t,n)=>{var r=n(7160),i=n(5204),s=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(e,t),this.size=n.size,this}},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,o=s&&s.exports===i&&r.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=a},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},6913:(e,t,n)=>{var r=n(9812),i=n(4552),s=n(6095),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):s(e)}},6924:(e,t,n)=>{var r=n(7685),i=n(5204),s=n(5387),o=n(2070),a=n(6600),l=n(6913),c=n(6996),u="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),y=c(s),v=c(o),b=c(a),x=l;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=u||s&&x(s.resolve())!=d||o&&x(new o)!=h||a&&x(new a)!=f)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case y:return d;case v:return h;case b:return f}return t}),e.exports=x},6954:(e,t,n)=>{var r=n(1629),i=n(7857),s=n(6686),o=n(6996),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(r(e)?h:a).test(o(e))}},6989:(e,t,n)=>{var r=n(6399),i=n(2761);e.exports=function e(t,n,s,o,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,s,o,e,a))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},7002:(e,t,n)=>{var r=n(5295),i=n(4746),s=n(9096),o=n(4052),a=n(929);e.exports=function(e,t,n){var l=o(e)?r:i;return n&&a(e,t,n)&&(t=void 0),l(e,s(t,3))}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7116:(e,t,n)=>{var r=n(9812),i=n(2777),s=n(4052),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||i(e)||!!(o&&e&&e[o])}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,n)=>{var r=n(7563),i=n(9935),s=n(4190),o=n(1946),a=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,P(_);else{var t=r(u);null!==t&&M(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,j=null,k=-1,C=5,T=-1;function N(){return!(t.unstable_now()-T<C)}function I(){if(null!==j){var e=t.unstable_now();T=e;var n=!0;try{n=j(!0,e)}finally{n?S():(E=!1,j=null)}}else E=!1}if("function"===typeof b)S=function(){b(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=I,S=function(){O.postMessage(null)}}else S=function(){y(I,0)};function P(e){j=e,E||(E=!0,S())}function M(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,M(w,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7251:(e,t,n)=>{var r=n(8724),i=n(7160),s=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||i),string:new r}}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new i(r,s||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,s,o){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,s),!0;case 6:return u.fn.call(u.context,t,r,i,s,o),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||o(this,s);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},7303:(e,t,n)=>{var r=n(801),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7424:(e,t,n)=>{var r=n(755),i=n(2536),s=n(5647),o=n(929),a=s((function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=a},7498:e=>{e.exports=function(e,t){return e>t}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7676:(e,t,n)=>{var r=n(8189),i=n(6311),s=n(9115),o=n(1069);e.exports=function(e){return function(t){t=o(t);var n=i(t)?s(t):void 0,a=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return a[e]()+l}}},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,n)=>{var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7937:(e,t,n)=>{var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8114:e=>{e.exports=function(e,t){return e.has(t)}},8182:(e,t,n)=>{var r=n(2070),i=n(5713),s=n(2074),o=r&&1/s(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},8189:(e,t,n)=>{var r=n(3871);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},8210:function(e,t,n){var r;!function(){"use strict";var i,s=1e9,o={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},a=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,m=9007199254740991,g=d(1286742750677284.5),y={};function v(e,t){var n,r,i,s,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),a?T(t,h):t;if(c=e.d,u=t.d,o=e.e,i=t.e,c=c.slice(),s=o-i){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=o,l=c.length),s>(l=(o=Math.ceil(h/7))>l?o+1:l+1)&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for((l=c.length)-(s=u.length)<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/p|0,c[s]%=p;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,a?T(t,h):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function x(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=j(n)),s+=r;(n=7-(r=(o=e[t])+"").length)&&(s+=j(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return s+o}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,n=(r=s.d.length)<(i=e.d.length)?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return T(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return S(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,s=r.precision,o=s+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(a=!1,t=w(k(n,o),k(e,o),o),a=!0,T(t,s))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(a=!1,t=w(n,e,0,1).times(e),a=!0,n.minus(t)):T(new r(n),i)},y.naturalExponential=y.exp=function(){return _(this)},y.naturalLogarithm=y.ln=function(){return k(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):N(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=S(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,s,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=S(c),a=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=x(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=o=(n=u.precision)+3;;)if(r=(s=r).plus(w(c,s,o+2)).times(.5),x(s.d).slice(0,o)===(t=x(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&"4999"==t){if(T(s,n+1,0),s.times(s).eq(c)){r=s;break}}else if("9999"!=t)break;o+=4}return a=!0,T(r,n)},y.times=y.mul=function(e){var t,n,r,i,s,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=f.length)<(u=m.length)&&(s=f,f=m,m=s,o=c,c=u,u=o),s=[],r=o=c+u;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=s[i]+m[r]*f[i-r-1]+t,s[i--]=l%p|0,t=l/p|0;s[i]=(s[i]+t)%p|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,a?T(e,h.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,s),void 0===t?t=r.rounding:b(t,0,8),T(n,e+S(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=I(r,!0):(b(e,0,s),void 0===t?t=i.rounding:b(t,0,8),n=I(r=T(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?I(i):(b(e,0,s),void 0===t?t=o.rounding:b(t,0,8),n=I((r=T(new o(i),e+S(i)+1,t)).abs(),!1,e+S(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return T(new t(e),S(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,s,o,c,u=this,h=u.constructor,f=+(e=new h(e));if(!e.s)return new h(i);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(i))return u;if(r=h.precision,e.eq(i))return T(u,r);if(c=(t=e.e)>=(n=e.d.length-1),o=u.s,c){if((n=f<0?-f:f)<=m){for(s=new h(i),t=Math.ceil(r/7+4),a=!1;n%2&&A((s=s.times(u)).d,t),0!==(n=d(n/2));)A((u=u.times(u)).d,t);return a=!0,e.s<0?new h(i).div(s):T(s,r)}}else if(o<0)throw Error(l+"NaN");return o=o<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,a=!1,s=e.times(k(u,r+12)),a=!0,(s=_(s)).s=o,s},y.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?r=I(i,(n=S(i))<=o.toExpNeg||n>=o.toExpPos):(b(e,1,s),void 0===t?t=o.rounding:b(t,0,8),r=I(i=T(new o(i),e,t),e<=(n=S(i))||n<=o.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,s),void 0===t?t=n.rounding:b(t,0,8)),T(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=S(e),n=e.constructor;return I(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%p|0,r=n/p|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*p+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,o){var a,c,u,d,h,f,m,g,y,v,b,x,w,_,E,j,k,C,N=r.constructor,I=r.s==i.s?1:-1,A=r.d,O=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,k=O.length,E=A.length,g=(m=new N(I)).d=[],u=0;O[u]==(A[u]||0);)++u;if(O[u]>(A[u]||0)&&--c,(x=null==s?s=N.precision:o?s+(S(r)-S(i))+1:s)<0)return new N(0);if(x=x/7+2|0,u=0,1==k)for(d=0,O=O[0],x++;(u<E||d)&&x--;u++)w=d*p+(A[u]||0),g[u]=w/O|0,d=w%O|0;else{for((d=p/(O[0]+1)|0)>1&&(O=e(O,d),A=e(A,d),k=O.length,E=A.length),_=k,v=(y=A.slice(0,k)).length;v<k;)y[v++]=0;(C=O.slice()).unshift(0),j=O[0],O[1]>=p/2&&++j;do{d=0,(a=t(O,y,k,v))<0?(b=y[0],k!=v&&(b=b*p+(y[1]||0)),(d=b/j|0)>1?(d>=p&&(d=p-1),1==(a=t(h=e(O,d),y,f=h.length,v=y.length))&&(d--,n(h,k<f?C:O,f))):(0==d&&(a=d=1),h=O.slice()),(f=h.length)<v&&h.unshift(0),n(y,h,v),-1==a&&(a=t(O,y,k,v=y.length))<1&&(d++,n(y,k<v?C:O,v)),v=y.length):0===a&&(d++,y=[0]),g[u++]=d,a&&y[0]?y[v++]=A[_]||0:(y=[A[_]],v=1)}while((_++<E||void 0!==y[0])&&x--)}return g[0]||g.shift(),m.e=c,T(m,o?s+S(m)+1:s)}}();function _(e,t){var n,r,s,o,l,c=0,d=0,f=e.constructor,p=f.precision;if(S(e)>16)throw Error(u+S(e));if(!e.s)return new f(i);for(null==t?(a=!1,l=p):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=s=new f(i),f.precision=l;;){if(r=T(r.times(e),l),n=n.times(++c),x((o=s.plus(w(r,n,l))).d).slice(0,l)===x(s.d).slice(0,l)){for(;d--;)s=T(s.times(s),l);return f.precision=p,null==t?(a=!0,T(s,p)):s}s=o}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw a=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return T(new e(e.LN10),t)}function j(e){for(var t="";e--;)t+="0";return t}function k(e,t){var n,r,s,o,c,u,d,h,f,p=1,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(i))return new y(0);if(null==t?(a=!1,h=v):h=t,m.eq(10))return null==t&&(a=!0),E(y,h);if(h+=10,y.precision=h,r=(n=x(g)).charAt(0),o=S(m),!(Math.abs(o)<15e14))return d=E(y,h+2,v).times(o+""),m=k(new y(r+"."+n.slice(1)),h-10).plus(d),y.precision=v,null==t?(a=!0,T(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((m=m.times(e)).d)).charAt(0),p++;for(o=S(m),r>1?(m=new y("0."+n),o++):m=new y(r+"."+n.slice(1)),u=c=m=w(m.minus(i),m.plus(i),h),f=T(m.times(m),h),s=3;;){if(c=T(c.times(f),h),x((d=u.plus(w(c,new y(s),h))).d).slice(0,h)===x(u.d).slice(0,h))return u=u.times(2),0!==o&&(u=u.plus(E(y,h+2,v).times(o+""))),u=w(u,new y(p),h),y.precision=v,null==t?(a=!0,T(u,v)):u;u=d,s+=2}}function C(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),a&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function T(e,t,n){var r,i,s,o,l,c,f,m,y=e.d;for(o=1,s=y[0];s>=10;s/=10)o++;if((r=t-o)<0)r+=7,i=t,f=y[m=0];else{if((m=Math.ceil((r+1)/7))>=(s=y.length))return e;for(f=s=y[m],o=1;s>=10;s/=10)o++;i=(r%=7)-7+o}if(void 0!==n&&(l=f/(s=h(10,o-i-1))%10|0,c=t<0||void 0!==y[m+1]||f%s,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?f/h(10,o-i):0:y[m-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return c?(s=S(e),y.length=1,t=t-s-1,y[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=m,s=1,m--):(y.length=m+1,s=h(10,7-r),y[m]=i>0?(f/h(10,o-i)%h(10,i)|0)*s:0),c)for(;;){if(0==m){(y[0]+=s)==p&&(y[0]=1,++e.e);break}if(y[m]+=s,y[m]!=p)break;y[m--]=0,s=1}for(r=y.length;0===y[--r];)y.pop();if(a&&(e.e>g||e.e<-g))throw Error(u+S(e));return e}function N(e,t){var n,r,i,s,o,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),a?T(t,m):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r){for((d=o<0)?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),o>(i=Math.max(Math.ceil(m/7),l)+2)&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for((d=(i=c.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(s=i;s&&0===c[--s];)c[s]=p-1;--c[s],c[i]+=p}c[i]-=h[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,a?T(t,m):t):new f(0)}function I(e,t,n){var r,i=S(e),s=x(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+j(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+j(-i-1)+s,n&&(r=n-o)>0&&(s+=j(r))):i>=o?(s+=j(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+j(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=j(r))),e.s<0?"-"+s:s}function A(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(d(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}o=function e(t){var n,r,i;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);C(t,e)}if(s.prototype=y,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=O,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(o),o.default=o.Decimal=o,i=new o(1),void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},8325:(e,t,n)=>{var r=n(2541),i=n(5654),s=n(3279),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:s;e.exports=o},8468:(e,t,n)=>{var r=n(5816),i=n(644),s=n(4020);e.exports=function(e,t,n){return t===t?s(e,t,n):r(e,i,n)}},8541:(e,t,n)=>{var r=n(9812),i=n(149),s=n(4052),o=n(9841),a=r?r.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return i(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},8673:(e,t,n)=>{var r=n(3204),i=n(3713),s=n(6571);e.exports=function(e){return s(e)?r(e):i(e)}},8724:(e,t,n)=>{var r=n(7615),i=n(5051),s=n(2154),o=n(8734),a=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},8734:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8883:(e,t,n)=>{var r=n(5652),i=n(6571);e.exports=function(e,t){var n=-1,s=i(e)?Array(e.length):[];return r(e,(function(e,r,i){s[++n]=t(e,r,i)})),s}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},8902:(e,t,n)=>{var r=n(4816),i=n(6179),s=n(6704);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,e.exports=o},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},9057:(e,t,n)=>{var r=n(5324),i=n(2777),s=n(4052),o=n(9194),a=n(6173),l=n(914);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&a(u)&&o(h,u)&&(s(e)||i(e))}},9062:(e,t,n)=>{"use strict";e.exports=n(6378)},9096:(e,t,n)=>{var r=n(9256),i=n(5029),s=n(3279),o=n(4052),a=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):a(e)}},9115:(e,t,n)=>{var r=n(5967),i=n(6311),s=n(715);e.exports=function(e){return i(e)?s(e):r(e)}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},9160:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},9256:(e,t,n)=>{var r=n(6532),i=n(3781),s=n(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},9364:(e,t,n)=>{var r=n(9742),i=n(9096),s=n(61);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),s):void 0}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},9395:(e,t,n)=>{var r=n(4262),i=n(9621),s=n(8673);e.exports=function(e){return r(e,s,i)}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},9621:(e,t,n)=>{var r=n(7529),i=n(7828),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return s.call(e,t)})))}:i;e.exports=a},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,s){for(var o=-1,a=n(t((r-e)/(i||1)),0),l=Array(a);a--;)l[s?a:++o]=e,e+=i;return l}},9686:e=>{e.exports=function(e){return null==e}},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var i=-1,s=e.length;++i<s;){var o=e[i],a=t(o);if(null!=a&&(void 0===l?a===a&&!r(a):n(a,l)))var l=a,c=o}return c}},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},9841:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},9889:(e,t,n)=>{var r=n(3950),i=n(6686);e.exports=function(e,t,n){var s=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:s,maxWait:t,trailing:o})}},9935:(e,t,n)=>{var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},9987:(e,t,n)=>{var r=n(9812),i=n(2929),s=n(3211),o=n(3668),a=n(4160),l=n(2074),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=o(f(e),f(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},9995:(e,t,n)=>{var r=n(9096),i=n(6571),s=n(8673);e.exports=function(e){return function(t,n,o){var a=Object(t);if(!i(t)){var l=r(n,3);t=s(t),n=function(e){return l(a[e],e,a)}}var c=e(t,n,o);return c>-1?a[l?t[c]:c]:void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>hZ,scaleDiverging:()=>$5,scaleDivergingLog:()=>H5,scaleDivergingPow:()=>q5,scaleDivergingSqrt:()=>K5,scaleDivergingSymlog:()=>W5,scaleIdentity:()=>L0,scaleImplicit:()=>uZ,scaleLinear:()=>R0,scaleLog:()=>q0,scaleOrdinal:()=>dZ,scalePoint:()=>pZ,scalePow:()=>t1,scaleQuantile:()=>f1,scaleQuantize:()=>p1,scaleRadial:()=>i1,scaleSequential:()=>R5,scaleSequentialLog:()=>L5,scaleSequentialPow:()=>B5,scaleSequentialQuantile:()=>V5,scaleSequentialSqrt:()=>U5,scaleSequentialSymlog:()=>F5,scaleSqrt:()=>n1,scaleSymlog:()=>X0,scaleThreshold:()=>m1,scaleTime:()=>O5,scaleUtc:()=>P5,tickFormat:()=>M0});var t,r=n(5043),i=n.t(r,2),s=n(4391),o=n(7950),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(zW){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,d=t.Pop,m=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){d=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:d,location:x.location,delta:n})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let x={get action(){return d},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),m=e,()=>{s.removeEventListener(c,v),m=null}},createHref:e=>n(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let i=f(x.location,e,n);r&&r(i,e),g=y()+1;let l=h(i,g),c=x.createHref(i);try{a.pushState(l,"",c)}catch(dv){if(dv instanceof DOMException&&"DataCloneError"===dv.name)throw dv;s.location.assign(c)}o&&m&&m({action:d,location:x.location,delta:1})},replace:function(e,n){d=t.Replace;let i=f(x.location,e,n);r&&r(i,e),g=y();let s=h(i,g),l=x.createHref(i);a.replaceState(s,"",l),o&&m&&m({action:d,location:x.location,delta:0})},go:e=>a.go(e)};return x}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let i=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let s=x(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=O(i);o=I(s[a],e,r)}return o}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),x(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=w(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,S=3,E=2,j=1,k=10,C=-2,T=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=C),t&&(r+=E),n.filter((e=>!T(e))).reduce(((e,t)=>e+(_.test(t)?S:""===t?j:k)),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:F([s,u.pathname]),pathnameBase:B(F([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=F([s,u.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(dv){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+dv+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function M(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let n=D(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:U(r),hash:V(i)}}(i,s),d=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const $=["post","put","patch","delete"],H=(new Set($),["get",...$]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const q=r.createContext(null);const K=r.createContext(null);const Y=r.createContext(null);const G=r.createContext(null);const X=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function Z(){return null!=r.useContext(G)}function J(){return Z()||u(!1),r.useContext(G).location}function ee(e){r.useContext(Y).static||r.useLayoutEffect(e)}function te(){let{isDataRoute:e}=r.useContext(X);return e?function(){let{router:e}=de(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);ee((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t]);return i}():function(){Z()||u(!1);let e=r.useContext(q),{basename:t,future:n,navigator:i}=r.useContext(Y),{matches:s}=r.useContext(X),{pathname:o}=J(),a=JSON.stringify(R(s,n.v7_relativeSplatPath)),l=r.useRef(!1);ee((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=L(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e]);return c}()}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Y),{matches:s}=r.useContext(X),{pathname:o}=J(),a=JSON.stringify(R(s,i.v7_relativeSplatPath));return r.useMemo((()=>L(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function re(e,n,i,s){Z()||u(!1);let{navigator:o,static:a}=r.useContext(Y),{matches:l}=r.useContext(X),c=l[l.length-1],d=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,p=J();if(n){var g;let e="string"===typeof n?m(n):n;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||u(!1),f=e}else f=p;let y=f.pathname||"/",b=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=!a&&i&&i.matches&&i.matches.length>0?i.matches:v(e,{pathname:b});let w=le(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:F([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,i,s);return n&&w?r.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:t.Pop}},w):w}function ie(){let e=function(){var e;let t=r.useContext(Q),n=he(ue.UseRouteError),i=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const se=r.createElement(ie,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(X.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(X.Provider,{value:t},i)}function le(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,h=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||se,c&&(d<0&&0===s?(p="route-fallback",!1||pe[p]||(pe[p]=!0),u=!0,f=null):d===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?h:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function de(e){let t=r.useContext(q);return t||u(!1),t}function he(e){let t=r.useContext(K);return t||u(!1),t}function fe(e){let t=function(){let e=r.useContext(X);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ge(e){let{to:t,replace:n,state:i,relative:s}=e;Z()||u(!1);let{future:o,static:a}=r.useContext(Y),{matches:l}=r.useContext(X),{pathname:c}=J(),d=te(),h=L(t,R(l,o.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(h);return r.useEffect((()=>d(JSON.parse(f),{replace:n,state:i,relative:s})),[d,f,s,n,i]),null}function ye(e){u(!1)}function ve(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;Z()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:d,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[d,c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=s,b=r.useMemo((()=>{let e=P(f,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:o}}),[d,f,p,g,y,v,o]);return null==b?null:r.createElement(Y.Provider,{value:h},r.createElement(G.Provider,{children:i,value:b}))}function be(e){let{children:t,location:n}=e;return re(xe(t),n)}new Promise((()=>{}));r.Component;function xe(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,xe(e.props.children,s));e.type!==ye&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=xe(e.props.children,s)),n.push(o)})),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(zW){}new Map;const Ee=i.startTransition;a.flushSync,i.useId;function je(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&Ee?Ee((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.useEffect((()=>me(i)),[i]),r.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=_e(e,Se),{basename:g}=r.useContext(Y),y=!1;if("string"===typeof d&&Ce.test(d)&&(n=d,ke))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(zW){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||u(!1);let{basename:i,navigator:s}=r.useContext(Y),{hash:o,pathname:a,search:l}=ne(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:F([i,a])),s.createHref({pathname:c,search:l,hash:o})}(d,{relative:s}),b=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,c=te(),u=J(),d=ne(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(d);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l})}}),[u,c,d,i,s,n,e,o,a,l])}(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});return r.createElement("a",we({},m,{href:n||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var Ne,Ie;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ie||(Ie={}));const Ae=!1,Oe=!1,Pe="${JSCORE_VERSION}",Me=function(e,t){if(!e)throw De(t)},De=function(e){return new Error("Firebase Database ("+Pe+") INTERNAL ASSERT FAILED: "+e)},Re=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Re(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Fe;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(e){const t=Re(e);return Le.encodeByteArray(t,!0)},Ue=function(e){return Be(e).replace(/\./g,"")},Ve=function(e){try{return Le.decodeString(e,!0)}catch(zW){console.error("base64Decode failed: ",zW)}return null};function ze(e){return $e(void 0,e)}function $e(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=$e(e[n],t[n]));return e}const He=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,We=()=>{try{return He()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(zW){return}const t=e&&Ve(e[1]);return t&&JSON.parse(t)})()}catch(zW){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${zW}`)}},qe=e=>{var t,n;return null===(n=null===(t=We())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ke=e=>{const t=qe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ye=()=>{var e;return null===(e=We())||void 0===e?void 0:e.config},Ge=e=>{var t;return null===(t=We())||void 0===t?void 0:t[`_${e}`]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Qe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ue(JSON.stringify({alg:"none",type:"JWT"})),Ue(JSON.stringify(s)),""].join(".")}function Ze(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Je(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function et(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function tt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function nt(){return!0===Ae||!0===Oe}function rt(){return!function(){var e;const t=null===(e=We())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(zW){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function it(){try{return"object"===typeof indexedDB}catch(zW){return!1}}function st(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(dv){t(dv)}}))}class ot extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,at.prototype.create)}}class at{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(lt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new ot(n,s,t)}}const lt=/\{\$([^}]+)}/g;function ct(e){return JSON.parse(e)}function ut(e){return JSON.stringify(e)}const dt=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=ct(Ve(s[0])||""),n=ct(Ve(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(zW){}return{header:t,claims:n,data:r,signature:i}};function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function pt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function mt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function gt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(yt(n)&&yt(s)){if(!gt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yt(e){return null!==e&&"object"===typeof e}function vt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function bt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function xt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class wt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class _t{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=St),void 0===r.error&&(r.error=St),void 0===r.complete&&(r.complete=St);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(zW){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(zW){"undefined"!==typeof console&&console.error&&console.error(zW)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function St(){}function Et(e,t){return`${e} failed: ${t} argument `}const jt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function kt(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Ct(e){return e&&e._delegate?e._delegate:e}class Tt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Nt="[DEFAULT]";class It{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Xe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(zW){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(zW){if(r)return null;throw zW}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Nt})}catch(zW){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(zW){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Nt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;return this.component?this.component.multipleInstances?e:Nt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class At{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new It(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ot=[];var Pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pt||(Pt={}));const Mt={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Dt=Pt.INFO,Rt={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Lt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Rt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Ft{constructor(e){this.name=e,this._logLevel=Dt,this._logHandler=Lt,this._userLogHandler=null,Ot.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Mt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}let Bt,Ut;const Vt=new WeakMap,zt=new WeakMap,$t=new WeakMap,Ht=new WeakMap,Wt=new WeakMap;let qt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return zt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Kt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ut||(Ut=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Xt(this),n),Gt(Vt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gt(e.apply(Xt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Xt(this),t,...r);return $t.set(s,t.sort?t.sort():[t]),Gt(s)}}function Yt(e){return"function"===typeof e?Kt(e):(e instanceof IDBTransaction&&function(e){if(zt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));zt.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,Bt||(Bt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,qt):e)}function Gt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Gt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Vt.set(t,e)})).catch((()=>{})),Wt.set(t,e),t}(e);if(Ht.has(e))return Ht.get(e);const t=Yt(e);return t!==e&&(Ht.set(e,t),Wt.set(t,e)),t}const Xt=e=>Wt.get(e);function Qt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Gt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Gt(o.result),e.oldVersion,e.newVersion,Gt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Zt=["get","getKey","getAll","getAllKeys","count"],Jt=["put","add","delete","clear"],en=new Map;function tn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(en.get(t))return en.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Jt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Zt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return en.set(t,s),s}!function(e){qt=e(qt)}((e=>({...e,get:(t,n,r)=>tn(t,n)||e.get(t,n,r),has:(t,n)=>!!tn(t,n)||e.has(t,n)})));class nn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const rn="@firebase/app",sn="0.11.1",on=new Ft("@firebase/app"),an="@firebase/app-compat",ln="@firebase/analytics-compat",cn="@firebase/analytics",un="@firebase/app-check-compat",dn="@firebase/app-check",hn="@firebase/auth",fn="@firebase/auth-compat",pn="@firebase/database",mn="@firebase/data-connect",gn="@firebase/database-compat",yn="@firebase/functions",vn="@firebase/functions-compat",bn="@firebase/installations",xn="@firebase/installations-compat",wn="@firebase/messaging",_n="@firebase/messaging-compat",Sn="@firebase/performance",En="@firebase/performance-compat",jn="@firebase/remote-config",kn="@firebase/remote-config-compat",Cn="@firebase/storage",Tn="@firebase/storage-compat",Nn="@firebase/firestore",In="@firebase/vertexai",An="@firebase/firestore-compat",On="firebase",Pn="[DEFAULT]",Mn={[rn]:"fire-core",[an]:"fire-core-compat",[cn]:"fire-analytics",[ln]:"fire-analytics-compat",[dn]:"fire-app-check",[un]:"fire-app-check-compat",[hn]:"fire-auth",[fn]:"fire-auth-compat",[pn]:"fire-rtdb",[mn]:"fire-data-connect",[gn]:"fire-rtdb-compat",[yn]:"fire-fn",[vn]:"fire-fn-compat",[bn]:"fire-iid",[xn]:"fire-iid-compat",[wn]:"fire-fcm",[_n]:"fire-fcm-compat",[Sn]:"fire-perf",[En]:"fire-perf-compat",[jn]:"fire-rc",[kn]:"fire-rc-compat",[Cn]:"fire-gcs",[Tn]:"fire-gcs-compat",[Nn]:"fire-fst",[An]:"fire-fst-compat",[In]:"fire-vertex","fire-js":"fire-js",[On]:"fire-js-all"},Dn=new Map,Rn=new Map,Ln=new Map;function Fn(e,t){try{e.container.addComponent(t)}catch(zW){on.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,zW)}}function Bn(e){const t=e.name;if(Ln.has(t))return on.debug(`There were multiple attempts to register component ${t}.`),!1;Ln.set(t,e);for(const n of Dn.values())Fn(n,e);for(const n of Rn.values())Fn(n,e);return!0}function Un(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const zn=new at("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $n{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}const Hn="11.3.1";function Wn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Pn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw zn.create("bad-app-name",{appName:String(i)});if(n||(n=Ye()),!n)throw zn.create("no-options");const s=Dn.get(i);if(s){if(gt(n,s.options)&&gt(r,s.config))return s;throw zn.create("duplicate-app",{appName:i})}const o=new At(i);for(const l of Ln.values())o.addComponent(l);const a=new $n(n,r,o);return Dn.set(i,a),a}function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;const t=Dn.get(e);if(!t&&e===Pn&&Ye())return Wn();if(!t)throw zn.create("no-app",{appName:e});return t}function Kn(e,t,n){var r;let i=null!==(r=Mn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void on.warn(e.join(" "))}Bn(new Tt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Yn="firebase-heartbeat-store";let Gn=null;function Xn(){return Gn||(Gn=Qt("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Yn)}catch(zW){console.warn(zW)}}}).catch((e=>{throw zn.create("idb-open",{originalErrorMessage:e.message})}))),Gn}async function Qn(e,t){try{const n=(await Xn()).transaction(Yn,"readwrite"),r=n.objectStore(Yn);await r.put(t,Zn(e)),await n.done}catch(zW){if(zW instanceof ot)on.warn(zW.message);else{const t=zn.create("idb-set",{originalErrorMessage:null===zW||void 0===zW?void 0:zW.message});on.warn(t.message)}}}function Zn(e){return`${e.name}!${e.options.appId}`}class Jn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=er();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(zW){on.warn(zW)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=er(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),nr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ue(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(zW){return on.warn(zW),""}}}function er(){return(new Date).toISOString().substring(0,10)}class tr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!it()&&st().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Xn()).transaction(Yn),n=await t.objectStore(Yn).get(Zn(e));return await t.done,n}catch(zW){if(zW instanceof ot)on.warn(zW.message);else{const t=zn.create("idb-get",{originalErrorMessage:null===zW||void 0===zW?void 0:zW.message});on.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nr(e){return Ue(JSON.stringify({version:2,heartbeats:e})).length}var rr;rr="",Bn(new Tt("platform-logger",(e=>new nn(e)),"PRIVATE")),Bn(new Tt("heartbeat",(e=>new Jn(e)),"PRIVATE")),Kn(rn,sn,rr),Kn(rn,sn,"esm2017"),Kn("fire-js","");function ir(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function sr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const or=sr,ar=new at("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lr=new Ft("@firebase/auth");function cr(e){if(lr.logLevel<=Pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lr.error(`Auth (${Hn}): ${e}`,...n)}}function ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw pr(e,...n)}function dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pr(e,...n)}function hr(e,t,n){const r=Object.assign(Object.assign({},or()),{[t]:n});return new at("auth","Firebase",r).create(t,{appName:e.name})}function fr(e){return hr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ar.create(e,...n)}function mr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw pr(t,...r)}}function gr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw cr(t),new Error(t)}function yr(e,t){e||gr(t)}function vr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function br(){return"http:"===xr()||"https:"===xr()}function xr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class wr{constructor(e,t){this.shortDelay=e,this.longDelay=t,yr(t>e,"Short delay should be less than long delay!"),this.isMobile=Je()||tt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(br()||et()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _r(e,t){yr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Sr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Er={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},jr=new wr(3e4,6e4);function kr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Cr(e,t,n,r){return Tr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=vt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Sr.fetch()(Ir(e,e.config.apiHost,n,o),l)}))}async function Tr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Er),t);try{const t=new Or(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Pr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Pr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Pr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Pr(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw hr(e,a,o);ur(e,a)}}catch(zW){if(zW instanceof ot)throw zW;ur(e,"network-request-failed",{message:String(zW)})}}async function Nr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Cr(e,t,n,r,i);return"mfaPendingCredential"in s&&ur(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ir(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?_r(e.config,i):`${e.config.apiScheme}://${i}`}function Ar(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Or{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(dr(this.auth,"network-request-failed"))),jr.get())}))}}function Pr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dr(e,t,r);return i.customData._tokenResponse=n,i}function Mr(e){return void 0!==e&&void 0!==e.enterprise}class Dr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ar(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Rr(e,t){return Cr(e,"GET","/v2/recaptchaConfig",kr(e,t))}async function Lr(e,t){return Cr(e,"POST","/v1/accounts:lookup",t)}function Fr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(zW){}}function Br(e){return 1e3*Number(e)}function Ur(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return cr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ve(n);return e?JSON.parse(e):(cr("Failed to decode base64 JWT payload"),null)}catch(zW){return cr("Caught error parsing JWT payload as JSON",null===zW||void 0===zW?void 0:zW.toString()),null}}function Vr(e){const t=Ur(e);return mr(t,"internal-error"),mr("undefined"!==typeof t.exp,"internal-error"),mr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function zr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(zW){throw zW instanceof ot&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(zW)&&e.auth.currentUser===e&&await e.auth.signOut(),zW}}class $r{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(zW){return void("auth/network-request-failed"===(null===zW||void 0===zW?void 0:zW.code)&&this.schedule(!0))}this.schedule()}}class Hr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fr(this.lastLoginAt),this.creationTime=Fr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await zr(e,Lr(n,{idToken:r}));mr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?qr(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hr(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function qr(e){return e.map((e=>{var{providerId:t}=e,n=ir(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Kr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mr(e.idToken,"internal-error"),mr("undefined"!==typeof e.idToken,"internal-error"),mr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Vr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mr(0!==e.length,"internal-error");const t=Vr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(mr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Tr(e,{},(async()=>{const n=vt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Ir(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Sr.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Kr;return n&&(mr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(mr("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(mr("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kr,this.toJSON())}_performRefresh(){return gr("not implemented")}}function Yr(e,t){mr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Gr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ir(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await zr(this,this.stsTokenManager.getToken(this.auth,e));return mr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ct(e),r=await n.getIdToken(t),i=Ur(r);mr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fr(Br(i.auth_time)),issuedAtTime:Fr(Br(i.iat)),expirationTime:Fr(Br(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ct(e);await Wr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(mr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){mr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Wr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await zr(this,async function(e,t){return Cr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:_}=t;mr(v&&_,e,"internal-error");const S=Kr.fromJSON(this.name,_);mr("string"===typeof v,e,"internal-error"),Yr(u,e.name),Yr(d,e.name),mr("boolean"===typeof b,e,"internal-error"),mr("boolean"===typeof x,e,"internal-error"),Yr(h,e.name),Yr(f,e.name),Yr(p,e.name),Yr(m,e.name),Yr(g,e.name),Yr(y,e.name);const E=new Gr({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Kr;r.updateFromServerResponse(t);const i=new Gr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Wr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];mr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?qr(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Kr;o.updateFromIdToken(n);const a=new Gr({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Hr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Xr=new Map;function Qr(e){yr(e instanceof Function,"Expected a class definition");let t=Xr.get(e);return t?(yr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xr.set(e,t),t)}class Zr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zr.type="NONE";const Jr=Zr;function ei(e,t,n){return`firebase:${e}:${t}:${n}`}class ti{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ei(this.userKey,r.apiKey,i),this.fullPersistenceKey=ei("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ti(Qr(Jr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Qr(Jr);const s=ei(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Gr._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new ti(i,e,n)):new ti(i,e,n)}}function ni(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ri(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(li(t))return"Blackberry";if(ci(t))return"Webos";if(ii(t))return"Safari";if((t.includes("chrome/")||si(t))&&!t.includes("edge/"))return"Chrome";if(ai(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/firefox\//i.test(e)}function ii(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/crios\//i.test(e)}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/iemobile/i.test(e)}function ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/android/i.test(e)}function li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/blackberry/i.test(e)}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/webos/i.test(e)}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function di(){return function(){const e=Ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze();return ui(e)||ai(e)||ci(e)||li(e)||/windows phone/i.test(e)||oi(e)}function fi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ni(Ze());break;case"Worker":t=`${ni(Ze())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hn}/${r}`}class pi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(zW){r(zW)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(zW){t.reverse();for(const n of t)try{n()}catch(s$){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===zW||void 0===zW?void 0:zW.message})}}}class mi{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class gi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vi(this),this.idTokenSubscription=new vi(this),this.beforeStateQueue=new pi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ar,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ti.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(zW){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Lr(this,{idToken:e}),n=await Gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(zW){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(zW)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return mr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(zW){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wr(e)}catch(zW){if("auth/network-request-failed"!==(null===zW||void 0===zW?void 0:zW.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(fr(this));const t=e?Ct(e):null;return t&&mr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&mr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Vn(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(fr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Qr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Cr(e,"GET","/v2/passwordPolicy",kr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new mi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new at("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Cr(e,"POST","/v2/accounts:revokeToken",kr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qr(e)||this._popupRedirectResolver;mr(t,this,"argument-error"),this.redirectPersistenceManager=await ti.create(this,[Qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(mr(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(lr.logLevel<=Pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lr.warn(`Auth (${Hn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function yi(e){return Ct(e)}class vi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new _t(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return mr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xi(e){return bi.loadJS(e)}function wi(e){return`__${e}${Math.floor(1e6*Math.random())}`}class _i{constructor(){this.enterprise=new Si}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Si{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ei="NO_RECAPTCHA";class ji{constructor(e){this.type="recaptcha-enterprise",this.auth=yi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Mr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Ei)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new _i).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Rr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Dr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Mr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=bi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),xi(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ki(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new ji(e);let o;if(i)o=Ei;else try{o=await s.verify(n)}catch(dv){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ci(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ki(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ki(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await ki(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await ki(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await ki(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ti(e){const t=yi(e),n=await Rr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Dr(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new ji(t).verify()}}function Ni(e,t,n){const r=yi(e);mr(r._canInitEmulator,r,"emulator-config-failed"),mr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ii(t),{host:o,port:a}=function(e){const t=Ii(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ai(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ai(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ii(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ai(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Oi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,t){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function Pi(e,t){return Cr(e,"POST","/v1/accounts:signUp",t)}async function Mi(e,t){return Nr(e,"POST","/v1/accounts:signInWithPassword",kr(e,t))}async function Di(e,t){return Cr(e,"POST","/v1/accounts:sendOobCode",kr(e,t))}async function Ri(e,t){return Di(e,t)}class Li extends Oi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Li(e,t,"password")}static _fromEmailAndCode(e,t){return new Li(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ci(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Mi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Nr(e,"POST","/v1/accounts:signInWithEmailLink",kr(e,t))}(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ci(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Nr(e,"POST","/v1/accounts:signInWithEmailLink",kr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fi(e,t){return Nr(e,"POST","/v1/accounts:signInWithIdp",kr(e,t))}class Bi extends Oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ir(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Bi(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Fi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Fi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vt(t)}return e}}async function Ui(e,t){return Cr(e,"POST","/v1/accounts:sendVerificationCode",kr(e,t))}const Vi={USER_NOT_FOUND:"user-not-found"};class zi extends Oi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new zi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new zi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Nr(e,"POST","/v1/accounts:signInWithPhoneNumber",kr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Nr(e,"POST","/v1/accounts:signInWithPhoneNumber",kr(e,t));if(n.temporaryProof)throw Pr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Nr(e,"POST","/v1/accounts:signInWithPhoneNumber",kr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Vi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new zi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class $i{constructor(e){var t,n,r,i,s,o;const a=bt(xt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);mr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=bt(xt(e)).link,n=t?bt(xt(t)).deep_link_id:null,r=bt(xt(e)).deep_link_id;return(r?bt(xt(r)).link:null)||r||n||t||e}(e);try{return new $i(t)}catch(n){return null}}}class Hi{constructor(){this.providerId=Hi.PROVIDER_ID}static credential(e,t){return Li._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$i.parseLink(t);return mr(n,"argument-error"),Li._fromEmailAndCode(e,n.code,n.tenantId)}}Hi.PROVIDER_ID="password",Hi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Hi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class qi extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ki extends qi{constructor(){super("facebook.com")}static credential(e){return Bi._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ki.credential(t.oauthAccessToken)}catch(n){return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ki.PROVIDER_ID="facebook.com";class Yi extends qi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bi._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Yi.credential(n,r)}catch(i){return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com",Yi.PROVIDER_ID="google.com";class Gi extends qi{constructor(){super("github.com")}static credential(e){return Bi._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gi.credential(t.oauthAccessToken)}catch(n){return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com",Gi.PROVIDER_ID="github.com";class Xi extends qi{constructor(){super("twitter.com")}static credential(e,t){return Bi._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xi.credential(n,r)}catch(i){return null}}}async function Qi(e,t){return Nr(e,"POST","/v1/accounts:signUp",kr(e,t))}Xi.TWITTER_SIGN_IN_METHOD="twitter.com",Xi.PROVIDER_ID="twitter.com";class Zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Gr._fromIdTokenResponse(e,n,r),s=Ji(n);return new Zi({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ji(n);return new Zi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ji(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class es extends ot{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,es.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new es(e,t,n,r)}}function ts(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw es._fromErrorAndOperation(e,n,t,r);throw n}))}async function ns(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await zr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Zi._forOperation(e,"link",r)}async function rs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Vn(r.app))return Promise.reject(fr(r));const i="reauthenticate";try{const s=await zr(e,ts(r,i,t,e),n);mr(s.idToken,r,"internal-error");const o=Ur(s.idToken);mr(o,r,"internal-error");const{sub:a}=o;return mr(e.uid===a,r,"user-mismatch"),Zi._forOperation(e,i,s)}catch(zW){throw"auth/user-not-found"===(null===zW||void 0===zW?void 0:zW.code)&&ur(r,"user-mismatch"),zW}}async function is(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Vn(e.app))return Promise.reject(fr(e));const r="signIn",i=await ts(e,r,t),s=await Zi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ss(e,t){return is(yi(e),t)}function os(e,t,n){var r;mr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),mr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),mr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(mr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(mr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function as(e){const t=yi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ls(e,t,n){if(Vn(e.app))return Promise.reject(fr(e));const r=yi(e),i=Ci(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qi,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&as(e),t})),o=await Zi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function cs(e){return Ct(e).signOut()}function us(e,t){return Cr(e,"POST","/v2/accounts/mfaEnrollment:start",kr(e,t))}new WeakMap;const ds="__sak";class hs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ds,"1"),this.storage.removeItem(ds),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class fs extends hs{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);di()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fs.type="LOCAL";const ps=fs;class ms extends hs{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ms.type="SESSION";const gs=ms;class ys{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ys(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ys.receivers=[];class bs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=vs("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function xs(){return window}function ws(){return"undefined"!==typeof xs().WorkerGlobalScope&&"function"===typeof xs().importScripts}const _s="firebaseLocalStorageDb",Ss="firebaseLocalStorage",Es="fbase_key";class js{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ks(e,t){return e.transaction([Ss],t?"readwrite":"readonly").objectStore(Ss)}function Cs(){const e=indexedDB.open(_s,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ss,{keyPath:Es})}catch(zW){n(zW)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ss)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(_s);return new js(e).toPromise()}(),t(await Cs()))}))}))}async function Ts(e,t,n){const r=ks(e,!0).put({[Es]:t,value:n});return new js(r).toPromise()}function Ns(e,t){const n=ks(e,!0).delete(t);return new js(n).toPromise()}class Is{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Cs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(zW){if(t++>3)throw zW;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ws()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ys._getInstance(ws()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new bs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cs();return await Ts(e,ds,"1"),await Ns(e,ds),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ts(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ks(e,!1).get(t),r=await new js(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ns(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ks(e,!1).getAll();return new js(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Is.type="LOCAL";const As=Is;function Os(e,t){return Cr(e,"POST","/v2/accounts/mfaSignIn:start",kr(e,t))}wi("rcb"),new wr(3e4,6e4);const Ps="recaptcha";async function Ms(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Ti(e)}catch(dv){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){mr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Ci(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ei){mr((null===n||void 0===n?void 0:n.type)===Ps,e,"argument-error");return us(e,await Ds(e,t,n))}return us(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{mr("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;mr(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Ci(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ei){mr((null===n||void 0===n?void 0:n.type)===Ps,e,"argument-error");return Os(e,await Ds(e,t,n))}return Os(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ci(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Ei){mr((null===n||void 0===n?void 0:n.type)===Ps,e,"argument-error");return Ui(e,await Ds(e,t,n))}return Ui(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ds(e,t,n){mr(n.type===Ps,e,"argument-error");const r=await n.verify();mr("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Rs{constructor(e){this.providerId=Rs.PROVIDER_ID,this.auth=yi(e)}verifyPhoneNumber(e,t){return Ms(this.auth,e,Ct(t))}static credential(e,t){return zi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Rs.credentialFromTaggedObject(t)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?zi._fromTokenResponse(n,r):null}}function Ls(e,t){return t?Qr(t):(mr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Rs.PROVIDER_ID="phone",Rs.PHONE_SIGN_IN_METHOD="phone";class Fs extends Oi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bs(e){return is(e.auth,new Fs(e),e.bypassAuthState)}function Us(e){const{auth:t,user:n}=e;return mr(n,t,"internal-error"),rs(n,new Fs(e),e.bypassAuthState)}async function Vs(e){const{auth:t,user:n}=e;return mr(n,t,"internal-error"),ns(n,new Fs(e),e.bypassAuthState)}class zs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(zW){this.reject(zW)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(zW){this.reject(zW)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bs;case"linkViaPopup":case"linkViaRedirect":return Vs;case"reauthViaPopup":case"reauthViaRedirect":return Us;default:ur(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $s=new wr(2e3,1e4);class Hs extends zs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mr(e,this.auth,"internal-error"),e}async onExecution(){yr(1===this.filter.length,"Popup operations only handle one event");const e=vs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(dr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,$s.get())};e()}}Hs.currentPopupAction=null;const Ws=new Map;class qs extends zs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ws.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Gs(t),r=Ys(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(zW){e=()=>Promise.reject(zW)}Ws.set(this.auth._key(),e)}return this.bypassAuthState||Ws.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ks(e,t){Ws.set(e._key(),t)}function Ys(e){return Qr(e._redirectPersistence)}function Gs(e){return ei("pendingRedirect",e.config.apiKey,e.name)}async function Xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Vn(e.app))return Promise.reject(fr(e));const r=yi(e),i=Ls(r,t),s=new qs(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Qs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Js(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Js(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zs(e))}saveEventToCache(e){this.cachedEventUids.add(Zs(e)),this.lastProcessedEventTime=Date.now()}}function Zs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Js(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const eo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,to=/^https?/;async function no(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Cr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ro(r))return}catch(n){}ur(e,"unauthorized-domain")}function ro(e){const t=vr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!to.test(n))return!1;if(eo.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const io=new wr(3e4,6e4);function so(){const e=xs().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function oo(e){return new Promise(((t,n)=>{var r,i,s;function o(){so(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{so(),n(dr(e,"network-request-failed"))},timeout:io.get()})}if(null===(i=null===(r=xs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=xs().gapi)||void 0===s?void 0:s.load)){const t=wi("iframefcb");return xs()[t]=()=>{gapi.load?o():n(dr(e,"network-request-failed"))},xi(`${bi.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw ao=null,e}))}let ao=null;const lo=new wr(5e3,15e3),co={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ho(e){const t=e.config;mr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_r(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Hn},i=uo.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vt(r).slice(1)}`}async function fo(e){const t=await function(e){return ao=ao||oo(e),ao}(e),n=xs().gapi;return mr(n,e,"internal-error"),t.open({where:document.body,url:ho(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:co,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=dr(e,"network-request-failed"),s=xs().setTimeout((()=>{r(i)}),lo.get());function o(){xs().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const po={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mo{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(zW){}}}function go(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},po),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ze().toLowerCase();n&&(a=si(c)?"_blank":n),ri(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return ui(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new mo(null);const d=window.open(t||"",a,u);mr(d,e,"popup-blocked");try{d.focus()}catch(zW){}return new mo(d)}const yo="__/auth/handler",vo="emulator/auth/handler",bo=encodeURIComponent("fac");async function xo(e,t,n,r,i,s){mr(e.config.authDomain,e,"auth-domain-config-required"),mr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Hn,eventId:i};if(t instanceof Wi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",pt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof qi){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${bo}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${yo}`;return _r(t,vo)}(e)}?${vt(a).slice(1)}${c}`}const wo="webStorageSupport";const _o=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gs,this._completeRedirectFn=Xs,this._overrideRedirectResult=Ks}async _openPopup(e,t,n,r){var i;yr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return go(e,await xo(e,t,n,vr(),r),vs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){xs().location.href=e}(await xo(e,t,n,vr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(yr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await fo(e),n=new Qs(e);return t.register("authEvent",(t=>{mr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wo,{type:wo},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[wo];void 0!==i&&t(!!i),ur(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=no(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hi()||ii()||ui()}};var So="@firebase/auth",Eo="1.9.0";class jo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ko=Ge("authIdTokenMaxAge")||300;let Co=null;var To;!function(e){bi=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=dr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),To="Browser",Bn(new Tt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mr(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:To,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fi(To)},c=new gi(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Bn(new Tt("auth-internal",(e=>(e=>new jo(e))(yi(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(So,Eo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(To)),Kn(So,Eo,"esm2017");var No,Io,Ao="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Oo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Io=Oo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},No=Oo.Integer=r}).apply("undefined"!==typeof Ao?Ao:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Po,Mo,Do,Ro,Lo,Fo,Bo,Uo,Vo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Vo&&Vo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var j=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=j.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=j;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function O(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:R[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,P);var R={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function B(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new B(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function q(e,t,n,r,i){if(r&&r.once)return Y(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=J(e);if(l||(e[H]=l=new V(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Y(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function G(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(z(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function Q(e){return e in W?W[e]:W[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function J(e){return(e=e[H])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;w(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,O),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){O.call(this),this.h=e,this.g={}}d(le,O);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function be(){P.call(this,"c")}d(ve,P),d(be,P);var xe={},we=null;function _e(){return we=we||new ne}function Se(e){P.call(this,xe.La,e)}function Ee(e){const t=_e();re(t,new Se(t))}function je(e,t){P.call(this,xe.STAT_EVENT,e),this.stat=t}function ke(e){const t=_e();re(t,new je(t,e))}function Ce(e,t){P.call(this,xe.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ie(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(Wz){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",d(Se,P),xe.STAT_EVENT="statevent",d(je,P),xe.Ma="timingevent",d(Ce,P),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Ae,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Me(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}d(Me,pe),Me.prototype.g=function(){return new XMLHttpRequest},Me.prototype.i=function(){return{}},Ae=new Me;var Le={},Fe={};function Be(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),$e(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Re,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=q(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||an(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Gt(n)}nn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(We(a),$e(a)),r.g=o}else tn(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ee(),We(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),qe(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ke(this),qe(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Fe){4==h&&(this.s=4,ke(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,ke(15),Ie(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ye(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),rn(d),d.M=!0,ke(11))}}else Ie(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),qe(this)}else Ie(this.i,this.l,a,null),Ye(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?an(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ke(this),qe(this)}}}catch(h){}},De.prototype.cancel=function(){this.J=!0,Ke(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),ke(17)),Ke(this),this.s=2,qe(this)):He(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _t(e,t){wt(e),t=jt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return wt(e),t=jt(e,t),e.g.has(t)}function Et(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(jt(e,t),h(n)),e.h+=n.length)}function jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function Tt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(zW){throw t.push(r+"type="+encodeURIComponent("_badmap")),zW}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Rt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){wt(this),this.i=null,e=jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(jt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,St(this,e=jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Nt,pe),Nt.prototype.g=function(){return new It(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),d(It,ne),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Pt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Rt,ne);var Lt=/^https?$/i,Ft=["POST","PUT"];function Bt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),zt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Lt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(Wz){a=""}e.l=a+" ["+e.Z()+"]",Ut(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(zW){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ho){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Jt(e,n),(t=new De(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}un(e)}function Gt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Gt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||I(),T||(C(),T=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Be(n,r,t)}function Jt(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Tt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||I(),T||(C(),T=!0),N.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){on(e),rn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new Ce(r,n)),Qt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)})).catch((()=>{clearTimeout(r),kt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),un(e),Xt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Jt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Rt(new Nt({eb:n})):new Rt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function mn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function gn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function vn(e){this.g=e}(e=Rt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Bt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Bt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(Lz){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Lz){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new De(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Jt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Dt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Be(i,n,null)):Be(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Qe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Gt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),nn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Qt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ve),d(yn,be),d(vn,fn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new gn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Uo=zo.createWebChannelTransport=function(){return new pn},Bo=zo.getStatEventTarget=function(){return _e()},Fo=zo.Event=xe,Lo=zo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,Ro=zo.ErrorCode=Oe,Pe.COMPLETE="complete",Do=zo.EventType=Pe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Mo=zo.WebChannel=ge,zo.FetchXmlHttpFactory=Nt,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,Po=zo.XhrIo=Rt}).apply("undefined"!==typeof Vo?Vo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const $o="@firebase/firestore",Ho="4.7.8";class Wo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wo.UNAUTHENTICATED=new Wo(null),Wo.GOOGLE_CREDENTIALS=new Wo("google-credentials-uid"),Wo.FIRST_PARTY=new Wo("first-party-uid"),Wo.MOCK_USER=new Wo("mock-user");let qo="11.3.1";const Ko=new Ft("@firebase/firestore");function Yo(){return Ko.logLevel}function Go(e){if(Ko.logLevel<=Pt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zo);Ko.debug(`Firestore (${qo}): ${e}`,...i)}}function Xo(e){if(Ko.logLevel<=Pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zo);Ko.error(`Firestore (${qo}): ${e}`,...i)}}function Qo(e){if(Ko.logLevel<=Pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zo);Ko.warn(`Firestore (${qo}): ${e}`,...i)}}function Zo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Jo(){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Xo(e),new Error(e)}function ea(e,t){e||Jo()}function ta(e,t){return e}const na={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ra extends ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ia{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class sa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wo.UNAUTHENTICATED)))}shutdown(){}}class aa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class la{constructor(e){this.t=e,this.currentUser=Wo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ea(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ia,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Go("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Go("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ia)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Go("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ea("string"==typeof t.accessToken),new sa(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ea(null===e||"string"==typeof e),new Wo(e)}}class ca{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Wo.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ua{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ca(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Wo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class da{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ha{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Vn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ea(void 0===this.o);const n=e=>{null!=e.error&&Go("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Go("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Go("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Go("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new da(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ea("string"==typeof e.token),this.R=e.token,new da(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function fa(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class pa{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=fa(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function ma(e,t){return e<t?-1:e>t?1:0}function ga(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const ya=-62135596800,va=1e6;class ba{static now(){return ba.fromMillis(Date.now())}static fromDate(e){return ba.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*va);return new ba(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ra(na.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ra(na.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ya)throw new ra(na.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ra(na.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/va}_compareTo(e){return this.seconds===e.seconds?ma(this.nanoseconds,e.nanoseconds):ma(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ya;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xa{static fromTimestamp(e){return new xa(e)}static min(){return new xa(new ba(0,0))}static max(){return new xa(new ba(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wa="__name__";class _a{constructor(e,t,n){void 0===t?t=0:t>e.length&&Jo(),void 0===n?n=e.length-t:n>e.length-t&&Jo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===_a.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _a?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=_a.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=_a.isNumericId(e),r=_a.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?_a.extractNumericId(e).compare(_a.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return No.fromString(e.substring(4,e.length-2))}}class Sa extends _a{construct(e,t,n){return new Sa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ra(na.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Sa(e)}static emptyPath(){return new Sa([])}}const Ea=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ja extends _a{construct(e,t,n){return new ja(e,t,n)}static isValidIdentifier(e){return Ea.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ja.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===wa}static keyField(){return new ja([wa])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ra(na.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ra(na.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ra(na.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ra(na.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ja(t)}static emptyPath(){return new ja([])}}class ka{constructor(e){this.path=e}static fromPath(e){return new ka(Sa.fromString(e))}static fromName(e){return new ka(Sa.fromString(e).popFirst(5))}static empty(){return new ka(Sa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Sa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ka(new Sa(e.slice()))}}const Ca=-1;class Ta{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Ta.UNKNOWN_ID=-1;function Na(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=xa.fromTimestamp(1e9===r?new ba(n+1,0):new ba(n,r));return new Aa(i,ka.empty(),t)}function Ia(e){return new Aa(e.readTime,e.key,Ca)}class Aa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Aa(xa.min(),ka.empty(),Ca)}static max(){return new Aa(xa.max(),ka.empty(),Ca)}}function Oa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ka.comparator(e.documentKey,t.documentKey),0!==n?n:ma(e.largestBatchId,t.largestBatchId))}const Pa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ma{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Da(e){if(e.code!==na.FAILED_PRECONDITION||e.message!==Pa)throw e;Go("LocalStore","Unexpectedly lost primary lease")}class Ra{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ra(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ra?t:Ra.resolve(t)}catch(e){return Ra.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ra.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ra.reject(t)}static resolve(e){return new Ra(((t,n)=>{t(e)}))}static reject(e){return new Ra(((t,n)=>{n(e)}))}static waitFor(e){return new Ra(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ra.resolve(!1);for(const n of e)t=t.next((e=>e?Ra.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ra(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ra(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function La(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fa(e){return"IndexedDbTransactionError"===e.name}class Ba{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ba.ae=-1;const Ua=-1;function Va(e){return null==e}function za(e){return 0===e&&1/e==-1/0}function $a(e){return"number"==typeof e&&Number.isInteger(e)&&!za(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ha="\x01";function Wa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ka(t)),t=qa(e.get(n),t);return Ka(t)}function qa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ha:n+="\x01\x11";break;default:n+=t}}return n}function Ka(e){return e+Ha+"\x01"}const Ya="remoteDocuments",Ga="owner",Xa="mutationQueues",Qa="mutations";const Za="documentMutations",Ja="remoteDocumentsV14",el="remoteDocumentGlobal",tl="targets",nl="targetDocuments",rl="targetGlobal",il="collectionParents",sl="clientMetadata",ol="bundles",al="namedQueries",ll="indexConfiguration",cl="indexState",ul="indexEntries",dl="documentOverlays",hl="globals",fl=[Xa,Qa,Za,Ya,tl,Ga,rl,nl,sl,el,il,ol,al],pl=[Xa,Qa,Za,Ja,tl,Ga,rl,nl,sl,el,il,ol,al,dl],ml=pl,gl=[...ml,ll,cl,ul];function yl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class xl{constructor(e,t){this.comparator=e,this.root=t||_l.EMPTY}insert(e,t){return new xl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_l.BLACK,null,null))}remove(e){return new xl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_l.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _l{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:_l.RED,this.left=null!=r?r:_l.EMPTY,this.right=null!=i?i:_l.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new _l(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _l.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return _l.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_l.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Jo();if(this.right.isRed())throw Jo();const e=this.left.check();if(e!==this.right.check())throw Jo();return e+(this.isRed()?0:1)}}_l.EMPTY=null,_l.RED=!0,_l.BLACK=!1,_l.EMPTY=new class{constructor(){this.size=0}get key(){throw Jo()}get value(){throw Jo()}get color(){throw Jo()}get left(){throw Jo()}get right(){throw Jo()}copy(e,t,n,r,i){return this}insert(e,t,n){return new _l(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sl{constructor(e){this.comparator=e,this.data=new xl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new El(this.data.getIterator())}getIteratorFrom(e){return new El(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Sl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Sl(this.comparator);return t.data=e,t}}class El{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jl{constructor(e){this.fields=e,e.sort(ja.comparator)}static empty(){return new jl([])}unionWith(e){let t=new Sl(ja.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new jl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class kl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new kl("Invalid base64 string: "+e):e}}(e);return new Cl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Cl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ma(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cl.EMPTY_BYTE_STRING=new Cl("");const Tl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nl(e){if(ea(!!e),"string"==typeof e){let t=0;const n=Tl.exec(e);if(ea(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Il(e.seconds),nanos:Il(e.nanos)}}function Il(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Al(e){return"string"==typeof e?Cl.fromBase64String(e):Cl.fromUint8Array(e)}const Ol="server_timestamp",Pl="__type__",Ml="__previous_value__",Dl="__local_write_time__";function Rl(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Pl])||void 0===n?void 0:n.stringValue)===Ol}function Ll(e){const t=e.mapValue.fields[Ml];return Rl(t)?Ll(t):t}function Fl(e){const t=Nl(e.mapValue.fields[Dl].timestampValue);return new ba(t.seconds,t.nanos)}class Bl{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const Ul="(default)";class Vl{constructor(e,t){this.projectId=e,this.database=t||Ul}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database===Ul}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}const zl="__type__",$l="__max__",Hl={mapValue:{fields:{__type__:{stringValue:$l}}}},Wl="__vector__",ql="value";function Kl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Rl(e)?4:uc(e)?9007199254740991:lc(e)?10:11:Jo()}function Yl(e,t){if(e===t)return!0;const n=Kl(e);if(n!==Kl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fl(e).isEqual(Fl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nl(e.timestampValue),r=Nl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Al(e.bytesValue).isEqual(Al(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Il(e.geoPointValue.latitude)===Il(t.geoPointValue.latitude)&&Il(e.geoPointValue.longitude)===Il(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Il(e.integerValue)===Il(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Il(e.doubleValue),r=Il(t.doubleValue);return n===r?za(n)===za(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ga(e.arrayValue.values||[],t.arrayValue.values||[],Yl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yl(n)!==yl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yl(n[i],r[i])))return!1;return!0}(e,t);default:return Jo()}}function Gl(e,t){return void 0!==(e.values||[]).find((e=>Yl(e,t)))}function Xl(e,t){if(e===t)return 0;const n=Kl(e),r=Kl(t);if(n!==r)return ma(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ma(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Il(e.integerValue||e.doubleValue),r=Il(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ql(e.timestampValue,t.timestampValue);case 4:return Ql(Fl(e),Fl(t));case 5:return ma(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Al(e),r=Al(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ma(n[i],r[i]);if(0!==e)return e}return ma(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ma(Il(e.latitude),Il(t.latitude));return 0!==n?n:ma(Il(e.longitude),Il(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Zl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[ql])||void 0===n?void 0:n.arrayValue,c=null===(r=a[ql])||void 0===r?void 0:r.arrayValue,u=ma((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Zl(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Hl.mapValue&&t===Hl.mapValue)return 0;if(e===Hl.mapValue)return 1;if(t===Hl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ma(r[o],s[o]);if(0!==e)return e;const t=Xl(n[r[o]],i[s[o]]);if(0!==t)return t}return ma(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Jo()}}function Ql(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ma(e,t);const n=Nl(e),r=Nl(t),i=ma(n.seconds,r.seconds);return 0!==i?i:ma(n.nanos,r.nanos)}function Zl(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Xl(n[i],r[i]);if(e)return e}return ma(n.length,r.length)}function Jl(e){return ec(e)}function ec(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Al(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ka.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ec(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ec(e.fields[i])}`;return n+"}"}(e.mapValue):Jo()}function tc(e){switch(Kl(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ll(e);return t?16+tc(t):16;case 5:return 2*e.stringValue.length;case 6:return Al(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+tc(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return vl(e.fields,((e,n)=>{t+=e.length+tc(n)})),t}(e.mapValue);default:throw Jo()}}function nc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function rc(e){return!!e&&"integerValue"in e}function ic(e){return!!e&&"arrayValue"in e}function sc(e){return!!e&&"nullValue"in e}function oc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ac(e){return!!e&&"mapValue"in e}function lc(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[zl])||void 0===n?void 0:n.stringValue)===Wl}function cc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=cc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=cc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function uc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===$l}class dc{constructor(e){this.value=e}static empty(){return new dc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(t)}setAll(e){let t=ja.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=cc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ac(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){vl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new dc(cc(this.value))}}function hc(e){const t=[];return vl(e.fields,((e,n)=>{const r=new ja([e]);if(ac(n)){const e=hc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new jl(t)}class fc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new fc(e,0,xa.min(),xa.min(),xa.min(),dc.empty(),0)}static newFoundDocument(e,t,n,r){return new fc(e,1,t,xa.min(),n,r,0)}static newNoDocument(e,t){return new fc(e,2,t,xa.min(),xa.min(),dc.empty(),0)}static newUnknownDocument(e,t){return new fc(e,3,t,xa.min(),xa.min(),dc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}function mc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ka.comparator(ka.fromName(o.referenceValue),n.key):Xl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yl(e.position[n],t.position[n]))return!1;return!0}class yc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function vc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class bc{}class xc extends bc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Tc(e,t,n):"array-contains"===t?new Oc(e,n):"in"===t?new Pc(e,n):"not-in"===t?new Mc(e,n):"array-contains-any"===t?new Dc(e,n):new xc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Nc(e,n):new Ic(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xl(t,this.value)):null!==t&&Kl(this.value)===Kl(t)&&this.matchesComparison(Xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wc extends bc{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new wc(e,t)}matches(e){return _c(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function _c(e){return"and"===e.op}function Sc(e){return Ec(e)&&_c(e)}function Ec(e){for(const t of e.filters)if(t instanceof wc)return!1;return!0}function jc(e){if(e instanceof xc)return e.field.canonicalString()+e.op.toString()+Jl(e.value);if(Sc(e))return e.filters.map((e=>jc(e))).join(",");{const t=e.filters.map((e=>jc(e))).join(",");return`${e.op}(${t})`}}function kc(e,t){return e instanceof xc?function(e,t){return t instanceof xc&&e.op===t.op&&e.field.isEqual(t.field)&&Yl(e.value,t.value)}(e,t):e instanceof wc?function(e,t){return t instanceof wc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&kc(n,t.filters[r])),!0)}(e,t):void Jo()}function Cc(e){return e instanceof xc?function(e){return`${e.field.canonicalString()} ${e.op} ${Jl(e.value)}`}(e):e instanceof wc?function(e){return e.op.toString()+" {"+e.getFilters().map(Cc).join(" ,")+"}"}(e):"Filter"}class Tc extends xc{constructor(e,t,n){super(e,t,n),this.key=ka.fromName(n.referenceValue)}matches(e){const t=ka.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nc extends xc{constructor(e,t){super(e,"in",t),this.keys=Ac("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ic extends xc{constructor(e,t){super(e,"not-in",t),this.keys=Ac("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ac(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ka.fromName(e.referenceValue)))}class Oc extends xc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ic(t)&&Gl(t.arrayValue,this.value)}}class Pc extends xc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gl(this.value.arrayValue,t)}}class Mc extends xc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gl(this.value.arrayValue,t)}}class Dc extends xc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Gl(this.value.arrayValue,e)))}}class Rc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function Lc(e){return new Rc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Fc(e){const t=ta(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>jc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Va(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Jl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Jl(e))).join(",")),t.le=e}return t.le}function Bc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!vc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!kc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gc(e.startAt,t.startAt)&&gc(e.endAt,t.endAt)}function Uc(e){return ka.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function zc(e,t,n,r,i,s,o,a){return new Vc(e,t,n,r,i,s,o,a)}function $c(e){return new Vc(e)}function Hc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wc(e){return null!==e.collectionGroup}function qc(e){const t=ta(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Sl(ja.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new yc(r,n))})),e.has(ja.keyField().canonicalString())||t.he.push(new yc(ja.keyField(),n))}return t.he}function Kc(e){const t=ta(e);return t.Pe||(t.Pe=Yc(t,qc(e))),t.Pe}function Yc(e,t){if("F"===e.limitType)return Lc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new yc(e.field,t)}));const n=e.endAt?new pc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pc(e.startAt.position,e.startAt.inclusive):null;return Lc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Gc(e,t){const n=e.filters.concat([t]);return new Vc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Xc(e,t,n){return new Vc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qc(e,t){return Bc(Kc(e),Kc(t))&&e.limitType===t.limitType}function Zc(e){return`${Fc(Kc(e))}|lt:${e.limitType}`}function Jc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Cc(e))).join(", ")}]`),Va(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Jl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Jl(e))).join(",")),`Target(${t})`}(Kc(e))}; limitType=${e.limitType})`}function eu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ka.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of qc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=mc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,qc(e),t))&&!(e.endAt&&!function(e,t,n){const r=mc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,qc(e),t))}(e,t)}function tu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function nu(e){return(t,n)=>{let r=!1;for(const i of qc(e)){const e=ru(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ru(e,t,n){const r=e.field.isKeyField()?ka.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xl(r,i):Jo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Jo()}}class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return bl(this.inner)}size(){return this.innerSize}}const su=new xl(ka.comparator);function ou(){return su}const au=new xl(ka.comparator);function lu(){let e=au;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function cu(e){let t=au;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function uu(){return hu()}function du(){return hu()}function hu(){return new iu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const fu=new xl(ka.comparator),pu=new Sl(ka.comparator);function mu(){let e=pu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const gu=new Sl(ma);function yu(){return gu}function vu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:za(t)?"-0":t}}function bu(e){return{integerValue:""+e}}function xu(e,t){return $a(t)?bu(t):vu(e,t)}class wu{constructor(){this._=void 0}}function _u(e,t,n){return e instanceof ju?function(e,t){const n={fields:{[Pl]:{stringValue:Ol},[Dl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Rl(t)&&(t=Ll(t)),t&&(n.fields[Ml]=t),{mapValue:n}}(n,t):e instanceof ku?Cu(e,t):e instanceof Tu?Nu(e,t):function(e,t){const n=Eu(e,t),r=Au(n)+Au(e.Ie);return rc(n)&&rc(e.Ie)?bu(r):vu(e.serializer,r)}(e,t)}function Su(e,t,n){return e instanceof ku?Cu(e,t):e instanceof Tu?Nu(e,t):n}function Eu(e,t){return e instanceof Iu?function(e){return rc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ju extends wu{}class ku extends wu{constructor(e){super(),this.elements=e}}function Cu(e,t){const n=Ou(t);for(const r of e.elements)n.some((e=>Yl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Tu extends wu{constructor(e){super(),this.elements=e}}function Nu(e,t){let n=Ou(t);for(const r of e.elements)n=n.filter((e=>!Yl(e,r)));return{arrayValue:{values:n}}}class Iu extends wu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Au(e){return Il(e.integerValue||e.doubleValue)}function Ou(e){return ic(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Pu{constructor(e,t){this.version=e,this.transformResults=t}}class Mu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mu}static exists(e){return new Mu(void 0,e)}static updateTime(e){return new Mu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Du(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ru{}function Lu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ku(e.key,Mu.none()):new zu(e.key,e.data,Mu.none());{const n=e.data,r=dc.empty();let i=new Sl(ja.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new $u(e.key,r,new jl(i.toArray()),Mu.none())}}function Fu(e,t,n){e instanceof zu?function(e,t,n){const r=e.value.clone(),i=Wu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $u?function(e,t,n){if(!Du(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Bu(e,t,n,r){return e instanceof zu?function(e,t,n,r){if(!Du(e.precondition,t))return n;const i=e.value.clone(),s=qu(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $u?function(e,t,n,r){if(!Du(e.precondition,t))return n;const i=qu(e.fieldTransforms,r,t),s=t.data;return s.setAll(Hu(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Du(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Uu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Eu(r.transform,e||null);null!=i&&(null===n&&(n=dc.empty()),n.set(r.field,i))}return n||null}function Vu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ga(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ku&&t instanceof ku||e instanceof Tu&&t instanceof Tu?ga(e.elements,t.elements,Yl):e instanceof Iu&&t instanceof Iu?Yl(e.Ie,t.Ie):e instanceof ju&&t instanceof ju}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zu extends Ru{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $u extends Ru{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Wu(e,t,n){const r=new Map;ea(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Su(o,a,n[i]))}return r}function qu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,_u(e,s,t))}return r}class Ku extends Ru{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yu extends Ru{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Fu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Bu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Bu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=du();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Lu(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(xa.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),mu())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,((e,t)=>Vu(e,t)))&&ga(this.baseMutations,e.baseMutations,((e,t)=>Vu(e,t)))}}class Xu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ea(e.mutations.length===n.length);let r=fu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Xu(e,t,n,r)}}class Qu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zu{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ju,ed;function td(e){switch(e){case na.OK:return Jo();case na.CANCELLED:case na.UNKNOWN:case na.DEADLINE_EXCEEDED:case na.RESOURCE_EXHAUSTED:case na.INTERNAL:case na.UNAVAILABLE:case na.UNAUTHENTICATED:return!1;case na.INVALID_ARGUMENT:case na.NOT_FOUND:case na.ALREADY_EXISTS:case na.PERMISSION_DENIED:case na.FAILED_PRECONDITION:case na.ABORTED:case na.OUT_OF_RANGE:case na.UNIMPLEMENTED:case na.DATA_LOSS:return!0;default:return Jo()}}function nd(e){if(void 0===e)return Xo("GRPC error has no .code"),na.UNKNOWN;switch(e){case Ju.OK:return na.OK;case Ju.CANCELLED:return na.CANCELLED;case Ju.UNKNOWN:return na.UNKNOWN;case Ju.DEADLINE_EXCEEDED:return na.DEADLINE_EXCEEDED;case Ju.RESOURCE_EXHAUSTED:return na.RESOURCE_EXHAUSTED;case Ju.INTERNAL:return na.INTERNAL;case Ju.UNAVAILABLE:return na.UNAVAILABLE;case Ju.UNAUTHENTICATED:return na.UNAUTHENTICATED;case Ju.INVALID_ARGUMENT:return na.INVALID_ARGUMENT;case Ju.NOT_FOUND:return na.NOT_FOUND;case Ju.ALREADY_EXISTS:return na.ALREADY_EXISTS;case Ju.PERMISSION_DENIED:return na.PERMISSION_DENIED;case Ju.FAILED_PRECONDITION:return na.FAILED_PRECONDITION;case Ju.ABORTED:return na.ABORTED;case Ju.OUT_OF_RANGE:return na.OUT_OF_RANGE;case Ju.UNIMPLEMENTED:return na.UNIMPLEMENTED;case Ju.DATA_LOSS:return na.DATA_LOSS;default:return Jo()}}(ed=Ju||(Ju={}))[ed.OK=0]="OK",ed[ed.CANCELLED=1]="CANCELLED",ed[ed.UNKNOWN=2]="UNKNOWN",ed[ed.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ed[ed.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ed[ed.NOT_FOUND=5]="NOT_FOUND",ed[ed.ALREADY_EXISTS=6]="ALREADY_EXISTS",ed[ed.PERMISSION_DENIED=7]="PERMISSION_DENIED",ed[ed.UNAUTHENTICATED=16]="UNAUTHENTICATED",ed[ed.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ed[ed.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ed[ed.ABORTED=10]="ABORTED",ed[ed.OUT_OF_RANGE=11]="OUT_OF_RANGE",ed[ed.UNIMPLEMENTED=12]="UNIMPLEMENTED",ed[ed.INTERNAL=13]="INTERNAL",ed[ed.UNAVAILABLE=14]="UNAVAILABLE",ed[ed.DATA_LOSS=15]="DATA_LOSS";let rd=null;function id(){return new TextEncoder}const sd=new No([4294967295,4294967295],0);function od(e){const t=id().encode(e),n=new Io;return n.update(t),new Uint8Array(n.digest())}function ad(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new No([n,r],0),new No([i,s],0)]}class ld{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cd(`Invalid padding: ${t}`);if(n<0)throw new cd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new cd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new cd(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=No.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(No.fromNumber(n)));return 1===r.compare(sd)&&(r=new No([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=od(e),[n,r]=ad(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ld(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ee)return;const t=od(e),[n,r]=ad(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ud{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,dd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ud(xa.min(),r,new xl(ma),ou(),mu())}}class dd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new dd(n,t,mu(),mu(),mu())}}class hd{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class fd{constructor(e,t){this.targetId=e,this.ge=t}}class pd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class md{constructor(){this.pe=0,this.ye=vd(),this.we=Cl.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=mu(),t=mu(),n=mu();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Jo()}})),new dd(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=vd()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ea(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class gd{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ou(),this.$e=yd(),this.Ke=yd(),this.Ue=new xl(ma)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Jo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(Uc(i))if(0===n){const e=new ka(i.path);this.ze(t,e,fc.newNoDocument(e,xa.min()))}else ea(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,e)}null==rd||rd.rt(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Al(n).toUint8Array()}catch(e){if(e instanceof kl)return Qo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ld(s,r,i)}catch(e){return Qo(e instanceof cd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Uc(i.target)){const t=new ka(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,fc.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=mu();this.Ke.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new ud(e,t,this.Ue,this.Qe,n);return this.Qe=ou(),this.$e=yd(),this.Ke=yd(),this.Ue=new xl(ma),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new md,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Sl(ma),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Sl(ma),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||Go("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new md),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function yd(){return new xl(ka.comparator)}function vd(){return new xl(ka.comparator)}const bd={asc:"ASCENDING",desc:"DESCENDING"},xd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wd={and:"AND",or:"OR"};class _d{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sd(e,t){return e.useProto3Json||Va(t)?t:{value:t}}function Ed(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kd(e,t){return Ed(e,t.toTimestamp())}function Cd(e){return ea(!!e),xa.fromTimestamp(function(e){const t=Nl(e);return new ba(t.seconds,t.nanos)}(e))}function Td(e,t){return Nd(e,t).canonicalString()}function Nd(e,t){const n=function(e){return new Sa(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Id(e){const t=Sa.fromString(e);return ea(Xd(t)),t}function Ad(e,t){return Td(e.databaseId,t.path)}function Od(e,t){const n=Id(t);if(n.get(1)!==e.databaseId.projectId)throw new ra(na.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ra(na.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ka(Rd(n))}function Pd(e,t){return Td(e.databaseId,t)}function Md(e){const t=Id(e);return 4===t.length?Sa.emptyPath():Rd(t)}function Dd(e){return new Sa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rd(e){return ea(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ld(e,t,n){return{name:Ad(e,t),fields:n.value.mapValue.fields}}function Fd(e,t){let n;if(t instanceof zu)n={update:Ld(e,t.key,t.value)};else if(t instanceof Ku)n={delete:Ad(e,t.key)};else if(t instanceof $u)n={update:Ld(e,t.key,t.data),updateMask:Gd(t.fieldMask)};else{if(!(t instanceof Yu))return Jo();n={verify:Ad(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ju)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ku)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Iu)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Jo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Jo()}(e,t.precondition)),n}function Bd(e,t){return{documents:[Pd(e,t.path)]}}function Ud(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Pd(e,i);const s=function(e){if(0!==e.length)return Yd(wc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:qd(e.field),direction:$d(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Vd(e){let t=Md(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ea(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=zd(e);return t instanceof wc&&Sc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new yc(Kd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Va(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new pc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new pc(n,t)}(n.endAt)),zc(t,i,o,s,a,"F",l,c)}function zd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kd(e.unaryFilter.field);return xc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Kd(e.unaryFilter.field);return xc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kd(e.unaryFilter.field);return xc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kd(e.unaryFilter.field);return xc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Jo()}}(e):void 0!==e.fieldFilter?function(e){return xc.create(Kd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return wc.create(e.compositeFilter.filters.map((e=>zd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Jo()}}(e.compositeFilter.op))}(e):Jo()}function $d(e){return bd[e]}function Hd(e){return xd[e]}function Wd(e){return wd[e]}function qd(e){return{fieldPath:e.canonicalString()}}function Kd(e){return ja.fromServerFormat(e.fieldPath)}function Yd(e){return e instanceof xc?function(e){if("=="===e.op){if(oc(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NAN"}};if(sc(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(oc(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NOT_NAN"}};if(sc(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qd(e.field),op:Hd(e.op),value:e.value}}}(e):e instanceof wc?function(e){const t=e.getFilters().map((e=>Yd(e)));return 1===t.length?t[0]:{compositeFilter:{op:Wd(e.op),filters:t}}}(e):Jo()}function Gd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Xd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Qd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xa.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:xa.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Cl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Qd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zd{constructor(e){this.Tt=e}}function Jd(e){const t=Vd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xc(t,t.limit,"L"):t}class eh{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Il(e.integerValue));else if("doubleValue"in e){const n=Il(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),za(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=Nl(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Al(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?uc(e)?this.ft(t,Number.MAX_SAFE_INTEGER):lc(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Jo()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=ql,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(Il(o)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),ka.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}eh.xt=new eh;class th{constructor(){this.Tn=new nh}addToCollectionParentIndex(e,t){return this.Tn.add(t),Ra.resolve()}getCollectionParents(e,t){return Ra.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Ra.resolve()}deleteFieldIndex(e,t){return Ra.resolve()}deleteAllFieldIndexes(e){return Ra.resolve()}createTargetIndexes(e,t){return Ra.resolve()}getDocumentsMatchingTarget(e,t){return Ra.resolve(null)}getIndexType(e,t){return Ra.resolve(0)}getFieldIndexes(e,t){return Ra.resolve([])}getNextCollectionGroupToUpdate(e){return Ra.resolve(null)}getMinOffset(e,t){return Ra.resolve(Aa.min())}getMinOffsetFromCollectionGroup(e,t){return Ra.resolve(Aa.min())}updateCollectionGroup(e,t,n){return Ra.resolve()}updateIndexEntries(e,t){return Ra.resolve()}}class nh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sl(Sa.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Sl(Sa.comparator)).toArray()}}new Uint8Array(0);const rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ih=41943040;class sh{static withCacheSize(e){return new sh(e,sh.DEFAULT_COLLECTION_PERCENTILE,sh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}sh.DEFAULT_COLLECTION_PERCENTILE=10,sh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sh.DEFAULT=new sh(ih,sh.DEFAULT_COLLECTION_PERCENTILE,sh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sh.DISABLED=new sh(-1,0,0);class oh{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new oh(0)}static Un(){return new oh(-1)}}const ah="LruGarbageCollector",lh=1048576;function ch(e,t){let[n,r]=e,[i,s]=t;const o=ma(n,i);return 0===o?ma(r,s):o}class uh{constructor(e){this.Hn=e,this.buffer=new Sl(ch),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ch(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){Go(ah,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Fa(e)?Go(ah,"Ignoring IndexedDB error during garbage collection: ",e):await Da(e)}await this.er(3e5)}))}}class hh{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ra.resolve(Ba.ae);const n=new uh(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Go("LruGarbageCollector","Garbage collection skipped; disabled"),Ra.resolve(rh)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Go("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rh):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Go("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Yo()<=Pt.DEBUG&&Go("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),Ra.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function fh(e,t){return new hh(e,t)}class ph{constructor(){this.changes=new iu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ra.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Bu(n.mutation,e,jl.empty(),ba.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,mu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mu();const r=uu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=lu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=uu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,mu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ou();const s=hu(),o=hu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof $u)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Bu(o.mutation,t,o.mutation.getFieldMask(),ba.now())):s.set(t.key,jl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new mh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=hu();let r=new xl(((e,t)=>e-t)),i=mu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||jl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||mu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=du();l.forEach((e=>{if(!i.has(e)){const r=Lu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ra.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ka.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ra.resolve(uu());let o=Ca,a=i;return s.next((t=>Ra.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ra.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,mu()))).next((e=>({batchId:o,changes:cu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ka(t)).next((e=>{let t=lu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=lu();return this.indexManager.getCollectionParents(e,i).next((o=>Ra.forEach(o,(o=>{const a=function(e,t){return new Vc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,fc.newInvalidDocument(r)))}));let n=lu();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Bu(s.mutation,r,jl.empty(),ba.now()),eu(t,r)&&(n=n.insert(e,r))})),n}))}}class yh{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Ra.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Cd(e.createTime)}}(t)),Ra.resolve()}getNamedQuery(e,t){return Ra.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Jd(e.bundledQuery),readTime:Cd(e.readTime)}}(t)),Ra.resolve()}}class vh{constructor(){this.overlays=new xl(ka.comparator),this.Rr=new Map}getOverlay(e,t){return Ra.resolve(this.overlays.get(t))}getOverlays(e,t){const n=uu();return Ra.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),Ra.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),Ra.resolve()}getOverlaysForCollection(e,t,n){const r=uu(),i=t.length+1,s=new ka(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ra.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new xl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=uu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=uu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Ra.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Qu(t,n));let i=this.Rr.get(t);void 0===i&&(i=mu(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class bh{constructor(){this.sessionToken=Cl.EMPTY_BYTE_STRING}getSessionToken(e){return Ra.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ra.resolve()}}class xh{constructor(){this.Vr=new Sl(wh.mr),this.gr=new Sl(wh.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new wh(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new wh(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new ka(new Sa([])),n=new wh(t,e),r=new wh(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ka(new Sa([])),n=new wh(t,e),r=new wh(t,e+1);let i=mu();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wh(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wh{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ka.comparator(e.key,t.key)||ma(e.Cr,t.Cr)}static pr(e,t){return ma(e.Cr,t.Cr)||ka.comparator(e.key,t.key)}}class _h{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Sl(wh.mr)}checkEmpty(e){return Ra.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Gu(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new wh(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ra.resolve(s)}lookupMutationBatch(e,t){return Ra.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return Ra.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ra.resolve(0===this.mutationQueue.length?Ua:this.Fr-1)}getAllMutationBatches(e){return Ra.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wh(t,0),r=new wh(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),Ra.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sl(ma);return t.forEach((e=>{const t=new wh(e,0),r=new wh(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),Ra.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ka.isDocumentKey(i)||(i=i.child(""));const s=new wh(new ka(i),0);let o=new Sl(ma);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),s),Ra.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ea(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return Ra.forEach(t.mutations,(r=>{const i=new wh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new wh(t,0),r=this.Mr.firstAfterOrEqual(n);return Ra.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ra.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sh{constructor(e){this.kr=e,this.docs=new xl(ka.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ra.resolve(n?n.document.mutableCopy():fc.newInvalidDocument(t))}getEntries(e,t){let n=ou();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():fc.newInvalidDocument(e))})),Ra.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ou();const s=t.path,o=new ka(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Oa(Ia(o),n)<=0||(r.has(o.key)||eu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ra.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Jo()}qr(e,t){return Ra.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Eh(this)}getSize(e){return Ra.resolve(this.size)}}class Eh extends ph{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),Ra.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class jh{constructor(e){this.persistence=e,this.Qr=new iu((e=>Fc(e)),Bc),this.lastRemoteSnapshotVersion=xa.min(),this.highestTargetId=0,this.$r=0,this.Kr=new xh,this.targetCount=0,this.Ur=oh.Kn()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),Ra.resolve()}getLastRemoteSnapshotVersion(e){return Ra.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ra.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Ra.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Ra.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Ra.resolve()}updateTargetData(e,t){return this.zn(t),Ra.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,Ra.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ra.waitFor(i).next((()=>r))}getTargetCount(e){return Ra.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Ra.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),Ra.resolve()}removeMatchingKeys(e,t,n){this.Kr.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ra.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),Ra.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return Ra.resolve(n)}containsKey(e,t){return Ra.resolve(this.Kr.containsKey(t))}}class kh{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Ba(0),this.zr=!1,this.zr=!0,this.jr=new bh,this.referenceDelegate=e(this),this.Hr=new jh(this),this.indexManager=new th,this.remoteDocumentCache=function(e){return new Sh(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Zd(t),this.Yr=new yh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new _h(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Go("MemoryPersistence","Starting transaction:",e);const r=new Ch(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return Ra.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class Ch extends Ma{constructor(e){super(),this.currentSequenceNumber=e}}class Th{constructor(e){this.persistence=e,this.ti=new xh,this.ni=null}static ri(e){return new Th(e)}get ii(){if(this.ni)return this.ni;throw Jo()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Ra.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Ra.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Ra.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ra.forEach(this.ii,(n=>{const r=ka.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,xa.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return Ra.or([()=>Ra.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Nh{constructor(e,t){this.persistence=e,this.oi=new iu((e=>Wa(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=fh(this,t)}static ri(e,t){return new Nh(e,t)}Zr(){}Xr(e){return Ra.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return Ra.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?Ra.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,xa.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Ra.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Ra.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Ra.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Ra.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tc(e.data.value)),t}ar(e,t,n){return Ra.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return Ra.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ih{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=mu(),r=mu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ih(e,t.fromCache,n,r)}}class Ah{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Oh{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=rt()?8:La(Ze())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ah;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(Yo()<=Pt.DEBUG&&Go("QueryEngine","SDK will not create cache indexes for query:",Jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ra.resolve()):(Yo()<=Pt.DEBUG&&Go("QueryEngine","Query:",Jc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(Yo()<=Pt.DEBUG&&Go("QueryEngine","The SDK decides to create cache indexes for query:",Jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kc(t))):Ra.resolve())}rs(e,t){if(Hc(t))return Ra.resolve(null);let n=Kc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Xc(t,null,"F"),n=Kc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=mu(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,Xc(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return Hc(t)||r.isEqual(xa.min())?Ra.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?Ra.resolve(null):(Yo()<=Pt.DEBUG&&Go("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jc(t)),this.hs(e,s,t,Na(r,Ca)).next((e=>e)))}))}cs(e,t){let n=new Sl(nu(e));return t.forEach(((t,r)=>{eu(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return Yo()<=Pt.DEBUG&&Go("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.ns.getDocumentsMatchingQuery(e,t,Aa.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Ph="LocalStore";class Mh{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new xl(ma),this.Is=new iu((e=>Fc(e)),Bc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gh(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function Dh(e,t,n,r){return new Mh(e,t,n,r)}async function Rh(e,t){const n=ta(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=mu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Lh(e){const t=ta(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Fh(e,t,n){let r=mu(),i=mu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ou();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(xa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Go(Ph,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Vs:r,fs:i}}))}function Bh(e,t){const n=ta(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Ua),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Uh(e,t){const n=ta(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,Ra.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Qd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function Vh(e,t,n){const r=ta(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Fa(e))throw e;Go(Ph,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function zh(e,t,n){const r=ta(e);let i=xa.min(),s=mu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ta(e),i=r.Is.get(n);return void 0!==i?Ra.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Kc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:xa.min(),n?s:mu()))).next((e=>($h(r,tu(t),e),{documents:e,gs:s})))))}function $h(e,t,n){let r=e.Es.get(t)||xa.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class Hh{constructor(){this.activeTargetIds=yu()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wh{constructor(){this.ho=new Hh,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Hh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qh{To(e){}shutdown(){}}const Kh="ConnectivityMonitor";class Yh{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Go(Kh,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Go(Kh,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gh=null;function Xh(){return null===Gh?Gh=268435456+Math.round(2147483648*Math.random()):Gh++,"0x"+Gh.toString(16)}const Qh="RestConnection",Zh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jh{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Ul?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const s=Xh(),o=this.bo(e,t.toUriEncodedString());Go(Qh,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then((t=>(Go(Qh,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Qo(Qh,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Zh[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class ef{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}const tf="WebChannelConnection";class nf extends Jh{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=Xh();return new Promise(((s,o)=>{const a=new Po;a.setWithCredentials(!0),a.listenOnce(Do.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ro.NO_ERROR:const t=a.getResponseJson();Go(tf,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Ro.TIMEOUT:Go(tf,`RPC '${e}' ${i} timed out`),o(new ra(na.DEADLINE_EXCEEDED,"Request time out"));break;case Ro.HTTP_ERROR:const n=a.getStatus();if(Go(tf,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(na).indexOf(t)>=0?t:na.UNKNOWN}(t.status);o(new ra(e,t.message))}else o(new ra(na.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ra(na.UNAVAILABLE,"Connection failed."));break;default:Jo()}}finally{Go(tf,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Go(tf,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=Xh(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Uo(),o=Bo(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Go(tf,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new ef({Fo:t=>{h?Go(tf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Go(tf,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Go(tf,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Mo.EventType.OPEN,(()=>{h||(Go(tf,`RPC '${e}' stream ${r} transport opened.`),f.Qo())})),p(u,Mo.EventType.CLOSE,(()=>{h||(h=!0,Go(tf,`RPC '${e}' stream ${r} transport closed`),f.Ko())})),p(u,Mo.EventType.ERROR,(t=>{h||(h=!0,Qo(tf,`RPC '${e}' stream ${r} transport errored:`,t),f.Ko(new ra(na.UNAVAILABLE,"The operation could not be completed")))})),p(u,Mo.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];ea(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Go(tf,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Ju[e];if(void 0!==t)return nd(t)}(t),i=o.message;void 0===n&&(n=na.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.Ko(new ra(n,i)),u.close()}else Go(tf,`RPC '${e}' stream ${r} received:`,i),f.Uo(i)}})),p(o,Fo.STAT_EVENT,(t=>{t.stat===Lo.PROXY?Go(tf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Lo.NOPROXY&&Go(tf,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function rf(){return"undefined"!=typeof document?document:null}function sf(e){return new _d(e,!0)}class of{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&Go("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const af="PersistentStream";class lf{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new of(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===na.RESOURCE_EXHAUSTED?(Xo(t.toString()),Xo("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===na.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new ra(na.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Go(af,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Go(af,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cf extends lf{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Jo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ea(void 0===t||"string"==typeof t),Cl.fromBase64String(t||"")):(ea(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Cl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?na.UNKNOWN:nd(e.code);return new ra(t,e.message||"")}(o);n=new pd(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Od(e,r.document.name),s=Cd(r.document.updateTime),o=r.document.createTime?Cd(r.document.createTime):xa.min(),a=new dc({mapValue:{fields:r.document.fields}}),l=fc.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new hd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Od(e,r.document),s=r.readTime?Cd(r.readTime):xa.min(),o=fc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Od(e,r.document),s=r.removedTargetIds||[];n=new hd([],s,i,null)}else{if(!("filter"in t))return Jo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Zu(r,i),o=e.targetId;n=new fd(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return xa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?xa.min():t.readTime?Cd(t.readTime):xa.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Dd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Uc(r)?{documents:Bd(e,r)}:{query:Ud(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=jd(e,t.resumeToken);const r=Sd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(xa.min())>0){n.readTime=Ed(e,t.snapshotVersion.toTimestamp());const r=Sd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Dd(this.serializer),t.removeTarget=e,this.I_(t)}}class uf extends lf{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ea(!!e.streamToken),this.lastStreamToken=e.streamToken,ea(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){ea(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(ea(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Cd(e.updateTime):Cd(t);return n.isEqual(xa.min())&&(n=Cd(t)),new Pu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Cd(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=Dd(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Fd(this.serializer,e)))};this.I_(t)}}class df{}class hf extends df{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new ra(na.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Nd(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===na.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ra(na.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Co(e,Nd(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===na.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ra(na.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class ff{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Xo(t),this.N_=!1):Go("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const pf="RemoteStore";class mf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{Ef(this)&&(Go(pf,"Restarting streams for network reachability change."),await async function(e){const t=ta(e);t.W_.add(4),await yf(t),t.j_.set("Unknown"),t.W_.delete(4),await gf(t)}(this))}))})),this.j_=new ff(n,r)}}async function gf(e){if(Ef(e))for(const t of e.G_)await t(!0)}async function yf(e){for(const t of e.G_)await t(!1)}function vf(e,t){const n=ta(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),Sf(n)?_f(n):$f(n).c_()&&xf(n,t))}function bf(e,t){const n=ta(e),r=$f(n);n.U_.delete(t),r.c_()&&wf(n,t),0===n.U_.size&&(r.c_()?r.P_():Ef(n)&&n.j_.set("Unknown"))}function xf(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$f(e).y_(t)}function wf(e,t){e.H_.Ne(t),$f(e).w_(t)}function _f(e){e.H_=new gd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),$f(e).start(),e.j_.B_()}function Sf(e){return Ef(e)&&!$f(e).u_()&&e.U_.size>0}function Ef(e){return 0===ta(e).W_.size}function jf(e){e.H_=void 0}async function kf(e){e.j_.set("Online")}async function Cf(e){e.U_.forEach(((t,n)=>{xf(e,t)}))}async function Tf(e,t){jf(e),Sf(e)?(e.j_.q_(t),_f(e)):e.j_.set("Unknown")}async function Nf(e,t,n){if(e.j_.set("Online"),t instanceof pd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.U_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.U_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){Go(pf,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await If(e,n)}else if(t instanceof hd?e.H_.We(t):t instanceof fd?e.H_.Ze(t):e.H_.je(t),!n.isEqual(xa.min()))try{const t=await Lh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.U_.get(r);i&&e.U_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.U_.get(t);if(!r)return;e.U_.set(t,r.withResumeToken(Cl.EMPTY_BYTE_STRING,r.snapshotVersion)),wf(e,t);const i=new Qd(r.target,t,n,r.sequenceNumber);xf(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Go(pf,"Failed to raise snapshot:",t),await If(e,t)}}async function If(e,t,n){if(!Fa(t))throw t;e.W_.add(1),await yf(e),e.j_.set("Offline"),n||(n=()=>Lh(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Go(pf,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await gf(e)}))}function Af(e,t){return t().catch((n=>If(e,n,t)))}async function Of(e){const t=ta(e),n=Hf(t);let r=t.K_.length>0?t.K_[t.K_.length-1].batchId:Ua;for(;Pf(t);)try{const e=await Bh(t.localStore,r);if(null===e){0===t.K_.length&&n.P_();break}r=e.batchId,Mf(t,e)}catch(e){await If(t,e)}Df(t)&&Rf(t)}function Pf(e){return Ef(e)&&e.K_.length<10}function Mf(e,t){e.K_.push(t);const n=Hf(e);n.c_()&&n.S_&&n.b_(t.mutations)}function Df(e){return Ef(e)&&!Hf(e).u_()&&e.K_.length>0}function Rf(e){Hf(e).start()}async function Lf(e){Hf(e).C_()}async function Ff(e){const t=Hf(e);for(const n of e.K_)t.b_(n.mutations)}async function Bf(e,t,n){const r=e.K_.shift(),i=Xu.from(r,t,n);await Af(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Of(e)}async function Uf(e,t){t&&Hf(e).S_&&await async function(e,t){if(function(e){return td(e)&&e!==na.ABORTED}(t.code)){const n=e.K_.shift();Hf(e).h_(),await Af(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Of(e)}}(e,t),Df(e)&&Rf(e)}async function Vf(e,t){const n=ta(e);n.asyncQueue.verifyOperationInProgress(),Go(pf,"RemoteStore received new credentials");const r=Ef(n);n.W_.add(3),await yf(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await gf(n)}async function zf(e,t){const n=ta(e);t?(n.W_.delete(2),await gf(n)):t||(n.W_.add(2),await yf(n),n.j_.set("Unknown"))}function $f(e){return e.J_||(e.J_=function(e,t,n){const r=ta(e);return r.M_(),new cf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:kf.bind(null,e),No:Cf.bind(null,e),Lo:Tf.bind(null,e),p_:Nf.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),Sf(e)?_f(e):e.j_.set("Unknown")):(await e.J_.stop(),jf(e))}))),e.J_}function Hf(e){return e.Y_||(e.Y_=function(e,t,n){const r=ta(e);return r.M_(),new uf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Lf.bind(null,e),Lo:Uf.bind(null,e),D_:Ff.bind(null,e),v_:Bf.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await Of(e)):(await e.Y_.stop(),e.K_.length>0&&(Go(pf,`Stopping write stream with ${e.K_.length} pending writes`),e.K_=[]))}))),e.Y_}class Wf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Wf(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ra(na.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qf(e,t){if(Xo("AsyncQueue",`${t}: ${e}`),Fa(e))return new ra(na.UNAVAILABLE,`${t}: ${e}`);throw e}class Kf{static emptySet(e){return new Kf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ka.comparator(t.key,n.key):(e,t)=>ka.comparator(e.key,t.key),this.keyedMap=lu(),this.sortedSet=new xl(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Kf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Yf{constructor(){this.Z_=new xl(ka.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Jo():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Gf{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Gf(e,t,Kf.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xf{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Qf{constructor(){this.queries=Zf(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=ta(e),r=n.queries;n.queries=Zf(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new ra(na.ABORTED,"Firestore shutting down"))}}function Zf(){return new iu((e=>Zc(e)),Qc)}async function Jf(e,t){const n=ta(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.na()&&t.ra()&&(r=2):(s=new Xf,r=t.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=qf(e,`Initialization of query '${Jc(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&rp(n)}async function ep(e,t){const n=ta(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tp(e,t){const n=ta(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&rp(n)}function np(e,t,n){const r=ta(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function rp(e){e.ia.forEach((e=>{e.next()}))}var ip,sp;(sp=ip||(ip={}))._a="default",sp.Cache="cache";class op{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Gf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Gf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==ip.Cache}}class ap{constructor(e){this.key=e}}class lp{constructor(e){this.key=e}}class cp{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=mu(),this.mutatedKeys=mu(),this.ya=nu(e),this.wa=new Kf(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new Yf,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=eu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.va(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ya(u,a)>0||l&&this.ya(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jo()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==s.length||l?{snapshot:new Gf(this.query,e.wa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Yf,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=mu(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new lp(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new ap(n))})),t}Oa(e){this.fa=e.gs,this.pa=mu();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Gf.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const up="SyncEngine";class dp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hp{constructor(e){this.key=e,this.Ba=!1}}class fp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new iu((e=>Zc(e)),Qc),this.qa=new Map,this.Qa=new Set,this.$a=new xl(ka.comparator),this.Ka=new Map,this.Ua=new xh,this.Wa={},this.Ga=new Map,this.za=oh.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function pp(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Dp(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await gp(r,t,n,!0),i}async function mp(e,t){const n=Dp(e);await gp(n,t,!0,!1)}async function gp(e,t,n,r){const i=await Uh(e.localStore,Kc(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await yp(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&vf(e.remoteStore,i),a}async function yp(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await zh(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Np(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const s=await zh(e.localStore,t,!0),o=new cp(t,s.gs),a=o.ba(s.documents),l=dd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Np(e,n,c.Ma);const u=new dp(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function vp(e,t,n){const r=ta(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter((e=>!Qc(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bf(r.remoteStore,i.targetId),Cp(r,i.targetId)})).catch(Da)):(Cp(r,i.targetId),await Vh(r.localStore,i.targetId,!0))}async function bp(e,t){const n=ta(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bf(n.remoteStore,r.targetId))}async function xp(e,t){const n=ta(e);try{const e=await function(e,t){const n=ta(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Cl.EMPTY_BYTE_STRING,xa.min()).withLastLimboFreeSnapshotVersion(xa.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Hr.updateTargetData(e,c))}));let a=ou(),l=mu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Fh(e,s,t.documentUpdates).next((e=>{a=e.Vs,l=e.fs}))),!r.isEqual(xa.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ra.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ka.get(t);r&&(ea(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?ea(r.Ba):e.removedDocuments.size>0&&(ea(r.Ba),r.Ba=!1))})),await Op(n,e,t)}catch(e){await Da(e)}}function wp(e,t,n){const r=ta(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ta(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&rp(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _p(e,t,n){const r=ta(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ka.get(t),s=i&&i.key;if(s){let e=new xl(ka.comparator);e=e.insert(s,fc.newNoDocument(s,xa.min()));const n=mu().add(s),i=new ud(xa.min(),new Map,new xl(ma),e,n);await xp(r,i),r.$a=r.$a.remove(s),r.Ka.delete(t),Ap(r)}else await Vh(r.localStore,t,!1).then((()=>Cp(r,t,n))).catch(Da)}async function Sp(e,t){const n=ta(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ta(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ra.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ea(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=mu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);kp(n,r,null),jp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Op(n,e)}catch(e){await Da(e)}}async function Ep(e,t,n){const r=ta(e);try{const e=await function(e,t){const n=ta(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ea(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);kp(r,t,n),jp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Op(r,e)}catch(n){await Da(n)}}function jp(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function kp(e,t,n){const r=ta(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function Cp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach((t=>{e.Ua.containsKey(t)||Tp(e,t)}))}function Tp(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(bf(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),Ap(e))}function Np(e,t,n){for(const r of n)r instanceof ap?(e.Ua.addReference(r.key,t),Ip(e,r)):r instanceof lp?(Go(up,"Document no longer in limbo: "+r.key),e.Ua.removeReference(r.key,t),e.Ua.containsKey(r.key)||Tp(e,r.key)):Jo()}function Ip(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(Go(up,"New document in limbo: "+n),e.Qa.add(r),Ap(e))}function Ap(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new ka(Sa.fromString(t)),r=e.za.next();e.Ka.set(r,new hp(n)),e.$a=e.$a.insert(n,r),vf(e.remoteStore,new Qd(Kc($c(n.path)),r,"TargetPurposeLimboResolution",Ba.ae))}}async function Op(e,t,n){const r=ta(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{o.push(r.Ha(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ih.Yi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=ta(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ra.forEach(t,(t=>Ra.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ra.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Fa(e))throw e;Go(Ph,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function Pp(e,t){const n=ta(e);if(!n.currentUser.isEqual(t)){Go(up,"User change. New user:",t.toKey());const e=await Rh(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new ra(na.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Op(n,e.Rs)}}function Mp(e,t){const n=ta(e),r=n.Ka.get(t);if(r&&r.Ba)return mu().add(r.key);{let e=mu();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function Dp(e){const t=ta(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_p.bind(null,t),t.La.p_=tp.bind(null,t.eventManager),t.La.Ja=np.bind(null,t.eventManager),t}function Rp(e){const t=ta(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ep.bind(null,t),t}class Lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Dh(this.persistence,new Oh,e.initialUser,this.serializer)}Xa(e){return new kh(Th.ri,this.serializer)}Za(e){return new Wh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lp.provider={build:()=>new Lp};class Fp extends Lp{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ea(this.persistence.referenceDelegate instanceof Nh);const n=this.persistence.referenceDelegate.garbageCollector;return new dh(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?sh.withCacheSize(this.cacheSizeBytes):sh.DEFAULT;return new kh((e=>Nh.ri(e,t)),this.serializer)}}class Bp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>wp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pp.bind(null,this.syncEngine),await zf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Qf}createDatastore(e){const t=sf(e.databaseInfo.databaseId),n=function(e){return new nf(e)}(e.databaseInfo);return function(e,t,n,r){return new hf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new mf(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>wp(this.syncEngine,e,0)),Yh.D()?new Yh:new qh)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new fp(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ta(e);Go(pf,"RemoteStore shutting down."),t.W_.add(5),await yf(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Bp.provider={build:()=>new Bp};class Up{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Xo("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Vp="FirestoreClient";class zp{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Wo.UNAUTHENTICATED,this.clientId=pa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Go(Vp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Go(Vp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=qf(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function $p(e,t){e.asyncQueue.verifyOperationInProgress(),Go(Vp,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Rh(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Hp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Wp(e);Go(Vp,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Vf(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Vf(t.remoteStore,n))),e._onlineComponents=t}async function Wp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Go(Vp,"Using user provided OfflineComponentProvider");try{await $p(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===na.FAILED_PRECONDITION||e.code===na.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await $p(e,new Lp)}}else Go(Vp,"Using default OfflineComponentProvider"),await $p(e,new Fp(void 0));return e._offlineComponents}async function qp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Go(Vp,"Using user provided OnlineComponentProvider"),await Hp(e,e._uninitializedComponentsProvider._online)):(Go(Vp,"Using default OnlineComponentProvider"),await Hp(e,new Bp))),e._onlineComponents}function Kp(e){return qp(e).then((e=>e.syncEngine))}async function Yp(e){const t=await qp(e),n=t.eventManager;return n.onListen=pp.bind(null,t.syncEngine),n.onUnlisten=vp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=mp.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=bp.bind(null,t.syncEngine),n}function Gp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ia;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Up({next:a=>{s.su(),t.enqueueAndForget((()=>ep(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new ra(na.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new ra(na.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new op($c(n.path),s,{includeMetadataChanges:!0,Ta:!0});return Jf(e,o)}(await Yp(e),e.asyncQueue,t,n,r))),r.promise}function Xp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ia;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Up({next:n=>{s.su(),t.enqueueAndForget((()=>ep(e,o))),n.fromCache&&"server"===r.source?i.reject(new ra(na.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new op(n,s,{includeMetadataChanges:!0,Ta:!0});return Jf(e,o)}(await Yp(e),e.asyncQueue,t,n,r))),r.promise}function Qp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Zp=new Map;function Jp(e,t,n){if(!n)throw new ra(na.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function em(e){if(!ka.isDocumentKey(e))throw new ra(na.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function tm(e){if(ka.isDocumentKey(e))throw new ra(na.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function nm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Jo()}function rm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ra(na.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nm(e);throw new ra(na.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function im(e,t){if(t<=0)throw new ra(na.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const sm="firestore.googleapis.com",om=!0;class am{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ra(na.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sm,this.ssl=om}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:om;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ih;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<lh)throw new ra(na.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ra(na.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ra(na.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ra(na.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ra(na.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new am({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ra(na.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ra(na.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new am(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new oa;switch(e.type){case"firstParty":return new ua(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ra(na.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zp.get(e);t&&(Go("ComponentProvider","Removing Datastore"),Zp.delete(e),t.terminate())}(this),Promise.resolve()}}class cm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cm(this.firestore,e,this._query)}}class um{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new um(this.firestore,e,this._key)}}class dm extends cm{constructor(e,t,n){super(e,t,$c(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new um(this.firestore,null,new ka(e))}withConverter(e){return new dm(this.firestore,e,this._path)}}function hm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ct(e),Jp("collection","path",t),e instanceof lm){const n=Sa.fromString(t,...r);return tm(n),new dm(e,null,n)}{if(!(e instanceof um||e instanceof dm))throw new ra(na.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Sa.fromString(t,...r));return tm(n),new dm(e.firestore,null,n)}}function fm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ct(e),1===arguments.length&&(t=pa.newId()),Jp("doc","path",t),e instanceof lm){const n=Sa.fromString(t,...r);return em(n),new um(e,null,new ka(n))}{if(!(e instanceof um||e instanceof dm))throw new ra(na.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Sa.fromString(t,...r));return em(n),new um(e.firestore,e instanceof dm?e.converter:null,new ka(n))}}const pm="AsyncQueue";class mm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new of(this,"async_queue_retry"),this.Su=()=>{const e=rf();e&&Go(pm,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=rf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=rf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new ia;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(zW){if(!Fa(zW))throw zW;Go(pm,"Operation failed with retryable error: "+zW)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Xo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Wf.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&Jo()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function gm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ym extends lm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new mm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mm(e),this._firestoreClient=void 0,await e}}}function vm(e){if(e._terminated)throw new ra(na.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||bm(e),e._firestoreClient}function bm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Bl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Qp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new zp(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class xm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xm(Cl.fromBase64String(e))}catch(e){throw new ra(na.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new xm(Cl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ra(na.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ja(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _m{constructor(e){this._methodName=e}}class Sm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ra(na.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ra(na.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ma(this._lat,e._lat)||ma(this._long,e._long)}}class Em{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const jm=/^__.*__$/;class km{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $u(e,this.data,this.fieldMask,t,this.fieldTransforms):new zu(e,this.data,t,this.fieldTransforms)}}class Cm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $u(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jo()}}class Nm{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Nm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Ku(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(Tm(this.Lu)&&jm.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Im{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sf(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Nm({Lu:e,methodName:t,zu:n,path:ja.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Am(e){const t=e._freezeSettings(),n=sf(e._databaseId);return new Im(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Om(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ju(s.merge||s.mergeFields?2:0,t,n,i);Um("Data must be an object, but it was:",o,r);const a=Fm(r,o);let l,c;if(s.merge)l=new jl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Vm(t,r,n);if(!o.contains(i))throw new ra(na.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Wm(e,i)||e.push(i)}l=new jl(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new km(new dc(a),l,c)}class Pm extends _m{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pm}}function Mm(e,t,n,r){const i=e.ju(1,t,n);Um("Data must be an object, but it was:",i,r);const s=[],o=dc.empty();vl(r,((e,r)=>{const a=$m(t,e,n);r=Ct(r);const l=i.Ku(a);if(r instanceof Pm)s.push(a);else{const e=Lm(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new jl(s);return new Cm(o,a,i.fieldTransforms)}function Dm(e,t,n,r,i,s){const o=e.ju(1,t,n),a=[Vm(t,r,n)],l=[i];if(s.length%2!=0)throw new ra(na.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Vm(t,s[h])),l.push(s[h+1]);const c=[],u=dc.empty();for(let h=a.length-1;h>=0;--h)if(!Wm(c,a[h])){const e=a[h];let t=l[h];t=Ct(t);const n=o.Ku(e);if(t instanceof Pm)c.push(e);else{const r=Lm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new jl(c);return new Cm(u,d,o.fieldTransforms)}function Rm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Lm(n,e.ju(r?4:3,t))}function Lm(e,t){if(Bm(e=Ct(e)))return Um("Unsupported field value:",t,e),Fm(e,t);if(e instanceof _m)return function(e,t){if(!Tm(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Lm(i,t.Uu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ct(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ba.fromDate(e);return{timestampValue:Ed(t.serializer,n)}}if(e instanceof ba){const n=new ba(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ed(t.serializer,n)}}if(e instanceof Sm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xm)return{bytesValue:jd(t.serializer,e._byteString)};if(e instanceof um){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Td(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Em)return function(e,t){return{mapValue:{fields:{[zl]:{stringValue:Wl},[ql]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return vu(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${nm(e)}`)}(e,t)}function Fm(e,t){const n={};return bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vl(e,((e,r)=>{const i=Lm(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Bm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ba||e instanceof Sm||e instanceof xm||e instanceof um||e instanceof _m||e instanceof Em)}function Um(e,t,n){if(!Bm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=nm(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function Vm(e,t,n){if((t=Ct(t))instanceof wm)return t._internalPath;if("string"==typeof t)return $m(e,t);throw Hm("Field path arguments must be of type string or ",e,!1,void 0,n)}const zm=new RegExp("[~\\*/\\[\\]]");function $m(e,t,n){if(t.search(zm)>=0)throw Hm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new wm(...t.split("."))._internalPath}catch(r){throw Hm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Hm(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ra(na.INVALID_ARGUMENT,a+e+l)}function Wm(e,t){return e.some((e=>e.isEqual(t)))}class qm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new um(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Km(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ym("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Km extends qm{data(){return super.data()}}function Ym(e,t){return"string"==typeof t?$m(e,t):t instanceof wm?t._internalPath:t._delegate._internalPath}function Gm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ra(na.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xm{}class Qm extends Xm{}function Zm(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Xm&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof tg)).length,n=e.filter((e=>e instanceof Jm)).length;if(t>1||t>0&&n>0)throw new ra(na.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Jm extends Qm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Jm(e,t,n)}_apply(e){const t=this._parse(e);return lg(e._query,t),new cm(e.firestore,e.converter,Gc(e._query,t))}_parse(e){const t=Am(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ra(na.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){ag(o,s);const t=[];for(const n of o)t.push(og(r,e,n));a={arrayValue:{values:t}}}else a=og(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ag(o,s),a=Rm(n,t,o,"in"===s||"not-in"===s);return xc.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function eg(e,t,n){const r=t,i=Ym("where",e);return Jm._create(i,r,n)}class tg extends Xm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tg(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:wc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)lg(n,i),n=Gc(n,i)}(e._query,t),new cm(e.firestore,e.converter,Gc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ng extends Qm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ng(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ra(na.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ra(na.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yc(t,n)}(e._query,this._field,this._direction);return new cm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Vc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function rg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ym("orderBy",e);return ng._create(n,t)}class ig extends Qm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ig(e,t,n)}_apply(e){return new cm(e.firestore,e.converter,Xc(e._query,this._limit,this._limitType))}}function sg(e){return im("limit",e),ig._create("limit",e,"F")}function og(e,t,n){if("string"==typeof(n=Ct(n))){if(""===n)throw new ra(na.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(t)&&-1!==n.indexOf("/"))throw new ra(na.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Sa.fromString(n));if(!ka.isDocumentKey(r))throw new ra(na.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nc(e,new ka(r))}if(n instanceof um)return nc(e,n._key);throw new ra(na.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(n)}.`)}function ag(e,t){if(!Array.isArray(e)||0===e.length)throw new ra(na.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ra(na.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ra(na.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class cg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Il(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Jo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return vl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[ql].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Il(e.doubleValue)));return new Em(i)}convertGeoPoint(e){return new Sm(Il(e.latitude),Il(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ll(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const t=Nl(e);return new ba(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Sa.fromString(e);ea(Xd(n));const r=new Vl(n.get(1),n.get(3)),i=new ka(n.popFirst(5));return r.isEqual(t)||Xo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ug(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class dg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hg extends qm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new fg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ym("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class fg extends hg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class pg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new fg(this._firestore,this._userDataWriter,n.key,n,new dg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ra(na.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new fg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new fg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:mg(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function mg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jo()}}function gg(e){e=rm(e,um);const t=rm(e.firestore,ym);return Gp(vm(t),e._key).then((n=>jg(t,e,n)))}class yg extends cg{constructor(e){super(),this.firestore=e}convertBytes(e){return new xm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new um(this.firestore,null,t)}}function vg(e){e=rm(e,cm);const t=rm(e.firestore,ym),n=vm(t),r=new yg(t);return Gm(e._query),Xp(n,e._query).then((n=>new pg(t,r,e,n)))}function bg(e,t,n){e=rm(e,um);const r=rm(e.firestore,ym),i=ug(e.converter,t,n);return Eg(r,[Om(Am(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Mu.none())])}function xg(e,t,n){e=rm(e,um);const r=rm(e.firestore,ym),i=Am(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ct(t))||t instanceof wm?Dm(i,"updateDoc",e._key,t,n,a):Mm(i,"updateDoc",e._key,t),Eg(r,[s.toMutation(e._key,Mu.exists(!0))])}function wg(e){return Eg(rm(e.firestore,ym),[new Ku(e._key,Mu.none())])}function _g(e,t){const n=rm(e.firestore,ym),r=fm(e),i=ug(e.converter,t);return Eg(n,[Om(Am(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Mu.exists(!1))]).then((()=>r))}function Sg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Ct(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||gm(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(gm(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof um)d=rm(e.firestore,ym),h=$c(e._key.path),u={next:t=>{n[l]&&n[l](jg(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=rm(e,cm);d=rm(t.firestore,ym),h=t._query;const r=new yg(d);u={next:e=>{n[l]&&n[l](new pg(d,r,t,e))},error:n[l+1],complete:n[l+2]},Gm(e._query)}return function(e,t,n,r){const i=new Up(r),s=new op(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Jf(await Yp(e),s))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>ep(await Yp(e),s)))}}(vm(d),h,c,u)}function Eg(e,t){return function(e,t){const n=new ia;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Rp(e);try{const e=await function(e,t){const n=ta(e),r=ba.now(),i=t.reduce(((e,t)=>e.add(t.key)),mu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ou(),l=mu();return n.ds.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Uu(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new $u(e.key,t,hc(t.value.mapValue),Mu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:cu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new xl(ma)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Op(r,e.changes),await Of(r.remoteStore)}catch(e){const t=qf(e,"Failed to persist write");n.reject(t)}}(await Kp(e),t,n))),n.promise}(vm(e),t)}function jg(e,t,n){const r=n.docs.get(t._key),i=new yg(e);return new hg(e,i,t._key,r,new dg(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){qo=e}(Hn),Bn(new Tt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new ym(new la(e.getProvider("auth-internal")),new ha(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ra(na.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Kn($o,Ho,e),Kn($o,Ho,"esm2017")}();Kn("firebase","11.3.1","app");const kg="@firebase/installations",Cg="0.6.12",Tg=1e4,Ng=`w:${Cg}`,Ig="FIS_v2",Ag=36e5,Og=new at("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pg(e){return e instanceof ot&&e.code.includes("request-failed")}function Mg(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Dg(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Rg(e,t){const n=(await t.json()).error;return Og.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Lg(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Fg(e,t){let{refreshToken:n}=t;const r=Lg(e);return r.append("Authorization",function(e){return`${Ig} ${e}`}(n)),r}async function Bg(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Ug(e){return new Promise((t=>{setTimeout(t,e)}))}const Vg=/^[cdef][\w-]{21}$/;function zg(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(e);return Vg.test(t)?t:""}catch(e){return""}}function $g(e){return`${e.appName}!${e.appId}`}const Hg=new Map;function Wg(e,t){const n=$g(e);qg(n,t),function(e,t){const n=Yg();n&&n.postMessage({key:e,fid:t});Gg()}(n,t)}function qg(e,t){const n=Hg.get(e);if(n)for(const r of n)r(t)}let Kg=null;function Yg(){return!Kg&&"BroadcastChannel"in self&&(Kg=new BroadcastChannel("[Firebase] FID Change"),Kg.onmessage=e=>{qg(e.data.key,e.data.fid)}),Kg}function Gg(){0===Hg.size&&Kg&&(Kg.close(),Kg=null)}const Xg="firebase-installations-store";let Qg=null;function Zg(){return Qg||(Qg=Qt("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Xg)}})),Qg}async function Jg(e,t){const n=$g(e),r=(await Zg()).transaction(Xg,"readwrite"),i=r.objectStore(Xg),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Wg(e,t.fid),t}async function ey(e){const t=$g(e),n=(await Zg()).transaction(Xg,"readwrite");await n.objectStore(Xg).delete(t),await n.done}async function ty(e,t){const n=$g(e),r=(await Zg()).transaction(Xg,"readwrite"),i=r.objectStore(Xg),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||Wg(e,o.fid),o}async function ny(e){let t;const n=await ty(e.appConfig,(n=>{const r=function(e){const t=e||{fid:zg(),registrationStatus:0};return sy(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Og.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Mg(n),o=Lg(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:Ig,appId:n.appId,sdkVersion:Ng},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await Bg((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Dg(e.authToken)}}throw await Rg("Create Installation",u)}(e,t);return Jg(e.appConfig,n)}catch(zW){throw Pg(zW)&&409===zW.customData.serverCode?await ey(e.appConfig):await Jg(e.appConfig,{fid:t.fid,registrationStatus:0}),zW}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ry(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ry(e){let t=await iy(e.appConfig);for(;1===t.registrationStatus;)await Ug(100),t=await iy(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ny(e);return n||t}return t}function iy(e){return ty(e,(e=>{if(!e)throw Og.create("installation-not-found");return sy(e)}))}function sy(e){return 1===(t=e).registrationStatus&&t.registrationTime+Tg<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function oy(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Mg(e)}/${n}/authTokens:generate`}(n,t),s=Fg(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:Ng,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await Bg((()=>fetch(i,l)));if(c.ok){return Dg(await c.json())}throw await Rg("Generate Auth Token",c)}async function ay(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await ty(e.appConfig,(r=>{if(!cy(r))throw Og.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ag}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await ly(e.appConfig);for(;1===n.authToken.requestStatus;)await Ug(100),n=await ly(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ay(e,t):r}(e,n),r;{if(!navigator.onLine)throw Og.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await oy(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Jg(e.appConfig,r),n}catch(zW){if(!Pg(zW)||401!==zW.customData.serverCode&&404!==zW.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Jg(e.appConfig,n)}else await ey(e.appConfig);throw zW}}(e,n),n}}));return t?await t:r.authToken}function ly(e){return ty(e,(e=>{if(!cy(e))throw Og.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Tg<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function cy(e){return void 0!==e&&2===e.registrationStatus}async function uy(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await ny(e);t&&await t}(n);return(await ay(n,t)).token}function dy(e){return Og.create("missing-app-config-values",{valueName:e})}const hy="installations",fy=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw dy("App Configuration");if(!e.name)throw dy("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw dy(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Un(t,"heartbeat"),_delete:()=>Promise.resolve()}},py=e=>{const t=Un(e.getProvider("app").getImmediate(),hy).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ny(t);return r?r.catch(console.error):ay(t).catch(console.error),n.fid}(t),getToken:e=>uy(t,e)}};Bn(new Tt(hy,fy,"PUBLIC")),Bn(new Tt("installations-internal",py,"PRIVATE")),Kn(kg,Cg),Kn(kg,Cg,"esm2017");const my="analytics",gy="https://www.googletagmanager.com/gtag/js",yy=new Ft("@firebase/analytics"),vy=new at("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function by(e){if(!e.startsWith(gy)){const t=vy.create("invalid-gtag-resource",{gtagURL:e});return yy.warn(t.message),""}return e}function xy(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function wy(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:by}),r=document.createElement("script"),i=`${gy}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function _y(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await xy(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(zW){yy.error(zW)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await xy(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(zW){yy.error(zW)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(zW){yy.error(zW)}}}const Sy=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ey(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function jy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sy,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw vy.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw vy.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Cy;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),ky({appId:r,apiKey:i,measurementId:s},o,a,t)}async function ky(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sy;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(vy.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(zW){if(l)return yy.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===zW||void 0===zW?void 0:zW.message}]`),{appId:a,measurementId:l};throw zW}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Ey(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw vy.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(zW){const r=zW;if(!function(e){if(!(e instanceof ot)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),l)return yy.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:a,measurementId:l};throw zW}const c=503===Number(null===(o=null===r||void 0===r?void 0:r.customData)||void 0===o?void 0:o.httpStatus)?kt(i,s.intervalMillis,30):kt(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(a,u),yy.debug(`Calling attemptFetch again in ${c} millis`),ky(e,u,n,s)}}class Cy{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ty,Ny;function Iy(e){Ny=e}function Ay(e){Ty=e}async function Oy(e,t,n,r,i,s,o){var a;const l=jy(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&yy.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>yy.error(e))),t.push(l);const c=async function(){if(!it())return yy.warn(vy.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await st()}catch(zW){return yy.warn(vy.create("indexeddb-unavailable",{errorInfo:null===zW||void 0===zW?void 0:zW.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(gy)&&n.src.includes(e))return n;return null})(s)||wy(s,u.measurementId),Ny&&(i("consent","default",Ny),Iy(void 0)),i("js",new Date);const h=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),Ty&&(i("set",Ty),Ay(void 0)),u.measurementId}class Py{constructor(e){this.app=e}_delete(){return delete My[this.app.options.appId],Promise.resolve()}}let My={},Dy=[];const Ry={};let Ly,Fy,By="dataLayer",Uy="gtag",Vy=!1;function zy(){const e=[];if(et()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=vy.create("invalid-analytics-context",{errorInfo:t});yy.warn(n.message)}}function $y(e,t,n){zy();const r=e.options.appId;if(!r)throw vy.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw vy.create("no-api-key");yy.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=My[r])throw vy.create("already-exists",{id:r});if(!Vy){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(By);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=_y(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(My,Dy,Ry,By,Uy);Fy=e,Ly=t,Vy=!0}My[r]=Oy(e,Dy,Ry,t,Ly,By,n);return new Py(e)}function Hy(e,t,n,r){e=Ct(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Fy,My[e.app.options.appId],t,n,r).catch((e=>yy.error(e)))}const Wy="@firebase/analytics",qy="0.10.11";Bn(new Tt(my,((e,t)=>{let{options:n}=t;return $y(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Bn(new Tt("analytics-internal",(function(e){try{const t=e.getProvider(my).getImmediate();return{logEvent:(e,n,r)=>Hy(t,e,n,r)}}catch(zW){throw vy.create("interop-component-reg-failed",{reason:zW})}}),"PRIVATE")),Kn(Wy,qy),Kn(Wy,qy,"esm2017");const Ky="@firebase/database",Yy="1.0.12";let Gy="";function Xy(e){Gy=e}class Qy{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ut(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ct(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Zy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ht(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Jy=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Qy(t)}}catch(zW){}return new Zy},ev=Jy("localStorage"),tv=Jy("sessionStorage"),nv=new Ft("@firebase/database"),rv=function(){let e=1;return function(){return e++}}(),iv=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Me(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new wt;n.update(t);const r=n.digest();return Le.encodeByteArray(r)},sv=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=sv.apply(null,n):e+="object"===typeof n?ut(n):n,e+=" "}return e};let ov=null,av=!0;const lv=function(e,t){Me(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(nv.logLevel=Pt.VERBOSE,ov=nv.log.bind(nv),t&&tv.set("logging_enabled",!0)):"function"===typeof e?ov=e:(ov=null,tv.remove("logging_enabled"))},cv=function(){if(!0===av&&(av=!1,null===ov&&!0===tv.get("logging_enabled")&&lv(!0)),ov){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=sv.apply(null,t);ov(r)}},uv=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];cv(e,...n)}},dv=function(){const e="FIREBASE INTERNAL ERROR: "+sv(...arguments);nv.error(e)},hv=function(){const e=`FIREBASE FATAL ERROR: ${sv(...arguments)}`;throw nv.error(e),new Error(e)},fv=function(){const e="FIREBASE WARNING: "+sv(...arguments);nv.warn(e)},pv=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},mv="[MIN_NAME]",gv="[MAX_NAME]",yv=function(e,t){if(e===t)return 0;if(e===mv||t===gv)return-1;if(t===mv||e===gv)return 1;{const n=jv(e),r=jv(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},vv=function(e,t){return e===t?0:e<t?-1:1},bv=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ut(t))},xv=function(e){if("object"!==typeof e||null===e)return ut(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=ut(t[r]),n+=":",n+=xv(e[t[r]]);return n+="}",n},wv=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function _v(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Sv=function(e){Me(!pv(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Ev=new RegExp("^-?(0*)\\d{1,10}$"),jv=function(e){if(Ev.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},kv=function(e){try{e()}catch(zW){setTimeout((()=>{const t=zW.stack||"";throw fv("Exception was thrown by user callback.",t),zW}),Math.floor(0))}},Cv=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Tv{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){fv(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Nv{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(cv("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fv(e)}}class Iv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Iv.OWNER="owner";const Av="5",Ov=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pv="ac",Mv="websocket",Dv="long_polling";class Rv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ev.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ev.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Lv(e,t,n){let r;if(Me("string"===typeof t,"typeof type must == string"),Me("object"===typeof n,"typeof params must == object"),t===Mv)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Dv)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return _v(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Fv{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ht(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ze(this.counters_)}}const Bv={},Uv={};function Vv(e){const t=e.toString();return Bv[t]||(Bv[t]=new Fv),Bv[t]}class zv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&kv((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const $v="start";class Hv{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uv(e),this.stats_=Vv(t),this.urlFn=e=>(this.appCheckToken&&(e[Pv]=this.appCheckToken),Lv(t,Dv,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(nt()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wv((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===$v)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[$v]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Av,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Pv]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Ov.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hv.forceAllow_=!0}static forceDisallow(){Hv.forceDisallow_=!0}static isAvailable(){return!nt()&&(!!Hv.forceAllow_||!Hv.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Be(t),r=wv(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(nt())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Wv{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,nt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=rv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Wv.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(zW){cv("frame writing exception"),zW.stack&&cv(zW.stack),cv(zW)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||cv("No IE domain setting required")}catch(zW){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){nt()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{cv("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(zW){}}),Math.floor(1))}}let qv=null;"undefined"!==typeof MozWebSocket?qv=MozWebSocket:"undefined"!==typeof WebSocket&&(qv=WebSocket);class Kv{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uv(this.connId),this.stats_=Vv(t),this.connURL=Kv.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Av,!nt()&&"undefined"!==typeof location&&location.hostname&&Ov.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Pv]=r),i&&(s.p=i),Lv(e,Mv,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ev.set("previous_websocket_failure",!0);try{let e;if(nt()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Av}/${Gy}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new qv(this.connURL,[],e)}catch(zW){this.log_("Error instantiating WebSocket.");const t=zW.message||zW.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Kv.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==qv&&!Kv.forceDisallow_}static previouslyFailed(){return ev.isInMemoryStorage||!0===ev.get("previous_websocket_failure")}markConnectionHealthy(){ev.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=ct(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Me(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=wv(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(zW){this.log_("Exception thrown from WebSocket.send():",zW.message||zW.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Kv.responsesRequiredToBeHealthy=2,Kv.healthyTimeout=3e4;class Yv{static get ALL_TRANSPORTS(){return[Hv,Kv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Kv&&Kv.isAvailable();let n=t&&!Kv.previouslyFailed();if(e.webSocketOnly&&(t||fv("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Kv];else{const e=this.transports_=[];for(const t of Yv.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Yv.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yv.globalTransportInitialized_=!1;class Gv{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uv("c:"+this.id+":"),this.transportManager_=new Yv(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Cv((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=bv("t",e),n=bv("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=bv("t",e),n=bv("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=bv("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?dv("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dv("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Av!==n&&fv("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Cv((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cv((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ev.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Xv{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Qv{constructor(e){this.allowedEvents_=e,this.listeners_={},Me(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Me(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Zv extends Qv{static getInstance(){return new Zv}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Je()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return Me("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Jv{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function eb(){return new Jv("")}function tb(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function nb(e){return e.pieces_.length-e.pieceNum_}function rb(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Jv(e.pieces_,t)}function ib(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function sb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ob(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Jv(t,0)}function ab(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Jv)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Jv(n,0)}function lb(e){return e.pieceNum_>=e.pieces_.length}function cb(e,t){const n=tb(e),r=tb(t);if(null===n)return t;if(n===r)return cb(rb(e),rb(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ub(e,t){if(nb(e)!==nb(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function db(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(nb(e)>nb(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class hb{constructor(e,t){this.errorPrefix_=t,this.parts_=sb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=jt(this.parts_[n]);fb(this)}}function fb(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pb(e))}function pb(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class mb extends Qv{static getInstance(){return new mb}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return Me("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gb=1e3;class yb extends Xv{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=yb.nextPersistentConnectionId_++,this.log_=uv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mb.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Zv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ut(i)),Me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Xe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Me(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;yb.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&ht(e,"w")){const n=ft(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();fv(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=dt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=dt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ut(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):dv("Unrecognized action received from server: "+ut(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gb),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+yb.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Me(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?cv("getToken() completed but was canceled"):(cv("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Gv(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{fv(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(dv){this.log_("Failed to get token: "+dv),s||(this.repoInfo_.nodeAdmin&&fv(dv),a())}}}interrupt(e){cv("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cv("Resuming connection for reason: "+e),delete this.interruptReasons_[e],pt(this.interruptReasons_)&&(this.reconnectDelay_=gb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>xv(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Jv(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){cv("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){cv("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";nt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Gy.replace(/\./g,"-")]=1,Je()?e["framework.cordova"]=1:tt()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Zv.getInstance().currentlyOnline();return pt(this.interruptReasons_)&&e}}yb.nextPersistentConnectionId_=0,yb.nextConnectionId_=0;class vb{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new vb(e,t)}}class bb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new vb(mv,e),r=new vb(mv,t);return 0!==this.compare(n,r)}minPost(){return vb.MIN}}let xb;class wb extends bb{static get __EMPTY_NODE(){return xb}static set __EMPTY_NODE(e){xb=e}compare(e,t){return yv(e.name,t.name)}isDefinedOn(e){throw De("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return vb.MIN}maxPost(){return new vb(gv,xb)}makePost(e,t){return Me("string"===typeof e,"KeyIndex indexValue must always be a string."),new vb(e,xb)}toString(){return".key"}}const _b=new wb;class Sb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Eb{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Eb.RED,this.left=null!=r?r:jb.EMPTY_NODE,this.right=null!=i?i:jb.EMPTY_NODE}copy(e,t,n,r,i){return new Eb(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return jb.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return jb.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Eb.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Eb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Eb.RED=!0,Eb.BLACK=!1;class jb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jb.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new jb(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Eb.BLACK,null,null))}remove(e){return new jb(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Eb.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Sb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Sb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Sb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Sb(this.root_,null,this.comparator_,!0,e)}}function kb(e,t){return yv(e.name,t.name)}function Cb(e,t){return yv(e,t)}let Tb;jb.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Eb(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Nb=function(e){return"number"===typeof e?"number:"+Sv(e):"string:"+e},Ib=function(e){if(e.isLeafNode()){const t=e.val();Me("string"===typeof t||"number"===typeof t||"object"===typeof t&&ht(t,".sv"),"Priority must be a string or number.")}else Me(e===Tb||e.isEmpty(),"priority of unexpected type.");Me(e===Tb||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ab,Ob,Pb;class Mb{static set __childrenNodeConstructor(e){Ab=e}static get __childrenNodeConstructor(){return Ab}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mb.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Me(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ib(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mb(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Mb.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return lb(e)?this:".priority"===tb(e)?this.priorityNode_:Mb.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Mb.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=tb(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Me(".priority"!==n||1===nb(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Mb.__childrenNodeConstructor.EMPTY_NODE.updateChild(rb(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Nb(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Sv(this.value_):this.value_,this.lazyHash_=iv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mb.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mb.__childrenNodeConstructor?-1:(Me(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Mb.VALUE_TYPE_ORDER.indexOf(t),i=Mb.VALUE_TYPE_ORDER.indexOf(n);return Me(r>=0,"Unknown leaf type: "+t),Me(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Mb.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Db=new class extends bb{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?yv(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return vb.MIN}maxPost(){return new vb(gv,new Mb("[PRIORITY-POST]",Pb))}makePost(e,t){const n=Ob(e);return new vb(t,new Mb("[PRIORITY-POST]",n))}toString(){return".priority"}},Rb=Math.log(2);class Lb{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Rb,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fb=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Eb(a,o.node,Eb.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Eb(a,o.node,Eb.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],d=n?n(u):u;l(new Eb(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Eb.BLACK):(a(r,Eb.BLACK),a(r,Eb.RED))}return s}(new Lb(e.length));return new jb(r||t,s)};let Bb;const Ub={};class Vb{static get Default(){return Me(Ub&&Db,"ChildrenNode.ts has not been loaded"),Bb=Bb||new Vb({".priority":Ub},{".priority":Db}),Bb}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=ft(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof jb?t:null}hasIndex(e){return ht(this.indexSet_,e.toString())}addIndex(e,t){Me(e!==_b,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(vb.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Fb(n,e.getCompare()):Ub;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new Vb(c,l)}addToIndexes(e,t){const n=mt(this.indexes_,((n,r)=>{const i=ft(this.indexSet_,r);if(Me(i,"Missing index implementation for "+r),n===Ub){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(vb.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Fb(n,i.getCompare())}return Ub}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new vb(e.name,r))),i.insert(e,e.node)}}));return new Vb(n,this.indexSet_)}removeFromIndexes(e,t){const n=mt(this.indexes_,(n=>{if(n===Ub)return n;{const r=t.get(e.name);return r?n.remove(new vb(e.name,r)):n}}));return new Vb(n,this.indexSet_)}}let zb;class $b{static get EMPTY_NODE(){return zb||(zb=new $b(new jb(Cb),null,Vb.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ib(this.priorityNode_),this.children_.isEmpty()&&Me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zb}updatePriority(e){return this.children_.isEmpty()?this:new $b(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?zb:t}}getChild(e){const t=tb(e);return null===t?this:this.getImmediateChild(t).getChild(rb(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Me(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new vb(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?zb:this.priorityNode_;return new $b(r,s,i)}}updateChild(e,t){const n=tb(e);if(null===n)return t;{Me(".priority"!==tb(e)||1===nb(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(rb(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Db,((s,o)=>{t[s]=o.val(e),n++,i&&$b.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Nb(this.getPriority().val())+":"),this.forEachChild(Db,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":iv(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new vb(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new vb(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new vb(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,vb.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,vb.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Hb?-1:0}withIndex(e){if(e===_b||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new $b(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===_b||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Db),n=t.getIterator(Db);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===_b?null:this.indexMap_.get(e.toString())}}$b.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Hb=new class extends $b{constructor(){super(new jb(Cb),$b.EMPTY_NODE,Vb.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $b.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(vb,{MIN:{value:new vb(mv,$b.EMPTY_NODE)},MAX:{value:new vb(gv,Hb)}}),wb.__EMPTY_NODE=$b.EMPTY_NODE,Mb.__childrenNodeConstructor=$b,Tb=Hb,function(e){Pb=e}(Hb);function Wb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return $b.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Me(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Mb(e,Wb(t))}if(e instanceof Array){let n=$b.EMPTY_NODE;return _v(e,((t,r)=>{if(ht(e,t)&&"."!==t.substring(0,1)){const e=Wb(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Wb(t))}{const n=[];let r=!1;if(_v(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Wb(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new vb(e,i)))}})),0===n.length)return $b.EMPTY_NODE;const i=Fb(n,kb,(e=>e.name),Cb);if(r){const e=Fb(n,Db.getCompare());return new $b(i,Wb(t),new Vb({".priority":e},{".priority":Db}))}return new $b(i,Wb(t),Vb.Default)}}!function(e){Ob=e}(Wb);class qb extends bb{constructor(e){super(),this.indexPath_=e,Me(!lb(e)&&".priority"!==tb(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?yv(e.name,t.name):i}makePost(e,t){const n=Wb(e),r=$b.EMPTY_NODE.updateChild(this.indexPath_,n);return new vb(t,r)}maxPost(){const e=$b.EMPTY_NODE.updateChild(this.indexPath_,Hb);return new vb(gv,e)}toString(){return sb(this.indexPath_,0).join("/")}}const Kb=new class extends bb{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?yv(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return vb.MIN}maxPost(){return vb.MAX}makePost(e,t){const n=Wb(e);return new vb(t,n)}toString(){return".value"}};function Yb(e){return{type:"value",snapshotNode:e}}function Gb(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Xb(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Qb(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Zb{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Me(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Xb(t,o)):Me(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Gb(t,n)):s.trackChildChange(Qb(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Db,((e,r)=>{t.hasChild(e)||n.trackChildChange(Xb(e,r))})),t.isLeafNode()||t.forEachChild(Db,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Qb(t,r,i))}else n.trackChildChange(Gb(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$b.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Jb{constructor(e){this.indexedFilter_=new Zb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Jb.getStartPost_(e),this.endPost_=Jb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new vb(t,n))||(n=$b.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=$b.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority($b.EMPTY_NODE);const i=this;return t.forEachChild(Db,((e,t)=>{i.matches(new vb(e,t))||(r=r.updateImmediateChild(e,$b.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ex{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Jb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new vb(t,n))||(n=$b.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=$b.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=$b.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority($b.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,$b.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Me(o.numChildren()===this.limit_,"");const a=new vb(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,a);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Qb(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Xb(t,e));const n=o.updateImmediateChild(t,$b.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Gb(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Xb(l.name,l.node)),i.trackChildChange(Gb(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,$b.EMPTY_NODE)):e}}class tx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Db}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mv}hasEnd(){return this.endSet_}getIndexEndValue(){return Me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Me(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Db}copy(){const e=new tx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nx(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Db?n="$priority":e.index_===Kb?n="$value":e.index_===_b?n="$key":(Me(e.index_ instanceof qb,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ut(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ut(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ut(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ut(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ut(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function rx(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Db&&(t.i=e.index_.toString()),t}class ix extends Xv{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=uv("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=ix.getListenId_(e,n),o={};this.listens_[s]=o;const a=nx(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),ft(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=ix.getListenId_(e,t);delete this.listens_[n]}get(e){const t=nx(e._queryParams),n=e._path.toString(),r=new Xe;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+vt(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=ct(a.responseText)}catch(zW){fv("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&fv("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class sx{constructor(){this.rootNode_=$b.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ox(){return{value:null,children:new Map}}function ax(e,t,n){if(lb(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=tb(t);e.children.has(r)||e.children.set(r,ox());ax(e.children.get(r),t=rb(t),n)}}function lx(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{lx(r,new Jv(t.toString()+"/"+e),n)}))}class cx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&_v(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class ux{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cx(e);const n=1e4+2e4*Math.random();Cv(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;_v(e,((e,r)=>{r>0&&ht(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Cv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var dx;function hx(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(dx||(dx={}));class fx{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=dx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(lb(this.path)){if(null!=this.affectedTree.value)return Me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Jv(e));return new fx(eb(),t,this.revert)}}return Me(tb(this.path)===e,"operationForChild called for unrelated child."),new fx(rb(this.path),this.affectedTree,this.revert)}}class px{constructor(e,t){this.source=e,this.path=t,this.type=dx.LISTEN_COMPLETE}operationForChild(e){return lb(this.path)?new px(this.source,eb()):new px(this.source,rb(this.path))}}class mx{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=dx.OVERWRITE}operationForChild(e){return lb(this.path)?new mx(this.source,eb(),this.snap.getImmediateChild(e)):new mx(this.source,rb(this.path),this.snap)}}class gx{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=dx.MERGE}operationForChild(e){if(lb(this.path)){const t=this.children.subtree(new Jv(e));return t.isEmpty()?null:t.value?new mx(this.source,eb(),t.value):new gx(this.source,eb(),t)}return Me(tb(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gx(this.source,rb(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class yx{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(lb(e))return this.isFullyInitialized()&&!this.filtered_;const t=tb(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class vx{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bx(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw De("Should only compare child_ events.");const r=new vb(t.childName,t.snapshotNode),i=new vb(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function xx(e,t){return{eventCache:e,serverCache:t}}function wx(e,t,n,r){return xx(new yx(t,n,r),e.serverCache)}function _x(e,t,n,r){return xx(e.eventCache,new yx(t,n,r))}function Sx(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ex(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let jx;class kx{static fromObject(e){let t=new kx(null);return _v(e,((e,n)=>{t=t.set(new Jv(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(jx||(jx=new jb(vv)),jx);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:eb(),value:this.value};if(lb(e))return null;{const n=tb(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(rb(e),t);if(null!=i){return{path:ab(new Jv(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(lb(e))return this;{const t=tb(e),n=this.children.get(t);return null!==n?n.subtree(rb(e)):new kx(null)}}set(e,t){if(lb(e))return new kx(t,this.children);{const n=tb(e),r=(this.children.get(n)||new kx(null)).set(rb(e),t),i=this.children.insert(n,r);return new kx(this.value,i)}}remove(e){if(lb(e))return this.children.isEmpty()?new kx(null):new kx(null,this.children);{const t=tb(e),n=this.children.get(t);if(n){const r=n.remove(rb(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new kx(null):new kx(this.value,i)}return this}}get(e){if(lb(e))return this.value;{const t=tb(e),n=this.children.get(t);return n?n.get(rb(e)):null}}setTree(e,t){if(lb(e))return t;{const n=tb(e),r=(this.children.get(n)||new kx(null)).setTree(rb(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new kx(this.value,i)}}fold(e){return this.fold_(eb(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(ab(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,eb(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(lb(e))return null;{const r=tb(e),i=this.children.get(r);return i?i.findOnPath_(rb(e),ab(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,eb(),t)}foreachOnPath_(e,t,n){if(lb(e))return this;{this.value&&n(t,this.value);const r=tb(e),i=this.children.get(r);return i?i.foreachOnPath_(rb(e),ab(t,r),n):new kx(null)}}foreach(e){this.foreach_(eb(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(ab(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Cx{constructor(e){this.writeTree_=e}static empty(){return new Cx(new kx(null))}}function Tx(e,t,n){if(lb(t))return new Cx(new kx(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=cb(i,t);return s=s.updateChild(o,n),new Cx(e.writeTree_.set(i,s))}{const r=new kx(n),i=e.writeTree_.setTree(t,r);return new Cx(i)}}}function Nx(e,t,n){let r=e;return _v(n,((e,n)=>{r=Tx(r,ab(t,e),n)})),r}function Ix(e,t){if(lb(t))return Cx.empty();{const n=e.writeTree_.setTree(t,new kx(null));return new Cx(n)}}function Ax(e,t){return null!=Ox(e,t)}function Ox(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(cb(n.path,t)):null}function Px(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Db,((e,n)=>{t.push(new vb(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new vb(e,n.value))})),t}function Mx(e,t){if(lb(t))return e;{const n=Ox(e,t);return new Cx(null!=n?new kx(n):e.writeTree_.subtree(t))}}function Dx(e){return e.writeTree_.isEmpty()}function Rx(e,t){return Lx(eb(),e.writeTree_,t)}function Lx(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Me(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Lx(ab(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(ab(e,".priority"),r)),n}}function Fx(e,t){return Qx(t,e)}function Bx(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Me(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Ux(t,r.path)?i=!1:db(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=zx(e.allWrites,Vx,eb()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Ix(e.visibleWrites,r.path);else{_v(r.children,(t=>{e.visibleWrites=Ix(e.visibleWrites,ab(r.path,t))}))}return!0}return!1}function Ux(e,t){if(e.snap)return db(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&db(ab(e.path,n),t))return!0;return!1}function Vx(e){return e.visible}function zx(e,t,n){let r=Cx.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)db(n,e)?(t=cb(n,e),r=Tx(r,t,s.snap)):db(e,n)&&(t=cb(e,n),r=Tx(r,eb(),s.snap.getChild(t)));else{if(!s.children)throw De("WriteRecord should have .snap or .children");if(db(n,e))t=cb(n,e),r=Nx(r,t,s.children);else if(db(e,n))if(t=cb(e,n),lb(t))r=Nx(r,eb(),s.children);else{const e=ft(s.children,tb(t));if(e){const n=e.getChild(rb(t));r=Tx(r,eb(),n)}}}}}return r}function $x(e,t,n,r,i){if(r||i){const s=Mx(e.visibleWrites,t);if(!i&&Dx(s))return n;if(i||null!=n||Ax(s,eb())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(db(e.path,t)||db(t,e.path))};return Rx(zx(e.allWrites,s,t),n||$b.EMPTY_NODE)}return null}{const r=Ox(e.visibleWrites,t);if(null!=r)return r;{const r=Mx(e.visibleWrites,t);if(Dx(r))return n;if(null!=n||Ax(r,eb())){return Rx(r,n||$b.EMPTY_NODE)}return null}}}function Hx(e,t,n,r){return $x(e.writeTree,e.treePath,t,n,r)}function Wx(e,t){return function(e,t,n){let r=$b.EMPTY_NODE;const i=Ox(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Db,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Mx(e.visibleWrites,t);return n.forEachChild(Db,((e,t)=>{const n=Rx(Mx(i,new Jv(e)),t);r=r.updateImmediateChild(e,n)})),Px(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Px(Mx(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function qx(e,t,n,r){return function(e,t,n,r,i){Me(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ab(t,n);if(Ax(e.visibleWrites,s))return null;{const t=Mx(e.visibleWrites,s);return Dx(t)?i.getChild(n):Rx(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Kx(e,t){return function(e,t){return Ox(e.visibleWrites,t)}(e.writeTree,ab(e.treePath,t))}function Yx(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Mx(e.visibleWrites,t),c=Ox(l,eb());if(null!=c)a=c;else{if(null==n)return[];a=Rx(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Gx(e,t,n){return function(e,t,n,r){const i=ab(t,n),s=Ox(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Rx(Mx(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Xx(e,t){return Qx(ab(e.treePath,t),e.writeTree)}function Qx(e,t){return{treePath:e,writeTree:t}}class Zx{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Me("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Me(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Qb(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Xb(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Gb(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw De("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Qb(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Jx=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ew{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new yx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gx(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ex(this.viewCache_),i=Yx(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function tw(e,t,n,r,i){const s=new Zx;let o,a;if(n.type===dx.OVERWRITE){const l=n;l.source.fromUser?o=iw(e,t,l.path,l.snap,r,i,s):(Me(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!lb(l.path),o=rw(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===dx.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=ab(n,r);sw(t,tb(c))&&(a=iw(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=ab(n,r);sw(t,tb(c))||(a=iw(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Me(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=aw(e,t,l.path,l.children,r,i,a,s))}else if(n.type===dx.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Kx(r,n))return t;{const a=new ew(r,t,i),l=t.eventCache.getNode();let c;if(lb(n)||".priority"===tb(n)){let n;if(t.serverCache.isFullyInitialized())n=Hx(r,Ex(t));else{const e=t.serverCache.getNode();Me(e instanceof $b,"serverChildren would be complete if leaf node"),n=Wx(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=tb(n);let u=Gx(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,rb(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,$b.EMPTY_NODE,rb(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Hx(r,Ex(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Kx(r,eb()),wx(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Kx(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(lb(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return rw(e,t,n,l.getNode().getChild(n),i,s,a,o);if(lb(n)){let r=new kx(null);return l.getNode().forEachChild(_b,((e,t)=>{r=r.set(new Jv(e),t)})),aw(e,t,n,r,i,s,a,o)}return t}{let c=new kx(null);return r.foreach(((e,t)=>{const r=ab(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),aw(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==dx.LISTEN_COMPLETE)throw De("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=_x(t,s.getNode(),s.isFullyInitialized()||lb(n),s.isFiltered());return nw(e,o,n,r,Jx,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Sx(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Yb(Sx(t)))}}(t,o,l),{viewCache:o,changes:l}}function nw(e,t,n,r,i,s){const o=t.eventCache;if(null!=Kx(r,n))return t;{let a,l;if(lb(n))if(Me(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ex(t),i=Wx(r,n instanceof $b?n:$b.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Hx(r,Ex(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=tb(n);if(".priority"===c){Me(1===nb(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=qx(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=rb(n);let d;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=qx(r,n,o.getNode(),l);d=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else d=Gx(r,c,t.serverCache);a=null!=d?e.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return wx(t,a,o.isFullyInitialized()||lb(n),e.filter.filtersNodes())}}function rw(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(lb(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=tb(n);if(!l.isCompleteForPath(n)&&nb(n)>1)return t;const i=rb(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Jx,null)}const d=_x(t,c,l.isFullyInitialized()||lb(n),u.filtersNodes());return nw(e,d,n,i,new ew(i,d,s),a)}function iw(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new ew(i,t,s);if(lb(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=wx(t,c,!0,e.filter.filtersNodes());else{const i=tb(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=wx(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=rb(n),c=a.getNode().getImmediateChild(i);let d;if(lb(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===ib(s)&&e.getChild(ob(s)).isEmpty()?e:e.updateChild(s,r):$b.EMPTY_NODE}if(c.equals(d))l=t;else{l=wx(t,e.filter.updateChild(a.getNode(),i,d,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function sw(e,t){return e.eventCache.isCompleteForChild(t)}function ow(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function aw(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=lb(n)?r:new kx(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=ow(0,t.serverCache.getNode().getImmediateChild(n),r);c=rw(e,c,new Jv(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=ow(0,t.serverCache.getNode().getImmediateChild(n),r);c=rw(e,c,new Jv(n),l,i,s,o,a)}})),c}class lw{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Zb(n.getIndex()),i=(s=n).loadsAllData()?new Zb(s.getIndex()):s.hasLimit()?new ex(s):new Jb(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode($b.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode($b.EMPTY_NODE,a.getNode(),null),u=new yx(l,o.isFullyInitialized(),r.filtersNodes()),d=new yx(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=xx(d,u),this.eventGenerator_=new vx(this.query_)}get query(){return this.query_}}function cw(e,t){const n=Ex(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!lb(t)&&!n.getImmediateChild(tb(t)).isEmpty())?n.getChild(t):null}function uw(e){return 0===e.eventRegistrations_.length}function dw(e,t,n){const r=[];if(n){Me(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function hw(e,t,n,r){t.type===dx.MERGE&&null!==t.source.queryId&&(Me(Ex(e.viewCache_),"We should always have a full cache before handling merges"),Me(Sx(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=tw(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Me(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Me(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Me(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,fw(e,s.changes,s.viewCache.eventCache.getNode(),null)}function fw(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),bx(e,i,"child_removed",t,r,n),bx(e,i,"child_added",t,r,n),bx(e,i,"child_moved",s,r,n),bx(e,i,"child_changed",t,r,n),bx(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let pw,mw;class gw{constructor(){this.views=new Map}}function yw(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Me(null!=s,"SyncTree gave us an op for an invalid query."),hw(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(hw(s,t,n,r));return i}}function vw(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Hx(n,i?r:null),s=!1;e?s=!0:r instanceof $b?(e=Wx(n,r),s=!1):(e=$b.EMPTY_NODE,s=!1);const o=xx(new yx(e,s,!1),new yx(r,i,!1));return new lw(t,o)}return o}function bw(e,t,n,r,i,s){const o=vw(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Db,((e,t)=>{r.push(Gb(e,t))}));return n.isFullyInitialized()&&r.push(Yb(n.getNode())),fw(e,r,n.getNode(),t)}(o,n)}function xw(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=jw(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(dw(c,n,r)),uw(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(dw(t,n,r)),uw(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!jw(e)&&s.push(new(Me(pw,"Reference.ts has not been loaded"),pw)(t._repo,t._path)),{removed:s,events:o}}function ww(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function _w(e,t){let n=null;for(const r of e.views.values())n=n||cw(r,t);return n}function Sw(e,t){if(t._queryParams.loadsAllData())return kw(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Ew(e,t){return null!=Sw(e,t)}function jw(e){return null!=kw(e)}function kw(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Cw=1;class Tw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kx(null),this.pendingWriteTree_={visibleWrites:Cx.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Nw(e,t,n,r,i){return function(e,t,n,r,i){Me(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Tx(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Lw(e,new mx({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Iw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Bx(e.pendingWriteTree_,t)){let t=new kx(null);return null!=r.snap?t=t.set(eb(),!0):_v(r.children,(e=>{t=t.set(new Jv(e),!0)})),Lw(e,new fx(r.path,t,n))}return[]}function Aw(e,t,n){return Lw(e,new mx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ow(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Ew(o,t))){const l=xw(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>jw(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&jw(t)){return[kw(t)]}{let e=[];return t&&(e=ww(t)),_v(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=Uw(e,r);e.listenProvider_.startListening(qw(i),Vw(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(qw(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(zw(t));e.listenProvider_.stopListening(qw(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=zw(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Pw(e,t,n,r){const i=$w(e,r);if(null!=i){const r=Hw(i),s=r.path,o=r.queryId,a=cb(s,t);return Ww(e,s,new mx(hx(o),a,n))}return[]}function Mw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=cb(e,i);s=s||_w(t,n),o=o||jw(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||jw(l),s=s||_w(l,eb())):(l=new gw,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=$b.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=_w(t,eb());n&&(s=s.updateImmediateChild(e,n))}))}const c=Ew(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=zw(t);Me(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Cw++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=bw(l,t,n,Fx(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=Sw(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Vw(e,t),s=Uw(e,n),o=e.listenProvider_.startListening(qw(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Me(!jw(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!lb(e)&&t&&jw(t))return[kw(t).query];{let e=[];return t&&(e=e.concat(ww(t).map((e=>e.query)))),_v(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(qw(r),Vw(e,r))}}return o}(e,t,n))}return u}function Dw(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=_w(n,cb(e,t));if(r)return r}));return $x(r,t,i,n,!0)}function Rw(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=cb(e,n);r=r||_w(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||_w(i,eb()):(i=new gw,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new yx(r,!0,!1):null;return function(e){return Sx(e.viewCache_)}(vw(i,t,Fx(e.pendingWriteTree_,t._path),s?o.getNode():$b.EMPTY_NODE,s))}function Lw(e,t){return Fw(t,e.syncPointTree_,null,Fx(e.pendingWriteTree_,eb()))}function Fw(e,t,n,r){if(lb(e.path))return Bw(e,t,n,r);{const i=t.get(eb());null==n&&null!=i&&(n=_w(i,eb()));let s=[];const o=tb(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Xx(r,o);s=s.concat(Fw(a,l,e,t))}return i&&(s=s.concat(yw(i,e,r,n))),s}}function Bw(e,t,n,r){const i=t.get(eb());null==n&&null!=i&&(n=_w(i,eb()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Xx(r,t),l=e.operationForChild(t);l&&(s=s.concat(Bw(l,i,o,a)))})),i&&(s=s.concat(yw(i,e,r,n))),s}function Uw(e,t){const n=t.query,r=Vw(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||$b.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=$w(e,n);if(r){const n=Hw(r),i=n.path,s=n.queryId,o=cb(i,t);return Ww(e,i,new px(hx(s),o))}return[]}(e,n._path,r):function(e,t){return Lw(e,new px({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Ow(e,n,null,r)}}}}function Vw(e,t){const n=zw(t);return e.queryToTagMap.get(n)}function zw(e){return e._path.toString()+"$"+e._queryIdentifier}function $w(e,t){return e.tagToQueryMap.get(t)}function Hw(e){const t=e.indexOf("$");return Me(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Jv(e.substr(0,t))}}function Ww(e,t,n){const r=e.syncPointTree_.get(t);Me(r,"Missing sync point for query tag that we're tracking");return yw(r,n,Fx(e.pendingWriteTree_,t),null)}function qw(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Me(mw,"Reference.ts has not been loaded"),mw)(e._repo,e._path):e}class Kw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Kw(t)}node(){return this.node_}}class Yw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ab(this.path_,e);return new Yw(this.syncTree_,t)}node(){return Dw(this.syncTree_,this.path_)}}const Gw=function(e,t,n){return e&&"object"===typeof e?(Me(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Xw(e[".sv"],t,n):"object"===typeof e[".sv"]?Qw(e[".sv"],t):void Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Xw=function(e,t,n){if("timestamp"===e)return n.timestamp;Me(!1,"Unexpected server value: "+e)},Qw=function(e,t,n){e.hasOwnProperty("increment")||Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Me(!1,"Unexpected increment value: "+r);const i=t.node();if(Me(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Zw=function(e,t,n,r){return e_(t,new Yw(n,e),r)},Jw=function(e,t,n){return e_(e,new Kw(t),n)};function e_(e,t,n){const r=e.getPriority().val(),i=Gw(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Gw(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Mb(s,Wb(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Mb(i))),r.forEachChild(Db,((e,r)=>{const i=e_(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class t_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function n_(e,t){let n=t instanceof Jv?t:new Jv(t),r=e,i=tb(n);for(;null!==i;){const e=ft(r.node.children,i)||{children:{},childCount:0};r=new t_(i,r,e),n=rb(n),i=tb(n)}return r}function r_(e){return e.node.value}function i_(e,t){e.node.value=t,c_(e)}function s_(e){return e.node.childCount>0}function o_(e,t){_v(e.node.children,((n,r)=>{t(new t_(n,e,r))}))}function a_(e,t,n,r){n&&!r&&t(e),o_(e,(e=>{a_(e,t,!0,r)})),n&&r&&t(e)}function l_(e){return new Jv(null===e.parent?e.name:l_(e.parent)+"/"+e.name)}function c_(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===r_(e)&&!s_(e)}(n),i=ht(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,c_(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,c_(e))}(e.parent,e.name,e)}const u_=/[\[\].#$\/\u0000-\u001F\u007F]/,d_=/[\[\].#$\u0000-\u001F\u007F]/,h_=10485760,f_=function(e){return"string"===typeof e&&0!==e.length&&!u_.test(e)},p_=function(e){return"string"===typeof e&&0!==e.length&&!d_.test(e)},m_=function(e,t,n,r){r&&void 0===t||g_(Et(e,"value"),t,n)},g_=function(e,t,n){const r=n instanceof Jv?new hb(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+pb(r));if("function"===typeof t)throw new Error(e+"contains a function "+pb(r)+" with contents = "+t.toString());if(pv(t))throw new Error(e+"contains "+t.toString()+" "+pb(r));if("string"===typeof t&&t.length>h_/3&&jt(t)>h_)throw new Error(e+"contains a string greater than "+h_+" utf8 bytes "+pb(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(_v(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!f_(t)))throw new Error(e+" contains an invalid key ("+t+") "+pb(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=jt(t),fb(e)}(r,t),g_(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=jt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+pb(r)+" in addition to actual children.")}},y_=function(e,t,n,r){if((!r||void 0!==n)&&!p_(n))throw new Error(Et(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},v_=function(e,t){if(".info"===tb(t))throw new Error(e+" failed = Can't modify data under /.info/")},b_=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!f_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),p_(e)}(n))throw new Error(Et(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class x_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function w_(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||ub(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function __(e,t,n){w_(e,n),E_(e,(e=>ub(e,t)))}function S_(e,t,n){w_(e,n),E_(e,(e=>db(e,t)||db(t,e)))}function E_(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(j_(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function j_(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();ov&&cv("event: "+n.toString()),kv(r)}}}const k_="repo_interrupt";class C_{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new x_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ox(),this.transactionQueueTree_=new t_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function T_(e,t,n){if(e.stats_=Vv(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ix(e.repoInfo_,((t,n,r,i)=>{A_(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>O_(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ut(n)}catch(zW){throw new Error("Invalid authOverride provided: "+zW)}}e.persistentConnection_=new yb(e.repoInfo_,t,((t,n,r,i)=>{A_(e,t,n,r,i)}),(t=>{O_(e,t)}),(t=>{!function(e,t){_v(t,((t,n)=>{P_(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Uv[n]||(Uv[n]=t()),Uv[n]}(e.repoInfo_,(()=>new ux(e.stats_,e.server_))),e.infoData_=new sx,e.infoSyncTree_=new Tw({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Aw(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),P_(e,"connected",!1),e.serverSyncTree_=new Tw({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);S_(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function N_(e){const t=e.infoData_.getNode(new Jv(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function I_(e){return(t=(t={timestamp:N_(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function A_(e,t,n,r,i){e.dataUpdateCount++;const s=new Jv(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=mt(n,(e=>Wb(e)));o=function(e,t,n,r){const i=$w(e,r);if(i){const r=Hw(i),s=r.path,o=r.queryId,a=cb(s,t),l=kx.fromObject(n);return Ww(e,s,new gx(hx(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Wb(n);o=Pw(e.serverSyncTree_,s,t,i)}else if(r){const t=mt(n,(e=>Wb(e)));o=function(e,t,n){const r=kx.fromObject(n);return Lw(e,new gx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Wb(n);o=Aw(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=z_(e,s)),S_(e.eventQueue_,a,o)}function O_(e,t){P_(e,"connected",t),!1===t&&function(e){F_(e,"onDisconnectEvents");const t=I_(e),n=ox();lx(e.onDisconnect_,eb(),((r,i)=>{const s=Zw(r,i,e.serverSyncTree_,t);ax(n,r,s)}));let r=[];lx(n,eb(),((t,n)=>{r=r.concat(Aw(e.serverSyncTree_,t,n));const i=K_(e,t);z_(e,i)})),e.onDisconnect_=ox(),S_(e.eventQueue_,eb(),r)}(e)}function P_(e,t,n){const r=new Jv("/.info/"+t),i=Wb(n);e.infoData_.updateSnapshot(r,i);const s=Aw(e.infoSyncTree_,r,i);S_(e.eventQueue_,r,s)}function M_(e){return e.nextWriteId_++}function D_(e,t,n,r,i){F_(e,"set",{path:t.toString(),value:n,priority:r});const s=I_(e),o=Wb(n,r),a=Dw(e.serverSyncTree_,t),l=Jw(o,a,s),c=M_(e),u=Nw(e.serverSyncTree_,t,l,c,!0);w_(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||fv("set at "+t+" failed: "+n);const o=Iw(e.serverSyncTree_,c,!s);S_(e.eventQueue_,t,o),B_(e,i,n,r)}));const d=K_(e,t);z_(e,d),S_(e.eventQueue_,d,[])}function R_(e,t,n){let r;r=".info"===tb(t._path)?Ow(e.infoSyncTree_,t,n):Ow(e.serverSyncTree_,t,n),__(e.eventQueue_,t._path,r)}function L_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(k_)}function F_(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];cv(t,...r)}function B_(e,t,n,r){t&&kv((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function U_(e,t,n){return Dw(e.serverSyncTree_,t,n)||$b.EMPTY_NODE}function V_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||q_(e,t),r_(t)){const n=H_(e,t);Me(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=U_(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Me(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=cb(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{F_(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Iw(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();q_(e,n_(e.transactionQueueTree_,t)),V_(e,e.transactionQueueTree_),S_(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)kv(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{fv("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}z_(e,t)}}),o)}(e,l_(t),n)}else s_(t)&&o_(t,(t=>{V_(e,t)}))}function z_(e,t){const n=$_(e,t),r=l_(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=cb(n,s.path);let u,d=!1;if(Me(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,u=s.abortReason,i=i.concat(Iw(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)d=!0,u="maxretry",i=i.concat(Iw(e.serverSyncTree_,s.currentWriteId,!0));else{const n=U_(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){g_("transaction failed: Data returned ",r,s.path);let t=Wb(r);"object"===typeof r&&null!=r&&ht(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=I_(e),c=Jw(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=M_(e),o.splice(o.indexOf(a),1),i=i.concat(Nw(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Iw(e.serverSyncTree_,a,!0))}else d=!0,u="nodata",i=i.concat(Iw(e.serverSyncTree_,s.currentWriteId,!0))}S_(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;q_(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)kv(r[l]);V_(e,e.transactionQueueTree_)}(e,H_(e,n),r),r}function $_(e,t){let n,r=e.transactionQueueTree_;for(n=tb(t);null!==n&&void 0===r_(r);)r=n_(r,n),n=tb(t=rb(t));return r}function H_(e,t){const n=[];return W_(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function W_(e,t,n){const r=r_(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);o_(t,(t=>{W_(e,t,n)}))}function q_(e,t){const n=r_(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,i_(t,n.length>0?n:void 0)}o_(t,(t=>{q_(e,t)}))}function K_(e,t){const n=l_($_(e,t)),r=n_(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Y_(e,t)})),Y_(e,r),a_(r,(t=>{Y_(e,t)})),n}function Y_(e,t){const n=r_(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Me(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Me(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Iw(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?i_(t,void 0):n.length=s+1,S_(e.eventQueue_,l_(t),i);for(let e=0;e<r.length;e++)kv(r[e])}}const G_=function(e,t){const n=X_(e),r=n.namespace;"firebase.com"===n.domain&&hv(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||hv("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fv("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Rv(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Jv(n.pathString)}},X_=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(zW){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fv(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},Q_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class Z_{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ut(this.snapshot.exportVal())}}class J_{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Me(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class tS{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return lb(this._path)?null:ib(this._path)}get ref(){return new nS(this._repo,this._path)}get _queryIdentifier(){const e=rx(this._queryParams),t=xv(e);return"{}"===t?"default":t}get _queryObject(){return rx(this._queryParams)}isEqual(e){if(!((e=Ct(e))instanceof tS))return!1;const t=this._repo===e._repo,n=ub(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class nS extends tS{constructor(e,t){super(e,t,new tx,!1)}get parent(){const e=ob(this._path);return null===e?null:new nS(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class rS{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Jv(e),n=sS(this.ref,e);return new rS(this._node.getChild(t),n,Db)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new rS(n,sS(this.ref,t),Db))))}hasChild(e){const t=new Jv(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function iS(e,t){return(e=Ct(e))._checkNotDeleted("ref"),void 0!==t?sS(e._root,t):e._root}function sS(e,t){var n,r,i,s;return null===tb((e=Ct(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),y_(n,r,i,s)):y_("child","path",t,!1),new nS(e._repo,ab(e._path,t))}function oS(e,t){e=Ct(e),v_("set",e._path),m_("set",t,e._path,!1);const n=new Xe;return D_(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function aS(e){e=Ct(e);const t=new eS((()=>{})),n=new lS(t);return function(e,t,n){const r=Rw(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Wb(r).withIndex(t._queryParams.getIndex());let s;if(Mw(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Aw(e.serverSyncTree_,t._path,i);else{const n=Vw(e.serverSyncTree_,t);s=Pw(e.serverSyncTree_,t._path,i,n)}return S_(e.eventQueue_,t._path,s),Ow(e.serverSyncTree_,t,n,null,!0),i}),(n=>(F_(e,"get for query "+ut(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new rS(t,new nS(e._repo,e._path),e._queryParams.getIndex())))}class lS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Z_("value",this,new rS(e.snapshotNode,new nS(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new J_(this,e,t):null}matches(e){return e instanceof lS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class cS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new J_(this,e,t):null}createEvent(e,t){Me(null!=e.childName,"Child events should have a childName.");const n=sS(new nS(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Z_(e.type,this,new rS(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof cS&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function uS(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{R_(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new eS(n,s||void 0),a="value"===t?new lS(o):new cS(t,o);return function(e,t,n){let r;r=".info"===tb(t._path)?Mw(e.infoSyncTree_,t,n):Mw(e.serverSyncTree_,t,n),__(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>R_(e._repo,e,a)}function dS(e,t,n,r){return uS(e,"value",t,n,r)}!function(e){Me(!pw,"__referenceConstructor has already been defined"),pw=e}(nS),function(e){Me(!mw,"__referenceConstructor has already been defined"),mw=e}(nS);const hS={};let fS=!1;function pS(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||hv("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cv("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=G_(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=G_(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Iv(Iv.OWNER):new Nv(e.name,e.options,t);b_("Invalid Firebase Database URL",l),lb(l.path)||hv("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=hS[t.name];i||(i={},hS[t.name]=i);let s=i[e.toURLString()];s&&hv("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new C_(e,fS,n,r),i[e.toURLString()]=s,s}(c,e,u,new Tv(e,n));return new mS(d,e)}class mS{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(T_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nS(this._repo,eb())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=hS[t];n&&n[e.key]===e||hv(`Database ${t}(${e.repoInfo_}) has already been deleted.`),L_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&hv("Cannot call "+e+" on a deleted database.")}}function gS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn(),t=arguments.length>1?arguments[1]:void 0;const n=Un(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Ke("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ct(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&hv("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&hv('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Iv(Iv.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Qe(r.mockUserToken,e.app.options.projectId);s=new Iv(t)}!function(e,t,n,r){e.repoInfo_=new Rv(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}yb.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},yb.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Xy(Hn),Bn(new Tt("database",((e,t)=>{let{instanceIdentifier:n}=t;return pS(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Kn(Ky,Yy,e),Kn(Ky,Yy,"esm2017")}();const yS=Wn({apiKey:"AIzaSyDQIMqO4bJ-k4-pjjGnHGwCbCYUFUQe7Hw",authDomain:"smartecolock.firebaseapp.com",projectId:"smartecolock",storageBucket:"smartecolock.firebasestorage.app",messagingSenderId:"300630412358",appId:"1:300630412358:web:44afc1a224507ccb764e47",measurementId:"G-PNBNJ39FE0",databaseURL:"https://smartecolock-default-rtdb.asia-southeast1.firebasedatabase.app"}),vS=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn();e=Ct(e);const t=Un(e,my);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Un(e,my);if(n.isInitialized()){const e=n.getImmediate();if(gt(t,n.getOptions()))return e;throw vy.create("already-initialized")}const r=n.initialize({options:t})}(e)}(yS),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn();const t=Un(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Un(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(gt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ur(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:_o,persistence:[As,ps,gs]}),r=Ge("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ko)return;const r=null===t||void 0===t?void 0:t.token;Co!==r&&(Co=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Ct(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Ct(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=qe("auth");return s&&Ni(n,`http://${s}`),n}(yS)),bS=function(e,t){const n="object"==typeof e?e:qn(),r="string"==typeof e?e:t||Ul,i=Un(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Ke("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=rm(e,lm))._getSettings(),o=`${t}:${n}`;if(s.host!==sm&&s.host!==o&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Wo.MOCK_USER;else{t=Qe(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ra(na.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Wo(s)}e._authCredentials=new aa(new sa(t,n))}}(i,...e)}return i}(yS),xS=gS(yS);var wS=n(579);const _S=(0,r.createContext)(void 0),SS=()=>{const e=(0,r.useContext)(_S);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},ES=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),a=te(),l=async e=>{try{const t=await gg(fm(bS,"users",e.uid));if(t.exists()){const n=t.data();return{...e,role:"admin",fullName:n.fullName,department:n.department}}const n=await gg(fm(bS,"teachers",e.uid));if(n.exists()){const t=n.data();return{...e,role:"instructor",fullName:t.fullName,department:t.department}}const r=await gg(fm(bS,"students",e.uid));if(r.exists()){const t=r.data();return{...e,role:"student",fullName:t.fullName,department:t.department}}return e}catch(dv){return console.error("Error fetching user data:",dv),e}};(0,r.useEffect)((()=>{const e=function(e,t,n,r){return Ct(e).onAuthStateChanged(t,n,r)}(vS,(async e=>{if(e){const t=await l(e);i(t)}else i(null);o(!1)}));return()=>e()}),[]);const c={currentUser:n,login:async(e,t)=>{try{const{user:n}=await function(e,t,n){return Vn(e.app)?Promise.reject(fr(e)):ss(Ct(e),Hi.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&as(e),t}))}(vS,e,t),r=await l(n);if(i(r),!r.role)throw new Error("User role not found");{const e={admin:"/admin/dashboard",instructor:"/instructor/dashboard",student:"/students/dashboard"};console.log("Redirecting to:",e[r.role]),a(e[r.role],{replace:!0})}}catch(dv){throw console.error("Login error:",dv),dv}},register:async(e,t,n)=>{try{const{user:n}=await ls(vS,e,t)}catch(dv){throw dv}},logout:async()=>{try{await cs(vS),i(null),a("/login",{replace:!0})}catch(dv){throw console.error("Logout error:",dv),dv}},loading:s};return(0,wS.jsx)(_S.Provider,{value:c,children:!s&&t})};function jS(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function kS(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function CS(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function TS(e,t,n,r){if("function"===typeof t){const[i,s]=CS(r);t=t(void 0!==n?n:e.custom,i,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[i,s]=CS(r);t=t(void 0!==n?n:e.custom,i,s)}return t}function NS(e,t,n){const r=e.getProps();return TS(r,t,void 0!==n?n:r.custom,e)}function IS(e){let t;return()=>(void 0===t&&(t=e()),t)}const AS=IS((()=>void 0!==window.ScrollTimeline));class OS{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>"finished"in e?e.finished:e)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map((n=>AS()&&n.attachTimeline?n.attachTimeline(e):"function"===typeof t?t(n):void 0));return()=>{n.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class PS extends OS{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function MS(e,t){return e?e[t]||e.default||e:void 0}const DS=2e4;function RS(e){let t=0;let n=e.next(t);for(;!n.done&&t<DS;)t+=50,n=e.next(t);return t>=DS?1/0:t}function LS(e){return"function"===typeof e}function FS(e,t){e.timeline=t,e.onfinish=null}const BS=e=>Array.isArray(e)&&"number"===typeof e[0],US={linearEasing:void 0};function VS(e,t){const n=IS(e);return()=>{var e;return null!==(e=US[t])&&void 0!==e?e:n()}}const zS=VS((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(zW){return!1}return!0}),"linearEasing"),$S=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},HS=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e($S(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function WS(e){return Boolean("function"===typeof e&&zS()||!e||"string"===typeof e&&(e in KS||zS())||BS(e)||Array.isArray(e)&&e.every(WS))}const qS=e=>{let[t,n,r,i]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${i})`},KS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qS([0,.65,.55,1]),circOut:qS([.55,0,1,.45]),backIn:qS([.31,.01,.66,-.59]),backOut:qS([.33,1.53,.69,.99])};function YS(e,t){return e?"function"===typeof e&&zS()?HS(e,t):BS(e)?qS(e):Array.isArray(e)?e.map((e=>YS(e,t)||KS.easeOut)):KS[e]:void 0}const GS={x:!1,y:!1};function XS(){return GS.x||GS.y}function QS(e,t){const n=function(e,t,n){var r;if(e instanceof EventTarget)return[e];if("string"===typeof e){let i=document;t&&(i=t.current);const s=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function ZS(e){return!("touch"===e.pointerType||XS())}function JS(e,t){const n=`${t}PointerCapture`;if(e.target instanceof Element&&n in e.target&&void 0!==e.pointerId)try{e.target[n](e.pointerId)}catch(zW){}}const eE=(e,t)=>!!t&&(e===t||eE(e,t.parentElement)),tE=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary,nE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const rE=new WeakSet;function iE(e){return t=>{"Enter"===t.key&&e(t)}}function sE(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function oE(e){return tE(e)&&!XS()}function aE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=QS(e,n),o=e=>{const n=e.currentTarget;if(!n||!oE(e)||rE.has(n))return;rE.add(n),JS(e,"set");const r=t(n,e),s=(e,t)=>{n.removeEventListener("pointerup",o),n.removeEventListener("pointercancel",a),JS(e,"release"),oE(e)&&rE.has(n)&&(rE.delete(n),"function"===typeof r&&r(e,{success:t}))},o=e=>{const t=!!e.isTrusted&&(r=e,i=n instanceof Element?n.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight},r.clientX<i.left||r.clientX>i.right||r.clientY<i.top||r.clientY>i.bottom);var r,i;s(e,!t&&(!(n instanceof Element)||eE(n,e.target)))},a=e=>{s(e,!1)};n.addEventListener("pointerup",o,i),n.addEventListener("pointercancel",a,i),n.addEventListener("lostpointercapture",a,i)};return r.forEach((e=>{let t=!1;var r;(e=n.useGlobalTarget?window:e)instanceof HTMLElement&&(t=!0,r=e,nE.has(r.tagName)||-1!==r.tabIndex||null!==e.getAttribute("tabindex")||(e.tabIndex=0)),e.addEventListener("pointerdown",o,i),t&&e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=iE((()=>{if(rE.has(n))return;sE(n,"down");const e=iE((()=>{sE(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>sE(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,i)),i)})),s}const lE=e=>1e3*e,cE=e=>e/1e3,uE=e=>e;const dE=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hE=new Set(dE),fE=new Set(["width","height","top","left","right","bottom",...dE]),pE=e=>Array.isArray(e),mE=e=>pE(e)?e[e.length-1]||0:e,gE=!1,yE=!1,vE=["read","resolveKeyframes","update","preRender","render","postRender"],bE={value:null,addProjectionMetrics:null};function xE(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=vE.reduce(((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){o.has(t)&&(u.schedule(t),e()),l++,t(a)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{a=e,i?s=!0:(i=!0,[n,r]=[r,n],n.forEach(c),t&&bE.value&&bE.value.frameloop[t].push(l),l=0,n.clear(),i=!1,s&&(s=!1,u.process(e)))}};return u}(s,t?n:void 0),e)),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,f=()=>{const s=yE?i.timestamp:performance.now();n=!1,yE||(i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1)),i.timestamp=s,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(f))},p=vE.reduce(((t,s)=>{const a=o[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(f)),a.schedule(t,s,o)},t}),{});return{schedule:p,cancel:e=>{for(let t=0;t<vE.length;t++)o[vE[t]].cancel(e)},state:i,steps:o}}const{schedule:wE,cancel:_E,state:SE,steps:EE}=xE("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:uE,!0);let jE;function kE(){jE=void 0}const CE={now:()=>(void 0===jE&&CE.set(SE.isProcessing||yE?SE.timestamp:performance.now()),jE),set:e=>{jE=e,queueMicrotask(kE)}};function TE(e,t){-1===e.indexOf(t)&&e.push(t)}function NE(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class IE{constructor(){this.subscriptions=[]}add(e){return TE(this.subscriptions,e),()=>NE(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function AE(e,t){return t?e*(1e3/t):0}const OE={current:void 0};class PE{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=CE.now();t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=CE.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new IE);const n=this.events[e].add(t);return"change"===e?()=>{n(),wE.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return OE.current&&OE.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=CE.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return AE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ME(e,t){return new PE(e,t)}function DE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ME(n))}const RE=e=>Boolean(e&&e.getVelocity);function LE(e,t){const n=e.getValue("willChange");if(function(e){return Boolean(RE(e)&&e.add)}(n))return n.add(t)}const FE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BE="data-"+FE("framerAppearId");function UE(e){return e.props[BE]}const VE=!1,zE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function $E(e,t,n,r){if(e===t&&n===r)return uE;const i=t=>function(e,t,n,r,i){let s,o,a=0;do{o=t+(n-t)/2,s=zE(o,r,i)-e,s>0?n=o:t=o}while(Math.abs(s)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:zE(i(e),t,r)}const HE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,WE=e=>t=>1-e(1-t),qE=$E(.33,1.53,.69,.99),KE=WE(qE),YE=HE(KE),GE=e=>(e*=2)<1?.5*KE(e):.5*(2-Math.pow(2,-10*(e-1))),XE=e=>1-Math.sin(Math.acos(e)),QE=WE(XE),ZE=HE(XE),JE=e=>/^0[^.\s]+$/u.test(e);function ej(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||JE(e))}const tj=(e,t,n)=>n>t?t:n<e?e:n,nj={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},rj={...nj,transform:e=>tj(0,1,e)},ij={...nj,default:1},sj=e=>Math.round(1e5*e)/1e5,oj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const aj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lj=(e,t)=>n=>Boolean("string"===typeof n&&aj.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),cj=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[i,s,o,a]=r.match(oj);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},uj={...nj,transform:e=>Math.round((e=>tj(0,255,e))(e))},dj={test:lj("rgb","red"),parse:cj("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+uj.transform(t)+", "+uj.transform(n)+", "+uj.transform(r)+", "+sj(rj.transform(i))+")"}};const hj={test:lj("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:dj.transform},fj=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),pj=fj("deg"),mj=fj("%"),gj=fj("px"),yj=fj("vh"),vj=fj("vw"),bj={...mj,parse:e=>mj.parse(e)/100,transform:e=>mj.transform(100*e)},xj={test:lj("hsl","hue"),parse:cj("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+mj.transform(sj(n))+", "+mj.transform(sj(r))+", "+sj(rj.transform(i))+")"}},wj={test:e=>dj.test(e)||hj.test(e)||xj.test(e),parse:e=>dj.test(e)?dj.parse(e):xj.test(e)?xj.parse(e):hj.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?dj.transform(e):xj.transform(e)},_j=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Sj="number",Ej="color",jj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kj(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(jj,(e=>(wj.test(e)?(r.color.push(s),i.push(Ej),n.push(wj.parse(e))):e.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(e)):(r.number.push(s),i.push(Sj),n.push(parseFloat(e))),++s,"${}"))).split("${}");return{values:n,split:o,indexes:r,types:i}}function Cj(e){return kj(e).values}function Tj(e){const{split:t,types:n}=kj(e),r=t.length;return e=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],void 0!==e[s]){const t=n[s];i+=t===Sj?sj(e[s]):t===Ej?wj.transform(e[s]):e[s]}return i}}const Nj=e=>"number"===typeof e?0:e;const Ij={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(oj))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(_j))||void 0===n?void 0:n.length)||0)>0},parse:Cj,createTransformer:Tj,getAnimatableNone:function(e){const t=Cj(e);return Tj(e)(t.map(Nj))}},Aj=new Set(["brightness","contrast","saturate","opacity"]);function Oj(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(oj)||[];if(!r)return e;const i=n.replace(r,"");let s=Aj.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Pj=/\b([a-z-]*)\(.*?\)/gu,Mj={...Ij,getAnimatableNone:e=>{const t=e.match(Pj);return t?t.map(Oj).join(" "):e}},Dj={borderWidth:gj,borderTopWidth:gj,borderRightWidth:gj,borderBottomWidth:gj,borderLeftWidth:gj,borderRadius:gj,radius:gj,borderTopLeftRadius:gj,borderTopRightRadius:gj,borderBottomRightRadius:gj,borderBottomLeftRadius:gj,width:gj,maxWidth:gj,height:gj,maxHeight:gj,top:gj,right:gj,bottom:gj,left:gj,padding:gj,paddingTop:gj,paddingRight:gj,paddingBottom:gj,paddingLeft:gj,margin:gj,marginTop:gj,marginRight:gj,marginBottom:gj,marginLeft:gj,backgroundPositionX:gj,backgroundPositionY:gj},Rj={rotate:pj,rotateX:pj,rotateY:pj,rotateZ:pj,scale:ij,scaleX:ij,scaleY:ij,scaleZ:ij,skew:pj,skewX:pj,skewY:pj,distance:gj,translateX:gj,translateY:gj,translateZ:gj,x:gj,y:gj,z:gj,perspective:gj,transformPerspective:gj,opacity:rj,originX:bj,originY:bj,originZ:gj},Lj={...nj,transform:Math.round},Fj={...Dj,...Rj,zIndex:Lj,size:gj,fillOpacity:rj,strokeOpacity:rj,numOctaves:Lj},Bj={...Fj,color:wj,backgroundColor:wj,outlineColor:wj,fill:wj,stroke:wj,borderColor:wj,borderTopColor:wj,borderRightColor:wj,borderBottomColor:wj,borderLeftColor:wj,filter:Mj,WebkitFilter:Mj},Uj=e=>Bj[e];function Vj(e,t){let n=Uj(e);return n!==Mj&&(n=Ij),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const zj=new Set(["auto","none","0"]);const $j=e=>e===nj||e===gj,Hj=(e,t)=>parseFloat(e.split(", ")[t]),Wj=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/u);if(s)return Hj(s[1],t);{const t=i.match(/^matrix\((.+)\)$/u);return t?Hj(t[1],e):0}},qj=new Set(["x","y","z"]),Kj=dE.filter((e=>!qj.has(e)));const Yj={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:Wj(4,13),y:Wj(5,14)};Yj.translateX=Yj.x,Yj.translateY=Yj.y;const Gj=new Set;let Xj=!1,Qj=!1;function Zj(){if(Qj){const e=Array.from(Gj).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return Kj.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{let[n,r]=t;var i;null===(i=e.getValue(n))||void 0===i||i.set(r)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}Qj=!1,Xj=!1,Gj.forEach((e=>e.complete())),Gj.clear()}function Jj(){Gj.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(Qj=!0)}))}class ek{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Gj.add(this),Xj||(Xj=!0,wE.read(Jj),wE.resolveKeyframes(Zj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let i=0;i<e.length;i++)if(null===e[i])if(0===i){const i=null===r||void 0===r?void 0:r.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,s);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===i&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Gj.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Gj.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let tk=uE,nk=uE;const rk=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),ik=e=>t=>"string"===typeof t&&t.startsWith(e),sk=ik("--"),ok=ik("var(--"),ak=e=>!!ok(e)&&lk.test(e.split("/*")[0].trim()),lk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ck=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function uk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;nk(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,i]=function(e){const t=ck.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${null!==n&&void 0!==n?n:r}`,i]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return rk(e)?parseFloat(e):e}return ak(i)?uk(i,t,n+1):i}const dk=e=>t=>t.test(e),hk=[nj,gj,mj,pj,vj,yj,{test:e=>"auto"===e,parse:e=>e}],fk=e=>hk.find(dk(e));class pk extends ek{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),ak(n))){const r=uk(n,t.current);void 0!==r&&(e[a]=r),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!fE.has(n)||2!==e.length)return;const[r,i]=e,s=fk(r),o=fk(i);if(s!==o)if($j(s)&&$j(o))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)ej(e[r])&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"===typeof t&&!zj.has(t)&&kj(t).values.length&&(r=e[i]),i++}if(r&&n)for(const s of t)e[s]=Vj(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yj[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Yj[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),this.resolveNoneKeyframes()}}const mk=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Ij.test(e)&&"0"!==e||e.startsWith("url(")));function gk(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],o=mk(i,t),a=mk(s,t);return tk(o===a,`You are trying to animate ${t} from "${i}" to "${s}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${s} via the \`style\` property.`),!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||LS(n))&&r)}const yk=e=>null!==e;function vk(e,t,n){let{repeat:r,repeatType:i="loop"}=t;const s=e.filter(yk),o=r&&"loop"!==i&&r%2===1?0:s.length-1;return o&&void 0!==n?n:s[o]}class bk{constructor(e){let{autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}=e;this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=CE.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(Jj(),Zj()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=CE.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:i,delay:s,onComplete:o,onUpdate:a,isGenerator:l}=this.options;if(!l&&!gk(e,n,r,i)){if(VE||!s)return a&&a(vk(e,this.options,t)),o&&o(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const xk={layout:0,mainThread:0,waapi:0},wk=(e,t,n)=>e+(t-e)*n;function _k(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Sk(e,t){return n=>n>0?t:e}const Ek=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},jk=[hj,dj,xj];function kk(e){const t=(e=>jk.find((t=>t.test(e))))(e);if(tk(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(t))return!1;let n=t.parse(e);return t===xj&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,o=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=_k(i,e,t+1/3),o=_k(i,e,t),a=_k(i,e,t-1/3)}else s=o=a=r;return{red:Math.round(255*s),green:Math.round(255*o),blue:Math.round(255*a),alpha:i}}(n)),n}const Ck=(e,t)=>{const n=kk(e),r=kk(t);if(!n||!r)return Sk(e,t);const i={...n};return e=>(i.red=Ek(n.red,r.red,e),i.green=Ek(n.green,r.green,e),i.blue=Ek(n.blue,r.blue,e),i.alpha=wk(n.alpha,r.alpha,e),dj.transform(i))},Tk=(e,t)=>n=>t(e(n)),Nk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Tk)},Ik=new Set(["none","hidden"]);function Ak(e,t){return n=>wk(e,t,n)}function Ok(e){return"number"===typeof e?Ak:"string"===typeof e?ak(e)?Sk:wj.test(e)?Ck:Dk:Array.isArray(e)?Pk:"object"===typeof e?wj.test(e)?Ck:Mk:Sk}function Pk(e,t){const n=[...e],r=n.length,i=e.map(((e,n)=>Ok(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Mk(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Ok(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const Dk=(e,t)=>{const n=Ij.createTransformer(t),r=kj(e),i=kj(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ik.has(e)&&!i.values.length||Ik.has(t)&&!r.values.length?function(e,t){return Ik.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Nk(Pk(function(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=e.indexes[o][i[o]],l=null!==(n=e.values[a])&&void 0!==n?n:0;r[s]=l,i[o]++}return r}(r,i),i.values),n):(tk(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),Sk(e,t))};function Rk(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return wk(e,t,n);return Ok(e)(e,t)}function Lk(e,t,n){const r=Math.max(t-5,0);return AE(n-e(r),t-r)}const Fk={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bk=.001;function Uk(e){let t,n,{duration:r=Fk.duration,bounce:i=Fk.bounce,velocity:s=Fk.velocity,mass:o=Fk.mass}=e;tk(r<=lE(Fk.maxDuration),"Spring duration must be 10 seconds or less");let a=1-i;a=tj(Fk.minDamping,Fk.maxDamping,a),r=tj(Fk.minDuration,Fk.maxDuration,cE(r)),a<1?(t=e=>{const t=e*a,n=t*r,i=t-s,o=zk(e,a),l=Math.exp(-n);return Bk-i/o*l},n=e=>{const n=e*a*r,i=n*s+s,o=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=zk(Math.pow(e,2),a);return(-t(e)+Bk>0?-1:1)*((i-o)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let i=1;i<Vk;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=lE(r),isNaN(l))return{stiffness:Fk.stiffness,damping:Fk.damping,duration:r};{const e=Math.pow(l,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:r}}}const Vk=12;function zk(e,t){return e*Math.sqrt(1-t*t)}const $k=["duration","bounce"],Hk=["stiffness","damping","mass"];function Wk(e,t){return t.some((t=>void 0!==e[t]))}function qk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fk.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fk.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:Fk.velocity,stiffness:Fk.stiffness,damping:Fk.damping,mass:Fk.mass,isResolvedFromDuration:!1,...e};if(!Wk(e,Hk)&&Wk(e,$k))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*tj(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Fk.mass,stiffness:i,damping:s}}else{const n=Uk(e);t={...t,...n,mass:Fk.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-cE(n.velocity||0)}),p=h||0,m=c/(2*Math.sqrt(l*u)),g=o-s,y=cE(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?Fk.restSpeed.granular:Fk.restSpeed.default),i||(i=v?Fk.restDelta.granular:Fk.restDelta.default),m<1){const e=zk(y,m);b=t=>{const n=Math.exp(-m*y*t);return o-n*((p+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>o-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return o-n*((p+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const x={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)a.done=e>=d;else{let n=0;m<1&&(n=0===e?lE(p):Lk(b,e,t));const s=Math.abs(n)<=r,l=Math.abs(o-t)<=i;a.done=s&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min(RS(x),DS),t=HS((t=>x.next(e*t).value),e,30);return e+"ms "+t}};return x}function Kk(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,y=void 0===a?g:a(g);y!==g&&(m=y-h);const v=e=>-m*Math.exp(-e/i),b=e=>y+v(e),x=e=>{const t=v(e),n=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let w,_;const S=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(w=e,_=qk({keyframes:[f.value,p(f.value)],velocity:Lk(b,e,f.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return _||void 0!==w||(t=!0,x(e),S(e)),void 0!==w&&e>=w?_.next(e-w):(!t&&x(e),f)}}}const Yk=$E(.42,0,1,1),Gk=$E(0,0,.58,1),Xk=$E(.42,0,.58,1),Qk={linear:uE,easeIn:Yk,easeInOut:Xk,easeOut:Gk,circIn:XE,circInOut:ZE,circOut:QE,backIn:KE,backInOut:YE,backOut:qE,anticipate:GE},Zk=e=>{if(BS(e)){nk(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return $E(t,n,r,i)}return"string"===typeof e?(nk(void 0!==Qk[e],`Invalid easing type '${e}'`),Qk[e]):e};function Jk(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(nk(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const r=[],i=n||Rk,s=e.length-1;for(let o=0;o<s;o++){let n=i(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||uE:t;n=Nk(e,n)}r.push(n)}return r}(t,r,i),l=a.length,c=n=>{if(o&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=$S(e[r],e[r+1],n);return a[r](i)};return n?t=>c(tj(e[0],e[s-1],t)):c}function eC(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=$S(0,t,r);e.push(wk(n,1,i))}}(t,e.length-1),t}function tC(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(Zk):Zk(i),o={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:eC(n),t),l=Jk(a,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map((()=>u||Xk)).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(o.value=l(e),o.done=e>=t,o)}}const nC=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>wE.update(t,!0),stop:()=>_E(t),now:()=>SE.isProcessing?SE.timestamp:CE.now()}},rC={decay:Kk,inertia:Kk,tween:tC,keyframes:tC,spring:qk},iC=e=>e/100;class sC extends bk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:r,keyframes:i}=this.options,s=(null===r||void 0===r?void 0:r.KeyframeResolver)||ek;this.resolver=new s(i,((e,t)=>this.onKeyframesResolved(e,t)),t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=this.options,o=LS(t)?t:rC[t]||tC;let a,l;o!==tC&&"number"!==typeof e[0]&&(a=Nk(iC,Rk(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});"mirror"===i&&(l=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===c.calculatedDuration&&(c.calculatedDuration=RS(c));const{calculatedDuration:u}=c,d=u+r;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(n+1)-r}}onPostResolved(){const{autoplay:e=!0}=this.options;xk.mainThread++,this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return i.next(0);const{delay:d,repeat:h,repeatType:f,repeatDelay:p,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let v=this.currentTime,b=i;if(h){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===f?(n=1-n,p&&(n-=p/u)):"mirror"===f&&(b=s)),v=tj(0,1,n)*u}const x=y?{done:!1,value:a[0]}:b.next(v);o&&(x.value=o(x.value));let{done:w}=x;y||null===l||(w=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const _=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return _&&void 0!==r&&(x.value=vk(a,this.options,r)),m&&m(x.value),_&&this.finish(),x}get duration(){const{resolved:e}=this;return e?cE(e.calculatedDuration):0}get time(){return cE(this.currentTime)}set time(e){e=lE(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=cE(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=nC,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!==n&&void 0!==n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel(),xk.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const oC=new Set(["opacity","clipPath","filter","transform"]);const aC=IS((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const lC={anticipate:GE,backInOut:YE,circInOut:ZE};class cC extends bk{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new pk(i,((e,t)=>this.onKeyframesResolved(e,t)),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:i,type:s,motionValue:o,name:a,startTime:l}=this.options;if(!o.owner||!o.owner.current)return!1;var c;if("string"===typeof i&&zS()&&i in lC&&(i=lC[i]),LS((c=this.options).type)||"spring"===c.type||!WS(c.ease)){const{onComplete:t,onUpdate:o,motionValue:a,element:l,...c}=this.options,u=function(e,t){const n=new sC({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<2e4;)r=n.sample(s),i.push(r.value),s+=10;return{times:void 0,keyframes:i,duration:s-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),n=u.duration,r=u.times,i=u.ease,s="keyframes"}const u=function(e,t,n){let{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=YS(a,i);Array.isArray(u)&&(c.easing=u),bE.value&&xk.waapi++;const d=e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"});return bE.value&&d.finished.finally((()=>{xk.waapi--})),d}(o.owner.current,a,e,{...this.options,duration:n,times:r,ease:i});return u.startTime=null!==l&&void 0!==l?l:this.calcStartTime(),this.pendingTimeline?(FS(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;o.set(vk(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:r,type:s,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return cE(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return cE(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=lE(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return uE;const{animation:n}=t;FS(n,e)}else this.pendingTimeline=e;return uE}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:i,ease:s,times:o}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:a,element:l,...c}=this.options,u=new sC({...c,keyframes:n,duration:r,type:i,ease:s,times:o,isGenerator:!0}),d=lE(this.time);e.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=t.owner.getProps();return aC()&&n&&oC.has(n)&&!a&&!l&&!r&&"mirror"!==i&&0!==s&&"inertia"!==o}}const uC={type:"spring",stiffness:500,damping:25,restSpeed:10},dC={type:"keyframes",duration:.8},hC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fC=(e,t)=>{let{keyframes:n}=t;return n.length>2?dC:hE.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:uC:hC};const pC=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return o=>{const a=MS(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c-=lE(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length})(a)||(u={...u,...fC(e,u)}),u.duration&&(u.duration=lE(u.duration)),u.repeatDelay&&(u.repeatDelay=lE(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),(VE||gE)&&(d=!0,u.duration=0,u.delay=0),d&&!s&&void 0!==t.get()){const e=vk(u.keyframes,a);if(void 0!==e)return wE.update((()=>{u.onUpdate(e),u.onComplete()})),new PS([])}return!s&&cC.supports(u)?new cC(u):new sC(u)}};function mC(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function gC(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(o=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const t=e.getValue(d,null!==(s=e.latestValues[d])&&void 0!==s?s:null),r=l[d];if(void 0===r||u&&mC(u,d))continue;const i={delay:n,...MS(o||{},d)};let a=!1;if(window.MotionHandoffAnimation){const t=UE(e);if(t){const e=window.MotionHandoffAnimation(t,d,wE);null!==e&&(i.startTime=e,a=!0)}}LE(e,d),t.start(pC(d,t,r,e.shouldReduceMotion&&fE.has(d)?{type:!1}:i,e,a));const h=t.animation;h&&c.push(h)}return a&&Promise.all(c).then((()=>{wE.update((()=>{a&&function(e,t){const n=NS(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s)DE(e,o,mE(s[o]))}(e,a)}))})),c}function yC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const i=NS(e,t,"exit"===n.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(gC(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const o=[],a=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(vC).forEach(((e,r)=>{e.notify("AnimationStart",t),o.push(yC(e,t,{...s,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(o)}(e,t,i+r,o,a,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then((()=>t()))}return Promise.all([o(),a(n.delay)])}function vC(e,t){return e.sortNodePosition(t)}function bC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function xC(e){return"string"===typeof e||Array.isArray(e)}const wC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_C=["initial",...wC],SC=_C.length;function EC(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&EC(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<SC;n++){const r=_C[n],i=e.props[r];(xC(i)||!1===i)&&(t[r]=i)}return t}const jC=[...wC].reverse(),kC=wC.length;function CC(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>yC(e,t,r)));n=Promise.all(i)}else if("string"===typeof t)n=yC(e,t,r);else{const i="function"===typeof t?NS(e,t,r.custom):t;n=Promise.all(gC(e,i,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,r)})))}function TC(e){let t=CC(e),n=AC(),r=!0;const i=t=>(n,r)=>{var i;const s=NS(e,r,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(s){const{transition:e,transitionEnd:t,...r}=s;n={...n,...r,...t}}return n};function s(s){const{props:o}=e,a=EC(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<kC;t++){const h=jC[t],f=n[h],p=void 0!==o[h]?o[h]:a[h],m=xC(p),g=h===s?f.isActive:null;!1===g&&(d=t);let y=p===a[h]&&p!==o[h]&&m;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!p&&!f.prevProp||kS(p)||"boolean"===typeof p)continue;const v=NC(f.prevProp,p);let b=v||h===s&&f.isActive&&!y&&m||t>d&&m,x=!1;const w=Array.isArray(p)?p:[p];let _=w.reduce(i(h),{});!1===g&&(_={});const{prevResolvedValues:S={}}=f,E={...S,..._},j=t=>{b=!0,c.has(t)&&(x=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in E){const t=_[e],n=S[e];if(u.hasOwnProperty(e))continue;let r=!1;r=pE(t)&&pE(n)?!bC(t,n):t!==n,r?void 0!==t&&null!==t?j(e):c.add(e):void 0!==t&&c.has(e)?j(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=_,f.isActive&&(u={...u,..._}),r&&e.blockInitialAnimation&&(b=!1);b&&(!(y&&v)||x)&&l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};if("boolean"!==typeof o.initial){const n=NS(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach((n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null})),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const o=s(t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=AC(),r=!0}}}function NC(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!bC(t,e)}function IC(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function AC(){return{animate:IC(!0),whileInView:IC(),whileHover:IC(),whileTap:IC(),whileDrag:IC(),whileFocus:IC(),exit:IC()}}class OC{constructor(e){this.isMounted=!1,this.node=e}update(){}}let PC=0;const MC={animation:{Feature:class extends OC{constructor(e){super(e),e.animationState||(e.animationState=TC(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();kS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends OC{constructor(){super(...arguments),this.id=PC++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function DC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function RC(e){return{point:{x:e.pageX,y:e.pageY}}}function LC(e,t,n,r){return DC(e,t,(e=>t=>tE(t)&&e(t,RC(t)))(n),r)}function FC(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function BC(e){return e.max-e.min}function UC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=wk(t.min,t.max,e.origin),e.scale=BC(n)/BC(t),e.translate=wk(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function VC(e,t,n,r){UC(e.x,t.x,n.x,r?r.originX:void 0),UC(e.y,t.y,n.y,r?r.originY:void 0)}function zC(e,t,n){e.min=n.min+t.min,e.max=e.min+BC(t)}function $C(e,t,n){e.min=t.min-n.min,e.max=e.min+BC(t)}function HC(e,t,n){$C(e.x,t.x,n.x),$C(e.y,t.y,n.y)}const WC=()=>({x:{min:0,max:0},y:{min:0,max:0}});function qC(e){return[e("x"),e("y")]}function KC(e){return void 0===e||1===e}function YC(e){let{scale:t,scaleX:n,scaleY:r}=e;return!KC(t)||!KC(n)||!KC(r)}function GC(e){return YC(e)||XC(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function XC(e){return QC(e.x)||QC(e.y)}function QC(e){return e&&"0%"!==e}function ZC(e,t,n){return n+t*(e-n)}function JC(e,t,n,r,i){return void 0!==i&&(e=ZC(e,i,r)),ZC(e,n,r)+t}function eT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=JC(e.min,t,n,r,i),e.max=JC(e.max,t,n,r,i)}function tT(e,t){let{x:n,y:r}=t;eT(e.x,n.translate,n.scale,n.originPoint),eT(e.y,r.translate,r.scale,r.originPoint)}const nT=.999999999999,rT=1.0000000000001;function iT(e,t){e.min=e.min+t,e.max=e.max+t}function sT(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;eT(e,t,n,wk(e.min,e.max,i),r)}function oT(e,t){sT(e.x,t.x,t.scaleX,t.scale,t.originX),sT(e.y,t.y,t.scaleY,t.scale,t.originY)}function aT(e,t){return FC(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}function lT(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const cT=(e,t)=>Math.abs(e-t);class uT{constructor(e,t){let{transformPagePoint:n,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=fT(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=cT(e.x,t.x),r=cT(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=SE;this.history.push({...r,timestamp:i});const{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{if(e.target instanceof Element&&e.target.hasPointerCapture&&void 0!==e.pointerId)try{if(!e.target.hasPointerCapture(e.pointerId))return}catch(zW){}this.lastMoveEvent=e,this.lastMoveEventInfo=dT(t,this.transformPagePoint),wE.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{JS(e,"release"),this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=fT("pointercancel"===e.type||"lostpointercapture"===e.type?this.lastMoveEventInfo:dT(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!tE(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n;const i=dT(RC(e),this.transformPagePoint),{point:s}=i,{timestamp:o}=SE;this.history=[{...s,timestamp:o}];const{onSessionStart:a}=t;a&&a(e,fT(i,this.history)),JS(e,"set"),this.removeListeners=Nk(LC(e.currentTarget,"pointermove",this.handlePointerMove),LC(e.currentTarget,"pointerup",this.handlePointerUp),LC(e.currentTarget,"pointercancel",this.handlePointerUp),LC(e.currentTarget,"lostpointercapture",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_E(this.updatePoint)}}function dT(e,t){return t?{point:t(e.point)}:e}function hT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function fT(e,t){let{point:n}=e;return{point:n,delta:hT(n,mT(t)),offset:hT(n,pT(t)),velocity:gT(t,.1)}}function pT(e){return e[0]}function mT(e){return e[e.length-1]}function gT(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=mT(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>lE(t)));)n--;if(!r)return{x:0,y:0};const s=cE(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function yT(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function vT(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const bT=.35;function xT(e,t,n){return{min:wT(e,t),max:wT(e,n)}}function wT(e,t){return"number"===typeof e?e:e[t]||0}const _T=new WeakMap;class ST{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new uT(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(RC(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?GS[s]?null:(GS[s]=!0,()=>{GS[s]=!1}):GS.x||GS.y?null:(GS.x=GS.y=!0,()=>{GS.x=GS.y=!1}),!this.openDragLock))return;var s;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qC((e=>{let t=this.getAxisMotionValue(e).get()||0;if(mj.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=BC(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&wE.postRender((()=>i(e,t))),LE(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>qC((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&wE.postRender((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!ET(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?wk(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?wk(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&lT(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:s}=t;return{x:yT(e.x,r,s),y:yT(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bT;return!1===e?e=0:!0===e&&(e=bT),{x:xT(e,"left","right"),y:xT(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qC((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!lT(e))return!1;const n=e.current;nk(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=aT(e,n),{scroll:i}=t;return i&&(iT(r.x,i.offset.x),iT(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:vT(e.x,t.x),y:vT(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=FC(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=qC((o=>{if(!ET(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(o,d)}));return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return LE(this.visualElement,e),n.start(pC(e,n,0,t,this.visualElement,!1))}stopAnimation(){qC((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){qC((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){qC((t=>{const{drag:n}=this.getProps();if(!ET(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-wk(n,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!lT(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};qC((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=BC(e),i=BC(t);return i>r?n=$S(t.min,t.max-r,e.min):r>i&&(n=$S(e.min,e.max-i,t.min)),tj(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),qC((t=>{if(!ET(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(wk(i,s,r[t]))}))}addListeners(){if(!this.visualElement.current)return;_T.set(this.visualElement,this);const e=LC(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();lT(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),wE.read(t);const i=DC(window,"resize",(()=>this.scalePositionWithinConstraints())),s=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(qC((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=bT,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function ET(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const jT=e=>(t,n)=>{e&&wE.postRender((()=>e(t,n)))};const kT=(0,r.createContext)(null);function CT(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,r.useContext)(kT);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,o=(0,r.useId)();(0,r.useEffect)((()=>{if(e)return s(o)}),[e]);const a=(0,r.useCallback)((()=>e&&i&&i(o)),[o,i,e]);return!n&&i?[!1,a]:[!0]}const TT=(0,r.createContext)({}),NT=(0,r.createContext)({}),IT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function AT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const OT={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!gj.test(e))return e;e=parseFloat(e)}return`${AT(e,t.target.x)}% ${AT(e,t.target.y)}%`}},PT={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,s=Ij.parse(e);if(s.length>5)return i;const o=Ij.createTransformer(e),a="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+a]/=l,s[1+a]/=c;const u=wk(l,c,.5);return"number"===typeof s[2+a]&&(s[2+a]/=u),"number"===typeof s[3+a]&&(s[3+a]/=u),o(s)}},MT={};const{schedule:DT,cancel:RT}=xE(queueMicrotask,!1);class LT extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)MT[t]=e[t],sk(t)&&(MT[t].isCSSVariable=!0)}(BT),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),IT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,s=n.projection;return s?(s.isPresent=i,r||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||wE.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),DT.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FT(e){const[t,n]=CT(),i=(0,r.useContext)(TT);return(0,wS.jsx)(LT,{...e,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(NT),isPresent:t,safeToRemove:n})}const BT={borderRadius:{...OT,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:OT,borderTopRightRadius:OT,borderBottomLeftRadius:OT,borderBottomRightRadius:OT,boxShadow:PT};const UT=(e,t)=>e.depth-t.depth;class VT{constructor(){this.children=[],this.isDirty=!1}add(e){TE(this.children,e),this.isDirty=!0}remove(e){NE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(UT),this.isDirty=!1,this.children.forEach(e)}}function zT(e,t){const n=CE.now(),r=i=>{let{timestamp:s}=i;const o=s-n;o>=t&&(_E(r),e(o-t))};return wE.read(r,!0),()=>_E(r)}function $T(e){const t=RE(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const HT=["TopLeft","TopRight","BottomLeft","BottomRight"],WT=HT.length,qT=e=>"string"===typeof e?parseFloat(e):e,KT=e=>"number"===typeof e||gj.test(e);function YT(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const GT=QT(0,.5,QE),XT=QT(.5,.95,uE);function QT(e,t,n){return r=>r<e?0:r>t?1:n($S(e,t,r))}function ZT(e,t){e.min=t.min,e.max=t.max}function JT(e,t){ZT(e.x,t.x),ZT(e.y,t.y)}function eN(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function tN(e,t,n,r,i){return e=ZC(e-=t,1/n,r),void 0!==i&&(e=ZC(e,1/i,r)),e}function nN(e,t,n,r,i){let[s,o,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;mj.test(t)&&(t=parseFloat(t),t=wk(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=wk(s.min,s.max,r);e===s&&(a-=t),e.min=tN(e.min,t,n,a,i),e.max=tN(e.max,t,n,a,i)}(e,t[s],t[o],t[a],t.scale,r,i)}const rN=["x","scaleX","originX"],iN=["y","scaleY","originY"];function sN(e,t,n,r){nN(e.x,t,rN,n?n.x:void 0,r?r.x:void 0),nN(e.y,t,iN,n?n.y:void 0,r?r.y:void 0)}function oN(e){return 0===e.translate&&1===e.scale}function aN(e){return oN(e.x)&&oN(e.y)}function lN(e,t){return e.min===t.min&&e.max===t.max}function cN(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function uN(e,t){return cN(e.x,t.x)&&cN(e.y,t.y)}function dN(e){return BC(e.x)/BC(e.y)}function hN(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fN{constructor(){this.members=[]}add(e){TE(this.members,e),e.scheduleRender()}remove(e){if(NE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const pN={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},mN=["","X","Y","Z"],gN={visibility:"hidden"};let yN=0;function vN(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function bN(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=UE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",wE,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&bN(r)}function xN(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=yN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,bE.value&&(pN.nodes=pN.calculatedTargetDeltas=pN.calculatedProjections=0),this.nodes.forEach(SN),this.nodes.forEach(IN),this.nodes.forEach(AN),this.nodes.forEach(EN),bE.addProjectionMetrics&&bE.addProjectionMetrics(pN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new VT)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new IE),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:s,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=zT(r,250),IT.hasAnimatedSinceResize&&(IT.hasAnimatedSinceResize=!1,this.nodes.forEach(NN))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||s)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||o.getDefaultTransition()||LN,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=o.getProps(),c=!this.targetLayout||!uN(this.targetLayout,i),u=!n&&r;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...MS(s,"layout"),onPlay:a,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||NN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_E(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ON),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(kN);this.isUpdating||this.nodes.forEach(CN),this.isUpdating=!1,this.nodes.forEach(TN),this.nodes.forEach(wN),this.nodes.forEach(_N),this.clearAllSnapshots();const e=CE.now();SE.delta=tj(0,1e3/60,e-SE.timestamp),SE.timestamp=e,SE.isProcessing=!0,EE.update.process(SE),EE.preRender.process(SE),EE.render.process(SE),SE.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jN),this.sharedNodes.forEach(PN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wE.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wE.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||BC(this.snapshot.measuredBox.x)||BC(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!aN(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||GC(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),UN((r=n).x),UN(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(zN))){const{scroll:e}=this.root;e&&(iT(n.x,e.offset.x),iT(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(JT(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:s}=t;t!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&JT(n,e),iT(n.x,i.offset.x),iT(n.y,i.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};JT(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&oT(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),GC(e.latestValues)&&oT(n,e.latestValues)}return GC(this.latestValues)&&oT(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};JT(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!GC(e.latestValues))continue;YC(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};JT(r,e.measurePageBox()),sN(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return GC(this.latestValues)&&sN(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==SE.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=SE.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},HC(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),JT(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,zC(o.x,a.x,l.x),zC(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):JT(this.target,this.layout.layoutBox),tT(this.target,this.targetDelta)):JT(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},HC(this.relativeTargetOrigin,this.target,e.target),JT(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}bE.value&&pN.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!YC(this.parent.latestValues)&&!XC(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===SE.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;JT(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let s,o;t.x=t.y=1;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&oT(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,tT(e,o)),r&&GC(s.latestValues)&&oT(e,s.latestValues))}t.x<rT&&t.x>nT&&(t.x=1),t.y<rT&&t.y>nT&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(eN(this.prevProjectionDelta.x,this.projectionDelta.x),eN(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),VC(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&hN(this.projectionDelta.x,this.prevProjectionDelta.x)&&hN(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),bE.value&&pN.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(RN));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;MN(s.x,e.x,n),MN(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(HC(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){DN(e.x,t.x,n.x,r),DN(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,o,n),d&&function(e,t){return lN(e.x,t.x)&&lN(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),JT(d,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=wk(0,void 0!==n.opacity?n.opacity:1,GT(r)),e.opacityExit=wk(void 0!==t.opacity?t.opacity:1,0,XT(r))):s&&(e.opacity=wk(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let o=0;o<WT;o++){const i=`border${HT[o]}Radius`;let s=YT(t,i),a=YT(n,i);void 0===s&&void 0===a||(s||(s=0),a||(a=0),0===s||0===a||KT(s)===KT(a)?(e[i]=Math.max(wk(qT(s),qT(a),r),0),(mj.test(a)||mj.test(s))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=wk(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_E(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wE.update((()=>{IT.hasAnimatedSinceResize=!0,xk.layout++,this.currentAnimation=function(e,t,n){const r=RE(e)?e:ME(e);return r.start(pC("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{xk.layout--},onComplete:()=>{xk.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&VN(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=BC(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=BC(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}JT(t,n),oT(t,i),VC(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new fN);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&vN("z",e,r,this.animationValues);for(let i=0;i<mN.length;i++)vN(`rotate${mN[i]}`,e,r,this.animationValues),vN(`skew${mN[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return gN;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=$T(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=$T(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!GC(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=function(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(null===n||void 0===n?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:o,skewY:a}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),s&&(r+=`rotateY(${s}deg) `),o&&(r+=`skewX(${o}deg) `),a&&(r+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(r+=`scale(${a}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),i&&(r.transform=i(o,r.transform));const{x:a,y:l}=this.projectionDelta;r.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const c in MT){if(void 0===o[c])continue;const{correct:e,applyTo:t,isCSSVariable:n}=MT[c],i="none"===r.transform?o[c]:e(o[c],s);if(t){const e=t.length;for(let n=0;n<e;n++)r[t[n]]=i}else n?this.options.visualElement.renderState.vars[c]=i:r[c]=i}return this.options.layoutId&&(r.pointerEvents=s===this?$T(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(kN),this.root.sharedNodes.clear()}}}function wN(e){e.updateLayout()}function _N(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?qC((e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=BC(r);r.min=t[e].min,r.max=r.min+i})):VN(i,n.layoutBox,t)&&qC((r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],o=BC(t[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)}));const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};VC(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?VC(a,e.applyTransform(r,!0),n.measuredBox):VC(a,t,n.layoutBox);const l=!aN(o);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const o={x:{min:0,max:0},y:{min:0,max:0}};HC(o,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};HC(a,t,s.layoutBox),uN(o,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function SN(e){bE.value&&pN.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function EN(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jN(e){e.clearSnapshot()}function kN(e){e.clearMeasurements()}function CN(e){e.isLayoutDirty=!1}function TN(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function NN(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function IN(e){e.resolveTargetDelta()}function AN(e){e.calcProjection()}function ON(e){e.resetSkewAndRotation()}function PN(e){e.removeLeadSnapshot()}function MN(e,t,n){e.translate=wk(t.translate,0,n),e.scale=wk(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function DN(e,t,n,r){e.min=wk(t.min,n.min,r),e.max=wk(t.max,n.max,r)}function RN(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const LN={duration:.45,ease:[.4,0,.1,1]},FN=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),BN=FN("applewebkit/")&&!FN("chrome/")?Math.round:uE;function UN(e){e.min=BN(e.min),e.max=BN(e.max)}function VN(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}(dN(t),dN(n),.2)}function zN(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const $N=xN({attachResizeListener:(e,t)=>DC(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),HN={current:void 0},WN=xN({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!HN.current){const e=new $N({});e.mount(window),e.setOptions({layoutScroll:!0}),HN.current=e}return HN.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),qN={pan:{Feature:class extends OC{constructor(){super(...arguments),this.removePointerDownListener=uE}onPointerDown(e){this.session=new uT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:jT(e),onStart:jT(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&wE.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=LC(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends OC{constructor(e){super(e),this.removeGroupControls=uE,this.removeListeners=uE,this.controls=new ST(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||uE}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:WN,MeasureLayout:FT}};function KN(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&wE.postRender((()=>i(t,RC(t))))}function YN(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&wE.postRender((()=>i(t,RC(t))))}const GN=new WeakMap,XN=new WeakMap,QN=e=>{const t=GN.get(e.target);t&&t(e)},ZN=e=>{e.forEach(QN)};function JN(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;XN.has(r)||XN.set(r,{});const i=XN.get(r),s=JSON.stringify(n);return i[s]||(i[s]=new IntersectionObserver(ZN,{root:t,...n})),i[s]}(t);return GN.set(e,n),r.observe(e),()=>{GN.delete(e),r.unobserve(e)}}const eI={some:0,all:1};const tI={inView:{Feature:class extends OC{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:eI[r]};return JN(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends OC{mount(){const{current:e}=this.node;e&&(this.unmount=aE(e,((e,t)=>(YN(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return YN(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends OC{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(zW){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nk(DC(this.node.current,"focus",(()=>this.onFocus())),DC(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends OC{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,i,s]=QS(e,n),o=e=>{if(!ZS(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const s=e=>{ZS(e)&&(r(e),n.removeEventListener("pointerleave",s))};n.addEventListener("pointerleave",s,i)};return r.forEach((e=>{e.addEventListener("pointerenter",o,i)})),s}(e,((e,t)=>(KN(this.node,t,"Start"),e=>KN(this.node,e,"End")))))}unmount(){}}}},nI={layout:{ProjectionNode:WN,MeasureLayout:FT}},rI=(0,r.createContext)({strict:!1}),iI=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),sI=(0,r.createContext)({});function oI(e){return kS(e.animate)||_C.some((t=>xC(e[t])))}function aI(e){return Boolean(oI(e)||e.variants)}function lI(e){const{initial:t,animate:n}=function(e,t){if(oI(e)){const{initial:t,animate:n}=e;return{initial:!1===t||xC(t)?t:void 0,animate:xC(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(sI));return(0,r.useMemo)((()=>({initial:t,animate:n})),[cI(t),cI(n)])}function cI(e){return Array.isArray(e)?e.join(" "):e}const uI="undefined"!==typeof window,dI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hI={};for(const n in dI)hI[n]={isEnabled:e=>dI[n].some((t=>!!e[t]))};const fI=Symbol.for("motionComponentSymbol");function pI(e,t,n){return(0,r.useCallback)((r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):lT(n)&&(n.current=r))}),[t])}const mI=uI?r.useLayoutEffect:r.useEffect;function gI(e,t,n,i,s){var o,a;const{visualElement:l}=(0,r.useContext)(sI),c=(0,r.useContext)(rI),u=(0,r.useContext)(kT),d=(0,r.useContext)(iI).reducedMotion,h=(0,r.useRef)(null);i=i||c.renderer,!h.current&&i&&(h.current=i(e,{visualState:t,parent:l,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:d}));const f=h.current,p=(0,r.useContext)(NT);!f||f.projection||!s||"html"!==f.type&&"svg"!==f.type||function(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:yI(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(o)||a&&lT(a),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}(h.current,n,s,p);const m=(0,r.useRef)(!1);(0,r.useInsertionEffect)((()=>{f&&m.current&&f.update(n,u)}));const g=n[BE],y=(0,r.useRef)(Boolean(g)&&!(null===(o=window.MotionHandoffIsComplete)||void 0===o?void 0:o.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return mI((()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),DT.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())})),(0,r.useEffect)((()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)})),y.current=!1))})),f}function yI(e){if(e)return!1!==e.options.allowProjection?e.projection:yI(e.parent)}function vI(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:s,Component:o}=e;var a,l;function c(e,t){let a;const l={...(0,r.useContext)(iI),...e,layoutId:bI(e)},{isStatic:c}=l,u=lI(e),d=s(e,c);if(!c&&uI){!function(){(0,r.useContext)(rI).strict;0}();const e=function(e){const{drag:t,layout:n}=hI;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===n||void 0===n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);a=e.MeasureLayout,u.visualElement=gI(o,d,l,n,e.ProjectionNode)}return(0,wS.jsxs)(sI.Provider,{value:u,children:[a&&u.visualElement?(0,wS.jsx)(a,{visualElement:u.visualElement,...l}):null,i(o,e,pI(d,u.visualElement,t),d,c,u.visualElement)]})}t&&function(e){for(const t in e)hI[t]={...hI[t],...e[t]}}(t),c.displayName=`motion.${"string"===typeof o?o:`create(${null!==(l=null!==(a=o.displayName)&&void 0!==a?a:o.name)&&void 0!==l?l:""})`}`;const u=(0,r.forwardRef)(c);return u[fI]=o,u}function bI(e){let{layoutId:t}=e;const n=(0,r.useContext)(TT).id;return n&&void 0!==t?n+"-"+t:t}function xI(e,t){let{layout:n,layoutId:r}=t;return hE.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!MT[e]||"opacity"===e)}const wI=(e,t)=>t&&"number"===typeof e?t.transform(e):e,_I={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SI=dE.length;function EI(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(hE.has(l))o=!0;else if(sk(l))i[l]=e;else{const t=wI(e,Fj[l]);l.startsWith("origin")?(a=!0,s[l]=t):r[l]=t}}if(t.transform||(o||n?r.transform=function(e,t,n){let r="",i=!0;for(let s=0;s<SI;s++){const o=dE[s],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=wI(a,Fj[o]);l||(i=!1,r+=`${_I[o]||o}(${e}) `),n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin=`${e} ${t} ${n}`}}const jI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kI(e,t,n){for(const r in t)RE(t[r])||xI(r,n)||(e[r]=t[r])}function CI(e,t){const n={};return kI(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,r.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return EI(e,t,n),Object.assign({},e.vars,e.style)}),[t])}(e,t)),n}function TI(e,t){const n={},r=CI(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const NI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function II(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||NI.has(e)}let AI=e=>!II(e);try{(OI=require("@emotion/is-prop-valid").default)&&(AI=e=>e.startsWith("on")?!II(e):OI(e))}catch(cie){}var OI;const PI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function MI(e){return"string"===typeof e&&!e.includes("-")&&!!(PI.indexOf(e)>-1||/[A-Z]/u.test(e))}const DI={offset:"stroke-dashoffset",array:"stroke-dasharray"},RI={offset:"strokeDashoffset",array:"strokeDasharray"};function LI(e,t,n){return"string"===typeof e?e:gj.transform(t+n*e)}function FI(e,t,n,r){let{attrX:i,attrY:s,attrScale:o,originX:a,originY:l,pathLength:c,pathSpacing:u=1,pathOffset:d=0,...h}=t;if(EI(e,h,r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:m}=e;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(void 0!==a||void 0!==l||p.transform)&&(p.transformOrigin=function(e,t,n){return`${LI(t,e.x,e.width)} ${LI(n,e.y,e.height)}`}(m,void 0!==a?a:.5,void 0!==l?l:.5)),void 0!==i&&(f.x=i),void 0!==s&&(f.y=s),void 0!==o&&(f.scale=o),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=i?DI:RI;e[s.offset]=gj.transform(-r);const o=gj.transform(t),a=gj.transform(n);e[s.array]=`${o} ${a}`}(f,c,u,d,!1)}const BI=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),UI=e=>"string"===typeof e&&"svg"===e.toLowerCase();function VI(e,t,n,i){const s=(0,r.useMemo)((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return FI(n,t,UI(i),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};kI(t,e.style,e),s.style={...t,...s.style}}return s}function zI(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,s,o)=>{let{latestValues:a}=s;const l=(MI(t)?VI:TI)(n,a,o,t),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(AI(i)||!0===n&&II(i)||!t&&!II(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),u=t!==r.Fragment?{...c,...l,ref:i}:{},{children:d}=n,h=(0,r.useMemo)((()=>RE(d)?d.get():d),[d]);return(0,r.createElement)(t,{...u,children:h})}}function $I(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const HI=e=>(t,n)=>{const i=(0,r.useContext)(sI),s=(0,r.useContext)(kT),o=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:s,onUpdate:o}=e;const a={latestValues:WI(t,n,r,i),renderState:s()};return o&&(a.onMount=e=>o({props:t,current:e,...a}),a.onUpdate=e=>o(e)),a}(e,t,i,s);return n?o():$I(o)};function WI(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=$T(s[h]);let{initial:o,animate:a}=e;const l=oI(e),c=aI(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const d=u?a:o;if(d&&"boolean"!==typeof d&&!kS(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=TS(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}function qI(e,t,n){var r;const{style:i}=e,s={};for(const o in i)(RE(i[o])||t.style&&RE(t.style[o])||xI(o,e)||void 0!==(null===(r=null===n||void 0===n?void 0:n.getValue(o))||void 0===r?void 0:r.liveStyle))&&(s[o]=i[o]);return s}const KI={useVisualState:HI({scrapeMotionValuesFromProps:qI,createRenderState:jI})};function YI(e,t){try{t.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(zW){t.dimensions={x:0,y:0,width:0,height:0}}}function GI(e,t,n,r){let{style:i,vars:s}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const o in s)e.style.setProperty(o,s[o])}const XI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QI(e,t,n,r){GI(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(XI.has(i)?i:FE(i),t.attrs[i])}function ZI(e,t,n){const r=qI(e,t,n);for(const i in e)if(RE(e[i])||RE(t[i])){r[-1!==dE.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}const JI=["x","y","width","height","cx","cy","r"],eA={useVisualState:HI({scrapeMotionValuesFromProps:ZI,createRenderState:BI,onUpdate:e=>{let{props:t,prevProps:n,current:r,renderState:i,latestValues:s}=e;if(!r)return;let o=!!t.drag;if(!o)for(const l in s)if(hE.has(l)){o=!0;break}if(!o)return;let a=!n;if(n)for(let l=0;l<JI.length;l++){const e=JI[l];t[e]!==n[e]&&(a=!0)}a&&wE.read((()=>{YI(r,i),wE.render((()=>{FI(i,s,UI(r.tagName),t.transformTemplate),QI(r,i)}))}))}})};function tA(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return vI({...MI(n)?eA:KI,preloadedFeatures:e,useRender:zI(r),createVisualElement:t,Component:n})}}const nA={current:null},rA={current:!1};const iA=[...hk,wj,Ij],sA=new WeakMap;const oA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aA{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ek,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=CE.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,wE.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=oI(n),this.isVariantNode=aI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const e=h[f];void 0!==l[f]&&RE(e)&&e.set(l[f],!1)}}mount(e){this.current=e,sA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),rA.current||function(){if(rA.current=!0,uI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>nA.current=e.matches;e.addListener(t),t()}else nA.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||nA.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_E(this.notifyUpdate),_E(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=hE.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&wE.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),i(),s&&s(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in hI){const t=hI[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<oA.length;n++){const t=oA[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],s=n[r];if(RE(i))e.addValue(r,i);else if(RE(s))e.addValue(r,ME(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,ME(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=ME(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(rk(r)||JE(r))?r=parseFloat(r):!(e=>iA.find(dk(e)))(r)&&Ij.test(t)&&(r=Vj(e,t)),this.setBaseTarget(e,RE(r)?r.get():r)),RE(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"===typeof n||"object"===typeof n){const i=TS(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);i&&(r=i[e])}if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||RE(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new IE),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class lA extends aA{constructor(){super(...arguments),this.KeyframeResolver=pk}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;RE(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class cA extends lA{constructor(){super(...arguments),this.type="html",this.renderInstance=GI}readValueFromInstance(e,t){if(hE.has(t)){const e=Uj(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(sk(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return aT(e,n)}build(e,t,n){EI(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return qI(e,t,n)}}class uA extends lA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=WC,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&YI(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(hE.has(t)){const e=Uj(t);return e&&e.default||0}return t=XI.has(t)?t:FE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return ZI(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&wE.postRender(this.updateDimensions)}build(e,t,n){FI(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){QI(e,t,0,r)}mount(e){this.isSVGTag=UI(e.tagName),super.mount(e)}}const dA=jS(tA({...MC,...tI,...qN,...nI},((e,t)=>MI(e)?new uA(t):new cA(t,{allowProjection:e!==r.Fragment}))));function hA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const fA=r.forwardRef(hA);function pA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),r.createElement("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),r.createElement("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"}))}const mA=r.forwardRef(pA);function gA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),r.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const yA=r.forwardRef(gA);function vA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"}))}const bA=r.forwardRef(vA);function xA(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const wA=r.forwardRef(xA);var _A=n(64),SA=n.n(_A);const EA=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)({id:!1,password:!1}),{login:d}=SS(),h=te();return(0,wS.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600",children:[(0,wS.jsx)("div",{className:"absolute inset-0 bg-pattern opacity-10"}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md px-8 py-10 bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl relative overflow-hidden",children:[(0,wS.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 pointer-events-none"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsxs)("div",{className:"text-center mb-8",children:[(0,wS.jsx)(dA.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"w-16 h-16 bg-white rounded-2xl shadow-lg mx-auto mb-4 flex items-center justify-center",children:(0,wS.jsx)(fA,{className:"w-8 h-8 text-indigo-600"})}),(0,wS.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),(0,wS.jsx)("p",{className:"text-white/80",children:"Sign in to your account"})]}),(0,wS.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0);try{const t=[{name:"users",role:"admin"},{name:"teachers",role:"instructor"},{name:"students",role:"student"}];let r=null,i="",s="";for(const n of t){const t=Zm(hm(bS,n.name),eg("idNumber","==",e)),o=await vg(t);if(!o.empty){const e=o.docs[0];r={id:e.id,...e.data()},i=r.email,s=n.role;break}}if(!r)throw new Error("No user found with this ID number");await d(i,n),localStorage.setItem("userRole",s),localStorage.setItem("userData",JSON.stringify(r)),SA().fire({icon:"success",title:`Welcome, ${r.fullName}!`,text:`Logged in as ${s}`,showConfirmButton:!1,timer:1500,background:"#f8fafc",iconColor:"#3b82f6"}),h("student"===s?"/students/dashboard":"instructor"===s?"/instructor/dashboard":"/admin/dashboard")}catch(dv){console.error("Login Error:",dv),SA().fire({icon:"error",title:"Login Failed",text:dv instanceof Error?dv.message:"Invalid credentials",background:"#f8fafc",confirmButtonColor:"#3b82f6"})}finally{o(!1)}},className:"space-y-6",children:[(0,wS.jsx)("div",{className:"mb-8",children:(0,wS.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,wS.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-white",children:"Student"}),(0,wS.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-white",children:"Instructor"}),(0,wS.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 text-white",children:"Admin"})]})}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"ID Number"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onFocus:()=>u({...c,id:!0}),onBlur:()=>u({...c,id:!1}),className:"\n                    w-full px-4 py-3 rounded-xl\n                    bg-white/10 border border-white/20\n                    text-white placeholder-white/50\n                    focus:outline-none focus:ring-2 focus:ring-white/30\n                    transition-all duration-200\n                  ",placeholder:"Enter your ID number",required:!0}),(0,wS.jsx)("div",{className:"absolute left-3 top-3"})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Password"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:a?"text":"password",value:n,onChange:e=>i(e.target.value),onFocus:()=>u({...c,password:!0}),onBlur:()=>u({...c,password:!1}),className:"\n                    w-full px-4 py-3 rounded-xl\n                    bg-white/10 border border-white/20\n                    text-white placeholder-white/50\n                    focus:outline-none focus:ring-2 focus:ring-white/30\n                    transition-all duration-200\n                  ",placeholder:"Enter your password",required:!0}),(0,wS.jsx)("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-3 text-white/50 hover:text-white/80 transition-colors",children:a?(0,wS.jsx)(mA,{className:"w-6 h-6"}):(0,wS.jsx)(yA,{className:"w-6 h-6"})})]})]}),(0,wS.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,wS.jsxs)("label",{className:"flex items-center text-white/80",children:[(0,wS.jsx)("input",{type:"checkbox",className:"rounded border-white/20 bg-white/10 text-indigo-600 focus:ring-indigo-500"}),(0,wS.jsx)("span",{className:"ml-2",children:"Remember me"})]}),(0,wS.jsx)(Te,{to:"/reset-password",className:"text-white/80 hover:text-white transition-colors",children:"Forgot password?"})]}),(0,wS.jsx)("button",{type:"submit",disabled:s,className:`\n                w-full py-3 px-4 rounded-xl\n                bg-white text-indigo-600 font-medium\n                hover:bg-indigo-50 \n                focus:outline-none focus:ring-2 focus:ring-white/50\n                transition-all duration-200\n                flex items-center justify-center\n                ${s?"opacity-80 cursor-not-allowed":""}\n              `,children:s?(0,wS.jsx)(bA,{className:"w-5 h-5 animate-spin"}):(0,wS.jsxs)(wS.Fragment,{children:["Sign In",(0,wS.jsx)(wA,{className:"w-5 h-5 ml-2"})]})}),(0,wS.jsxs)("p",{className:"text-center text-white/80",children:["Don't have an account?"," ",(0,wS.jsx)(Te,{to:"/rfid-registration",className:"text-white font-medium hover:underline",children:"Sign up"})]})]})]})]})]})};var jA,kA,CA;!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(jA||(jA={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(kA||(kA={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(CA||(CA={}));const TA=["user","model","function","system"];var NA,IA,AA,OA,PA,MA,DA,RA;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(NA||(NA={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(IA||(IA={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(AA||(AA={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(OA||(OA={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"}(PA||(PA={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(MA||(MA={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(DA||(DA={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(RA||(RA={}));class LA extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class FA extends LA{constructor(e,t){super(e),this.response=t}}class BA extends LA{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class UA extends LA{}var VA;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(VA||(VA={}));class zA{constructor(e,t,n,r,i){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=i}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let r=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function $A(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null===e||void 0===e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.21.0"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(zW){throw new UA(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${zW.message}`)}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new UA(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new UA(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function HA(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const{url:a,fetchOptions:l}=await async function(e,t,n,r,i,s){const o=new zA(e,t,n,r,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},WA(s)),{method:"POST",headers:await $A(o),body:i})}}(e,t,n,r,i,s);return async function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await r(e,t)}catch(zW){!function(e,t){let n=e;e instanceof BA||e instanceof UA||(n=new LA(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack);throw n}(zW,e)}n.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(zW){}throw new BA(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}(n,e);return n}(a,l,o)}function WA(e){const t={};if(void 0!==(null===e||void 0===e?void 0:e.signal)||(null===e||void 0===e?void 0:e.timeout)>=0){const n=new AbortController;(null===e||void 0===e?void 0:e.timeout)>=0&&setTimeout((()=>n.abort()),e.timeout),(null===e||void 0===e?void 0:e.signal)&&e.signal.addEventListener("abort",(()=>{n.abort()})),t.signal=n.signal}return t}function qA(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),GA(e.candidates[0]))throw new FA(`${XA(e)}`,e);return function(e){var t,n,r,i;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+"\n"+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}(e)}if(e.promptFeedback)throw new FA(`Text not available. ${XA(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),GA(e.candidates[0]))throw new FA(`${XA(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),KA(e)[0]}if(e.promptFeedback)throw new FA(`Function call not available. ${XA(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),GA(e.candidates[0]))throw new FA(`${XA(e)}`,e);return KA(e)}if(e.promptFeedback)throw new FA(`Function call not available. ${XA(e)}`,e)},e}function KA(e){var t,n,r,i;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)o.functionCall&&s.push(o.functionCall);return s.length>0?s:void 0}const YA=[PA.RECITATION,PA.SAFETY,PA.LANGUAGE];function GA(e){return!!e.finishReason&&YA.includes(e.finishReason)}function XA(e){var t,n,r;let i="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];GA(t)&&(i+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(i+=`: ${t.finishMessage}`))}}else i+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(i+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);return i}function QA(e){return this instanceof QA?(this.v=e,this):new QA(e)}function ZA(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof QA?Promise.resolve(e.value.v).then(l,c):u(s[0][2],e)}(i[e](t))}catch(zW){u(s[0][3],zW)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const JA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function eO(e){const t=function(e){const t=e.getReader(),n=new ReadableStream({start(e){let n="";return r();function r(){return t.read().then((t=>{let{value:i,done:s}=t;if(s)return n.trim()?void e.error(new LA("Failed to parse stream")):void e.close();n+=i;let o,a=n.match(JA);for(;a;){try{o=JSON.parse(a[1])}catch(zW){return void e.error(new LA(`Error parsing JSON response: "${a[1]}"`))}e.enqueue(o),n=n.substring(a[0].length),a=n.match(JA)}return r()}))}}});return n}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:nO(n),response:tO(r)}}async function tO(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return qA(rO(t));t.push(r)}}function nO(e){return ZA(this,arguments,(function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield QA(t.read());if(n)break;yield yield QA(qA(e))}}))}function rO(e){const t=e[e.length-1],n={promptFeedback:null===t||void 0===t?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const e of r.candidates){const t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});const r={};for(const i of e.content.parts)i.text&&(r.text=i.text),i.functionCall&&(r.functionCall=i.functionCall),i.executableCode&&(r.executableCode=i.executableCode),i.codeExecutionResult&&(r.codeExecutionResult=i.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[t].content.parts.push(r)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function iO(e,t,n,r){return eO(await HA(t,VA.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function sO(e,t,n,r){const i=await HA(t,VA.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:qA(await i.json())}}function oO(e){if(null!=e)return"string"===typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function aO(e){let t=[];if("string"===typeof e)t=[{text:e}];else for(const n of e)"string"===typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of e)"functionResponse"in s?(n.parts.push(s),i=!0):(t.parts.push(s),r=!0);if(r&&i)throw new LA("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new LA("No content is provided for sending chat message.");if(r)return t;return n}(t)}function lO(e){let t;if(e.contents)t=e;else{t={contents:[aO(e)]}}return e.systemInstruction&&(t.systemInstruction=oO(e.systemInstruction)),t}const cO=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],uO={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};const dO="SILENT_ERROR";class hO{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null===n||void 0===n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new LA(`First content should be with role 'user', got ${e}`);if(!TA.includes(e))throw new LA(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(TA)}`);if(!Array.isArray(r))throw new LA("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new LA("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of r)for(const e of cO)e in t&&(i[e]+=1);const s=uO[e];for(const t of cO)if(!s.includes(t)&&i[t]>0)throw new LA(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,s,o,a;await this._sendPromise;const l=aO(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t);let d;return this._sendPromise=this._sendPromise.then((()=>sO(this._apiKey,this.model,c,u))).then((e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=XA(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}d=e})),await this._sendPromise,d}async sendMessageStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,s,o,a;await this._sendPromise;const l=aO(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),d=iO(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then((()=>d)).catch((e=>{throw new Error(dO)})).then((e=>e.response)).then((e=>{if(e.candidates&&e.candidates.length>0){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=XA(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}})).catch((e=>{e.message!==dO&&console.error(e)})),d}}class fO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=oO(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=lO(e),i=Object.assign(Object.assign({},this._requestOptions),t);return sO(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}async generateContentStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=lO(e),i=Object.assign(Object.assign({},this._requestOptions),t);return iO(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}startChat(e){var t;return new hO(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e,t){var n;let r={model:null===t||void 0===t?void 0:t.model,generationConfig:null===t||void 0===t?void 0:t.generationConfig,safetySettings:null===t||void 0===t?void 0:t.safetySettings,tools:null===t||void 0===t?void 0:t.tools,toolConfig:null===t||void 0===t?void 0:t.toolConfig,systemInstruction:null===t||void 0===t?void 0:t.systemInstruction,cachedContent:null===(n=null===t||void 0===t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const i=null!=e.generateContentRequest;if(e.contents){if(i)throw new UA("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(i)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=aO(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await HA(t,VA.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async embedContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if("string"===typeof e||Array.isArray(e))return{content:aO(e)};return e}(e),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await HA(t,VA.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const i=n.requests.map((e=>Object.assign(Object.assign({},e),{model:t})));return(await HA(t,VA.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),r)).json()}(this.apiKey,this.model,e,n)}}class pO{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new LA("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new fO(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new UA("Cached content must contain a `name` field.");if(!e.model)throw new UA("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const s of r)if((null===t||void 0===t?void 0:t[s])&&e[s]&&(null===t||void 0===t?void 0:t[s])!==e[s]){if("model"===s){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new UA(`Different value for "${s}" specified in modelParams (${t[s]}) and cachedContent (${e[s]})`)}const i=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new fO(this.apiKey,i,n)}}function mO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const gO=r.forwardRef(mO);function yO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const vO=r.forwardRef(yO);function bO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const xO=r.forwardRef(bO);function wO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const _O=r.forwardRef(wO);function SO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),r.createElement("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),r.createElement("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"}))}const EO=r.forwardRef(SO);function jO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z",clipRule:"evenodd"}),r.createElement("path",{d:"M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z"}))}const kO=r.forwardRef(jO);!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var CO=e=>"number"==typeof e&&!isNaN(e),TO=e=>"string"==typeof e,NO=e=>"function"==typeof e,IO=e=>(0,r.isValidElement)(e)||TO(e)||NO(e)||CO(e);function AO(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:s=!0,collapseDuration:o=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=e,p=i?`${t}--${l}`:t,m=i?`${n}--${l}`:n,g=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{let e=d.current,t=p.split(" "),n=r=>{r.target===d.current&&(f(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,u,o):u()};h||(c?t():(g.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))}),[h]),r.createElement(r.Fragment,null,a)}}var OO=1,PO=()=>""+OO++;var MO=new Map,DO=[],RO=new Set,LO=()=>MO.size>0;function FO(e,t){var n;if(t)return!(null==(n=MO.get(t))||!n.isToastActive(e));let r=!1;return MO.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function BO(e){if(LO()){if(null==e||(e=>TO(e)||CO(e))(e))MO.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=MO.get(e.containerId);t?t.removeToast(e.id):MO.forEach((t=>{t.removeToast(e.id)}))}}else DO=DO.filter((t=>null!=e&&t.options.toastId!==e))}function UO(e,t){IO(e)&&(LO()||DO.push({content:e,options:t}),MO.forEach((n=>{n.buildToast(e,t)})))}function VO(e,t){MO.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function zO(e){return e&&(TO(e.toastId)||CO(e.toastId))?e.toastId:PO()}function $O(e,t){return UO(e,t),t.toastId}function HO(e,t){return{...t,type:t&&t.type||e,toastId:zO(t)}}function WO(e){return(t,n)=>$O(t,HO(e,n))}function qO(e,t){return $O(e,HO("default",t))}qO.loading=(e,t)=>$O(e,HO("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),qO.promise=function(e,t,n){let r,{pending:i,error:s,success:o}=t;i&&(r=TO(i)?qO.loading(i,n):qO.loading(i.render,{...n,...i}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void qO.dismiss(r);let s={type:e,...a,...n,data:i},o=TO(t)?{render:t}:t;return r?qO.update(r,{...s,...o}):qO(o.render,{...s,...o}),i},c=NO(e)?e():e;return c.then((e=>l("success",o,e))).catch((e=>l("error",s,e))),c},qO.success=WO("success"),qO.info=WO("info"),qO.error=WO("error"),qO.warning=WO("warning"),qO.warn=qO.warning,qO.dark=(e,t)=>$O(e,HO("default",{theme:"dark",...t})),qO.dismiss=function(e){BO(e)},qO.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};MO.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},qO.isActive=FO,qO.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=MO.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:PO()};s.toastId!==e&&(s.staleId=e);let o=s.render||i;delete s.render,$O(o,s)}},qO.done=e=>{qO.update(e,{progress:1})},qO.onChange=function(e){return RO.add(e),()=>{RO.delete(e)}},qO.play=e=>VO(!0,e),qO.pause=e=>VO(!1,e);"undefined"!=typeof window?r.useLayoutEffect:r.useEffect;var KO=function(e){return{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}};AO(KO("bounce",!0)),AO(KO("slide",!0)),AO(KO("zoom")),AO(KO("flip"));function YO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const GO=r.forwardRef(YO);function XO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const QO=r.forwardRef(XO),ZO=e=>{let{currentTime:t,instructor:n,classStatus:i}=e;const{currentUser:s}=SS(),o=te(),[a,l]=(0,r.useState)(!1);return(0,wS.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg z-50",children:(0,wS.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,wS.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)("div",{className:"flex-shrink-0",children:(0,wS.jsx)(GO,{className:"h-8 w-8 text-indigo-300"})}),(0,wS.jsxs)("div",{className:"ml-4",children:[(0,wS.jsx)("h1",{className:"text-xl font-semibold",children:"Smart EcoLock"}),(0,wS.jsx)("p",{className:"text-sm text-indigo-200",children:n.department})]})]}),(0,wS.jsx)("div",{className:"flex-1 flex items-center justify-center px-4",children:(0,wS.jsx)("div",{className:`\n              px-6 py-2 rounded-full \n              ${"Class In Session"===i.status?"bg-green-500/20 border border-green-400/50":"Starting Soon"===i.status?"bg-indigo-500/20 border border-indigo-400/50":"Classes Ended"===i.status?"bg-amber-500/20 border border-amber-400/50":"bg-gray-500/20 border border-gray-400/50"}\n            `,children:(0,wS.jsxs)("div",{className:"flex items-center space-x-3",children:["Class In Session"===i.status?(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-green-400 animate-pulse mr-2"}),(0,wS.jsx)("span",{className:"font-medium text-green-300",children:"Active"})]}):"Starting Soon"===i.status?(0,wS.jsx)(gO,{className:"h-5 w-5 text-indigo-300"}):(0,wS.jsx)(xO,{className:"h-5 w-5 text-amber-300"}),(0,wS.jsxs)("div",{className:"flex flex-col",children:[(0,wS.jsx)("span",{className:"text-sm font-medium",children:i.status}),(0,wS.jsx)("span",{className:"text-xs opacity-75",children:i.details})]})]})})}),(0,wS.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,wS.jsxs)("div",{className:"hidden md:flex flex-col items-end",children:[(0,wS.jsx)("span",{className:"text-sm font-medium",children:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,wS.jsx)("span",{className:"text-xs text-indigo-200",children:"Class Time"})]}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsxs)("button",{onClick:()=>l(!a),className:"flex items-center space-x-3 focus:outline-none hover:opacity-80 transition-opacity",children:[(0,wS.jsxs)("div",{className:"flex flex-col items-end",children:[(0,wS.jsx)("span",{className:"text-sm font-medium",children:n.fullName}),(0,wS.jsx)("span",{className:"text-xs text-indigo-200",children:"Instructor"})]}),(0,wS.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-500/30 flex items-center justify-center",children:(0,wS.jsx)(QO,{className:"h-6 w-6 text-indigo-200"})})]}),a&&(0,wS.jsx)(dA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-48 rounded-xl shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 z-50",children:(0,wS.jsxs)("button",{onClick:async()=>{try{await cs(vS),o("/login"),SA().fire({icon:"success",title:"Logged Out Successfully",text:"You have been logged out of your account.",showConfirmButton:!1,timer:1500,background:"#F9FAFB",customClass:{popup:"rounded-xl border border-indigo-100",title:"text-indigo-900",htmlContainer:"text-indigo-700"}})}catch(dv){console.error("Error logging out:",dv),SA().fire({icon:"error",title:"Logout Failed",text:"There was an error logging out. Please try again.",confirmButtonColor:"#4F46E5",background:"#F9FAFB",customClass:{popup:"rounded-xl border border-indigo-100",title:"text-indigo-900",htmlContainer:"text-indigo-700",confirmButton:"bg-indigo-600 hover:bg-indigo-700"}})}},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 transition-colors",children:[(0,wS.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})]})]})})})};function JO(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const eP=r.forwardRef(JO);function tP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const nP=r.forwardRef(tP);function rP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const iP=r.forwardRef(rP);function sP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),r.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const oP=r.forwardRef(sP);function aP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm5.845 17.03a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72V12a.75.75 0 0 0-1.5 0v4.19l-1.72-1.72a.75.75 0 0 0-1.06 1.06l3 3Z",clipRule:"evenodd"}),r.createElement("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"}))}const lP=r.forwardRef(aP);function cP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"}))}const uP=r.forwardRef(cP);function dP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm5.03 4.72a.75.75 0 0 1 0 1.06l-1.72 1.72h10.94a.75.75 0 0 1 0 1.5H10.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const hP=r.forwardRef(dP);function fP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))}const pP=r.forwardRef(fP);function mP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const gP=r.forwardRef(mP);function yP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.913 2.658c2.075-.27 4.19-.408 6.337-.408 2.147 0 4.262.139 6.337.408 1.922.25 3.291 1.861 3.405 3.727a4.403 4.403 0 0 0-1.032-.211 50.89 50.89 0 0 0-8.42 0c-2.358.196-4.04 2.19-4.04 4.434v4.286a4.47 4.47 0 0 0 2.433 3.984L7.28 21.53A.75.75 0 0 1 6 21v-4.03a48.527 48.527 0 0 1-1.087-.128C2.905 16.58 1.5 14.833 1.5 12.862V6.638c0-1.97 1.405-3.718 3.413-3.979Z"}),r.createElement("path",{d:"M15.75 7.5c-1.376 0-2.739.057-4.086.169C10.124 7.797 9 9.103 9 10.609v4.285c0 1.507 1.128 2.814 2.67 2.94 1.243.102 2.5.157 3.768.165l2.782 2.781a.75.75 0 0 0 1.28-.53v-2.39l.33-.026c1.542-.125 2.67-1.433 2.67-2.94v-4.286c0-1.505-1.125-2.811-2.664-2.94A49.392 49.392 0 0 0 15.75 7.5Z"}))}const vP=r.forwardRef(yP),bP="from-teal-50 via-sky-50 to-emerald-50",xP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;const n=new Date,r=new Date(e.getTime()+6e4*t);return n>=e&&n<=r?"ongoing":n<e?"upcoming":"completed"},wP=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=new pO({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GEMINI_API_KEY||"");(0,r.useEffect)((()=>{(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[n]);const d=()=>Math.random().toString(36).substr(2,9),h=async()=>{if(!s.trim())return;const e={id:d(),content:s,sender:"user",timestamp:new Date};i((t=>[...t,e])),o(""),l(!0);try{const e=(await f(s)).split("\n\n"),t=e[0]||"I'm sorry, but I couldn't generate an answer.",n=e[1]||"",r=e[2]||"",o=e[3]||"",a={id:d(),content:`${t}\n\n${n}\n\n${r}\n\n${o}`,sender:"ai",timestamp:new Date};i((e=>[...e,a]))}catch(dv){console.error("Gemini API Error:",dv);const t={id:d(),content:"\ud83d\udea8 **Error:** I encountered an issue while processing your request. Please check your input or try again later.",sender:"ai",timestamp:new Date};i((e=>[...e,t]))}finally{l(!1)}},f=async e=>{try{const t=u.getGenerativeModel({model:"gemini-pro"});return(await t.generateContent(`You are a helpful AI assistant that can answer any questions accurately, can answer about Mark Lloyd Cuizon, Clarence Emmanuel Jamora and Jean Ricka Rosalita - Creators of Smart EcoLock. \n      They are 4rth year BS Computer Engineering Students   from CIT-U and for Smart EcoLock, addresses energy management, attendance control, and security for CIT-U's rooms and offices. \n        It uses an ESP32 microcontroller for efficient sensor handling and low power consumption. With occupancy recognition, it turns off lights and electronics \n        in unoccupied rooms, reducing energy waste. LDR sensors are used to automatically control lighting based on natural light levels in classrooms, optimizing \n        energy use. Attendance is tracked through access control data, with real-time monitoring in a unified database. Security is enhanced via RFID or biometric \n        access control, ensuring only authorized individuals enter. Weight sensors in chairs add precision to attendance tracking. A React.js website with Firebase \n        backend allows system monitoring and control. This system boosts sustainability, management efficiency, and security at CIT-U. \n        Provide complete answers, ensuring clarity and professionalism. Always include full code implementations when relevant and internet sources \n        for additional information, even if the question is unrelated to Smart EcoLock. Format responses to facilitate prompt chatbot replies.\n\n        Respond professionally and concisely to the following query: ${e}.`)).response.text()}catch(dv){throw console.error("Gemini API call failed:",dv),dv}},p=()=>t(!e);return(0,wS.jsxs)("div",{className:"fixed bottom-6 right-6 z-50",children:[(0,wS.jsx)("div",{children:e&&(0,wS.jsxs)("div",{className:"w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,wS.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-600 text-white p-4 flex justify-between items-center",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(pP,{className:"w-6 h-6"}),(0,wS.jsx)("h2",{className:"text-lg font-semibold",children:"Smart EcoLock Assistant"})]}),(0,wS.jsx)("button",{onClick:p,className:"hover:bg-indigo-700 rounded-full p-1 transition-colors",children:(0,wS.jsx)(gP,{className:"w-5 h-5"})})]}),(0,wS.jsxs)("div",{className:"flex-grow overflow-y-auto p-4 space-y-3",children:[n.map((e=>(0,wS.jsx)("div",{className:"flex "+("user"===e.sender?"justify-end":"justify-start"),children:(0,wS.jsx)("div",{className:"max-w-[80%] px-4 py-2 rounded-2xl "+("user"===e.sender?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:e.content})},e.id))),a&&(0,wS.jsx)("div",{className:"text-center text-gray-500 italic",children:"Smart Ecolock Assistant is thinking..."}),(0,wS.jsx)("div",{ref:c})]}),(0,wS.jsxs)("div",{className:"p-4 border-t border-gray-200 flex space-x-2",children:[(0,wS.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&h(),placeholder:"Ask me anything...",className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,wS.jsx)("button",{onClick:h,disabled:a,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:"Send"})]})]})}),(0,wS.jsx)("button",{onClick:p,className:"bg-indigo-600 text-white p-4 rounded-full shadow-2xl hover:bg-indigo-700 transition-colors",children:(0,wS.jsx)(vP,{className:"w-6 h-6"})})]})},_P=()=>{var e,t,n,i,s,o;const{currentUser:a}=SS(),l=te(),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(new Date),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)(!0),[S,E]=(0,r.useState)([]),[j,k]=(0,r.useState)([]),[C,T]=(0,r.useState)(null),[N,I]=(0,r.useState)([]),[A,O]=(0,r.useState)(!0);(0,r.useEffect)((()=>{if(!a)return void l("/login");const e=setInterval((()=>g(new Date)),1e3);(async()=>{if(a)try{const t=Zm(hm(bS,"teachers"),eg("instructor","==",a.uid)),n=await vg(t);if(!n.empty){const t=n.docs[0],r={id:t.id,...t.data()},i=Zm(hm(bS,"users"),eg("id","==",t.id)),s=await vg(i);let o={};s.empty||(o=s.docs[0].data());const a={...r,...o},l=(a.schedules||[]).map((e=>({id:`${t.id}_${e.subject}_${e.day}`,day:e.day,subject:e.subject,classes:[{time:`${e.startTime} - ${e.endTime}`,subject:e.subject}],room:e.room})));if(u((e=>({...e||{},id:t.id,fullName:a.fullName||a.name||"Instructor",email:a.email||"",department:a.department||"Department",schedules:l,subjects:a.subjects||[],sections:(null===e||void 0===e?void 0:e.sections)||[],teacherData:{assignedStudents:a.assignedStudents||[]}}))),l.length>0&&!f){var e;const t=null===(e=l.find((e=>e.subject)))||void 0===e?void 0:e.subject;t?p(t):l[0].subject&&p(l[0].subject)}}}catch(dv){console.error("Error fetching instructor details:",dv)}})();const t=Sg(Zm(hm(bS,"students"),eg("section","==",f)),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,name:e.data().name||"",section:e.data().section||"",attendance:e.data().attendance||!1,timeIn:e.data().timeIn,lastAttendance:(null===(t=e.data().attendanceHistory)||void 0===t?void 0:t[0])||null,...e.data()}}));h(t)})),n=Sg(Zm(hm(bS,"attendance"),rg("timestamp","desc"),sg(5)),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));x(t)}));return(async()=>{const e=Zm(hm(bS,"users"),eg("role","==","student")),t=Zm(hm(bS,"schedules")),n=Zm(hm(bS,"attendance")),r=Sg(e,(e=>{e.size;Sg(t,(e=>{e.size;Sg(n,(e=>{const t=e.docs.map((e=>e.data()));t.length,t.filter((e=>"present"===e.status)).length,t.filter((e=>"late"!==e.status)).length;_(!1)}))}))}))})(),()=>{clearInterval(e),t(),n()}}),[a,l,f]),(0,r.useEffect)((()=>{if(!a)return;(async()=>{try{if(null===c||void 0===c||!c.schedules||0===c.schedules.length)return;const e=[...new Set(c.schedules.map((e=>e.subject)))];if(0===e.length)return;const t=Zm(hm(bS,"subjects"),eg("code","in",e)),n=(await vg(t)).docs.map((e=>({id:e.id,code:e.data().code||"",name:e.data().name||"",...e.data()})));u((e=>e?{...e,subjects:n}:null))}catch(dv){console.error("Error fetching subjects:",dv),qO.error("Failed to fetch subjects")}})()}),[a,null===c||void 0===c?void 0:c.schedules]),(0,r.useEffect)((()=>{(async()=>{if(null===a||void 0===a||!a.email)return;const e=Zm(hm(bS,"schedules"),eg("teacherId","==",a.email)),t=(await vg(e)).docs.map((e=>({id:e.id,day:e.data().day,subject:e.data().subject,classes:e.data().classes||[],room:e.data().room||"TBA",timestamp:e.data().timestamp||(new Date).getTime()})));E((e=>e.map((e=>{var t;return{id:e.id,subject:e.subject,room:e.room||"TBA",timestamp:new Date(e.timestamp).getTime(),status:xP(new Date(e.timestamp)),teacherId:e.teacherId,day:new Date(e.timestamp).toLocaleString("en-US",{weekday:"short"}),classes:(null===(t=e.classes)||void 0===t?void 0:t.map((e=>({time:e.time||"No time available",students:e.students||0}))))||[]}})))(t).sort(((e,t)=>e.timestamp-t.timestamp)))})()}),[a,bS]),(0,r.useEffect)((()=>{(async()=>{try{var e;const t=Zm(hm(bS,"accessLogs")),n=(await vg(t)).docs.map((e=>({id:e.id,timestamp:e.data().timestamp,type:e.data().type,room:e.data().room,userId:e.data().userId,status:e.data().status,location:e.data().location,deviceId:e.data().deviceId})));k(n),T((null===(e=n[0])||void 0===e?void 0:e.timestamp)||null)}catch(dv){console.error("Error fetching access logs:",dv)}})()}),[bS]),(0,r.useEffect)((()=>{if(null===a||void 0===a||!a.uid)return;return(()=>{const e=(new Date).toLocaleString("en-US",{weekday:"short"}),t=Sg(Zm(hm(bS,"schedules"),eg("teacherId","==",a.uid)),(t=>{const n=t.docs.map((e=>({id:e.id,...e.data()}))).filter((t=>t.day===e)).map((e=>{const[t,n]=e.classes[0].time.split(":").map(Number),r=new Date;return r.setHours(t,n,0,0),{...e,timestamp:r.getTime(),status:xP(r,e.classes[0].duration||60)}})).sort(((e,t)=>e.timestamp-t.timestamp));I(n),O(!1)}),(e=>{console.error("Error fetching schedules:",e),O(!1)}));return t})()}),[a]),(0,r.useEffect)((()=>{if(!a)return;const e=Sg(Zm(hm(bS,"students"),eg("teacherId","==",a.uid)),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,name:e.data().name||"",section:e.data().section||"",attendance:e.data().attendance||!1,timeIn:e.data().timeIn,lastAttendance:(null===(t=e.data().attendanceHistory)||void 0===t?void 0:t[0])||null,...e.data()}}));h(t)})),t=Sg(Zm(hm(bS,"sections"),eg("teacherId","==",a.uid)),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,name:e.data().name||"",code:e.data().code||"",studentCount:(null===(t=e.data().students)||void 0===t?void 0:t.length)||0,...e.data()}}));u((e=>({...e,sections:t})))}));return()=>{e(),t()}}),[a]);const P=e=>{const t=e-(new Date).getTime();if(t<=0)return"";const n=Math.floor(t/6e4);if(n<60)return`in ${n} min`;return`in ${Math.floor(n/60)}h ${n%60}m`},M=(e,t)=>!!Array.isArray(e)&&e.includes(t),D=((0,r.useMemo)((()=>{if(null===c||void 0===c||!c.schedules||0===c.schedules.length)return"No upcoming classes";const e=new Date,t=e.getDay(),n=e.toLocaleTimeString("en-US",{hour12:!1}),[r,i]=n.split(":").map(Number),s=60*r+i,o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=[...c.schedules].sort(((e,t)=>{const n=o.indexOf(e.day.substring(0,3)),r=o.indexOf(t.day.substring(0,3));if(n===r){const n=e.classes[0].time.split(" - ")[0],r=t.classes[0].time.split(" - ")[0];return n.localeCompare(r)}return n-r})),l=a.filter((e=>e.day.substring(0,3)===o[t]));for(const c of l){const[e]=c.classes[0].time.split(" - "),[t,n]=e.split(":").map(Number);if(s<60*t+n)return`Today at ${e}`}for(let c=1;c<=7;c++){const e=(t+c)%7,n=a.filter((t=>t.day.substring(0,3)===o[e]));if(n.length>0){const e=n[0],t=e.classes[0].time.split(" - ")[0];return`${1===c?"Tomorrow":e.day} at ${t}`}}return"No upcoming classes"}),[null===c||void 0===c?void 0:c.schedules,m]),(0,r.useMemo)((()=>{if(!S||!Array.isArray(S))return[];const e=(new Date).toLocaleString("en-US",{weekday:"short"});return S.filter((t=>t&&t.day===e&&t.classes&&Array.isArray(t.classes))).sort(((e,t)=>{var n,r,i,s;const o=(null===(n=e.classes)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.time)||"",a=(null===(i=t.classes)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.time)||"";return o.localeCompare(a)}))}),[S])),R=((0,r.useMemo)((()=>S&&Array.isArray(S)?S.filter((e=>e&&e.classes&&Array.isArray(e.classes)&&e.classes.some((e=>e&&e.time)))).slice(0,3):[]),[S]),(0,r.useMemo)((()=>((e,t)=>{if(!e||!e.schedules)return{status:"Loading...",color:"bg-gray-100 text-gray-600",details:"Fetching schedule information",fullName:"Instructor"};const n=(new Date).toLocaleTimeString("en-US",{hour12:!1}),[r,i]=n.split(":").map(Number),s=60*r+i,o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=[...e.schedules].sort(((e,t)=>{const n=o.indexOf(e.day.substring(0,3)),r=o.indexOf(t.day.substring(0,3));if(n===r){const n=e.classes[0].time.split(" - ")[0],r=t.classes[0].time.split(" - ")[0];return n.localeCompare(r)}return n-r})),l=a.filter((e=>e.day.substring(0,3)===t));if(0===l.length){const n=a.find((e=>o.indexOf(e.day.substring(0,3))>o.indexOf(t)));return{status:"No Classes Today",color:"bg-gray-100 text-gray-800",details:n?`Next: ${n.day} ${n.classes[0].time}`:"No upcoming classes",fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"}}for(const c of l){const[t,n]=c.classes[0].time.split(" - "),[r,i]=t.split(":").map(Number),[o,a]=n.split(":").map(Number),l=60*r+i;if(s>=l&&s<=60*o+a)return{status:"In Class",color:"bg-green-100 text-green-800",details:`${c.subject} until ${n}`,fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"};if(s<l){const t=l-s,n=Math.floor(t/60),r=t%60,i=n>0?`${n}h ${r}m`:`${r}m`;return{status:"Next Class",color:"bg-indigo-100 text-indigo-800",details:`${c.subject} in ${i}`,fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"}}}return{status:"Classes Finished",color:"bg-gray-100 text-gray-800",details:"All classes completed for today",fullName:(null===e||void 0===e?void 0:e.fullName)||"Instructor"}})(c,m.toLocaleString("en-US",{weekday:"short"}))),[c,m])),L=(0,r.useMemo)((()=>f?b.filter((e=>e.sectionId===f)):b),[b,f]),F=(0,r.useMemo)((()=>{var e;const t=L.length,n=(null===c||void 0===c||null===(e=c.sections)||void 0===e?void 0:e.length)||0,r=b.filter((e=>"present"===e.status&&M(L,e.studentId))),i=b.filter((e=>"late"!==e.status&&M(L,e.studentId)));return{totalStudents:t,totalClasses:n,attendanceRate:t>0?(r.length/t*100).toFixed(1):"0.0",onTimeRate:t>0?i.length/t*100:0}}),[L,null===c||void 0===c?void 0:c.sections,b]);return(0,r.useEffect)((()=>{if(null===a||void 0===a||!a.uid)return;(async()=>{try{var e,t,n;fm(bS,"teachers",a.uid);const r=await vg(hm(bS,"teachers")),[i,s,o,l]=await Promise.all([vg(Zm(hm(bS,"schedules"),eg("teacherId","==",a.uid),rg("day"))),vg(Zm(hm(bS,"subjects"),eg("teacherId","==",a.uid))),vg(Zm(hm(bS,"sections"),eg("teacherId","==",a.uid))),vg(Zm(hm(bS,"students"),eg("teacherId","==",a.uid)))]),c=i.docs.map((e=>{var t;return{id:e.id,day:e.data().day||"",subject:e.data().subject||"",classes:(null===(t=e.data().classes)||void 0===t?void 0:t.map((e=>({time:e.time||"",subject:e.subject||""}))))||[],room:e.data().room,...e.data()}})),d=s.docs.map((e=>({id:e.id,code:e.data().code||"",name:e.data().name||"",...e.data()}))),h=o.docs.map((e=>({id:e.id,name:e.data().name||"",code:e.data().code||"",studentCount:l.docs.filter((t=>t.data().section===e.id)).length,...e.data()})));u({id:a.uid,fullName:(null===(e=r.docs[0])||void 0===e?void 0:e.data().fullName)||"Instructor",email:(null===(t=r.docs[0])||void 0===t?void 0:t.data().email)||"",department:(null===(n=r.docs[0])||void 0===n?void 0:n.data().department)||"",schedules:c,sections:h,subjects:d,teacherData:{assignedStudents:l.docs.map((e=>e.id))}}),_(!1)}catch(dv){console.error("Error fetching teacher data:",dv),qO.error("Failed to load teacher data"),_(!1)}})()}),[a]),(0,r.useEffect)((()=>{if(null===a||void 0===a||!a.uid)return;const e=Sg(Zm(hm(bS,"schedules"),eg("teacherId","==",a.uid),rg("timestamp","desc")),(e=>{const t=e.docChanges();t.length>0&&u((e=>{if(!e)return e;const n=[...e.schedules];return t.forEach((e=>{if("modified"===e.type){const t=n.findIndex((t=>t.id===e.doc.id));-1!==t&&(n[t]={id:e.doc.id,...e.doc.data()})}})),{...e,schedules:n}}))}));return()=>e()}),[a]),c?(0,wS.jsxs)("div",{className:`min-h-screen bg-gradient-to-br ${bP}`,children:[(0,wS.jsx)(ZO,{currentTime:m,instructor:{fullName:(null===c||void 0===c?void 0:c.fullName)||"Instructor",department:(null===c||void 0===c?void 0:c.department)||"Department"},classStatus:{status:R.status,color:R.color,details:R.details,fullName:(null===c||void 0===c?void 0:c.fullName)||"Instructor"}}),(0,wS.jsx)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-16",children:(0,wS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,wS.jsx)("div",{className:"lg:col-span-8 space-y-6",children:(0,wS.jsxs)(dA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-8 border border-white/20",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-blue-600 bg-clip-text text-transparent",children:["Welcome, ",((null===c||void 0===c?void 0:c.fullName)||"Instructor").split(" ")[0],"! \ud83d\udcda"]}),(0,wS.jsx)("p",{className:"text-indigo-600 mt-2 text-lg",children:"Your virtual classroom dashboard"})]}),(0,wS.jsx)(dA.div,{initial:{scale:.95},animate:{scale:1},className:`px-6 py-3 rounded-2xl text-sm font-medium shadow-lg ${R.color}`,children:(0,wS.jsxs)("div",{className:"flex flex-col items-center",children:[(0,wS.jsx)("span",{className:"font-bold text-lg",children:R.status}),(0,wS.jsx)("span",{className:"text-sm opacity-90",children:R.details})]})})]}),(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{title:"Total Students",value:(null===c||void 0===c||null===(e=c.teacherData)||void 0===e||null===(t=e.assignedStudents)||void 0===t?void 0:t.length)||0,icon:(0,wS.jsx)(iP,{className:"h-6 w-6 text-blue-600"}),change:"+12% from last month",color:"bg-blue-50"},{title:"Attendance Rate",value:`${F.attendanceRate}%`,icon:(0,wS.jsx)(eP,{className:"h-6 w-6 text-green-600"}),change:"Average this week",color:"bg-green-50"},{title:"Active Classes",value:N.filter((e=>"ongoing"===e.status)).length,icon:(0,wS.jsx)(xO,{className:"h-6 w-6 text-purple-600"}),change:"Currently ongoing",color:"bg-purple-50"},{title:"Room Usage",value:"85%",icon:(0,wS.jsx)(_O,{className:"h-6 w-6 text-orange-600"}),change:"Efficiency rate",color:"bg-orange-50"}].map(((e,t)=>(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`${e.color} rounded-2xl p-6 shadow-sm hover:shadow-md transition-all`,children:(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-gray-500 text-sm",children:e.title}),(0,wS.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.value}),(0,wS.jsx)("p",{className:"text-gray-600 text-xs mt-2",children:e.change})]}),(0,wS.jsx)("div",{className:"p-3 rounded-xl bg-white/50",children:e.icon})]})},e.title)))}),(0,wS.jsxs)(dA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,wS.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Performance Analytics"}),(0,wS.jsxs)("select",{className:"text-sm border rounded-lg px-3 py-2",children:[(0,wS.jsx)("option",{value:"week",children:"This Week"}),(0,wS.jsx)("option",{value:"month",children:"This Month"}),(0,wS.jsx)("option",{value:"semester",children:"This Semester"})]})]}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,wS.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,wS.jsx)("h3",{className:"text-gray-700 font-medium mb-4",children:"Attendance Trends"}),(0,wS.jsx)("div",{className:"h-48 flex items-end justify-between",children:["Mon","Tue","Wed","Thu","Fri"].map(((e,t)=>(0,wS.jsxs)("div",{className:"flex flex-col items-center",children:[(0,wS.jsx)("div",{className:"w-8 bg-indigo-500 rounded-t-lg",style:{height:100*Math.random()+"%"}}),(0,wS.jsx)("span",{className:"text-xs text-gray-600 mt-2",children:e})]},e)))})]}),(0,wS.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,wS.jsx)("h3",{className:"text-gray-700 font-medium mb-4",children:"Subject Performance"}),(0,wS.jsx)("div",{className:"space-y-4",children:null===c||void 0===c||null===(n=c.subjects)||void 0===n?void 0:n.slice(0,3).map((e=>(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)("div",{className:"w-32 truncate",children:e.name}),(0,wS.jsx)("div",{className:"flex-1 ml-4",children:(0,wS.jsx)("div",{className:"h-2 bg-gray-200 rounded-full",children:(0,wS.jsx)("div",{className:"h-2 bg-indigo-500 rounded-full",style:{width:100*Math.random()+"%"}})})}),(0,wS.jsxs)("span",{className:"ml-4 text-sm text-gray-600",children:[Math.floor(100*Math.random()),"%"]})]},e.id)))})]})]})]}),(0,wS.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[{title:"Take Attendance",icon:(0,wS.jsx)(oP,{className:"h-6 w-6"}),color:"bg-blue-500 hover:bg-blue-600"},{title:"Generate Report",icon:(0,wS.jsx)(lP,{className:"h-6 w-6"}),color:"bg-green-500 hover:bg-green-600"},{title:"Room Control",icon:(0,wS.jsx)(_O,{className:"h-6 w-6"}),color:"bg-purple-500 hover:bg-purple-600"},{title:"View Analytics",icon:(0,wS.jsx)(uP,{className:"h-6 w-6"}),color:"bg-orange-500 hover:bg-orange-600"}].map((e=>(0,wS.jsxs)("button",{className:`${e.color} text-white rounded-xl p-4 flex flex-col items-center justify-center transition-colors`,children:[e.icon,(0,wS.jsx)("span",{className:"text-sm mt-2",children:e.title})]},e.title)))}),(0,wS.jsxs)(dA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-8 border border-white/20",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Weekly Schedule"}),(0,wS.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wS.jsx)(vO,{className:"h-5 w-5 text-indigo-600"}),(0,wS.jsx)("span",{className:"text-indigo-600 font-medium",children:(new Date).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]}),(0,wS.jsx)("div",{className:"grid grid-cols-5 gap-4",children:["Mon","Tue","Wed","Thu","Fri"].map((e=>{var t;const n=(null===c||void 0===c||null===(t=c.schedules)||void 0===t?void 0:t.filter((t=>t.day.startsWith(e))))||[];return(0,wS.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[(0,wS.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:e}),(0,wS.jsx)("div",{className:"space-y-2",children:n.length>0?n.map(((e,t)=>{var n;return(0,wS.jsxs)("div",{className:"p-2 bg-indigo-50 rounded-lg text-sm",children:[(0,wS.jsx)("p",{className:"font-medium text-indigo-800",children:e.subject}),(0,wS.jsxs)("div",{className:"flex items-center text-indigo-600 mt-1 text-xs",children:[(0,wS.jsx)(gO,{className:"h-3 w-3 mr-1"}),null===(n=e.classes[0])||void 0===n?void 0:n.time,e.room&&(0,wS.jsxs)(wS.Fragment,{children:[(0,wS.jsx)(_O,{className:"h-3 w-3 ml-2 mr-1"}),"Room ",e.room]})]})]},t)})):(0,wS.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"No classes"})})]},e)}))})]}),(0,wS.jsx)(dA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:null===c||void 0===c||null===(i=c.subjects)||void 0===i?void 0:i.map((e=>(0,wS.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-all",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["Code: ",e.code]})]}),(0,wS.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,wS.jsx)(xO,{className:"h-5 w-5 text-indigo-600"})})]}),(0,wS.jsx)("div",{className:"space-y-2",children:c.sections.filter((t=>t.code===e.code)).map((e=>(0,wS.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)(kO,{className:"h-4 w-4 text-gray-600 mr-2"}),(0,wS.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]}),(0,wS.jsxs)("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full",children:[e.studentCount," students"]})]},e.id)))})]},e.id)))})}),(0,wS.jsx)("div",{className:"grid grid-cols-1 gap-4",children:null===D||void 0===D?void 0:D.map(((e,t)=>(0,wS.jsx)(dA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-6 rounded-2xl shadow-lg border-l-4 "+("ongoing"===e.status?"border-l-green-500 bg-gradient-to-r from-green-50 to-white":"upcoming"===e.status?"border-l-indigo-500 bg-gradient-to-r from-indigo-50 to-white":"border-l-gray-500 bg-gradient-to-r from-gray-50 to-white"),children:(0,wS.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,wS.jsx)("div",{className:"p-2 rounded-lg "+("ongoing"===e.status?"bg-green-100":"upcoming"===e.status?"bg-indigo-100":"bg-gray-100"),children:(0,wS.jsx)(xO,{className:"h-5 w-5 "+("ongoing"===e.status?"text-green-600":"upcoming"===e.status?"text-indigo-600":"text-gray-600")})}),(0,wS.jsxs)("div",{className:"flex-1",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("h3",{className:"font-semibold "+("ongoing"===e.status?"text-green-900":"upcoming"===e.status?"text-indigo-900":"text-gray-900"),children:e.subject}),(0,wS.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+("ongoing"===e.status?"bg-green-100 text-green-800":"upcoming"===e.status?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:"ongoing"===e.status?"In Progress":"upcoming"===e.status&&e.timestamp?P(e.timestamp):"Completed"})]}),(0,wS.jsxs)("div",{className:"flex items-center mt-1",children:[(0,wS.jsx)(gO,{className:"h-4 w-4 mr-1 "+("ongoing"===e.status?"text-green-600":"upcoming"===e.status?"text-indigo-600":"text-gray-600")}),(0,wS.jsx)("p",{className:"text-sm "+("ongoing"===e.status?"text-green-700":"upcoming"===e.status?"text-indigo-700":"text-gray-700"),children:e.classes&&e.classes.length>0?e.classes[0].time:"No time available"}),e.room&&(0,wS.jsxs)(wS.Fragment,{children:[(0,wS.jsx)(_O,{className:"h-4 w-4 ml-3 mr-1 "+("ongoing"===e.status?"text-green-600":"upcoming"===e.status?"text-indigo-600":"text-gray-600")}),(0,wS.jsxs)("p",{className:"text-sm "+("ongoing"===e.status?"text-green-700":"upcoming"===e.status?"text-indigo-700":"text-gray-700"),children:["Room ",e.room]})]})]})]})]})},e.id)))}),(0,wS.jsxs)(dA.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-8 border border-white/20",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Attendance Management"}),(0,wS.jsxs)("div",{className:"flex gap-3",children:[(0,wS.jsxs)("select",{className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",value:f,onChange:e=>p(e.target.value),children:[(0,wS.jsx)("option",{value:"",children:"All Sections"}),null===c||void 0===c||null===(s=c.sections)||void 0===s?void 0:s.map((e=>(0,wS.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,wS.jsxs)("button",{onClick:()=>{},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[(0,wS.jsx)(lP,{className:"w-5 h-5"}),"Export"]})]})]}),(0,wS.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mt-6",children:(0,wS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,wS.jsx)("thead",{className:"bg-gray-50",children:(0,wS.jsxs)("tr",{children:[(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Name"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Section"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time In"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,wS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.filter((e=>!f||e.section===f)).map((e=>(0,wS.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("div",{className:"flex items-center",children:(0,wS.jsxs)("div",{children:[(0,wS.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,wS.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800",children:e.section})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsxs)("select",{value:e.status||"absent",onChange:t=>(async(e,t)=>{try{const n=(new Date).getTime();await xg(fm(bS,"students",e),{status:t,lastUpdated:n});const r=hm(bS,"attendance");await _g(r,{studentId:e,status:t,timestamp:n,subject:f,teacherId:null===a||void 0===a?void 0:a.uid}),qO.success("Attendance updated successfully")}catch(dv){console.error("Error updating attendance:",dv),qO.error("Failed to update attendance")}})(e.id,t.target.value),className:"text-sm rounded-lg border-gray-200 focus:ring-2 focus:ring-offset-2 "+("present"===e.status?"text-green-800 bg-green-50 focus:ring-green-500":"late"===e.status?"text-yellow-800 bg-yellow-50 focus:ring-yellow-500":"text-red-800 bg-red-50 focus:ring-red-500"),children:[(0,wS.jsx)("option",{value:"present",children:"Present"}),(0,wS.jsx)("option",{value:"absent",children:"Absent"}),(0,wS.jsx)("option",{value:"late",children:"Late"})]})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"present"===e.status||"late"===e.status?(new Date).toLocaleTimeString():"-"}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,wS.jsx)("button",{onClick:()=>(async e=>{const{value:t}=await SA().fire({title:"Add Notes",input:"textarea",inputLabel:"Notes",inputPlaceholder:"Enter notes about the student...",showCancelButton:!0});if(t)try{await xg(fm(bS,"students",e),{notes:t,notesTimestamp:(new Date).getTime()}),qO.success("Notes added successfully")}catch(dv){console.error("Error adding notes:",dv),qO.error("Failed to add notes")}})(e.id),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Add Notes"})})]},e.id)))})]})})]})]})}),(0,wS.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,wS.jsxs)(dA.section,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-6 border border-white/20",children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Smart Room Control"}),(0,wS.jsxs)("div",{className:"space-y-4",children:[null===c||void 0===c||null===(o=c.schedules)||void 0===o?void 0:o.map((e=>(0,wS.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("h4",{className:"font-medium text-gray-900",children:["Room ",e.room]}),(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:e.subject})]}),(0,wS.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium "+("ongoing"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"ongoing"===e.status?"In Use":"Available"})]}),(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[(0,wS.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:"Lights"}),(0,wS.jsx)("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 transition-colors focus:outline-none hover:bg-gray-300",children:(0,wS.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1"})})]}),(0,wS.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Energy: 45W"})]}),(0,wS.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:"AC"}),(0,wS.jsx)("button",{className:"relative inline-flex h-6 w-11 items-center rounded-full bg-green-200 transition-colors focus:outline-none hover:bg-green-300",children:(0,wS.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-6"})})]}),(0,wS.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Temp: 23\xb0C"})]})]}),(0,wS.jsxs)("div",{className:"mt-4",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,wS.jsx)("span",{className:"text-gray-600",children:"Energy Usage"}),(0,wS.jsx)("span",{className:"text-gray-900 font-medium",children:"2.4 kWh"})]}),(0,wS.jsx)("div",{className:"h-2 bg-gray-100 rounded-full",children:(0,wS.jsx)("div",{className:"h-2 bg-green-500 rounded-full",style:{width:"65%"}})}),(0,wS.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"65% efficiency rate"})]})]},e.id))),(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[(0,wS.jsxs)("button",{className:"flex items-center justify-center gap-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 rounded-lg p-3 transition-colors",children:[(0,wS.jsx)(_O,{className:"h-5 w-5"}),(0,wS.jsx)("span",{className:"text-sm",children:"Access Log"})]}),(0,wS.jsxs)("button",{className:"flex items-center justify-center gap-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-lg p-3 transition-colors",children:[(0,wS.jsx)(uP,{className:"h-5 w-5"}),(0,wS.jsx)("span",{className:"text-sm",children:"Energy Report"})]})]})]})]}),(0,wS.jsxs)(dA.section,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"backdrop-blur-lg bg-white/80 rounded-3xl shadow-xl p-6 border border-white/20 mt-6",children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Room Occupancy"}),(0,wS.jsx)("div",{className:"space-y-3",children:j.slice(0,5).map(((e,t)=>(0,wS.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,wS.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wS.jsx)("div",{className:"p-2 rounded-full "+("entry"===e.status?"bg-green-100":"bg-red-100"),children:"entry"===e.status?(0,wS.jsx)(kO,{className:"h-4 w-4 text-green-600"}):(0,wS.jsx)(hP,{className:"h-4 w-4 text-red-600"})}),(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Room ",e.room]}),(0,wS.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]})]}),(0,wS.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+("entry"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"entry"===e.status?"Entry":"Exit"})]},t)))})]})]})]})}),(0,wS.jsx)(wP,{})]}):(0,wS.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,wS.jsx)("div",{className:"w-12 h-12 border-t-2 border-b-2 border-indigo-500 rounded-full"})})};function SP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),r.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const EP=r.forwardRef(SP),jP=()=>{const[e,t]=(0,r.useState)("");return(0,wS.jsx)(dA.div,{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,wS.jsxs)(dA.form,{onSubmit:async n=>{n.preventDefault();try{await async function(e,t,n){const r=yi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&os(r,i,n),await Ci(r,i,"getOobCode",Ri,"EMAIL_PASSWORD_PROVIDER")}(vS,e),SA().fire({icon:"success",title:"Email Sent!",html:`\n          <p>Password reset instructions sent to <strong>${e}</strong></p>\n          <p class="text-sm mt-2">Check your spam folder if you don't see it.</p>\n        `,confirmButtonColor:"#3b82f6"}),t("")}catch(dv){SA().fire({icon:"error",title:"Reset Failed",text:dv instanceof Error?dv.message:"Failed to send reset email",confirmButtonColor:"#ef4444"})}},className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 sm:p-10",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[(0,wS.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,wS.jsx)(dA.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},children:(0,wS.jsx)("div",{className:"p-4 bg-indigo-100 rounded-full",children:(0,wS.jsx)(fA,{className:"w-12 h-12 text-indigo-600"})})}),(0,wS.jsx)(dA.h1,{className:"text-3xl font-bold mt-4 text-gray-900",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"Reset Password"}),(0,wS.jsx)(dA.p,{className:"text-gray-500 text-center mt-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Enter your email address to receive a password reset link."})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"mb-6",children:[(0,wS.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)(EP,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),(0,wS.jsx)("input",{type:"email",placeholder:"Enter your email",className:"w-full pl-10 p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200",value:e,onChange:e=>t(e.target.value),required:!0})]})]}),(0,wS.jsx)(dA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7},children:(0,wS.jsxs)("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-lg transition duration-200 flex items-center justify-center gap-2",children:[(0,wS.jsx)(fA,{className:"w-5 h-5"}),"Send Reset Email"]})}),(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center space-y-2",children:[(0,wS.jsxs)("p",{className:"text-gray-500",children:["Remember your password?"," ",(0,wS.jsx)(Te,{to:"/login",className:"text-indigo-600 hover:text-indigo-800 font-semibold hover:underline",children:"Login here"})]}),(0,wS.jsxs)("p",{className:"text-gray-500",children:["Need an account?"," ",(0,wS.jsx)(Te,{to:"/register",className:"text-indigo-600 hover:text-indigo-800 font-semibold hover:underline",children:"Register here"})]})]})]})})};class kP extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function CP(e){let{children:t,isPresent:n,anchorX:i}=e;const s=(0,r.useId)(),o=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,r.useContext)(iI);return(0,r.useInsertionEffect)((()=>{const{width:e,height:t,top:r,left:c,right:u}=a.current;if(n||!o.current||!e||!t)return;const d="left"===i?`left: ${c}`:`right: ${u}`;o.current.dataset.motionPopId=s;const h=document.createElement("style");return l&&(h.nonce=l),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${d}px !important;\n            top: ${r}px !important;\n          }\n        `),()=>{document.head.removeChild(h)}}),[n]),(0,wS.jsx)(kP,{isPresent:n,childRef:o,sizeRef:a,children:r.cloneElement(t,{ref:o})})}const TP=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:s,custom:o,presenceAffectsLayout:a,mode:l,anchorX:c}=e;const u=$I(NP),d=(0,r.useId)(),h=(0,r.useCallback)((e=>{u.set(e,!0);for(const t of u.values())if(!t)return;s&&s()}),[u,s]),f=(0,r.useMemo)((()=>({id:d,initial:n,isPresent:i,custom:o,onExitComplete:h,register:e=>(u.set(e,!1),()=>u.delete(e))})),a?[Math.random(),h]:[i,h]);return(0,r.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[i]),r.useEffect((()=>{!i&&!u.size&&s&&s()}),[i]),"popLayout"===l&&(t=(0,wS.jsx)(CP,{isPresent:i,anchorX:c,children:t})),(0,wS.jsx)(kT.Provider,{value:f,children:t})};function NP(){return new Map}const IP=e=>e.key||"";function AP(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}const OP=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:a="sync",propagate:l=!1,anchorX:c="left"}=e;const[u,d]=CT(l),h=(0,r.useMemo)((()=>AP(t)),[t]),f=l&&!u?[]:h.map(IP),p=(0,r.useRef)(!0),m=(0,r.useRef)(h),g=$I((()=>new Map)),[y,v]=(0,r.useState)(h),[b,x]=(0,r.useState)(h);mI((()=>{p.current=!1,m.current=h;for(let e=0;e<b.length;e++){const t=IP(b[e]);f.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}}),[b,f.length,f.join("-")]);const w=[];if(h!==y){let e=[...h];for(let t=0;t<b.length;t++){const n=b[t],r=IP(n);f.includes(r)||(e.splice(t,0,n),w.push(n))}return"wait"===a&&w.length&&(e=w),x(AP(e)),v(h),null}const{forceRender:_}=(0,r.useContext)(TT);return(0,wS.jsx)(wS.Fragment,{children:b.map((e=>{const t=IP(e),r=!(l&&!u)&&(h===b||f.includes(t));return(0,wS.jsx)(TP,{isPresent:r,initial:!(p.current&&!i)&&void 0,custom:n,presenceAffectsLayout:o,mode:a,onExitComplete:r?void 0:()=>{if(!g.has(t))return;g.set(t,!0);let e=!0;g.forEach((t=>{t||(e=!1)})),e&&(null===_||void 0===_||_(),x(m.current),l&&(null===d||void 0===d||d()),s&&s())},anchorX:c,children:e},t)}))})};function PP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const MP=r.forwardRef(PP);function DP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const RP=r.forwardRef(DP);function LP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const FP=r.forwardRef(LP);function BP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const UP=r.forwardRef(BP);function VP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"}))}const zP=r.forwardRef(VP);function $P(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"}))}const HP=r.forwardRef($P);function WP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const qP=r.forwardRef(WP),KP=()=>{const[e,t]=(0,r.useState)(!1),n=J(),{logout:i}=SS(),s=[{name:"Dashboard",icon:MP,path:"/admin/dashboard"},{name:"Users",icon:RP,path:"/admin/users"},{name:"Schedules",icon:RP,path:"/admin/schedules"},{name:"Sections",icon:RP,path:"/admin/sections"},{name:"Instructors",icon:GO,path:"/admin/teachers"},{name:"Students",icon:RP,path:"/admin/students"},{name:"Rooms",icon:FP,path:"/admin/rooms"},{name:"Reports",icon:RP,path:"/admin/reports"},{name:"Energy Usage",icon:RP,path:"/admin/energyusage"},{name:"Settings",icon:UP,path:"/admin/settings"}];return(0,wS.jsx)("div",{className:"fixed inset-y-0 left-0 bg-white border-r border-gray-200 transition-all duration-300 "+(e?"w-20":"w-64"),children:(0,wS.jsxs)("div",{className:"flex flex-col h-full",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 border-b border-gray-200",children:[!e&&(0,wS.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wS.jsx)(GO,{className:"w-8 h-8 text-indigo-600"}),(0,wS.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Admin"})]}),e&&(0,wS.jsx)(GO,{className:"w-8 h-8 text-indigo-600 mx-auto"}),(0,wS.jsx)("button",{onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e?(0,wS.jsx)(zP,{className:"w-5 h-5 text-gray-500"}):(0,wS.jsx)(HP,{className:"w-5 h-5 text-gray-500"})})]}),(0,wS.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:s.map((t=>{const r=n.pathname===t.path;return(0,wS.jsxs)(Te,{to:t.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(r?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"),title:e?t.name:"",children:[(0,wS.jsx)(t.icon,{className:"w-5 h-5 flex-shrink-0"}),!e&&(0,wS.jsx)("span",{className:"text-sm font-medium truncate",children:t.name})]},t.name)}))}),(0,wS.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,wS.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors "+(e?"justify-center":"w-full"),title:e?"Logout":"",children:[(0,wS.jsx)(qP,{className:"w-5 h-5"}),!e&&(0,wS.jsx)("span",{children:"Logout"})]})})]})})};function YP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const GP=r.forwardRef(YP);function XP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const QP=r.forwardRef(XP);function ZP(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const JP=r.forwardRef(ZP);function eM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const tM=r.forwardRef(eM);function nM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const rM=r.forwardRef(nM);function iM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M15 3.75H9v16.5h6V3.75ZM16.5 20.25h3.375c1.035 0 1.875-.84 1.875-1.875V5.625c0-1.036-.84-1.875-1.875-1.875H16.5v16.5ZM4.125 3.75H7.5v16.5H4.125a1.875 1.875 0 0 1-1.875-1.875V5.625c0-1.036.84-1.875 1.875-1.875Z"}))}const sM=r.forwardRef(iM);function oM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),r.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const aM=r.forwardRef(oM);function lM(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function cM(e){return lM(e,Date.now())}function uM(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function dM(e,t){const n=uM(e),r=uM(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}Math.pow(10,8);const hM=6048e5,fM=6e4,pM=36e5,mM=43200;function gM(e,t){const n=uM(e),r=uM(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function yM(e){const t=uM(e);return t.setHours(23,59,59,999),t}function vM(e){const t=uM(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function bM(e){const t=uM(e);return+yM(t)===+vM(t)}function xM(e,t){const n=uM(e),r=uM(t),i=dM(n,r),s=Math.abs(gM(n,r));let o;if(s<1)o=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let t=dM(n,r)===-i;bM(uM(e))&&1===s&&1===dM(e,r)&&(t=!1),o=i*(s-Number(t))}return 0===o?0:o}function wM(e,t){return+uM(e)-+uM(t)}function _M(e,t,n){const r=wM(e,t)/1e3;return(i=n?.roundingMethod,e=>{const t=(i?Math[i]:Math.trunc)(e);return 0===t?0:t})(r);var i}const SM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function EM(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const jM={date:EM({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:EM({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:EM({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},kM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function CM(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const TM={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:CM({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:CM({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:CM({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:CM({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:CM({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function NM(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,(e=>e.test(o))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,(e=>e.test(o)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(o.length)}}}const IM={ordinalNumber:(AM={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(AM.matchPattern);if(!n)return null;const r=n[0],i=e.match(AM.parsePattern);if(!i)return null;let s=AM.valueCallback?AM.valueCallback(i[0]):i[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:NM({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:NM({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:NM({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:NM({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:NM({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var AM;const OM={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=SM[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:jM,formatRelative:(e,t,n,r)=>kM[e],localize:TM,match:IM,options:{weekStartsOn:0,firstWeekContainsDate:1}};let PM={};function MM(){return PM}function DM(e){const t=uM(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function RM(e,t,n){const r=MM(),i=n?.locale??r.locale??OM,s=dM(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:s});let a,l;s>0?(a=uM(t),l=uM(e)):(a=uM(e),l=uM(t));const c=_M(l,a),u=(DM(l)-DM(a))/1e3,d=Math.round((c-u)/60);let h;if(d<2)return n?.includeSeconds?c<5?i.formatDistance("lessThanXSeconds",5,o):c<10?i.formatDistance("lessThanXSeconds",10,o):c<20?i.formatDistance("lessThanXSeconds",20,o):c<40?i.formatDistance("halfAMinute",0,o):c<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):0===d?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",d,o);if(d<45)return i.formatDistance("xMinutes",d,o);if(d<90)return i.formatDistance("aboutXHours",1,o);if(d<1440){const e=Math.round(d/60);return i.formatDistance("aboutXHours",e,o)}if(d<2520)return i.formatDistance("xDays",1,o);if(d<mM){const e=Math.round(d/1440);return i.formatDistance("xDays",e,o)}if(d<86400)return h=Math.round(d/mM),i.formatDistance("aboutXMonths",h,o);if(h=xM(l,a),h<12){const e=Math.round(d/mM);return i.formatDistance("xMonths",e,o)}{const e=h%12,t=Math.trunc(h/12);return e<3?i.formatDistance("aboutXYears",t,o):e<9?i.formatDistance("overXYears",t,o):i.formatDistance("almostXYears",t+1,o)}}function LM(e,t){return RM(e,cM(e),t)}const FM=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)({totalUsers:0,totalStudents:0,totalTeachers:0,totalSubjects:0,activeClasses:0}),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"teachers"),n=((await vg(e)).docs.map((e=>({id:e.id,...e.data()}))),hm(bS,"teachers")),r=await vg(n),i=await Promise.all(r.docs.map((async e=>{const t=e.data(),n=t.subjects?await Promise.all(t.subjects.map((async e=>{const t=await gg(fm(bS,"teachers",e));return t.exists()?{id:t.id,...t.data()}:null}))):[],r=t.schedules?t.schedules.map((e=>{var n;return{...e,subject:(null===(n=t.subjects.find((t=>t.id===e.subject)))||void 0===n?void 0:n.name)||e.subject}})):[];return{id:e.id,...t,fullName:t.fullName||t.name||"Unknown Teacher",name:t.name||t.fullName||"Unknown Teacher",subjects:n.filter(Boolean),schedules:r}})));t(i)}catch(dv){console.error("Error fetching teachers data:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to fetch teachers data"})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const t=hm(bS,"users"),n=hm(bS,"students"),r=hm(bS,"teachers"),i=hm(bS,"subjects"),s=hm(bS,"classes"),[o,a,l,c,u]=await Promise.all([vg(t),vg(n),vg(r),vg(i),Zm(s,eg("status","==","active"))]),d=Zm(s,eg("status","==","active")),f=await vg(d);h({totalUsers:o.size,totalStudents:a.size,totalTeachers:l.size,totalSubjects:c.size,activeClasses:f.size});const m=Zm(hm(bS,"recentactivities"),rg("timestamp","desc"),sg(10)),g=(await vg(m)).docs.map((e=>{const t=e.data();return{id:e.id,type:t.type,title:t.title,description:t.description,timestamp:t.timestamp.toDate(),icon:void 0}})).map((e=>({...e,icon:b(e.type)})));p(g),e.length>0&&await y(e[0])}catch(dv){console.error("Error fetching dashboard data:",dv),SA().fire({icon:"error",title:"Fetch Error",text:"Unable to load dashboard data. Please try again later."})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"teachers"),t=await vg(e),n=await Promise.all(t.docs.map((async e=>{const t={id:e.id,...e.data()},n=Zm(hm(bS,"users"),eg("id","==",e.id)),r=await vg(n);if(!r.empty){const e=r.docs[0].data();return{...t,...e}}return t})));g(n.filter((e=>"instructor"===e.role)))}catch(dv){console.error("Error fetching instructors:",dv),SA().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch instructor details"})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"teachers"),t=await vg(e),n=[],r=[],i=new Map;for(const o of t.docs){const e=o.data();e.subjects&&Array.isArray(e.subjects)&&n.push(...e.subjects)}const s=n.map((async e=>{try{const t=fm(bS,"teachers",e),n=await gg(t);if(n.exists()){const{id:t,...r}=n.data();i.set(e,{id:n.id,...r})}}catch(dv){console.error(`Error fetching subject ${e}:`,dv)}}));await Promise.all(s);for(const o of t.docs){const e=o.data();if(e.schedules&&Array.isArray(e.schedules)){const t=e.schedules.map((t=>{const n=t.subject?i.get(t.subject):void 0;return{day:t.day||"N/A",startTime:t.startTime||"N/A",endTime:t.endTime||"N/A",section:t.section||"N/A",room:t.room||"",teacherName:e.name||"Unknown Teacher",subject:n||t.subject||"N/A"}}));r.push(...t)}}const a=[...new Set(n)],c=r.reduce(((e,t)=>e.find((e=>e.day===t.day&&e.startTime===t.startTime&&e.endTime===t.endTime))?e:e.concat([t])),[]);o(a),l(c)}catch(dv){console.error("Error fetching teacher details:",dv),SA().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch teacher subjects and schedules"})}})()}),[]);const y=async e=>{try{var t;const n=fm(bS,"teachers",e.id),r=(await gg(n)).data();if(!r)throw new Error("Teacher data not found");const s=(null===(t=r.subjects)||void 0===t?void 0:t.length)>0?Promise.all(r.subjects.map((async e=>{try{const t=await gg(fm(bS,"subjects",e));return t.exists()?{id:t.id,...t.data()}:null}catch(t){return console.error(`Error fetching subject ${e}:`,t),null}}))).then((e=>e.filter((e=>null!==e)))):Promise.resolve([]),a=r.schedules?r.schedules.map((e=>{var t,n;return{...e,subject:(null===(t=r.subjects)||void 0===t||null===(n=t.find((t=>t.id===e.subject)))||void 0===n?void 0:n.name)||e.subject}})):[],[c,u]=await Promise.all([s,a]),d={id:e.id,fullName:r.fullName||r.name||"Unknown Teacher",name:r.name||r.fullName||"Unknown Teacher",email:r.email,department:r.department||"Unassigned",role:"instructor",subjects:c,schedules:u,uid:r.uid};i(d),o(c.map((e=>e.id))),l(u)}catch(dv){console.error("Error fetching teacher details:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to load teacher details"})}},v=(e,t,n,r)=>(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"\n        p-6 rounded-2xl shadow-lg \n        bg-white text-gray-800\n        flex items-center space-x-4\n        transform transition-all hover:scale-105\n      ",children:[(0,wS.jsx)("div",{className:`p-4 rounded-full ${r} bg-opacity-20 text-opacity-80`,children:n}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:e}),(0,wS.jsx)("p",{className:"text-2xl font-bold",children:t})]})]}),b=e=>{switch(e){case"user_added":return(0,wS.jsx)(GP,{className:"w-5 h-5 text-blue-500"});case"class_created":return(0,wS.jsx)(EO,{className:"w-5 h-5 text-green-500"});case"subject_updated":return(0,wS.jsx)(QP,{className:"w-5 h-5 text-purple-500"});case"teacher_assigned":return(0,wS.jsx)(kO,{className:"w-5 h-5 text-indigo-500"});default:return(0,wS.jsx)(JP,{className:"w-5 h-5 text-gray-500"})}};return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100 transition-colors duration-300",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${c?"ml-20":"ml-64"} overflow-y-auto`,children:(0,wS.jsxs)("div",{className:"overflow-y-auto max-h-screen p-8 space-y-8",children:[(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,wS.jsx)("h1",{className:"text-4xl font-extrabold mb-4 \r bg-clip-text text-transparent \r bg-gradient-to-r \r from-blue-600 via-indigo-500 to-purple-600\r ",children:"Admin Dashboard"}),(0,wS.jsx)("p",{className:"text-lg text-gray-600",children:"Comprehensive overview of your institution's performance"})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-4 gap-6 mb-8",children:[v("Total Users",d.totalUsers,(0,wS.jsx)(kO,{className:"w-8 h-8 text-blue-500"}),"bg-blue-100"),v("Total Students",d.totalStudents,(0,wS.jsx)(EO,{className:"w-8 h-8 text-green-500"}),"bg-green-100"),v("Total Teachers",d.totalTeachers,(0,wS.jsx)(QP,{className:"w-8 h-8 text-purple-500"}),"bg-purple-100"),v("Active Classes",d.activeClasses,(0,wS.jsx)(uP,{className:"w-8 h-8 text-red-500"}),"bg-red-100")]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},className:"\n        bg-white \n        rounded-xl \n        shadow-md \n        p-6 \n        mb-6\n      ",children:[(0,wS.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activities"}),f.length>0?(0,wS.jsx)("div",{className:"space-y-4",children:(0,wS.jsx)(OP,{children:f.map((e=>(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},whileHover:{scale:1.02},className:"\n                  bg-gray-50 \n                  p-4 \n                  rounded-lg \n                  flex \n                  items-center \n                  justify-between\n                  hover:bg-gray-100\n                  transition\n                ",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-4",children:[e.icon,(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"font-medium",children:e.title}),(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,wS.jsx)("div",{className:"text-xs font-light text-gray-500",children:LM(e.timestamp,{addSuffix:!0})})]},e.id)))})}):(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,wS.jsx)("p",{className:"text-center text-gray-500",children:"No recent activities"})},"no-activities")]}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},className:"\n                  rounded-2xl p-6 \n                  bg-white border border-gray-200\n                  shadow-lg\n                ",children:[(0,wS.jsxs)("h2",{className:"text-2xl font-semibold mb-6 flex items-center justify-center",children:[(0,wS.jsx)(kO,{className:"w-8 h-8 mr-3 text-indigo-600"}),"Teachers"]}),(0,wS.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:e.map((e=>(0,wS.jsx)(dA.div,{whileHover:{scale:1.03},className:"\n                        p-4 rounded-lg cursor-pointer transition-all \n                        bg-gray-100 hover:bg-gray-200\n                        border\n                        border-gray-200\n                      ",onClick:()=>y(e),children:(0,wS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wS.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold shadow-md",children:e.name.charAt(0)}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h4",{className:"font-semibold",children:e.name}),(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:e.department})]})]})},e.id)))})]}),(0,wS.jsx)(dA.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"\n                  rounded-2xl p-6 \n                  bg-white border border-gray-200\n                  shadow-lg\n                  min-h-[600px]\n                ",children:n?(0,wS.jsxs)("div",{className:"space-y-6",children:[(0,wS.jsxs)("div",{className:"flex flex-col items-center text-center border-b pb-6 \r border-gray-200",children:[(0,wS.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br \r from-indigo-500 to-purple-600 flex items-center \r justify-center text-white font-bold text-4xl \r shadow-2xl mb-4",children:n.name.charAt(0)}),(0,wS.jsx)("h2",{className:"text-2xl font-bold \r bg-clip-text text-transparent \r bg-gradient-to-r \r from-blue-600 via-indigo-500 to-purple-600",children:n.name}),(0,wS.jsx)("p",{className:"text-sm mt-2 text-gray-600",children:n.department})]}),(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,wS.jsx)(tM,{className:"w-6 h-6 mr-3 text-indigo-600"}),"Schedules"]}),a.length>0?(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(((e,t)=>(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-all",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(rM,{className:"w-5 h-5 text-indigo-500"}),(0,wS.jsx)("span",{className:"font-semibold text-gray-700",children:e.day})]}),(0,wS.jsx)("span",{className:"text-sm text-gray-500",children:e.teacherName})]}),(0,wS.jsxs)("div",{className:"space-y-2",children:[(0,wS.jsxs)("div",{className:"flex justify-between",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(tM,{className:"w-4 h-4 text-gray-500"}),(0,wS.jsxs)("span",{className:"text-sm",children:["Start: ",e.startTime]})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(tM,{className:"w-4 h-4 text-gray-500"}),(0,wS.jsxs)("span",{className:"text-sm",children:["End: ",e.endTime]})]})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(sM,{className:"w-4 h-4 text-gray-500"}),(0,wS.jsxs)("span",{className:"text-sm",children:["Section: ",e.section]})]}),e.room&&(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(aM,{className:"w-4 h-4 text-gray-500"}),(0,wS.jsxs)("span",{className:"text-sm",children:["Room: ",e.room]})]}),e.subject&&(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(QP,{className:"w-4 h-4 text-gray-500"}),(0,wS.jsxs)("span",{className:"text-sm",children:["Subject: ","object"===typeof e.subject?e.subject.name:e.subject]})]})]})]},t)))}):(0,wS.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,wS.jsx)("p",{children:"No schedules found"})})]})]}):(0,wS.jsx)("div",{className:"flex items-center justify-center h-full text-center",children:(0,wS.jsx)("p",{className:"text-gray-500 italic",children:"Select a teacher to view details"})})})]})]})})]})},BM=e=>{let{children:t,roles:n}=e;const{currentUser:r}=SS();if(!r)return(0,wS.jsx)(ge,{to:"/login",replace:!0});if(n&&!n.includes(r.role)){const e={admin:"/admin/dashboard",instructor:"/instructor/dashboard",student:"/students/dashboard"};return(0,wS.jsx)(ge,{to:e[r.role]||"/login",replace:!0})}return t},UM=()=>{const[e,t]=(0,r.useState)({fullName:"",idNumber:"",email:"",password:"",confirmPassword:""}),[n,i]=(0,r.useState)(!1),s=te(),o=(e,n)=>{t((t=>({...t,[e]:n})))};return(0,wS.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,wS.jsx)(dA.div,{className:"w-full max-w-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,wS.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 sm:p-12",children:[(0,wS.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,wS.jsx)(dA.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:(0,wS.jsx)(fA,{className:"w-14 h-14 text-indigo-600 mb-4"})}),(0,wS.jsx)(dA.h1,{className:"text-3xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Admin Registration"}),(0,wS.jsx)("p",{className:"text-gray-500",children:"Create an admin account"})]}),(0,wS.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0);try{if(e.password!==e.confirmPassword)throw new Error("Passwords do not match");const t=await ls(vS,e.email,e.password);await bg(fm(bS,"users",t.user.uid),{uid:t.user.uid,fullName:e.fullName,idNumber:e.idNumber,email:e.email,role:"admin",createdAt:(new Date).toISOString()}),SA().fire({icon:"success",title:"Admin Registration Successful!",text:"Welcome to Smart EcoLock System",showConfirmButton:!1,timer:2e3,background:"#f8fafc",iconColor:"#3b82f6"}),s("/login")}catch(dv){console.error("Admin Registration error:",dv),SA().fire({icon:"error",title:"Admin Registration Failed",text:dv instanceof Error?dv.message:"An error occurred",confirmButtonColor:"#3b82f6",background:"#f8fafc"})}finally{i(!1)}},className:"space-y-6",children:[(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,wS.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Full Name"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"text",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.fullName,onChange:e=>o("fullName",e.target.value),required:!0}),e.fullName&&(0,wS.jsx)(wA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,wS.jsx)("label",{className:"block text-lg font-medium mb-2",children:"ID Number"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"text",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.idNumber,onChange:e=>o("idNumber",e.target.value),required:!0}),e.idNumber&&(0,wS.jsx)(wA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:[(0,wS.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Email"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"email",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.email,onChange:e=>o("email",e.target.value),required:!0}),e.email.includes("@")&&(0,wS.jsx)(wA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7},children:[(0,wS.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Password"}),(0,wS.jsx)("input",{type:"password",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.password,onChange:e=>o("password",e.target.value),required:!0})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8},children:[(0,wS.jsx)("label",{className:"block text-lg font-medium mb-2",children:"Confirm Password"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"password",className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500",value:e.confirmPassword,onChange:e=>o("confirmPassword",e.target.value),required:!0}),e.confirmPassword===e.password&&e.confirmPassword&&(0,wS.jsx)(wA,{className:"w-5 h-5 text-green-500 absolute right-3 top-1/2 transform -translate-y-1/2"})]})]}),(0,wS.jsx)(dA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.9},children:(0,wS.jsxs)("button",{type:"submit",disabled:n,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold p-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50",children:[n?(0,wS.jsx)("span",{className:"animate-spin",children:(0,wS.jsx)(fA,{className:"w-5 h-5"})}):(0,wS.jsx)(fA,{className:"w-5 h-5"}),"Register Admin"]})}),(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-center mt-4",children:(0,wS.jsxs)("p",{className:"text-gray-500",children:["Already have an account?"," ",(0,wS.jsx)(Te,{to:"/login",className:"text-indigo-600 hover:text-indigo-800 font-semibold hover:underline",children:"Login Here"})]})})]})]})})})};function VM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"}))}const zM=r.forwardRef(VM),$M=e=>{var t,n,i,s;let{instructorfullName:o}=e;const{currentUser:a}=SS(),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=Zm(hm(bS,"teachers"),eg("fullName","==",o)),t=await vg(e);if(t.docs.length>0){const e=t.docs[0].data(),n={id:t.docs[0].id,name:e.fullName,email:e.email,department:e.department,subjects:e.subjects||[],schedules:e.schedules||[],sections:e.sections||[]};c(n);const r=Zm(hm(bS,"teachers"),eg("instructor","==",o)),i=await vg(r),s=await Promise.all(i.docs.map((async e=>{const t={id:e.id,...e.data()},n=Zm(hm(bS,"students"),eg("section","==",t.name),eg("course","==",t.course),eg("subject","==",t.subjectCode)),r=await vg(n);return t.students=r.docs.map((e=>({id:e.id,...e.data()}))),t})));d(s)}else SA().fire("Error","Instructor not found.","error")}catch(dv){SA().fire("Error",dv instanceof Error?dv.message:"Failed to load data","error")}})()}),[o]);const x=async(e,t)=>{try{await xg(fm(bS,"students",e),{attendance:t,timeIn:t?(new Date).toISOString():null}),d((n=>n.map((n=>({...n,students:n.students.map((n=>n.id===e?{...n,attendance:t}:n))}))))),SA().fire({icon:"success",title:"Updated!",showConfirmButton:!1,timer:1500})}catch(dv){SA().fire("Error",dv instanceof Error?dv.message:"Update failed","error")}};return(0,wS.jsx)("div",{className:"flex min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,wS.jsx)("div",{className:"ml-64 flex-1",children:(0,wS.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,wS.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,wS.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[(0,wS.jsx)(oP,{className:"w-8 h-8 text-indigo-600"}),p?(0,wS.jsxs)(wS.Fragment,{children:[(null===l||void 0===l||null===(t=l.subjects)||void 0===t||null===(n=t.find((e=>e.code===p)))||void 0===n?void 0:n.name)||"Subject"," - Attendance"]}):"Select a Subject"]})}),p&&g?(0,wS.jsxs)(wS.Fragment,{children:[(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:u.filter((e=>e.subjectCode===p)).map((e=>(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-xl shadow-sm cursor-pointer transition-all "+(h===e.id?"ring-2 ring-indigo-500":"hover:shadow-md"),onClick:()=>f((t=>t===e.id?"":e.id)),children:[(0,wS.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,wS.jsx)(zM,{className:"w-6 h-6 text-indigo-500"}),(0,wS.jsx)("h3",{className:"text-xl font-semibold",children:e.name})]}),(0,wS.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,wS.jsxs)("p",{children:[(0,wS.jsx)("span",{className:"font-medium",children:"Course:"})," ",e.course]}),(0,wS.jsxs)("p",{children:[(0,wS.jsx)("span",{className:"font-medium",children:"Subject:"})," ",e.subjectCode]}),(0,wS.jsxs)("p",{children:[(0,wS.jsx)("span",{className:"font-medium",children:"Students:"})," ",e.students.length,"/",e.maxStudents]}),(0,wS.jsxs)("p",{children:[(0,wS.jsx)("span",{className:"font-medium",children:"Schedule:"})," ",g.days.join(", ")," ",g.startTime," -"," ",g.endTime]})]})]},e.id)))}),h&&(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,wS.jsxs)("h3",{className:"text-xl font-semibold mb-6 flex items-center gap-3",children:[(0,wS.jsx)(iP,{className:"w-6 h-6 text-gray-500"}),"Students in ",null===(i=u.find((e=>e.id===h)))||void 0===i?void 0:i.name]}),(0,wS.jsx)("div",{className:"grid gap-4",children:null===(s=u.find((e=>e.id===h)))||void 0===s?void 0:s.students.map((e=>(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,wS.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"font-medium",children:e.name}),(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.studentId]}),(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["Section: ",e.section]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["Course: ",e.course]}),(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["Year: ",e.year]}),e.timeIn&&(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["Last attended:"," ",new Date(e.timeIn).toLocaleString()]})]})]}),(0,wS.jsxs)("div",{className:"flex gap-2",children:[(0,wS.jsx)("button",{onClick:()=>x(e.id,!0),className:`p-2 rounded-lg ${e.attendance?"bg-green-500":"bg-gray-200"} hover:bg-green-600`,children:(0,wS.jsx)(wA,{className:"w-5 h-5 text-white"})}),(0,wS.jsx)("button",{onClick:()=>x(e.id,!1),className:`p-2 rounded-lg ${e.attendance?"bg-gray-200":"bg-red-500"} hover:bg-red-600`,children:(0,wS.jsx)(gP,{className:"w-5 h-5 text-white"})})]})]},e.id)))})]})]}):(0,wS.jsxs)("div",{className:"text-center text-gray-500 py-12",children:[(0,wS.jsx)(QP,{className:"w-16 h-16 mx-auto mb-4"}),(0,wS.jsx)("h2",{className:"text-xl font-semibold",children:"Select a Subject and Schedule to View Sections"})]})]})})})};function HM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M11.484 2.17a.75.75 0 0 1 1.032 0 11.209 11.209 0 0 0 7.877 3.08.75.75 0 0 1 .722.515 12.74 12.74 0 0 1 .635 3.985c0 5.942-4.064 10.933-9.563 12.348a.749.749 0 0 1-.374 0C6.314 20.683 2.25 15.692 2.25 9.75c0-1.39.223-2.73.635-3.985a.75.75 0 0 1 .722-.516l.143.001c2.996 0 5.718-1.17 7.734-3.08ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75ZM12 15a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75v-.008a.75.75 0 0 0-.75-.75H12Z",clipRule:"evenodd"}))}const WM=r.forwardRef(HM);function qM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3.792 2.938A49.069 49.069 0 0 1 12 2.25c2.797 0 5.54.236 8.209.688a1.857 1.857 0 0 1 1.541 1.836v1.044a3 3 0 0 1-.879 2.121l-6.182 6.182a1.5 1.5 0 0 0-.439 1.061v2.927a3 3 0 0 1-1.658 2.684l-1.757.878A.75.75 0 0 1 9.75 21v-5.818a1.5 1.5 0 0 0-.44-1.06L3.13 7.938a3 3 0 0 1-.879-2.121V4.774c0-.897.64-1.683 1.542-1.836Z",clipRule:"evenodd"}))}const KM=r.forwardRef(qM);function YM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const GM=r.forwardRef(YM),XM=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,o]=(0,r.useState)("all"),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=Sg(Zm(hm(bS,"securityLogs"),rg("timestamp","desc")),(e=>{const n=e.docs.map((e=>({id:e.id,...e.data()})));t(n),i(!1)}),(e=>{console.error("Error fetching security logs:",e),SA().fire({icon:"error",title:"Error",text:"Failed to fetch security logs. Please try again later."}),i(!1)}));return()=>e()}),[]);const f=e.filter((e=>{const t="all"===s||e.status===s,n=e.event.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase())||e.user.toLowerCase().includes(a.toLowerCase())||e.deviceId&&e.deviceId.toLowerCase().includes(a.toLowerCase());return t&&n})),p=e=>{switch(e){case"success":return"bg-green-100 text-green-800 border-green-300";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"error":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},m=e=>{switch(e){case"success":return(0,wS.jsx)(fA,{className:"h-5 w-5 text-green-600"});case"warning":return(0,wS.jsx)(WM,{className:"h-5 w-5 text-yellow-600"});case"error":return(0,wS.jsx)(gP,{className:"h-5 w-5 text-red-600"});default:return(0,wS.jsx)(WM,{className:"h-5 w-5 text-gray-600"})}},g=e=>{const t=e.toDate();return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)};return(0,wS.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,wS.jsxs)("div",{className:"p-8 h-full flex flex-col",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,wS.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Security Logs"}),(0,wS.jsxs)("div",{className:"flex space-x-4",children:[(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsxs)("button",{onClick:()=>u(!c),className:"flex items-center px-4 py-2 bg-white rounded-lg shadow-sm hover:bg-gray-50 border border-gray-200",children:[(0,wS.jsx)(KM,{className:"h-5 w-5 text-gray-500 mr-2"}),(0,wS.jsx)("span",{className:"capitalize",children:s})]}),c&&(0,wS.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-10 border border-gray-200",children:["all","success","warning","error"].map((e=>(0,wS.jsx)("button",{onClick:()=>{o(e),u(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg capitalize "+(s===e?"bg-indigo-50 text-indigo-700":""),children:e},e)))})]}),(0,wS.jsx)("div",{className:"relative",children:(0,wS.jsx)("input",{type:"text",placeholder:"Search logs...",value:a,onChange:e=>l(e.target.value),className:"w-64 px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"})})]})]}),(0,wS.jsx)("div",{className:"flex-1 bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:(0,wS.jsx)("div",{className:"overflow-x-auto",children:(0,wS.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,wS.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 240px)"},children:n?(0,wS.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,wS.jsx)(bA,{className:"h-8 w-8 text-gray-400 animate-spin"})}):0===f.length?(0,wS.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,wS.jsx)(WM,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,wS.jsx)("p",{className:"text-gray-500 text-lg",children:"No security logs found"})]}):(0,wS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,wS.jsx)("thead",{className:"bg-gray-50",children:(0,wS.jsxs)("tr",{children:[(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,wS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((e=>(0,wS.jsxs)(dA.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition-colors",children:[(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${p(e.status)}`,children:[m(e.status),(0,wS.jsx)("span",{className:"ml-1.5 capitalize",children:e.status})]})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.event})}),(0,wS.jsx)("td",{className:"px-6 py-4",children:(0,wS.jsx)("div",{className:"text-sm text-gray-500 max-w-md truncate",children:e.description})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)(GM,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,wS.jsx)("div",{className:"text-sm text-gray-900",children:e.user})]})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)(rM,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,wS.jsx)("div",{className:"text-sm text-gray-500",children:g(e.timestamp)})]})})]},e.id)))})]})})})})})]})})]})};function QM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.5 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5h16.5a.75.75 0 0 0 0-1.5h-.75V3.75a.75.75 0 0 0 0-1.5h-15ZM9 6a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm-.75 3.75A.75.75 0 0 1 9 9h1.5a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM9 12a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H9Zm3.75-5.25A.75.75 0 0 1 13.5 6H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM13.5 9a.75.75 0 0 0 0 1.5H15A.75.75 0 0 0 15 9h-1.5Zm-.75 3.75a.75.75 0 0 1 .75-.75H15a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75ZM9 19.5v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 9 19.5Z",clipRule:"evenodd"}))}const ZM=r.forwardRef(QM);function JM(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const eD=r.forwardRef(JM);function tD(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z",clipRule:"evenodd"}))}const nD=r.forwardRef(tD);function rD(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM6.166 5.106a.75.75 0 0 1 0 1.06 8.25 8.25 0 1 0 11.668 0 .75.75 0 1 1 1.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const iD=r.forwardRef(rD);function sD(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const oD=r.forwardRef(sD);function aD(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),r.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const lD=r.forwardRef(aD);function cD(e){return e+.5|0}const uD=(e,t,n)=>Math.max(Math.min(e,n),t);function dD(e){return uD(cD(2.55*e),0,255)}function hD(e){return uD(cD(255*e),0,255)}function fD(e){return uD(cD(e/2.55)/100,0,1)}function pD(e){return uD(cD(100*e),0,100)}const mD={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gD=[..."0123456789ABCDEF"],yD=e=>gD[15&e],vD=e=>gD[(240&e)>>4]+gD[15&e],bD=e=>(240&e)>>4===(15&e);function xD(e){var t=(e=>bD(e.r)&&bD(e.g)&&bD(e.b)&&bD(e.a))(e)?yD:vD;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const wD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _D(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function SD(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function ED(e,t,n){const r=_D(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function jD(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),o=(i+s)/2;let a,l,c;return i!==s&&(c=i-s,l=o>.5?c/(2-i-s):c/(i+s),a=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),a=60*a+.5),[0|a,l||0,o]}function kD(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(hD)}function CD(e,t,n){return kD(_D,e,t,n)}function TD(e){return(e%360+360)%360}function ND(e){const t=wD.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?dD(+t[5]):hD(+t[5]));const i=TD(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return kD(ED,e,t,n)}(i,s,o):"hsv"===t[1]?function(e,t,n){return kD(SD,e,t,n)}(i,s,o):CD(i,s,o),{r:n[0],g:n[1],b:n[2],a:r}}const ID={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},AD={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let OD;function PD(e){OD||(OD=function(){const e={},t=Object.keys(AD),n=Object.keys(ID);let r,i,s,o,a;for(r=0;r<t.length;r++){for(o=a=t[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,ID[s]);s=parseInt(AD[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),OD.transparent=[0,0,0,0]);const t=OD[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const MD=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const DD=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,RD=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function LD(e,t,n){if(e){let r=jD(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=CD(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function FD(e,t){return e?Object.assign(t||{},e):e}function BD(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=hD(e[3]))):(t=FD(e,{r:0,g:0,b:0,a:1})).a=hD(t.a),t}function UD(e){return"r"===e.charAt(0)?function(e){const t=MD.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?dD(e):uD(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?dD(n):uD(n,0,255)),r=255&(t[4]?dD(r):uD(r,0,255)),i=255&(t[6]?dD(i):uD(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):ND(e)}class VD{constructor(e){if(e instanceof VD)return e;const t=typeof e;let n;"object"===t?n=BD(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*mD[e[1]],g:255&17*mD[e[2]],b:255&17*mD[e[3]],a:5===n?17*mD[e[4]]:255}:7!==n&&9!==n||(t={r:mD[e[1]]<<4|mD[e[2]],g:mD[e[3]]<<4|mD[e[4]],b:mD[e[5]]<<4|mD[e[6]],a:9===n?mD[e[7]]<<4|mD[e[8]]:255})),t}(e)||PD(e)||UD(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=FD(this._rgb);return e&&(e.a=fD(e.a)),e}set rgb(e){this._rgb=BD(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${fD(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?xD(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=jD(e),n=t[0],r=pD(t[1]),i=pD(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${fD(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,o=2*s-1,a=n.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=RD(fD(e.r)),i=RD(fD(e.g)),s=RD(fD(e.b));return{r:hD(DD(r+n*(RD(fD(t.r))-r))),g:hD(DD(i+n*(RD(fD(t.g))-i))),b:hD(DD(s+n*(RD(fD(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new VD(this.rgb)}alpha(e){return this._rgb.a=hD(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=cD(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return LD(this._rgb,2,e),this}darken(e){return LD(this._rgb,2,-e),this}saturate(e){return LD(this._rgb,1,e),this}desaturate(e){return LD(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=jD(e);n[0]=TD(n[0]+t),n=CD(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function zD(){}const $D=(()=>{let e=0;return()=>e++})();function HD(e){return null===e||void 0===e}function WD(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function qD(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function KD(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function YD(e,t){return KD(e)?e:t}function GD(e,t){return"undefined"===typeof e?t:e}const XD=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function QD(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function ZD(e,t,n,r){let i,s,o;if(WD(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(qD(e))for(o=Object.keys(e),s=o.length,i=0;i<s;i++)t.call(n,e[o[i]],o[i])}function JD(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function eR(e){if(WD(e))return e.map(eR);if(qD(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=eR(e[n[i]]);return t}return e}function tR(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function nR(e,t,n,r){if(!tR(e))return;const i=t[e],s=n[e];qD(i)&&qD(s)?rR(i,s,r):t[e]=eR(s)}function rR(e,t,n){const r=WD(t)?t:[t],i=r.length;if(!qD(e))return e;const s=(n=n||{}).merger||nR;let o;for(let a=0;a<i;++a){if(o=r[a],!qD(o))continue;const t=Object.keys(o);for(let r=0,i=t.length;r<i;++r)s(t[r],e,o,n)}return e}function iR(e,t){return rR(e,t,{merger:sR})}function sR(e,t,n){if(!tR(e))return;const r=t[e],i=n[e];qD(r)&&qD(i)?iR(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=eR(i))}const oR={"":e=>e,x:e=>e.x,y:e=>e.y};function aR(e,t){const n=oR[t]||(oR[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function lR(e){return e.charAt(0).toUpperCase()+e.slice(1)}const cR=e=>"undefined"!==typeof e,uR=e=>"function"===typeof e,dR=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const hR=Math.PI,fR=2*hR,pR=fR+hR,mR=Number.POSITIVE_INFINITY,gR=hR/180,yR=hR/2,vR=hR/4,bR=2*hR/3,xR=Math.log10,wR=Math.sign;function _R(e,t,n){return Math.abs(e-t)<n}function SR(e){const t=Math.round(e);e=_R(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(xR(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function ER(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function jR(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function kR(e){return e*(hR/180)}function CR(e){return e*(180/hR)}function TR(e){if(!KD(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function NR(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*hR&&(s+=fR),{angle:s,distance:i}}function IR(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function AR(e,t){return(e-t+pR)%fR-hR}function OR(e){return(e%fR+fR)%fR}function PR(e,t,n,r){const i=OR(e),s=OR(t),o=OR(n),a=OR(s-i),l=OR(o-i),c=OR(i-s),u=OR(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function MR(e,t,n){return Math.max(t,Math.min(n,e))}function DR(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function RR(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const LR=(e,t,n,r)=>RR(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),FR=(e,t,n)=>RR(e,n,(r=>e[r][t]>=n));const BR=["push","pop","shift","splice","unshift"];function UR(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(BR.forEach((t=>{delete e[t]})),delete e._chartjs)}function VR(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const zR="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function $R(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n=s,r||(r=!0,zR.call(window,(()=>{r=!1,e.apply(t,n)})))}}const HR=e=>"start"===e?"left":"end"===e?"right":"center",WR=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function qR(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(LR(l,u,d).lo,n?r:LR(t,u,o.getPixelForValue(d)).lo),c){const e=l.slice(0,i+1).reverse().findIndex((e=>!HD(e[a.axis])));i-=Math.max(0,e)}i=MR(i,0,r-1)}if(p){let e=Math.max(LR(l,o.axis,h,!0).hi+1,n?0:LR(t,u,o.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!HD(e[a.axis])));e+=Math.max(0,t)}s=MR(e,i,r)-i}else s=r-i}return{start:i,count:s}}function KR(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const YR=e=>0===e||1===e,GR=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*fR/n),XR=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*fR/n)+1,QR={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*yR),easeOutSine:e=>Math.sin(e*yR),easeInOutSine:e=>-.5*(Math.cos(hR*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>YR(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>YR(e)?e:GR(e,.075,.3),easeOutElastic:e=>YR(e)?e:XR(e,.075,.3),easeInOutElastic(e){const t=.1125;return YR(e)?e:e<.5?.5*GR(2*e,t,.45):.5+.5*XR(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-QR.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*QR.easeInBounce(2*e):.5*QR.easeOutBounce(2*e-1)+.5};function ZR(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function JR(e){return ZR(e)?e:new VD(e)}function eL(e){return ZR(e)?e:new VD(e).saturate(.5).darken(.1).hexString()}const tL=["x","y","borderWidth","radius","tension"],nL=["color","borderColor","backgroundColor"];const rL=new Map;function iL(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=rL.get(n);return r||(r=new Intl.NumberFormat(e,t),rL.set(n,r)),r}(t,n).format(e)}const sL={values:e=>WD(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=xR(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),iL(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(xR(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?sL.numeric.call(this,e,t,n):""}};var oL={formatters:sL};const aL=Object.create(null),lL=Object.create(null);function cL(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function uL(e,t,n){return"string"===typeof t?rR(cL(e,t),n):rR(cL(e,""),t)}class dL{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>eL(t.backgroundColor),this.hoverBorderColor=(e,t)=>eL(t.borderColor),this.hoverColor=(e,t)=>eL(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return uL(this,e,t)}get(e){return cL(this,e)}describe(e,t){return uL(lL,e,t)}override(e,t){return uL(aL,e,t)}route(e,t,n,r){const i=cL(this,e),s=cL(this,n),o="_"+t;Object.defineProperties(i,{[o]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[r];return qD(e)?Object.assign({},t,e):GD(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var hL=new dL({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:nL},numbers:{type:"number",properties:tL}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:oL.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function fL(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function pL(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function mL(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function gL(e,t,n,r){yL(e,t,n,r,null)}function yL(e,t,n,r,i){let s,o,a,l,c,u,d,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*gR;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,fR):e.arc(n,r,m,0,fR),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=bR,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=bR,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,o=Math.cos(g+vR)*l,d=Math.cos(g+vR)*(i?i/2-c:l),a=Math.sin(g+vR)*l,h=Math.sin(g+vR)*(i?i/2-c:l),e.arc(n-d,r-a,c,g-hR,g-yR),e.arc(n+h,r-o,c,g-yR,g),e.arc(n+d,r+a,c,g,g+yR),e.arc(n-h,r+o,c,g+yR,g+hR),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=vR;case"rectRot":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+h,r-o),e.lineTo(n+d,r+a),e.lineTo(n-h,r+o),e.closePath();break;case"crossRot":g+=vR;case"cross":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+d,r+a),e.moveTo(n+h,r-o),e.lineTo(n-h,r+o);break;case"star":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+d,r+a),e.moveTo(n+h,r-o),e.lineTo(n-h,r+o),g+=vR,d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-a),e.lineTo(n+d,r+a),e.moveTo(n+h,r-o),e.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(n-o,r-a),e.lineTo(n+o,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function vL(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function bL(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function xL(e){e.restore()}function wL(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function _L(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function SL(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function EL(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function jL(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=WD(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),HD(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&EL(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),HD(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),SL(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function kL(e,t){const{x:n,y:r,w:i,h:s,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*hR,hR,!0),e.lineTo(n,r+s-o.bottomLeft),e.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,hR,yR,!0),e.lineTo(n+i-o.bottomRight,r+s),e.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,yR,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-yR,!0),e.lineTo(n+o.topLeft,r)}const CL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,TL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function NL(e,t){const n=(""+e).match(CL);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const IL=e=>+e||0;function AL(e,t){const n={},r=qD(t),i=r?Object.keys(t):t,s=qD(e)?r?n=>GD(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of i)n[o]=IL(s(o));return n}function OL(e){return AL(e,{top:"y",right:"x",bottom:"y",left:"x"})}function PL(e){return AL(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ML(e){const t=OL(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function DL(e,t){e=e||{},t=t||hL.font;let n=GD(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=GD(e.style,t.style);r&&!(""+r).match(TL)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:GD(e.family,t.family),lineHeight:NL(GD(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:GD(e.weight,t.weight),string:""};return i.string=function(e){return!e||HD(e.size)||HD(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function RL(e,t,n,r){let i,s,o,a=!0;for(i=0,s=e.length;i<s;++i)if(o=e[i],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&WD(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function LL(e,t){return Object.assign(Object.create(e),t)}function FL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=GL("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>FL([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>$L(n,r,(()=>function(e,t,n,r){let i;for(const s of t)if(i=GL(VL(s,e),n),"undefined"!==typeof i)return zL(e,i)?KL(n,r,e,i):i}(r,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>XL(e).includes(t),ownKeys:e=>XL(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function BL(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:UL(e,r),setContext:t=>BL(e,t,n,r),override:i=>BL(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>$L(e,t,(()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=e;let a=r[t];uR(a)&&o.isScriptable(t)&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||r);a.delete(e),zL(e,l)&&(l=KL(i._scopes,i,e,l));return l}(t,a,e,n));WD(a)&&a.length&&(a=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(qD(t[0])){const n=t,r=i._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=KL(r,i,e,l);t.push(BL(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));zL(t,a)&&(a=BL(a,i,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function UL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:uR(n)?n:()=>n,isIndexable:uR(r)?r:()=>r}}const VL=(e,t)=>e?e+lR(t):t,zL=(e,t)=>qD(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function $L(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function HL(e,t,n){return uR(e)?e(t,n):e}const WL=(e,t)=>!0===e?t:"string"===typeof e?aR(t,e):void 0;function qL(e,t,n,r,i){for(const s of t){const t=WL(n,s);if(t){e.add(t);const s=HL(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function KL(e,t,n,r){const i=t._rootScopes,s=HL(t._fallback,n,r),o=[...e,...i],a=new Set;a.add(r);let l=YL(a,o,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=YL(a,o,s,l,r),null!==l))&&FL(Array.from(a),[""],i,s,(()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(WD(i)&&qD(n))return n;return i||{}}(t,n,r))))}function YL(e,t,n,r,i){for(;n;)n=qL(e,t,n,r,i);return n}function GL(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function XL(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}const QL=Number.EPSILON||1e-14,ZL=(e,t)=>t<e.length&&!e[t].skip&&e[t],JL=e=>"x"===e?"y":"x";function eF(e,t,n,r){const i=e.skip?t:e,s=t,o=n.skip?t:n,a=IR(s,i),l=IR(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function tF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=JL(t),r=e.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=ZL(e,0);for(o=0;o<r;++o)if(a=l,l=c,c=ZL(e,o+1),l){if(c){const e=c[t]-l[t];i[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?wR(i[o-1])!==wR(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(e,t,n){const r=e.length;let i,s,o,a,l,c=ZL(e,0);for(let u=0;u<r-1;++u)l=c,c=ZL(e,u+1),l&&c&&(_R(t[u],0,QL)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=s*o*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=JL(n),i=e.length;let s,o,a,l=ZL(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=ZL(e,c+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a[`cp1${n}`]=i-s,a[`cp1${r}`]=u-s*t[c]),l&&(s=(l[n]-i)/3,a[`cp2${n}`]=i+s,a[`cp2${r}`]=u+s*t[c])}}(e,s,t)}function nF(e,t,n){return Math.max(Math.min(e,n),t)}function rF(e,t,n,r,i){let s,o,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)tF(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=eF(n,a,e[Math.min(s+1,o-(r?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,r,i,s,o,a=vL(e[0],t);for(n=0,r=e.length;n<r;++n)o=s,s=a,a=n<r-1&&vL(e[n+1],t),s&&(i=e[n],o&&(i.cp1x=nF(i.cp1x,t.left,t.right),i.cp1y=nF(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=nF(i.cp2x,t.left,t.right),i.cp2y=nF(i.cp2y,t.top,t.bottom)))}(e,n)}function iF(){return"undefined"!==typeof window&&"undefined"!==typeof document}function sF(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function oF(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const aF=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const lF=["top","right","bottom","left"];function cF(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=lF[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function uF(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=aF(n),s="border-box"===i.boxSizing,o=cF(i,"padding"),a=cF(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let o,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))o=i,a=s;else{const e=t.getBoundingClientRect();o=r.clientX-e.left,a=r.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const dF=e=>Math.round(10*e)/10;function hF(e,t,n,r){const i=aF(e),s=cF(i,"margin"),o=oF(i.maxWidth,e,"clientWidth")||mR,a=oF(i.maxHeight,e,"clientHeight")||mR,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&sF(e);if(s){const e=s.getBoundingClientRect(),o=aF(s),a=cF(o,"border","width"),l=cF(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,r=oF(o.maxWidth,s,"clientWidth"),i=oF(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||mR,maxHeight:i||mR}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=cF(i,"border","width"),t=cF(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=dF(Math.min(c,o,l.maxWidth)),u=dF(Math.min(u,a,l.maxHeight)),c&&!u&&(u=dF(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=dF(Math.floor(u*r))),{width:c,height:u}}function fF(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const pF=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};iF()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(zW){}return e}();function mF(e,t){const n=function(e,t){return aF(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function gF(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function yF(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function vF(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=gF(e,i,n),a=gF(i,s,n),l=gF(s,t,n),c=gF(o,a,n),u=gF(a,l,n);return gF(c,u,n)}function bF(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function xF(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function wF(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function _F(e){return"angle"===e?{between:PR,compare:AR,normalize:OR}:{between:DR,compare:(e,t)=>e-t,normalize:e=>e}}function SF(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function EF(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=_F(r),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=_F(r),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&o(a(t[d%l][r]),i,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,y,v=!1,b=null;const x=()=>v||l(i,y,m)&&0!==a(i,y),w=()=>!v||0===a(s,m)||l(s,y,m);for(let _=u,S=u;_<=d;++_)g=t[_%o],g.skip||(m=c(g[r]),m!==y&&(v=l(m,i,s),null===b&&x()&&(b=0===a(m,i)?_:S),null!==b&&w()&&(p.push(SF({start:b,end:_,loop:h,count:o,style:f})),b=null),S=_,y=m));return null!==b&&p.push(SF({start:b,end:d,loop:h,count:o,style:f})),p}function jF(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=EF(r[i],e.points,t);s.length&&n.push(...s)}return n}function kF(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=CF(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,d=t[0].start,h=d;function f(e,t,r,i){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,d=t%l)}}for(const p of t){d=a?d:p.start;let e,t=n[d%l];for(h=d+1;h<=p.end;h++){const s=n[h%l];e=CF(r.setContext(LL(i,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),TF(e,u)&&f(d,h-1,p.loop,u),t=s,u=e}d<h-1&&f(d,h-1,p.loop,u)}return c}(e,t,n,r):t}function CF(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function TF(e,t){if(!t)return!1;const n=[],r=function(e,t){return ZR(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}class NF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach((r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=zR.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var IF=new NF;const AF="transparent",OF={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=JR(e||AF),i=r.valid&&JR(t||AF);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class PF{constructor(e,t,n,r){const i=t[n];r=RL([e.to,r,i,e.from]);const s=RL([e.from,i,r]);this._active=!0,this._fn=e.fn||OF[e.type||typeof s],this._easing=QR[e.easing]||QR.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=RL([e.to,t,r,e.from]),this._from=RL([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||t<n),!this._active)return this._target[r]=o,void this._notify(!0);t<0?this._target[r]=i:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class MF{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!qD(e))return;const t=Object.keys(hL.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((r=>{const i=e[r];if(!qD(i))return;const s={};for(const e of t)s[e]=i[e];(WD(i.properties)&&i.properties||[r]).forEach((e=>{e!==r&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,o);continue}u.cancel()}d&&d.duration?(i[l]=u=new PF(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(IF.add(this._chart,n),!0):void 0}}function DF(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function RF(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function LF(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let o,a,l,c;if(null===t)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=e.values[l],KD(c)&&(s||0===t||wR(t)===wR(c))&&(t+=c)}return u||r.all?t:0}function FF(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function BF(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function UF(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function VF(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(s,o,r),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=BF(i,u,n),h[a]=s,h._top=UF(h,o,!0,r.type),h._bottom=UF(h,o,!1,r.type);(h._visualValues||(h._visualValues={}))[a]=s}}function zF(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function $F(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const HF=e=>"reset"===e||"none"===e,WF=(e,t)=>t?e:Object.assign({},e);class qF{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=FF(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&$F(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=GD(n.xAxisID,zF(e,"x")),s=t.yAxisID=GD(n.yAxisID,zF(e,"y")),o=t.rAxisID=GD(n.rAxisID,zF(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,i,s,o),c=t.vAxisID=r(a,s,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&UR(this._data,this),e._stacked&&$F(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(qD(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){UR(n,this);const e=this._cachedMeta;$F(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),BR.forEach((t=>{const n="_onData"+lR(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const o=r.apply(this,i);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...i)})),o}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=FF(t.vScale,t),t.stack!==n.stack&&(r=!0,$F(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(VF(this,t._parsed),t._stacked=FF(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=WD(r[e])?this.parseArrayData(n,r,e,t):qD(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(i()&&(u=!1),d=l);n._sorted=u}s&&VF(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,o=i.axis,a=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[o]:c||i.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:i.parse(aR(h,o),d),y:s.parse(aR(h,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return LF({keys:RF(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const o=r&&n._stacks[t.axis];r&&o&&(r.values=o,s=LF(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:RF(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let d,h;function f(){h=r[d];const t=h[o.axis];return!KD(h[e.axis])||c>t||u<t}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,e,h,a),!i));++d);if(i)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],KD(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return qD(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(GD(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=DF(e,n),i=DF(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,o,a),c=o;c<o+a;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return LL(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return LL(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,o=i[s],a=this.enableOptionSharing&&cR(n);if(o)return WF(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(hL.elements[e]),f=l.resolveNamedOptions(d,h,(()=>this.getContext(n,r,t)),u);return f.$shared&&(f.$shared=a,i[s]=Object.freeze(WF(f,a))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s=`animation-${t}`,o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(e,n,t))}const l=new MF(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||HF(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){HF(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!HF(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(i),o=e;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&$F(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class KF extends qF{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=qR(t,r,s);this._drawStart=o,this._drawCount=a,KR(t)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,o,a,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=s.axis,h=o.axis,{spanGaps:f,segment:p}=this.options,m=ER(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],f=g?n:{};if(x<t||x>=y){f.skip=!0;continue}const v=this.getParsed(x),w=HD(v[h]),_=f[d]=s.getPixelForValue(v[d],x),S=f[h]=i||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[h],x);f.skip=isNaN(_)||isNaN(S)||w,f.stop=x>0&&Math.abs(v[d]-b[d])>m,p&&(f.parsed=v,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":r)),g||this.updateElement(n,x,f,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function YF(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class GF{static override(e){Object.assign(GF.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return YF()}parse(){return YF()}format(){return YF()}add(){return YF()}diff(){return YF()}startOf(){return YF()}endOf(){return YF()}}var XF=GF;function QF(e,t,n,r){const{controller:i,data:s,_sorted:o}=e,a=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const o=a._reversePixels?FR:LR;if(!r){const r=o(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex((e=>!HD(e[t.axis])));r.lo-=Math.max(0,s);const o=n.slice(r.hi).findIndex((e=>!HD(e[t.axis])));r.hi+=Math.max(0,o)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=o(s,t,n-r),i=o(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function ZF(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=QF(s[a],t,o,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function JF(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return ZF(e,n,t,(function(n,o,a){(i||vL(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function eB(e,t,n,r,i,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return ZF(e,n,t,(function(n,c,u){const d=n.inRange(t.x,t.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(h))&&!d)return;const f=a(t,h);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function tB(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?eB(e,t,n,r,i,s):function(e,t,n,r){let i=[];return ZF(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],r),{angle:l}=NR(e,{x:t.x,y:t.y});PR(l,o,a)&&i.push({element:e,datasetIndex:n,index:s})})),i}(e,t,n,i):[]}function nB(e,t,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return ZF(e,n,t,((e,r,l)=>{e[o]&&e[o](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,i))})),r&&!a?[]:s}var rB={evaluateInteractionItems:ZF,modes:{index(e,t,n,r){const i=uF(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?JF(e,i,s,r,o):tB(e,i,s,!1,r,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,r){const i=uF(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?JF(e,i,s,r,o):tB(e,i,s,!1,r,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,r)=>JF(e,uF(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=uF(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return tB(e,i,s,n.intersect,r,o)},x:(e,t,n,r)=>nB(e,uF(t,e),"x",n.intersect,r),y:(e,t,n,r)=>nB(e,uF(t,e),"y",n.intersect,r)}};const iB=["left","top","right","bottom"];function sB(e,t){return e.filter((e=>e.pos===t))}function oB(e,t){return e.filter((e=>-1===iB.indexOf(e.pos)&&e.box.axis===t))}function aB(e,t){return e.sort(((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function lB(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!iB.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&t.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:o&&t.availableHeight)}return n}function cB(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function uB(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function dB(e,t,n,r){const{pos:i,box:s}=n,o=e.maxPadding;if(!qD(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&uB(o,s.getPadding());const a=Math.max(0,t.outerWidth-cB(o,e,"left","right")),l=Math.max(0,t.outerHeight-cB(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hB(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function fB(e,t,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,hB(a.horizontal,t));const{same:o,other:d}=dB(t,n,a,r);c|=o&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&fB(i,t,n,r)||u}function pB(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function mB(e,t,n,r){const i=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=t.w*c,s=l.size||e.height;cR(l.start)&&(o=l.start),e.fullSize?pB(e,i.left,o,n.outerWidth-i.right-i.left,s):pB(e,t.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=e.bottom}else{const r=t.h*c,o=l.size||e.width;cR(l.start)&&(s=l.start),e.fullSize?pB(e,s,i.top,o,n.outerHeight-i.bottom-i.top):pB(e,s,t.top+l.placed,o,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=o}var gB={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=ML(e.options.layout.padding),s=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=function(e){const t=function(e){const t=[];let n,r,i,s,o,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=aB(t.filter((e=>e.box.fullSize)),!0),r=aB(sB(t,"left"),!0),i=aB(sB(t,"right")),s=aB(sB(t,"top"),!0),o=aB(sB(t,"bottom")),a=oB(t,"x"),l=oB(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:sB(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;ZD(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);uB(h,ML(r));const f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),p=lB(l.concat(c),d);fB(a.fullSize,f,d,p),fB(l,f,d,p),fB(c,f,d,p)&&fB(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),mB(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,mB(a.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ZD(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class yB{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class vB extends yB{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const bB="$chartjs",xB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wB=e=>null===e||""===e;const _B=!!pF&&{passive:!0};function SB(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,_B)}function EB(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function jB(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||EB(n.addedNodes,r),t=t&&!EB(n.removedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function kB(e,t,n){const r=e.canvas,i=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||EB(n.removedNodes,r),t=t&&!EB(n.addedNodes,r);t&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const CB=new Map;let TB=0;function NB(){const e=window.devicePixelRatio;e!==TB&&(TB=e,CB.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function IB(e,t,n){const r=e.canvas,i=r&&sF(r);if(!i)return;const s=$R(((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)}));return o.observe(i),function(e,t){CB.size||window.addEventListener("resize",NB),CB.set(e,t)}(e,s),o}function AB(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){CB.delete(e),CB.size||window.removeEventListener("resize",NB)}(e)}function OB(e,t,n){const r=e.canvas,i=$R((t=>{null!==e.ctx&&n(function(e,t){const n=xB[e.type]||e.type,{x:r,y:i}=uF(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,_B)}(r,t,i),i}class PB extends yB{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[bB]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",wB(i)){const t=mF(e,"width");void 0!==t&&(e.width=t)}if(wB(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=mF(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[bB])return!1;const n=t[bB].initial;["height","width"].forEach((e=>{const r=n[e];HD(r)?t.removeAttribute(e):t.setAttribute(e,r)}));const r=n.style||{};return Object.keys(r).forEach((e=>{t.style[e]=r[e]})),t.width=t.width,delete t[bB],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:jB,detach:kB,resize:IB}[t]||OB;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:AB,detach:AB,resize:AB}[t]||SB)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return hF(e,t,n,r)}isAttached(e){const t=e&&sF(e);return!(!t||!t.isConnected)}}class MB{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return ER(this.x)&&ER(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach((e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),r}}function DB(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return function(e,t,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===o&&(t.push(e[i]),s++,o=n[s*r])}(t,c,s,o/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(r);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(o>0){let e,n;const r=o>1?Math.round((l-a)/(o-1)):null;for(RB(t,c,u,HD(r)?0:a-r,a),e=0,n=o-1;e<n;e++)RB(t,c,u,s[e],s[e+1]);return RB(t,c,u,l,HD(r)?t.length:l+r),c}return RB(t,c,u),c}function RB(e,t,n,r,i){const s=GD(r,0),o=Math.min(GD(i,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}const LB=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,FB=(e,t)=>Math.min(t||e,e);function BB(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function UB(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-a||c>o+a)))return c}function VB(e){return e.drawTicks?e.tickLength:0}function zB(e,t){if(!e.display)return 0;const n=DL(e.font,t),r=ML(e.padding);return(WD(e.text)?e.text.length:1)*n.lineHeight+r.height}function $B(e,t,n){let r=HR(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class HB extends MB{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=YD(e,Number.POSITIVE_INFINITY),t=YD(t,Number.NEGATIVE_INFINITY),n=YD(n,Number.POSITIVE_INFINITY),r=YD(r,Number.NEGATIVE_INFINITY),{min:YD(e,n),max:YD(t,r),minDefined:KD(e),maxDefined:KD(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:YD(n,YD(r,n)),max:YD(r,YD(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){QD(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=XD(t,(i-r)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?BB(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=DB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){QD(this.options.afterUpdate,[this])}beforeSetDimensions(){QD(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){QD(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),QD(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){QD(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=QD(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){QD(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){QD(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=FB(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=MR(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(e.offset?.5:1)),o=this.maxHeight-VB(e.grid)-t.padding-zB(e.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=CR(Math.min(Math.asin(MR((c.highest.height+6)/s,-1,1)),Math.asin(MR(o/a,-1,1))-Math.asin(MR(d/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){QD(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){QD(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=zB(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=VB(i)+s):(e.height=this.maxHeight,e.width=VB(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,l=kR(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===i?d=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){QD(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)HD(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=BB(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(t/FB(t,n));let l,c,u,d,h,f,p,m,g,y,v,b=0,x=0;for(l=0;l<t;l+=a){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=i[f]=i[f]||{data:{},gc:[]},m=h.lineHeight,g=y=0,HD(d)||WD(d)){if(WD(d))for(c=0,u=d.length;c<u;++c)v=d[c],HD(v)||WD(v)||(g=fL(r,p.data,p.gc,g,v),y+=m)}else g=fL(r,p.data,p.gc,g,d),y=m;s.push(g),o.push(y),b=Math.max(g,b),x=Math.max(y,x)}!function(e,t){ZD(e,(e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}}))}(i,t);const w=s.indexOf(b),_=o.indexOf(x),S=e=>({width:s[e]||0,height:o[e]||0});return{first:S(0),last:S(t-1),widest:S(w),highest:S(_),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return MR(e,-32768,32767)}(this._alignToPixels?pL(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return LL(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return LL(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=kR(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=VB(i),d=[],h=o.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return pL(n,e,f)};let g,y,v,b,x,w,_,S,E,j,k,C;if("top"===s)g=m(this.bottom),w=this.bottom-u,S=g-p,j=m(e.top)+p,C=e.bottom;else if("bottom"===s)g=m(this.top),j=e.top,C=m(e.bottom)-p,w=g+p,S=this.top+u;else if("left"===s)g=m(this.right),x=this.right-u,_=g-p,E=m(e.left)+p,k=e.right;else if("right"===s)g=m(this.left),E=e.left,k=m(e.right)-p,x=g+p,_=this.left+u;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(qD(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}j=e.top,C=e.bottom,w=g+p,S=w+u}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(qD(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}x=g-p,_=x-u,E=e.left,k=e.right}const T=GD(r.ticks.maxTicksLimit,c),N=Math.max(1,Math.ceil(c/T));for(y=0;y<c;y+=N){const e=this.getContext(y),t=i.setContext(e),r=o.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=UB(this,y,a),void 0!==v&&(b=pL(n,v,s),l?x=_=E=k=b:w=S=j=C=b,d.push({tx1:x,ty1:w,tx2:_,ty2:S,x1:E,y1:j,x2:k,y2:C,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,d=VB(n.grid),h=d+c,f=u?-c:h,p=-kR(this.labelRotation),m=[];let g,y,v,b,x,w,_,S,E,j,k,C,T="middle";if("top"===r)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(qD(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-h;else if(qD(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?T="top":"end"===a&&(T="bottom"));const N=this._getLabelSizes();for(g=0,y=o.length;g<y;++g){v=o[g],b=v.label;const e=i.setContext(this.getContext(g));S=this.getPixelForTick(g)+i.labelOffset,E=this._resolveTickFontOptions(g),j=E.lineHeight,k=WD(b)?b.length:1;const t=k/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,h=_;if(s?(x=S,"inner"===_&&(h=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===r?"near"===l||0!==p?-k*j+j/2:"center"===l?-N.highest.height/2-t*j+j:-N.highest.height+j/2:"near"===l||0!==p?j/2:"center"===l?N.highest.height/2-t*j:N.highest.height-k*j,u&&(C*=-1),0===p||e.showLabelBackdrop||(x+=j/2*Math.sin(p))):(w=S,C=(1-k)*j/2),e.showLabelBackdrop){const t=ML(e.backdropPadding),n=N.heights[g],r=N.widths[g];let i=C-t.top,s=0-t.left;switch(T){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":g===y-1?s-=r:g>0&&(s-=r/2)}d={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:E,textOffset:C,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:T,translation:[x,w],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-kR(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const o=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=pL(e,this.left,s)-s/2,c=pL(e,this.right,o)+o/2,u=d=a):(u=pL(e,this.top,s)-s/2,d=pL(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&bL(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;jL(t,i.label,0,i.textOffset,n,e)}n&&xL(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=DL(n.font),s=ML(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===t||"center"===t||qD(t)?(a+=s.bottom,WD(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,p=0;const m=o-i,g=a-s;if(e.isHorizontal()){if(h=WR(r,s,a),qD(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:LB(e,n,t);d=a-s}else{if(qD(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:LB(e,n,t);f=WR(r,o,i),p="left"===n?-yR:yR}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,a,t,o);jL(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:$B(o,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=GD(e.grid&&e.grid.z,-1),r=GD(e.border&&e.border.z,0);return this._isVisible()&&this.draw===HB.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return DL(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class WB{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=rR(Object.create(null),[n?hL.get(n):{},hL.get(t),e.defaults]);hL.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");hL.route(s,i,l,a)}))}(t,e.defaultRoutes);e.descriptors&&hL.describe(t,e.descriptors)}(e,s,n),this.override&&hL.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in hL[r]&&(delete hL[r][n],this.override&&delete aL[n])}}class qB{constructor(){this.controllers=new WB(qF,"datasets",!0),this.elements=new WB(MB,"elements"),this.plugins=new WB(Object,"plugins"),this.scales=new WB(HB,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):ZD(t,(t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)}))}))}_exec(e,t,n){const r=lR(e);QD(n["before"+r],[],n),t[e](n),QD(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var KB=new qB;class YB{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===QD(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){HD(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=GD(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(KB.plugins.items);for(let s=0;s<r.length;s++)n.push(KB.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const o=[],a=e.getContext();for(const l of i){const t=l.id,i=GB(n[t],r);null!==i&&o.push({plugin:l,options:XB(e.config,{plugin:l,local:s[t]},i,a)})}return o}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function GB(e,t){return t||!1!==e?!0===e?{}:e:null}function XB(e,t,n,r){let{plugin:i,local:s}=t;const o=e.pluginScopeKeys(i),a=e.getOptionScopes(n,o);return s&&i.defaults&&a.push(i.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function QB(e,t){const n=hL.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ZB(e){if("x"===e||"y"===e||"r"===e)return e}function JB(e){if(ZB(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&ZB(e[0].toLowerCase());if(t)return t}var i;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function eU(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function tU(e,t){const n=aL[e.type]||{scales:{}},r=t.scales||{},i=QB(e.type,t),s=Object.create(null);return Object.keys(r).forEach((t=>{const o=r[t];if(!qD(o))return console.error(`Invalid scale configuration for scale: ${t}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=JB(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return eU(e,"x",n[0])||eU(e,"y",n[0])}return{}}(t,e),hL.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,i),c=n.scales||{};s[t]=iR(Object.create(null),[{axis:a},o,c[a],c[l]])})),e.data.datasets.forEach((n=>{const i=n.type||e.type,o=n.indexAxis||QB(i,t),a=(aL[i]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),iR(s[i],[{axis:t},r[i],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];iR(t,[hL.scales[t.type],hL.scale])})),s}function nU(e){const t=e.options||(e.options={});t.plugins=GD(t.plugins,{}),t.scales=tU(e,t)}function rU(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const iU=new Map,sU=new Set;function oU(e,t){let n=iU.get(e);return n||(n=t(),iU.set(e,n),sU.add(n)),n}const aU=(e,t,n)=>{const r=aR(t,n);void 0!==r&&e.add(r)};class lU{constructor(e){this._config=function(e){return(e=e||{}).data=rU(e.data),nU(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rU(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nU(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return oU(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return oU(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return oU(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return oU(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>aU(a,e,t)))),t.forEach((e=>aU(a,r,e))),t.forEach((e=>aU(a,aL[i]||{},e))),t.forEach((e=>aU(a,hL,e))),t.forEach((e=>aU(a,lL,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),sU.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,aL[t]||{},hL.datasets[t]||{},{type:t},hL,lL]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:o}=cU(this._resolverCache,e,r);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=UL(e);for(const i of t){const t=n(i),s=r(i),o=(s||t)&&e[i];if(t&&(uR(o)||uU(o))||s&&WD(o))return!0}return!1}(s,t)){i.$shared=!1;a=BL(s,n=uR(n)?n():n,this.createResolver(e,n,o))}for(const l of t)i[l]=a[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=cU(this._resolverCache,e,n);return qD(t)?BL(i,t,void 0,r):i}}function cU(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:FL(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},r.set(i,s)}return s}const uU=e=>qD(e)&&Object.getOwnPropertyNames(e).some((t=>uR(e[t])));const dU=["top","bottom","left","right","chartArea"];function hU(e,t){return"top"===e||"bottom"===e||-1===dU.indexOf(e)&&"x"===t}function fU(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function pU(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),QD(n&&n.onComplete,[e],t)}function mU(e){const t=e.chart,n=t.options.animation;QD(n&&n.onProgress,[e],t)}function gU(e){return iF()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const yU={},vU=e=>{const t=gU(e);return Object.values(yU).filter((e=>e.canvas===t)).pop()};function bU(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}function xU(e,t,n){return e.options.clip?e[n]:t[n]}class wU{static defaults=(()=>hL)();static instances=(()=>yU)();static overrides=(()=>aL)();static registry=(()=>KB)();static version="4.4.8";static getChart=(()=>vU)();static register(){KB.add(...arguments),_U()}static unregister(){KB.remove(...arguments),_U()}constructor(e,t){const n=this.config=new lU(t),r=gU(e),i=vU(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!iF()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?vB:PB}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=$D(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new YB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],yU[this.id]=this,o&&a?(IF.listen(this,"complete",pU),IF.listen(this,"progress",mU),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return HD(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return KB}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fF(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mL(this.canvas,this.ctx),this}stop(){return IF.stop(this),this}resize(e,t){IF.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,fF(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),QD(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){ZD(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let i=[];t&&(i=i.concat(Object.keys(t).map((e=>{const n=t[e],r=JB(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}})))),ZD(i,(t=>{const i=t.options,s=i.id,o=JB(s,i),a=GD(i.type,t.dtype);void 0!==i.position&&hU(i.position,o)===hU(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(KB.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)})),ZD(r,((e,t)=>{e||delete n[t]})),ZD(n,(e=>{gB.configure(this,e,e.options),gB.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(fU("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||QB(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=KB.getController(s),{datasetElementType:r,dataElementType:o}=hL.datasets[s];Object.assign(t,{dataElementType:KB.getElement(o),datasetElementType:r&&KB.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){ZD(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||ZD(i,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fU("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ZD(this.scales,(e=>{gB.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);dR(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){bU(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),r=n(0);for(let i=1;i<t;i++)if(!dR(r,n(i)))return;return Array.from(r).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;gB.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],ZD(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,uR(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(IF.has(this)?this.attached&&!IF.running(this)&&IF.start(this):(this.draw(),pU({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:xU(n,t,"left"),right:xU(n,t,"right"),top:xU(r,t,"top"),bottom:xU(r,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&bL(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&xL(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return vL(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=rB.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter((e=>e&&e._dataset===t)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=LL(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);cR(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update((t=>t.datasetIndex===e?r:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),IF.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),mL(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete yU[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};ZD(this.options.events,(e=>n(e,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){ZD(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},ZD(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}));!JD(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=i(t,e),o=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,o=this._getActiveElements(e,r,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,QD(i.onHover,[e,o,this],this),a&&QD(i.onClick,[e,o,this],this));const c=!JD(o,r);return(c||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function _U(){return ZD(wU.instances,(e=>e._plugins.invalidate()))}function SU(e,t,n,r){const i=function(e){return AL(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(n-t)/2,o=Math.min(s,r*t/2),a=e=>{const t=(n-Math.min(s,e))*r/2;return MR(e,0,Math.min(s,t))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:MR(i.innerStart,0,o),innerEnd:MR(i.innerEnd,0,o)}}function EU(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function jU(e,t,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*d-n/hR)/d)/2,g=l+m+f,y=i-m-f,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=SU(t,h,d,y-g),_=d-v,S=d-b,E=g+v/_,j=y-b/S,k=h+x,C=h+w,T=g+x/k,N=y-w/C;if(e.beginPath(),s){const t=(E+j)/2;if(e.arc(o,a,d,E,t),e.arc(o,a,d,t,j),b>0){const t=EU(S,j,o,a);e.arc(t.x,t.y,b,j,y+yR)}const n=EU(C,y,o,a);if(e.lineTo(n.x,n.y),w>0){const t=EU(C,N,o,a);e.arc(t.x,t.y,w,y+yR,N+Math.PI)}const r=(y-w/h+(g+x/h))/2;if(e.arc(o,a,h,y-w/h,r,!0),e.arc(o,a,h,r,g+x/h,!0),x>0){const t=EU(k,T,o,a);e.arc(t.x,t.y,x,T+Math.PI,g-yR)}const i=EU(_,g,o,a);if(e.lineTo(i.x,i.y),v>0){const t=EU(_,E,o,a);e.arc(t.x,t.y,v,g-yR,E)}}else{e.moveTo(o,a);const t=Math.cos(E)*d+o,n=Math.sin(E)*d+a;e.lineTo(t,n);const r=Math.cos(j)*d+o,i=Math.sin(j)*d+a;e.lineTo(r,i)}e.closePath()}function kU(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){jU(e,t,n,r,p,i);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(p=o+(a%fR||fR))}f&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(s,o,a,r-c,n+c),l>i?(c=i/l,e.arc(s,o,l,n+c,r-c,!0)):e.arc(s,o,i,n+yR,r-yR),e.closePath(),e.clip()}(e,t,p),s||(jU(e,t,n,r,p,i),e.stroke())}class CU extends MB{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=NR(r,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=GD(u,a-o),f=PR(i,o,a)&&o!==a,p=h>=fR||f,m=DR(s,l+d,c+d);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>fR?Math.floor(n/fR):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(hR,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){jU(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%fR||fR))}jU(e,t,n,r,l,i),e.fill()}(e,this,a,i,s),kU(e,this,a,i,s),e.restore()}}function TU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=GD(n.borderCapStyle,t.borderCapStyle),e.setLineDash(GD(n.borderDash,t.borderDash)),e.lineDashOffset=GD(n.borderDashOffset,t.borderDashOffset),e.lineJoin=GD(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=GD(n.borderWidth,t.borderWidth),e.strokeStyle=GD(n.borderColor,t.borderColor)}function NU(e,t,n){e.lineTo(n.x,n.y)}function IU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function AU(e,t,n,r){const{points:i,options:s}=t,{count:o,start:a,loop:l,ilen:c}=IU(i,n,r),u=function(e){return e.stepped?wL:e.tension||"monotone"===e.cubicInterpolationMode?_L:NU}(s);let d,h,f,{move:p=!0,reverse:m}=r||{};for(d=0;d<=c;++d)h=i[(a+(m?c-d:d))%o],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):u(e,f,h,m,s.stepped),f=h);return l&&(h=i[(a+(m?c:0))%o],u(e,f,h,m,s.stepped)),!!l}function OU(e,t,n,r){const i=t.points,{count:s,start:o,ilen:a}=IU(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,p,m,g=0,y=0;const v=e=>(o+(c?a-e:e))%s,b=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(d=i[v(0)],e.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=i[v(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<f?f=n:n>p&&(p=n),g=(y*g+t)/++y):(b(),e.lineTo(t,n),h=r,y=0,f=p=n),m=n}b()}function PU(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?OU:AU}const MU="function"===typeof Path2D;function DU(e,t,n,r){MU&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),TU(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,o=PU(t);for(const a of i)TU(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class RU extends MB{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;rF(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return kF(e,!0===r?[{start:o,end:a,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(o-1)%i,loop:r}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%i,end:a%i,loop:r}),s}(n,o,a<o?a+i:a,!!e._fullLoop&&0===o&&a===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=jF(this,{property:t,start:r,end:r});if(!s.length)return;const o=[],a=function(e){return e.stepped?yF:e.tension||"monotone"===e.cubicInterpolationMode?vF:gF}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=i[c],h=i[u];if(d===h){o.push(d);continue}const f=a(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return PU(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=PU(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of r)s&=i(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),DU(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function LU(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}class FU extends MB{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return LU(this,e,"x",t)}inYRange(e,t){return LU(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!vL(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,gL(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function BU(e,t){const{x:n,y:r,base:i,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function UU(e,t,n,r){return e?0:MR(t,n,r)}function VU(e){const t=BU(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=OL(r);return{t:UU(i.top,s.top,0,n),r:UU(i.right,s.right,0,t),b:UU(i.bottom,s.bottom,0,n),l:UU(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=PL(i),o=Math.min(t,n),a=e.borderSkipped,l=r||qD(i);return{topLeft:UU(!l||a.top||a.left,s.topLeft,0,o),topRight:UU(!l||a.top||a.right,s.topRight,0,o),bottomLeft:UU(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:UU(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function zU(e,t,n,r){const i=null===t,s=null===n,o=e&&!(i&&s)&&BU(e,r);return o&&(i||DR(t,o.left,o.right))&&(s||DR(n,o.top,o.bottom))}function $U(e,t){e.rect(t.x,t.y,t.w,t.h)}function HU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+o,radius:e.radius}}class WU extends MB{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=VU(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?kL:$U;var a;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),o(e,HU(s,t,i)),e.clip(),o(e,HU(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,HU(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return zU(this,e,t,n)}inXRange(e,t){return zU(this,e,null,t)}inYRange(e,t){return zU(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}const qU=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class KU extends MB{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=QD(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=DL(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=qU(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let u=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+o})),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,d=0,h=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+r.measureText(i).width}(r,e,t,n),o=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=YU(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,i,e,r);s>0&&h+g+2*o>c&&(u+=d+o,l.push({width:d,height:h}),f+=d+o,p++,d=h=0),a[s]={left:f,top:h,col:p,width:m,height:g},d=Math.max(d,m),h+=g+o})),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=bF(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=WR(n,this.left+r,this.right-this.lineWidths[i]);for(const a of t)i!==a.row&&(i=a.row,o=WR(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+e+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let i=0,o=WR(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const a of t)a.col!==i&&(i=a.col,o=WR(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;bL(e,this),this._draw(),xL(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,o=hL.color,a=bF(e.rtl,this.left,this.width),l=DL(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=qU(s,u),g=this.isHorizontal(),y=this._computeTitleHeight();h=g?{x:WR(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:WR(i,this.top+y+c,this.bottom-t[0].height),line:0},xF(this.ctx,e.textDirection);const v=m+c;this.legendItems.forEach(((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,_=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),S=f+d+w;let E=h.x,j=h.y;a.setWidth(this.width),g?x>0&&E+S+c>this.right&&(j=h.y+=v,h.line++,E=h.x=WR(i,this.left+c,this.right-n[h.line])):x>0&&j+v>this.bottom&&(E=h.x=E+t[h.line].width+c,h.line++,j=h.y=WR(i,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=GD(n.lineWidth,1);if(r.fillStyle=GD(n.fillStyle,o),r.lineCap=GD(n.lineCap,"butt"),r.lineDashOffset=GD(n.lineDashOffset,0),r.lineJoin=GD(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=GD(n.strokeStyle,o),r.setLineDash(GD(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(e,f/2);yL(r,o,l,t+d,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=PL(n.borderRadius);r.beginPath(),Object.values(l).some((e=>0!==e))?kL(r,{x:o,y:s,w:f,h:p,radius:l}):r.rect(o,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(E),j,b),E=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,E+f+d,g?E+S:this.right,e.rtl),function(e,t,n){jL(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(E),j,b),g)h.x+=S+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=YU(b,e)+c}else h.y+=v})),wF(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=DL(t.font),r=ML(t.padding);if(!t.display)return;const i=bF(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=r.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=WR(e.align,u,this.right-d);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+WR(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=WR(o,u,u+d);s.textAlign=i.textAlign(HR(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,jL(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=DL(e.font),n=ML(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(DR(e,this.left,this.right)&&DR(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],DR(e,r.left,r.left+r.width)&&DR(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&QD(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&QD(t.onHover,[e,n,this],this)}else n&&QD(t.onClick,[e,n,this],this)}}function YU(e,t){return t*(e.text?e.text.length:0)}var GU={id:"legend",_element:KU,start(e,t,n){const r=e.legend=new KU({ctx:e.ctx,options:n,chart:e});gB.configure(e,r,n),gB.addBox(e,r)},stop(e){gB.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;gB.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=ML(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class XU extends MB{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=WD(n.text)?n.text.length:1;this._padding=ML(n.padding);const i=r*DL(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=WR(o,n,i),c=t+e,a=i-n):("left"===s.position?(l=n+e,c=WR(o,r,t),u=-.5*hR):(l=i-e,c=WR(o,t,r),u=.5*hR),a=r-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=DL(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(r);jL(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:HR(t.align),textBaseline:"middle",translation:[i,s]})}}var QU={id:"title",_element:XU,start(e,t,n){!function(e,t){const n=new XU({ctx:e.ctx,options:t,chart:e});gB.configure(e,n,t),gB.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;gB.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;gB.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const ZU={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;const o=[...r].reduce(((e,t)=>e+t))/r.size;return{x:o,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=IR(t,r.getCenterPoint());e<a&&(a=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function JU(e,t){return t&&(WD(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function eV(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function tV(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:e,label:o,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function nV(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=DL(t.bodyFont),c=DL(t.titleFont),u=DL(t.footerFont),d=s.length,h=i.length,f=r.length,p=ML(t.padding);let m=p.height,g=0,y=r.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){m+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const b=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,ZD(e.title,b),n.font=l.string,ZD(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?o+2+t.boxPadding:0,ZD(r,(e=>{ZD(e.before,b),ZD(e.lines,b),ZD(e.after,b)})),v=0,n.font=u.string,ZD(e.footer,b),n.restore(),g+=p.width,{width:g,height:m}}function rV(e,t,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===e&&i+s+o>t.width||"right"===e&&i-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function iV(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||rV(e,t,n,r),yAlign:r}}function sV(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=PL(o);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,a);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+i:"right"===a&&(p+=Math.max(d,f)+i),{x:MR(p,0,r.width-t.width),y:MR(m,0,r.height-t.height)}}function oV(e,t,n){const r=ML(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function aV(e){return JU([],eV(e))}function lV(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const cV={beforeTitle:zD,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:zD,beforeBody:zD,beforeLabel:zD,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return HD(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:zD,afterBody:zD,beforeFooter:zD,footer:zD,afterFooter:zD};function uV(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?cV[t].call(n,r):i}class dV extends MB{static positioners=(()=>ZU)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new MF(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,LL(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=uV(n,"beforeTitle",this,e),i=uV(n,"title",this,e),s=uV(n,"afterTitle",this,e);let o=[];return o=JU(o,eV(r)),o=JU(o,eV(i)),o=JU(o,eV(s)),o}getBeforeBody(e,t){return aV(uV(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return ZD(e,(e=>{const t={before:[],lines:[],after:[]},i=lV(n,e);JU(t.before,eV(uV(i,"beforeLabel",this,e))),JU(t.lines,uV(i,"label",this,e)),JU(t.after,eV(uV(i,"afterLabel",this,e))),r.push(t)})),r}getAfterBody(e,t){return aV(uV(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=uV(n,"beforeFooter",this,e),i=uV(n,"footer",this,e),s=uV(n,"afterFooter",this,e);let o=[];return o=JU(o,eV(r)),o=JU(o,eV(i)),o=JU(o,eV(s)),o}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(tV(this.chart,t[o]));return e.filter&&(l=l.filter(((t,r,i)=>e.filter(t,r,i,n)))),e.itemSort&&(l=l.sort(((t,r)=>e.itemSort(t,r,n)))),ZD(l,(t=>{const n=lV(e.callbacks,t);r.push(uV(n,"labelColor",this,t)),i.push(uV(n,"labelPointStyle",this,t)),s.push(uV(n,"labelTextColor",this,t))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=ZU[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=nV(this,n),o=Object.assign({},e,t),a=iV(this.chart,n,o),l=sV(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=PL(o),{x:d,y:h}=e,{width:f,height:p}=t;let m,g,y,v,b,x;return"center"===i?(b=h+p/2,"left"===r?(m=d,g=m-s,v=b+s,x=b-s):(m=d+f,g=m+s,v=b-s,x=b+s),y=m):(g="left"===r?d+Math.max(a,c)+s:"right"===r?d+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=h,b=v-s,m=g-s,y=g+s):(v=h+p,b=v+s,m=g+s,y=g-s),x=v),{x1:m,x2:g,x3:y,y1:v,y2:b,y3:x}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,o,a;if(i){const l=bF(n.rtl,this.x,this.width);for(e.x=oV(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=DL(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=DL(i.bodyFont),u=oV(this,"left",i),d=r.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+a/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,gL(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,gL(e,t,n,c)}else{e.lineWidth=qD(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),o=PL(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,kL(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),kL(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=DL(n.bodyFont);let d=u.lineHeight,h=0;const f=bF(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+i},m=f.textAlign(s);let g,y,v,b,x,w,_;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=oV(this,m,n),t.fillStyle=n.bodyColor,ZD(this.beforeBody,p),h=o&&"right"!==m?"center"===s?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(g=r[b],y=this.labelTextColors[b],t.fillStyle=y,ZD(g.before,p),v=g.lines,o&&v.length&&(this._drawColorBox(t,e,b,f,n),d=Math.max(u.lineHeight,a)),x=0,_=v.length;x<_;++x)p(v[x]),d=u.lineHeight;ZD(g.after,p)}h=0,d=u.lineHeight,ZD(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,o;if(i){const a=bF(n.rtl,this.x,this.width);for(e.x=oV(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=DL(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=PL(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+l-d,a),t.quadraticCurveTo(o+l,a,o+l,a+d),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(o+h,a+c),t.quadraticCurveTo(o,a+c,o,a+c-h),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=ZU[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=nV(this,e),o=Object.assign({},n,this._size),a=iV(t,e,o),l=sV(e,o,a,t);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=ML(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),xF(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),wF(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map((e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}})),i=!JD(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),o=this._positionChanged(s,e),a=t||!JD(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=ZU[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}var hV={id:"tooltip",_element:dV,positioners:ZU,afterInit(e,t,n){n&&(e.tooltip=new dV({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function fV(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function pV(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class mV extends HB{static id="category";static defaults=(()=>({ticks:{callback:pV}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(HD(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:MR(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:fV(n,e,GD(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return pV.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function gV(e,t){const n=[],{bounds:r,step:i,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=i||1,f=c-1,{min:p,max:m}=t,g=!HD(s),y=!HD(o),v=!HD(l),b=(m-p)/(u+1);let x,w,_,S,E=SR((m-p)/f/h)*h;if(E<1e-14&&!g&&!y)return[{value:p},{value:m}];S=Math.ceil(m/E)-Math.floor(p/E),S>f&&(E=SR(S*E/f/h)*h),HD(a)||(x=Math.pow(10,a),E=Math.ceil(E*x)/x),"ticks"===r?(w=Math.floor(p/E)*E,_=Math.ceil(m/E)*E):(w=p,_=m),g&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/i,E/1e3)?(S=Math.round(Math.min((o-s)/E,c)),E=(o-s)/S,w=s,_=o):v?(w=g?s:w,_=y?o:_,S=l-1,E=(_-w)/S):(S=(_-w)/E,S=_R(S,Math.round(S),E/1e3)?Math.round(S):Math.ceil(S));const j=Math.max(TR(E),TR(w));x=Math.pow(10,HD(a)?j:a),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let k=0;for(g&&(d&&w!==s?(n.push({value:s}),w<s&&k++,_R(Math.round((w+k*E)*x)/x,s,yV(s,b,e))&&k++):w<s&&k++);k<S;++k){const e=Math.round((w+k*E)*x)/x;if(y&&e>o)break;n.push({value:e})}return y&&d&&_!==o?n.length&&_R(n[n.length-1].value,o,yV(o,b,e))?n[n.length-1].value=o:n.push({value:o}):y&&_!==o||n.push({value:_}),n}function yV(e,t,n){let{horizontal:r,minRotation:i}=n;const s=kR(i),o=(r?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}class vV extends HB{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return HD(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,o=e=>i=n?i:e;if(e){const e=wR(r),t=wR(i);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);o(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=gV({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&jR(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return iL(e,this.chart.options.locale,this.options.ticks.format)}}class bV extends vV{static id="linear";static defaults=(()=>({ticks:{callback:oL.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=KD(e)?e:0,this.max=KD(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=kR(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}oL.formatters.logarithmic;oL.formatters.numeric;const xV={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wV=Object.keys(xV);function _V(e,t){return e-t}function SV(e,t){if(HD(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof r&&r(o),KD(o)||("string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&("week"!==i||!ER(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function EV(e,t,n,r){const i=wV.length;for(let s=wV.indexOf(e);s<i-1;++s){const e=xV[wV[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return wV[s]}return wV[i-1]}function jV(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=RR(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function kV(e,t,n){const r=[],i={},s=t.length;let o,a;for(0;o<s;++o)t[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),o=t[t.length-1].value;let a,l;for(s;a<=o;+i.add(a,1,r))n[a],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class CV extends HB{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new XF(e.adapters.date);r.init(t),iR(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:SV(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||Math.min(r,e.min),o||isNaN(e.max)||Math.max(i,e.max)}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),KD(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),KD(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(e[0],e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)0;for(;i>r&&e[i-1]>n;)0;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?EV(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=wV.length-1;s>=wV.indexOf(n);s--){const n=wV[s];if(xV[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return wV[n?wV.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=wV.indexOf(e)+1,n=wV.length;t<n;++t)if(xV[wV[t]].common)return wV[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),kV(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(this.getDecimalForValue(n[0]),1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,this.getDecimalForValue(n[n.length-1]),1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;MR(r,0,s),MR(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||EV(i.minUnit,t,n,this._getLabelCapacity(t)),o=GD(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,l=ER(a)||!0===a,c={};let u,d,h=t;if(l&&+e.startOf(h,"isoWeek",a),+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(0;u<n;+e.add(u,o,s),d++)jV(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||jV(c,u,f),Object.keys(c).sort(_V).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return QD(s,[e,t,n],this);const o=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(e.length;t<n;++t)e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=kR(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,kV(this,[e],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(r.length;e<t;++e)n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(r.length;t<n;++t)e.push(SV(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return VR(e.sort(_V))}}const TV="label";function NV(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function IV(e,t){e.labels=t}function AV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TV;const r=[];e.datasets=t.map((t=>{const i=e.datasets.find((e=>e[n]===t[n]));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):{...t}}))}function OV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TV;const n={labels:[],datasets:[]};return IV(n,e.labels),AV(n,e.datasets,t),n}function PV(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,p=(0,r.useRef)(null),m=(0,r.useRef)(null),g=()=>{p.current&&(m.current=new wU(p.current,{type:a,data:OV(l,o),options:c&&{...c},plugins:u}),NV(t,m.current))},y=()=>{NV(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,r.useEffect)((()=>{!s&&m.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,c)}),[s,c]),(0,r.useEffect)((()=>{!s&&m.current&&IV(m.current.config.data,l.labels)}),[s,l.labels]),(0,r.useEffect)((()=>{!s&&m.current&&l.datasets&&AV(m.current.config.data,l.datasets,o)}),[s,l.datasets]),(0,r.useEffect)((()=>{m.current&&(s?(y(),setTimeout(g)):m.current.update(h))}),[s,c,l.labels,l.datasets,h]),(0,r.useEffect)((()=>{m.current&&(y(),setTimeout(g))}),[a]),(0,r.useEffect)((()=>(g(),()=>y())),[]),r.createElement("canvas",{ref:p,role:"img",height:n,width:i,...f},d)}const MV=(0,r.forwardRef)(PV);function DV(e,t){return wU.register(t),(0,r.forwardRef)(((t,n)=>r.createElement(MV,{...t,ref:n,type:e})))}const RV=DV("line",KF);wU.register(mV,bV,FU,RU,QU,hV,GU);const LV=e=>{let{icon:t,title:n,value:r,description:i}=e;return(0,wS.jsx)(dA.div,{whileHover:{scale:1.02},className:"bg-white p-6 rounded-xl shadow-sm",children:(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,wS.jsx)(t,{className:"w-6 h-6 text-indigo-600"})}),(0,wS.jsxs)("div",{className:"ml-4",children:[(0,wS.jsx)("p",{className:"text-sm font-medium text-gray-600",children:n}),(0,wS.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:r}),(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:i})]})]})})},FV=e=>{let{label:t,value:n,color:r,icon:i}=e;return(0,wS.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,wS.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,wS.jsx)(i,{className:"w-5 h-5",style:{color:r}}),(0,wS.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t})]}),(0,wS.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,wS.jsxs)("span",{className:"text-2xl font-semibold",style:{color:r},children:[n.toFixed(2)," kWh"]})}),(0,wS.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,wS.jsx)("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:n/10*100+"%",backgroundColor:r,boxShadow:`0 0 8px ${r}40`}})})]})},BV=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)("hour"),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"teachers"),t=await vg(e),r=new Set,s=[];t.docs.forEach((e=>{const t=e.data();t.roomNumber&&!r.has(t.roomNumber)&&(r.add(t.roomNumber),s.push({id:e.id,roomNumber:t.roomNumber,department:t.department||"Unknown"}))})),u(s.sort(((e,t)=>e.roomNumber.localeCompare(t.roomNumber)))),s.length>0&&!n&&i(s[0].roomNumber)}catch(dv){console.error("Error fetching rooms:",dv),SA().fire("Error","Failed to fetch rooms","error")}})()}),[]),(0,r.useEffect)((()=>{if(!n)return;(async()=>{try{const e=Zm(hm(bS,"energyUsage"),eg("classroomId","==",n),eg("timestamp",">",(()=>{const e=new Date;switch(s){case"hour":return new Date(e.getTime()-36e5);case"day":return new Date(e.getTime()-864e5);case"week":return new Date(e.getTime()-6048e5)}})())),r=Sg(e,(e=>{const n=e.docs.map((e=>({id:e.id,...e.data(),timestamp:e.data().timestamp.toDate()})));t(n),l(!1)}));return()=>r()}catch(dv){console.error("Error fetching energy data:",dv),SA().fire("Error","Failed to fetch energy data","error"),l(!1)}})()}),[n,s]);const f={labels:e.map((e=>e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}))),datasets:[{label:"Total Energy Consumption (kWh)",data:e.map((e=>e.consumptionKWh)),borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.5)",tension:.4}]},p=e.reduce(((e,t)=>e+t.consumptionKWh),0),m=p/(e.length||1),g=e.length>0?Math.max(...e.map((e=>e.consumptionKWh))):0;return(0,wS.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${d?"ml-20":"ml-64"} overflow-y-auto`,children:(0,wS.jsxs)("div",{className:"p-8",children:[(0,wS.jsxs)("div",{className:"mb-8",children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Energy Usage Analytics"}),(0,wS.jsx)("p",{className:"mt-2 text-gray-600",children:"Monitor and analyze classroom energy consumption"})]}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,wS.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,wS.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,wS.jsx)(ZM,{className:"w-5 h-5 inline-block mr-2 text-indigo-600"}),"Select Classroom"]}),c.length>0?(0,wS.jsx)("select",{value:n,onChange:e=>i(e.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 py-2.5",children:c.map((e=>(0,wS.jsxs)("option",{value:e.roomNumber,children:["Room ",e.roomNumber," - ",e.department]},e.id)))}):(0,wS.jsxs)("div",{className:"flex items-center text-yellow-600",children:[(0,wS.jsx)(eD,{className:"w-5 h-5 mr-2"}),(0,wS.jsx)("span",{children:"No rooms available"})]})]}),(0,wS.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,wS.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,wS.jsx)(tM,{className:"w-5 h-5 inline-block mr-2 text-indigo-600"}),"Time Range"]}),(0,wS.jsx)("div",{className:"flex gap-3",children:["hour","day","week"].map((e=>(0,wS.jsx)("button",{onClick:()=>o(e),className:"flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-200 "+(s===e?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"hour"===e?"Last Hour":"day"===e?"Last 24 Hours":"Last Week"},e)))})]})]}),a?(0,wS.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,wS.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,wS.jsxs)(wS.Fragment,{children:[(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,wS.jsx)(LV,{icon:nD,title:"Total Consumption",value:`${p.toFixed(2)} kWh`,description:"Total energy used"}),(0,wS.jsx)(LV,{icon:uP,title:"Average Consumption",value:`${m.toFixed(2)} kWh`,description:"Average per reading"}),(0,wS.jsx)(LV,{icon:iD,title:"Peak Usage",value:`${g.toFixed(2)} kWh`,description:"Highest consumption"}),(0,wS.jsx)(LV,{icon:oD,title:"Readings",value:e.length,description:"Total data points"})]}),(0,wS.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm mb-8",children:(0,wS.jsx)("div",{className:"h-[400px]",children:(0,wS.jsx)(RV,{data:f,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Energy Consumption Over Time",font:{size:16,weight:"bold"}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Energy (kWh)"}},x:{title:{display:!0,text:"Time"}}}}})})}),e.length>0&&(0,wS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"Device Energy Breakdown"}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,wS.jsx)(FV,{label:"Lighting",value:e[e.length-1].devices.lighting,color:"rgb(59, 130, 246)",icon:lD}),(0,wS.jsx)(FV,{label:"Projection",value:e[e.length-1].devices.projection,color:"rgb(16, 185, 129)",icon:uP}),(0,wS.jsx)(FV,{label:"Computers",value:e[e.length-1].devices.computers,color:"rgb(245, 158, 11)",icon:iD}),(0,wS.jsx)(FV,{label:"HVAC",value:e[e.length-1].devices.hvac,color:"rgb(239, 68, 68)",icon:oD})]})]})]})]})})]})};function UV(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some((t=>e.test(t.brand))))||e.test(window.navigator.userAgent))}function VV(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function zV(e){let t=null;return()=>(null==t&&(t=e()),t)}const $V=zV((function(){return VV(/^Mac/i)})),HV=zV((function(){return VV(/^iPhone/i)})),WV=zV((function(){return VV(/^iPad/i)||$V()&&navigator.maxTouchPoints>1})),qV=zV((function(){return HV()||WV()})),KV=(zV((function(){return $V()||qV()})),zV((function(){return UV(/AppleWebKit/i)&&!KV()})),zV((function(){return UV(/Chrome/i)}))),YV=zV((function(){return UV(/Android/i)}));zV((function(){return UV(/Firefox/i)}));const GV=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.ownerDocument)&&void 0!==t?t:document},XV=e=>{if(e&&"window"in e&&e.window===e)return e;return GV(e).defaultView||window};let QV=null,ZV=new Set,JV=new Map,ez=!1,tz=!1;const nz={Tab:!0,Escape:!0};function rz(e,t){for(let n of ZV)n(e,t)}function iz(e){ez=!0,function(e){return!(e.metaKey||!$V()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(QV="keyboard",rz("keyboard",e))}function sz(e){QV="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(ez=!0,rz("pointer",e))}function oz(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(YV()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(ez=!0,QV="virtual")}function az(e){e.target!==window&&e.target!==document&&(ez||tz||(QV="virtual",rz("virtual",e)),ez=!1,tz=!1)}function lz(){ez=!1,tz=!0}function cz(e){if("undefined"===typeof window||JV.get(XV(e)))return;const t=XV(e),n=GV(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ez=!0,r.apply(this,arguments)},n.addEventListener("keydown",iz,!0),n.addEventListener("keyup",iz,!0),n.addEventListener("click",oz,!0),t.addEventListener("focus",az,!0),t.addEventListener("blur",lz,!1),"undefined"!==typeof PointerEvent?(n.addEventListener("pointerdown",sz,!0),n.addEventListener("pointermove",sz,!0),n.addEventListener("pointerup",sz,!0)):(n.addEventListener("mousedown",sz,!0),n.addEventListener("mousemove",sz,!0),n.addEventListener("mouseup",sz,!0)),t.addEventListener("beforeunload",(()=>{uz(e)}),{once:!0}),JV.set(t,{focus:r})}const uz=(e,t)=>{const n=XV(e),r=GV(e);t&&r.removeEventListener("DOMContentLoaded",t),JV.has(n)&&(n.HTMLElement.prototype.focus=JV.get(n).focus,r.removeEventListener("keydown",iz,!0),r.removeEventListener("keyup",iz,!0),r.removeEventListener("click",oz,!0),n.removeEventListener("focus",az,!0),n.removeEventListener("blur",lz,!1),"undefined"!==typeof PointerEvent?(r.removeEventListener("pointerdown",sz,!0),r.removeEventListener("pointermove",sz,!0),r.removeEventListener("pointerup",sz,!0)):(r.removeEventListener("mousedown",sz,!0),r.removeEventListener("mousemove",sz,!0),r.removeEventListener("mouseup",sz,!0)),JV.delete(n))};function dz(){return"pointer"!==QV}"undefined"!==typeof document&&function(e){const t=GV(e);let n;"loading"!==t.readyState?cz(e):(n=()=>{cz(e)},t.addEventListener("DOMContentLoaded",n))}();const hz=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function fz(e,t,n){cz(),(0,r.useEffect)((()=>{let t=(t,r)=>{(function(e,t,n){var r;const i="undefined"!==typeof window?XV(null===n||void 0===n?void 0:n.target).HTMLInputElement:HTMLInputElement,s="undefined"!==typeof window?XV(null===n||void 0===n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o="undefined"!==typeof window?XV(null===n||void 0===n?void 0:n.target).HTMLElement:HTMLElement,a="undefined"!==typeof window?XV(null===n||void 0===n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||(null===n||void 0===n?void 0:n.target)instanceof i&&!hz.has(null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.type)||(null===n||void 0===n?void 0:n.target)instanceof s||(null===n||void 0===n?void 0:n.target)instanceof o&&(null===n||void 0===n?void 0:n.target.isContentEditable))&&"keyboard"===t&&n instanceof a&&!nz[n.key])})(!!(null===n||void 0===n?void 0:n.isTextInput),t,r)&&e(dz())};return ZV.add(t),()=>{ZV.delete(t)}}),t)}const pz="undefined"!==typeof document?r.useLayoutEffect:()=>{};function mz(e){const t=(0,r.useRef)(null);return pz((()=>{t.current=e}),[e]),(0,r.useCallback)((function(){const e=t.current;return null===e||void 0===e?void 0:e(...arguments)}),[])}class gz{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function yz(e){let t=(0,r.useRef)({isFocused:!1,observer:null});pz((()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]);let n=mz((t=>{null===e||void 0===e||e(t)}));return(0,r.useCallback)((e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target,i=e=>{t.current.isFocused=!1,r.disabled&&n(new gz("blur",e)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver((()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}})),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}}),[n])}function vz(e){let{isDisabled:t,onFocus:n,onBlur:i,onFocusChange:s}=e;const o=(0,r.useCallback)((e=>{if(e.target===e.currentTarget)return i&&i(e),s&&s(!1),!0}),[i,s]),a=yz(o),l=(0,r.useCallback)((e=>{const t=GV(e.target);e.target===e.currentTarget&&t.activeElement===e.target&&(n&&n(e),s&&s(!0),a(e))}),[s,n,a]);return{focusProps:{onFocus:!t&&(n||s||i)?l:void 0,onBlur:t||!i&&!s?void 0:o}}}function bz(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:i,onFocusWithinChange:s}=e,o=(0,r.useRef)({isFocusWithin:!1}),a=(0,r.useCallback)((e=>{o.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(o.current.isFocusWithin=!1,n&&n(e),s&&s(!1))}),[n,s,o]),l=yz(a),c=(0,r.useCallback)((e=>{o.current.isFocusWithin||document.activeElement!==e.target||(i&&i(e),s&&s(!0),o.current.isFocusWithin=!0,l(e))}),[i,s,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:a}}}function xz(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFocus:t=!1,isTextInput:n,within:i}=e,s=(0,r.useRef)({isFocused:!1,isFocusVisible:t||dz()}),[o,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)((()=>s.current.isFocused&&s.current.isFocusVisible)),u=(0,r.useCallback)((()=>c(s.current.isFocused&&s.current.isFocusVisible)),[]),d=(0,r.useCallback)((e=>{s.current.isFocused=e,a(e),u()}),[u]);fz((e=>{s.current.isFocusVisible=e,u()}),[],{isTextInput:n});let{focusProps:h}=vz({isDisabled:i,onFocusChange:d}),{focusWithinProps:f}=bz({isDisabled:!i,onFocusWithinChange:d});return{isFocused:o,isFocusVisible:l,focusProps:i?f:h}}let wz=!1,_z=0;function Sz(){wz=!0,setTimeout((()=>{wz=!1}),50)}function Ez(e){"touch"===e.pointerType&&Sz()}function jz(){if("undefined"!==typeof document)return"undefined"!==typeof PointerEvent?document.addEventListener("pointerup",Ez):document.addEventListener("touchend",Sz),_z++,()=>{_z--,_z>0||("undefined"!==typeof PointerEvent?document.removeEventListener("pointerup",Ez):document.removeEventListener("touchend",Sz))}}var kz=Object.defineProperty,Cz=(e,t,n)=>(((e,t,n)=>{t in e?kz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let Tz=new class{constructor(){Cz(this,"current",this.detect()),Cz(this,"handoffState","pending"),Cz(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function Nz(e){return Tz.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Iz(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function Az(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i={current:!0};return Iz((()=>{i.current&&n[0]()})),t.add((()=>{i.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=Az();return e(t),this.add((()=>t.dispose()))},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function Oz(){let[e]=(0,r.useState)(Az);return(0,r.useEffect)((()=>()=>e.dispose()),[e]),e}let Pz=(e,t)=>{Tz.isServer?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)};function Mz(e){let t=(0,r.useRef)(e);return Pz((()=>{t.current=e}),[e]),t}let Dz=function(e){let t=Mz(e);return r.useCallback((function(){return t.current(...arguments)}),[t])};function Rz(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,i]=(0,r.useReducer)((()=>({})),{}),s=(0,r.useMemo)((()=>function(e){if(null===e)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}(e)),[e,n]);return Pz((()=>{if(!e)return;let t=new ResizeObserver(i);return t.observe(e),()=>{t.disconnect()}}),[e]),t?{width:`${s.width}px`,height:`${s.height}px`}:s}class Lz extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}function Fz(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];let a=t[e].call(n,...s);a&&(n=a,r.forEach((e=>e())))}}}function Bz(e){return(0,r.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}let Uz=new Lz((()=>Fz((()=>[]),{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(-1===t)return this;let n=this.slice();return n.splice(t,1),n}})));function Vz(e,t){let n=Uz.get(t),i=(0,r.useId)(),s=Bz(n);if(Pz((()=>{if(e)return n.dispatch("ADD",i),()=>n.dispatch("REMOVE",i)}),[n,e]),!e)return!1;let o=s.indexOf(i),a=s.length;return-1===o&&(o=a,a+=1),o===a-1}let zz=new Map,$z=new Map;function Hz(e){var t;let n=null!=(t=$z.get(e))?t:0;return $z.set(e,n+1),0!==n||(zz.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>Wz(e)}function Wz(e){var t;let n=null!=(t=$z.get(e))?t:1;if(1===n?$z.delete(e):$z.set(e,n-1),1!==n)return;let r=zz.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,zz.delete(e))}function qz(e){let{allowed:t,disallowed:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Vz(e,"inert-others");Pz((()=>{var e,i;if(!r)return;let s=Az();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&s.add(Hz(t));let o=null!=(i=null==t?void 0:t())?i:[];for(let t of o){if(!t)continue;let e=Nz(t);if(!e)continue;let n=t.parentElement;for(;n&&n!==e.body;){for(let e of n.children)o.some((t=>e.contains(t)))||s.add(Hz(e));n=n.parentElement}}return s.dispose}),[r,t,n])}function Kz(e,t){if(e in t){let s=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof s?s(...r):s}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Kz),s}let Yz=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(","),Gz=["[data-autofocus]"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var Xz=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Xz||{}),Qz=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Qz||{}),Zz=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Zz||{});function Jz(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(Yz)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var e$=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(e$||{});function t$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return e!==(null==(n=Nz(e))?void 0:n.body)&&Kz(t,{0:()=>e.matches(Yz),1(){let t=e;for(;null!==t;){if(t.matches(Yz))return!0;t=t.parentElement}return!1}})}function n$(e){let t=Nz(e);Az().nextFrame((()=>{t&&!t$(t.activeElement,0)&&function(e){null==e||e.focus({preventScroll:!0})}(e)}))}var r$=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(r$||{});"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let i$=["textarea","input"].join(",");function s$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let s=r.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function o$(e,t){return function(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?s$(e):e:64&t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(Gz)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}(e):Jz(e);i.length>0&&o.length>1&&(o=o.filter((e=>!i.some((t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))))),r=null!=r?r:s.activeElement;let a,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(r))-1;if(4&t)return Math.max(0,o.indexOf(r))+1;if(8&t)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},d=0,h=o.length;do{if(d>=h||d+h<=0)return 0;let e=c+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}a=o[e],null==a||a.focus(u),d+=l}while(a!==s.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,i$))&&n}(a)&&a.select(),2}(Jz(),t,{relativeTo:e})}function a$(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function l$(){return a$()||/Android/gi.test(window.navigator.userAgent)}function c$(e,t,n,i){let s=Mz(n);(0,r.useEffect)((()=>{if(e)return document.addEventListener(t,n,i),()=>document.removeEventListener(t,n,i);function n(e){s.current(e)}}),[e,t,i])}function u$(e,t,n){let i=Vz(e,"outside-click"),s=Mz(n),o=(0,r.useCallback)((function(e,n){if(e.defaultPrevented)return;let r=n(e);if(null===r||!r.getRootNode().contains(r)||!r.isConnected)return;let i=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of i)if(null!==t&&(t.contains(r)||e.composed&&e.composedPath().includes(t)))return;return!t$(r,e$.Loose)&&-1!==r.tabIndex&&e.preventDefault(),s.current(e,r)}),[s,t]),a=(0,r.useRef)(null);c$(i,"pointerdown",(e=>{var t,n;a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),c$(i,"mousedown",(e=>{var t,n;a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),c$(i,"click",(e=>{l$()||a.current&&(o(e,(()=>a.current)),a.current=null)}),!0);let l=(0,r.useRef)({x:0,y:0});c$(i,"touchstart",(e=>{l.current.x=e.touches[0].clientX,l.current.y=e.touches[0].clientY}),!0),c$(i,"touchend",(e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-l.current.x)>=30||Math.abs(n-l.current.y)>=30))return o(e,(()=>e.target instanceof HTMLElement?e.target:null))}),!0),function(e,t,n,i){let s=Mz(n);(0,r.useEffect)((()=>{if(e)return window.addEventListener(t,n,i),()=>window.removeEventListener(t,n,i);function n(e){s.current(e)}}),[e,t,i])}(i,"blur",(e=>o(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}function d$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)((()=>Nz(...t)),[...t])}function h$(e,t){return(0,r.useMemo)((()=>{var n;if(e.type)return e.type;let r=null!=(n=e.as)?n:"button";return"string"==typeof r&&"button"===r.toLowerCase()||"BUTTON"===(null==t?void 0:t.tagName)&&!t.hasAttribute("type")?"button":void 0}),[e.type,e.as,t])}function f$(){let e;return{before(t){let{doc:n}=t;var r;let i=n.documentElement,s=null!=(r=n.defaultView)?r:window;e=Math.max(0,s.innerWidth-i.clientWidth)},after(t){let{doc:n,d:r}=t,i=n.documentElement,s=Math.max(0,i.clientWidth-i.offsetWidth),o=Math.max(0,e-s);r.style(i,"paddingRight",`${o}px`)}}}function p$(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let m$=Fz((()=>new Map),{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:Az(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT(e){let{doc:t,d:n,meta:r}=e,i={doc:t,d:n,meta:p$(r)},s=[a$()?{before(e){let{doc:t,d:n,meta:r}=e;function i(e){return r.containers.flatMap((e=>e())).some((t=>t.contains(e)))}n.microTask((()=>{var e;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let e=Az();e.style(t.documentElement,"scrollBehavior","auto"),n.add((()=>n.microTask((()=>e.dispose()))))}let r=null!=(e=window.scrollY)?e:window.pageYOffset,s=null;n.addEventListener(t,"click",(e=>{if(e.target instanceof HTMLElement)try{let n=e.target.closest("a");if(!n)return;let{hash:r}=new URL(n.href),o=t.querySelector(r);o&&!i(o)&&(s=o)}catch{}}),!0),n.addEventListener(t,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(i(e.target)){let t=e.target;for(;t.parentElement&&i(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")})),n.addEventListener(t,"touchmove",(e=>{if(e.target instanceof HTMLElement){if("INPUT"===e.target.tagName)return;if(i(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}}),{passive:!1}),n.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;r!==t&&window.scrollTo(0,r),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)}))}))}}:{},f$(),{before(e){let{doc:t,d:n}=e;n.style(t.documentElement,"overflow","hidden")}}];s.forEach((e=>{let{before:t}=e;return null==t?void 0:t(i)})),s.forEach((e=>{let{after:t}=e;return null==t?void 0:t(i)}))},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}});function g$(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>({containers:[]}),r=Bz(m$),i=t?r.get(t):void 0,s=!!i&&i.count>0;Pz((()=>{if(t&&e)return m$.dispatch("PUSH",t,n),()=>m$.dispatch("POP",t,n)}),[e,t])}(Vz(e,"scroll-lock"),t,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}}))}m$.subscribe((()=>{let e=m$.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&m$.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&m$.dispatch("TEARDOWN",n)}}));let y$=Symbol();function v$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=(0,r.useRef)(t);(0,r.useEffect)((()=>{i.current=t}),[t]);let s=Dz((e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return t.every((e=>null==e||(null==e?void 0:e[y$])))?void 0:s}let b$=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function x$(e){var t,n;let r=null!=(t=e.innerText)?t:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let s=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),s=!0;let o=s?null!=(n=i.innerText)?n:"":r;return b$.test(o)&&(o=o.replace(b$,"")),o}function w$(e){let t=(0,r.useRef)(""),n=(0,r.useRef)("");return Dz((()=>{let r=e.current;if(!r)return"";let i=r.innerText;if(t.current===i)return n.current;let s=function(e){let t=e.getAttribute("aria-label");if("string"==typeof t)return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let e=n.split(" ").map((e=>{let t=document.getElementById(e);if(t){let e=t.getAttribute("aria-label");return"string"==typeof e?e.trim():x$(t).trim()}return null})).filter(Boolean);if(e.length>0)return e.join(", ")}return x$(e).trim()}(r).trim().toLowerCase();return t.current=i,n.current=s,s}))}function _$(e){return[e.screenX,e.screenY]}var S$,E$;"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(S$=null==process?void 0:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})?void 0:S$.NODE_ENV)&&"undefined"==typeof(null==(E$=null==Element?void 0:Element.prototype)?void 0:E$.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join("\n")),[]});var j$=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(j$||{});function k$(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}function C$(e,t,n,i){let[s,o]=(0,r.useState)(n),{hasFlag:a,addFlag:l,removeFlag:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,n]=(0,r.useState)(e),i=(0,r.useCallback)((e=>n(e)),[t]),s=(0,r.useCallback)((e=>n((t=>t|e))),[t]),o=(0,r.useCallback)((e=>(t&e)===e),[t]),a=(0,r.useCallback)((e=>n((t=>t&~e))),[n]),l=(0,r.useCallback)((e=>n((t=>t^e))),[n]);return{flags:t,setFlag:i,addFlag:s,hasFlag:o,removeFlag:a,toggleFlag:l}}(e&&s?3:0),u=(0,r.useRef)(!1),d=(0,r.useRef)(!1),h=Oz();return Pz((()=>{var r;if(e)return n&&o(!0),t?(null==(r=null==i?void 0:i.start)||r.call(i,n),function(e,t){let{prepare:n,run:r,done:i,inFlight:s}=t,o=Az();return function(e,t){let{inFlight:n,prepare:r}=t;if(null!=n&&n.current)return void r();let i=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=i}(e,{prepare:n,inFlight:s}),o.nextFrame((()=>{r(),o.requestAnimationFrame((()=>{o.add(function(e,t){var n,r;let i=Az();if(!e)return i.dispose;let s=!1;i.add((()=>{s=!0}));let o=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter((e=>e instanceof CSSTransition)))?r:[];return 0===o.length?(t(),i.dispose):(Promise.allSettled(o.map((e=>e.finished))).then((()=>{s||t()})),i.dispose)}(e,i))}))})),o.dispose}(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){d.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var e;d.current&&"function"==typeof t.getAnimations&&t.getAnimations().length>0||(u.current=!1,c(7),n||o(!1),null==(e=null==i?void 0:i.end)||e.call(i,n))}})):void(n&&l(3))}),[e,n,t,h]),e?[s,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function T$(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}const N$=Math.min,I$=Math.max,A$=Math.round,O$=Math.floor,P$=e=>({x:e,y:e}),M$={left:"right",right:"left",bottom:"top",top:"bottom"},D$={start:"end",end:"start"};function R$(e,t,n){return I$(e,N$(t,n))}function L$(e,t){return"function"===typeof e?e(t):e}function F$(e){return e.split("-")[0]}function B$(e){return e.split("-")[1]}function U$(e){return"x"===e?"y":"x"}function V$(e){return"y"===e?"height":"width"}function z$(e){return["top","bottom"].includes(F$(e))?"y":"x"}function $$(e){return U$(z$(e))}function H$(e){return e.replace(/start|end/g,(e=>D$[e]))}function W$(e){return e.replace(/left|right|bottom|top/g,(e=>M$[e]))}function q$(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function K$(){return"undefined"!==typeof window}function Y$(e){return Q$(e)?(e.nodeName||"").toLowerCase():"#document"}function G$(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function X$(e){var t;return null==(t=(Q$(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Q$(e){return!!K$()&&(e instanceof Node||e instanceof G$(e).Node)}function Z$(e){return!!K$()&&(e instanceof Element||e instanceof G$(e).Element)}function J$(e){return!!K$()&&(e instanceof HTMLElement||e instanceof G$(e).HTMLElement)}function eH(e){return!(!K$()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof G$(e).ShadowRoot)}function tH(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=aH(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function nH(e){return["table","td","th"].includes(Y$(e))}function rH(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(zW){return!1}}))}function iH(e){const t=sH(),n=Z$(e)?aH(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function sH(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function oH(e){return["html","body","#document"].includes(Y$(e))}function aH(e){return G$(e).getComputedStyle(e)}function lH(e){return Z$(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function cH(e){if("html"===Y$(e))return e;const t=e.assignedSlot||e.parentNode||eH(e)&&e.host||X$(e);return eH(t)?t.host:t}function uH(e){const t=cH(e);return oH(t)?e.ownerDocument?e.ownerDocument.body:e.body:J$(t)&&tH(t)?t:uH(t)}function dH(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=uH(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=G$(i);if(s){const e=hH(o);return t.concat(o,o.visualViewport||[],tH(i)?i:[],e&&n?dH(e):[])}return t.concat(i,dH(i,[],n))}function hH(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fH(e,t,n){let{reference:r,floating:i}=e;const s=z$(t),o=$$(t),a=V$(o),l=F$(t),c="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(B$(t)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1)}return f}async function pH(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=L$(t,e),p=function(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(f),m=a[h?"floating"===d?"reference":"floating":d],g=q$(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),b=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},x=q$(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-x.top+p.top)/b.y,bottom:(x.bottom-g.bottom+p.bottom)/b.y,left:(g.left-x.left+p.left)/b.x,right:(x.right-g.right+p.right)/b.x}}function mH(e){const t=aH(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=J$(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=A$(n)!==s||A$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function gH(e){return Z$(e)?e:e.contextElement}function yH(e){const t=gH(e);if(!J$(t))return P$(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=mH(t);let o=(s?A$(n.width):n.width)/r,a=(s?A$(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const vH=P$(0);function bH(e){const t=G$(e);return sH()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:vH}function xH(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=gH(e);let o=P$(1);t&&(r?Z$(r)&&(o=yH(r)):o=yH(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==G$(e))&&t}(s,n,r)?bH(s):P$(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const e=G$(s),t=r&&Z$(r)?G$(r):r;let n=e,i=hH(n);for(;i&&r&&t!==n;){const e=yH(i),t=i.getBoundingClientRect(),r=aH(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=o,n=G$(i),i=hH(n)}}return q$({width:u,height:d,x:l,y:c})}function wH(e,t){const n=lH(e).scrollLeft;return t?t.left+n:xH(X$(e)).left+n}function _H(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:wH(e,r)),y:r.top+t.scrollTop}}function SH(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=G$(e),r=X$(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const e=sH();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=X$(e),n=lH(e),r=e.ownerDocument.body,i=I$(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=I$(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+wH(e);const a=-n.scrollTop;return"rtl"===aH(r).direction&&(o+=I$(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}(X$(e));else if(Z$(t))r=function(e,t){const n=xH(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=J$(e)?yH(e):P$(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=bH(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return q$(r)}function EH(e,t){const n=cH(e);return!(n===t||!Z$(n)||oH(n))&&("fixed"===aH(n).position||EH(n,t))}function jH(e,t,n){const r=J$(t),i=X$(t),s="fixed"===n,o=xH(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=P$(0);if(r||!r&&!s)if(("body"!==Y$(t)||tH(i))&&(a=lH(t)),r){const e=xH(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=wH(i));const c=!i||r||s?P$(0):_H(i,a);return{x:o.left+a.scrollLeft-l.x-c.x,y:o.top+a.scrollTop-l.y-c.y,width:o.width,height:o.height}}function kH(e){return"static"===aH(e).position}function CH(e,t){if(!J$(e)||"fixed"===aH(e).position)return null;if(t)return t(e);let n=e.offsetParent;return X$(e)===n&&(n=n.ownerDocument.body),n}function TH(e,t){const n=G$(e);if(rH(e))return n;if(!J$(e)){let t=cH(e);for(;t&&!oH(t);){if(Z$(t)&&!kH(t))return t;t=cH(t)}return n}let r=CH(e,t);for(;r&&nH(r)&&kH(r);)r=CH(r,t);return r&&oH(r)&&kH(r)&&!iH(r)?n:r||function(e){let t=cH(e);for(;J$(t)&&!oH(t);){if(iH(t))return t;if(rH(t))return null;t=cH(t)}return null}(e)||n}const NH={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,o=X$(r),a=!!t&&rH(t.floating);if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=P$(1);const u=P$(0),d=J$(r);if((d||!d&&!s)&&(("body"!==Y$(r)||tH(o))&&(l=lH(r)),J$(r))){const e=xH(r);c=yH(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!o||d||s?P$(0):_H(o,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:X$,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[..."clippingAncestors"===n?rH(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=dH(e,[],!1).filter((e=>Z$(e)&&"body"!==Y$(e))),i=null;const s="fixed"===aH(e).position;let o=s?cH(e):e;for(;Z$(o)&&!oH(o);){const t=aH(o),n=iH(o);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||tH(o)&&!n&&EH(e,o))?r=r.filter((e=>e!==o)):i=t,o=cH(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=s[0],a=s.reduce(((e,n)=>{const r=SH(t,n,i);return e.top=I$(r.top,e.top),e.right=N$(r.right,e.right),e.bottom=N$(r.bottom,e.bottom),e.left=I$(r.left,e.left),e}),SH(t,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:TH,getElementRects:async function(e){const t=this.getOffsetParent||TH,n=this.getDimensions,r=await n(e.floating);return{reference:jH(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=mH(e);return{width:t,height:n}},getScale:yH,isElement:Z$,isRTL:function(e){return"rtl"===aH(e).direction}};function IH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function AH(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=gH(e),u=i||s?[...c?dH(c):[],...dH(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const i=X$(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||t(),!h||!f)return;const p={rootMargin:-O$(d)+"px "+-O$(i.clientWidth-(u+h))+"px "+-O$(i.clientHeight-(d+f))+"px "+-O$(u)+"px",threshold:I$(0,N$(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return o();r?o(!1,r):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}1!==r||IH(c,e.getBoundingClientRect())||o(),m=!1}try{r=new IntersectionObserver(g,{...p,root:i.ownerDocument})}catch(zW){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),s}(c,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let m=l?xH(e):null;return l&&function t(){const r=xH(e);m&&!IH(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const OH=pH,PH=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=F$(n),a=B$(n),l="y"===z$(n),c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=L$(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"===typeof p&&(f="end"===a?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},MH=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=L$(e,t),c={x:n,y:r},u=await pH(t,l),d=z$(F$(i)),h=U$(d);let f=c[h],p=c[d];if(s){const e="y"===h?"bottom":"right";f=R$(f+u["y"===h?"top":"left"],f,f-u[e])}if(o){const e="y"===d?"bottom":"right";p=R$(p+u["y"===d?"top":"left"],p,p-u[e])}const m=a.fn({...t,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[d]:o}}}}}},DH=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=L$(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const y=F$(i),v=z$(a),b=F$(a)===a,x=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(b||!m?[W$(a)]:function(e){const t=W$(e);return[H$(e),t,H$(t)]}(a)),_="none"!==p;!h&&_&&w.push(...function(e,t,n,r){const i=B$(e);let s=function(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}(F$(e),"start"===n,r);return i&&(s=s.map((e=>e+"-"+i)),t&&(s=s.concat(s.map(H$)))),s}(a,m,p,x));const S=[a,...w],E=await pH(t,g),j=[];let k=(null==(r=s.flip)?void 0:r.overflows)||[];if(u&&j.push(E[y]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=B$(e),i=$$(e),s=V$(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=W$(o)),[o,W$(o)]}(i,o,x);j.push(E[e[0]],E[e[1]])}if(k=[...k,{placement:i,overflows:j}],!j.every((e=>e<=0))){var C,T;const e=((null==(C=s.flip)?void 0:C.index)||0)+1,t=S[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let n=null==(T=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:T.placement;if(!n)switch(f){case"bestFit":{var N;const e=null==(N=k.filter((e=>{if(_){const t=z$(e.placement);return t===v||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:N[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},RH=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=L$(e,t),u=await pH(t,c),d=F$(i),h=B$(i),f="y"===z$(i),{width:p,height:m}=s.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const v=m-u.top-u.bottom,b=p-u.left-u.right,x=N$(m-u[g],v),w=N$(p-u[y],b),_=!t.middlewareData.shift;let S=x,E=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(E=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(S=v),_&&!h){const e=I$(u.left,0),t=I$(u.right,0),n=I$(u.top,0),r=I$(u.bottom,0);f?E=p-2*(0!==e||0!==t?e+t:I$(u.left,u.right)):S=m-2*(0!==n||0!==r?n+r:I$(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:S});const j=await o.getDimensions(a.floating);return p!==j.width||m!==j.height?{reset:{rects:!0}}:{}}}},LH=(e,t,n)=>{const r=new Map,i={platform:NH,...n},s={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=fH(c,r,l),h=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:n,fn:s}=a[m],{x:g,y:y,data:v,reset:b}=await s({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,f={...f,[n]:{...f[n],...v}},b&&p<=50&&(p++,"object"===typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=fH(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}})(e,t,{...i,platform:s})};var FH="undefined"!==typeof document?r.useLayoutEffect:r.useEffect;function BH(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!BH(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!BH(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function UH(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function VH(e,t){const n=UH(e);return Math.round(t*n)/n}function zH(e){const t=r.useRef(e);return FH((()=>{t.current=e})),t}const $H=(e,t)=>({...PH(e),options:[e,t]}),HH=(e,t)=>({...DH(e),options:[e,t]}),WH=(e,t)=>({...RH(e),options:[e,t]});const qH={...i},KH=qH.useInsertionEffect||(e=>e());function YH(e){const t=r.useRef((()=>{0}));return KH((()=>{t.current=e})),r.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}const GH="ArrowUp",XH="ArrowDown",QH="ArrowLeft",ZH="ArrowRight";var JH="undefined"!==typeof document?r.useLayoutEffect:r.useEffect;const eW=[QH,ZH],tW=[GH,XH];let nW=!1,rW=0;const iW=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+rW++;const sW=qH.useId||function(){const[e,t]=r.useState((()=>nW?iW():void 0));return JH((()=>{null==e&&t(iW())}),[]),r.useEffect((()=>{nW=!0}),[]),e};function oW(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}const aW=r.createContext(null),lW=r.createContext(null),cW=()=>{var e;return(null==(e=r.useContext(aW))?void 0:e.id)||null},uW=()=>r.useContext(lW);const dW="data-floating-ui-focusable";function hW(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:i}=e,s=sW(),o=r.useRef({}),[a]=r.useState((()=>oW())),l=null!=cW(),[c,u]=r.useState(i.reference),d=YH(((e,t,r)=>{o.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)})),h=r.useMemo((()=>({setPositionReference:u})),[]),f=r.useMemo((()=>({reference:c||i.reference||null,floating:i.floating||null,domReference:i.reference})),[c,i.reference,i.floating]);return r.useMemo((()=>({dataRef:o,open:t,onOpenChange:d,elements:f,events:a,floatingId:s,refs:h})),[t,d,f,a,s,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||n,s=i.elements,[a,l]=r.useState(null),[c,u]=r.useState(null),d=(null==s?void 0:s.domReference)||a,h=r.useRef(null),f=uW();JH((()=>{d&&(h.current=d)}),[d]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:s,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=e,[h,f]=r.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=r.useState(i);BH(p,i)||m(i);const[g,y]=r.useState(null),[v,b]=r.useState(null),x=r.useCallback((e=>{e!==E.current&&(E.current=e,y(e))}),[]),w=r.useCallback((e=>{e!==j.current&&(j.current=e,b(e))}),[]),_=a||g,S=l||v,E=r.useRef(null),j=r.useRef(null),k=r.useRef(h),C=null!=u,T=zH(u),N=zH(s),I=zH(d),A=r.useCallback((()=>{if(!E.current||!j.current)return;const e={placement:t,strategy:n,middleware:p};N.current&&(e.platform=N.current),LH(E.current,j.current,e).then((e=>{const t={...e,isPositioned:!1!==I.current};O.current&&!BH(k.current,t)&&(k.current=t,o.flushSync((()=>{f(t)})))}))}),[p,t,n,N,I]);FH((()=>{!1===d&&k.current.isPositioned&&(k.current.isPositioned=!1,f((e=>({...e,isPositioned:!1}))))}),[d]);const O=r.useRef(!1);FH((()=>(O.current=!0,()=>{O.current=!1})),[]),FH((()=>{if(_&&(E.current=_),S&&(j.current=S),_&&S){if(T.current)return T.current(_,S,A);A()}}),[_,S,A,T,C]);const P=r.useMemo((()=>({reference:E,floating:j,setReference:x,setFloating:w})),[x,w]),M=r.useMemo((()=>({reference:_,floating:S})),[_,S]),D=r.useMemo((()=>{const e={position:n,left:0,top:0};if(!M.floating)return e;const t=VH(M.floating,h.x),r=VH(M.floating,h.y);return c?{...e,transform:"translate("+t+"px, "+r+"px)",...UH(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,c,M.floating,h.x,h.y]);return r.useMemo((()=>({...h,update:A,refs:P,elements:M,floatingStyles:D})),[h,A,P,M,D])}({...e,elements:{...s,...c&&{reference:c}}}),m=r.useCallback((e=>{const t=Z$(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u(t),p.refs.setReference(t)}),[p.refs]),g=r.useCallback((e=>{(Z$(e)||null===e)&&(h.current=e,l(e)),(Z$(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!Z$(e))&&p.refs.setReference(e)}),[p.refs]),y=r.useMemo((()=>({...p.refs,setReference:g,setPositionReference:m,domReference:h})),[p.refs,g,m]),v=r.useMemo((()=>({...p.elements,domReference:d})),[p.elements,d]),b=r.useMemo((()=>({...p,...i,refs:y,elements:v,nodeId:t})),[p,y,v,t,i]);return JH((()=>{i.dataRef.current.floatingContext=b;const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===t));e&&(e.context=b)})),r.useMemo((()=>({...p,context:b,refs:y,elements:v})),[p,y,v,b])}const fW="active",pW="selected";function mW(e,t,n){const r=new Map,i="item"===n;let s=e;if(i&&e){const{[fW]:t,[pW]:n,...r}=e;s=r}return{..."floating"===n&&{tabIndex:-1,[dW]:""},...s,...t.map((t=>{const r=t?t[n]:null;return"function"===typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,s]=t;var o;i&&[fW,pW].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"===typeof s&&(null==(o=r.get(n))||o.push(s),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return null==(e=r.get(n))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[n]=s)})),e):e),{})}}function gW(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}let yW=(0,r.createContext)({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});yW.displayName="FloatingContext";let vW=(0,r.createContext)(null);vW.displayName="PlacementContext";function bW(e){let{children:t,enabled:n=!0}=e,[i,s]=(0,r.useState)(null),[a,l]=(0,r.useState)(0),c=(0,r.useRef)(null),[u,d]=(0,r.useState)(null);!function(e){Pz((()=>{if(!e)return;let t=new MutationObserver((()=>{let t=window.getComputedStyle(e).maxHeight,n=parseFloat(t);if(isNaN(n))return;let r=parseInt(t);isNaN(r)||n!==r&&(e.style.maxHeight=`${Math.ceil(n)}px`)}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}}),[e])}(u);let h=n&&null!==i&&null!==u,{to:f="bottom",gap:p=0,offset:m=0,padding:g=0,inner:y}=function(e,t){var n,r,i;let s=xW(null!=(n=null==e?void 0:e.gap)?n:"var(--anchor-gap, 0)",t),o=xW(null!=(r=null==e?void 0:e.offset)?r:"var(--anchor-offset, 0)",t),a=xW(null!=(i=null==e?void 0:e.padding)?i:"var(--anchor-padding, 0)",t);return{...e,gap:s,offset:o,padding:a}}(i,u),[v,b="center"]=f.split(" ");Pz((()=>{h&&l(0)}),[h]);let{refs:x,floatingStyles:w,context:_}=hW({open:h,placement:"selection"===v?"center"===b?"bottom":`bottom-${b}`:"center"===b?`${v}`:`${v}-${b}`,strategy:"absolute",transform:!1,middleware:[$H({mainAxis:"selection"===v?0:p,crossAxis:m}),(k={padding:g},{...MH(k),options:[k,C]}),"selection"!==v&&HH({padding:g}),"selection"===v&&y?(j={...y,padding:g,overflowRef:c,offset:a,minItemsVisible:4,referenceOverflowThreshold:g,onFallbackChange(e){var t,n;if(!e)return;let r=_.elements.floating;if(!r)return;let i=parseFloat(getComputedStyle(r).scrollPaddingBottom)||0,s=Math.min(4,r.childElementCount),o=0,a=0;for(let l of null!=(n=null==(t=_.elements.floating)?void 0:t.childNodes)?n:[])if(l instanceof HTMLElement){let e=l.offsetTop,t=e+l.clientHeight+i,n=r.scrollTop,c=n+r.clientHeight;if(!(e>=n&&t<=c)){a=Math.max(0,Math.min(t,c)-Math.max(e,n)),o=l.clientHeight;break}s--}s>=1&&l((e=>{let t=o*s-a+i;return e>=t?e:t}))}},{name:"inner",options:j,async fn(e){const{listRef:t,overflowRef:n,onFallbackChange:r,offset:i=0,index:s=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=L$(j,e),{rects:d,elements:{floating:h}}=e,f=t.current[s],p=(null==c?void 0:c.current)||h,m=h.clientTop||p.clientTop,g=0!==h.clientTop,y=0!==p.clientTop,v=h===p;if(!f)return{};const b={...e,...await $H(-f.offsetTop-h.clientTop-d.reference.height/2-f.offsetHeight/2-i).fn(e)},x=await OH(gW(b,p.scrollHeight+m+h.clientTop),u),w=await OH(b,{...u,elementContext:"reference"}),_=I$(0,x.top),S=b.y+_,E=p.scrollHeight>p.clientHeight?e=>e:A$,k=E(I$(0,p.scrollHeight+(g&&v||y?2*m:0)-_-I$(0,x.bottom)));if(p.style.maxHeight=k+"px",p.scrollTop=_,r){const e=p.offsetHeight<f.offsetHeight*N$(a,t.current.length)-1||w.top>=-l||w.bottom>=-l;o.flushSync((()=>r(e)))}return n&&(n.current=await OH(gW({...b,y:S},p.offsetHeight+m+h.clientTop),u)),{y:S}}}):null,WH({padding:g,apply(e){let{availableWidth:t,availableHeight:n,elements:r}=e;Object.assign(r.floating.style,{overflow:"auto",maxWidth:`${t}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${n}px)`})}})].filter(Boolean),whileElementsMounted:AH}),[S=v,E=b]=_.placement.split("-");var j,k,C;"selection"===v&&(S="selection");let T=(0,r.useMemo)((()=>({anchor:[S,E].filter(Boolean).join(" ")})),[S,E]),N=function(e,t){const{open:n,elements:i}=e,{enabled:s=!0,overflowRef:a,scrollRef:l,onChange:c}=t,u=YH(c),d=r.useRef(!1),h=r.useRef(null),f=r.useRef(null);r.useEffect((()=>{if(!s)return;function e(e){if(e.ctrlKey||!t||null==a.current)return;const n=e.deltaY,r=a.current.top>=-.5,i=a.current.bottom>=-.5,s=t.scrollHeight-t.clientHeight,l=n<0?-1:1,c=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!i&&n<0?(e.preventDefault(),o.flushSync((()=>{u((e=>e+Math[c](n,s*l)))}))):/firefox/i.test(T$())&&(t.scrollTop+=n))}const t=(null==l?void 0:l.current)||i.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{h.current=t.scrollTop,null!=a.current&&(f.current={...a.current})})),()=>{h.current=null,f.current=null,t.removeEventListener("wheel",e)}):void 0}),[s,n,i.floating,a,l,u]);const p=r.useMemo((()=>({onKeyDown(){d.current=!0},onWheel(){d.current=!1},onPointerMove(){d.current=!1},onScroll(){const e=(null==l?void 0:l.current)||i.floating;if(a.current&&e&&d.current){if(null!==h.current){const t=e.scrollTop-h.current;(a.current.bottom<-.5&&t<-1||a.current.top<-.5&&t>1)&&o.flushSync((()=>u((e=>e+t))))}requestAnimationFrame((()=>{h.current=e.scrollTop}))}}})),[i.floating,u,a,l]);return r.useMemo((()=>s?{floating:p}:{}),[s,p])}(_,{overflowRef:c,onChange:l}),{getReferenceProps:I,getFloatingProps:A}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),i=e.map((e=>null==e?void 0:e.item)),s=r.useCallback((t=>mW(t,e,"reference")),t),o=r.useCallback((t=>mW(t,e,"floating")),n),a=r.useCallback((t=>mW(t,e,"item")),i);return r.useMemo((()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:a})),[s,o,a])}([N]),O=Dz((e=>{d(e),x.setFloating(e)}));return r.createElement(vW.Provider,{value:s},r.createElement(yW.Provider,{value:{setFloating:O,setReference:x.setReference,styles:w,getReferenceProps:I,getFloatingProps:A,slot:T}},t))}function xW(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=Oz(),s=Dz(((e,t)=>{if(null==e)return[n,null];if("number"==typeof e)return[e,null];if("string"==typeof e){if(!t)return[n,null];let r=_W(e,t);return[r,n=>{let s=wW(e);{let o=s.map((e=>window.getComputedStyle(t).getPropertyValue(e)));i.requestAnimationFrame((function a(){i.nextFrame(a);let l=!1;for(let[e,n]of s.entries()){let r=window.getComputedStyle(t).getPropertyValue(n);if(o[e]!==r){o[e]=r,l=!0;break}}if(!l)return;let c=_W(e,t);r!==c&&(n(c),r=c)}))}return i.dispose}]}return[n,null]})),o=(0,r.useMemo)((()=>s(e,t)[0]),[e,t]),[a=o,l]=(0,r.useState)();return Pz((()=>{let[n,r]=s(e,t);if(l(n),r)return r(l)}),[e,t]),a}function wW(e){let t=/var\((.*)\)/.exec(e);if(t){let e=t[1].indexOf(",");if(-1===e)return[t[1]];let n=t[1].slice(0,e).trim(),r=t[1].slice(e+1).trim();return r?[n,...wW(r)]:[n]}return[]}function _W(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}let SW=(0,r.createContext)(null);SW.displayName="OpenClosedContext";var EW=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(EW||{});function jW(){return(0,r.useContext)(SW)}function kW(e){let{value:t,children:n}=e;return r.createElement(SW.Provider,{value:t},n)}function CW(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}var TW=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(TW||{});function NW(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=null!=r?r:-1;switch(e.focus){case 0:for(let e=0;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 1:-1===i&&(i=n.length);for(let e=i-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 2:for(let e=i+1;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 3:for(let e=n.length-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 4:for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return r;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}function IW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}var AW=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(AW||{}),OW=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(OW||{});function PW(){let e=function(){let e=(0,r.useRef)([]),t=(0,r.useCallback)((t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)}),[]);return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.every((e=>null==e)))return e.current=r,t}}();return(0,r.useCallback)((t=>function(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:s,visible:o=!0,name:a,mergeRefs:l}=e;l=null!=l?l:DW;let c=RW(n,t);if(o)return MW(c,r,i,a,l);let u=null!=s?s:0;if(2&u){let{static:e=!1,...t}=c;if(e)return MW(t,r,i,a,l)}if(1&u){let{unmount:e=!0,...t}=c;return Kz(e?0:1,{0:()=>null,1:()=>MW({...t,hidden:!0,style:{display:"none"}},r,i,a,l)})}return MW(c,r,i,a,l)}({mergeRefs:e,...t})),[e])}function MW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,{as:o=n,children:a,refName:l="ref",...c}=UW(e,["unmount","static"]),u=void 0!==e.ref?{[l]:e.ref}:{},d="function"==typeof a?a(t):a;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(t){let e=!1,n=[];for(let[r,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&n.push(r.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)));if(e){h["data-headlessui-state"]=n.join(" ");for(let e of n)h[`data-${e}`]=""}}if(o===r.Fragment&&(Object.keys(BW(c)).length>0||Object.keys(BW(h)).length>0)){if((0,r.isValidElement)(d)&&!(Array.isArray(d)&&d.length>1)){let e=d.props,t=null==e?void 0:e.className,n="function"==typeof t?function(){return IW(t(...arguments),c.className)}:IW(t,c.className),i=n?{className:n}:{},o=RW(d.props,BW(UW(c,["ref"])));for(let r in h)r in o&&delete h[r];return(0,r.cloneElement)(d,Object.assign({},o,h,u,{ref:s(VW(d),u.ref)},i))}if(Object.keys(BW(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(BW(c)).concat(Object.keys(BW(h))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"))}return(0,r.createElement)(o,Object.assign({},UW(c,["ref"]),o!==r.Fragment&&u,o!==r.Fragment&&h),d)}function DW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}function RW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let s of t)for(let e in s)e.startsWith("on")&&"function"==typeof s[e]?(null!=i[e]||(i[e]=[]),i[e].push(s[e])):r[e]=s[e];if(r.disabled||r["aria-disabled"])for(let s in i)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(i[s]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let s in i)Object.assign(r,{[s](e){let t=i[s];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function LW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let s of t)for(let e in s)e.startsWith("on")&&"function"==typeof s[e]?(null!=i[e]||(i[e]=[]),i[e].push(s[e])):r[e]=s[e];for(let s in i)Object.assign(r,{[s](){let e=i[s];for(let t of e)null==t||t(...arguments)}});return r}function FW(e){var t;return Object.assign((0,r.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function BW(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function UW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function VW(e){return r.version.split(".")[0]>="19"?e.props.ref:e.ref}let zW=(0,r.createContext)(void 0);function $W(){return(0,r.useContext)(zW)}let HW=(0,r.createContext)(null);function WW(){let e=(0,r.useContext)(HW);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,WW),e}return e}HW.displayName="DescriptionContext";let qW=FW((function(e,t){let n=(0,r.useId)(),i=$W(),{id:s=`headlessui-description-${n}`,...o}=e,a=WW(),l=v$(t);Pz((()=>a.register(s)),[s,a.register]);let c=i||!1,u=(0,r.useMemo)((()=>({...a.slot,disabled:c})),[a.slot,c]),d={ref:l,...a.props,id:s};return PW()({ourProps:d,theirProps:o,slot:u,defaultTag:"p",name:a.name||"Description"})}));Object.assign(qW,{});var KW=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(KW||{});let YW=(0,r.createContext)(void 0);let GW=(0,r.createContext)(null);function XW(){let e=(0,r.useContext)(GW);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,XW),e}return e}function QW(){let{inherit:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){var t,n,i;let s=null!=(n=null==(t=(0,r.useContext)(GW))?void 0:t.value)?n:void 0;return(null!=(i=null==e?void 0:e.length)?i:0)>0?[s,...e].filter(Boolean).join(" "):s}(),[n,i]=(0,r.useState)([]),s=e?[t,...n].filter(Boolean):n;return[s.length>0?s.join(" "):void 0,(0,r.useMemo)((()=>function(e){let t=Dz((e=>(i((t=>[...t,e])),()=>i((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),n=(0,r.useMemo)((()=>({register:t,slot:e.slot,name:e.name,props:e.props,value:e.value})),[t,e.slot,e.name,e.props,e.value]);return r.createElement(GW.Provider,{value:n},e.children)}),[i])]}GW.displayName="LabelContext";let ZW=FW((function(e,t){var n;let i=(0,r.useId)(),s=XW(),o=(0,r.useContext)(YW),a=$W(),{id:l=`headlessui-label-${i}`,htmlFor:c=(null!=o?o:null==(n=s.props)?void 0:n.htmlFor),passive:u=!1,...d}=e,h=v$(t);Pz((()=>s.register(l)),[l,s.register]);let f=Dz((e=>{let t=e.currentTarget;if(t instanceof HTMLLabelElement&&e.preventDefault(),s.props&&"onClick"in s.props&&"function"==typeof s.props.onClick&&s.props.onClick(e),t instanceof HTMLLabelElement){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(e instanceof HTMLInputElement&&("radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}})),p=a||!1,m=(0,r.useMemo)((()=>({...s.slot,disabled:p})),[s.slot,p]),g={ref:h,...s.props,id:l,htmlFor:c,onClick:f};return u&&("onClick"in g&&(delete g.htmlFor,delete g.onClick),"onClick"in d&&delete d.onClick),PW()({ourProps:g,theirProps:d,slot:m,defaultTag:c?"label":"div",name:s.name||"Label"})}));Object.assign(ZW,{});function JW(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(i)((()=>()=>{}),(()=>!1),(()=>!e))}(),[t,n]=r.useState(Tz.isHandoffComplete);return t&&!1===Tz.isHandoffComplete&&n(!1),r.useEffect((()=>{!0!==t&&n(!0)}),[t]),r.useEffect((()=>Tz.handoff()),[]),!e&&t}let eq=(0,r.createContext)(!1);function tq(e){let t=(0,r.useContext)(eq),n=(0,r.useContext)(sq),i=d$(e),[s,o]=(0,r.useState)((()=>{var e;if(!t&&null!==n)return null!=(e=n.current)?e:null;if(Tz.isServer)return null;let r=null==i?void 0:i.getElementById("headlessui-portal-root");if(r)return r;if(null===i)return null;let s=i.createElement("div");return s.setAttribute("id","headlessui-portal-root"),i.body.appendChild(s)}));return(0,r.useEffect)((()=>{null!==s&&(null!=i&&i.body.contains(s)||null==i||i.body.appendChild(s))}),[s,i]),(0,r.useEffect)((()=>{t||null!==n&&o(n.current)}),[n,o,t]),s}let nq=r.Fragment,rq=FW((function(e,t){let n=e,i=(0,r.useRef)(null),s=v$(function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[y$]:t})}((e=>{i.current=e})),t),a=d$(i),l=tq(i),[c]=(0,r.useState)((()=>{var e;return Tz.isServer?null:null!=(e=null==a?void 0:a.createElement("div"))?e:null})),u=(0,r.useContext)(oq),d=JW();Pz((()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))}),[l,c]),Pz((()=>{if(c&&u)return u.register(c)}),[u,c]),function(e){let t=Dz(e),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>(n.current=!1,()=>{n.current=!0,Iz((()=>{n.current&&t()}))})),[t])}((()=>{var e;!l||!c||(c instanceof Node&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&(null==(e=l.parentElement)||e.removeChild(l)))}));let h=PW();return d&&l&&c?(0,o.createPortal)(h({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:nq,name:"Portal"}),c):null}));let iq=r.Fragment,sq=(0,r.createContext)(null);let oq=(0,r.createContext)(null);let aq=FW((function(e,t){let n=v$(t),{enabled:i=!0,...s}=e,o=PW();return i?r.createElement(rq,{...s,ref:n}):o({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:nq,name:"Portal"})})),lq=FW((function(e,t){let{target:n,...i}=e,s={ref:v$(t)},o=PW();return r.createElement(sq.Provider,{value:n},o({ourProps:s,theirProps:i,defaultTag:iq,name:"Popover.Group"}))})),cq=Object.assign(aq,{Group:lq});var uq=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(uq||{}),dq=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(dq||{}),hq=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(hq||{});function fq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,r=s$(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),i=n?r.indexOf(n):null;return-1===i&&(i=null),{items:r,activeItemIndex:i}}let pq={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var n,r,i,s,o;if(1===e.menuState)return e;let a={...e,searchQuery:"",activationTrigger:null!=(n=t.trigger)?n:1,__demoMode:!1};if(t.focus===TW.Nothing)return{...a,activeItemIndex:null};if(t.focus===TW.Specific)return{...a,activeItemIndex:e.items.findIndex((e=>e.id===t.id))};if(t.focus===TW.Previous){let n=e.activeItemIndex;if(null!==n){let s=e.items[n].dataRef.current.domRef,o=NW(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==o){let t=e.items[o].dataRef.current.domRef;if((null==(r=s.current)?void 0:r.previousElementSibling)===t.current||null===(null==(i=t.current)?void 0:i.previousElementSibling))return{...a,activeItemIndex:o}}}}else if(t.focus===TW.Next){let n=e.activeItemIndex;if(null!==n){let r=e.items[n].dataRef.current.domRef,i=NW(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==i){let t=e.items[i].dataRef.current.domRef;if((null==(s=r.current)?void 0:s.nextElementSibling)===t.current||null===(null==(o=t.current)?void 0:o.nextElementSibling))return{...a,activeItemIndex:i}}}}let l=fq(e),c=NW(t,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...a,...l,activeItemIndex:c}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))&&!e.dataRef.current.disabled})),s=i?e.items.indexOf(i):-1;return-1===s||s===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=fq(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=fq(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},mq=(0,r.createContext)(null);function gq(e){let t=(0,r.useContext)(mq);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,gq),t}return t}function yq(e,t){return Kz(t.type,pq,e,t)}mq.displayName="MenuContext";let vq=r.Fragment;let bq=AW.RenderStrategy|AW.Static;let xq=r.Fragment;let wq=FW((function(e,t){let{__demoMode:n=!1,...i}=e,s=(0,r.useReducer)(yq,{__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:o,itemsElement:a,buttonElement:l},c]=s,u=v$(t);u$(0===o,[l,a],((e,t)=>{c({type:1}),t$(t,e$.Loose)||(e.preventDefault(),null==l||l.focus())}));let d=Dz((()=>{c({type:1})})),h=(0,r.useMemo)((()=>({open:0===o,close:d})),[o,d]),f={ref:u},p=PW();return r.createElement(bW,null,r.createElement(mq.Provider,{value:s},r.createElement(kW,{value:Kz(o,{0:EW.Open,1:EW.Closed})},p({ourProps:f,theirProps:i,slot:h,defaultTag:vq,name:"Menu"}))))})),_q=FW((function(e,t){var n;let i=(0,r.useId)(),{id:s=`headlessui-menu-button-${i}`,disabled:a=!1,autoFocus:l=!1,...c}=e,[u,d]=gq("Menu.Button"),h=(0,r.useContext)(yW).getReferenceProps,f=v$(t,(0,r.useContext)(yW).setReference,Dz((e=>d({type:7,element:e})))),p=Dz((e=>{switch(e.key){case KW.Space:case KW.Enter:case KW.ArrowDown:e.preventDefault(),e.stopPropagation(),(0,o.flushSync)((()=>d({type:0}))),d({type:2,focus:TW.First});break;case KW.ArrowUp:e.preventDefault(),e.stopPropagation(),(0,o.flushSync)((()=>d({type:0}))),d({type:2,focus:TW.Last})}})),m=Dz((e=>{if(e.key===KW.Space)e.preventDefault()})),g=Dz((e=>{var t;if(CW(e.currentTarget))return e.preventDefault();a||(0===u.menuState?((0,o.flushSync)((()=>d({type:1}))),null==(t=u.buttonElement)||t.focus({preventScroll:!0})):(e.preventDefault(),d({type:0})))})),{isFocusVisible:y,focusProps:v}=xz({autoFocus:l}),{isHovered:b,hoverProps:x}=function(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:i,isDisabled:s}=e,[o,a]=(0,r.useState)(!1),l=(0,r.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,r.useEffect)(jz,[]);let{hoverProps:c,triggerHoverEnd:u}=(0,r.useMemo)((()=>{let e=(e,r)=>{if(l.pointerType=r,s||"touch"===r||l.isHovered||!e.currentTarget.contains(e.target))return;l.isHovered=!0;let i=e.currentTarget;l.target=i,t&&t({type:"hoverstart",target:i,pointerType:r}),n&&n(!0),a(!0)},r=(e,t)=>{if(l.pointerType="",l.target=null,"touch"===t||!l.isHovered)return;l.isHovered=!1;let r=e.currentTarget;i&&i({type:"hoverend",target:r,pointerType:t}),n&&n(!1),a(!1)},o={};return"undefined"!==typeof PointerEvent?(o.onPointerEnter=t=>{wz&&"mouse"===t.pointerType||e(t,t.pointerType)},o.onPointerLeave=e=>{!s&&e.currentTarget.contains(e.target)&&r(e,e.pointerType)}):(o.onTouchStart=()=>{l.ignoreEmulatedMouseEvents=!0},o.onMouseEnter=t=>{l.ignoreEmulatedMouseEvents||wz||e(t,"mouse"),l.ignoreEmulatedMouseEvents=!1},o.onMouseLeave=e=>{!s&&e.currentTarget.contains(e.target)&&r(e,"mouse")}),{hoverProps:o,triggerHoverEnd:r}}),[t,n,i,s,l]);return(0,r.useEffect)((()=>{s&&u({currentTarget:l.target},l.pointerType)}),[s]),{hoverProps:c,isHovered:o}}({isDisabled:a}),{pressed:w,pressProps:_}=function(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1),s=Oz(),o=Dz((()=>{t.current=null,i(!1),s.dispose()})),a=Dz((e=>{if(s.dispose(),null===t.current){t.current=e.currentTarget,i(!0);{let n=Nz(e.currentTarget);s.addEventListener(n,"pointerup",o,!1),s.addEventListener(n,"pointermove",(e=>{if(t.current){let n=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);i(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(n,t.current.getBoundingClientRect()))}}),!1),s.addEventListener(n,"pointercancel",o,!1)}}}));return{pressed:n,pressProps:e?{}:{onPointerDown:a,onPointerUp:o,onClick:o}}}({disabled:a}),S=(0,r.useMemo)((()=>({open:0===u.menuState,active:w||0===u.menuState,disabled:a,hover:b,focus:y,autofocus:l})),[u,b,y,w,a,l]),E=LW(h(),{ref:f,id:s,type:h$(e,u.buttonElement),"aria-haspopup":"menu","aria-controls":null==(n=u.itemsElement)?void 0:n.id,"aria-expanded":0===u.menuState,disabled:a||void 0,autoFocus:l,onKeyDown:p,onKeyUp:m,onClick:g},v,x,_);return PW()({ourProps:E,theirProps:c,slot:S,defaultTag:"button",name:"Menu.Button"})})),Sq=FW((function(e,t){var n,i;let s=(0,r.useId)(),{id:a=`headlessui-menu-items-${s}`,anchor:l,portal:c=!1,modal:u=!0,transition:d=!1,...h}=e,f=function(e){return(0,r.useMemo)((()=>e?"string"==typeof e?{to:e}:e:null),[e])}(l),[p,m]=gq("Menu.Items"),[g,y]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===e&&(e=null),"string"==typeof e&&(e={to:e});let t=(0,r.useContext)(vW),n=(0,r.useMemo)((()=>e),[JSON.stringify(e,((e,t)=>{var n;return null!=(n=null==t?void 0:t.outerHTML)?n:t}))]);Pz((()=>{null==t||t(null!=n?n:null)}),[t,n]);let i=(0,r.useContext)(yW);return(0,r.useMemo)((()=>[i.setFloating,e?i.styles:{}]),[i.setFloating,e,i.styles])}(f),v=function(){let{getFloatingProps:e,slot:t}=(0,r.useContext)(yW);return(0,r.useCallback)((function(){return Object.assign({},e(...arguments),{"data-anchor":t.anchor})}),[e,t])}(),[b,x]=(0,r.useState)(null),w=v$(t,f?g:null,Dz((e=>m({type:8,element:e}))),x),_=d$(p.itemsElement);f&&(c=!0);let S=jW(),[E,j]=C$(d,b,null!==S?(S&EW.Open)===EW.Open:0===p.menuState);!function(e,t,n){let i=Mz((e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&n()}));(0,r.useEffect)((()=>{if(!e)return;let n=null===t?null:t instanceof HTMLElement?t:t.current;if(!n)return;let r=Az();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver((()=>i.current(n)));e.observe(n),r.add((()=>e.disconnect()))}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver((()=>i.current(n)));e.observe(n),r.add((()=>e.disconnect()))}return()=>r.dispose()}),[t,i,e])}(E,p.buttonElement,(()=>{m({type:1})})),g$(!p.__demoMode&&(u&&0===p.menuState),_),qz(!p.__demoMode&&(u&&0===p.menuState),{allowed:(0,r.useCallback)((()=>[p.buttonElement,p.itemsElement]),[p.buttonElement,p.itemsElement])});let k=!function(e,t){let n=(0,r.useRef)({left:0,top:0});if(Pz((()=>{if(!t)return;let e=t.getBoundingClientRect();e&&(n.current=e)}),[e,t]),null==t||!e||t===document.activeElement)return!1;let i=t.getBoundingClientRect();return i.top!==n.current.top||i.left!==n.current.left}(0!==p.menuState,p.buttonElement)&&E;(0,r.useEffect)((()=>{let e=p.itemsElement;e&&0===p.menuState&&e!==(null==_?void 0:_.activeElement)&&e.focus({preventScroll:!0})}),[p.menuState,p.itemsElement,_]),function(e,t){let{container:n,accept:i,walk:s}=t,o=(0,r.useRef)(i),a=(0,r.useRef)(s);(0,r.useEffect)((()=>{o.current=i,a.current=s}),[i,s]),Pz((()=>{if(!n||!e)return;let t=Nz(n);if(!t)return;let r=o.current,i=a.current,s=Object.assign((e=>r(e)),{acceptNode:r}),l=t.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,s,!1);for(;l.nextNode();)i(l.currentNode)}),[n,e,o,a])}(0===p.menuState,{container:p.itemsElement,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let C=Oz(),T=Dz((e=>{var t,n,r;switch(C.dispose(),e.key){case KW.Space:if(""!==p.searchQuery)return e.preventDefault(),e.stopPropagation(),m({type:3,value:e.key});case KW.Enter:if(e.preventDefault(),e.stopPropagation(),m({type:1}),null!==p.activeItemIndex){let{dataRef:e}=p.items[p.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}n$(p.buttonElement);break;case KW.ArrowDown:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:TW.Next});case KW.ArrowUp:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:TW.Previous});case KW.Home:case KW.PageUp:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:TW.First});case KW.End:case KW.PageDown:return e.preventDefault(),e.stopPropagation(),m({type:2,focus:TW.Last});case KW.Escape:e.preventDefault(),e.stopPropagation(),(0,o.flushSync)((()=>m({type:1}))),null==(r=p.buttonElement)||r.focus({preventScroll:!0});break;case KW.Tab:e.preventDefault(),e.stopPropagation(),(0,o.flushSync)((()=>m({type:1}))),o$(p.buttonElement,e.shiftKey?Xz.Previous:Xz.Next);break;default:1===e.key.length&&(m({type:3,value:e.key}),C.setTimeout((()=>m({type:4})),350))}})),N=Dz((e=>{if(e.key===KW.Space)e.preventDefault()})),I=(0,r.useMemo)((()=>({open:0===p.menuState})),[p.menuState]),A=LW(f?v():{},{"aria-activedescendant":null===p.activeItemIndex||null==(n=p.items[p.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(i=p.buttonElement)?void 0:i.id,id:a,onKeyDown:T,onKeyUp:N,role:"menu",tabIndex:0===p.menuState?0:void 0,ref:w,style:{...h.style,...y,"--button-width":Rz(p.buttonElement,!0).width},...k$(j)}),O=PW();return r.createElement(cq,{enabled:!!c&&(e.static||E)},O({ourProps:A,theirProps:h,slot:I,defaultTag:"div",features:bq,visible:k,name:"Menu.Items"}))})),Eq=FW((function(e,t){let n=(0,r.useId)(),{id:i=`headlessui-menu-item-${n}`,disabled:s=!1,...o}=e,[a,l]=gq("Menu.Item"),c=null!==a.activeItemIndex&&a.items[a.activeItemIndex].id===i,u=(0,r.useRef)(null),d=v$(t,u);Pz((()=>{if(!a.__demoMode&&0===a.menuState&&c&&0!==a.activationTrigger)return Az().requestAnimationFrame((()=>{var e,t;null==(t=null==(e=u.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})}))}),[a.__demoMode,u,c,a.menuState,a.activationTrigger,a.activeItemIndex]);let h=w$(u),f=(0,r.useRef)({disabled:s,domRef:u,get textValue(){return h()}});Pz((()=>{f.current.disabled=s}),[f,s]),Pz((()=>(l({type:5,id:i,dataRef:f}),()=>l({type:6,id:i}))),[f,i]);let p=Dz((()=>{l({type:1})})),m=Dz((e=>{if(s)return e.preventDefault();l({type:1}),n$(a.buttonElement)})),g=Dz((()=>{if(s)return l({type:2,focus:TW.Nothing});l({type:2,focus:TW.Specific,id:i})})),y=function(){let e=(0,r.useRef)([-1,-1]);return{wasMoved(t){let n=_$(t);return(e.current[0]!==n[0]||e.current[1]!==n[1])&&(e.current=n,!0)},update(t){e.current=_$(t)}}}(),v=Dz((e=>{y.update(e),!s&&(c||l({type:2,focus:TW.Specific,id:i,trigger:0}))})),b=Dz((e=>{y.wasMoved(e)&&(s||c||l({type:2,focus:TW.Specific,id:i,trigger:0}))})),x=Dz((e=>{y.wasMoved(e)&&(s||c&&l({type:2,focus:TW.Nothing}))})),[w,_]=QW(),[S,E]=function(){let[e,t]=(0,r.useState)([]);return[e.length>0?e.join(" "):void 0,(0,r.useMemo)((()=>function(e){let n=Dz((e=>(t((t=>[...t,e])),()=>t((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,r.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value})),[n,e.slot,e.name,e.props,e.value]);return r.createElement(HW.Provider,{value:i},e.children)}),[t])]}(),j=(0,r.useMemo)((()=>({active:c,focus:c,disabled:s,close:p})),[c,s,p]),k={id:i,ref:d,role:"menuitem",tabIndex:!0===s?void 0:-1,"aria-disabled":!0===s||void 0,"aria-labelledby":w,"aria-describedby":S,disabled:void 0,onClick:m,onFocus:g,onPointerEnter:v,onMouseEnter:v,onPointerMove:b,onMouseMove:b,onPointerLeave:x,onMouseLeave:x},C=PW();return r.createElement(_,null,r.createElement(E,null,C({ourProps:k,theirProps:o,slot:j,defaultTag:xq,name:"Menu.Item"})))})),jq=FW((function(e,t){let[n,i]=QW(),s=e,o={ref:t,"aria-labelledby":n,role:"group"},a=PW();return r.createElement(i,null,a({ourProps:o,theirProps:s,slot:{},defaultTag:"div",name:"Menu.Section"}))})),kq=FW((function(e,t){let n=(0,r.useId)(),{id:i=`headlessui-menu-heading-${n}`,...s}=e,o=XW();Pz((()=>o.register(i)),[i,o.register]);let a={id:i,ref:t,role:"presentation",...o.props};return PW()({ourProps:a,theirProps:s,slot:{},defaultTag:"header",name:"Menu.Heading"})})),Cq=FW((function(e,t){let n=e,r={ref:t,role:"separator"};return PW()({ourProps:r,theirProps:n,slot:{},defaultTag:"div",name:"Menu.Separator"})})),Tq=Object.assign(wq,{Button:_q,Items:Sq,Item:Eq,Section:jq,Heading:kq,Separator:Cq});function Nq(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(t=e.as)?t:Dq)!==r.Fragment||1===r.Children.count(e.children)}let Iq=(0,r.createContext)(null);Iq.displayName="TransitionContext";var Aq=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Aq||{});let Oq=(0,r.createContext)(null);function Pq(e){return"children"in e?Pq(e.children):e.current.filter((e=>{let{el:t}=e;return null!==t.current})).filter((e=>{let{state:t}=e;return"visible"===t})).length>0}function Mq(e,t){let n=Mz(e),i=(0,r.useRef)([]),s=function(){let e=(0,r.useRef)(!1);return Pz((()=>(e.current=!0,()=>{e.current=!1})),[]),e}(),o=Oz(),a=Dz((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OW.Hidden,r=i.current.findIndex((t=>{let{el:n}=t;return n===e}));-1!==r&&(Kz(t,{[OW.Unmount](){i.current.splice(r,1)},[OW.Hidden](){i.current[r].state="hidden"}}),o.microTask((()=>{var e;!Pq(i)&&s.current&&(null==(e=n.current)||e.call(n))})))})),l=Dz((e=>{let t=i.current.find((t=>{let{el:n}=t;return n===e}));return t?"visible"!==t.state&&(t.state="visible"):i.current.push({el:e,state:"visible"}),()=>a(e,OW.Unmount)})),c=(0,r.useRef)([]),u=(0,r.useRef)(Promise.resolve()),d=(0,r.useRef)({enter:[],leave:[]}),h=Dz(((e,n,r)=>{c.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter((t=>{let[n]=t;return n!==e}))),null==t||t.chains.current[n].push([e,new Promise((e=>{c.current.push(e)}))]),null==t||t.chains.current[n].push([e,new Promise((e=>{Promise.all(d.current[n].map((e=>{let[t,n]=e;return n}))).then((()=>e()))}))]),"enter"===n?u.current=u.current.then((()=>null==t?void 0:t.wait.current)).then((()=>r(n))):r(n)})),f=Dz(((e,t,n)=>{Promise.all(d.current[t].splice(0).map((e=>{let[t,n]=e;return n}))).then((()=>{var e;null==(e=c.current.shift())||e()})).then((()=>n(t)))}));return(0,r.useMemo)((()=>({children:i,register:l,unregister:a,onStart:h,onStop:f,wait:u,chains:d})),[l,a,i,h,f,d,u])}Oq.displayName="NestingContext";let Dq=r.Fragment,Rq=AW.RenderStrategy;let Lq=FW((function(e,t){let{show:n,appear:i=!1,unmount:s=!0,...o}=e,a=(0,r.useRef)(null),l=v$(...Nq(e)?[a,t]:null===t?[]:[t]);JW();let c=jW();if(void 0===n&&null!==c&&(n=(c&EW.Open)===EW.Open),void 0===n)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=(0,r.useState)(n?"visible":"hidden"),h=Mq((()=>{n||d("hidden")})),[f,p]=(0,r.useState)(!0),m=(0,r.useRef)([n]);Pz((()=>{!1!==f&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))}),[m,n]);let g=(0,r.useMemo)((()=>({show:n,appear:i,initial:f})),[n,i,f]);Pz((()=>{n?d("visible"):!Pq(h)&&null!==a.current&&d("hidden")}),[n,h]);let y={unmount:s},v=Dz((()=>{var t;f&&p(!1),null==(t=e.beforeEnter)||t.call(e)})),b=Dz((()=>{var t;f&&p(!1),null==(t=e.beforeLeave)||t.call(e)})),x=PW();return r.createElement(Oq.Provider,{value:h},r.createElement(Iq.Provider,{value:g},x({ourProps:{...y,as:r.Fragment,children:r.createElement(Fq,{ref:l,...y,...o,beforeEnter:v,beforeLeave:b})},theirProps:{},defaultTag:r.Fragment,features:Rq,visible:"visible"===u,name:"Transition"})))})),Fq=FW((function(e,t){var n,i;let{transition:s=!0,beforeEnter:o,afterEnter:a,beforeLeave:l,afterLeave:c,enter:u,enterFrom:d,enterTo:h,entered:f,leave:p,leaveFrom:m,leaveTo:g,...y}=e,[v,b]=(0,r.useState)(null),x=(0,r.useRef)(null),w=Nq(e),_=v$(...w?[x,t,b]:null===t?[]:[t]),S=null==(n=y.unmount)||n?OW.Unmount:OW.Hidden,{show:E,appear:j,initial:k}=function(){let e=(0,r.useContext)(Iq);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[C,T]=(0,r.useState)(E?"visible":"hidden"),N=function(){let e=(0,r.useContext)(Oq);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:I,unregister:A}=N;Pz((()=>I(x)),[I,x]),Pz((()=>{if(S===OW.Hidden&&x.current)return E&&"visible"!==C?void T("visible"):Kz(C,{hidden:()=>A(x),visible:()=>I(x)})}),[C,x,I,A,E,S]);let O=JW();Pz((()=>{if(w&&O&&"visible"===C&&null===x.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[x,C,O,w]);let P=k&&!j,M=j&&E&&k,D=(0,r.useRef)(!1),R=Mq((()=>{D.current||(T("hidden"),A(x))}),N),L=Dz((e=>{D.current=!0;let t=e?"enter":"leave";R.onStart(x,t,(e=>{"enter"===e?null==o||o():"leave"===e&&(null==l||l())}))})),F=Dz((e=>{let t=e?"enter":"leave";D.current=!1,R.onStop(x,t,(e=>{"enter"===e?null==a||a():"leave"===e&&(null==c||c())})),"leave"===t&&!Pq(R)&&(T("hidden"),A(x))}));(0,r.useEffect)((()=>{w&&s||(L(E),F(E))}),[E,w,s]);let B=!(!s||!w||!O||P),[,U]=C$(B,v,E,{start:L,end:F}),V=BW({ref:_,className:(null==(i=IW(y.className,M&&u,M&&d,U.enter&&u,U.enter&&U.closed&&d,U.enter&&!U.closed&&h,U.leave&&p,U.leave&&!U.closed&&m,U.leave&&U.closed&&g,!U.transition&&E&&f))?void 0:i.trim())||void 0,...k$(U)}),z=0;"visible"===C&&(z|=EW.Open),"hidden"===C&&(z|=EW.Closed),U.enter&&(z|=EW.Opening),U.leave&&(z|=EW.Closing);let $=PW();return r.createElement(Oq.Provider,{value:R},r.createElement(kW,{value:z},$({ourProps:V,theirProps:y,defaultTag:Dq,features:Rq,visible:"visible"===C,name:"Transition.Child"})))})),Bq=FW((function(e,t){let n=null!==(0,r.useContext)(Iq),i=null!==jW();return r.createElement(r.Fragment,null,!n&&i?r.createElement(Lq,{ref:t,...e}):r.createElement(Fq,{ref:t,...e}))})),Uq=Object.assign(Lq,{Child:Bq,Root:Lq});function Vq(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const zq=r.forwardRef(Vq),$q=e=>{let{student:t}=e;const{logout:n}=SS(),i=te(),s=async()=>{try{await n(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),i("/login")}catch(dv){console.error("Logout failed:",dv)}};return(0,wS.jsx)("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-md z-50",children:(0,wS.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,wS.jsxs)("div",{className:"flex justify-between h-16",children:[(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)(GO,{className:"h-8 w-8 text-indigo-600"}),(0,wS.jsx)("span",{className:"ml-2 text-xl font-bold text-gray-800",children:"Student Portal"})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wS.jsx)(Te,{to:"/student/dashboard",className:"text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),(0,wS.jsx)(Te,{to:"/student/attendance",className:"text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium",children:"Attendance"}),(0,wS.jsx)(Te,{to:"/student/schedule",className:"text-gray-600 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium",children:"Schedule"}),(0,wS.jsxs)("button",{className:"relative p-2 text-gray-600 hover:text-indigo-600",children:[(0,wS.jsx)(zq,{className:"h-6 w-6"}),(0,wS.jsx)("span",{className:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"})]}),(0,wS.jsxs)(Tq,{as:"div",className:"relative ml-3",children:[(0,wS.jsxs)(Tq.Button,{className:"flex items-center space-x-3 text-sm focus:outline-none",children:[(0,wS.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,wS.jsx)(QO,{className:"h-5 w-5 text-indigo-600"})}),(0,wS.jsxs)("div",{className:"text-left hidden md:block",children:[(0,wS.jsx)("p",{className:"text-sm font-medium text-gray-800",children:t.fullName}),(0,wS.jsx)("p",{className:"text-xs text-gray-500",children:t.section})]})]}),(0,wS.jsx)(Uq,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,wS.jsx)(Tq.Items,{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,wS.jsxs)("div",{className:"py-1",children:[(0,wS.jsx)(Tq.Item,{children:e=>{let{active:t}=e;return(0,wS.jsx)(Te,{to:"/student/profile",className:(t?"bg-gray-100":"")+" block px-4 py-2 text-sm text-gray-700",children:"Your Profile"})}}),(0,wS.jsx)(Tq.Item,{children:e=>{let{active:t}=e;return(0,wS.jsx)("button",{onClick:s,className:(t?"bg-gray-100":"")+" block w-full text-left px-4 py-2 text-sm text-red-600",children:"Sign out"})}})]})})})]})]})]})})})};function Hq(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Hq(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Wq=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Hq(e))&&(r&&(r+=" "),r+=t);return r};var qq=n(9889),Kq=n.n(qq),Yq=n(620),Gq=n.n(Yq),Xq=n(5268),Qq=n.n(Xq),Zq=n(3097),Jq=n.n(Zq),eK=n(9160),tK=n.n(eK),nK=function(e){return 0===e?0:e>0?1:-1},rK=function(e){return Gq()(e)&&e.indexOf("%")===e.length-1},iK=function(e){return tK()(e)&&!Qq()(e)},sK=function(e){return iK(e)||Gq()(e)},oK=0,aK=function(e){var t=++oK;return"".concat(e||"").concat(t)},lK=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!iK(e)&&!Gq()(e))return r;if(rK(e)){var s=e.indexOf("%");n=t*parseFloat(e.slice(0,s))/100}else n=+e;return Qq()(n)&&(n=r),i&&n>t&&(n=t),n},cK=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},uK=function(e,t){return iK(e)&&iK(t)?function(n){return e+n*(t-e)}:function(){return t}};function dK(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):Jq()(e,t))===n})):null}var hK=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},fK=n(9686),pK=n.n(fK),mK=n(1629),gK=n.n(mK),yK=n(6686),vK=n.n(yK),bK=n(9062);function xK(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function wK(e){return wK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wK(e)}var _K=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],SK=["points","pathLength"],EK={svg:["viewBox","children"],polygon:SK,polyline:SK},jK=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],kK=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,r.isValidElement)(e)&&(n=e.props),!vK()(n))return null;var i={};return Object.keys(n).forEach((function(e){jK.includes(e)&&(i[e]=t||function(t){return n[e](n,t)})})),i},CK=function(e,t,n){if(!vK()(e)||"object"!==wK(e))return null;var r=null;return Object.keys(e).forEach((function(i){var s=e[i];jK.includes(i)&&"function"===typeof s&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(s,t,n))})),r},TK=["children"],NK=["children"];function IK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var AK={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},OK=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},PK=null,MK=null,DK=function e(t){if(t===PK&&Array.isArray(MK))return MK;var n=[];return r.Children.forEach(t,(function(t){pK()(t)||((0,bK.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),MK=n,PK=t,n};function RK(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map((function(e){return OK(e)})):[OK(t)],DK(e).forEach((function(e){var t=Jq()(e,"type.displayName")||Jq()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n}function LK(e,t){var n=RK(e,t);return n&&n[0]}var FK=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!iK(n)||n<=0||!iK(r)||r<=0)},BK=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],UK=function(e){return e&&e.type&&Gq()(e.type)&&BK.indexOf(e.type)>=0},VK=function(e,t,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,r.isValidElement)(e)&&(i=e.props),!vK()(i))return null;var s={};return Object.keys(i).forEach((function(e){var r;(function(e,t,n,r){var i,s=null!==(i=null===EK||void 0===EK?void 0:EK[r])&&void 0!==i?i:[];return!gK()(e)&&(r&&s.includes(t)||_K.includes(t))||n&&jK.includes(t)})(null===(r=i)||void 0===r?void 0:r[e],e,t,n)&&(s[e]=i[e])})),s},zK=function e(t,n){if(t===n)return!0;var i=r.Children.count(t);if(i!==r.Children.count(n))return!1;if(0===i)return!0;if(1===i)return $K(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<i;s++){var o=t[s],a=n[s];if(Array.isArray(o)||Array.isArray(a)){if(!e(o,a))return!1}else if(!$K(o,a))return!1}return!0},$K=function(e,t){if(pK()(e)&&pK()(t))return!0;if(!pK()(e)&&!pK()(t)){var n=e.props||{},r=n.children,i=IK(n,TK),s=t.props||{},o=s.children,a=IK(s,NK);return r&&o?xK(i,a)&&zK(r,o):!r&&!o&&xK(i,a)}return!1},HK=function(e,t){var n=[],r={};return DK(e).forEach((function(e,i){if(UK(e))n.push(e);else if(e){var s=OK(e.type),o=t[s]||{},a=o.handler,l=o.once;if(a&&(!l||!r[s])){var c=a(e,s,i);n.push(c),r[s]=!0}}})),n},WK=function(e,t){return DK(t).indexOf(e)};function qK(e){return qK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qK(e)}function KK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KK(Object(n),!0).forEach((function(t){GK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GK(e,t,n){return t=function(e){var t=function(e,t){if("object"!=qK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qK(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return QK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QK(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ZK=(0,r.forwardRef)((function(e,t){var n=e.aspect,i=e.initialDimension,s=void 0===i?{width:-1,height:-1}:i,o=e.width,a=void 0===o?"100%":o,l=e.height,c=void 0===l?"100%":l,u=e.minWidth,d=void 0===u?0:u,h=e.minHeight,f=e.maxHeight,p=e.children,m=e.debounce,g=void 0===m?0:m,y=e.id,v=e.className,b=e.onResize,x=e.style,w=void 0===x?{}:x,_=(0,r.useRef)(null),S=(0,r.useRef)();S.current=b,(0,r.useImperativeHandle)(t,(function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})}));var E=XK((0,r.useState)({containerWidth:s.width,containerHeight:s.height}),2),j=E[0],k=E[1],C=(0,r.useCallback)((function(e,t){k((function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,r.useEffect)((function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;C(r,i),null===(t=S.current)||void 0===t||t.call(S,r,i)};g>0&&(e=Kq()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=_.current.getBoundingClientRect(),r=n.width,i=n.height;return C(r,i),t.observe(_.current),function(){t.disconnect()}}),[C,g]);var T=(0,r.useMemo)((function(){var e=j.containerWidth,t=j.containerHeight;if(e<0||t<0)return null;hK(rK(a)||rK(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,c),hK(!n||n>0,"The aspect(%s) must be greater than zero.",n);var i=rK(a)?e:a,s=rK(c)?t:c;n&&n>0&&(i?s=i/n:s&&(i=s*n),f&&s>f&&(s=f)),hK(i>0||s>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,s,a,c,d,h,n);var o=!Array.isArray(p)&&OK(p.type).endsWith("Chart");return r.Children.map(p,(function(e){return r.isValidElement(e)?(0,r.cloneElement)(e,YK({width:i,height:s},o?{style:YK({height:"100%",width:"100%",maxHeight:s,maxWidth:i},e.props.style)}:{})):e}))}),[n,p,c,f,h,d,j,a]);return r.createElement("div",{id:y?"".concat(y):void 0,className:Wq("recharts-responsive-container",v),style:YK(YK({},w),{},{width:a,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:_},T)})),JK=n(6604),eY=n.n(JK),tY=n(7424),nY=n.n(tY),rY="Invariant failed";function iY(e,t){if(!e)throw new Error(rY)}var sY=["children","width","height","viewBox","className","style","title","desc"];function oY(){return oY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oY.apply(this,arguments)}function aY(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lY(e){var t=e.children,n=e.width,i=e.height,s=e.viewBox,o=e.className,a=e.style,l=e.title,c=e.desc,u=aY(e,sY),d=s||{width:n,height:i,x:0,y:0},h=Wq("recharts-surface",o);return r.createElement("svg",oY({},VK(u,!0,"svg"),{className:h,width:n,height:i,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),r.createElement("title",null,l),r.createElement("desc",null,c),t)}var cY=["children","className"];function uY(){return uY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uY.apply(this,arguments)}function dY(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var hY=r.forwardRef((function(e,t){var n=e.children,i=e.className,s=dY(e,cY),o=Wq("recharts-layer",i);return r.createElement("g",uY({className:o},VK(s,!0),{ref:t}),n)}));function fY(e){return fY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fY(e)}function pY(){return pY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pY.apply(this,arguments)}function mY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return gY(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gY(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yY(Object(n),!0).forEach((function(t){bY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=fY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fY(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xY(e){return Array.isArray(e)&&sK(e[0])&&sK(e[1])?e.join(" ~ "):e}var wY=function(e){var t=e.separator,n=void 0===t?" : ":t,i=e.contentStyle,s=void 0===i?{}:i,o=e.itemStyle,a=void 0===o?{}:o,l=e.labelStyle,c=void 0===l?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,f=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=void 0!==y&&y,b=vY({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),x=vY({margin:0},c),w=!pK()(m),_=w?m:"",S=Wq("recharts-default-tooltip",f),E=Wq("recharts-tooltip-label",p);w&&g&&void 0!==u&&null!==u&&(_=g(m,u));var j=v?{role:"status","aria-live":"assertive"}:{};return r.createElement("div",pY({className:S,style:b},j),r.createElement("p",{className:E,style:x},r.isValidElement(_)?_:"".concat(_)),function(){if(u&&u.length){var e=(h?nY()(u,h):u).map((function(e,t){if("none"===e.type)return null;var i=vY({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),s=e.formatter||d||xY,o=e.value,l=e.name,c=o,h=l;if(s&&null!=c&&null!=h){var f=s(o,l,e,t,u);if(Array.isArray(f)){var p=mY(f,2);c=p[0],h=p[1]}else c=f}return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:i},sK(h)?r.createElement("span",{className:"recharts-tooltip-item-name"},h):null,sK(h)?r.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,r.createElement("span",{className:"recharts-tooltip-item-value"},c),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function _Y(e){return _Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_Y(e)}function SY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=_Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_Y(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var EY="recharts-tooltip-wrapper",jY={visibility:"hidden"};function kY(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Wq(EY,SY(SY(SY(SY({},"".concat(EY,"-right"),iK(n)&&t&&iK(t.x)&&n>=t.x),"".concat(EY,"-left"),iK(n)&&t&&iK(t.x)&&n<t.x),"".concat(EY,"-bottom"),iK(r)&&t&&iK(t.y)&&r>=t.y),"".concat(EY,"-top"),iK(r)&&t&&iK(t.y)&&r<t.y))}function CY(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,s=e.position,o=e.reverseDirection,a=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&iK(s[r]))return s[r];var u=n[r]-a-i,d=n[r]+i;return t[r]?o[r]?u:d:o[r]?u<l[r]?Math.max(d,l[r]):Math.max(u,l[r]):d+a>l[r]+c?Math.max(u,l[r]):Math.max(d,l[r])}function TY(e){return TY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TY(e)}function NY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NY(Object(n),!0).forEach((function(t){RY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LY(r.key),r)}}function OY(e,t,n){return t=MY(t),function(e,t){if(t&&("object"===TY(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,PY()?Reflect.construct(t,n||[],MY(e).constructor):t.apply(e,n))}function PY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PY=function(){return!!e})()}function MY(e){return MY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},MY(e)}function DY(e,t){return DY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DY(e,t)}function RY(e,t,n){return(t=LY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LY(e){var t=function(e,t){if("object"!=TY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=TY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TY(t)?t:t+""}var FY=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return RY(e=OY(this,t,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),RY(e,"handleKeyDown",(function(t){var n,r,i,s;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(s=e.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==i?i:0}})})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DY(e,t)}(t,e),n=t,i=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,i=t.allowEscapeViewBox,s=t.animationDuration,o=t.animationEasing,a=t.children,l=t.coordinate,c=t.hasPayload,u=t.isAnimationActive,d=t.offset,h=t.position,f=t.reverseDirection,p=t.useTranslate3d,m=t.viewBox,g=t.wrapperStyle,y=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,s=e.offsetTopLeft,o=e.position,a=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=CY({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:s,position:o,reverseDirection:a,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=CY({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:s,position:o,reverseDirection:a,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):jY,cssClasses:kY({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),v=y.cssClasses,b=y.cssProperties,x=IY(IY({transition:u&&n?"transform ".concat(s,"ms ").concat(o):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return r.createElement("div",{tabIndex:-1,className:v,style:x,ref:function(t){e.wrapperNode=t}},a)}}],i&&AY(n.prototype,i),s&&AY(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent),BY={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return BY[e]},set:function(e,t){if("string"===typeof e)BY[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){BY[t]=e[t]}))}}},UY=n(977),VY=n.n(UY);function zY(e,t,n){return!0===t?VY()(e,n):gK()(t)?VY()(e,t):e}function $Y(e){return $Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$Y(e)}function HY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HY(Object(n),!0).forEach((function(t){QY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZY(r.key),r)}}function KY(e,t,n){return t=GY(t),function(e,t){if(t&&("object"===$Y(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YY()?Reflect.construct(t,n||[],GY(e).constructor):t.apply(e,n))}function YY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YY=function(){return!!e})()}function GY(e){return GY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GY(e)}function XY(e,t){return XY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XY(e,t)}function QY(e,t,n){return(t=ZY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZY(e){var t=function(e,t){if("object"!=$Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$Y(t)?t:t+""}function JY(e){return e.dataKey}var eG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KY(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XY(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this,t=this.props,n=t.active,i=t.allowEscapeViewBox,s=t.animationDuration,o=t.animationEasing,a=t.content,l=t.coordinate,c=t.filterNull,u=t.isAnimationActive,d=t.offset,h=t.payload,f=t.payloadUniqBy,p=t.position,m=t.reverseDirection,g=t.useTranslate3d,y=t.viewBox,v=t.wrapperStyle,b=null!==h&&void 0!==h?h:[];c&&b.length&&(b=zY(h.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),f,JY));var x=b.length>0;return r.createElement(FY,{allowEscapeViewBox:i,animationDuration:s,animationEasing:o,isAnimationActive:u,active:n,coordinate:l,hasPayload:x,offset:d,position:p,reverseDirection:m,useTranslate3d:g,viewBox:y,wrapperStyle:v},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):"function"===typeof e?r.createElement(e,t):r.createElement(wY,t)}(a,WY(WY({},this.props),{},{payload:b})))}}],i&&qY(n.prototype,i),s&&qY(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);QY(eG,"displayName","Tooltip"),QY(eG,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!BY.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var tG=n(643),nG=n.n(tG);Math.abs,Math.atan2;const rG=Math.cos,iG=(Math.max,Math.min,Math.sin),sG=Math.sqrt,oG=Math.PI,aG=2*oG;const lG={draw(e,t){const n=sG(t/oG);e.moveTo(n,0),e.arc(0,0,n,0,aG)}},cG={draw(e,t){const n=sG(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},uG=sG(1/3),dG=2*uG,hG={draw(e,t){const n=sG(t/dG),r=n*uG;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},fG={draw(e,t){const n=sG(t),r=-n/2;e.rect(r,r,n,n)}},pG=iG(oG/10)/iG(7*oG/10),mG=iG(aG/10)*pG,gG=-rG(aG/10)*pG,yG={draw(e,t){const n=sG(.8908130915292852*t),r=mG*n,i=gG*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const t=aG*s/5,o=rG(t),a=iG(t);e.lineTo(a*n,-o*n),e.lineTo(o*r-a*i,a*r+o*i)}e.closePath()}},vG=sG(3),bG={draw(e,t){const n=-sG(t/(3*vG));e.moveTo(0,2*n),e.lineTo(-vG*n,-n),e.lineTo(vG*n,-n),e.closePath()}},xG=-.5,wG=sG(3)/2,_G=1/sG(12),SG=3*(_G/2+1),EG={draw(e,t){const n=sG(t/SG),r=n/2,i=n*_G,s=r,o=n*_G+n,a=-s,l=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(xG*r-wG*i,wG*r+xG*i),e.lineTo(xG*s-wG*o,wG*s+xG*o),e.lineTo(xG*a-wG*l,wG*a+xG*l),e.lineTo(xG*r+wG*i,xG*i-wG*r),e.lineTo(xG*s+wG*o,xG*o-wG*s),e.lineTo(xG*a+wG*l,xG*l-wG*a),e.closePath()}};function jG(e){return function(){return e}}const kG=Math.PI,CG=2*kG,TG=1e-6,NG=CG-TG;function IG(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class AG{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?IG:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IG;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,s){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+s}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,a=n-e,l=r-t,c=s-e,u=o-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>TG)if(Math.abs(u*a-l*c)>TG&&i){let h=n-s,f=r-o,p=a*a+l*l,m=h*h+f*f,g=Math.sqrt(p),y=Math.sqrt(d),v=i*Math.tan((kG-Math.acos((p+d-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>TG&&this._append`L${e+b*c},${t+b*u}`,this._append`A${i},${i},0,0,${+(u*h>c*f)},${this._x1=e+x*a},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,s){if(e=+e,t=+t,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),a=n*Math.sin(r),l=e+o,c=t+a,u=1^s,d=s?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>TG||Math.abs(this._y1-c)>TG)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%CG+CG),d>NG?this._append`A${n},${n},0,1,${u},${e-o},${t-a}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>TG&&this._append`A${n},${n},0,${+(d>=kG)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function OG(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new AG(t)}sG(3),sG(3);function PG(e){return PG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PG(e)}var MG=["type","size","sizeType"];function DG(){return DG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DG.apply(this,arguments)}function RG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RG(Object(n),!0).forEach((function(t){FG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FG(e,t,n){return t=function(e){var t=function(e,t){if("object"!=PG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PG(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BG(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var UG={symbolCircle:lG,symbolCross:cG,symbolDiamond:hG,symbolSquare:fG,symbolStar:yG,symbolTriangle:bG,symbolWye:EG},VG=Math.PI/180,zG=function(e){var t=e.type,n=void 0===t?"circle":t,i=e.size,s=void 0===i?64:i,o=e.sizeType,a=void 0===o?"area":o,l=LG(LG({},BG(e,MG)),{},{type:n,size:s,sizeType:a}),c=l.className,u=l.cx,d=l.cy,h=VK(l,!0);return u===+u&&d===+d&&s===+s?r.createElement("path",DG({},h,{className:Wq("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:function(){var e=function(e){var t="symbol".concat(nG()(e));return UG[t]||lG}(n),t=function(e,t){let n=null,r=OG(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:jG(e||lG),t="function"===typeof t?t:jG(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:jG(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:jG(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*VG;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(s,a,n));return t()}()})):null};function $G(e){return $G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$G(e)}function HG(){return HG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HG.apply(this,arguments)}function WG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZG(r.key),r)}}function KG(e,t,n){return t=GG(t),function(e,t){if(t&&("object"===$G(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YG()?Reflect.construct(t,n||[],GG(e).constructor):t.apply(e,n))}function YG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YG=function(){return!!e})()}function GG(e){return GG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GG(e)}function XG(e,t){return XG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XG(e,t)}function QG(e,t,n){return(t=ZG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZG(e){var t=function(e,t){if("object"!=$G(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$G(t)?t:t+""}zG.registerSymbol=function(e,t){UG["symbol".concat(nG()(e))]=t};var JG=32,eX=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KG(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XG(e,t)}(t,e),n=t,i=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,i=JG/6,s=JG/3,o=e.inactive?t:e.color;if("plainline"===e.type)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:JG,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(s,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*s,",").concat(n,"\n            H").concat(JG,"M").concat(2*s,",").concat(n,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(s,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return r.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(JG,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(e.legendIcon)){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WG(Object(n),!0).forEach((function(t){QG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete a.legendIcon,r.cloneElement(e.legendIcon,a)}return r.createElement(zG,{fill:o,cx:n,cy:n,size:JG,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,i=t.iconSize,s=t.layout,o=t.formatter,a=t.inactiveColor,l={x:0,y:0,width:JG,height:JG},c={display:"horizontal"===s?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var s=t.formatter||o,d=Wq(QG(QG({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var h=gK()(t.value)?null:t.value;hK(!gK()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var f=t.inactive?a:t.color;return r.createElement("li",HG({className:d,style:c,key:"legend-item-".concat(n)},CK(e.props,t,n)),r.createElement(lY,{width:i,height:i,viewBox:l,style:u},e.renderIcon(t)),r.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},s?s(h,t,n):h))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,i=e.align;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:"horizontal"===n?i:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}],i&&qG(n.prototype,i),s&&qG(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);function tX(e){return tX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tX(e)}QG(eX,"displayName","Legend"),QG(eX,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var nX=["ref"];function rX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rX(Object(n),!0).forEach((function(t){uX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dX(r.key),r)}}function oX(e,t,n){return t=lX(t),function(e,t){if(t&&("object"===tX(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,aX()?Reflect.construct(t,n||[],lX(e).constructor):t.apply(e,n))}function aX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(aX=function(){return!!e})()}function lX(e){return lX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lX(e)}function cX(e,t){return cX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cX(e,t)}function uX(e,t,n){return(t=dX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dX(e){var t=function(e,t){if("object"!=tX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tX(t)?t:t+""}function hX(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fX(e){return e.value}var pX=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return uX(e=oX(this,t,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cX(e,t)}(t,e),n=t,i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?iX({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,s=r.align,o=r.verticalAlign,a=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:a&&a.right||0}:{left:a&&a.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===o?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===o?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),iX(iX({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,i=t.width,s=t.height,o=t.wrapperStyle,a=t.payloadUniqBy,l=t.payload,c=iX(iX({position:"absolute",width:i||"auto",height:s||"auto"},this.getDefaultPosition(o)),o);return r.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(r.isValidElement(e))return r.cloneElement(e,t);if("function"===typeof e)return r.createElement(e,t);t.ref;var n=hX(t,nX);return r.createElement(eX,n)}(n,iX(iX({},this.props),{},{payload:zY(l,a,fX)})))}}],s=[{key:"getWithHeight",value:function(e,t){var n=iX(iX({},this.defaultProps),e.props).layout;return"vertical"===n&&iK(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],i&&sX(n.prototype,i),s&&sX(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);function mX(){return mX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mX.apply(this,arguments)}uX(pX,"displayName","Legend"),uX(pX,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var gX=function(e){var t=e.cx,n=e.cy,i=e.r,s=e.className,o=Wq("recharts-dot",s);return t===+t&&n===+n&&i===+i?r.createElement("circle",mX({},VK(e,!1),kK(e),{className:o,cx:t,cy:n,r:i})):null},yX=n(5173),vX=n.n(yX),bX=Object.getOwnPropertyNames,xX=Object.getOwnPropertySymbols,wX=Object.prototype.hasOwnProperty;function _X(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function SX(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var i=r.cache,s=i.get(t),o=i.get(n);if(s&&o)return s===n&&o===t;i.set(t,n),i.set(n,t);var a=e(t,n,r);return i.delete(t),i.delete(n),a}}function EX(e){return bX(e).concat(xX(e))}var jX=Object.hasOwn||function(e,t){return wX.call(e,t)};function kX(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var CX=Object.getOwnPropertyDescriptor,TX=Object.keys;function NX(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function IX(e,t){return kX(e.getTime(),t.getTime())}function AX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function OX(e,t){return e===t}function PX(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,s,o=new Array(r),a=e.entries(),l=0;(i=a.next())&&!i.done;){for(var c=t.entries(),u=!1,d=0;(s=c.next())&&!s.done;)if(o[d])d++;else{var h=i.value,f=s.value;if(n.equals(h[0],f[0],l,d,e,t,n)&&n.equals(h[1],f[1],h[0],f[0],e,t,n)){u=o[d]=!0;break}d++}if(!u)return!1;l++}return!0}var MX=kX;function DX(e,t,n){var r=TX(e),i=r.length;if(TX(t).length!==i)return!1;for(;i-- >0;)if(!zX(e,t,n,r[i]))return!1;return!0}function RX(e,t,n){var r,i,s,o=EX(e),a=o.length;if(EX(t).length!==a)return!1;for(;a-- >0;){if(!zX(e,t,n,r=o[a]))return!1;if(i=CX(e,r),s=CX(t,r),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable))return!1}return!0}function LX(e,t){return kX(e.valueOf(),t.valueOf())}function FX(e,t){return e.source===t.source&&e.flags===t.flags}function BX(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,s,o=new Array(r),a=e.values();(i=a.next())&&!i.done;){for(var l=t.values(),c=!1,u=0;(s=l.next())&&!s.done;){if(!o[u]&&n.equals(i.value,s.value,i.value,s.value,e,t,n)){c=o[u]=!0;break}u++}if(!c)return!1}return!0}function UX(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function VX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function zX(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||jX(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var $X=Array.isArray,HX="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,WX=Object.assign,qX=Object.prototype.toString.call.bind(Object.prototype.toString);var KX=YX();YX({strict:!0}),YX({circular:!0}),YX({circular:!0,strict:!0}),YX({createInternalComparator:function(){return kX}}),YX({strict:!0,createInternalComparator:function(){return kX}}),YX({circular:!0,createInternalComparator:function(){return kX}}),YX({circular:!0,createInternalComparator:function(){return kX},strict:!0});function YX(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,i=e.createInternalComparator,s=e.createState,o=e.strict,a=void 0!==o&&o,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?RX:NX,areDatesEqual:IX,areErrorsEqual:AX,areFunctionsEqual:OX,areMapsEqual:r?_X(PX,RX):PX,areNumbersEqual:MX,areObjectsEqual:r?RX:DX,arePrimitiveWrappersEqual:LX,areRegExpsEqual:FX,areSetsEqual:r?_X(BX,RX):BX,areTypedArraysEqual:r?RX:UX,areUrlsEqual:VX};if(n&&(i=WX({},i,n(i))),t){var s=SX(i.areArraysEqual),o=SX(i.areMapsEqual),a=SX(i.areObjectsEqual),l=SX(i.areSetsEqual);i=WX({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,f,p){if(e===f)return!0;if(null==e||null==f)return!1;var m=typeof e;if(m!==typeof f)return!1;if("object"!==m)return"number"===m?o(e,f,p):"function"===m&&i(e,f,p);var g=e.constructor;if(g!==f.constructor)return!1;if(g===Object)return a(e,f,p);if($X(e))return t(e,f,p);if(null!=HX&&HX(e))return d(e,f,p);if(g===Date)return n(e,f,p);if(g===RegExp)return c(e,f,p);if(g===Map)return s(e,f,p);if(g===Set)return u(e,f,p);var y=qX(e);return"[object Date]"===y?n(e,f,p):"[object RegExp]"===y?c(e,f,p):"[object Map]"===y?s(e,f,p):"[object Set]"===y?u(e,f,p):"[object Object]"===y?"function"!==typeof e.then&&"function"!==typeof f.then&&a(e,f,p):"[object URL]"===y?h(e,f,p):"[object Error]"===y?r(e,f,p):"[object Arguments]"===y?a(e,f,p):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&l(e,f,p)}}(l),u=i?i(c):(t=c,function(e,n,r,i,s,o,a){return t(e,n,a)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,s=e.strict;if(r)return function(e,o){var a=r(),l=a.cache,c=void 0===l?t?new WeakMap:void 0:l,u=a.meta;return n(e,o,{cache:c,equals:i,meta:u,strict:s})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(e,t){return n(e,t,o)}}({circular:r,comparator:c,createState:s,equals:u,strict:a})}function GX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)}))}function XX(e){return XX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XX(e)}function QX(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ZX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JX(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=QX(r),s=i[0],o=i.slice(1);return"number"===typeof s?void GX(n.bind(null,o),s):(n(s),void GX(n.bind(null,o)))}"object"===XX(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function eQ(e){return eQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eQ(e)}function tQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tQ(Object(n),!0).forEach((function(t){rQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rQ(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==eQ(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eQ(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iQ=function(e){return e},sQ=function(e,t){return Object.keys(t).reduce((function(n,r){return nQ(nQ({},n),{},rQ({},r,e(r,t[r])))}),{})},oQ=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function aQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||cQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lQ(e){return function(e){if(Array.isArray(e))return uQ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cQ(e,t){if(e){if("string"===typeof e)return uQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uQ(e,t):void 0}}function uQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dQ=1e-4,hQ=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},fQ=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},pQ=function(e,t){return function(n){var r=hQ(e,t);return fQ(r,n)}},mQ=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],s=t[2],o=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,s=1,o=1;break;case"ease":r=.25,i=.1,s=.25,o=1;break;case"ease-in":r=.42,i=0,s=1,o=1;break;case"ease-out":r=.42,i=0,s=.58,o=1;break;case"ease-in-out":r=0,i=0,s=.58,o=1;break;default:var a=t[0].split("(");if("cubic-bezier"===a[0]&&4===a[1].split(")")[0].split(",").length){var l=a[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=aQ(l,4);r=c[0],i=c[1],s=c[2],o=c[3]}}[r,s,i,o].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var u,d,h=pQ(r,s),f=pQ(i,o),p=(u=r,d=s,function(e){var t=hQ(u,d),n=[].concat(lQ(t.map((function(e,t){return e*t})).slice(1)),[0]);return fQ(n,e)}),m=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=h(n)-t,s=p(n);if(Math.abs(i-t)<dQ||s<dQ)return f(n);n=m(n-i/s)}return f(n)};return g.isStepper=!1,g},gQ=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mQ(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,s=e.dt,o=void 0===s?17:s,a=function(e,t,r){var s=r+(-(e-t)*n-r*i)*o/1e3,a=r*o/1e3+e;return Math.abs(a-t)<dQ&&Math.abs(s)<dQ?[t,0]:[a,s]};return a.isStepper=!0,a.dt=o,a}();default:if("cubic-bezier"===r.split("(")[0])return mQ(r)}return"function"===typeof r?r:null};function yQ(e){return yQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yQ(e)}function vQ(e){return function(e){if(Array.isArray(e))return EQ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||SQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bQ(Object(n),!0).forEach((function(t){wQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wQ(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==yQ(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yQ(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||SQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SQ(e,t){if(e){if("string"===typeof e)return EQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EQ(e,t):void 0}}function EQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jQ=function(e,t,n){return e+(t-e)*n},kQ=function(e){return e.from!==e.to},CQ=function e(t,n,r){var i=sQ((function(e,n){if(kQ(n)){var r=_Q(t(n.from,n.to,n.velocity),2),i=r[0],s=r[1];return xQ(xQ({},n),{},{from:i,velocity:s})}return n}),n);return r<1?sQ((function(e,t){return kQ(t)?xQ(xQ({},t),{},{velocity:jQ(t.velocity,i[e].velocity,r),from:jQ(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};const TQ=function(e,t,n,r,i){var s,o,a,l,c=(s=e,o=t,[Object.keys(s),Object.keys(o)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),u=c.reduce((function(n,r){return xQ(xQ({},n),{},wQ({},r,[e[r],t[r]]))}),{}),d=c.reduce((function(n,r){return xQ(xQ({},n),{},wQ({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),h=-1,f=function(){return null};return f=n.isStepper?function(r){a||(a=r);var s=(r-a)/n.dt;d=CQ(n,d,s),i(xQ(xQ(xQ({},e),t),sQ((function(e,t){return t.from}),d))),a=r,Object.values(d).filter(kQ).length&&(h=requestAnimationFrame(f))}:function(s){l||(l=s);var o=(s-l)/r,a=sQ((function(e,t){return jQ.apply(void 0,vQ(t).concat([n(o)]))}),u);if(i(xQ(xQ(xQ({},e),t),a)),o<1)h=requestAnimationFrame(f);else{var c=sQ((function(e,t){return jQ.apply(void 0,vQ(t).concat([n(1)]))}),u);i(xQ(xQ(xQ({},e),t),c))}},function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(h)}}};function NQ(e){return NQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NQ(e)}var IQ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function AQ(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OQ(e){return function(e){if(Array.isArray(e))return PQ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return PQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PQ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function MQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MQ(Object(n),!0).forEach((function(t){RQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RQ(e,t,n){return(t=FQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FQ(r.key),r)}}function FQ(e){var t=function(e,t){if("object"!==NQ(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==NQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===NQ(t)?t:String(t)}function BQ(e,t){return BQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BQ(e,t)}function UQ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(zW){return!1}}();return function(){var n,r=$Q(e);if(t){var i=$Q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VQ(this,n)}}function VQ(e,t){if(t&&("object"===NQ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zQ(e)}function zQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $Q(e){return $Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$Q(e)}var HQ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BQ(e,t)}(o,e);var t,n,i,s=UQ(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=s.call(this,e,t)).props,i=r.isActive,a=r.attributeName,l=r.from,c=r.to,u=r.steps,d=r.children,h=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(zQ(n)),n.changeStyle=n.changeStyle.bind(zQ(n)),!i||h<=0)return n.state={style:{}},"function"===typeof d&&(n.state={style:c}),VQ(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof d)return n.state={style:l},VQ(n);n.state={style:a?RQ({},a,l):l}}else n.state={style:{}};return n}return t=o,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,s=t.shouldReAnimate,o=t.to,a=t.from,l=this.state.style;if(r)if(n){if(!(KX(e.to,o)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||s?a:e.to;if(this.state&&l){var d={style:i?RQ({},i,u):u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(d)}this.runAnimation(DQ(DQ({},this.props),{},{from:u,begin:0}))}}else{var h={style:i?RQ({},i,o):o};this.state&&l&&(i&&l[i]!==o||!i&&l!==o)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,s=e.easing,o=e.begin,a=e.onAnimationEnd,l=e.onAnimationStart,c=TQ(n,r,gQ(s),i,this.changeStyle);this.manager.start([l,o,function(){t.stopJSAnimation=c()},i,a])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,s=n[0],o=s.style,a=s.duration,l=void 0===a?0:a;return this.manager.start([i].concat(OQ(n.reduce((function(e,r,i){if(0===i)return e;var s=r.duration,o=r.easing,a=void 0===o?"ease":o,l=r.style,c=r.properties,u=r.onAnimationEnd,d=i>0?n[i-1]:r,h=c||Object.keys(l);if("function"===typeof a||"spring"===a)return[].concat(OQ(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:s,easing:a}),s]);var f=oQ(h,s,a),p=DQ(DQ(DQ({},d.style),l),{},{transition:f});return[].concat(OQ(e),[p,s,u]).filter(iQ)}),[o,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=JX());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,s=e.easing,o=e.onAnimationStart,a=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof s&&"function"!==typeof c&&"spring"!==s)if(l.length>1)this.runStepAnimation(e);else{var d=r?RQ({},r,i):i,h=oQ(Object.keys(d),n,s);u.start([o,t,DQ(DQ({},d),{},{transition:h}),n,a])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration),i=(e.attributeName,e.easing,e.isActive),s=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,AQ(e,IQ)),o=r.Children.count(t),a=this.state.style;if("function"===typeof t)return t(a);if(!i||0===o||n<=0)return t;var l=function(e){var t=e.props,n=t.style,i=void 0===n?{}:n,o=t.className;return(0,r.cloneElement)(e,DQ(DQ({},s),{},{style:DQ(DQ({},i),a),className:o}))};return 1===o?l(r.Children.only(t)):r.createElement("div",null,r.Children.map(t,(function(e){return l(e)})))}}],n&&LQ(t.prototype,n),i&&LQ(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.PureComponent);HQ.displayName="Animate",HQ.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},HQ.propTypes={from:vX().oneOfType([vX().object,vX().string]),to:vX().oneOfType([vX().object,vX().string]),attributeName:vX().string,duration:vX().number,begin:vX().number,easing:vX().oneOfType([vX().string,vX().func]),steps:vX().arrayOf(vX().shape({duration:vX().number.isRequired,style:vX().object.isRequired,easing:vX().oneOfType([vX().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),vX().func]),properties:vX().arrayOf("string"),onAnimationEnd:vX().func})),children:vX().oneOfType([vX().node,vX().func]),isActive:vX().bool,canBegin:vX().bool,onAnimationEnd:vX().func,shouldReAnimate:vX().bool,onAnimationStart:vX().func,onAnimationReStart:vX().func};const WQ=HQ;function qQ(e){return qQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qQ(e)}function KQ(){return KQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KQ.apply(this,arguments)}function YQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return GQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GQ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XQ(Object(n),!0).forEach((function(t){ZQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZQ(e,t,n){return t=function(e){var t=function(e,t){if("object"!=qQ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qQ(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JQ=function(e,t,n,r,i){var s,o=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(o>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>o?o:i[d];s="M".concat(e,",").concat(t+a*u[0]),u[0]>0&&(s+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),s+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(s+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+a*u[1])),s+="L ".concat(e+n,",").concat(t+r-a*u[2]),u[2]>0&&(s+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),s+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(s+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-a*u[3])),s+="Z"}else if(o>0&&i===+i&&i>0){var h=Math.min(o,i);s="M ".concat(e,",").concat(t+a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+a*h,"\n            L ").concat(e+n,",").concat(t+r-a*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-a*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return s},eZ=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,s=t.y,o=t.width,a=t.height;if(Math.abs(o)>0&&Math.abs(a)>0){var l=Math.min(i,i+o),c=Math.max(i,i+o),u=Math.min(s,s+a),d=Math.max(s,s+a);return n>=l&&n<=c&&r>=u&&r<=d}return!1},tZ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nZ=function(e){var t=QQ(QQ({},tZ),e),n=(0,r.useRef)(),i=YQ((0,r.useState)(-1),2),s=i[0],o=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var a=t.x,l=t.y,c=t.width,u=t.height,d=t.radius,h=t.className,f=t.animationEasing,p=t.animationDuration,m=t.animationBegin,g=t.isAnimationActive,y=t.isUpdateAnimationActive;if(a!==+a||l!==+l||c!==+c||u!==+u||0===c||0===u)return null;var v=Wq("recharts-rectangle",h);return y?r.createElement(WQ,{canBegin:s>0,from:{width:c,height:u,x:a,y:l},to:{width:c,height:u,x:a,y:l},duration:p,animationEasing:f,isActive:y},(function(e){var i=e.width,o=e.height,a=e.x,l=e.y;return r.createElement(WQ,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:g,easing:f},r.createElement("path",KQ({},VK(t,!0),{className:v,d:JQ(a,l,i,o,d),ref:n})))})):r.createElement("path",KQ({},VK(t,!0),{className:v,d:JQ(a,l,c,u,d)}))};function rZ(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function iZ(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class sZ extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cZ;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(oZ(this,e))}has(e){return super.has(oZ(this,e))}set(e,t){return super.set(aZ(this,e),t)}delete(e){return super.delete(lZ(this,e))}}Set;function oZ(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function aZ(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function lZ(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function cZ(e){return null!==e&&"object"===typeof e?e.valueOf():e}const uZ=Symbol("implicit");function dZ(){var e=new sZ,t=[],n=[],r=uZ;function i(i){let s=e.get(i);if(void 0===s){if(r!==uZ)return r;e.set(i,s=t.push(i)-1)}return n[s%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new sZ;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return dZ(t,n).unknown(r)},rZ.apply(i,arguments),i}function hZ(){var e,t,n=dZ().unknown(void 0),r=n.domain,i=n.range,s=0,o=1,a=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=o<s,h=d?o:s,f=d?s:o;e=(f-h)/Math.max(1,n-l+2*c),a&&(e=Math.floor(e)),h+=(f-h-e*(n-l))*u,t=e*(1-l),a&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(i);++r<i;)s[r]=e+r*n;return s}(n).map((function(t){return h+e*t}));return i(d?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([s,o]=e,s=+s,o=+o,d()):[s,o]},n.rangeRound=function(e){return[s,o]=e,s=+s,o=+o,a=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,d()):a},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return hZ(r(),[s,o]).round(a).paddingInner(l).paddingOuter(c).align(u)},rZ.apply(d(),arguments)}function fZ(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fZ(t())},e}function pZ(){return fZ(hZ.apply(null,arguments).paddingInner(1))}function mZ(e){return mZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mZ(e)}function gZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gZ(Object(n),!0).forEach((function(t){vZ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vZ(e,t,n){return t=function(e){var t=function(e,t){if("object"!=mZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mZ(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bZ={widthCache:{},cacheCount:0},xZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wZ="recharts_measurement_span";var _Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||BY.isSsr)return{width:0,height:0};var n=function(e){var t=yZ({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(bZ.widthCache[r])return bZ.widthCache[r];try{var i=document.getElementById(wZ);i||((i=document.createElement("span")).setAttribute("id",wZ),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=yZ(yZ({},xZ),n);Object.assign(i.style,s),i.textContent="".concat(e);var o=i.getBoundingClientRect(),a={width:o.width,height:o.height};return bZ.widthCache[r]=a,++bZ.cacheCount>2e3&&(bZ.cacheCount=0,bZ.widthCache={}),a}catch(zW){return{width:0,height:0}}};function SZ(e){return SZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SZ(e)}function EZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jZ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CZ(r.key),r)}}function CZ(e){var t=function(e,t){if("object"!=SZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SZ(t)?t:t+""}var TZ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NZ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,AZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OZ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},PZ=Object.keys(OZ),MZ="NaN";var DZ=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||IZ.test(n)||(this.num=NaN,this.unit=""),PZ.includes(n)&&(this.num=function(e,t){return e*OZ[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=EZ(null!==(n=AZ.exec(t))&&void 0!==n?n:[],3),i=r[1],s=r[2];return new e(parseFloat(i),null!==s&&void 0!==s?s:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&kZ(t.prototype,n),r&&kZ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function RZ(e){if(e.includes(MZ))return MZ;for(var t=e;t.includes("*")||t.includes("/");){var n,r=EZ(null!==(n=TZ.exec(t))&&void 0!==n?n:[],4),i=r[1],s=r[2],o=r[3],a=DZ.parse(null!==i&&void 0!==i?i:""),l=DZ.parse(null!==o&&void 0!==o?o:""),c="*"===s?a.multiply(l):a.divide(l);if(c.isNaN())return MZ;t=t.replace(TZ,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=EZ(null!==(u=NZ.exec(t))&&void 0!==u?u:[],4),h=d[1],f=d[2],p=d[3],m=DZ.parse(null!==h&&void 0!==h?h:""),g=DZ.parse(null!==p&&void 0!==p?p:""),y="+"===f?m.add(g):m.subtract(g);if(y.isNaN())return MZ;t=t.replace(NZ,y.toString())}return t}var LZ=/\(([^()]*)\)/;function FZ(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=EZ(LZ.exec(t),2)[1];t=t.replace(LZ,RZ(n))}return t}(t),t=RZ(t)}function BZ(e){var t=function(e){try{return FZ(e)}catch(zW){return MZ}}(e.slice(5,-1));return t===MZ?"":t}var UZ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],VZ=["dx","dy","angle","className","breakAll"];function zZ(){return zZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zZ.apply(this,arguments)}function $Z(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return WZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WZ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qZ=/[ \f\n\r\t\v\u2028\u2029]+/,KZ=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return pK()(t)||(i=n?t.toString().split(""):t.toString().split(qZ)),{wordsWithComputedWidth:i.map((function(e){return{word:e,width:_Z(e,r).width}})),spaceWidth:n?0:_Z("\xa0",r).width}}catch(zW){return null}},YZ=function(e){return[{words:pK()(e)?[]:e.toString().split(qZ)}]},GZ=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,s=e.breakAll,o=e.maxLines;if((t||n)&&!BY.isSsr){var a=KZ({breakAll:s,children:r,style:i});return a?function(e,t,n,r,i){var s=e.maxLines,o=e.children,a=e.style,l=e.breakAll,c=iK(s),u=o,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var s=t.word,o=t.width,a=e[e.length-1];if(a&&(null==r||i||a.width+o+n<Number(r)))a.words.push(s),a.width+=o+n;else{var l={words:[s],width:o};e.push(l)}return e}),[])},h=d(t);if(!c)return h;for(var f,p=function(e){var t=u.slice(0,e),n=KZ({breakAll:l,style:a,children:t+"\u2026"}).wordsWithComputedWidth,i=d(n),o=i.length>s||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>Number(r);return[o,i]},m=0,g=u.length-1,y=0;m<=g&&y<=u.length-1;){var v=Math.floor((m+g)/2),b=HZ(p(v-1),2),x=b[0],w=b[1],_=HZ(p(v),1)[0];if(x||_||(m=v+1),x&&_&&(g=v-1),!x&&_){f=w;break}y++}return f||h}({breakAll:s,children:r,maxLines:o,style:i},a.wordsWithComputedWidth,a.spaceWidth,t,n):YZ(r)}return YZ(r)},XZ="#808080",QZ=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,s=void 0===i?0:i,o=e.lineHeight,a=void 0===o?"1em":o,l=e.capHeight,c=void 0===l?"0.71em":l,u=e.scaleToFit,d=void 0!==u&&u,h=e.textAnchor,f=void 0===h?"start":h,p=e.verticalAnchor,m=void 0===p?"end":p,g=e.fill,y=void 0===g?XZ:g,v=$Z(e,UZ),b=(0,r.useMemo)((function(){return GZ({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})}),[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),x=v.dx,w=v.dy,_=v.angle,S=v.className,E=v.breakAll,j=$Z(v,VZ);if(!sK(n)||!sK(s))return null;var k,C=n+(iK(x)?x:0),T=s+(iK(w)?w:0);switch(m){case"start":k=BZ("calc(".concat(c,")"));break;case"middle":k=BZ("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:k=BZ("calc(".concat(b.length-1," * -").concat(a,")"))}var N=[];if(d){var I=b[0].width,A=v.width;N.push("scale(".concat((iK(A)?A/I:1)/I,")"))}return _&&N.push("rotate(".concat(_,", ").concat(C,", ").concat(T,")")),N.length&&(j.transform=N.join(" ")),r.createElement("text",zZ({},VK(j,!0),{x:C,y:T,className:Wq("recharts-text",S),textAnchor:f,fill:y.includes("url")?XZ:y}),b.map((function(e,t){var n=e.words.join(E?"":" ");return r.createElement("tspan",{x:C,dy:0===t?k:a,key:"".concat(n,"-").concat(t)},n)})))};const ZZ=Math.sqrt(50),JZ=Math.sqrt(10),eJ=Math.sqrt(2);function tJ(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=ZZ?10:s>=JZ?5:s>=eJ?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?tJ(e,t,2*n):[a,l,c]}function nJ(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,s,o]=r?tJ(t,e,n):tJ(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function rJ(e,t,n){return tJ(e=+e,t=+t,n=+n)[2]}function iJ(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?rJ(t,e,n):rJ(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function sJ(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oJ(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function aJ(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<s){if(0!==t(r,r))return s;do{const t=i+s>>>1;n(e[t],r)<0?i=t+1:s=t}while(i<s)}return i}return 2!==e.length?(t=sJ,n=(t,n)=>sJ(e(t),n),r=(t,n)=>e(t)-n):(t=e===sJ||e===oJ?e:lJ,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>n&&r(e[s-1],t)>-r(e[s],t)?s-1:s},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<s){if(0!==t(r,r))return s;do{const t=i+s>>>1;n(e[t],r)<=0?i=t+1:s=t}while(i<s)}return i}}}function lJ(){return 0}function cJ(e){return null===e?NaN:+e}const uJ=aJ(sJ),dJ=uJ.right,hJ=(uJ.left,aJ(cJ).center,dJ);function fJ(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pJ(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mJ(){}var gJ=.7,yJ=1/gJ,vJ="\\s*([+-]?\\d+)\\s*",bJ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xJ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wJ=/^#([0-9a-f]{3,8})$/,_J=new RegExp(`^rgb\\(${vJ},${vJ},${vJ}\\)$`),SJ=new RegExp(`^rgb\\(${xJ},${xJ},${xJ}\\)$`),EJ=new RegExp(`^rgba\\(${vJ},${vJ},${vJ},${bJ}\\)$`),jJ=new RegExp(`^rgba\\(${xJ},${xJ},${xJ},${bJ}\\)$`),kJ=new RegExp(`^hsl\\(${bJ},${xJ},${xJ}\\)$`),CJ=new RegExp(`^hsla\\(${bJ},${xJ},${xJ},${bJ}\\)$`),TJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function NJ(){return this.rgb().formatHex()}function IJ(){return this.rgb().formatRgb()}function AJ(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?OJ(t):3===n?new DJ(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?PJ(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?PJ(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=_J.exec(e))?new DJ(t[1],t[2],t[3],1):(t=SJ.exec(e))?new DJ(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=EJ.exec(e))?PJ(t[1],t[2],t[3],t[4]):(t=jJ.exec(e))?PJ(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=kJ.exec(e))?VJ(t[1],t[2]/100,t[3]/100,1):(t=CJ.exec(e))?VJ(t[1],t[2]/100,t[3]/100,t[4]):TJ.hasOwnProperty(e)?OJ(TJ[e]):"transparent"===e?new DJ(NaN,NaN,NaN,0):null}function OJ(e){return new DJ(e>>16&255,e>>8&255,255&e,1)}function PJ(e,t,n,r){return r<=0&&(e=t=n=NaN),new DJ(e,t,n,r)}function MJ(e,t,n,r){return 1===arguments.length?function(e){return e instanceof mJ||(e=AJ(e)),e?new DJ((e=e.rgb()).r,e.g,e.b,e.opacity):new DJ}(e):new DJ(e,t,n,null==r?1:r)}function DJ(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function RJ(){return`#${UJ(this.r)}${UJ(this.g)}${UJ(this.b)}`}function LJ(){const e=FJ(this.opacity);return`${1===e?"rgb(":"rgba("}${BJ(this.r)}, ${BJ(this.g)}, ${BJ(this.b)}${1===e?")":`, ${e})`}`}function FJ(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function BJ(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function UJ(e){return((e=BJ(e))<16?"0":"")+e.toString(16)}function VJ(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $J(e,t,n,r)}function zJ(e){if(e instanceof $J)return new $J(e.h,e.s,e.l,e.opacity);if(e instanceof mJ||(e=AJ(e)),!e)return new $J;if(e instanceof $J)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=t===s?(n-r)/a+6*(n<r):n===s?(r-t)/a+2:(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new $J(o,a,l,e.opacity)}function $J(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function HJ(e){return(e=(e||0)%360)<0?e+360:e}function WJ(e){return Math.max(0,Math.min(1,e||0))}function qJ(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function KJ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}fJ(mJ,AJ,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:NJ,formatHex:NJ,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return zJ(this).formatHsl()},formatRgb:IJ,toString:IJ}),fJ(DJ,MJ,pJ(mJ,{brighter(e){return e=null==e?yJ:Math.pow(yJ,e),new DJ(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?gJ:Math.pow(gJ,e),new DJ(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new DJ(BJ(this.r),BJ(this.g),BJ(this.b),FJ(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RJ,formatHex:RJ,formatHex8:function(){return`#${UJ(this.r)}${UJ(this.g)}${UJ(this.b)}${UJ(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:LJ,toString:LJ})),fJ($J,(function(e,t,n,r){return 1===arguments.length?zJ(e):new $J(e,t,n,null==r?1:r)}),pJ(mJ,{brighter(e){return e=null==e?yJ:Math.pow(yJ,e),new $J(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?gJ:Math.pow(gJ,e),new $J(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new DJ(qJ(e>=240?e-240:e+120,i,r),qJ(e,i,r),qJ(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new $J(HJ(this.h),WJ(this.s),WJ(this.l),FJ(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=FJ(this.opacity);return`${1===e?"hsl(":"hsla("}${HJ(this.h)}, ${100*WJ(this.s)}%, ${100*WJ(this.l)}%${1===e?")":`, ${e})`}`}}));const YJ=e=>()=>e;function GJ(e,t){return function(n){return e+n*t}}function XJ(e){return 1===(e=+e)?QJ:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):YJ(isNaN(t)?n:t)}}function QJ(e,t){var n=t-e;return n?GJ(e,n):YJ(isNaN(e)?t:e)}const ZJ=function e(t){var n=XJ(t);function r(e,t){var r=n((e=MJ(e)).r,(t=MJ(t)).r),i=n(e.g,t.g),s=n(e.b,t.b),o=QJ(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function JJ(e){return function(t){var n,r,i=t.length,s=new Array(i),o=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=MJ(t[n]),s[n]=r.r||0,o[n]=r.g||0,a[n]=r.b||0;return s=e(s),o=e(o),a=e(a),r.opacity=1,function(e){return r.r=s(e),r.g=o(e),r.b=a(e),r+""}}}JJ((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return KJ((n-r/t)*t,o,i,s,a)}})),JJ((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return KJ((n-r/t)*t,i,s,o,a)}}));function e0(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,s=new Array(i),o=new Array(r);for(n=0;n<i;++n)s[n]=l0(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=s[n](e);return o}}function t0(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function n0(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function r0(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=l0(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var i0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s0=new RegExp(i0.source,"g");function o0(e,t){var n,r,i,s=i0.lastIndex=s0.lastIndex=0,o=-1,a=[],l=[];for(e+="",t+="";(n=i0.exec(e))&&(r=s0.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:n0(n,r)})),s=s0.lastIndex;return s<t.length&&(i=t.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function a0(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(s){for(n=0;n<r;++n)i[n]=e[n]*(1-s)+t[n]*s;return i}}function l0(e,t){var n,r=typeof t;return null==t||"boolean"===r?YJ(t):("number"===r?n0:"string"===r?(n=AJ(t))?(t=n,ZJ):o0:t instanceof AJ?ZJ:t instanceof Date?t0:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?a0:Array.isArray(t)?e0:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?r0:n0)(e,t)}function c0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function u0(e){return+e}var d0=[0,1];function h0(e){return e}function f0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function p0(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=f0(i,r),s=n(o,s)):(r=f0(r,i),s=n(s,o)),function(e){return s(r(e))}}function m0(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=f0(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(t){var n=hJ(e,t,1,r)-1;return s[n](i[n](t))}}function g0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function y0(){var e,t,n,r,i,s,o=d0,a=d0,l=l0,c=h0;function u(){var e=Math.min(o.length,a.length);return c!==h0&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?m0:p0,i=s=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),a,l)))(e(c(t)))}return d.invert=function(n){return c(t((s||(s=r(a,o.map(e),n0)))(n)))},d.domain=function(e){return arguments.length?(o=Array.from(e,u0),u()):o.slice()},d.range=function(e){return arguments.length?(a=Array.from(e),u()):a.slice()},d.rangeRound=function(e){return a=Array.from(e),l=c0,u()},d.clamp=function(e){return arguments.length?(c=!!e||h0,u()):c!==h0},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function v0(){return y0()(h0,h0)}var b0,x0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w0(e){if(!(t=x0.exec(e)))throw new Error("invalid format: "+e);var t;return new _0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function _0(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function S0(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function E0(e){return(e=S0(Math.abs(e)))?e[1]:NaN}function j0(e,t){var n=S0(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}w0.prototype=_0.prototype,_0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const k0={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>j0(100*e,t),r:j0,s:function(e,t){var n=S0(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(b0=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+S0(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function C0(e){return e}var T0,N0,I0,A0=Array.prototype.map,O0=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function P0(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?C0:(t=A0.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(e.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?C0:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(A0.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=w0(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):k0[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===h?s:/[%p]/.test(v)?l:"",w=k0[v],_=/[defgprs%]/.test(v);function S(e){var i,s,l,h=b,S=x;if("c"===v)S=w(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==d&&(E=!1),h=(E?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===v?O0[8+b0/3]:"")+S+(E&&"("===d?")":""),_)for(i=-1,s=e.length;++i<s;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?o+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var j=h.length+e.length+S.length,k=j<p?new Array(p-j+1).join(t):"";switch(m&&f&&(e=r(k+e,k.length?p-S.length:1/0),k=""),n){case"<":e=h+e+S+k;break;case"=":e=h+k+e+S;break;case"^":e=k.slice(0,j=k.length>>1)+h+e+S+k.slice(j);break;default:e=k+h+e+S}return a(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=w0(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(E0(t)/3))),i=Math.pow(10,-r),s=O0[8+r/3];return function(e){return n(i*e)+s}}}}function M0(e,t,n,r){var i,s=iJ(e,t,n);switch((r=w0(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(E0(t)/3)))-E0(Math.abs(e)))}(s,o))||(r.precision=i),I0(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,E0(t)-E0(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-E0(Math.abs(e)))}(s))||(r.precision=i-2*("%"===r.type))}return N0(r)}function D0(e){var t=e.domain;return e.ticks=function(e){var n=t();return nJ(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return M0(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,s=t(),o=0,a=s.length-1,l=s[o],c=s[a],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=a,a=i);u-- >0;){if((i=rJ(l,c,n))===r)return s[o]=l,s[a]=c,t(s);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function R0(){var e=v0();return e.copy=function(){return g0(e,R0())},rZ.apply(e,arguments),D0(e)}function L0(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,u0),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return L0(e).unknown(t)},e=arguments.length?Array.from(e,u0):[0,1],D0(n)}function F0(e,t){var n,r=0,i=(e=e.slice()).length-1,s=e[r],o=e[i];return o<s&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function B0(e){return Math.log(e)}function U0(e){return Math.exp(e)}function V0(e){return-Math.log(-e)}function z0(e){return-Math.exp(-e)}function $0(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H0(e){return(t,n)=>-e(-t,n)}function W0(e){const t=e(B0,U0),n=t.domain;let r,i,s=10;function o(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),i=function(e){return 10===e?$0:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),n()[0]<0?(r=H0(r),i=H0(i),e(V0,z0)):e(B0,U0),t}return t.base=function(e){return arguments.length?(s=+e,o()):s},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=e=>{const t=n();let o=t[0],a=t[t.length-1];const l=a<o;l&&([o,a]=[a,o]);let c,u,d=r(o),h=r(a);const f=null==e?10:+e;let p=[];if(!(s%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),o>0){for(;d<=h;++d)for(c=1;c<s;++c)if(u=d<0?c/i(-d):c*i(d),!(u<o)){if(u>a)break;p.push(u)}}else for(;d<=h;++d)for(c=s-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<o)){if(u>a)break;p.push(u)}2*p.length<f&&(p=nJ(o,a,f))}else p=nJ(d,h,Math.min(h-d,f)).map(i);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!==typeof n&&(s%1||null!=(n=w0(n)).precision||(n.trim=!0),n=N0(n)),e===1/0)return n;const o=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*s<s-.5&&(t*=s),t<=o?n(e):""}},t.nice=()=>n(F0(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function q0(){const e=W0(y0()).domain([1,10]);return e.copy=()=>g0(e,q0()).base(e.base()),rZ.apply(e,arguments),e}function K0(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Y0(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function G0(e){var t=1,n=e(K0(t),Y0(t));return n.constant=function(n){return arguments.length?e(K0(t=+n),Y0(t)):t},D0(n)}function X0(){var e=G0(y0());return e.copy=function(){return g0(e,X0()).constant(e.constant())},rZ.apply(e,arguments)}function Q0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Z0(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function J0(e){return e<0?-e*e:e*e}function e1(e){var t=e(h0,h0),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(h0,h0):.5===n?e(Z0,J0):e(Q0(n),Q0(1/n)):n},D0(t)}function t1(){var e=e1(y0());return e.copy=function(){return g0(e,t1()).exponent(e.exponent())},rZ.apply(e,arguments),e}function n1(){return t1.apply(null,arguments).exponent(.5)}function r1(e){return Math.sign(e)*e*e}function i1(){var e,t=v0(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(r1(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,u0)).map(r1)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return i1(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},rZ.apply(i,arguments),D0(i)}function s1(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function o1(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function a1(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sJ;if(e===sJ)return l1;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function l1(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function c1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?l1:a1(i);r>n;){if(r-n>600){const s=r-n+1,o=t-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);c1(e,t,Math.max(n,Math.floor(t-o*l/s+c)),Math.min(r,Math.floor(t+(s-o)*l/s+c)),i)}const s=e[t];let o=n,a=r;for(u1(e,n,t),i(e[r],s)>0&&u1(e,n,r);o<a;){for(u1(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}0===i(e[n],s)?u1(e,n,a):(++a,u1(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function u1(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function d1(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return o1(e);if(t>=1)return s1(e);var r,i=(r-1)*t,s=Math.floor(i),o=s1(c1(e,s).subarray(0,s+1));return o+(o1(e.subarray(s+1))-o)*(i-s)}}function h1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cJ;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e);return o+(+n(e[s+1],s+1,e)-o)*(i-s)}}function f1(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=h1(t,e/i);return s}function s(t){return null==t||isNaN(t=+t)?e:n[hJ(r,t)]}return s.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(sJ),i()},s.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return r.slice()},s.copy=function(){return f1().domain(t).range(n).unknown(e)},rZ.apply(s,arguments)}function p1(){var e,t=0,n=1,r=1,i=[.5],s=[0,1];function o(t){return null!=t&&t<=t?s[hJ(i,t,0,r)]:e}function a(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,a()):[t,n]},o.range=function(e){return arguments.length?(r=(s=Array.from(e)).length-1,a()):s.slice()},o.invertExtent=function(e){var o=s.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return p1().domain([t,n]).range(s).unknown(e)},rZ.apply(D0(o),arguments)}function m1(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[hJ(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return m1().domain(t).range(n).unknown(e)},rZ.apply(i,arguments)}T0=P0({thousands:",",grouping:[3],currency:["$",""]}),N0=T0.format,I0=T0.formatPrefix;const g1=1e3,y1=6e4,v1=36e5,b1=864e5,x1=6048e5,w1=2592e6,_1=31536e6,S1=new Date,E1=new Date;function j1(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,s)=>{const o=[];if(n=i.ceil(n),s=null==s?1:Math.floor(s),!(n<r)||!(s>0))return o;let a;do{o.push(a=new Date(+n)),t(n,s),e(n)}while(a<n&&n<r);return o},i.filter=n=>j1((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(S1.setTime(+t),E1.setTime(+r),e(S1),e(E1),Math.floor(n(S1,E1))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const k1=j1((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));k1.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?j1((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):k1:null);k1.range;const C1=j1((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*g1)}),((e,t)=>(t-e)/g1),(e=>e.getUTCSeconds())),T1=(C1.range,j1((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*g1)}),((e,t)=>{e.setTime(+e+t*y1)}),((e,t)=>(t-e)/y1),(e=>e.getMinutes()))),N1=(T1.range,j1((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*y1)}),((e,t)=>(t-e)/y1),(e=>e.getUTCMinutes()))),I1=(N1.range,j1((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*g1-e.getMinutes()*y1)}),((e,t)=>{e.setTime(+e+t*v1)}),((e,t)=>(t-e)/v1),(e=>e.getHours()))),A1=(I1.range,j1((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*v1)}),((e,t)=>(t-e)/v1),(e=>e.getUTCHours()))),O1=(A1.range,j1((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*y1)/b1),(e=>e.getDate()-1))),P1=(O1.range,j1((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/b1),(e=>e.getUTCDate()-1))),M1=(P1.range,j1((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/b1),(e=>Math.floor(e/b1))));M1.range;function D1(e){return j1((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*y1)/x1))}const R1=D1(0),L1=D1(1),F1=D1(2),B1=D1(3),U1=D1(4),V1=D1(5),z1=D1(6);R1.range,L1.range,F1.range,B1.range,U1.range,V1.range,z1.range;function $1(e){return j1((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/x1))}const H1=$1(0),W1=$1(1),q1=$1(2),K1=$1(3),Y1=$1(4),G1=$1(5),X1=$1(6),Q1=(H1.range,W1.range,q1.range,K1.range,Y1.range,G1.range,X1.range,j1((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),Z1=(Q1.range,j1((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),J1=(Z1.range,j1((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));J1.every=e=>isFinite(e=Math.floor(e))&&e>0?j1((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;J1.range;const e2=j1((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));e2.every=e=>isFinite(e=Math.floor(e))&&e>0?j1((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;e2.range;function t2(e,t,n,r,i,s){const o=[[C1,1,g1],[C1,5,5e3],[C1,15,15e3],[C1,30,3e4],[s,1,y1],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,v1],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,b1],[r,2,1728e5],[n,1,x1],[t,1,w1],[t,3,7776e6],[e,1,_1]];function a(t,n,r){const i=Math.abs(n-t)/r,s=aJ((e=>{let[,,t]=e;return t})).right(o,i);if(s===o.length)return e.every(iJ(t/_1,n/_1,r));if(0===s)return k1.every(Math.max(iJ(t,n,r),1));const[a,l]=o[i/o[s-1][2]<o[s][2]/i?s-1:s];return a.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:a(e,t,n),s=i?i.range(e,+t+1):[];return r?s.reverse():s},a]}const[n2,r2]=t2(e2,Z1,H1,M1,A1,N1),[i2,s2]=t2(J1,Q1,R1,O1,I1,T1);function o2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function l2(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var c2,u2,d2,h2={"-":"",_:" ",0:"0"},f2=/^\s*\d+/,p2=/^%/,m2=/[\\^$*+?|[\]().{}]/g;function g2(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function y2(e){return e.replace(m2,"\\$&")}function v2(e){return new RegExp("^(?:"+e.map(y2).join("|")+")","i")}function b2(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function x2(e,t,n){var r=f2.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function w2(e,t,n){var r=f2.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function _2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function S2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function E2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function j2(e,t,n){var r=f2.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function k2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function C2(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function T2(e,t,n){var r=f2.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function N2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function I2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function A2(e,t,n){var r=f2.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function O2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function P2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function M2(e,t,n){var r=f2.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function D2(e,t,n){var r=f2.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function R2(e,t,n){var r=f2.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function L2(e,t,n){var r=p2.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function F2(e,t,n){var r=f2.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function B2(e,t,n){var r=f2.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function U2(e,t){return g2(e.getDate(),t,2)}function V2(e,t){return g2(e.getHours(),t,2)}function z2(e,t){return g2(e.getHours()%12||12,t,2)}function $2(e,t){return g2(1+O1.count(J1(e),e),t,3)}function H2(e,t){return g2(e.getMilliseconds(),t,3)}function W2(e,t){return H2(e,t)+"000"}function q2(e,t){return g2(e.getMonth()+1,t,2)}function K2(e,t){return g2(e.getMinutes(),t,2)}function Y2(e,t){return g2(e.getSeconds(),t,2)}function G2(e){var t=e.getDay();return 0===t?7:t}function X2(e,t){return g2(R1.count(J1(e)-1,e),t,2)}function Q2(e){var t=e.getDay();return t>=4||0===t?U1(e):U1.ceil(e)}function Z2(e,t){return e=Q2(e),g2(U1.count(J1(e),e)+(4===J1(e).getDay()),t,2)}function J2(e){return e.getDay()}function e5(e,t){return g2(L1.count(J1(e)-1,e),t,2)}function t5(e,t){return g2(e.getFullYear()%100,t,2)}function n5(e,t){return g2((e=Q2(e)).getFullYear()%100,t,2)}function r5(e,t){return g2(e.getFullYear()%1e4,t,4)}function i5(e,t){var n=e.getDay();return g2((e=n>=4||0===n?U1(e):U1.ceil(e)).getFullYear()%1e4,t,4)}function s5(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+g2(t/60|0,"0",2)+g2(t%60,"0",2)}function o5(e,t){return g2(e.getUTCDate(),t,2)}function a5(e,t){return g2(e.getUTCHours(),t,2)}function l5(e,t){return g2(e.getUTCHours()%12||12,t,2)}function c5(e,t){return g2(1+P1.count(e2(e),e),t,3)}function u5(e,t){return g2(e.getUTCMilliseconds(),t,3)}function d5(e,t){return u5(e,t)+"000"}function h5(e,t){return g2(e.getUTCMonth()+1,t,2)}function f5(e,t){return g2(e.getUTCMinutes(),t,2)}function p5(e,t){return g2(e.getUTCSeconds(),t,2)}function m5(e){var t=e.getUTCDay();return 0===t?7:t}function g5(e,t){return g2(H1.count(e2(e)-1,e),t,2)}function y5(e){var t=e.getUTCDay();return t>=4||0===t?Y1(e):Y1.ceil(e)}function v5(e,t){return e=y5(e),g2(Y1.count(e2(e),e)+(4===e2(e).getUTCDay()),t,2)}function b5(e){return e.getUTCDay()}function x5(e,t){return g2(W1.count(e2(e)-1,e),t,2)}function w5(e,t){return g2(e.getUTCFullYear()%100,t,2)}function _5(e,t){return g2((e=y5(e)).getUTCFullYear()%100,t,2)}function S5(e,t){return g2(e.getUTCFullYear()%1e4,t,4)}function E5(e,t){var n=e.getUTCDay();return g2((e=n>=4||0===n?Y1(e):Y1.ceil(e)).getUTCFullYear()%1e4,t,4)}function j5(){return"+0000"}function k5(){return"%"}function C5(e){return+e}function T5(e){return Math.floor(+e/1e3)}function N5(e){return new Date(e)}function I5(e){return e instanceof Date?+e:+new Date(+e)}function A5(e,t,n,r,i,s,o,a,l,c){var u=v0(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(l(e)<e?f:a(e)<e?p:o(e)<e?m:s(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,I5)):h().map(N5)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(F0(n,e)):u},u.copy=function(){return g0(u,A5(e,t,n,r,i,s,o,a,l,c))},u}function O5(){return rZ.apply(A5(i2,s2,J1,Q1,R1,O1,I1,T1,C1,u2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function P5(){return rZ.apply(A5(n2,r2,e2,Z1,H1,P1,A1,N1,C1,d2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function M5(){var e,t,n,r,i,s=0,o=1,a=h0,l=!1;function c(t){return null==t||isNaN(t=+t)?i:a(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,a=e(n,r),c):[a(0),a(1)]}}return c.domain=function(i){return arguments.length?([s,o]=i,e=r(s=+s),t=r(o=+o),n=e===t?0:1/(t-e),c):[s,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(a=e,c):a},c.range=u(l0),c.rangeRound=u(c0),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(s),t=i(o),n=e===t?0:1/(t-e),c}}function D5(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function R5(){var e=D0(M5()(h0));return e.copy=function(){return D5(e,R5())},iZ.apply(e,arguments)}function L5(){var e=W0(M5()).domain([1,10]);return e.copy=function(){return D5(e,L5()).base(e.base())},iZ.apply(e,arguments)}function F5(){var e=G0(M5());return e.copy=function(){return D5(e,F5()).constant(e.constant())},iZ.apply(e,arguments)}function B5(){var e=e1(M5());return e.copy=function(){return D5(e,B5()).exponent(e.exponent())},iZ.apply(e,arguments)}function U5(){return B5.apply(null,arguments).exponent(.5)}function V5(){var e=[],t=h0;function n(n){if(null!=n&&!isNaN(n=+n))return t((hJ(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(sJ),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>d1(e,r/t)))},n.copy=function(){return V5(t).domain(e)},iZ.apply(n,arguments)}function z5(){var e,t,n,r,i,s,o,a=0,l=.5,c=1,u=1,d=h0,h=!1;function f(e){return isNaN(e=+e)?o:(e=.5+((e=+s(e))-t)*(u*e<u*t?r:i),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,d=function(e,t){void 0===t&&(t=e,e=l0);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return s[t](e-t)}}(e,[n,r,i]),f):[d(0),d(.5),d(1)]}}return f.domain=function(o){return arguments.length?([a,l,c]=o,e=s(a=+a),t=s(l=+l),n=s(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f):[a,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=p(l0),f.rangeRound=p(c0),f.unknown=function(e){return arguments.length?(o=e,f):o},function(o){return s=o,e=o(a),t=o(l),n=o(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function $5(){var e=D0(z5()(h0));return e.copy=function(){return D5(e,$5())},iZ.apply(e,arguments)}function H5(){var e=W0(z5()).domain([.1,1,10]);return e.copy=function(){return D5(e,H5()).base(e.base())},iZ.apply(e,arguments)}function W5(){var e=G0(z5());return e.copy=function(){return D5(e,W5()).constant(e.constant())},iZ.apply(e,arguments)}function q5(){var e=e1(z5());return e.copy=function(){return D5(e,q5()).exponent(e.exponent())},iZ.apply(e,arguments)}function K5(){return q5.apply(null,arguments).exponent(.5)}function Y5(e,t){if((i=e.length)>1)for(var n,r,i,s=1,o=e[t[0]],a=o.length;s<i;++s)for(r=o,o=e[t[s]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){c2=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,c=v2(i),u=b2(i),d=v2(s),h=b2(s),f=v2(o),p=b2(o),m=v2(a),g=b2(a),y=v2(l),v=b2(l),b={a:function(e){return o[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:null,d:U2,e:U2,f:W2,g:n5,G:i5,H:V2,I:z2,j:$2,L:H2,m:q2,M:K2,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:C5,s:T5,S:Y2,u:G2,U:X2,V:Z2,w:J2,W:e5,x:null,X:null,y:t5,Y:r5,Z:s5,"%":k5},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return a[e.getUTCMonth()]},c:null,d:o5,e:o5,f:d5,g:_5,G:E5,H:a5,I:l5,j:c5,L:u5,m:h5,M:f5,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:C5,s:T5,S:p5,u:m5,U:g5,V:v5,w:b5,W:x5,x:null,X:null,y:w5,Y:S5,Z:j5,"%":k5},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:I2,e:I2,f:R2,g:k2,G:j2,H:O2,I:O2,j:A2,L:D2,m:N2,M:P2,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:T2,Q:F2,s:B2,S:M2,u:w2,U:_2,V:S2,w:x2,W:E2,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:k2,Y:j2,Z:C2,"%":L2};function _(e,t){return function(n){var r,i,s,o=[],a=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===e.charCodeAt(a)&&(o.push(e.slice(l,a)),null!=(i=h2[r=e.charAt(++a)])?r=e.charAt(++a):i="e"===r?" ":"0",(s=t[r])&&(r=s(n,i)),o.push(r),l=a+1);return o.push(e.slice(l,a)),o.join("")}}function S(e,t){return function(n){var r,i,s=l2(1900,void 0,1);if(E(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(i=(r=a2(l2(s.y,0,1))).getUTCDay(),r=i>4||0===i?W1.ceil(r):W1(r),r=P1.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(i=(r=o2(l2(s.y,0,1))).getDay(),r=i>4||0===i?L1.ceil(r):L1(r),r=O1.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),i="Z"in s?a2(l2(s.y,0,1)).getUTCDay():o2(l2(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,a2(s)):o2(s)}}function E(e,t,n,r){for(var i,s,o=0,a=t.length,l=n.length;o<a;){if(r>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(s=w[i in h2?t.charAt(o++):i])||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),u2=c2.format,c2.parse,d2=c2.utcFormat,c2.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function G5(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function X5(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Q5(e,t){return e[t]}function Z5(e){const t=[];return t.key=e,t}var J5=n(539),e3=n.n(J5),t3=n(6745),n3=n.n(t3),r3=n(3538),i3=n.n(r3),s3=n(9853),o3=n.n(s3),a3=n(8210),l3=n.n(a3);function c3(e){return function(e){if(Array.isArray(e))return u3(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u3(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d3=function(e){return e},h3={"@@functional/placeholder":!0},f3=function(e){return e===h3},p3=function(e){return function t(){return 0===arguments.length||1===arguments.length&&f3(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},m3=function e(t,n){return 1===t?n:p3((function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter((function(e){return e!==h3})).length;return o>=t?n.apply(void 0,i):e(t-o,p3((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=i.map((function(e){return f3(e)?t.shift():e}));return n.apply(void 0,c3(s).concat(t))})))}))},g3=function(e){return m3(e.length,e)},y3=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},v3=g3((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),b3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return d3;var r=t.reverse(),i=r[0],s=r.slice(1);return function(){return s.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},x3=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},w3=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var _3=g3((function(e,t,n){var r=+e;return r+n*(+t-r)})),S3=g3((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),E3=g3((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const j3={rangeStep:function(e,t,n){for(var r=new(l3())(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new(l3())(e).abs().log(10).toNumber())+1},interpolateNumber:_3,uninterpolateNumber:S3,uninterpolateTruncation:E3};function k3(e){return function(e){if(Array.isArray(e))return N3(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||T3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||T3(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T3(e,t){if(e){if("string"===typeof e)return N3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N3(e,t):void 0}}function N3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I3(e){var t=C3(e,2),n=t[0],r=t[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function A3(e,t,n){if(e.lte(0))return new(l3())(0);var r=j3.getDigitCount(e.toNumber()),i=new(l3())(10).pow(r),s=e.div(i),o=1!==r?.05:.1,a=new(l3())(Math.ceil(s.div(o).toNumber())).add(n).mul(o).mul(i);return t?a:new(l3())(Math.ceil(a))}function O3(e,t,n){var r=1,i=new(l3())(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new(l3())(10).pow(j3.getDigitCount(e)-1),i=new(l3())(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new(l3())(Math.floor(e)))}else 0===e?i=new(l3())(Math.floor((t-1)/2)):n||(i=new(l3())(Math.floor(e)));var o=Math.floor((t-1)/2);return b3(v3((function(e){return i.add(new(l3())(e-o).mul(r)).toNumber()})),y3)(0,t)}function P3(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(l3())(0),tickMin:new(l3())(0),tickMax:new(l3())(0)};var s,o=A3(new(l3())(t).sub(e).div(n-1),r,i);s=e<=0&&t>=0?new(l3())(0):(s=new(l3())(e).add(t).div(2)).sub(new(l3())(s).mod(o));var a=Math.ceil(s.sub(e).div(o).toNumber()),l=Math.ceil(new(l3())(t).sub(s).div(o).toNumber()),c=a+l+1;return c>n?P3(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,a=t>0?a:a+(n-c)),{step:o,tickMin:s.sub(new(l3())(a).mul(o)),tickMax:s.add(new(l3())(l).mul(o))})}var M3=w3((function(e){var t=C3(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),a=C3(I3([n,r]),2),l=a[0],c=a[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(k3(y3(0,i-1).map((function(){return 1/0})))):[].concat(k3(y3(0,i-1).map((function(){return-1/0}))),[c]);return n>r?x3(u):u}if(l===c)return O3(l,i,s);var d=P3(l,c,o,s),h=d.step,f=d.tickMin,p=d.tickMax,m=j3.rangeStep(f,p.add(new(l3())(.1).mul(h)),h);return n>r?x3(m):m})),D3=(w3((function(e){var t=C3(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),a=C3(I3([n,r]),2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return O3(l,i,s);var u=A3(new(l3())(c).sub(l).div(o-1),s,0),d=b3(v3((function(e){return new(l3())(l).add(new(l3())(e).mul(u)).toNumber()})),y3)(0,o).filter((function(e){return e>=l&&e<=c}));return n>r?x3(d):d})),w3((function(e,t){var n=C3(e,2),r=n[0],i=n[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=C3(I3([r,i]),2),a=o[0],l=o[1];if(a===-1/0||l===1/0)return[r,i];if(a===l)return[a];var c=Math.max(t,2),u=A3(new(l3())(l).sub(a).div(c-1),s,0),d=[].concat(k3(j3.rangeStep(new(l3())(a),new(l3())(l).sub(new(l3())(.99).mul(u)),u)),[l]);return r>i?x3(d):d}))),R3=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function L3(e){return L3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L3(e)}function F3(){return F3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F3.apply(this,arguments)}function B3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U3(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V3(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function z3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y3(r.key),r)}}function $3(e,t,n){return t=W3(t),function(e,t){if(t&&("object"===L3(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H3()?Reflect.construct(t,n||[],W3(e).constructor):t.apply(e,n))}function H3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H3=function(){return!!e})()}function W3(e){return W3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W3(e)}function q3(e,t){return q3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q3(e,t)}function K3(e,t,n){return(t=Y3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y3(e){var t=function(e,t){if("object"!=L3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L3(t)?t:t+""}var G3=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$3(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q3(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,i=e.width,s=e.dataKey,o=e.data,a=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,u=V3(e,R3),d=VK(u,!1);"x"===this.props.direction&&"number"!==l.type&&iY(!1);var h=o.map((function(e){var o=a(e,s),u=o.x,h=o.y,f=o.value,p=o.errorVal;if(!p)return null;var m,g,y=[];if(Array.isArray(p)){var v=B3(p,2);m=v[0],g=v[1]}else m=g=p;if("vertical"===n){var b=l.scale,x=h+t,w=x+i,_=x-i,S=b(f-m),E=b(f+g);y.push({x1:E,y1:w,x2:E,y2:_}),y.push({x1:S,y1:x,x2:E,y2:x}),y.push({x1:S,y1:w,x2:S,y2:_})}else if("horizontal"===n){var j=c.scale,k=u+t,C=k-i,T=k+i,N=j(f-m),I=j(f+g);y.push({x1:C,y1:I,x2:T,y2:I}),y.push({x1:k,y1:N,x2:k,y2:I}),y.push({x1:C,y1:N,x2:T,y2:N})}return r.createElement(hY,F3({className:"recharts-errorBar",key:"bar-".concat(y.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},d),y.map((function(e){return r.createElement("line",F3({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return r.createElement(hY,{className:"recharts-errorBars"},h)}}],i&&z3(n.prototype,i),s&&z3(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);function X3(e){return X3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X3(e)}function Q3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q3(Object(n),!0).forEach((function(t){J3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J3(e,t,n){return t=function(e){var t=function(e,t){if("object"!=X3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=X3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X3(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}K3(G3,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),K3(G3,"displayName","ErrorBar");var e4=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,i=e.legendContent,s=LK(t,pX);if(!s)return null;var o,a=pX.defaultProps,l=void 0!==a?Z3(Z3({},a),s.props):{};return o=s.props&&s.props.payload?s.props&&s.props.payload:"children"===i?(n||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:s.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(n||[]).map((function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?Z3(Z3({},n),t.props):{},i=r.dataKey,s=r.name,o=r.legendType;return{inactive:r.hide,dataKey:i,type:l.iconType||o||"square",color:c4(t),value:s||i,payload:r}})),Z3(Z3(Z3({},l),pX.getWithHeight(s,r)),{},{payload:o,item:s})};function t4(e){return t4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t4(e)}function n4(e){return function(e){if(Array.isArray(e))return r4(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return r4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r4(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i4(Object(n),!0).forEach((function(t){o4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o4(e,t,n){return t=function(e){var t=function(e,t){if("object"!=t4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=t4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t4(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a4(e,t,n){return pK()(e)||pK()(t)?n:sK(t)?Jq()(e,t,n):gK()(t)?t(e):n}function l4(e,t,n,r){var i=i3()(e,(function(e){return a4(e,t)}));if("number"===n){var s=i.filter((function(e){return iK(e)||parseFloat(e)}));return s.length?[n3()(s),e3()(s)]:[1/0,-1/0]}return(r?i.filter((function(e){return!pK()(e)})):i).map((function(e){return sK(e)||e instanceof Date?e:""}))}var c4=function(e){var t,n,r=e.type.displayName,i=null!==(t=e.type)&&void 0!==t&&t.defaultProps?s4(s4({},e.type.defaultProps),e.props):e.props,s=i.stroke,o=i.fill;switch(r){case"Line":n=s;break;case"Area":case"Radar":n=s&&"none"!==s?s:o;break;default:n=o}return n},u4=function(e,t,n,r,i){var s=RK(t.props.children,G3).filter((function(e){return function(e,t,n){return!!pK()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)}));if(s&&s.length){var o=s.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=a4(t,n);if(pK()(r))return e;var i=Array.isArray(r)?[n3()(r),e3()(r)]:[r,r],s=o.reduce((function(e,n){var r=a4(t,n,0),s=i[0]-Math.abs(Array.isArray(r)?r[0]:r),o=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(s,e[0]),Math.max(o,e[1])]}),[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}),[1/0,-1/0])}return null},d4=function(e,t,n,r,i){var s=t.map((function(t){var s=t.props.dataKey;return"number"===n&&s&&u4(e,t,s,r)||l4(e,s,n,i)}));if("number"===n)return s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var o={};return s.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)o[t[n]]||(o[t[n]]=!0,e.push(t[n]));return e}),[])},h4=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},f4=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,s=e.type,o=e.range,a="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===s&&r.bandwidth?r.bandwidth()/a:0;return l="angleAxis"===e.axisType&&(null===o||void 0===o?void 0:o.length)>=2?2*nK(o[0]-o[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}})).filter((function(e){return!Qq()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+l,value:e,offset:l}})):r.domain().map((function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}}))},p4=new WeakMap,m4=function(e,t){if("function"!==typeof t)return e;p4.has(e)||p4.set(e,new WeakMap);var n=p4.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},g4=1e-4,y4={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,o=0;o<t;++o){var a=Qq()(e[o][n][1])?e[o][n][0]:e[o][n][1];a>=0?(e[o][n][0]=i,e[o][n][1]=i+a,i=e[o][n][1]):(e[o][n][0]=s,e[o][n][1]=s+a,s=e[o][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,s=0,o=e[0].length;s<o;++s){for(i=n=0;n<r;++n)i+=e[n][s][1]||0;if(i)for(n=0;n<r;++n)e[n][s][1]/=i}Y5(e,t)}},none:Y5,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],s=i.length;r<s;++r){for(var o=0,a=0;o<n;++o)a+=e[o][r][1]||0;i[r][1]+=i[r][0]=-a/2}Y5(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,s=0,o=1;o<r;++o){for(var a=0,l=0,c=0;a<i;++a){for(var u=e[t[a]],d=u[o][1]||0,h=(d-(u[o-1][1]||0))/2,f=0;f<a;++f){var p=e[t[f]];h+=(p[o][1]||0)-(p[o-1][1]||0)}l+=d,c+=h*d}n[o-1][1]+=n[o-1][0]=s,l&&(s-=c/l)}n[o-1][1]+=n[o-1][0]=s,Y5(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var o=Qq()(e[s][n][1])?e[s][n][0]:e[s][n][1];o>=0?(e[s][n][0]=i,e[s][n][1]=i+o,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}}},v4=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=y4[n],s=function(){var e=jG([]),t=X5,n=Y5,r=Q5;function i(i){var s,o,a=Array.from(e.apply(this,arguments),Z5),l=a.length,c=-1;for(const e of i)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(e,a[s].key,c,i)]).data=e;for(s=0,o=G5(t(a));s<l;++s)a[o[s]].index=s;return n(a,o),a}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:jG(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:jG(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?X5:"function"===typeof e?e:jG(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Y5:e,i):n},i}().keys(r).value((function(e,t){return+a4(e,t,0)})).order(X5).offset(i);return s(e)};var b4=function(e,t,n){return Object.keys(e).reduce((function(r,i){var s=e[i].stackedData.reduce((function(e,r){var i=function(e){return e.reduce((function(e,t){return[n3()(t.concat([e[0]]).filter(iK)),e3()(t.concat([e[1]]).filter(iK))]}),[1/0,-1/0])}(r.slice(t,n+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},x4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,w4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_4=function(e,t,n){if(gK()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(iK(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(x4.test(e[0])){var i=+x4.exec(e[0])[1];r[0]=t[0]-i}else gK()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(iK(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(w4.test(e[1])){var s=+w4.exec(e[1])[1];r[1]=t[1]+s}else gK()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},S4=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=nY()(t,(function(e){return e.coordinate})),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},E4=function(e,t,n){return e&&e.length?o3()(e,Jq()(n,"type.defaultProps.domain"))?t:e:t},j4=function(e,t){var n=e.type.defaultProps?s4(s4({},e.type.defaultProps),e.props):e.props,r=n.dataKey,i=n.name,s=n.unit,o=n.formatter,a=n.tooltipType,l=n.chartType,c=n.hide;return s4(s4({},VK(e,!1)),{},{dataKey:r,unit:s,formatter:o,name:i||r,color:c4(e),value:a4(t,r),type:a,payload:t,chartType:l,hide:c})};function k4(e){return k4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k4(e)}function C4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C4(Object(n),!0).forEach((function(t){N4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N4(e,t,n){return t=function(e){var t=function(e,t){if("object"!=k4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k4(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I4=["Webkit","Moz","O","ms"];function A4(e){return A4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A4(e)}function O4(){return O4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O4.apply(this,arguments)}function P4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P4(Object(n),!0).forEach((function(t){U4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V4(r.key),r)}}function R4(e,t,n){return t=F4(t),function(e,t){if(t&&("object"===A4(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L4()?Reflect.construct(t,n||[],F4(e).constructor):t.apply(e,n))}function L4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L4=function(){return!!e})()}function F4(e){return F4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F4(e)}function B4(e,t){return B4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B4(e,t)}function U4(e,t,n){return(t=V4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V4(e){var t=function(e,t){if("object"!=A4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A4(t)?t:t+""}var z4=function(e){return e.changedTouches&&!!e.changedTouches.length},$4=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U4(n=R4(this,t,[e]),"handleDrag",(function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)})),U4(n,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])})),U4(n,"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,i=e.startIndex;null===r||void 0===r||r({endIndex:t,startIndex:i})})),n.detachDragEndListener()})),U4(n,"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),U4(n,"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),U4(n,"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),U4(n,"handleSlideDragStart",(function(e){var t=z4(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B4(e,t)}(t,e),n=t,i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var n=e.startX,r=e.endX,i=this.state.scaleValues,s=this.props,o=s.gap,a=s.data.length-1,l=Math.min(n,r),c=Math.max(n,r),u=t.getIndexInRange(i,l),d=t.getIndexInRange(i,c);return{startIndex:u-u%o,endIndex:d===a?a:d-d%o}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,s=a4(n[e],i,e);return gK()(r)?r(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,s=this.props,o=s.x,a=s.width,l=s.travellerWidth,c=s.startIndex,u=s.endIndex,d=s.onChange,h=e.pageX-n;h>0?h=Math.min(h,o+a-l-i,o+a-l-r):h<0&&(h=Math.max(h,o-r,o-i));var f=this.getIndex({startX:r+h,endX:i+h});f.startIndex===c&&f.endIndex===u||!d||d(f),this.setState({startX:r+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=z4(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,s=t.startX,o=this.state[r],a=this.props,l=a.x,c=a.width,u=a.travellerWidth,d=a.onChange,h=a.gap,f=a.data,p={startX:this.state.startX,endX:this.state.endX},m=e.pageX-n;m>0?m=Math.min(m,l+c-u-o):m<0&&(m=Math.max(m,l-o)),p[r]=o+m;var g=this.getIndex(p),y=g.startIndex,v=g.endIndex;this.setState(U4(U4({},r,o+m),"brushMoveStartX",e.pageX),(function(){d&&function(){var e=f.length-1;return"startX"===r&&(i>s?y%h===0:v%h===0)||i<s&&v===e||"endX"===r&&(i>s?v%h===0:y%h===0)||i>s&&v===e}()&&d(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,s=r.startX,o=r.endX,a=this.state[t],l=i.indexOf(a);if(-1!==l){var c=l+e;if(!(-1===c||c>=i.length)){var u=i[c];"startX"===t&&u>=o||"endX"===t&&u<=s||this.setState(U4({},t,u),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,i=e.width,s=e.height,o=e.fill,a=e.stroke;return r.createElement("rect",{stroke:a,fill:o,x:t,y:n,width:i,height:s})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,i=e.width,s=e.height,o=e.data,a=e.children,l=e.padding,c=r.Children.only(a);return c?r.cloneElement(c,{x:t,y:n,width:i,height:s,margin:l,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,n){var i,s,o=this,a=this.props,l=a.y,c=a.travellerWidth,u=a.height,d=a.traveller,h=a.ariaLabel,f=a.data,p=a.startIndex,m=a.endIndex,g=Math.max(e,this.props.x),y=M4(M4({},VK(this.props,!1)),{},{x:g,y:l,width:c,height:u}),v=h||"Min value: ".concat(null===(i=f[p])||void 0===i?void 0:i.name,", Max value: ").concat(null===(s=f[m])||void 0===s?void 0:s.name);return r.createElement(hY,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),o.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,y))}},{key:"renderSlide",value:function(e,t){var n=this.props,i=n.y,s=n.height,o=n.stroke,a=n.travellerWidth,l=Math.min(e,t)+a,c=Math.max(Math.abs(t-e)-a,0);return r.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:l,y:i,width:c,height:s})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,i=e.y,s=e.height,o=e.travellerWidth,a=e.stroke,l=this.state,c=l.startX,u=l.endX,d={pointerEvents:"none",fill:a};return r.createElement(hY,{className:"recharts-brush-texts"},r.createElement(QZ,O4({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:i+s/2},d),this.getTextOfTick(t)),r.createElement(QZ,O4({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+o+5,y:i+s/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,i=e.children,s=e.x,o=e.y,a=e.width,l=e.height,c=e.alwaysShowText,u=this.state,d=u.startX,h=u.endX,f=u.isTextActive,p=u.isSlideMoving,m=u.isTravellerMoving,g=u.isTravellerFocused;if(!t||!t.length||!iK(s)||!iK(o)||!iK(a)||!iK(l)||a<=0||l<=0)return null;var y=Wq("recharts-brush",n),v=1===r.Children.count(i),b=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=I4.reduce((function(e,r){return T4(T4({},e),{},N4({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return r.createElement(hY,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(d,h),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(h,"endX"),(f||p||m||g||c)&&this.renderText())}}],s=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,i=e.width,s=e.height,o=e.stroke,a=Math.floor(n+s/2)-1;return r.createElement(r.Fragment,null,r.createElement("rect",{x:t,y:n,width:i,height:s,fill:o,stroke:"none"}),r.createElement("line",{x1:t+1,y1:a,x2:t+i-1,y2:a,fill:"none",stroke:"#fff"}),r.createElement("line",{x1:t+1,y1:a+2,x2:t+i-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return r.isValidElement(e)?r.cloneElement(e,n):gK()(e)?e(n):t.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,s=e.travellerWidth,o=e.updateId,a=e.startIndex,l=e.endIndex;if(n!==t.prevData||o!==t.prevUpdateId)return M4({prevData:n,prevTravellerWidth:s,prevUpdateId:o,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,s=e.width,o=e.travellerWidth;if(!t||!t.length)return{};var a=t.length,l=pZ().domain(eY()(0,a)).range([i,i+s-o]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:s,startIndex:a,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([i,i+r-s]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:s,prevUpdateId:o,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],i&&D4(n.prototype,i),s&&D4(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);function H4(e){return H4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H4(e)}function W4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W4(Object(n),!0).forEach((function(t){K4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K4(e,t,n){return t=function(e){var t=function(e,t){if("object"!=H4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H4(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return G4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G4(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}U4($4,"displayName","Brush"),U4($4,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var X4=Math.PI/180,Q4=function(e){return 180*e/Math.PI},Z4=function(e,t,n,r){return{x:e+Math.cos(-X4*r)*n,y:t+Math.sin(-X4*r)*n}},J4=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},e6=function(e,t){var n=e.x,r=e.y,i=t.cx,s=t.cy,o=function(e,t){var n=e.x,r=e.y,i=t.x,s=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-s,2))}({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:Q4(l),angleInRadian:l}},t6=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),s=Math.floor(r/360);return e+360*Math.min(i,s)},n6=function(e,t){var n=e.x,r=e.y,i=e6({x:n,y:r},t),s=i.radius,o=i.angle,a=t.innerRadius,l=t.outerRadius;if(s<a||s>l)return!1;if(0===s)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-360*s,endAngle:n-360*s}}(t),d=u.startAngle,h=u.endAngle,f=o;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;c=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;c=f>=h&&f<=d}return c?q4(q4({},t),{},{radius:s,angle:t6(f,t)}):null},r6=function(e){return(0,r.isValidElement)(e)||gK()(e)||"boolean"===typeof e?"":e.className};function i6(e){return i6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i6(e)}var s6=["offset"];function o6(e){return function(e){if(Array.isArray(e))return a6(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return a6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a6(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l6(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c6(Object(n),!0).forEach((function(t){d6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d6(e,t,n){return t=function(e){var t=function(e,t){if("object"!=i6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i6(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h6(){return h6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h6.apply(this,arguments)}var f6=function(e,t,n){var i,s,o=e.position,a=e.viewBox,l=e.offset,c=e.className,u=a,d=u.cx,h=u.cy,f=u.innerRadius,p=u.outerRadius,m=u.startAngle,g=u.endAngle,y=u.clockWise,v=(f+p)/2,b=function(e,t){return nK(t-e)*Math.min(Math.abs(t-e),360)}(m,g),x=b>=0?1:-1;"insideStart"===o?(i=m+x*l,s=y):"insideEnd"===o?(i=g-x*l,s=!y):"end"===o&&(i=g+x*l,s=y),s=b<=0?s:!s;var w=Z4(d,h,v,i),_=Z4(d,h,v,i+359*(s?1:-1)),S="M".concat(w.x,",").concat(w.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(s?0:1,",\n    ").concat(_.x,",").concat(_.y),E=pK()(e.id)?aK("recharts-radial-line-"):e.id;return r.createElement("text",h6({},n,{dominantBaseline:"central",className:Wq("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:E,d:S})),r.createElement("textPath",{xlinkHref:"#".concat(E)},t))};function p6(e){var t,n=e.offset,i=u6({offset:void 0===n?5:n},l6(e,s6)),s=i.viewBox,o=i.position,a=i.value,l=i.children,c=i.content,u=i.className,d=void 0===u?"":u,h=i.textBreakAll;if(!s||pK()(a)&&pK()(l)&&!(0,r.isValidElement)(c)&&!gK()(c))return null;if((0,r.isValidElement)(c))return(0,r.cloneElement)(c,i);if(gK()(c)){if(t=(0,r.createElement)(c,i),(0,r.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=pK()(e.children)?t:e.children;return gK()(n)?n(r):r}(i);var f=function(e){return"cx"in e&&iK(e.cx)}(s),p=VK(i,!0);if(f&&("insideStart"===o||"insideEnd"===o||"end"===o))return f6(i,t,p);var m=f?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,s=i.cx,o=i.cy,a=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=Z4(s,o,l+n,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=s?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var h=Z4(s,o,(a+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(i):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,s=t,o=s.x,a=s.y,l=s.width,c=s.height,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",f=u>0?"start":"end",p=l>=0?1:-1,m=p*r,g=p>0?"end":"start",y=p>0?"start":"end";if("top"===i)return u6(u6({},{x:o+l/2,y:a-u*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(a-n.y,0),width:l}:{});if("bottom"===i)return u6(u6({},{x:o+l/2,y:a+c+d,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(a+c),0),width:l}:{});if("left"===i){var v={x:o-m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"};return u6(u6({},v),n?{width:Math.max(v.x-n.x,0),height:c}:{})}if("right"===i){var b={x:o+l+m,y:a+c/2,textAnchor:y,verticalAnchor:"middle"};return u6(u6({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:c}:{})}var x=n?{width:l,height:c}:{};return"insideLeft"===i?u6({x:o+m,y:a+c/2,textAnchor:y,verticalAnchor:"middle"},x):"insideRight"===i?u6({x:o+l-m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?u6({x:o+l/2,y:a+d,textAnchor:"middle",verticalAnchor:f},x):"insideBottom"===i?u6({x:o+l/2,y:a+c-d,textAnchor:"middle",verticalAnchor:h},x):"insideTopLeft"===i?u6({x:o+m,y:a+d,textAnchor:y,verticalAnchor:f},x):"insideTopRight"===i?u6({x:o+l-m,y:a+d,textAnchor:g,verticalAnchor:f},x):"insideBottomLeft"===i?u6({x:o+m,y:a+c-d,textAnchor:y,verticalAnchor:h},x):"insideBottomRight"===i?u6({x:o+l-m,y:a+c-d,textAnchor:g,verticalAnchor:h},x):vK()(i)&&(iK(i.x)||rK(i.x))&&(iK(i.y)||rK(i.y))?u6({x:o+lK(i.x,l),y:a+lK(i.y,c),textAnchor:"end",verticalAnchor:"end"},x):u6({x:o+l/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(i);return r.createElement(QZ,h6({className:Wq("recharts-label",d)},p,m,{breakAll:h}),t)}p6.displayName="Label";var m6=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,s=e.endAngle,o=e.r,a=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,f=e.left,p=e.width,m=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(iK(p)&&iK(m)){if(iK(u)&&iK(d))return{x:u,y:d,width:p,height:m};if(iK(h)&&iK(f))return{x:h,y:f,width:p,height:m}}return iK(u)&&iK(d)?{x:u,y:d,width:0,height:0}:iK(t)&&iK(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:s||r||0,innerRadius:l||0,outerRadius:c||a||o||0,clockWise:g}:e.viewBox?e.viewBox:{}};p6.parseViewBox=m6,p6.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=e.children,s=m6(e),o=RK(i,p6).map((function(e,n){return(0,r.cloneElement)(e,{viewBox:t||s,key:"label-".concat(n)})}));if(!n)return o;var a=function(e,t){return e?!0===e?r.createElement(p6,{key:"label-implicit",viewBox:t}):sK(e)?r.createElement(p6,{key:"label-implicit",viewBox:t,value:e}):(0,r.isValidElement)(e)?e.type===p6?(0,r.cloneElement)(e,{key:"label-implicit",viewBox:t}):r.createElement(p6,{key:"label-implicit",content:e,viewBox:t}):gK()(e)?r.createElement(p6,{key:"label-implicit",content:e,viewBox:t}):vK()(e)?r.createElement(p6,h6({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||s);return[a].concat(o6(o))};var g6=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},y6=n(1733),v6=n.n(y6),b6=n(7002),x6=n.n(b6);function w6(e){return w6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w6(e)}function _6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k6(r.key),r)}}function S6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S6(Object(n),!0).forEach((function(t){j6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j6(e,t,n){return(t=k6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k6(e){var t=function(e,t){if("object"!=w6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w6(t)?t:t+""}var C6=function(e,t){var n=e.x,r=e.y,i=t.x,s=t.y;return{x:Math.min(n,i),y:Math.min(r,s),width:Math.abs(i-n),height:Math.abs(s-r)}},T6=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&_6(t.prototype,n),r&&_6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();j6(T6,"EPS",1e-4);var N6=function(e){var t=Object.keys(e).reduce((function(t,n){return E6(E6({},t),{},j6({},n,T6.create(e[n])))}),{});return E6(E6({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return v6()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return x6()(e,(function(e,n){return t[n].isInRange(e)}))}})};function I6(){return I6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I6.apply(this,arguments)}function A6(e){return A6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A6(e)}function O6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O6(Object(n),!0).forEach((function(t){B6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U6(r.key),r)}}function D6(e,t,n){return t=L6(t),function(e,t){if(t&&("object"===A6(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,R6()?Reflect.construct(t,n||[],L6(e).constructor):t.apply(e,n))}function R6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R6=function(){return!!e})()}function L6(e){return L6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L6(e)}function F6(e,t){return F6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F6(e,t)}function B6(e,t,n){return(t=U6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U6(e){var t=function(e,t){if("object"!=A6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A6(t)?t:t+""}var V6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D6(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F6(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,n=e.x,i=e.y,s=e.r,o=e.alwaysShow,a=e.clipPathId,l=sK(n),c=sK(i);if(hK(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var u=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,s=N6({x:r.scale,y:i.scale}),o=s.apply({x:t,y:n},{bandAware:!0});return g6(e,"discard")&&!s.isInRange(o)?null:o}(this.props);if(!u)return null;var d=u.x,h=u.y,f=this.props,p=f.shape,m=f.className,g=P6(P6({clipPath:g6(this.props,"hidden")?"url(#".concat(a,")"):void 0},VK(this.props,!0)),{},{cx:d,cy:h});return r.createElement(hY,{className:Wq("recharts-reference-dot",m)},t.renderDot(p,g),p6.renderCallByParent(this.props,{x:d-s,y:h-s,width:2*s,height:2*s}))}}],i&&M6(n.prototype,i),s&&M6(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);B6(V6,"displayName","ReferenceDot"),B6(V6,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),B6(V6,"renderDot",(function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):gK()(e)?e(t):r.createElement(gX,I6({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))}));var z6=n(4597),$6=n.n(z6),H6=(n(8990),n(5797)),W6=n.n(H6)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var q6=(0,r.createContext)(void 0),K6=(0,r.createContext)(void 0),Y6=(0,r.createContext)(void 0),G6=(0,r.createContext)({}),X6=(0,r.createContext)(void 0),Q6=(0,r.createContext)(0),Z6=(0,r.createContext)(0),J6=function(e){var t=e.state,n=t.xAxisMap,i=t.yAxisMap,s=t.offset,o=e.clipPathId,a=e.children,l=e.width,c=e.height,u=W6(s);return r.createElement(q6.Provider,{value:n},r.createElement(K6.Provider,{value:i},r.createElement(G6.Provider,{value:s},r.createElement(Y6.Provider,{value:u},r.createElement(X6.Provider,{value:o},r.createElement(Q6.Provider,{value:c},r.createElement(Z6.Provider,{value:l},a)))))))};function e7(e){return e7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e7(e)}function t7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c7(r.key),r)}}function n7(e,t,n){return t=i7(t),function(e,t){if(t&&("object"===e7(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r7()?Reflect.construct(t,n||[],i7(e).constructor):t.apply(e,n))}function r7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r7=function(){return!!e})()}function i7(e){return i7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i7(e)}function s7(e,t){return s7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s7(e,t)}function o7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o7(Object(n),!0).forEach((function(t){l7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l7(e,t,n){return(t=c7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c7(e){var t=function(e,t){if("object"!=e7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e7(t)?t:t+""}function u7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h7(){return h7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h7.apply(this,arguments)}function f7(e){var t=e.x,n=e.y,i=e.segment,s=e.xAxisId,o=e.yAxisId,a=e.shape,l=e.className,c=e.alwaysShow,u=(0,r.useContext)(X6),d=function(e){var t=(0,r.useContext)(q6);null==t&&iY(!1);var n=t[e];return null==n&&iY(!1),n}(s),h=function(e){var t=(0,r.useContext)(K6);null==t&&iY(!1);var n=t[e];return null==n&&iY(!1),n}(o),f=(0,r.useContext)(Y6);if(!u||!f)return null;hK(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,n,r,i,s,o,a,l){var c=i.x,u=i.y,d=i.width,h=i.height;if(n){var f=l.y,p=e.y.apply(f,{position:s});if(g6(l,"discard")&&!e.y.isInRange(p))return null;var m=[{x:c+d,y:p},{x:c,y:p}];return"left"===a?m.reverse():m}if(t){var g=l.x,y=e.x.apply(g,{position:s});if(g6(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:u+h},{x:y,y:u}];return"top"===o?v.reverse():v}if(r){var b=l.segment.map((function(t){return e.apply(t,{position:s})}));return g6(l,"discard")&&$6()(b,(function(t){return!e.isInRange(t)}))?null:b}return null}(N6({x:d.scale,y:h.scale}),sK(t),sK(n),i&&2===i.length,f,e.position,d.orientation,h.orientation,e);if(!p)return null;var m=u7(p,2),g=m[0],y=g.x,v=g.y,b=m[1],x=b.x,w=b.y,_=a7(a7({clipPath:g6(e,"hidden")?"url(#".concat(u,")"):void 0},VK(e,!0)),{},{x1:y,y1:v,x2:x,y2:w});return r.createElement(hY,{className:Wq("recharts-reference-line",l)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):gK()(e)?e(t):r.createElement("line",h7({},t,{className:"recharts-reference-line-line"}))}(a,_),p6.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return C6({x:t,y:n},{x:r,y:i})}({x1:y,y1:v,x2:x,y2:w})))}var p7=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n7(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s7(e,t)}(t,e),n=t,(i=[{key:"render",value:function(){return r.createElement(f7,this.props)}}])&&t7(n.prototype,i),s&&t7(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);function m7(){return m7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m7.apply(this,arguments)}function g7(e){return g7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g7(e)}function y7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y7(Object(n),!0).forEach((function(t){E7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j7(r.key),r)}}function x7(e,t,n){return t=_7(t),function(e,t){if(t&&("object"===g7(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w7()?Reflect.construct(t,n||[],_7(e).constructor):t.apply(e,n))}function w7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w7=function(){return!!e})()}function _7(e){return _7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_7(e)}function S7(e,t){return S7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S7(e,t)}function E7(e,t,n){return(t=j7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j7(e){var t=function(e,t){if("object"!=g7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g7(t)?t:t+""}l7(p7,"displayName","ReferenceLine"),l7(p7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var k7=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x7(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S7(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,n=e.x1,i=e.x2,s=e.y1,o=e.y2,a=e.className,l=e.alwaysShow,c=e.clipPathId;hK(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=sK(n),d=sK(i),h=sK(s),f=sK(o),p=this.props.shape;if(!u&&!d&&!h&&!f&&!p)return null;var m=function(e,t,n,r,i){var s=i.x1,o=i.x2,a=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var d=N6({x:c.scale,y:u.scale}),h={x:e?d.x.apply(s,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(a,{position:"start"}):d.y.rangeMin},f={x:t?d.x.apply(o,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!g6(i,"discard")||d.isInRange(h)&&d.isInRange(f)?C6(h,f):null}(u,d,h,f,this.props);if(!m&&!p)return null;var g=g6(this.props,"hidden")?"url(#".concat(c,")"):void 0;return r.createElement(hY,{className:Wq("recharts-reference-area",a)},t.renderRect(p,v7(v7({clipPath:g},VK(this.props,!0)),m)),p6.renderCallByParent(this.props,m))}}],i&&b7(n.prototype,i),s&&b7(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);function C7(e){return function(e){if(Array.isArray(e))return T7(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T7(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}E7(k7,"displayName","ReferenceArea"),E7(k7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),E7(k7,"renderRect",(function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):gK()(e)?e(t):r.createElement(nZ,m7({},t,{className:"recharts-reference-area-rect"}))}));var N7=function(e,t,n,r,i){var s=RK(e,p7),o=RK(e,V6),a=[].concat(C7(s),C7(o)),l=RK(e,k7),c="".concat(r,"Id"),u=r[0],d=t;if(a.length&&(d=a.reduce((function(e,t){if(t.props[c]===n&&g6(t.props,"extendDomain")&&iK(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),d)),l.length){var h="".concat(u,"1"),f="".concat(u,"2");d=l.reduce((function(e,t){if(t.props[c]===n&&g6(t.props,"extendDomain")&&iK(t.props[h])&&iK(t.props[f])){var r=t.props[h],i=t.props[f];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),d)}return i&&i.length&&(d=i.reduce((function(e,t){return iK(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),d)),d},I7=n(7283),A7=new(n.n(I7)()),O7="recharts.syncMouseEvents";function P7(e){return P7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P7(e)}function M7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R7(r.key),r)}}function D7(e,t,n){return(t=R7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R7(e){var t=function(e,t){if("object"!=P7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=P7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P7(t)?t:t+""}var L7=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),D7(this,"activeIndex",0),D7(this,"coordinateList",[]),D7(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,s=void 0===i?null:i,o=e.layout,a=void 0===o?null:o,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==s&&void 0!==s?s:this.container,this.layout=null!==a&&void 0!==a?a:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==d&&void 0!==d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,s=n.height,o=this.coordinateList[this.activeIndex].coordinate,a=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+o+a,u=i+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}],t&&M7(e.prototype,t),n&&M7(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var F7=n(2322),B7=n.n(F7),U7=n(6361),V7=n.n(U7);function z7(e){return z7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z7(e)}function $7(){return $7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$7.apply(this,arguments)}function H7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q7(Object(n),!0).forEach((function(t){Y7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y7(e,t,n){return t=function(e){var t=function(e,t){if("object"!=z7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z7(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G7=function(e,t,n,r,i){var s,o=n-r;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+n,",").concat(t),s+="L ".concat(e+n-o/2,",").concat(t+i),s+="L ".concat(e+n-o/2-r,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z")},X7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q7=function(e){var t=K7(K7({},X7),e),n=(0,r.useRef)(),i=H7((0,r.useState)(-1),2),s=i[0],o=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var a=t.x,l=t.y,c=t.upperWidth,u=t.lowerWidth,d=t.height,h=t.className,f=t.animationEasing,p=t.animationDuration,m=t.animationBegin,g=t.isUpdateAnimationActive;if(a!==+a||l!==+l||c!==+c||u!==+u||d!==+d||0===c&&0===u||0===d)return null;var y=Wq("recharts-trapezoid",h);return g?r.createElement(WQ,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:d,x:a,y:l},to:{upperWidth:c,lowerWidth:u,height:d,x:a,y:l},duration:p,animationEasing:f,isActive:g},(function(e){var i=e.upperWidth,o=e.lowerWidth,a=e.height,l=e.x,c=e.y;return r.createElement(WQ,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:f},r.createElement("path",$7({},VK(t,!0),{className:y,d:G7(l,c,i,o,a),ref:n})))})):r.createElement("g",null,r.createElement("path",$7({},VK(t,!0),{className:y,d:G7(a,l,c,u,d)})))};function Z7(e){return Z7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z7(e)}function J7(){return J7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J7.apply(this,arguments)}function e8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(n),!0).forEach((function(t){n8(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function n8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Z7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z7(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r8=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,s=e.sign,o=e.isExternal,a=e.cornerRadius,l=e.cornerIsExternal,c=a*(o?1:-1)+r,u=Math.asin(a/c)/X4,d=l?i:i+s*u,h=l?i-s*u:i;return{center:Z4(t,n,c,d),circleTangency:Z4(t,n,r,d),lineTangency:Z4(t,n,c*Math.cos(u*X4),h),theta:u}},i8=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,s=e.startAngle,o=function(e,t){return nK(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),a=s+o,l=Z4(t,n,i,s),c=Z4(t,n,i,a),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(s>a),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var d=Z4(t,n,r,s),h=Z4(t,n,r,a);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(s<=a),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},s8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},o8=function(e){var t=t8(t8({},s8),e),n=t.cx,i=t.cy,s=t.innerRadius,o=t.outerRadius,a=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=t.className;if(o<s||u===d)return null;var f,p=Wq("recharts-sector",h),m=o-s,g=lK(a,m,0,!0);return f=g>0&&Math.abs(u-d)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,a=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=nK(c-l),d=r8({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),h=d.circleTangency,f=d.lineTangency,p=d.theta,m=r8({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),g=m.circleTangency,y=m.lineTangency,v=m.theta,b=a?Math.abs(l-c):Math.abs(l-c)-p-v;if(b<0)return o?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):i8({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var x="M ".concat(f.x,",").concat(f.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var w=r8({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),_=w.circleTangency,S=w.lineTangency,E=w.theta,j=r8({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),k=j.circleTangency,C=j.lineTangency,T=j.theta,N=a?Math.abs(l-c):Math.abs(l-c)-E-T;if(N<0&&0===s)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(C.x,",").concat(C.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(N>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:n,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):i8({cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:u,endAngle:d}),r.createElement("path",J7({},VK(t,!0),{className:p,d:f,role:"img"}))},a8=["option","shapeType","propTransformer","activeClassName","isActive"];function l8(e){return l8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l8(e)}function c8(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u8(Object(n),!0).forEach((function(t){h8(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=l8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f8(e,t){return d8(d8({},t),e)}function p8(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return r.createElement(nZ,n);case"trapezoid":return r.createElement(Q7,n);case"sector":return r.createElement(o8,n);case"symbols":if(function(e){return"symbols"===e}(t))return r.createElement(zG,n);break;default:return null}}function m8(e){var t,n=e.option,i=e.shapeType,s=e.propTransformer,o=void 0===s?f8:s,a=e.activeClassName,l=void 0===a?"recharts-active-shape":a,c=e.isActive,u=c8(e,a8);if((0,r.isValidElement)(n))t=(0,r.cloneElement)(n,d8(d8({},u),function(e){return(0,r.isValidElement)(e)?e.props:e}(n)));else if(gK()(n))t=n(u);else if(B7()(n)&&!V7()(n)){var d=o(n,u);t=r.createElement(p8,{shapeType:i,elementProps:d})}else{var h=u;t=r.createElement(p8,{shapeType:i,elementProps:h})}return c?r.createElement(hY,{className:l},t):t}function g8(e,t){return null!=t&&"trapezoids"in e.props}function y8(e,t){return null!=t&&"sectors"in e.props}function v8(e,t){return null!=t&&"points"in e.props}function b8(e,t){var n,r,i=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,s=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&s}function x8(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function w8(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function _8(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return g8(e,t)?n="trapezoids":y8(e,t)?n="sectors":v8(e,t)&&(n="points"),n}(n,t),s=function(e,t){var n,r;return g8(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:y8(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:v8(e,t)?t.payload:{}}(n,t),o=r.filter((function(e,r){var o=o3()(s,e),a=n.props[i].filter((function(e){var r=function(e,t){var n;return g8(e,t)?n=b8:y8(e,t)?n=x8:v8(e,t)&&(n=w8),n}(n,t);return r(e,t)})),l=n.props[i].indexOf(a[a.length-1]);return o&&r===l}));return r.indexOf(o[o.length-1])}function S8(){}function E8(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function j8(e){this._context=e}function k8(e){this._context=e}function C8(e){this._context=e}j8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E8(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E8(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},k8.prototype={areaStart:S8,areaEnd:S8,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:E8(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},C8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:E8(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class T8{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function N8(e){this._context=e}function I8(e){this._context=e}function A8(e){return new I8(e)}function O8(e){return e<0?-1:1}function P8(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(O8(s)+O8(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function M8(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function D8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function R8(e){this._context=e}function L8(e){this._context=new F8(e)}function F8(e){this._context=e}function B8(e){this._context=e}function U8(e){var t,n,r=e.length-1,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function V8(e,t){this._context=e,this._t=t}function z8(e){return e[0]}function $8(e){return e[1]}function H8(e,t){var n=jG(!0),r=null,i=A8,s=null,o=OG(a);function a(a){var l,c,u,d=(a=G5(a)).length,h=!1;for(null==r&&(s=i(u=o())),l=0;l<=d;++l)!(l<d&&n(c=a[l],l,a))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,a),+t(c,l,a));if(u)return s=null,u+""||null}return e="function"===typeof e?e:void 0===e?z8:jG(e),t="function"===typeof t?t:void 0===t?$8:jG(t),a.x=function(t){return arguments.length?(e="function"===typeof t?t:jG(+t),a):e},a.y=function(e){return arguments.length?(t="function"===typeof e?e:jG(+e),a):t},a.defined=function(e){return arguments.length?(n="function"===typeof e?e:jG(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(s=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=s=null:s=i(r=e),a):r},a}function W8(e,t,n){var r=null,i=jG(!0),s=null,o=A8,a=null,l=OG(c);function c(c){var u,d,h,f,p,m=(c=G5(c)).length,g=!1,y=new Array(m),v=new Array(m);for(null==s&&(a=o(p=l())),u=0;u<=m;++u){if(!(u<m&&i(f=c[u],u,c))===g)if(g=!g)d=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=u-1;h>=d;--h)a.point(y[h],v[h]);a.lineEnd(),a.areaEnd()}g&&(y[u]=+e(f,u,c),v[u]=+t(f,u,c),a.point(r?+r(f,u,c):y[u],n?+n(f,u,c):v[u]))}if(p)return a=null,p+""||null}function u(){return H8().defined(i).curve(o).context(s)}return e="function"===typeof e?e:void 0===e?z8:jG(+e),t="function"===typeof t?t:jG(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?$8:jG(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:jG(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:jG(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:jG(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:jG(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:jG(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:jG(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:jG(!!e),c):i},c.curve=function(e){return arguments.length?(o=e,null!=s&&(a=o(s)),c):o},c.context=function(e){return arguments.length?(null==e?s=a=null:a=o(s=e),c):s},c}function q8(e){return q8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q8(e)}function K8(){return K8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K8.apply(this,arguments)}function Y8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y8(Object(n),!0).forEach((function(t){X8(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=q8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}N8.prototype={areaStart:S8,areaEnd:S8,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},I8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},R8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:D8(this,this._t0,M8(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,D8(this,M8(this,n=P8(this,e,t)),n);break;default:D8(this,this._t0,n=P8(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(L8.prototype=Object.create(R8.prototype)).point=function(e,t){R8.prototype.point.call(this,t,e)},F8.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}},B8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=U8(e),i=U8(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},V8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Q8={curveBasisClosed:function(e){return new k8(e)},curveBasisOpen:function(e){return new C8(e)},curveBasis:function(e){return new j8(e)},curveBumpX:function(e){return new T8(e,!0)},curveBumpY:function(e){return new T8(e,!1)},curveLinearClosed:function(e){return new N8(e)},curveLinear:A8,curveMonotoneX:function(e){return new R8(e)},curveMonotoneY:function(e){return new L8(e)},curveNatural:function(e){return new B8(e)},curveStep:function(e){return new V8(e,.5)},curveStepAfter:function(e){return new V8(e,1)},curveStepBefore:function(e){return new V8(e,0)}},Z8=function(e){return e.x===+e.x&&e.y===+e.y},J8=function(e){return e.x},e9=function(e){return e.y},t9=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,s=void 0===i?[]:i,o=e.baseLine,a=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(gK()(e))return e;var n="curve".concat(nG()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Q8[n]||A8:Q8["".concat(n).concat("vertical"===t?"Y":"X")]}(r,a),d=c?s.filter((function(e){return Z8(e)})):s;if(Array.isArray(o)){var h=c?o.filter((function(e){return Z8(e)})):o,f=d.map((function(e,t){return G8(G8({},e),{},{base:h[t]})}));return t="vertical"===a?W8().y(e9).x1(J8).x0((function(e){return e.base.x})):W8().x(J8).y1(e9).y0((function(e){return e.base.y})),t.defined(Z8).curve(u),t(f)}return(t="vertical"===a&&iK(o)?W8().y(e9).x1(J8).x0(o):iK(o)?W8().x(J8).y1(e9).y0(o):H8().x(J8).y(e9)).defined(Z8).curve(u),t(d)},n9=function(e){var t=e.className,n=e.points,i=e.path,s=e.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?t9(e):i;return r.createElement("path",K8({},VK(e,!1),kK(e),{className:Wq("recharts-curve",t),d:o,ref:s}))};function r9(e){return r9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r9(e)}var i9=["x","y","top","left","width","height","className"];function s9(){return s9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s9.apply(this,arguments)}function o9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a9(e,t,n){return t=function(e){var t=function(e,t){if("object"!=r9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=r9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r9(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l9(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c9=function(e,t,n,r,i,s){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n)},u9=function(e){var t=e.x,n=void 0===t?0:t,i=e.y,s=void 0===i?0:i,o=e.top,a=void 0===o?0:o,l=e.left,c=void 0===l?0:l,u=e.width,d=void 0===u?0:u,h=e.height,f=void 0===h?0:h,p=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o9(Object(n),!0).forEach((function(t){a9(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:n,y:s,top:a,left:c,width:d,height:f},l9(e,i9));return iK(n)&&iK(s)&&iK(d)&&iK(f)&&iK(a)&&iK(c)?r.createElement("path",s9({},VK(m,!0),{className:Wq("recharts-cross",p),d:c9(n,s,d,f,a,c)})):null};function d9(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,s=e.endAngle;return{points:[Z4(t,n,r,i),Z4(t,n,r,s)],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function h9(e,t,n){var r,i,s,o;if("horizontal"===e)s=r=t.x,i=n.top,o=n.top+n.height;else if("vertical"===e)o=i=t.y,r=n.left,s=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return d9(t);var a=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=Z4(a,l,c,d),f=Z4(a,l,u,d);r=h.x,i=h.y,s=f.x,o=f.y}return[{x:r,y:i},{x:s,y:o}]}function f9(e){return f9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f9(e)}function p9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p9(Object(n),!0).forEach((function(t){g9(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g9(e,t,n){return t=function(e){var t=function(e,t){if("object"!=f9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f9(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y9(e){var t,n,i,s=e.element,o=e.tooltipEventType,a=e.isActive,l=e.activeCoordinate,c=e.activePayload,u=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,m=null!==(t=s.props.cursor)&&void 0!==t?t:null===(n=s.type.defaultProps)||void 0===n?void 0:n.cursor;if(!s||!m||!a||!l||"ScatterChart"!==p&&"axis"!==o)return null;var g=n9;if("ScatterChart"===p)i=l,g=u9;else if("BarChart"===p)i=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(f,l,u,h),g=nZ;else if("radial"===f){var y=d9(l),v=y.cx,b=y.cy,x=y.radius;i={cx:v,cy:b,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:x,outerRadius:x},g=o8}else i={points:h9(f,l,u)},g=n9;var w=m9(m9(m9(m9({stroke:"#ccc",pointerEvents:"none"},u),i),VK(m,!1)),{},{payload:c,payloadIndex:d,className:Wq("recharts-tooltip-cursor",m.className)});return(0,r.isValidElement)(m)?(0,r.cloneElement)(m,w):(0,r.createElement)(g,w)}var v9=["item"],b9=["children","className","width","height","style","compact","title","desc"];function x9(e){return x9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x9(e)}function w9(){return w9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w9.apply(this,arguments)}function _9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||I9(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S9(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D9(r.key),r)}}function j9(e,t,n){return t=C9(t),function(e,t){if(t&&("object"===x9(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k9()?Reflect.construct(t,n||[],C9(e).constructor):t.apply(e,n))}function k9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k9=function(){return!!e})()}function C9(e){return C9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C9(e)}function T9(e,t){return T9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T9(e,t)}function N9(e){return function(e){if(Array.isArray(e))return A9(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I9(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I9(e,t){if(e){if("string"===typeof e)return A9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A9(e,t):void 0}}function A9(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O9(Object(n),!0).forEach((function(t){M9(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M9(e,t,n){return(t=D9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D9(e){var t=function(e,t){if("object"!=x9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x9(t)?t:t+""}var R9={xAxis:["bottom","top"],yAxis:["left","right"]},L9={width:"100%",height:"100%"},F9={x:0,y:0};function B9(e){return e}var U9=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,s=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(N9(e),N9(n)):e}),[]);return s.length>0?s:e&&e.length&&iK(r)&&iK(i)?e.slice(r,i+1):[]};function V9(e){return"number"===e?[0,"auto"]:void 0}var z9=function(e,t,n,r){var i=e.graphicalItems,s=e.tooltipAxis,o=U9(t,e);return n<0||!i||!i.length||n>=o.length?null:i.reduce((function(i,a){var l,c,u=null!==(l=a.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=dK(void 0===u?o:u,s.dataKey,r):c=u&&u[n]||o[n];return c?[].concat(N9(i),[j4(a,c)]):i}),[])},$9=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),o=e.orderedTooltipTicks,a=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,o=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(o<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var a=i.range,l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,u=r[l].coordinate,d=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(nK(u-c)!==nK(d-u)){var f=[];if(nK(d-u)===nK(a[1]-a[0])){h=d;var p=u+a[1]-a[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var m=d+a[1]-a[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){s=r[l].index;break}}else{var y=Math.min(c,d),v=Math.max(c,d);if(e>(y+u)/2&&e<=(v+u)/2){s=r[l].index;break}}}else for(var b=0;b<o;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<o-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===o-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){s=n[b].index;break}return s}(s,o,l,a);if(c>=0&&l){var u=l[c]&&l[c].value,d=z9(e,t,c,u),h=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var s=i.coordinate,o=r.radius;return P9(P9(P9({},r),Z4(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,l=r.angle;return P9(P9(P9({},r),Z4(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return F9}(n,o,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},H9=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,s=t.axisIdKey,o=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=h4(c,i);return n.reduce((function(t,n){var f,p=void 0!==n.type.defaultProps?P9(P9({},n.type.defaultProps),n.props):n.props,m=p.type,g=p.dataKey,y=p.allowDataOverflow,v=p.allowDuplicatedCategory,b=p.scale,x=p.ticks,w=p.includeHidden,_=p[s];if(t[_])return t;var S,E,j,k=U9(e.data,{graphicalItems:r.filter((function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===_})),dataStartIndex:a,dataEndIndex:l}),C=k.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(r&&i&&iK(r)&&iK(i))return!0}return!1})(p.domain,y,m)&&(S=_4(p.domain,null,y),!h||"number"!==m&&"auto"===b||(j=l4(k,g,"category")));var T=V9(m);if(!S||0===S.length){var N,I=null!==(N=p.domain)&&void 0!==N?N:T;if(g){if(S=l4(k,g,m),"category"===m&&h){var A=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);v&&A?(E=S,S=eY()(0,C)):v||(S=E4(I,S,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(N9(e),[t])}),[]))}else if("category"===m)S=v?S.filter((function(e){return""!==e&&!pK()(e)})):E4(I,S,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||pK()(t)?e:[].concat(N9(e),[t])}),[]);else if("number"===m){var O=function(e,t,n,r,i){var s=t.map((function(t){return u4(e,t,n,i,r)})).filter((function(e){return!pK()(e)}));return s&&s.length?s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(k,r.filter((function(e){var t,n,r=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===_&&(w||!i)})),g,i,c);O&&(S=O)}!h||"number"!==m&&"auto"===b||(j=l4(k,g,"category"))}else S=h?eY()(0,C):o&&o[_]&&o[_].hasStack&&"number"===m?"expand"===d?[0,1]:b4(o[_].stackGroups,a,l):d4(k,r.filter((function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===_&&(w||!n)})),m,c,!0);if("number"===m)S=N7(u,S,_,i,x),I&&(S=_4(I,S,y));else if("category"===m&&I){var P=I;S.every((function(e){return P.indexOf(e)>=0}))&&(S=P)}}return P9(P9({},t),{},M9({},_,P9(P9({},p),{},{axisType:i,domain:S,categoricalDomain:j,duplicateDomain:E,originalDomain:null!==(f=p.domain)&&void 0!==f?f:T,isCategorical:h,layout:c})))}),{})},W9=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,s=t.graphicalItems,o=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),d=RK(c,i),h={};return d&&d.length?h=H9(e,{axes:d,graphicalItems:s,axisType:r,axisIdKey:u,stackGroups:o,dataStartIndex:a,dataEndIndex:l}):s&&s.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,s=t.axisIdKey,o=t.stackGroups,a=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=U9(e.data,{graphicalItems:n,dataStartIndex:a,dataEndIndex:l}),h=d.length,f=h4(c,i),p=-1;return n.reduce((function(e,t){var m,g=(void 0!==t.type.defaultProps?P9(P9({},t.type.defaultProps),t.props):t.props)[s],y=V9("number");return e[g]?e:(p++,f?m=eY()(0,h):o&&o[g]&&o[g].hasStack?(m=b4(o[g].stackGroups,a,l),m=N7(u,m,g,i)):(m=_4(y,d4(d,n.filter((function(e){var t,n,r=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!i})),"number",c),r.defaultProps.allowDataOverflow),m=N7(u,m,g,i)),P9(P9({},e),{},M9({},g,P9(P9({axisType:i},r.defaultProps),{},{hide:!0,orientation:Jq()(R9,"".concat(i,".").concat(p%2),null),domain:m,originalDomain:y,isCategorical:f,layout:c}))))}),{})}(e,{Axis:i,graphicalItems:s,axisType:r,axisIdKey:u,stackGroups:o,dataStartIndex:a,dataEndIndex:l})),h},q9=function(e){var t=e.children,n=e.defaultShowTooltip,r=LK(t,$4),i=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(s=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},K9=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Y9=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,s=e.yAxisMap,o=void 0===s?{}:s,a=n.width,l=n.height,c=n.children,u=n.margin||{},d=LK(c,$4),h=LK(c,pX),f=Object.keys(o).reduce((function(e,t){var n=o[t],r=n.orientation;return n.mirror||n.hide?e:P9(P9({},e),{},M9({},r,e[r]+n.width))}),{left:u.left||0,right:u.right||0}),p=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:P9(P9({},e),{},M9({},r,Jq()(e,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),m=P9(P9({},p),f),g=m.bottom;d&&(m.bottom+=d.props.height||$4.defaultProps.height),h&&t&&(m=function(e,t,n,r){var i=n.children,s=n.width,o=n.margin,a=s-(o.left||0)-(o.right||0),l=e4({children:i,legendWidth:a});if(l){var c=r||{},u=c.width,d=c.height,h=l.align,f=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===f)&&"center"!==h&&iK(e[h]))return s4(s4({},e),{},o4({},h,e[h]+(u||0)));if(("horizontal"===p||"vertical"===p&&"center"===h)&&"middle"!==f&&iK(e[f]))return s4(s4({},e),{},o4({},f,e[f]+(d||0)))}return e}(m,0,n,t));var y=a-m.left-m.right,v=l-m.top-m.bottom;return P9(P9({brushBottom:g},m),{},{width:Math.max(y,0),height:Math.max(v,0)})},G9=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},X9=["points","className","baseLinePoints","connectNulls"];function Q9(){return Q9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q9.apply(this,arguments)}function Z9(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J9(e){return function(e){if(Array.isArray(e))return eee(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return eee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eee(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tee=function(e){return e&&e.x===+e.x&&e.y===+e.y},nee=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){tee(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),tee(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(J9(e),J9(t))}),[])]);var r=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(r,"Z"):r},ree=function(e){var t=e.points,n=e.className,i=e.baseLinePoints,s=e.connectNulls,o=Z9(e,X9);if(!t||!t.length)return null;var a=Wq("recharts-polygon",n);if(i&&i.length){var l=o.stroke&&"none"!==o.stroke,c=function(e,t,n){var r=nee(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(nee(t.reverse(),n).slice(1))}(t,i,s);return r.createElement("g",{className:a},r.createElement("path",Q9({},VK(o,!0),{fill:"Z"===c.slice(-1)?o.fill:"none",stroke:"none",d:c})),l?r.createElement("path",Q9({},VK(o,!0),{fill:"none",d:nee(t,s)})):null,l?r.createElement("path",Q9({},VK(o,!0),{fill:"none",d:nee(i,s)})):null)}var u=nee(t,s);return r.createElement("path",Q9({},VK(o,!0),{fill:"Z"===u.slice(-1)?o.fill:"none",className:a,d:u}))};function iee(e){return iee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iee(e)}function see(){return see=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},see.apply(this,arguments)}function oee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oee(Object(n),!0).forEach((function(t){fee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pee(r.key),r)}}function cee(e,t,n){return t=dee(t),function(e,t){if(t&&("object"===iee(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uee()?Reflect.construct(t,n||[],dee(e).constructor):t.apply(e,n))}function uee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uee=function(){return!!e})()}function dee(e){return dee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dee(e)}function hee(e,t){return hee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hee(e,t)}function fee(e,t,n){return(t=pee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pee(e){var t=function(e,t){if("object"!=iee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iee(t)?t:t+""}var mee=Math.PI/180,gee=1e-5,yee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cee(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hee(e,t)}(t,e),n=t,i=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,i=t.radius,s=t.orientation,o=t.tickSize||8,a=Z4(n,r,i,e.coordinate),l=Z4(n,r,i+("inner"===s?-1:1)*o,e.coordinate);return{x1:a.x,y1:a.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*mee);return n>gee?"outer"===t?"start":"end":n<-gee?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,i=e.radius,s=e.axisLine,o=e.axisLineType,a=aee(aee({},VK(this.props,!1)),{},{fill:"none"},VK(s,!1));if("circle"===o)return r.createElement(gX,see({className:"recharts-polar-angle-axis-line"},a,{cx:t,cy:n,r:i}));var l=this.props.ticks.map((function(e){return Z4(t,n,i,e.coordinate)}));return r.createElement(ree,see({className:"recharts-polar-angle-axis-line"},a,{points:l}))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,s=n.tick,o=n.tickLine,a=n.tickFormatter,l=n.stroke,c=VK(this.props,!1),u=VK(s,!1),d=aee(aee({},c),{},{fill:"none"},VK(o,!1)),h=i.map((function(n,i){var h=e.getTickLineCoord(n),f=aee(aee(aee({textAnchor:e.getTickTextAnchor(n)},c),{},{stroke:"none",fill:l},u),{},{index:i,payload:n,x:h.x2,y:h.y2});return r.createElement(hY,see({className:Wq("recharts-polar-angle-axis-tick",r6(s)),key:"tick-".concat(n.coordinate)},CK(e.props,n,i)),o&&r.createElement("line",see({className:"recharts-polar-angle-axis-tick-line"},d,h)),s&&t.renderTickItem(s,f,a?a(n.value,i):n.value))}));return r.createElement(hY,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,i=e.axisLine;return n<=0||!t||!t.length?null:r.createElement(hY,{className:Wq("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],s=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):gK()(e)?e(t):r.createElement(QZ,see({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],i&&lee(n.prototype,i),s&&lee(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);fee(yee,"displayName","PolarAngleAxis"),fee(yee,"axisType","angleAxis"),fee(yee,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var vee=n(2794),bee=n.n(vee),xee=n(9364),wee=n.n(xee),_ee=["cx","cy","angle","ticks","axisLine"],See=["ticks","tick","angle","tickFormatter","stroke"];function Eee(e){return Eee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eee(e)}function jee(){return jee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jee.apply(this,arguments)}function kee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kee(Object(n),!0).forEach((function(t){Mee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Nee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dee(r.key),r)}}function Iee(e,t,n){return t=Oee(t),function(e,t){if(t&&("object"===Eee(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Aee()?Reflect.construct(t,n||[],Oee(e).constructor):t.apply(e,n))}function Aee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Aee=function(){return!!e})()}function Oee(e){return Oee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oee(e)}function Pee(e,t){return Pee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pee(e,t)}function Mee(e,t,n){return(t=Dee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dee(e){var t=function(e,t){if("object"!=Eee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Eee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Eee(t)?t:t+""}var Ree=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Iee(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pee(e,t)}(t,e),n=t,i=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,i=n.cx,s=n.cy;return Z4(i,s,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,s=bee()(i,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:wee()(i,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:s.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,i=e.angle,s=e.ticks,o=e.axisLine,a=Tee(e,_ee),l=s.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),c=Z4(t,n,l[0],i),u=Z4(t,n,l[1],i),d=Cee(Cee(Cee({},VK(a,!1)),{},{fill:"none"},VK(o,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return r.createElement("line",jee({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,s=n.tick,o=n.angle,a=n.tickFormatter,l=n.stroke,c=Tee(n,See),u=this.getTickTextAnchor(),d=VK(c,!1),h=VK(s,!1),f=i.map((function(n,i){var c=e.getTickValueCoord(n),f=Cee(Cee(Cee(Cee({textAnchor:u,transform:"rotate(".concat(90-o,", ").concat(c.x,", ").concat(c.y,")")},d),{},{stroke:"none",fill:l},h),{},{index:i},c),{},{payload:n});return r.createElement(hY,jee({className:Wq("recharts-polar-radius-axis-tick",r6(s)),key:"tick-".concat(n.coordinate)},CK(e.props,n,i)),t.renderTickItem(s,f,a?a(n.value,i):n.value))}));return r.createElement(hY,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,i=e.tick;return t&&t.length?r.createElement(hY,{className:Wq("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),i&&this.renderTicks(),p6.renderCallByParent(this.props,this.getViewBox())):null}}],s=[{key:"renderTickItem",value:function(e,t,n){return r.isValidElement(e)?r.cloneElement(e,t):gK()(e)?e(t):r.createElement(QZ,jee({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],i&&Nee(n.prototype,i),s&&Nee(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);Mee(Ree,"displayName","PolarRadiusAxis"),Mee(Ree,"axisType","radiusAxis"),Mee(Ree,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var Lee=n(4065),Fee=n.n(Lee);function Bee(e){return Bee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bee(e)}var Uee=["valueAccessor"],Vee=["data","dataKey","clockWise","id","textBreakAll"];function zee(e){return function(e){if(Array.isArray(e))return $ee(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $ee(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hee(){return Hee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hee.apply(this,arguments)}function Wee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wee(Object(n),!0).forEach((function(t){Kee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kee(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Bee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bee(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Gee=function(e){return Array.isArray(e.value)?Fee()(e.value):e.value};function Xee(e){var t=e.valueAccessor,n=void 0===t?Gee:t,i=Yee(e,Uee),s=i.data,o=i.dataKey,a=i.clockWise,l=i.id,c=i.textBreakAll,u=Yee(i,Vee);return s&&s.length?r.createElement(hY,{className:"recharts-label-list"},s.map((function(e,t){var i=pK()(o)?n(e,t):a4(e&&e.payload,o),s=pK()(l)?{}:{id:"".concat(l,"-").concat(t)};return r.createElement(p6,Hee({},VK(e,!0),u,s,{parentViewBox:e.parentViewBox,value:i,textBreakAll:c,viewBox:p6.parseViewBox(pK()(a)?e:qee(qee({},e),{},{clockWise:a})),key:"label-".concat(t),index:t}))}))):null}Xee.displayName="LabelList",Xee.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=RK(e.children,Xee).map((function(e,n){return(0,r.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return i;var s=function(e,t){return e?!0===e?r.createElement(Xee,{key:"labelList-implicit",data:t}):r.isValidElement(e)||gK()(e)?r.createElement(Xee,{key:"labelList-implicit",data:t,content:e}):vK()(e)?r.createElement(Xee,Hee({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[s].concat(zee(i))};var Qee,Zee=function(e){return null};function Jee(e){return Jee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jee(e)}function ete(){return ete=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ete.apply(this,arguments)}function tte(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nte(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tte(Object(n),!0).forEach((function(t){lte(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tte(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rte(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cte(r.key),r)}}function ite(e,t,n){return t=ote(t),function(e,t){if(t&&("object"===Jee(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ste()?Reflect.construct(t,n||[],ote(e).constructor):t.apply(e,n))}function ste(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ste=function(){return!!e})()}function ote(e){return ote=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ote(e)}function ate(e,t){return ate=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ate(e,t)}function lte(e,t,n){return(t=cte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cte(e){var t=function(e,t){if("object"!=Jee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jee(t)?t:t+""}Zee.displayName="Cell";var ute=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lte(n=ite(this,t,[e]),"pieRef",null),lte(n,"sectorRefs",[]),lte(n,"id",aK("recharts-pie-")),lte(n,"handleAnimationEnd",(function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),gK()(e)&&e()})),lte(n,"handleAnimationStart",(function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),gK()(e)&&e()})),n.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ate(e,t)}(t,e),n=t,i=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.label,s=n.labelLine,o=n.dataKey,a=n.valueKey,l=VK(this.props,!1),c=VK(i,!1),u=VK(s,!1),d=i&&i.offsetRadius||20,h=e.map((function(e,n){var h=(e.startAngle+e.endAngle)/2,f=Z4(e.cx,e.cy,e.outerRadius+d,h),p=nte(nte(nte(nte({},l),e),{},{stroke:"none"},c),{},{index:n,textAnchor:t.getTextAnchor(f.x,e.cx)},f),m=nte(nte(nte(nte({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:n,points:[Z4(e.cx,e.cy,e.outerRadius,h),f]}),g=o;return pK()(o)&&pK()(a)?g="value":pK()(o)&&(g=a),r.createElement(hY,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(n)},s&&t.renderLabelLineItem(s,m,"line"),t.renderLabelItem(i,p,a4(e,g)))}));return r.createElement(hY,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,i=n.activeShape,s=n.blendStroke,o=n.inactiveShape;return e.map((function(n,a){if(0===(null===n||void 0===n?void 0:n.startAngle)&&0===(null===n||void 0===n?void 0:n.endAngle)&&1!==e.length)return null;var l=t.isActiveIndex(a),c=o&&t.hasActiveIndex()?o:null,u=l?i:c,d=nte(nte({},n),{},{stroke:s?n.fill:n.stroke,tabIndex:-1});return r.createElement(hY,ete({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},CK(t.props,n,a),{key:"sector-".concat(null===n||void 0===n?void 0:n.startAngle,"-").concat(null===n||void 0===n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(a)}),r.createElement(m8,ete({option:u,isActive:l,shapeType:"sector"},d)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,i=t.isAnimationActive,s=t.animationBegin,o=t.animationDuration,a=t.animationEasing,l=t.animationId,c=this.state,u=c.prevSectors,d=c.prevIsAnimationActive;return r.createElement(WQ,{begin:s,duration:o,isActive:i,easing:a,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var i=t.t,s=[],o=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=u&&u[t],r=t>0?Jq()(e,"paddingAngle",0):0;if(n){var a=uK(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=nte(nte({},e),{},{startAngle:o+r,endAngle:o+a(i)+r});s.push(l),o=l.endAngle}else{var c=e.endAngle,d=e.startAngle,h=uK(0,c-d)(i),f=nte(nte({},e),{},{startAngle:o+r,endAngle:o+h+r});s.push(f),o=f.endAngle}})),r.createElement(hY,null,e.renderSectorsStatically(s))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&o3()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,i=t.sectors,s=t.className,o=t.label,a=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.isAnimationActive,h=this.state.isAnimationFinished;if(n||!i||!i.length||!iK(a)||!iK(l)||!iK(c)||!iK(u))return null;var f=Wq("recharts-pie",s);return r.createElement(hY,{tabIndex:this.props.rootTabIndex,className:f,ref:function(t){e.pieRef=t}},this.renderSectors(),o&&this.renderLabels(i),p6.renderCallByParent(this.props,null,!1),(!d||h)&&Xee.renderCallByParent(this.props,i,!1))}}],s=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,n){if(r.isValidElement(e))return r.cloneElement(e,t);if(gK()(e))return e(t);var i=Wq("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return r.createElement(n9,ete({},t,{key:n,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(e,t,n){if(r.isValidElement(e))return r.cloneElement(e,t);var i=n;if(gK()(e)&&(i=e(t),r.isValidElement(i)))return i;var s=Wq("recharts-pie-label-text","boolean"===typeof e||gK()(e)?"":e.className);return r.createElement(QZ,ete({},t,{alignmentBaseline:"middle",className:s}),i)}}],i&&rte(n.prototype,i),s&&rte(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.PureComponent);Qee=ute,lte(ute,"displayName","Pie"),lte(ute,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!BY.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),lte(ute,"parseDeltaAngle",(function(e,t){return nK(t-e)*Math.min(Math.abs(t-e),360)})),lte(ute,"getRealPieData",(function(e){var t=e.data,n=e.children,r=VK(e,!1),i=RK(n,Zee);return t&&t.length?t.map((function(e,t){return nte(nte(nte({payload:e},r),e),i&&i[t]&&i[t].props)})):i&&i.length?i.map((function(e){return nte(nte({},r),e.props)})):[]})),lte(ute,"parseCoordinateOfPie",(function(e,t){var n=t.top,r=t.left,i=t.width,s=t.height,o=J4(i,s);return{cx:r+lK(e.cx,i,i/2),cy:n+lK(e.cy,s,s/2),innerRadius:lK(e.innerRadius,o,0),outerRadius:lK(e.outerRadius,o,.8*o),maxRadius:e.maxRadius||Math.sqrt(i*i+s*s)/2}})),lte(ute,"getComposedData",(function(e){var t=e.item,n=e.offset,r=void 0!==t.type.defaultProps?nte(nte({},t.type.defaultProps),t.props):t.props,i=Qee.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,o=r.startAngle,a=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,h=r.tooltipType,f=Math.abs(r.minAngle),p=Qee.parseCoordinateOfPie(r,n),m=Qee.parseDeltaAngle(o,a),g=Math.abs(m),y=c;pK()(c)&&pK()(d)?(hK(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):pK()(c)&&(hK(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=d);var v,b,x=i.filter((function(e){return 0!==a4(e,y,0)})).length,w=g-x*f-(g>=360?x:x-1)*l,_=i.reduce((function(e,t){var n=a4(t,y,0);return e+(iK(n)?n:0)}),0);_>0&&(v=i.map((function(e,t){var n,r=a4(e,y,0),i=a4(e,u,t),a=(iK(r)?r:0)/_,c=(n=t?b.endAngle+nK(m)*l*(0!==r?1:0):o)+nK(m)*((0!==r?f:0)+a*w),d=(n+c)/2,g=(p.innerRadius+p.outerRadius)/2,v=[{name:i,value:r,payload:e,dataKey:y,type:h}],x=Z4(p.cx,p.cy,g,d);return b=nte(nte(nte({percent:a,cornerRadius:s,name:i,tooltipPayload:v,midAngle:d,middleRadius:g,tooltipPosition:x},e),p),{},{value:a4(e,y),startAngle:n,endAngle:c,payload:e,paddingAngle:nK(m)*l})})));return nte(nte({},p),{},{sectors:v,data:i})}));var dte=function(e){var t=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,s=void 0===i?"axis":i,o=e.validateTooltipEventTypes,a=void 0===o?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,s=t.updateId,o=t.dataStartIndex,a=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,f=e.maxBarSize,p=K9(u),m=p.numericAxisName,g=p.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some((function(e){var t=OK(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,p){var b=U9(e.data,{graphicalItems:[n],dataStartIndex:o,dataEndIndex:a}),x=void 0!==n.type.defaultProps?P9(P9({},n.type.defaultProps),n.props):n.props,w=x.dataKey,_=x.maxBarSize,S=x["".concat(m,"Id")],E=x["".concat(g,"Id")],j=l.reduce((function(e,n){var r=t["".concat(n.axisType,"Map")],i=x["".concat(n.axisType,"Id")];r&&r[i]||"zAxis"===n.axisType||iY(!1);var s=r[i];return P9(P9({},e),{},M9(M9({},n.axisType,s),"".concat(n.axisType,"Ticks"),f4(s)))}),{}),k=j[g],C=j["".concat(g,"Ticks")],T=r&&r[S]&&r[S].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?s4(s4({},e.type.defaultProps),e.props):e.props).stackId;if(sK(r)){var i=t[r];if(i){var s=i.items.indexOf(e);return s>=0?i.stackedData[s]:null}}return null}(n,r[S].stackGroups),N=OK(n.type).indexOf("Bar")>=0,I=S4(k,C),A=[],O=y&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var s={},o=Object.keys(i),a=0,l=o.length;a<l;a++)for(var c=i[o[a]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var f=c[u[d]],p=f.items,m=f.cateAxisId,g=p.filter((function(e){return OK(e.type).indexOf("Bar")>=0}));if(g&&g.length){var y=g[0].type.defaultProps,v=void 0!==y?s4(s4({},y),g[0].props):g[0].props,b=v.barSize,x=v[m];s[x]||(s[x]=[]);var w=pK()(b)?t:b;s[x].push({item:g[0],stackList:g.slice(1),barSize:pK()(w)?void 0:lK(w,n,0)})}}return s}({barSize:c,stackGroups:r,totalSize:G9(j,g)});if(N){var P,M,D=pK()(_)?f:_,R=null!==(P=null!==(M=S4(k,C,!0))&&void 0!==M?M:D)&&void 0!==P?P:0;A=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,s=void 0===i?[]:i,o=e.maxBarSize,a=s.length;if(a<1)return null;var l,c=lK(t,r,0,!0),u=[];if(s[0].barSize===+s[0].barSize){var d=!1,h=r/a,f=s.reduce((function(e,t){return e+t.barSize||0}),0);(f+=(a-1)*c)>=r&&(f-=(a-1)*c,c=0),f>=r&&h>0&&(d=!0,f=a*(h*=.9));var p={offset:((r-f)/2|0)-c,size:0};l=s.reduce((function(e,t){var n={item:t.item,position:{offset:p.offset+p.size+c,size:d?h:t.barSize}},r=[].concat(n4(e),[n]);return p=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:p})})),r}),u)}else{var m=lK(n,r,0,!0);r-2*m-(a-1)*c<=0&&(c=0);var g=(r-2*m-(a-1)*c)/a;g>1&&(g>>=0);var y=o===+o?Math.min(g,o):g;l=s.reduce((function(e,t,n){var r=[].concat(n4(e),[{item:t.item,position:{offset:m+(g+c)*n+(g-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),u)}return l}({barGap:d,barCategoryGap:h,bandSize:R!==I?R:I,sizeList:O[E],maxBarSize:D}),R!==I&&(A=A.map((function(e){return P9(P9({},e),{},{position:P9(P9({},e.position),{},{offset:e.position.offset-R/2})})})))}var L=n&&n.type&&n.type.getComposedData;L&&v.push({props:P9(P9({},L(P9(P9({},j),{},{displayedData:b,props:e,dataKey:w,item:n,bandSize:I,barPosition:A,offset:i,stackedData:T,layout:u,dataStartIndex:o,dataEndIndex:a}))),{},M9(M9(M9({key:n.key||"item-".concat(p)},m,j[m]),g,j[g]),"animationId",s)),childIndex:WK(n,e.children),item:n})})),v},f=function(e,r){var i=e.props,s=e.dataStartIndex,o=e.dataEndIndex,a=e.updateId;if(!FK({props:i}))return null;var c=i.children,d=i.layout,f=i.stackOffset,p=i.data,m=i.reverseStackOrder,g=K9(d),y=g.numericAxisName,v=g.cateAxisName,b=RK(c,n),x=function(e,t,n,r,i,s){if(!e)return null;var o=(s?t.reverse():t).reduce((function(e,t){var i,s=null!==(i=t.type)&&void 0!==i&&i.defaultProps?s4(s4({},t.type.defaultProps),t.props):t.props,o=s.stackId;if(s.hide)return e;var a=s[n],l=e[a]||{hasStack:!1,stackGroups:{}};if(sK(o)){var c=l.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[o]=c}else l.stackGroups[aK("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return s4(s4({},e),{},o4({},a,l))}),{});return Object.keys(o).reduce((function(t,s){var a=o[s];return a.hasStack&&(a.stackGroups=Object.keys(a.stackGroups).reduce((function(t,s){var o=a.stackGroups[s];return s4(s4({},t),{},o4({},s,{numericAxisId:n,cateAxisId:r,items:o.items,stackedData:v4(e,o.items,i)}))}),{})),s4(s4({},t),{},o4({},s,a))}),{})}(p,b,"".concat(y,"Id"),"".concat(v,"Id"),f,m),w=l.reduce((function(e,t){var n="".concat(t.axisType,"Map");return P9(P9({},e),{},M9({},n,W9(i,P9(P9({},t),{},{graphicalItems:b,stackGroups:t.axisType===y&&x,dataStartIndex:s,dataEndIndex:o}))))}),{}),_=Y9(P9(P9({},w),{},{props:i,graphicalItems:b}),null===r||void 0===r?void 0:r.legendBBox);Object.keys(w).forEach((function(e){w[e]=u(i,w[e],_,e.replace("Map",""),t)}));var S=function(e){var t=cK(e),n=f4(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:nY()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:S4(t,n)}}(w["".concat(v,"Map")]),E=h(i,P9(P9({},w),{},{dataStartIndex:s,dataEndIndex:o,updateId:a,graphicalItems:b,stackGroups:x,offset:_}));return P9(P9({formattedGraphicalItems:E,graphicalItems:b,offset:_,stackGroups:x},S),w)},p=function(e){function n(e){var i,s,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),M9(o=j9(this,n,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),M9(o,"accessibilityManager",new L7),M9(o,"handleLegendBBoxUpdate",(function(e){if(e){var t=o.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;o.setState(P9({legendBBox:e},f({props:o.props,dataStartIndex:n,dataEndIndex:r,updateId:i},P9(P9({},o.state),{},{legendBBox:e}))))}})),M9(o,"handleReceiveSyncEvent",(function(e,t,n){if(o.props.syncId===e){if(n===o.eventEmitterSymbol&&"function"!==typeof o.props.syncMethod)return;o.applySyncEvent(t)}})),M9(o,"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==o.state.dataStartIndex||n!==o.state.dataEndIndex){var r=o.state.updateId;o.setState((function(){return P9({dataStartIndex:t,dataEndIndex:n},f({props:o.props,dataStartIndex:t,dataEndIndex:n,updateId:r},o.state))})),o.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),M9(o,"handleMouseEnter",(function(e){var t=o.getMouseInfo(e);if(t){var n=P9(P9({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseEnter;gK()(r)&&r(n,e)}})),M9(o,"triggeredAfterMouseMove",(function(e){var t=o.getMouseInfo(e),n=t?P9(P9({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseMove;gK()(r)&&r(n,e)})),M9(o,"handleItemMouseEnter",(function(e){o.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),M9(o,"handleItemMouseLeave",(function(){o.setState((function(){return{isTooltipActive:!1}}))})),M9(o,"handleMouseMove",(function(e){e.persist(),o.throttleTriggeredAfterMouseMove(e)})),M9(o,"handleMouseLeave",(function(e){o.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};o.setState(t),o.triggerSyncEvent(t);var n=o.props.onMouseLeave;gK()(n)&&n(t,e)})),M9(o,"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&AK[t]?AK[t]:null}(e),r=Jq()(o.props,"".concat(n));n&&gK()(r)&&r(null!==(t=/.*touch.*/i.test(n)?o.getMouseInfo(e.changedTouches[0]):o.getMouseInfo(e))&&void 0!==t?t:{},e)})),M9(o,"handleClick",(function(e){var t=o.getMouseInfo(e);if(t){var n=P9(P9({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onClick;gK()(r)&&r(n,e)}})),M9(o,"handleMouseDown",(function(e){var t=o.props.onMouseDown;gK()(t)&&t(o.getMouseInfo(e),e)})),M9(o,"handleMouseUp",(function(e){var t=o.props.onMouseUp;gK()(t)&&t(o.getMouseInfo(e),e)})),M9(o,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),M9(o,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseDown(e.changedTouches[0])})),M9(o,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseUp(e.changedTouches[0])})),M9(o,"handleDoubleClick",(function(e){var t=o.props.onDoubleClick;gK()(t)&&t(o.getMouseInfo(e),e)})),M9(o,"handleContextMenu",(function(e){var t=o.props.onContextMenu;gK()(t)&&t(o.getMouseInfo(e),e)})),M9(o,"triggerSyncEvent",(function(e){void 0!==o.props.syncId&&A7.emit(O7,o.props.syncId,e,o.eventEmitterSymbol)})),M9(o,"applySyncEvent",(function(e){var t=o.props,n=t.layout,r=t.syncMethod,i=o.state.updateId,s=e.dataStartIndex,a=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)o.setState(P9({dataStartIndex:s,dataEndIndex:a},f({props:o.props,dataStartIndex:s,dataEndIndex:a,updateId:i},o.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=o.state,h=d.offset,p=d.tooltipTicks;if(!h)return;if("function"===typeof r)u=r(p,e);else if("value"===r){u=-1;for(var m=0;m<p.length;m++)if(p[m].value===e.activeLabel){u=m;break}}var g=P9(P9({},h),{},{x:h.left,y:h.top}),y=Math.min(l,g.x+g.width),v=Math.min(c,g.y+g.height),b=p[u]&&p[u].value,x=z9(o.state,o.props.data,u),w=p[u]?{x:"horizontal"===n?p[u].coordinate:y,y:"horizontal"===n?v:p[u].coordinate}:F9;o.setState(P9(P9({},e),{},{activeLabel:b,activeCoordinate:w,activePayload:x,activeTooltipIndex:u}))}else o.setState(e)})),M9(o,"renderCursor",(function(e){var n,i=o.state,s=i.isTooltipActive,a=i.activeCoordinate,l=i.activePayload,c=i.offset,u=i.activeTooltipIndex,d=i.tooltipAxisBandSize,h=o.getTooltipEventType(),f=null!==(n=e.props.active)&&void 0!==n?n:s,p=o.props.layout,m=e.key||"_recharts-cursor";return r.createElement(y9,{key:m,activeCoordinate:a,activePayload:l,activeTooltipIndex:u,chartName:t,element:e,isActive:f,layout:p,offset:c,tooltipAxisBandSize:d,tooltipEventType:h})})),M9(o,"renderPolarAxis",(function(e,t,n){var i=Jq()(e,"type.axisType"),s=Jq()(o.state,"".concat(i,"Map")),a=e.type.defaultProps,l=void 0!==a?P9(P9({},a),e.props):e.props,c=s&&s[l["".concat(i,"Id")]];return(0,r.cloneElement)(e,P9(P9({},c),{},{className:Wq(i,c.className),key:e.key||"".concat(t,"-").concat(n),ticks:f4(c,!0)}))})),M9(o,"renderPolarGrid",(function(e){var t=e.props,n=t.radialLines,i=t.polarAngles,s=t.polarRadius,a=o.state,l=a.radiusAxisMap,c=a.angleAxisMap,u=cK(l),d=cK(c),h=d.cx,f=d.cy,p=d.innerRadius,m=d.outerRadius;return(0,r.cloneElement)(e,{polarAngles:Array.isArray(i)?i:f4(d,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(s)?s:f4(u,!0).map((function(e){return e.coordinate})),cx:h,cy:f,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:n})})),M9(o,"renderLegend",(function(){var e=o.state.formattedGraphicalItems,t=o.props,n=t.children,i=t.width,s=t.height,a=o.props.margin||{},l=i-(a.left||0)-(a.right||0),u=e4({children:n,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!u)return null;var d=u.item,h=S9(u,v9);return(0,r.cloneElement)(d,P9(P9({},h),{},{chartWidth:i,chartHeight:s,margin:a,onBBoxUpdate:o.handleLegendBBoxUpdate}))})),M9(o,"renderTooltip",(function(){var e,t=o.props,n=t.children,i=t.accessibilityLayer,s=LK(n,eG);if(!s)return null;var a=o.state,l=a.isTooltipActive,c=a.activeCoordinate,u=a.activePayload,d=a.activeLabel,h=a.offset,f=null!==(e=s.props.active)&&void 0!==e?e:l;return(0,r.cloneElement)(s,{viewBox:P9(P9({},h),{},{x:h.left,y:h.top}),active:f,label:d,payload:f?u:[],coordinate:c,accessibilityLayer:i})})),M9(o,"renderBrush",(function(e){var t=o.props,n=t.margin,i=t.data,s=o.state,a=s.offset,l=s.dataStartIndex,c=s.dataEndIndex,u=s.updateId;return(0,r.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:m4(o.handleBrushChange,e.props.onChange),data:i,x:iK(e.props.x)?e.props.x:a.left,y:iK(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(n.bottom||0),width:iK(e.props.width)?e.props.width:a.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})})),M9(o,"renderReferenceElement",(function(e,t,n){if(!e)return null;var i=o.clipPathId,s=o.state,a=s.xAxisMap,l=s.yAxisMap,c=s.offset,u=e.type.defaultProps||{},d=e.props,h=d.xAxisId,f=void 0===h?u.xAxisId:h,p=d.yAxisId,m=void 0===p?u.yAxisId:p;return(0,r.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:a[f],yAxis:l[m],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:i})})),M9(o,"renderActivePoints",(function(e){var t=e.item,r=e.activePoint,i=e.basePoint,s=e.childIndex,o=e.isRange,a=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?P9(P9({},t.item.type.defaultProps),t.item.props):t.item.props,u=c.activeDot,d=P9(P9({index:s,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:c4(t.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},VK(u,!1)),kK(u));return a.push(n.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(s))),i?a.push(n.renderActiveDot(u,P9(P9({},d),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(s))):o&&a.push(null),a})),M9(o,"renderGraphicChild",(function(e,t,n){var i=o.filterFormatItem(e,t,n);if(!i)return null;var s=o.getTooltipEventType(),a=o.state,l=a.isTooltipActive,c=a.tooltipAxis,u=a.activeTooltipIndex,d=a.activeLabel,h=LK(o.props.children,eG),f=i.props,p=f.points,m=f.isRange,g=f.baseLine,y=void 0!==i.item.type.defaultProps?P9(P9({},i.item.type.defaultProps),i.item.props):i.item.props,v=y.activeDot,b=y.hide,x=y.activeBar,w=y.activeShape,_=Boolean(!b&&l&&h&&(v||x||w)),S={};"axis"!==s&&h&&"click"===h.props.trigger?S={onClick:m4(o.handleItemMouseEnter,e.props.onClick)}:"axis"!==s&&(S={onMouseLeave:m4(o.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:m4(o.handleItemMouseEnter,e.props.onMouseEnter)});var E=(0,r.cloneElement)(e,P9(P9({},i.props),S));if(_){if(!(u>=0)){var j,k=(null!==(j=o.getItemByXY(o.state.activeCoordinate))&&void 0!==j?j:{graphicalItem:E}).graphicalItem,C=k.item,T=void 0===C?e:C,N=k.childIndex,I=P9(P9(P9({},i.props),S),{},{activeIndex:N});return[(0,r.cloneElement)(T,I),null,null]}var A,O;if(c.dataKey&&!c.allowDuplicatedCategory){var P="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());A=dK(p,P,d),O=m&&g&&dK(g,P,d)}else A=null===p||void 0===p?void 0:p[u],O=m&&g&&g[u];if(w||x){var M=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,r.cloneElement)(e,P9(P9(P9({},i.props),S),{},{activeIndex:M})),null,null]}if(!pK()(A))return[E].concat(N9(o.renderActivePoints({item:i,activePoint:A,basePoint:O,childIndex:u,isRange:m})))}return m?[E,null,null]:[E,null]})),M9(o,"renderCustomized",(function(e,t,n){return(0,r.cloneElement)(e,P9(P9({key:"recharts-customized-".concat(n)},o.props),o.state))})),M9(o,"renderMap",{CartesianGrid:{handler:B9,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:B9},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:B9},YAxis:{handler:B9},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(i=e.id)&&void 0!==i?i:aK("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=Kq()(o.triggeredAfterMouseMove,null!==(s=e.throttleDelay)&&void 0!==s?s:1e3/60),o.state={},o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T9(e,t)}(n,e),i=n,o=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,s=LK(t,eG);if(s){var o=s.props.defaultIndex;if(!("number"!==typeof o||o<0||o>this.state.tooltipTicks.length-1)){var a=this.state.tooltipTicks[o]&&this.state.tooltipTicks[o].value,l=z9(this.state,n,o,a),c=this.state.tooltipTicks[o].coordinate,u=(this.state.offset.top+r)/2,d="horizontal"===i?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));h&&(d=P9(P9({},d),h.props.points[o].tooltipPosition),l=h.props.points[o].tooltipPayload);var f={activeTooltipIndex:o,isTooltipActive:!0,activeLabel:a,activePayload:l,activeCoordinate:d};this.setState(f),this.renderCursor(s),this.accessibilityManager.setIndex(o)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){zK([LK(e.children,eG)],[LK(this.props.children,eG)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=LK(this.props.children,eG);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return a.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},o=r.width/n.offsetWidth||1,a=this.inRange(s.chartX,s.chartY,o);if(!a)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&u){var d=cK(c).scale,h=cK(u).scale,f=d&&d.invert?d.invert(s.chartX):null,p=h&&h.invert?h.invert(s.chartY):null;return P9(P9({},s),{},{xValue:f,yValue:p})}var m=$9(this.state,this.props.data,this.props.layout,a);return m?P9(P9({},s),m):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,s=t/n;if("horizontal"===r||"vertical"===r){var o=this.state.offset;return i>=o.left&&i<=o.left+o.width&&s>=o.top&&s<=o.top+o.height?{x:i,y:s}:null}var a=this.state,l=a.angleAxisMap,c=a.radiusAxisMap;if(l&&c){var u=cK(l);return n6({x:i,y:s},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=LK(e,eG),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),P9(P9({},kK(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){A7.on(O7,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){A7.removeListener(O7,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,s=r.length;i<s;i++){var o=r[i];if(o.item===e||o.props.key===e.key||t===OK(o.item.type)&&n===o.childIndex)return o}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,i=t.top,s=t.height,o=t.width;return r.createElement("defs",null,r.createElement("clipPath",{id:e},r.createElement("rect",{x:n,y:i,height:s,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=_9(t,2),r=n[0],i=n[1];return P9(P9({},e),{},M9({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=_9(t,2),r=n[0],i=n[1];return P9(P9({},e),{},M9({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,s=n.length;i<s;i++){var o=n[i],a=o.props,l=o.item,c=void 0!==l.type.defaultProps?P9(P9({},l.type.defaultProps),l.props):l.props,u=OK(l.type);if("Bar"===u){var d=(a.data||[]).find((function(t){return eZ(e,t)}));if(d)return{graphicalItem:o,payload:d}}else if("RadialBar"===u){var h=(a.data||[]).find((function(t){return n6(e,t)}));if(h)return{graphicalItem:o,payload:h}}else if(g8(o,r)||y8(o,r)||v8(o,r)){var f=_8({graphicalItem:o,activeTooltipItem:r,itemData:c.data}),p=void 0===c.activeIndex?f:c.activeIndex;return{graphicalItem:P9(P9({},o),{},{childIndex:p}),payload:v8(o,r)?c.data[f]:o.props.data[f]}}}return null}},{key:"render",value:function(){var e=this;if(!FK(this))return null;var t,n,i=this.props,s=i.children,o=i.className,a=i.width,l=i.height,c=i.style,u=i.compact,d=i.title,h=i.desc,f=S9(i,b9),p=VK(f,!1);if(u)return r.createElement(J6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement(lY,w9({},p,{width:a,height:l,title:d,desc:h}),this.renderClipPath(),HK(s,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return r.createElement(J6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement("div",w9({className:Wq("recharts-wrapper",o),style:P9({position:"relative",cursor:"default",width:a,height:l},c)},m,{ref:function(t){e.container=t}}),r.createElement(lY,w9({},p,{width:a,height:l,title:d,desc:h,style:L9}),this.renderClipPath(),HK(s,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],o&&E9(i.prototype,o),l&&E9(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,o,l}(r.Component);M9(p,"displayName",t),M9(p,"defaultProps",P9({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),M9(p,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,r=e.data,i=e.children,s=e.width,o=e.height,a=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=q9(e);return P9(P9(P9({},h),{},{updateId:0},f(P9(P9({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:s,prevHeight:o,prevLayout:a,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||s!==t.prevWidth||o!==t.prevHeight||a!==t.prevLayout||l!==t.prevStackOffset||!xK(c,t.prevMargin)){var p=q9(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=P9(P9({},$9(t,r,a)),{},{updateId:t.updateId+1}),y=P9(P9(P9({},p),m),g);return P9(P9(P9({},y),f(P9({props:e},y),t)),{},{prevDataKey:n,prevData:r,prevWidth:s,prevHeight:o,prevLayout:a,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!zK(i,t.prevChildren)){var v,b,x,w,_=LK(i,$4),S=_&&null!==(v=null===(b=_.props)||void 0===b?void 0:b.startIndex)&&void 0!==v?v:u,E=_&&null!==(x=null===(w=_.props)||void 0===w?void 0:w.endIndex)&&void 0!==x?x:d,j=S!==u||E!==d,k=!pK()(r)&&!j?t.updateId:t.updateId+1;return P9(P9({updateId:k},f(P9(P9({props:e},t),{},{updateId:k,dataStartIndex:S,dataEndIndex:E}),t)),{},{prevChildren:i,dataStartIndex:S,dataEndIndex:E})}return null})),M9(p,"renderActiveDot",(function(e,t,n){var i;return i=(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):gK()(e)?e(t):r.createElement(gX,t),r.createElement(hY,{className:"recharts-active-dot",key:n},i)}));var m=(0,r.forwardRef)((function(e,t){return r.createElement(p,w9({},e,{ref:t}))}));return m.displayName=p.displayName,m}({chartName:"PieChart",GraphicalChild:ute,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:yee},{axisType:"radiusAxis",AxisComp:Ree}],formatAxisMap:function(t,n,r,i,s){var o=t.width,a=t.height,l=t.startAngle,c=t.endAngle,u=lK(t.cx,o,o/2),d=lK(t.cy,a,a/2),h=J4(o,a,r),f=lK(t.innerRadius,h,0),p=lK(t.outerRadius,h,.8*h);return Object.keys(n).reduce((function(t,r){var o,a=n[r],h=a.domain,m=a.reversed;if(pK()(a.range))"angleAxis"===i?o=[l,c]:"radiusAxis"===i&&(o=[f,p]),m&&(o=[o[1],o[0]]);else{var g=Y4(o=a.range,2);l=g[0],c=g[1]}var y=function(t,n,r){var i=t.scale,s=t.type,o=t.layout,a=t.axisType;if("auto"===i)return"radial"===o&&"radiusAxis"===a?{scale:hZ(),realScaleType:"band"}:"radial"===o&&"angleAxis"===a?{scale:R0(),realScaleType:"linear"}:"category"===s&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:pZ(),realScaleType:"point"}:"category"===s?{scale:hZ(),realScaleType:"band"}:{scale:R0(),realScaleType:"linear"};if(Gq()(i)){var l="scale".concat(nG()(i));return{scale:(e[l]||pZ)(),realScaleType:e[l]?l:"point"}}return gK()(i)?{scale:i}:{scale:pZ(),realScaleType:"point"}}(a,s),v=y.realScaleType,b=y.scale;b.domain(h).range(o),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-g4,s=Math.max(r[0],r[1])+g4,o=e(t[0]),a=e(t[n-1]);(o<i||o>s||a<i||a>s)&&e.domain([t[0],t[n-1]])}}(b);var x=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,s=t.originalDomain,o=t.allowDecimals,a=n||t.scale;if("auto"!==a&&"linear"!==a)return null;if(i&&"number"===r&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var c=M3(l,i,o);return e.domain([n3()(c),e3()(c)]),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:D3(u,i,o)}}return null}(b,q4(q4({},a),{},{realScaleType:v})),w=q4(q4(q4({},a),x),{},{range:o,radius:p,realScaleType:v,scale:b,cx:u,cy:d,innerRadius:f,outerRadius:p,startAngle:l,endAngle:c});return q4(q4({},t),{},K4({},r,w))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function hte(e){const t=uM(e);return t.setHours(0,0,0,0),t}function fte(e,t){const n=hte(e),r=hte(t),i=+n-DM(n),s=+r-DM(r);return Math.round((i-s)/864e5)}function pte(e){const t=uM(e),n=lM(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function mte(e){const t=uM(e);return fte(t,pte(t))+1}function gte(e,t){const n=MM(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=uM(e),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function yte(e){return gte(e,{weekStartsOn:1})}function vte(e){const t=uM(e),n=t.getFullYear(),r=lM(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=yte(r),s=lM(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=yte(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function bte(e){const t=vte(e),n=lM(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),yte(n)}function xte(e){const t=uM(e),n=+yte(t)-+bte(t);return Math.round(n/hM)+1}function wte(e,t){const n=uM(e),r=n.getFullYear(),i=MM(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=lM(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=gte(o,t),l=lM(e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=gte(l,t);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function _te(e,t){const n=MM(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=wte(e,t),s=lM(e,0);s.setFullYear(i,0,r),s.setHours(0,0,0,0);return gte(s,t)}function Ste(e,t){const n=uM(e),r=+gte(n,t)-+_te(n,t);return Math.round(r/hM)+1}function Ete(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const jte={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ete("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Ete(n+1,2)},d:(e,t)=>Ete(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Ete(e.getHours()%12||12,t.length),H:(e,t)=>Ete(e.getHours(),t.length),m:(e,t)=>Ete(e.getMinutes(),t.length),s:(e,t)=>Ete(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Ete(Math.trunc(r*Math.pow(10,n-3)),t.length)}},kte="midnight",Cte="noon",Tte="morning",Nte="afternoon",Ite="evening",Ate="night",Ote={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return jte.y(e,t)},Y:function(e,t,n,r){const i=wte(e,r),s=i>0?i:1-i;if("YY"===t){return Ete(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):Ete(s,t.length)},R:function(e,t){return Ete(vte(e),t.length)},u:function(e,t){return Ete(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ete(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ete(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return jte.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ete(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=Ste(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Ete(i,t.length)},I:function(e,t,n){const r=xte(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Ete(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):jte.d(e,t)},D:function(e,t,n){const r=mte(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Ete(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ete(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ete(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Ete(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?Cte:0===r?kte:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?Ite:r>=12?Nte:r>=4?Tte:Ate,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return jte.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):jte.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ete(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ete(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):jte.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):jte.s(e,t)},S:function(e,t){return jte.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Mte(r);case"XXXX":case"XX":return Dte(r);default:return Dte(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Mte(r);case"xxxx":case"xx":return Dte(r);default:return Dte(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Pte(r,":");default:return"GMT"+Dte(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Pte(r,":");default:return"GMT"+Dte(r,":")}},t:function(e,t,n){return Ete(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return Ete(e.getTime(),t.length)}};function Pte(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return 0===s?n+String(i):n+String(i)+t+Ete(s,2)}function Mte(e,t){if(e%60===0){return(e>0?"-":"+")+Ete(Math.abs(e)/60,2)}return Dte(e,t)}function Dte(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+Ete(Math.trunc(r/60),2)+t+Ete(r%60,2)}const Rte=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Lte=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Fte={p:Lte,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Rte(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Rte(r,t)).replace("{{time}}",Lte(i,t))}},Bte=/^D+$/,Ute=/^Y+$/,Vte=["D","DD","YY","YYYY"];function zte(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function $te(e){if(!zte(e)&&"number"!==typeof e)return!1;const t=uM(e);return!isNaN(Number(t))}const Hte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qte=/^'([^]*?)'?$/,Kte=/''/g,Yte=/[a-zA-Z]/;function Gte(e,t,n){const r=MM(),i=n?.locale??r.locale??OM,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=uM(e);if(!$te(a))throw new RangeError("Invalid time value");let l=t.match(Wte).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,Fte[t])(e,i.formatLong)}return e})).join("").match(Hte).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Xte(e)};if(Ote[t])return{isToken:!0,value:e};if(t.match(Yte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map((r=>{if(!r.isToken)return r.value;const s=r.value;(!n?.useAdditionalWeekYearTokens&&function(e){return Ute.test(e)}(s)||!n?.useAdditionalDayOfYearTokens&&function(e){return Bte.test(e)}(s))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),Vte.includes(e))throw new RangeError(r)}(s,t,String(e));return(0,Ote[s[0]])(a,s,i.localize,c)})).join("")}function Xte(e){const t=e.match(qte);return t?t[1].replace(Kte,"'"):e}function Qte(e,t){const n=t?.additionalDigits??2,r=function(e){const t={},n=e.split(Zte.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Zte.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Zte.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=Zte.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let i;if(r.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:null===s?i:100*s,restDateString:e.slice((r[1]||r[2]).length)}}(r.date,n);i=function(e,t){if(null===t)return new Date(NaN);const n=e.match(Jte);if(!n)return new Date(NaN);const r=!!n[4],i=nne(n[1]),s=nne(n[2])-1,o=nne(n[3]),a=nne(n[4]),l=nne(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,a,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}(t,a,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(ine[t]||(sne(e)?29:28))}(t,s,o)&&function(e,t){return t>=1&&t<=(sne(e)?366:365)}(t,i)?(e.setUTCFullYear(t,s,Math.max(i,o)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o,a=0;if(r.time&&(a=function(e){const t=e.match(ene);if(!t)return NaN;const n=rne(t[1]),r=rne(t[2]),i=rne(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*pM+r*fM+1e3*i}(r.time),isNaN(a)))return new Date(NaN);if(!r.timezone){const e=new Date(s+a),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return o=function(e){if("Z"===e)return 0;const t=e.match(tne);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*pM+i*fM)}(r.timezone),isNaN(o)?new Date(NaN):new Date(s+a+o)}const Zte={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Jte=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ene=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tne=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nne(e){return e?parseInt(e):1}function rne(e){return e&&parseFloat(e.replace(",","."))||0}const ine=[31,null,31,30,31,30,31,31,30,31,30,31];function sne(e){return e%400===0||e%4===0&&e%100!==0}const one=()=>{var e,t,n,i;const[s,o]=(0,r.useState)(null),{currentUser:a}=SS(),l=te(),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)("weekly"),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[b,x]=(0,r.useState)("overview"),[w,_]=(0,r.useState)(!1),[S,E]=(0,r.useState)(null),[j,k]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=localStorage.getItem("userData");e&&o(JSON.parse(e)),a&&"student"===localStorage.getItem("userRole")||l("/login");(async()=>{if(a)try{const e=Zm(hm(bS,"students"),eg("uid","==",a.uid)),t=await vg(e);if(t.empty)console.error("Student record not found");else{const e=t.docs[0].data();o(e);const n=e.section||"";h(n);const r=Zm(hm(bS,"attendance"),eg("studentId","==",e.id)),i=await vg(r);u(i.docs.map((e=>e.data())));const s=Zm(hm(bS,"notifications"),eg("studentId","==",e.id),rg("date","desc"),sg(5)),a=await vg(s);if(g(a.docs.map((e=>e.data()))),e.section){const t=Zm(hm(bS,"sections"),eg("code","==",e.section)),n=await vg(t);if(!n.empty){const e={id:n.docs[0].id,...n.docs[0].data()};if(E(e),e.instructorId){const t=await gg(fm(bS,"teachers",e.instructorId));t.exists()&&k({id:t.id,...t.data()})}}}}}catch(dv){console.error("Error fetching student data:",dv)}finally{v(!1)}})()}),[a,l]);const C=["#4F46E5","#10B981","#F59E0B","#EF4444"],T=()=>{c.length;const e=c.filter((e=>"present"===e.status)).length,t=c.filter((e=>"late"===e.status)).length,n=c.filter((e=>"absent"===e.status)).length;return[{name:"Present",value:e},{name:"Late",value:t},{name:"Absent",value:n}]};if(y)return(0,wS.jsx)("div",{className:"p-8 text-center",children:"Loading student data..."});if(!s)return(0,wS.jsx)("div",{className:"p-8 text-center",children:"No student data found."});const N=c||[],I=N.length>0?(N.filter((e=>"present"===e.status)).length/N.length*100||0).toFixed(1):0;return(0,wS.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,wS.jsx)($q,{student:s}),(0,wS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24",children:[(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-indigo-600 to-blue-500 rounded-2xl shadow-xl p-8 mb-8",children:(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsxs)("div",{className:"text-white",children:[(0,wS.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",s.fullName,"!"]}),(0,wS.jsxs)("p",{className:"opacity-90",children:[s.department," \u2022 ",s.yearLevel]})]}),(0,wS.jsxs)("div",{className:"bg-white/20 backdrop-blur-lg rounded-xl p-4",children:[(0,wS.jsx)("p",{className:"text-white text-sm",children:"Current Section"}),(0,wS.jsx)("p",{className:"text-white text-2xl font-bold",children:s.section})]})]})}),(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{title:"Attendance Rate",value:`${I}%`,icon:(0,wS.jsx)(uP,{className:"h-6 w-6"}),color:"from-emerald-500 to-teal-600"},{title:"Total Classes",value:(null===(e=s.courses)||void 0===e?void 0:e.length)||0,icon:(0,wS.jsx)(QP,{className:"h-6 w-6"}),color:"from-blue-500 to-indigo-600"},{title:"Present Today",value:c.filter((e=>"present"===e.status&&Gte(Qte(e.date),"yyyy-MM-dd")===Gte(new Date,"yyyy-MM-dd"))).length,icon:(0,wS.jsx)(tM,{className:"h-6 w-6"}),color:"from-violet-500 to-purple-600"},{title:"Next Class",value:(null===(t=s.schedule)||void 0===t?void 0:t.startTime)||"N/A",icon:(0,wS.jsx)(rM,{className:"h-6 w-6"}),color:"from-orange-500 to-red-600"}].map(((e,t)=>(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`bg-gradient-to-r ${e.color} rounded-xl p-6 text-white shadow-lg`,children:(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-white/80 text-sm",children:e.title}),(0,wS.jsx)("p",{className:"text-2xl font-bold mt-1",children:e.value})]}),(0,wS.jsx)("div",{className:"bg-white/20 p-3 rounded-lg",children:e.icon})]})},e.title)))}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg p-6 lg:col-span-2",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,wS.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Today's Schedule"}),(0,wS.jsx)("select",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm",value:d,onChange:e=>h(e.target.value),children:null===(n=s.sections)||void 0===n?void 0:n.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))})]}),(0,wS.jsx)("div",{className:"space-y-4",children:null===(i=s.schedule)||void 0===i?void 0:i.days.map(((e,t)=>{var n,r;return(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,wS.jsxs)("div",{className:"flex items-center gap-4",children:[(0,wS.jsx)("div",{className:"bg-indigo-100 p-3 rounded-xl",children:(0,wS.jsx)(tM,{className:"h-6 w-6 text-indigo-600"})}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"font-medium text-gray-900",children:e}),(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(n=s.schedule)||void 0===n?void 0:n.startTime," - ",null===(r=s.schedule)||void 0===r?void 0:r.endTime]})]})]}),(0,wS.jsx)("span",{className:"px-4 py-2 bg-indigo-100 text-indigo-600 rounded-lg text-sm font-medium",children:d})]},t)}))})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,wS.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Attendance Overview"}),(0,wS.jsx)("div",{className:"h-64",children:(0,wS.jsx)(ZK,{width:"100%",height:"100%",children:(0,wS.jsxs)(dte,{children:[(0,wS.jsx)(ute,{data:T(),cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:T().map(((e,t)=>(0,wS.jsx)(Zee,{fill:C[t%C.length]},`cell-${t}`)))}),(0,wS.jsx)(eG,{})]})})}),(0,wS.jsx)("div",{className:"grid grid-cols-3 gap-4 mt-6",children:T().map(((e,t)=>(0,wS.jsxs)("div",{className:"text-center",children:[(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:e.name}),(0,wS.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.value})]},e.name)))})]})]}),S&&(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6 mt-8",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:S.name}),(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["Section Code: ",S.code]})]}),(0,wS.jsx)("div",{className:"bg-indigo-100 p-3 rounded-xl",children:(0,wS.jsx)(EO,{className:"w-8 h-8 text-indigo-600"})})]}),j&&(0,wS.jsxs)("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:[(0,wS.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Instructor"}),(0,wS.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,wS.jsx)("div",{className:"bg-white p-2 rounded-lg",children:(0,wS.jsx)(GM,{className:"w-6 h-6 text-gray-600"})}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"font-medium text-gray-900",children:j.fullName}),(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:j.email}),(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:j.department})]})]})]}),(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Schedule Details"}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg",children:[(0,wS.jsx)(rM,{className:"w-5 h-5 text-gray-600"}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-xs text-gray-500",children:"Days"}),(0,wS.jsx)("p",{className:"text-sm font-medium text-gray-900",children:S.schedule.days.join(", ")})]})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg",children:[(0,wS.jsx)(tM,{className:"w-5 h-5 text-gray-600"}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-xs text-gray-500",children:"Time"}),(0,wS.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[S.schedule.startTime," - ",S.schedule.endTime]})]})]}),S.schedule.room&&(0,wS.jsxs)("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg",children:[(0,wS.jsx)(ZM,{className:"w-5 h-5 text-gray-600"}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-xs text-gray-500",children:"Room"}),(0,wS.jsx)("p",{className:"text-sm font-medium text-gray-900",children:S.schedule.room})]})]})]})]})]})]})]})};function ane(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875ZM9.75 17.25a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-.75Zm2.25-3a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75Zm3.75-1.5a.75.75 0 0 0-1.5 0V18a.75.75 0 0 0 1.5 0v-5.25Z",clipRule:"evenodd"}),r.createElement("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"}))}const lne=r.forwardRef(ane);wU.register(mV,bV,WU,QU,hV,GU,CU);const cne=()=>{const[e,t]=(0,r.useState)(!0),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)("today"),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),{currentUser:b}=SS();(0,r.useEffect)((()=>{(async()=>{if(b)try{t(!0);const e=hm(bS,"attendance"),n=hm(bS,"students"),r=hm(bS,"teachers"),s=Zm(e,rg("date","desc")),o=await vg(s),a=await vg(n),l=new Map(a.docs.map((e=>[e.data().studentId,e.data().department]))),c=await vg(r),u=new Map(c.docs.map((e=>[e.data().uid,e.data().department]))),d=o.docs.map((e=>{const t=e.data(),n=l.get(t.studentId),r=u.get(b.uid);return{...t,id:e.id,department:n||r||"Unknown"}}));i(d),t(!1)}catch(dv){console.error("Error fetching attendance data:",dv),SA().fire("Error","Failed to fetch attendance data","error"),t(!1)}else t(!1)})()}),[b]),(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"teachers"),t=await vg(e),n=Array.from(new Set(t.docs.map((e=>e.data().department)).filter((e=>e))));h(n)}catch(dv){console.error("Error fetching departments:",dv)}})()}),[]);const x=e=>{switch(e){case"present":return"bg-green-100 text-green-800 border-green-300";case"late":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"absent":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},w=e=>{switch(e){case"present":return(0,wS.jsx)(eP,{className:"h-5 w-5 text-green-600"});case"late":return(0,wS.jsx)(tM,{className:"h-5 w-5 text-yellow-600"});case"absent":return(0,wS.jsx)(nP,{className:"h-5 w-5 text-red-600"});default:return(0,wS.jsx)(GM,{className:"h-5 w-5 text-gray-600"})}},_=()=>n.filter((e=>{const t="all"===c||e.department===c,n="all"===a||e.section===a,r=e.studentName.toLowerCase().includes(m.toLowerCase())||e.section.toLowerCase().includes(m.toLowerCase()),i=e.date.toDate(),s=new Date;let o=!1;switch(f){case"today":o=i.toDateString()===s.toDateString();break;case"week":o=i>=new Date(s.getTime()-6048e5);break;case"month":o=i>=new Date(s.getTime()-2592e6)}return t&&n&&r&&o})),S=(()=>{const e=_(),t=e.length,n=e.filter((e=>"present"===e.status)).length,r=e.filter((e=>"late"===e.status)).length,i=e.filter((e=>"absent"===e.status)).length;return{total:t,present:n,late:r,absent:i,presentPercentage:t?n/t*100:0,latePercentage:t?r/t*100:0,absentPercentage:t?i/t*100:0}})(),E=_();return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${y?"ml-20":"ml-64"} overflow-y-auto`,children:(0,wS.jsxs)("div",{className:"p-8",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Reports"}),(0,wS.jsxs)("div",{className:"flex space-x-4",children:[(0,wS.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,wS.jsx)("option",{value:"all",children:"All Departments"}),d.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]}),(0,wS.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,wS.jsx)("option",{value:"all",children:"All Sections"}),s.map((e=>(0,wS.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,wS.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,wS.jsx)("option",{value:"today",children:"Today"}),(0,wS.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,wS.jsx)("option",{value:"month",children:"Last 30 Days"})]}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"text",placeholder:"Search students or sections",value:m,onChange:e=>g(e.target.value),className:"px-4 py-2 pr-10 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,wS.jsx)(KM,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"})]})]})]}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-md p-6 border border-green-100 hover:shadow-lg transition-all",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Present"}),(0,wS.jsx)(eP,{className:"h-8 w-8 text-green-500"})]}),(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-3xl font-bold text-green-600",children:S.present}),(0,wS.jsxs)("span",{className:"text-sm text-green-500",children:[S.presentPercentage.toFixed(1),"%"]})]})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-md p-6 border border-yellow-100 hover:shadow-lg transition-all",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Late"}),(0,wS.jsx)(tM,{className:"h-8 w-8 text-yellow-500"})]}),(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-3xl font-bold text-yellow-600",children:S.late}),(0,wS.jsxs)("span",{className:"text-sm text-yellow-500",children:[S.latePercentage.toFixed(1),"%"]})]})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-md p-6 border border-red-100 hover:shadow-lg transition-all",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Absent"}),(0,wS.jsx)(nP,{className:"h-8 w-8 text-red-500"})]}),(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-3xl font-bold text-red-600",children:S.absent}),(0,wS.jsxs)("span",{className:"text-sm text-red-500",children:[S.absentPercentage.toFixed(1),"%"]})]})]})]}),(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"bg-white rounded-lg shadow-md overflow-hidden",children:e?(0,wS.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,wS.jsx)(bA,{className:"h-10 w-10 text-indigo-500 animate-spin"})}):0===E.length?(0,wS.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,wS.jsx)(lne,{className:"h-16 w-16 mb-4"}),(0,wS.jsx)("p",{className:"text-xl",children:"No attendance records found"})]}):(0,wS.jsxs)("table",{className:"w-full",children:[(0,wS.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,wS.jsxs)("tr",{children:[(0,wS.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,wS.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),(0,wS.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,wS.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,wS.jsx)("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,wS.jsx)("tbody",{children:E.map((e=>(0,wS.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[(0,wS.jsxs)("td",{className:"p-4 flex items-center",children:[(0,wS.jsx)(GM,{className:"h-6 w-6 text-gray-400 mr-3"}),(0,wS.jsx)("span",{className:"font-medium",children:e.studentName})]}),(0,wS.jsx)("td",{className:"p-4",children:e.section}),(0,wS.jsx)("td",{className:"p-4",children:e.subjectCode}),(0,wS.jsx)("td",{className:"p-4",children:e.date.toDate().toLocaleDateString()}),(0,wS.jsx)("td",{className:"p-4",children:(0,wS.jsxs)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${x(e.status)}`,children:[w(e.status),(0,wS.jsx)("span",{className:"ml-2 capitalize",children:e.status})]})})]},e.id)))})]})})]})})]})};function une(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const dne=r.forwardRef(une);function hne(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const fne=r.forwardRef(hne),pne=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)("name"),[m,g]=(0,r.useState)("asc"),[y,v]=(0,r.useState)([]),[b,x]=(0,r.useState)(!1),[w,_]=(0,r.useState)([]),[S,E]=(0,r.useState)(null),[j,k]=(0,r.useState)({subjects:[],schedules:[]}),[C,T]=(0,r.useState)(!1),[N,I]=(0,r.useState)(null),[A,O]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{o(!0);const e=hm(bS,"users"),n=hm(bS,"teachers"),r=hm(bS,"students"),i=(await vg(e)).docs.map((e=>({id:e.id,...e.data()}))),s=(await vg(n)).docs.map((e=>{const t=e.data();return{id:e.id,fullName:t.fullName,email:t.email,role:"instructor",department:t.department,uid:t.uid}})),a=(await vg(r)).docs.map((e=>{const t=e.data();return{id:e.id,fullName:t.fullName,email:t.email,role:"student",department:t.department,studentId:t.studentId,uid:t.uid}})),l=[...i,...s.filter((e=>!i.some((t=>t.uid===e.uid)))),...a.filter((e=>!i.some((t=>t.uid===e.uid))))];t(l),o(!1)}catch(dv){console.error("Error fetching users:",dv),SA().fire("Error","Failed to fetch users","error"),o(!1)}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"subjects"),t=(await vg(e)).docs.map((e=>({id:e.id,...e.data()})));_(t)}catch(dv){console.error("Error fetching subjects:",dv),SA().fire({icon:"error",title:"Fetch Error",text:"Failed to fetch subjects"})}})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"subjects"),t=(await vg(e)).docs.map((e=>({id:e.id,...e.data()})));_(t.filter((e=>"active"===e.status)))}catch(dv){console.error("Error fetching subjects:",dv)}})()}),[]);const P=Array.from(new Set(e.map((e=>e.department||"Unknown")))),M=()=>{k((e=>({...e,schedules:[...e.schedules||[],{day:"",startTime:"",endTime:"",section:"",room:"",subject:""}]})))},D=async()=>{try{if(!N)return void SA().fire({icon:"error",title:"Error",text:"Please select a teacher first"});const e=(j.subjects||[]).map((e=>{const t=w.find((t=>t.id===e));return t?t.name:""})).filter((e=>""!==e)),t=(j.schedules||[]).filter((e=>e.startTime&&e.endTime&&e.section&&e.day)),n={subjects:e,schedules:t},r=fm(bS,"teachers",N),i=(await gg(r)).data();await xg(r,n);const s=hm(bS,"subjects"),o=[...e,...t.map((e=>e.subject||"")).filter(Boolean)];for(const a of o){const e=Zm(s,eg("name","==",a),eg("department","==",null===i||void 0===i?void 0:i.department));(await vg(e)).empty&&await _g(s,{name:a,department:(null===i||void 0===i?void 0:i.department)||"Unassigned",status:"active",createdAt:new Date})}SA().fire({icon:"success",title:"Assignments Saved",text:"Teacher assignments and subjects have been successfully updated",timer:2e3,showConfirmButton:!1}),T(!1)}catch(dv){console.error("Error saving assignments:",dv),SA().fire({icon:"error",title:"Save Error",text:dv instanceof Error?dv.message:"Failed to save teacher assignments"})}},R=()=>(j.schedules||[]).map(((e,t)=>(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"grid grid-cols-6 gap-4 mb-4 items-center",children:[(0,wS.jsxs)("select",{value:e.day,onChange:e=>{const n=[...j.schedules||[]];n[t]={...n[t],day:e.target.value},k((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,wS.jsx)("option",{value:"",children:"Select Day"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]}),(0,wS.jsx)("input",{type:"time",value:e.startTime,onChange:e=>{const n=[...j.schedules||[]];n[t]={...n[t],startTime:e.target.value},k((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,wS.jsx)("input",{type:"time",value:e.endTime,onChange:e=>{const n=[...j.schedules||[]];n[t]={...n[t],endTime:e.target.value},k((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,wS.jsx)("input",{type:"text",placeholder:"Section",value:e.section,onChange:e=>{const n=[...j.schedules||[]];n[t]={...n[t],section:e.target.value},k((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,wS.jsx)("input",{type:"text",placeholder:"Room",value:e.room||"",onChange:e=>{const n=[...j.schedules||[]];n[t]={...n[t],room:e.target.value},k((e=>({...e,schedules:n})))},className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"}),(0,wS.jsxs)("select",{value:e.subject,onChange:e=>((e,t)=>{k((n=>{const r=[...n.schedules||[]];return r[e]={...r[e],subject:t},{...n,schedules:r}}))})(t,e.target.value),className:"col-span-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,wS.jsx)("option",{value:"",children:"Select Subject"}),w.map((e=>(0,wS.jsx)("option",{value:e.name,children:e.name},e.id)))]}),(0,wS.jsx)("button",{onClick:()=>{k((e=>({...e,schedules:(e.schedules||[]).filter(((e,n)=>n!==t))})))},className:"text-red-500 hover:text-red-700",children:(0,wS.jsx)(dne,{className:"w-5 h-5"})})]},t))),L=e.filter((e=>{var t,n,r,i;return("all"===a||e.role===a)&&("all"===c||(null===(t=e.department)||void 0===t?void 0:t.toLowerCase())===c.toLowerCase())&&(""===d||(null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase().includes(d.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(d.toLowerCase()))||(null===(i=e.department)||void 0===i?void 0:i.toLowerCase().includes(d.toLowerCase())))})).sort(((e,t)=>{var n,r,i,s,o,a;let l,c;switch(f){case"name":l=(null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase())||"",c=(null===(r=t.fullName)||void 0===r?void 0:r.toLowerCase())||"";break;case"role":l=(null===(i=e.role)||void 0===i?void 0:i.toLowerCase())||"",c=(null===(s=t.role)||void 0===s?void 0:s.toLowerCase())||"";break;case"department":l=(null===(o=e.department)||void 0===o?void 0:o.toLowerCase())||"",c=(null===(a=t.department)||void 0===a?void 0:a.toLowerCase())||"";break;default:l="",c=""}return"asc"===m?l.localeCompare(c):c.localeCompare(l)}));return(0,wS.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${n?"ml-20":"ml-64"} overflow-y-auto`,children:(0,wS.jsxs)("div",{className:"p-8 space-y-8",children:[(0,wS.jsxs)("div",{className:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:items-center md:justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Users Management"}),(0,wS.jsxs)("p",{className:"mt-2 text-gray-600",children:[L.length," users found"]})]}),(0,wS.jsx)("div",{className:"relative",children:(0,wS.jsx)("input",{type:"text",placeholder:"Search users...",value:d,onChange:e=>h(e.target.value),className:"w-full md:w-64 px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})})]}),(0,wS.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[(0,wS.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,wS.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,wS.jsx)("option",{value:"all",children:"All Roles"}),(0,wS.jsx)("option",{value:"admin",children:"Admin"}),(0,wS.jsx)("option",{value:"instructor",children:"Instructor"}),(0,wS.jsx)("option",{value:"student",children:"Student"})]}),(0,wS.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,wS.jsx)("option",{value:"all",children:"All Departments"}),P.map((e=>(0,wS.jsx)("option",{value:e,children:e||"Unknown"},e)))]})]}),(0,wS.jsxs)("div",{className:"flex gap-4",children:[(0,wS.jsxs)("select",{value:f,onChange:e=>{return t=e.target.value,void(f===t?g("asc"===m?"desc":"asc"):(p(t),g("asc")));var t},className:"px-4 py-2 rounded-lg border border-gray-200 bg-white shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,wS.jsx)("option",{value:"name",children:"Sort by Name"}),(0,wS.jsx)("option",{value:"role",children:"Sort by Role"}),(0,wS.jsx)("option",{value:"department",children:"Sort by Department"})]}),(0,wS.jsx)("button",{onClick:()=>g("asc"===m?"desc":"asc"),className:"px-4 py-2 bg-white border border-gray-200 hover:bg-gray-50",children:"asc"===m?"\u2191":"\u2193"})]})]}),y.length>0&&(0,wS.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg flex items-center justify-between",children:[(0,wS.jsxs)("span",{className:"text-indigo-700",children:[y.length," users selected"]}),(0,wS.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Selected"})]}),s?(0,wS.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,wS.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map((e=>(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`\n        bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden\n        ${y.includes(e.id)?"ring-2 ring-indigo-500":""}\n      `,children:(0,wS.jsxs)("div",{className:"p-6",children:[(0,wS.jsxs)("div",{className:"flex items-start justify-between",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wS.jsx)("input",{type:"checkbox",checked:y.includes(e.id),onChange:t=>{t.target.checked?v([...y,e.id]):v(y.filter((t=>t!==e.id)))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,wS.jsx)("div",{className:`\n              w-12 h-12 rounded-full flex items-center justify-center\n              ${"admin"===e.role?"bg-blue-100":"instructor"===e.role?"bg-purple-100":"bg-green-100"}\n            `,children:"student"===e.role?(0,wS.jsx)(EO,{className:"w-6 h-6 text-green-600"}):(0,wS.jsx)(GM,{className:"w-6 h-6 "+("admin"===e.role?"text-blue-600":"text-purple-600")})}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.fullName}),(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,wS.jsx)("div",{className:"flex items-center space-x-2",children:"instructor"===e.role&&(0,wS.jsxs)("button",{onClick:()=>(async e=>{try{const t=(await gg(fm(bS,"teachers",e.id))).data()||{};E(e),I(e.id),k({subjects:t.subjects||[],schedules:t.schedules||[]}),T(!0)}catch(dv){console.error("Error fetching instructor details:",dv),SA().fire("Error","Failed to load instructor details","error")}})(e),className:"p-2 rounded-lg hover:bg-indigo-50 text-indigo-600 transition-colors duration-200 flex items-center space-x-2",children:[(0,wS.jsx)(fne,{className:"w-5 h-5 mr-1"}),"Assign"]})})]}),(0,wS.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,wS.jsx)("span",{className:`\n            px-3 py-1 rounded-full text-xs font-medium\n            ${"admin"===e.role?"bg-blue-100 text-blue-800":"instructor"===e.role?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}\n          `,children:e.role.charAt(0).toUpperCase()+e.role.slice(1)}),e.department&&(0,wS.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.department}),e.studentId&&(0,wS.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["ID: ",e.studentId]})]})]})},e.id)))})]})}),b&&(0,wS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,wS.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,wS.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Delete Selected Users"}),(0,wS.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",y.length," selected users? This action cannot be undone."]}),(0,wS.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,wS.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,wS.jsx)("button",{onClick:async()=>{try{await Promise.all(y.map((t=>{const n=e.find((e=>e.id===t));if(n){const e="instructor"===n.role?"teachers":"student"===n.role?"students":"users";return wg(fm(bS,e,t))}}))),v([]),x(!1),SA().fire({icon:"success",title:"Users Deleted",text:"Selected users have been removed successfully.",background:"#f8fafc",iconColor:"#3b82f6",confirmButtonColor:"#3b82f6"})}catch(dv){console.error("Error deleting users:",dv),SA().fire("Error","Failed to delete users","error")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete Users"})]})]})}),(()=>{var e,t;return C&&S?(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,wS.jsxs)(dA.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},transition:{type:"spring",stiffness:300,damping:20},className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[95vh] overflow-y-auto flex",children:[(0,wS.jsxs)("div",{className:"w-1/3 bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-8 flex flex-col justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,wS.jsx)("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,wS.jsx)(GM,{className:"w-8 h-8 text-white"})}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h2",{className:"text-xl font-bold",children:S.fullName}),(0,wS.jsx)("p",{className:"text-sm opacity-75",children:S.email})]})]}),(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm opacity-75 mb-1",children:"Department"}),(0,wS.jsx)("p",{className:"font-semibold",children:S.department||"Not Specified"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm opacity-75 mb-1",children:"Current Assignments"}),(0,wS.jsx)("div",{className:"flex flex-wrap gap-2",children:0===(null===(e=j.subjects)||void 0===e?void 0:e.length)?(0,wS.jsx)("span",{className:"text-xs bg-white bg-opacity-10 px-2 py-1 rounded",children:"No subjects assigned"}):null===(t=j.subjects)||void 0===t?void 0:t.map((e=>{const t=w.find((t=>t.id===e));return(0,wS.jsx)("span",{className:"text-xs bg-white bg-opacity-10 px-2 py-1 rounded",children:null===t||void 0===t?void 0:t.name},e)}))})]})]})]}),(0,wS.jsxs)("div",{className:"mt-auto",children:[(0,wS.jsx)("p",{className:"text-xs opacity-75 mb-2",children:"Last Updated"}),(0,wS.jsx)("p",{className:"text-sm font-medium",children:(new Date).toLocaleDateString()})]})]}),(0,wS.jsxs)("div",{className:"w-2/3 p-8 overflow-y-auto",children:[(0,wS.jsx)("div",{className:"space-y-8",children:(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,wS.jsx)(tM,{className:"w-6 h-6 mr-3 text-green-600"}),"Weekly Schedule"]}),(0,wS.jsxs)("div",{className:"space-y-4",children:[R(),(0,wS.jsx)("div",{className:"flex justify-center",children:(0,wS.jsxs)("button",{onClick:M,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2",children:[(0,wS.jsx)(fne,{className:"w-5 h-5"}),(0,wS.jsx)("span",{children:"Add New Schedule"})]})})]})]})}),(0,wS.jsxs)("div",{className:"mt-8 flex justify-end space-x-4 border-t pt-6",children:[(0,wS.jsx)(dA.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T(!1),className:"px-6 py-2 text-gray-600 hover:text-gray-800 rounded-lg border",children:"Cancel"}),(0,wS.jsxs)(dA.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:D,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center",children:[(0,wS.jsx)(wA,{className:"w-5 h-5 mr-2"}),"Save Assignments"]})]})]})]})}):null})()]})};function mne(e){let{isOpen:t,onClose:n,title:r,children:i}=e;return t?(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:n,children:(0,wS.jsxs)(dA.div,{initial:{y:20},animate:{y:0},className:"bg-white rounded-lg p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wS.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:r}),(0,wS.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\u2715"})]}),i]})}):null}let gne={data:""},yne=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||gne,vne=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bne=/\/\*[^]*?\*\/|  +/g,xne=/\n+/g,wne=(e,t)=>{let n="",r="",i="";for(let s in e){let o=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+o+";":r+="f"==s[1]?wne(o,s):s+"{"+wne(o,"k"==s[1]?"":t)+"}":"object"==typeof o?r+=wne(o,t?t.replace(/([^,])+/g,(e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):s):null!=o&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=wne.p?wne.p(s,o):s+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+r},_ne={},Sne=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Sne(e[n]);return t}return e};function Ene(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,r,i)=>{let s=Sne(e),o=_ne[s]||(_ne[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!_ne[o]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=vne.exec(e.replace(bne,""));)t[4]?r.shift():t[3]?(n=t[3].replace(xne," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(xne," ").trim();return r[0]})(e);_ne[o]=wne(i?{["@keyframes "+o]:t}:t,n?"":"."+o)}let a=n&&_ne.g?_ne.g:null;return n&&(_ne.g=_ne[o]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(_ne[o],t,r,a),o})(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,i)=>{let s=t[i];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":wne(e,""):!1===e?"":e}return e+r+(null==s?"":s)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,yne(t.target),t.g,t.o,t.k)}Ene.bind({g:1});let jne,kne,Cne,Tne=Ene.bind({k:1});function Nne(e,t){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:kne&&kne()},a),n.o=/ *go\d+/.test(l),a.className=Ene.apply(n,r)+(l?" "+l:""),t&&(a.ref=o);let c=e;return e[0]&&(c=a.as||e,delete a.as),Cne&&c[0]&&Cne(a),jne(c,a)}return t?t(i):i}}var Ine=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Ane=(()=>{let e=0;return()=>(++e).toString()})(),One=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Pne=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:n}=t;return Pne(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},Mne=[],Dne={toasts:[],pausedAt:void 0},Rne=e=>{Dne=Pne(Dne,e),Mne.forEach((e=>{e(Dne)}))},Lne=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||Ane()}}(t,e,n);return Rne({type:2,toast:r}),r.id},Fne=(e,t)=>Lne("blank")(e,t);Fne.error=Lne("error"),Fne.success=Lne("success"),Fne.loading=Lne("loading"),Fne.custom=Lne("custom"),Fne.dismiss=e=>{Rne({type:3,toastId:e})},Fne.remove=e=>Rne({type:4,toastId:e}),Fne.promise=(e,t,n)=>{let r=Fne.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?Ine(t.success,e):void 0;return i?Fne.success(i,{id:r,...n,...null==n?void 0:n.success}):Fne.dismiss(r),e})).catch((e=>{let i=t.error?Ine(t.error,e):void 0;i?Fne.error(i,{id:r,...n,...null==n?void 0:n.error}):Fne.dismiss(r)})),e};new Map;var Bne=Tne`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Une=Tne`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Vne=Tne`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zne=Nne("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Bne} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Une} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Vne} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$ne=Tne`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Hne=Nne("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${$ne} 1s linear infinite;
`,Wne=Tne`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qne=Tne`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Kne=Nne("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wne} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qne} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Yne=Nne("div")`
  position: absolute;
`,Gne=Nne("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Xne=Tne`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qne=Nne("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Xne} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Zne=e=>{let{toast:t}=e,{icon:n,type:i,iconTheme:s}=t;return void 0!==n?"string"==typeof n?r.createElement(Qne,null,n):n:"blank"===i?null:r.createElement(Gne,null,r.createElement(Hne,{...s}),"loading"!==i&&r.createElement(Yne,null,"error"===i?r.createElement(zne,{...s}):r.createElement(Kne,{...s})))},Jne=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,ere=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,tre=Nne("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,nre=Nne("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`;r.memo((e=>{let{toast:t,position:n,style:i,children:s}=e,o=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=One()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Jne(n),ere(n)];return{animation:t?`${Tne(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Tne(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||n||"top-center",t.visible):{opacity:0},a=r.createElement(Zne,{toast:t}),l=r.createElement(nre,{...t.ariaProps},Ine(t.message,t));return r.createElement(tre,{className:t.className,style:{...o,...i,...t.style}},"function"==typeof s?s({icon:a,message:l}):r.createElement(r.Fragment,null,a,l))}));!function(e,t,n,r){wne.p=t,jne=e,kne=n,Cne=r}(r.createElement);Ene`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const rre=()=>{const{currentUser:e}=SS(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)("all"),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"subjects"),t=(await vg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=hm(bS,"teachers"),i=(await vg(r)).docs.map((e=>({id:e.id,...e.data()}))),s=Array.from(new Set(i.map((e=>e.department)))).filter(Boolean);a(t),n(i),c(s),m(!1)}catch(dv){console.error("Error fetching data:",dv),Fne.error("Failed to load teachers"),m(!1)}})()}),[]),(0,r.useEffect)((()=>{v()}),[u,t,g]);const v=()=>{let e=[...t];if("all"!==u&&(e=e.filter((e=>e.department===u))),g){const t=g.toLowerCase();e=e.filter((e=>e.fullName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.department.toLowerCase().includes(t)))}s(e)};return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:"flex-1 transition-all duration-300 ml-[80px] lg:ml-64 p-8 overflow-y-auto",children:(0,wS.jsxs)("div",{className:"container mx-auto",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("h1",{className:"text-3xl font-bold text-blue-800 flex items-center",children:[(0,wS.jsx)(kO,{className:"h-10 w-10 mr-3 text-blue-600"}),"Teachers Management"]}),(0,wS.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage and view all registered instructors"})]}),(0,wS.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[(0,wS.jsx)(fne,{className:"h-5 w-5 mr-2"}),"Add Teacher"]})]}),(0,wS.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Teachers"}),(0,wS.jsx)("input",{type:"text",placeholder:"Search by name, email, or department...",value:g,onChange:e=>y(e.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Department"}),(0,wS.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,wS.jsx)("option",{value:"all",children:"All Departments"}),l.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]})]}),(0,wS.jsx)("div",{className:"flex items-end",children:(0,wS.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[(0,wS.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Total Teachers"}),(0,wS.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:i.length})]})})]})}),(0,wS.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:p?(0,wS.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,wS.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,wS.jsxs)("div",{className:"overflow-x-auto",children:[(0,wS.jsxs)("table",{className:"w-full text-left",children:[(0,wS.jsx)("thead",{children:(0,wS.jsxs)("tr",{className:"border-b",children:[(0,wS.jsx)("th",{className:"py-3 px-4",children:"Name"}),(0,wS.jsx)("th",{className:"py-3 px-4",children:"Department"}),(0,wS.jsx)("th",{className:"py-3 px-4",children:"Email"}),(0,wS.jsx)("th",{className:"py-3 px-4",children:"Status"}),(0,wS.jsx)("th",{className:"py-3 px-4",children:"Subjects"})]})}),(0,wS.jsx)("tbody",{children:i.map((e=>{return(0,wS.jsxs)("tr",{className:"border-b hover:bg-blue-50 transition",children:[(0,wS.jsx)("td",{className:"py-3 px-4",children:(0,wS.jsxs)("div",{className:"flex items-center",children:[e.photoURL?(0,wS.jsx)("img",{src:e.photoURL,alt:e.fullName,className:"h-8 w-8 rounded-full mr-3"}):(0,wS.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:(0,wS.jsx)(kO,{className:"h-4 w-4 text-blue-600"})}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("div",{className:"font-medium",children:e.fullName}),(0,wS.jsxs)("div",{className:"text-sm text-gray-500",children:["Joined ",new Date(e.dateJoined).toLocaleDateString()]})]})]})}),(0,wS.jsx)("td",{className:"py-3 px-4",children:(0,wS.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[(0,wS.jsx)(EO,{className:"h-4 w-4 mr-1"}),e.department]})}),(0,wS.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,wS.jsx)("td",{className:"py-3 px-4",children:(0,wS.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,wS.jsx)("td",{className:"py-3 px-4",children:(0,wS.jsx)("div",{className:"flex flex-wrap gap-1",children:(t=e.subjects,t.map((e=>{const t=o.find((t=>t.id===e));return t?t.name:e}))).map(((e,t)=>(0,wS.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:e},t)))})}),(0,wS.jsx)("td",{className:"py-3 px-4",children:(0,wS.jsx)("div",{className:"flex space-x-2"})})]},e.id);var t}))})]}),0===i.length&&(0,wS.jsx)("div",{className:"text-center py-8",children:(0,wS.jsx)("div",{className:"text-gray-500",children:"No teachers found"})})]})})]})}),(0,wS.jsx)(mne,{isOpen:h,onClose:()=>f(!1),title:"Add New Teacher",children:(0,wS.jsx)("div",{className:"p-6",children:(0,wS.jsx)("p",{children:"Teacher form coming soon..."})})})]})};function ire(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const sre=r.forwardRef(ire);function ore(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const are=r.forwardRef(ore);function lre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const cre=r.forwardRef(lre);function ure(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const dre=r.forwardRef(ure);function hre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const fre=r.forwardRef(hre),pre={button:{primary:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",secondary:"flex items-center px-4 py-2 border border-purple-200 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors",danger:"flex items-center px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition-colors"},card:"bg-white rounded-xl shadow-sm border border-blue-100/50 p-6",input:"w-full p-2 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",badge:{success:"bg-green-100 text-green-800",error:"bg-rose-100 text-rose-800",warning:"bg-amber-100 text-amber-800",info:"bg-blue-100 text-blue-800"}},mre={h1:"text-4xl font-bold",h2:"text-3xl font-bold",h3:"text-2xl font-bold",h4:"text-xl font-bold",body:"text-base",small:"text-sm"},gre=e=>{var t,n,i;let{isOpen:s,onClose:o,userId:a,userType:l}=e;const[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{s&&a&&b()}),[s,a]);const b=async()=>{try{g(!0);const e=fm(bS,"student"===l?"students":"teachers",a),t=await gg(e);let n=null;if(!t.exists())return console.error("User document does not exist"),void g(!1);{const e=t.data();n={...e,id:a},u(n),p(e.roomAssigned||"")}const r=hm(bS,"rooms"),i=(await vg(r)).docs.map((e=>({id:e.id,...e.data()}))).filter((e=>{var t;return"available"===e.status||e.id===(null===(t=n)||void 0===t?void 0:t.roomAssigned)}));h(i),g(!1)}catch(dv){console.error("Error fetching data:",dv),g(!1),SA().fire("Error","Failed to load user or room data","error")}};return s?(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,wS.jsxs)(dA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,wS.jsxs)("h2",{className:mre.h3,children:[null===c||void 0===c?void 0:c.fullName," - ","student"===l?"Student":"Teacher"," Details"]}),(0,wS.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-700",children:(0,wS.jsx)(fre,{className:"w-6 h-6"})})]}),m?(0,wS.jsx)("div",{className:"p-6 text-center",children:(0,wS.jsx)("p",{className:"text-gray-500",children:"Loading..."})}):(0,wS.jsxs)(wS.Fragment,{children:[(0,wS.jsxs)("div",{className:"p-6 space-y-4",children:[(0,wS.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:"ID Number"}),(0,wS.jsx)("p",{className:"font-medium",children:null===c||void 0===c?void 0:c.idNumber})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,wS.jsx)("p",{className:"font-medium",children:null===c||void 0===c?void 0:c.email})]}),(null===c||void 0===c?void 0:c.department)&&(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:"Department"}),(0,wS.jsx)("p",{className:"font-medium",children:c.department})]}),(null===c||void 0===c?void 0:c.major)&&(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:"Major"}),(0,wS.jsx)("p",{className:"font-medium",children:c.major})]})]})}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Room"}),(0,wS.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:pre.input,children:[(0,wS.jsx)("option",{value:"",children:"No Room Assigned"}),d.map((e=>(0,wS.jsxs)("option",{value:e.id,children:[e.name," - ",e.building,", Floor ",e.floor]},e.id)))]}),f&&(0,wS.jsxs)("div",{className:`mt-4 ${y?"bg-green-50":"bg-blue-50"} p-3 rounded-lg flex items-start transition-colors duration-300`,children:[(0,wS.jsx)(FP,{className:`w-5 h-5 ${y?"text-green-500":"text-blue-500"} mt-0.5 mr-2`}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm font-medium "+(y?"text-green-700":"text-blue-700"),children:y?"Room Assignment Updated!":"Current Room Assignment"}),(0,wS.jsxs)("p",{className:"text-sm "+(y?"text-green-600":"text-blue-600"),children:[null===(t=d.find((e=>e.id===f)))||void 0===t?void 0:t.name," -",null===(n=d.find((e=>e.id===f)))||void 0===n?void 0:n.building,", Floor ",null===(i=d.find((e=>e.id===f)))||void 0===i?void 0:i.floor]})]})]})]})]}),(0,wS.jsxs)("div",{className:"flex justify-end space-x-4 p-6 border-t",children:[(0,wS.jsx)("button",{type:"button",onClick:o,className:pre.button.secondary,children:"Cancel"}),(0,wS.jsx)("button",{onClick:async()=>{try{if(!c||!c.id)return console.error("User data is missing or incomplete"),void SA().fire({icon:"error",title:"Error",text:"User data is missing or incomplete"});console.log("Updating user:",c.id,"with room:",f);const e=fm(bS,"student"===l?"students":"teachers",c.id);if(await xg(e,{roomAssigned:f}),f){const e=fm(bS,"rooms",f);await xg(e,{status:"occupied"})}if(c.roomAssigned&&c.roomAssigned!==f){const e=fm(bS,"rooms",c.roomAssigned);await xg(e,{status:"available"})}SA().fire({icon:"success",title:"Room Assigned Successfully",showConfirmButton:!1,timer:1500,position:"top-end",toast:!0}),u((e=>e?{...e,roomAssigned:f}:null)),b(),v(!0),setTimeout((()=>{v(!1)}),3e3)}catch(dv){console.error("Error assigning room:",dv),SA().fire({icon:"error",title:"Error",text:`Failed to assign room: ${dv instanceof Error?dv.message:"Unknown error"}`}),v(!1)}},className:pre.button.primary,children:f?"Assign Selected Room":"Clear Room Assignment"})]})]})]})}):null},yre=()=>{const{currentUser:e}=SS(),[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)({department:"all",yearLevel:"all",status:"all"}),[v,b]=(0,r.useState)({key:"name",direction:"asc"}),[x,w]=(0,r.useState)(!1),[_,S]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=Sg(Zm(hm(bS,"students"),rg("createdAt","desc")),(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,...e.data()})})),s(t),a(!1)}),(e=>{console.error("Error fetching students:",e),SA().fire("Error","Failed to fetch students data","error"),a(!1)}));return()=>e()}),[]);const E=(0,r.useMemo)((()=>Array.from(new Set(i.map((e=>e.department))))),[i]),j=(0,r.useMemo)((()=>Array.from(new Set(i.map((e=>e.yearLevel)))).sort()),[i]),k=(0,r.useMemo)((()=>i.filter((e=>("all"===g.department||e.department===g.department)&&("all"===g.yearLevel||e.yearLevel.toString()===g.yearLevel)&&("all"===g.status||e.status===g.status)&&(""===p||e.name.toLowerCase().includes(p.toLowerCase())||e.email.toLowerCase().includes(p.toLowerCase())||e.studentId.toLowerCase().includes(p.toLowerCase())))).sort(((e,t)=>{const n=e[v.key],r=t[v.key];return"string"===typeof n&&"string"===typeof r?"asc"===v.direction?n.localeCompare(r):r.localeCompare(n):"asc"===v.direction?n-r:r-n}))),[i,g,p,v]),C=(0,r.useMemo)((()=>(e=>{const t={total:e.length,active:e.filter((e=>"active"===e.status)).length,inactive:e.filter((e=>"inactive"===e.status)).length,byDepartment:{},byYearLevel:{},byStatus:{active:0,inactive:0}};return e.forEach((e=>{t.byDepartment[e.department]||(t.byDepartment[e.department]=0),t.byDepartment[e.department]++;const n=e.yearLevel.toString();t.byYearLevel[n]||(t.byYearLevel[n]=0),t.byYearLevel[n]++,t.byStatus[e.status]++})),t})(k)),[k]),T=e=>1===e?"st":2===e?"nd":3===e?"rd":"th";return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("main",{className:`flex-1 transition-all duration-300 ${t?"ml-20":"ml-64"} p-8 overflow-y-auto`,children:(0,wS.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,wS.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,wS.jsxs)("div",{className:"flex items-center",children:[(0,wS.jsx)(EO,{className:"h-10 w-10 text-indigo-600 mr-3"}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Students"}),(0,wS.jsx)("p",{className:"text-gray-600",children:"Manage and monitor student records"})]})]}),(0,wS.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)(sre,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,wS.jsx)("input",{type:"text",placeholder:"Search students...",value:p,onChange:e=>m(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,wS.jsxs)("select",{value:g.department,onChange:e=>y((t=>({...t,department:e.target.value}))),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,wS.jsx)("option",{value:"all",children:"All Departments"}),E.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]}),(0,wS.jsxs)("select",{value:g.yearLevel,onChange:e=>y((t=>({...t,yearLevel:e.target.value}))),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,wS.jsx)("option",{value:"all",children:"All Year Levels"}),j.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]}),(0,wS.jsx)("button",{onClick:()=>d(!0),className:"p-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600",children:(0,wS.jsx)(uP,{className:"h-5 w-5"})}),(0,wS.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,wS.jsx)(fne,{className:"h-5 w-5"}),"Add Student"]})]})]}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:"Total Students"}),(0,wS.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:C.total})]}),(0,wS.jsx)(EO,{className:"h-8 w-8 text-indigo-600"})]})}),(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:"Active Students"}),(0,wS.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:C.active})]}),(0,wS.jsx)(eP,{className:"h-8 w-8 text-green-600"})]})}),(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:"Inactive Students"}),(0,wS.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:C.inactive})]}),(0,wS.jsx)(nP,{className:"h-8 w-8 text-red-600"})]})})]}),(0,wS.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:(0,wS.jsx)("div",{className:"overflow-x-auto",children:(0,wS.jsxs)("table",{className:"w-full",children:[(0,wS.jsx)("thead",{className:"bg-gray-50",children:(0,wS.jsxs)("tr",{children:[(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{return e="name",void b((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"})));var e},children:(0,wS.jsxs)("div",{className:"flex items-center gap-2",children:["Name","name"===v.key&&("asc"===v.direction?(0,wS.jsx)(are,{className:"h-4 w-4"}):(0,wS.jsx)(cre,{className:"h-4 w-4"}))]})}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student ID"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year Level"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,wS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,wS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,wS.jsx)(OP,{children:k.map((e=>(0,wS.jsxs)(dA.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition",children:[(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("div",{className:"flex items-center",children:(0,wS.jsxs)("div",{className:"ml-4",children:[(0,wS.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,wS.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("div",{className:"text-sm text-gray-900",children:e.studentId})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("div",{className:"text-sm text-gray-900",children:e.department})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("div",{className:"text-sm text-gray-900",children:e.yearLevel})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,wS.jsxs)("div",{className:"flex items-center gap-3",children:[(0,wS.jsx)("button",{onClick:()=>f(e),className:"text-indigo-600 hover:text-indigo-900",children:(0,wS.jsx)(dre,{className:"h-5 w-5"})}),(0,wS.jsx)("button",{onClick:()=>(async e=>{try{await SA().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{t.isConfirmed&&(await wg(fm(bS,"students",e)),SA().fire("Deleted!","Student has been deleted.","success"))}))}catch(dv){console.error("Error deleting student:",dv),SA().fire("Error","Failed to delete student","error")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,wS.jsx)(dne,{className:"h-5 w-5"})}),(0,wS.jsx)("button",{onClick:()=>{return t=e.id,S(t),void w(!0);var t},className:pre.button.secondary,children:"View/Edit Details"})]})})]},e.id)))})})]})})})]})}),(0,wS.jsx)(OP,{children:u&&(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wS.jsxs)(dA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 max-w-lg w-full",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Student Statistics"}),(0,wS.jsx)("button",{onClick:()=>d(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,wS.jsx)(gP,{className:"h-6 w-6 text-gray-500"})})]}),(0,wS.jsxs)("div",{className:"space-y-6",children:[(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,wS.jsx)("p",{className:"text-sm text-indigo-600 mb-1",children:"Total Students"}),(0,wS.jsx)("p",{className:"text-2xl font-bold text-indigo-900",children:C.total})]}),(0,wS.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,wS.jsx)("p",{className:"text-sm text-green-600 mb-1",children:"Active Students"}),(0,wS.jsx)("p",{className:"text-2xl font-bold text-green-900",children:C.active})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Students by Department"}),(0,wS.jsx)("div",{className:"space-y-2",children:Object.entries(C.byDepartment).map((e=>{let[t,n]=e;return(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-gray-600",children:t}),(0,wS.jsx)("span",{className:"font-semibold text-gray-800",children:n})]},t)}))})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Students by Year Level"}),(0,wS.jsx)("div",{className:"space-y-2",children:Object.entries(C.byYearLevel).map((e=>{let[t,n]=e;return(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-gray-600",children:`${t}${T(parseInt(t))} Year`}),(0,wS.jsx)("span",{className:"font-semibold text-gray-800",children:n})]},t)}))})]})]})]})},"stats-modal")}),(0,wS.jsx)(OP,{children:(l||h)&&(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,wS.jsxs)(dA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 max-w-2xl w-full",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:h?"Edit Student":"Add New Student"}),(0,wS.jsx)("button",{onClick:()=>{c(!1),f(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,wS.jsx)(gP,{className:"h-6 w-6 text-gray-500"})})]}),(0,wS.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const t=e.target,n=new FormData(t),r={name:n.get("name"),email:n.get("email"),department:n.get("department"),yearLevel:parseInt(n.get("yearLevel")),section:n.get("section"),studentId:n.get("studentId"),status:n.get("status"),attendance:(null===h||void 0===h?void 0:h.attendance)||{present:0,absent:0,late:0},createdAt:(null===h||void 0===h?void 0:h.createdAt)||new Date};h?(await xg(fm(bS,"students",h.id),r),SA().fire("Success","Student updated successfully","success")):(await _g(hm(bS,"students"),r),SA().fire("Success","Student added successfully","success")),t.reset(),c(!1),f(null)}catch(dv){console.error("Error saving student:",dv),SA().fire("Error","Failed to save student data","error")}},className:"space-y-6",children:[(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,wS.jsx)("input",{type:"text",name:"name",defaultValue:null===h||void 0===h?void 0:h.name,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter full name"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student ID"}),(0,wS.jsx)("input",{type:"text",name:"studentId",defaultValue:null===h||void 0===h?void 0:h.studentId,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter student ID"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,wS.jsx)("input",{type:"email",name:"email",defaultValue:null===h||void 0===h?void 0:h.email,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter email address"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),(0,wS.jsxs)("select",{name:"department",defaultValue:null===h||void 0===h?void 0:h.department,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,wS.jsx)("option",{value:"",children:"Select Department"}),E.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year Level"}),(0,wS.jsxs)("select",{name:"yearLevel",defaultValue:null===h||void 0===h?void 0:h.yearLevel,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,wS.jsx)("option",{value:"",children:"Select Year Level"}),[1,2,3,4,5].map((e=>(0,wS.jsxs)("option",{value:e,children:[e,"st Year"]},e)))]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),(0,wS.jsx)("input",{type:"text",name:"section",defaultValue:null===h||void 0===h?void 0:h.section,required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter section"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,wS.jsxs)("select",{name:"status",defaultValue:(null===h||void 0===h?void 0:h.status)||"active",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,wS.jsx)("option",{value:"active",children:"Active"}),(0,wS.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,wS.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,wS.jsx)("button",{type:"button",onClick:()=>{c(!1),f(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,wS.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:h?"Update Student":"Add Student"})]})]})]})},"add-edit-modal")}),(0,wS.jsx)(gre,{isOpen:x,onClose:()=>w(!1),userId:_,userType:"student"})]})};function vre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))}const bre=r.forwardRef(vre);function xre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M17.004 10.407c.138.435-.216.842-.672.842h-3.465a.75.75 0 0 1-.65-.375l-1.732-3c-.229-.396-.053-.907.393-1.004a5.252 5.252 0 0 1 6.126 3.537ZM8.12 8.464c.307-.338.838-.235 1.066.16l1.732 3a.75.75 0 0 1 0 .75l-1.732 3c-.229.397-.76.5-1.067.161A5.23 5.23 0 0 1 6.75 12a5.23 5.23 0 0 1 1.37-3.536ZM10.878 17.13c-.447-.098-.623-.608-.394-1.004l1.733-3.002a.75.75 0 0 1 .65-.375h3.465c.457 0 .81.407.672.842a5.252 5.252 0 0 1-6.126 3.539Z"}),r.createElement("path",{fillRule:"evenodd",d:"M21 12.75a.75.75 0 1 0 0-1.5h-.783a8.22 8.22 0 0 0-.237-1.357l.734-.267a.75.75 0 1 0-.513-1.41l-.735.268a8.24 8.24 0 0 0-.689-1.192l.6-.503a.75.75 0 1 0-.964-1.149l-.6.504a8.3 8.3 0 0 0-1.054-.885l.391-.678a.75.75 0 1 0-1.299-.75l-.39.676a8.188 8.188 0 0 0-1.295-.47l.136-.77a.75.75 0 0 0-1.477-.26l-.136.77a8.36 8.36 0 0 0-1.377 0l-.136-.77a.75.75 0 1 0-1.477.26l.136.77c-.448.121-.88.28-1.294.47l-.39-.676a.75.75 0 0 0-1.3.75l.392.678a8.29 8.29 0 0 0-1.054.885l-.6-.504a.75.75 0 1 0-.965 1.149l.6.503a8.243 8.243 0 0 0-.689 1.192L3.8 8.216a.75.75 0 1 0-.513 1.41l.735.267a8.222 8.222 0 0 0-.238 1.356h-.783a.75.75 0 0 0 0 1.5h.783c.042.464.122.917.238 1.356l-.735.268a.75.75 0 0 0 .513 1.41l.735-.268c.197.417.428.816.69 1.191l-.6.504a.75.75 0 0 0 .963 1.15l.601-.505c.326.323.679.62 1.054.885l-.392.68a.75.75 0 0 0 1.3.75l.39-.679c.414.192.847.35 1.294.471l-.136.77a.75.75 0 0 0 1.477.261l.137-.772a8.332 8.332 0 0 0 1.376 0l.136.772a.75.75 0 1 0 1.477-.26l-.136-.771a8.19 8.19 0 0 0 1.294-.47l.391.677a.75.75 0 0 0 1.3-.75l-.393-.679a8.29 8.29 0 0 0 1.054-.885l.601.504a.75.75 0 0 0 .964-1.15l-.6-.503c.261-.375.492-.774.69-1.191l.735.267a.75.75 0 1 0 .512-1.41l-.734-.267c.115-.439.195-.892.237-1.356h.784Zm-2.657-3.06a6.744 6.744 0 0 0-1.19-2.053 6.784 6.784 0 0 0-1.82-1.51A6.705 6.705 0 0 0 12 5.25a6.8 6.8 0 0 0-1.225.11 6.7 6.7 0 0 0-2.15.793 6.784 6.784 0 0 0-2.952 3.489.76.76 0 0 1-.036.098A6.74 6.74 0 0 0 5.251 12a6.74 6.74 0 0 0 3.366 5.842l.009.005a6.704 6.704 0 0 0 2.18.798l.022.003a6.792 6.792 0 0 0 2.368-.004 6.704 6.704 0 0 0 2.205-.811 6.785 6.785 0 0 0 1.762-1.484l.009-.01.009-.01a6.743 6.743 0 0 0 1.18-2.066c.253-.707.39-1.469.39-2.263a6.74 6.74 0 0 0-.408-2.309Z",clipRule:"evenodd"}))}const wre=r.forwardRef(xre),_re=()=>{var e,t;const{currentUser:n}=SS(),[i,s]=(0,r.useState)(!1),o={profile:{icon:GM,title:"Profile Settings",description:"Manage your personal information",content:(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Full Name"}),(0,wS.jsx)("input",{type:"text",defaultValue:null!==(e=null===n||void 0===n?void 0:n.fullName)&&void 0!==e?e:void 0,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Email"}),(0,wS.jsx)("input",{type:"email",defaultValue:null!==(t=null===n||void 0===n?void 0:n.email)&&void 0!==t?t:void 0,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})},security:{icon:fA,title:"Security Settings",description:"Update your password and security preferences",content:(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Current Password"}),(0,wS.jsx)("input",{type:"password",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"New Password"}),(0,wS.jsx)("input",{type:"password",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Confirm New Password"}),(0,wS.jsx)("input",{type:"password",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})},notifications:{icon:bre,title:"Notification Settings",description:"Manage your notification preferences",content:(0,wS.jsx)("div",{})},general:{icon:wre,title:"General Settings",description:"Configure general application settings",content:(0,wS.jsx)("div",{})}},[a,l]=(0,r.useState)(0);return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:`flex-1 transition-all duration-300 ${i?"ml-20":"ml-64"} p-8 overflow-y-auto`,children:(0,wS.jsxs)("div",{className:"container mx-auto",children:[(0,wS.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,wS.jsxs)("h1",{className:"text-3xl font-bold text-blue-800 flex items-center",children:[(0,wS.jsx)(wre,{className:"h-10 w-10 mr-3 text-blue-600"}),"Settings"]})}),(0,wS.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,wS.jsx)("div",{className:"col-span-3 bg-white rounded-xl shadow-md p-4",children:Object.keys(o).map(((e,t)=>(0,wS.jsx)("button",{onClick:()=>l(t),className:"w-full text-left px-4 py-3 rounded-lg mb-2 transition "+(a===t?"bg-blue-100 text-blue-800":"hover:bg-blue-50 text-blue-600"),children:(0,wS.jsx)("div",{className:"flex items-center",children:(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"font-semibold",children:o[e].title}),(0,wS.jsx)("p",{className:"text-xs text-blue-400",children:o[e].description})]})})},t)))}),(0,wS.jsxs)("div",{className:"col-span-9 bg-white rounded-xl shadow-md p-6",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-blue-800 mb-6 flex items-center",children:"profile"===Object.keys(o)[a]?"Profile Settings":"security"===Object.keys(o)[a]?"Security Settings":"notifications"===Object.keys(o)[a]?"Notification Settings":"General Settings"}),"profile"===Object.keys(o)[a]?o.profile.content:"security"===Object.keys(o)[a]?o.security.content:"notifications"===Object.keys(o)[a]?o.notifications.content:o.general.content,(0,wS.jsx)("div",{className:"mt-6 flex justify-end",children:(0,wS.jsxs)("button",{className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[(0,wS.jsx)(bre,{className:"h-5 w-5 mr-2"}),"Save Changes"]})})]})]})]})})]})},Sre=()=>{const{currentUser:e}=SS(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(!0),[o,a]=(0,r.useState)(new Date),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const i=Zm(hm(bS,"classes"),eg("instructorId","==",e.uid)),o=await vg(i),a=[],l=new Set;for(const e of o.docs){var t,r;const n=e.data(),i=await vg(Zm(hm(bS,"subjects"),eg("code","==",n.subjectCode))),s=Zm(hm(bS,"enrollments"),eg("classId","==",e.id)),o=await vg(s);l.add(n.department),a.push({...n,id:e.id,subjectName:(null===(t=i.docs[0])||void 0===t||null===(r=t.data())||void 0===r?void 0:r.name)||"Unknown Subject",studentCount:o.size})}n(a),c(Array.from(l)),s(!1)}catch(dv){console.error("Error fetching classes:",dv),s(!1)}})()}),[e]);const h=()=>{const e=Gte(o,"EEEE").toLowerCase();return t.filter((t=>t.days.includes(e)))};return i?(0,wS.jsxs)("div",{className:"flex h-screen",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:"flex-1 p-8",children:(0,wS.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,wS.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})})]}):(0,wS.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:`flex-1 transition-all duration-300 ease-in-out ${u?"ml-20":"ml-64"} overflow-y-auto`,children:(0,wS.jsxs)("div",{className:"p-8",children:[(0,wS.jsxs)("div",{className:"mb-6",children:[(0,wS.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"My Classes"}),(0,wS.jsx)("input",{type:"date",value:Gte(o,"yyyy-MM-dd"),onChange:e=>a(new Date(e.target.value)),className:"px-4 py-2 border rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),l.map((e=>{const t=(e=>h().filter((t=>t.department===e)))(e);return 0===t.length?null:(0,wS.jsxs)("div",{className:"mb-8",children:[(0,wS.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:e}),(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((e=>(0,wS.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.subjectName}),(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:e.subjectCode})]}),(0,wS.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800",children:["Room ",e.roomNumber]})]}),(0,wS.jsxs)("div",{className:"space-y-2",children:[(0,wS.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,wS.jsx)("span",{className:"text-gray-600",children:"Time:"}),(0,wS.jsxs)("span",{className:"text-gray-800",children:[e.startTime," - ",e.endTime]})]}),(0,wS.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,wS.jsx)("span",{className:"text-gray-600",children:"Students:"}),(0,wS.jsx)("span",{className:"text-gray-800",children:e.studentCount||0})]}),(0,wS.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,wS.jsx)("span",{className:"text-gray-600",children:"Days:"}),(0,wS.jsx)("span",{className:"text-gray-800",children:e.days.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(", ")})]})]})]},e.id)))})]},e)})),0===h().length&&(0,wS.jsx)("div",{className:"text-center py-12",children:(0,wS.jsxs)("p",{className:"text-gray-600 text-lg",children:["No classes scheduled for ",Gte(o,"EEEE, MMMM do, yyyy")]})})]})})]})},Ere=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)({department:"all",day:"all",semester:"all"}),{currentUser:f}=SS(),p="admin"===(null===f||void 0===f?void 0:f.role),m=(null===f||void 0===f||f.role,async()=>{try{o(!0);const e=hm(bS,"subjects"),n=await vg(e),r=new Map(n.docs.map((e=>{const t=e.data();return[e.id,{id:e.id,code:t.code||"",name:t.name||""}]}))),i=hm(bS,"teachers"),s=await vg(i),a=[];s.docs.forEach((e=>{const t=e.data(),n=(t.schedules||[]).map(((n,i)=>{const s=n.subject?r.get(n.subject):null;return{...n,id:`${e.id}-${n.section}`,subject:s?s.name:n.subject,subjectCode:s?s.code:n.subjectCode,instructor:t.fullName,department:t.department,semester:t.currentSemester||"Current Semester"}}));a.push(...n)})),a.sort(((e,t)=>{const n=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n};return n(e.startTime)-n(t.startTime)})),t(a),o(!1)}catch(dv){console.error("Error fetching schedules:",dv),SA().fire("Error","Failed to fetch schedules","error"),o(!1)}});(0,r.useEffect)((()=>{if(f&&"admin"===f.role)m();else{if(f){const e=Sg(Zm(hm(bS,"teachers"),eg("uid","==",f.uid)),(async e=>{if(!e.empty){const n=e.docs[0],r=n.data().schedules||[];t(r.map(((e,t)=>({...e,id:`${n.id}_${t}`}))))}o(!1)}),(e=>{console.error("Error fetching schedules:",e),SA().fire({icon:"error",title:"Fetch Error",text:e.message||"Failed to fetch schedules",confirmButtonColor:"#3b82f6"}),o(!1)}));return()=>e()}o(!1)}}),[f]);const g=(0,r.useMemo)((()=>e.filter((e=>{var t,n,r,i;const s=!c||(null===(t=e.subject)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.instructor)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.department)||void 0===r?void 0:r.toLowerCase().includes(c.toLowerCase()))||(null===(i=e.roomNumber)||void 0===i?void 0:i.toLowerCase().includes(c.toLowerCase())),o="all"===d.department||e.department===d.department,a="all"===d.day||e.days&&e.days.includes(d.day),l="all"===d.semester||e.semester===d.semester;return s&&o&&a&&l}))),[e,c,d]),{departments:y,days:v,semesters:b}=(()=>{const t=Array.from(new Set(e.map((e=>e.department||"Unassigned")))),n=Array.from(new Set(e.flatMap((e=>e.days||[])))),r=Array.from(new Set(e.map((e=>e.semester||"Current Semester"))));return{departments:t,days:n,semesters:r}})();return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsxs)("div",{className:`\n        flex-1 p-8 transition-all duration-300 \n        ${n?"ml-20":"ml-64"}\n        overflow-y-auto\n      `,children:[(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Course Schedules"}),(0,wS.jsx)("p",{className:"text-gray-600",children:"View and manage course schedules across departments"})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-8 flex flex-wrap gap-4 items-center justify-between",children:[(0,wS.jsx)("div",{className:"flex-grow max-w-md",children:(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"text",placeholder:"Search schedules...",value:c,onChange:e=>u(e.target.value),className:"\r w-full px-4 py-2 pl-10 \r border border-gray-300 rounded-lg \r focus:outline-none focus:ring-2 focus:ring-primary-500\r "}),(0,wS.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,wS.jsxs)("div",{className:"flex space-x-4",children:[(0,wS.jsxs)("select",{value:d.department,onChange:e=>h((t=>({...t,department:e.target.value}))),className:"\r px-4 py-2 border border-gray-300 rounded-lg \r focus:outline-none focus:ring-2 focus:ring-primary-500\r ",children:[(0,wS.jsx)("option",{value:"all",children:"All Departments"}),y.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]}),(0,wS.jsxs)("select",{value:d.day,onChange:e=>h((t=>({...t,day:e.target.value}))),className:"\r px-4 py-2 border border-gray-300 rounded-lg \r focus:outline-none focus:ring-2 focus:ring-primary-500\r ",children:[(0,wS.jsx)("option",{value:"all",children:"All Days"}),v.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]}),(0,wS.jsxs)("select",{value:d.semester,onChange:e=>h((t=>({...t,semester:e.target.value}))),className:"\r px-4 py-2 border border-gray-300 rounded-lg \r focus:outline-none focus:ring-2 focus:ring-primary-500\r ",children:[(0,wS.jsx)("option",{value:"all",children:"All Semesters"}),b.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]}),p&&(0,wS.jsxs)("button",{onClick:()=>l(!0),className:"\r px-4 py-2 bg-primary-500 text-white \r rounded-lg hover:bg-primary-600 \r transition-colors flex items-center\r ",children:[(0,wS.jsx)(fne,{className:"w-5 h-5 mr-2"}),"Add Schedule"]})]})]}),s?(0,wS.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,wS.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-primary-500"})}):0===g.length?(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16 bg-white rounded-2xl shadow-md",children:[(0,wS.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"No schedules found"}),(0,wS.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter options"})]}):(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((e=>(e=>{var t;const n={"Computer Science":"bg-blue-50 border-blue-200 text-blue-800",Mathematics:"bg-green-50 border-green-200 text-green-800",Physics:"bg-purple-50 border-purple-200 text-purple-800",Engineering:"bg-indigo-50 border-indigo-200 text-indigo-800",default:"bg-gray-50 border-gray-200 text-gray-800"}[e.department||"default"];return(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`\n          ${n}\n          rounded-2xl p-6 \n          border \n          shadow-md \n          hover:shadow-lg \n          transition-all \n          duration-300 \n          transform \n          hover:-translate-y-2\n          space-y-4\n        `,children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.subject||"Unassigned Subject"}),(0,wS.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,wS.jsxs)("span",{className:"flex items-center",children:[(0,wS.jsx)(tM,{className:"w-4 h-4 mr-1"}),e.startTime," - ",e.endTime]}),(0,wS.jsxs)("span",{className:"flex items-center",children:[(0,wS.jsx)(rM,{className:"w-4 h-4 mr-1"}),(null===(t=e.days)||void 0===t?void 0:t.join(", "))||"N/A"]})]})]}),(0,wS.jsxs)("div",{className:"text-right",children:[(0,wS.jsxs)("p",{className:"text-sm font-medium text-gray-500",children:["Room: ",e.roomNumber||"TBD"]}),(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:e.instructor||"Unassigned"})]})]}),(0,wS.jsxs)("div",{className:"border-t border-gray-200 pt-3 mt-3 flex justify-between items-center",children:[(0,wS.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full \r bg-gray-100 text-gray-600",children:e.department||"Unassigned Department"}),(0,wS.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full \r bg-gray-100 text-gray-600",children:e.semester||"Current Semester"})]})]},e.id)})(e)))})]})]})};function jre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const kre=r.forwardRef(jre),Cre={"Computer Science":"bg-blue-100 text-blue-800",Mathematics:"bg-green-100 text-green-800",Physics:"bg-purple-100 text-purple-800",Biology:"bg-teal-100 text-teal-800",Chemistry:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},Tre=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(null),[a,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)({key:"day",direction:"asc"}),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)({subject:"",room:"",day:"Monday",startTime:"08:00",endTime:"09:00",department:"",status:"active"}),[y,v]=(0,r.useState)([]),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)(!1),{currentUser:S}=SS();(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"teachers"),n=(await vg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=hm(bS,"teachers"),s=(await vg(r)).docs.map((e=>({id:e.id,...e.data()}))),o=Array.from(new Set(s.map((e=>e.department)))).filter(Boolean);v(n),t(s),i(o)}catch(dv){console.error("Error fetching data:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to fetch schedules and subjects"})}})()}),[]);(0,r.useEffect)((()=>{(async()=>{try{_(!0);const e=hm(bS,"teachers"),t=await vg(e),n=[],r=[];for(const a of t.docs){const e=a.data();e.subjects&&r.push(...e.subjects);const t=(e.schedules||[]).map((t=>({...t,id:`${a.id}_${t.subject}`,instructor:e.fullName,instructorEmail:e.email,instructorDepartment:e.department})));n.push(...t)}const i=Array.from(new Set(r)),s=new Map(i.map((e=>[e,{name:e,department:"Unassigned",id:e.toLowerCase().replace(/\s+/g,"-")}]))),o=n.map((e=>({...e,subjectDetails:s.get(e.subject)||null}))).sort(((e,t)=>e.startTime.localeCompare(t.startTime)));x(o),_(!1)}catch(dv){console.error("Error fetching schedules:",dv),SA().fire({icon:"error",title:"Fetch Error",text:dv instanceof Error?dv.message:"Failed to fetch schedules"}),_(!1)}})()}),[]);(0,r.useMemo)((()=>s&&s.schedules?[...s.schedules||[]].sort(((e,t)=>{var n,r;const i=e=>{var t;return(null===(t=e.subjectDetails)||void 0===t?void 0:t.name)||e.subject},s="subject"===c.key?i(e):null!==(n=e[c.key])&&void 0!==n?n:"",o="subject"===c.key?i(t):null!==(r=t[c.key])&&void 0!==r?r:"",a=String(s).localeCompare(String(o));return"asc"===c.direction?a:-a})):[]),[s,c]);const E=(0,r.useMemo)((()=>"all"===a?e:e.filter((e=>e.department===a))),[e,a]),j=e=>Cre[e]||Cre.default;return!S||"admin"!==S.role&&"instructor"!==S.role?(0,wS.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,wS.jsxs)("div",{className:"text-center",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,wS.jsx)("p",{className:"mt-2 text-gray-600",children:"You don't have permission to view this page."})]})}):(0,wS.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:"flex-1 transition-all duration-300 "+(f?"ml-20":"ml-64"),children:(0,wS.jsx)("div",{className:"p-8",children:(0,wS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,wS.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Schedule Management"}),(0,wS.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage schedules by teacher and department"})]})}),(0,wS.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white p-4 rounded-xl shadow",children:[(0,wS.jsxs)("div",{className:"flex items-center mb-4",children:[(0,wS.jsx)(KM,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,wS.jsx)("h3",{className:"text-lg font-semibold",children:"Filter by Department"})]}),(0,wS.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:a,onChange:e=>l(e.target.value),children:[(0,wS.jsx)("option",{value:"all",children:"All Departments"}),n.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]})]}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-white p-4 rounded-xl shadow",children:[(0,wS.jsxs)("div",{className:"flex items-center mb-4",children:[(0,wS.jsx)(kre,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,wS.jsx)("h3",{className:"text-lg font-semibold",children:"Select Teacher"})]}),(0,wS.jsxs)("select",{className:"w-full p-2 border rounded-lg",onChange:t=>{const n=e.find((e=>e.id===t.target.value));o(n||null)},children:[(0,wS.jsx)("option",{value:"",children:"Select a Teacher"}),E.map((e=>(0,wS.jsxs)("option",{value:e.id,children:[e.fullName," (",e.department,")"]},e.id)))]})]})]}),s&&(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-white rounded-xl shadow overflow-hidden",children:[(0,wS.jsx)("div",{className:"p-6 border-b flex justify-between items-center",children:(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("h2",{className:"text-2xl font-semibold",children:[s.fullName,"'s Schedules"]}),(0,wS.jsx)("div",{className:`inline-block px-2 py-1 rounded mt-2 text-sm ${j(s.department)}`,children:s.department})]})}),(0,wS.jsx)("div",{className:"overflow-x-auto",children:(0,wS.jsxs)("table",{className:"w-full",children:[(0,wS.jsx)("thead",{className:"bg-gray-50",children:(0,wS.jsx)("tr",{children:["subject","instructor","day","startTime","room"].map((e=>(0,wS.jsx)("th",{onClick:()=>(e=>{u((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"})))})(e),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:(0,wS.jsxs)("div",{className:"flex items-center",children:[e.charAt(0).toUpperCase()+e.slice(1),c.key===e&&(0,wS.jsx)("span",{className:"ml-2",children:"asc"===c.direction?"\u25b2":"\u25bc"})]})},e)))})}),(0,wS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e=>{var t,n;return(0,wS.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsxs)("div",{className:"flex flex-col",children:[(0,wS.jsx)("div",{className:`inline-block px-2 py-1 rounded text-sm ${j((null===(t=e.subjectDetails)||void 0===t?void 0:t.department)||"default")}`,children:(null===(n=e.subjectDetails)||void 0===n?void 0:n.name)||e.subject}),e.subjectDetails&&(0,wS.jsx)("span",{className:"text-xs text-gray-500",children:e.subjectDetails.department})]})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,wS.jsxs)("div",{className:"flex flex-col",children:[(0,wS.jsx)("span",{children:e.instructor}),(0,wS.jsx)("span",{className:"text-xs text-gray-500",children:e.instructorEmail}),(0,wS.jsx)("div",{className:`inline-block px-1 py-0.5 rounded text-xs mt-1 ${j(e.instructorDepartment)}`,children:e.instructorDepartment})]})}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.day}),(0,wS.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.startTime," - ",e.endTime]}),(0,wS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.room})]},e.id)}))})]})})]})]})})})]})};function Nre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),r.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const Ire=r.forwardRef(Nre);function Are(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const Ore=r.forwardRef(Are),Pre={"Computer Science":{bg:"bg-blue-50",border:"border-blue-400",text:"text-blue-800",icon:"text-blue-600",gradient:"from-blue-100 to-blue-200"},Mathematics:{bg:"bg-green-50",border:"border-green-400",text:"text-green-800",icon:"text-green-600",gradient:"from-green-100 to-green-200"},Physics:{bg:"bg-purple-50",border:"border-purple-400",text:"text-purple-800",icon:"text-purple-600",gradient:"from-purple-100 to-purple-200"},Engineering:{bg:"bg-red-50",border:"border-red-400",text:"text-red-800",icon:"text-red-600",gradient:"from-red-100 to-red-200"},Biology:{bg:"bg-teal-50",border:"border-teal-400",text:"text-teal-800",icon:"text-teal-600",gradient:"from-teal-100 to-teal-200"},Chemistry:{bg:"bg-yellow-50",border:"border-yellow-400",text:"text-yellow-800",icon:"text-yellow-600",gradient:"from-yellow-100 to-yellow-200"},default:{bg:"bg-gray-50",border:"border-gray-400",text:"text-gray-800",icon:"text-gray-600",gradient:"from-gray-100 to-gray-200"}},Mre=()=>{const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)("all"),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)("grid"),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[w,_]=(0,r.useState)("name"),[S,E]=(0,r.useState)("asc"),[j,k]=(0,r.useState)(null),{currentUser:C}=SS();(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"teachers"),n=await vg(e),r=new Set,s=[];n.docs.forEach((e=>{const t={id:e.id,...e.data()};s.push(t),t.department&&r.add(t.department)}));const a=hm(bS,"subjects"),c=await vg(a),u={};c.docs.forEach((e=>{const t={id:e.id,...e.data()},n=t.department||"Unassigned";u[n]||(u[n]=[]),u[n].push(t)})),t(u),i(s),o(["all",...Array.from(r)]),l(!1)}catch(dv){console.error("Error fetching subjects and teachers:",dv),SA().fire("Error","Could not fetch subjects and teachers","error"),l(!1)}})()}),[]);const T=(0,r.useMemo)((()=>{let t=[];return Object.values(e).forEach((e=>{t=[...t,...e]})),t=t.filter((e=>{var t,n;return("all"===d||(null===(t=e.department)||void 0===t?void 0:t.toLowerCase())===d.toLowerCase())&&(""===c||e.name.toLowerCase().includes(c.toLowerCase())||e.code.toLowerCase().includes(c.toLowerCase())||(null===(n=e.department)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase())))})),t.sort(((e,t)=>{let n=0;switch(w){case"name":n=e.name.localeCompare(t.name);break;case"code":n=e.code.localeCompare(t.code);break;case"credits":n=(e.credits||0)-(t.credits||0)}return"asc"===S?n:-n}))}),[e,d,c,w,S]),N=(0,r.useMemo)((()=>{const e={totalSubjects:T.length,byDepartment:{},averageCredits:0,totalCredits:0};return T.forEach((t=>{const n=t.department||"Unassigned";e.byDepartment[n]=(e.byDepartment[n]||0)+1,e.totalCredits+=t.credits||0})),e.averageCredits=e.totalCredits/(T.length||1),e}),[T]),I=e=>{const t=Pre[e.department]||Pre.default;return(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},whileHover:{scale:1.05},className:`\n          ${t.bg} ${t.border}\n          border rounded-lg p-4 shadow-md transition-all duration-300 \n          bg-gradient-to-br ${t.gradient}\n          flex flex-col justify-between\n        `,children:[(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,wS.jsx)("h4",{className:`\n              font-bold text-lg \n              ${t.text}\n            `,children:e.name}),(0,wS.jsx)(Ire,{className:`h-6 w-6 \n                ${t.icon}\n              `})]}),(0,wS.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,wS.jsxs)("p",{children:[(0,wS.jsx)("strong",{children:"Code:"})," ",e.code]}),(0,wS.jsxs)("p",{children:[(0,wS.jsx)("strong",{children:"Department:"})," ",e.department||"N/A"]}),(0,wS.jsxs)("p",{children:[(0,wS.jsx)("strong",{children:"Credits:"})," ",e.credits||"N/A"]})]})]}),(0,wS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(Ore,{className:"h-5 w-5 text-gray-500"}),(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:e.teacherName||"Unassigned"})]}),e.semester&&(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(tM,{className:"h-5 w-5 text-gray-500"}),(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:e.semester})]})]})]},e.id)},A=e=>(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center hover:shadow-md transition",children:[(0,wS.jsxs)("div",{className:"flex-1",children:[(0,wS.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,wS.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,wS.jsxs)("p",{children:[(0,wS.jsx)("strong",{children:"Code:"})," ",e.code]}),(0,wS.jsxs)("p",{children:[(0,wS.jsx)("strong",{children:"Department:"})," ",e.department||"N/A"]})]})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(Ore,{className:"h-5 w-5 text-gray-500"}),(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:e.teacherName||"Unassigned"})]}),(0,wS.jsx)(uP,{className:"h-6 w-6 text-primary-500"})]})]},e.id);return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto transition-all duration-300 "+(f?"ml-20":"ml-64"),children:(0,wS.jsxs)("div",{className:"container mx-auto p-6",children:[(0,wS.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Subject Management"}),(0,wS.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)(sre,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,wS.jsx)("input",{type:"text",placeholder:"Search subjects...",value:c,onChange:e=>u(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,wS.jsx)("select",{value:d,onChange:e=>h(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:s.map((e=>(0,wS.jsx)("option",{value:e,children:"all"===e?"All Departments":e},e)))}),(0,wS.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wS.jsxs)("select",{value:w,onChange:e=>_(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,wS.jsx)("option",{value:"name",children:"Sort by Name"}),(0,wS.jsx)("option",{value:"code",children:"Sort by Code"}),(0,wS.jsx)("option",{value:"credits",children:"Sort by Credits"})]}),(0,wS.jsx)("button",{onClick:()=>E((e=>"asc"===e?"desc":"asc")),className:"p-2 rounded-lg hover:bg-gray-100",children:"asc"===S?"\u2191":"\u2193"})]}),(0,wS.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wS.jsx)("button",{onClick:()=>g((e=>"grid"===e?"list":"grid")),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-600",children:"grid"===m?"List View":"Grid View"}),(0,wS.jsx)("button",{onClick:()=>x(!0),className:"p-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600",children:(0,wS.jsx)(uP,{className:"h-5 w-5"})}),"admin"===(null===C||void 0===C?void 0:C.role)&&(0,wS.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,wS.jsx)(fne,{className:"h-5 w-5"}),"Add Subject"]})]})]})]}),a?(0,wS.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,wS.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,wS.jsx)(OP,{children:(0,wS.jsx)("div",{className:`\n                ${"grid"===m?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"}\n              `,children:T.map((e=>(0,wS.jsx)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},whileHover:{scale:1.05},className:`\n                      ${"grid"===m?I(e):A(e)}\n                    `},e.id)))})}),0===T.length&&!a&&(0,wS.jsxs)(dA.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-64",children:[(0,wS.jsx)(Ire,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,wS.jsx)("p",{className:"text-xl text-gray-600",children:"No subjects found matching your criteria"})]})]})}),(0,wS.jsx)(OP,{children:b&&(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,wS.jsxs)(dA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl p-6 max-w-lg w-full",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Subject Statistics"}),(0,wS.jsx)("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,wS.jsx)(gP,{className:"h-6 w-6 text-gray-500"})})]}),(0,wS.jsxs)("div",{className:"space-y-6",children:[(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,wS.jsx)("p",{className:"text-sm text-indigo-600 mb-1",children:"Total Subjects"}),(0,wS.jsx)("p",{className:"text-2xl font-bold text-indigo-900",children:N.totalSubjects})]}),(0,wS.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,wS.jsx)("p",{className:"text-sm text-green-600 mb-1",children:"Average Credits"}),(0,wS.jsx)("p",{className:"text-2xl font-bold text-green-900",children:N.averageCredits.toFixed(1)})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Subjects by Department"}),(0,wS.jsx)("div",{className:"space-y-2",children:Object.entries(N.byDepartment).map((e=>{let[t,n]=e;return(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-gray-600",children:t}),(0,wS.jsx)("span",{className:"font-semibold text-gray-800",children:n})]},t)}))})]})]})]})},"stats-modal")}),(0,wS.jsx)(OP,{children:(y||j)&&(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},"add-edit-modal")})]})},Dre={"Computer Science":"bg-blue-100 text-blue-800",Mathematics:"bg-green-100 text-green-800",Physics:"bg-purple-100 text-purple-800",Biology:"bg-teal-100 text-teal-800",Chemistry:"bg-red-100 text-red-800",default:"bg-gray-100 text-gray-800"},Rre=()=>{const{currentUser:e}=SS(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)("all"),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"});(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"subjects"),t=(await vg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=hm(bS,"teachers"),i=await vg(r),o=Array.from(new Set(i.docs.map((e=>e.data().department)).filter(Boolean)));n(t),s(o)}catch(dv){console.error("Error fetching data:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to fetch subjects and departments. Please try again."})}})()}),[]);const p=(0,r.useMemo)((()=>"all"===o?t:t.filter((e=>e.department===o))),[t,o]);return e&&"admin"===e.role?(0,wS.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:"flex-1 transition-all duration-300 "+(u?"ml-20":"ml-64"),children:(0,wS.jsx)("div",{className:"p-8",children:(0,wS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Subject Management"}),(0,wS.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage subjects across different departments"})]}),(0,wS.jsxs)(dA.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{f({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"}),c(!0)},className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors flex items-center",children:[(0,wS.jsx)(fne,{className:"h-5 w-5 mr-2"}),"Add New Subject"]})]}),(0,wS.jsx)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white p-4 rounded-xl shadow",children:[(0,wS.jsxs)("div",{className:"flex items-center mb-4",children:[(0,wS.jsx)(KM,{className:"h-5 w-5 mr-2 text-gray-500"}),(0,wS.jsx)("h3",{className:"text-lg font-semibold",children:"Filter by Department"})]}),(0,wS.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:o,onChange:e=>a(e.target.value),children:[(0,wS.jsx)("option",{value:"all",children:"All Departments"}),i.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]})]})}),(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map((e=>(0,wS.jsxs)(dA.div,{whileHover:{scale:1.05},className:`\n                    bg-white rounded-xl shadow-lg p-6 \n                    border-l-4 ${Dre[e.department]||Dre.default}\n                  `,children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,wS.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,wS.jsxs)("div",{className:"flex space-x-2",children:[(0,wS.jsx)(dA.button,{whileHover:{scale:1.1},onClick:()=>{f(e),c(!0)},className:"text-indigo-600 hover:text-indigo-800",children:(0,wS.jsx)(dre,{className:"h-5 w-5"})}),(0,wS.jsx)(dA.button,{whileHover:{scale:1.1},onClick:()=>(async e=>{if((await SA().fire({title:"Are you sure?",text:"Do you want to delete this subject?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await wg(fm(bS,"subjects",e)),n((t=>t.filter((t=>t.id!==e)))),SA().fire({icon:"success",title:"Deleted!",text:"Subject has been deleted.",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}catch(dv){console.error("Error deleting subject:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to delete subject. Please try again."})}})(e.id),className:"text-red-600 hover:text-red-800",children:(0,wS.jsx)(dne,{className:"h-5 w-5"})})]})]}),(0,wS.jsxs)("div",{className:"space-y-2",children:[(0,wS.jsx)("p",{className:"text-gray-600 mb-2",children:e.details||"No details provided"}),e.code&&(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Code:"}),(0,wS.jsx)("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.code})]}),void 0!==e.credits&&(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Credits:"}),(0,wS.jsx)("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.credits})]}),e.prerequisites&&e.prerequisites.length>0&&(0,wS.jsxs)("div",{children:[(0,wS.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Prerequisites:"}),(0,wS.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.prerequisites.map(((e,t)=>(0,wS.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e},t)))})]}),e.learningObjectives&&e.learningObjectives.length>0&&(0,wS.jsxs)("div",{children:[(0,wS.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Learning Objectives:"}),(0,wS.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 mt-1",children:e.learningObjectives.map(((e,t)=>(0,wS.jsx)("li",{children:e},t)))})]}),(0,wS.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,wS.jsx)("span",{className:`\n                        px-2 py-1 rounded-full text-xs font-medium\n                        ${"active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}\n                      `,children:e.status}),(0,wS.jsx)("span",{className:"text-sm text-gray-500",children:e.department})]})]})]},e.id)))}),(0,wS.jsx)(mne,{isOpen:l,onClose:()=>c(!1),title:h.id?"Edit Subject":"New Subject",children:(0,wS.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=hm(bS,"subjects");if(h.id){const e=fm(bS,"subjects",h.id),{id:t,...r}=h;await xg(e,r),n((e=>e.map((e=>e.id===h.id?{...h}:e))))}else{const{id:t,...r}=h,i=await _g(e,r);n((e=>[...e,{...h,id:i.id}]))}f({name:"",department:"",details:"",code:"",credits:0,prerequisites:[],learningObjectives:[],status:"active"}),c(!1),SA().fire({icon:"success",title:"Success",text:h.id?"Subject updated successfully":"Subject added successfully",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}catch(dv){console.error("Error saving subject:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to save subject. Please try again."})}},className:"space-y-4 p-6",children:[(0,wS.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Name"}),(0,wS.jsx)("input",{type:"text",required:!0,className:"w-full p-2 border rounded-lg",value:h.name,onChange:e=>f({...h,name:e.target.value})})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Department"}),(0,wS.jsxs)("select",{required:!0,className:"w-full p-2 border rounded-lg",value:h.department,onChange:e=>f({...h,department:e.target.value}),children:[(0,wS.jsx)("option",{value:"",children:"Select Department"}),i.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Code"}),(0,wS.jsx)("input",{type:"text",className:"w-full p-2 border rounded-lg",value:h.code,onChange:e=>f({...h,code:e.target.value})})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Credits"}),(0,wS.jsx)("input",{type:"number",className:"w-full p-2 border rounded-lg",value:h.credits,onChange:e=>f({...h,credits:parseInt(e.target.value)})})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Subject Details"}),(0,wS.jsx)("textarea",{className:"w-full p-2 border rounded-lg",value:h.details,onChange:e=>f({...h,details:e.target.value})})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,wS.jsxs)("select",{className:"w-full p-2 border rounded-lg",value:h.status,onChange:e=>f({...h,status:e.target.value}),children:[(0,wS.jsx)("option",{value:"active",children:"Active"}),(0,wS.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,wS.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,wS.jsx)("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),(0,wS.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:h.id?"Update Subject":"Create Subject"})]})]})})]})})})]}):(0,wS.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,wS.jsxs)("div",{className:"text-center",children:[(0,wS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Access Denied"}),(0,wS.jsx)("p",{className:"mt-2 text-gray-600",children:"You don't have permission to view this page."})]})})},Lre=()=>{const e=te(),{currentUser:t}=SS(),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(new Date),f=(0,r.useMemo)((()=>d),[d]);(0,r.useEffect)((()=>{const e=setInterval((()=>{h(new Date)}),1e3);return()=>clearInterval(e)}),[]),(0,r.useEffect)((()=>{(async()=>{if(t)try{const e=Zm(hm(bS,"sections"),eg("instructorId","==",t.uid)),n=await vg(e);if(!n.empty){const e=n.docs[0],t={id:e.id,...e.data()};l(t);const r=Zm(hm(bS,"users"),eg("id","in",t.students)),i=(await vg(r)).docs.map((e=>({id:e.id,...e.data()})));o(i)}}catch(dv){console.error("Error fetching sections and students:",dv)}finally{u(!1)}})()}),[t]);const p=(e,t)=>{o(s.map((n=>n.id===e?{...n,attendanceStatus:t}:n)))};return c?(0,wS.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,wS.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,wS.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("main",{className:"container mx-auto px-6 py-8",children:(0,wS.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,wS.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:["Take Attendance - ",(null===a||void 0===a?void 0:a.name)||"Section"]}),(0,wS.jsx)("div",{className:"text-sm text-gray-600",children:f.toLocaleString()})]}),(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e=>(0,wS.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 flex items-center justify-between",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,wS.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]}),(0,wS.jsxs)("div",{className:"flex space-x-2",children:[(0,wS.jsx)("button",{onClick:()=>p(e.id,"present"),className:`\n                        p-2 rounded-full \n                        ${"present"===e.attendanceStatus?"bg-green-500 text-white":"bg-green-100 text-green-600 hover:bg-green-200"}\n                      `,children:(0,wS.jsx)(eP,{className:"w-6 h-6"})}),(0,wS.jsx)("button",{onClick:()=>p(e.id,"late"),className:`\n                        p-2 rounded-full \n                        ${"late"===e.attendanceStatus?"bg-yellow-500 text-white":"bg-yellow-100 text-yellow-600 hover:bg-yellow-200"}\n                      `,children:(0,wS.jsx)(tM,{className:"w-6 h-6"})}),(0,wS.jsx)("button",{onClick:()=>p(e.id,"absent"),className:`\n                        p-2 rounded-full \n                        ${"absent"===e.attendanceStatus?"bg-red-500 text-white":"bg-red-100 text-red-600 hover:bg-red-200"}\n                      `,children:(0,wS.jsx)(nP,{className:"w-6 h-6"})})]})]},e.id)))}),(0,wS.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,wS.jsxs)("div",{className:"text-sm text-gray-600",children:["Total Students: ",s.length,(0,wS.jsxs)("span",{className:"ml-4",children:["Present: ",s.filter((e=>"present"===e.attendanceStatus)).length]}),(0,wS.jsxs)("span",{className:"ml-4",children:["Late: ",s.filter((e=>"late"===e.attendanceStatus)).length]}),(0,wS.jsxs)("span",{className:"ml-4",children:["Absent: ",s.filter((e=>"absent"===e.attendanceStatus)).length]})]}),(0,wS.jsx)("button",{onClick:async()=>{if(a)try{const t=s.map((e=>({studentId:e.id,studentName:e.name,sectionId:a.id,sectionName:a.name,status:e.attendanceStatus||"absent",timestamp:ba.now(),date:(new Date).toISOString().split("T")[0]}))),n=hm(bS,"attendanceRecords"),r=t.map((e=>_g(n,e)));await Promise.all(r),alert("Attendance submitted successfully!"),e("/dashboard")}catch(dv){console.error("Error submitting attendance:",dv),alert("Failed to submit attendance. Please try again.")}},className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition",children:"Submit Attendance"})]})]})})]})};function Fre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{d:"M4.5 3.75a3 3 0 0 0-3 3v.75h21v-.75a3 3 0 0 0-3-3h-15Z"}),r.createElement("path",{fillRule:"evenodd",d:"M22.5 9.75h-21v7.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-7.5Zm-18 3.75a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z",clipRule:"evenodd"}))}const Bre=r.forwardRef(Fre),Ure=()=>{const[e,t]=(0,r.useState)({role:"student",fullName:"",idNumber:"",email:"",mobileNumber:"",department:"",major:"",yearLevel:"",yearsOfExperience:"",password:"",confirmPassword:"",sections:[],schedule:{days:[],startTime:"",endTime:""},section:"",subject:"",selectedSchedule:null,rfidUid:""}),[n,i]=(0,r.useState)({subjects:[],sections:[],departments:[],courses:[]}),[s,o]=(0,r.useState)({fullName:!1,idNumber:!1,email:!1,mobileNumber:!1,department:!1,yearsOfExperience:!1,password:!1,confirmPassword:!1,yearLevel:!1,role:!1,major:!1,sections:!1,scheduleDays:!1,scheduleTime:!1,section:!1,subject:!1,rfidUid:!1}),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)({hasUpper:!1,hasLower:!1,hasNumber:!1,hasMinLength:!1,hasSpecial:!1}),[m,g]=(0,r.useState)(1),[y,v]=(0,r.useState)(0),[b,x]=(0,r.useState)([]),[w,_]=(0,r.useState)([]),[S,E]=(0,r.useState)({fullName:!1,email:!1,password:!1,confirmPassword:!1,mobileNumber:!1,department:!1,yearLevel:!1,role:!1,major:!1,sections:!1,scheduleDays:!1,scheduleTime:!1,section:!1,subject:!1,rfidUid:!1}),[j,k]=(0,r.useState)(!1),C=te(),T=[{id:1,title:"Account Type",description:"Choose your role"},{id:2,title:"Personal Info",description:"Basic information"},{id:3,title:"Department",description:"Academic details"},{id:4,title:"Security",description:"Set up password"}];(0,r.useEffect)((()=>{(()=>{const e=m/T.length*100;v(e)})()}),[m]),(0,r.useEffect)((()=>{(()=>{const e=Sg(hm(bS,"students"),(e=>{const t=new Set;e.forEach((e=>{const n=e.data().section;n&&t.add(n)})),i((e=>({...e,sections:Array.from(t).sort()})))})),t=["Computer Science","Information Technology","Electrical Engineering","Computer Engineering","Civil Engineering","Industrial Engineering","Mechanical Engineering","Chemical Engineering"];i((e=>({...e,departments:t,courses:t})))})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=hm(bS,"subjects"),t=(await vg(e)).docs.map((e=>({id:e.id,...e.data()})));x(t.filter((e=>"active"===e.status)))}catch(dv){console.error("Error fetching subjects:",dv)}})()}),[]),(0,r.useEffect)((()=>((()=>{const t={hasUpper:/[A-Z]/.test(e.password),hasLower:/[a-z]/.test(e.password),hasNumber:/\d/.test(e.password),hasMinLength:e.password.length>=8,hasSpecial:/[^A-Za-z0-9]/.test(e.password)};p(t)})(),()=>{})),[e.password]),(0,r.useEffect)((()=>{const e=iS(xS,"/NewRFIDTag");return dS(e,(e=>{const n=e.val();n&&t((e=>({...e,rfidUid:n})))})),()=>{!function(e,t,n){let r=null;const i=n?new eS(n):null;"value"===t?r=new lS(i):t&&(r=new cS(t,i)),R_(e._repo,e,r)}(e)}}),[]),(0,r.useEffect)((()=>{e.rfidUid&&(async e=>{if(j)alert("This UID has already been registered.");else{const t=iS(gS(),"/RegisteredUIDs/"+e);(await aS(t)).exists()?alert("This UID is already registered."):(await oS(t,{registered:!0}),k(!0),alert("UID registered successfully!"))}})(e.rfidUid)}),[e.rfidUid,j]);const N=()=>{m<T.length&&g((e=>e+1))},I=(e,n)=>{t((t=>({...t,[e]:"idNumber"===e||"mobileNumber"===e?n.replace(/\D/g,""):n})))},A=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4?arguments[4]:void 0;return(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:n}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:r,value:e[t],onChange:e=>I(t,e.target.value),onFocus:()=>o({...s,[t]:!0}),onBlur:()=>o({...s,[t]:!1}),className:"\n            w-full px-4 py-3 rounded-xl\n            bg-white/10 border border-white/20\n            text-white placeholder-white/50\n            focus:outline-none focus:ring-2 focus:ring-white/30\n            transition-all duration-200\n          ",placeholder:i,required:!0}),a&&(0,wS.jsx)("div",{className:"absolute right-3 top-3 text-white/50",children:a})]})]})},O=(t,n,r)=>(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-white/90 text-sm font-medium mb-2",children:n}),(0,wS.jsx)("select",{value:e[t],onChange:e=>I(t,e.target.value),className:"\n          w-full px-4 py-3 rounded-xl\n          bg-white/10 border border-white/20\n          text-white\n          focus:outline-none focus:ring-2 focus:ring-white/30\n          transition-all duration-200\n        ",required:!0,children:r.map((e=>(0,wS.jsx)("option",{value:e.value,className:"bg-gray-800",children:e.label},e.value)))})]});return(0,wS.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 py-12 px-4",children:[(0,wS.jsx)("div",{className:"absolute inset-0 bg-pattern opacity-10"}),(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-2xl bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl relative overflow-hidden",children:[(0,wS.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-white/5 pointer-events-none"}),(0,wS.jsxs)("div",{className:"relative p-8",children:[(0,wS.jsxs)("div",{className:"text-center mb-8",children:[(0,wS.jsx)(dA.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"w-16 h-16 bg-white rounded-2xl shadow-lg mx-auto mb-4 flex items-center justify-center",children:(0,wS.jsx)(fA,{className:"w-8 h-8 text-indigo-600"})}),(0,wS.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),(0,wS.jsx)("p",{className:"text-white/80",children:"Join our community today"})]}),(0,wS.jsxs)("div",{className:"mb-8",children:[(0,wS.jsx)("div",{className:"flex justify-between mb-2",children:T.map((e=>(0,wS.jsx)("div",{className:"text-sm "+(m>=e.id?"text-white":"text-white/50"),children:e.title},e.id)))}),(0,wS.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,wS.jsx)(dA.div,{className:"h-full bg-white",initial:{width:0},animate:{width:`${y}%`},transition:{duration:.3}})})]}),(0,wS.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l(!0),e.password!==e.confirmPassword)return SA().fire({icon:"error",title:"Passwords do not match",text:"Please ensure your passwords are the same."}),void l(!1);try{const t=(await ls(vS,e.email,e.password)).user,n={uid:t.uid,fullName:e.fullName,idNumber:e.idNumber,email:e.email,mobileNumber:e.mobileNumber,role:e.role,createdAt:(new Date).toISOString(),rfidUid:e.rfidUid};"student"===e.role?(n.department=e.department,n.major=e.major,n.yearLevel=e.yearLevel,n.section=e.section):"instructor"===e.role&&(n.department=e.department,n.yearsOfExperience=e.yearsOfExperience,n.subject=e.subject);const r=fm(bS,e.role+"s",t.uid);if(await bg(r,n),e.rfidUid){const n=fm(bS,"UIDs",e.rfidUid);await bg(n,{uid:t.uid,role:e.role,fullName:e.fullName})}SA().fire({icon:"success",title:"Registration Successful!",text:"Your account has been created."}),C("/login")}catch(dv){console.error("Registration Error:",dv),SA().fire({icon:"error",title:"Registration Failed",text:dv.message||"An error occurred during registration."})}finally{l(!1)}},className:"space-y-6",children:[(()=>{switch(m){case 1:return(0,wS.jsxs)("div",{className:"space-y-6",children:[(0,wS.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Choose Your Role"}),(0,wS.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["student","instructor"].map((n=>(0,wS.jsx)(dA.button,{type:"button",onClick:()=>{t({...e,role:n}),N()},whileHover:{scale:1.02},whileTap:{scale:.98},className:`\n                    p-6 rounded-xl text-center transition-all duration-200\n                    ${e.role===n?"bg-white text-indigo-600 shadow-lg":"bg-white/10 text-white hover:bg-white/20"}\n                  `,children:(0,wS.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:["student"===n?(0,wS.jsx)(EO,{className:"w-8 h-8"}):(0,wS.jsx)(GM,{className:"w-8 h-8"}),(0,wS.jsx)("span",{className:"text-lg font-medium",children:n.charAt(0).toUpperCase()+n.slice(1)}),(0,wS.jsx)("p",{className:"text-sm opacity-80",children:"student"===n?"Access your courses and track your progress":"Manage your classes and student records"})]})},n)))})]});case 2:return(0,wS.jsxs)("div",{className:"space-y-6",children:[(0,wS.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Personal Information"}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,wS.jsxs)("div",{className:"space-y-2",children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-white/90",children:"RFID Card"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)("input",{type:"text",name:"rfidUid",value:e.rfidUid,readOnly:!0,className:`\n                      w-full px-4 py-3 pl-12\n                      bg-white/10 border border-white/20 rounded-xl\n                      text-white placeholder-white/50\n                      focus:outline-none focus:ring-2 focus:ring-white/30\n                      transition-all duration-200\n                      ${e.rfidUid?"border-green-400":"border-white/20"}\n                    `,placeholder:"Tap your RFID card..."}),(0,wS.jsx)(Bre,{className:`\n                      absolute left-3 top-3.5 w-5 h-5\n                      transition-colors duration-200\n                      ${e.rfidUid?"text-green-400":"text-white/50"}\n                    `}),e.rfidUid&&(0,wS.jsxs)("div",{className:"absolute right-3 top-3.5 flex items-center space-x-1",children:[(0,wS.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,wS.jsx)("span",{className:"text-sm text-green-400",children:"Card detected"})]})]}),(0,wS.jsx)("p",{className:"text-sm text-white/60 mt-1",children:"Place your RFID card near the reader"})]}),A("fullName","Full Name","text","Enter your full name"),A("idNumber","ID Number","text","Enter your ID number"),A("email","Email","email","Enter your email"),A("mobileNumber","Mobile Number","tel","Enter your mobile number")]})]});case 3:return(0,wS.jsxs)("div",{className:"space-y-6",children:[(0,wS.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Academic Details"}),(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O("department","Department",n.departments.map((e=>({value:e,label:e})))),"student"===e.role&&(0,wS.jsxs)(wS.Fragment,{children:[O("yearLevel","Year Level",[{value:"1st Year",label:"1st Year"},{value:"2nd Year",label:"2nd Year"},{value:"3rd Year",label:"3rd Year"},{value:"4th Year",label:"4th Year"}]),O("section","Section",[{value:"",label:"Select a section"},{value:"H1",label:"Section H1"},{value:"H2",label:"Section H2"},{value:"H3",label:"Section H3"},{value:"G1",label:"Section G1"},{value:"G2",label:"Section G2"},{value:"G3",label:"Section G3"}]),e.subject&&w.length>0&&(0,wS.jsxs)("div",{className:"space-y-2",children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Available Schedules"}),(0,wS.jsx)("div",{className:"space-y-2",children:w.map(((n,r)=>(0,wS.jsxs)("div",{onClick:()=>t((e=>({...e,selectedSchedule:n,schedule:{days:[n.day],startTime:n.startTime,endTime:n.endTime},section:n.section}))),className:"cursor-pointer p-3 rounded-lg border "+(e.selectedSchedule===n?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-indigo-300"),children:[(0,wS.jsx)("p",{className:"font-medium",children:n.day}),(0,wS.jsxs)("p",{className:"text-sm text-gray-600",children:[n.startTime," - ",n.endTime]}),(0,wS.jsxs)("p",{className:"text-sm text-gray-600",children:["Section: ",n.section]})]},r)))})]}),O("major","Major",n.courses.map((e=>({value:e,label:e}))))]}),"instructor"===e.role&&A("yearsOfExperience","Years of Experience","number","Years of teaching experience")]})]});case 4:return(0,wS.jsxs)("div",{className:"space-y-6",children:[(0,wS.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Set Your Password"}),(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("div",{className:"relative",children:A("password","Password",c?"text":"password","Enter your password",(0,wS.jsx)("button",{type:"button",onClick:()=>u(!c),className:"absolute right-2 top-[38px] hover:text-white/80 transition-colors",children:c?(0,wS.jsx)(mA,{className:"absolute right-1 bottom-[12px] w-6 h-6"}):(0,wS.jsx)(yA,{className:"absolute right-1 bottom-[12px] w-6 h-6"})}))}),(0,wS.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(wA,{className:"w-4 h-4 "+(f.hasMinLength?"text-green-400":"text-gray-400")}),(0,wS.jsx)("span",{className:"text-sm "+(f.hasMinLength?"text-green-400":"text-gray-300"),children:"At least 8 characters"})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(wA,{className:"w-4 h-4 "+(f.hasUpper?"text-green-400":"text-gray-400")}),(0,wS.jsx)("span",{className:"text-sm "+(f.hasUpper?"text-green-400":"text-gray-300"),children:"One uppercase letter"})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(wA,{className:"w-4 h-4 "+(f.hasLower?"text-green-400":"text-gray-400")}),(0,wS.jsx)("span",{className:"text-sm "+(f.hasLower?"text-green-400":"text-gray-300"),children:"One lowercase letter"})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(wA,{className:"w-4 h-4 "+(f.hasNumber?"text-green-400":"text-gray-400")}),(0,wS.jsx)("span",{className:"text-sm "+(f.hasNumber?"text-green-400":"text-gray-300"),children:"One number"})]}),(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)(wA,{className:"w-4 h-4 "+(f.hasSpecial?"text-green-400":"text-gray-400")}),(0,wS.jsx)("span",{className:"text-sm "+(f.hasSpecial?"text-green-400":"text-gray-300"),children:"One special character"})]})]})]}),(0,wS.jsxs)("div",{className:"relative",children:[A("confirmPassword","Confirm Password",d?"text":"password","Confirm your password",(0,wS.jsx)("button",{type:"button",onClick:()=>h(!d),className:"absolute right-2 top-[38px] hover:text-white/80 transition-colors",children:d?(0,wS.jsx)(mA,{className:"absolute right-1 bottom-[12px]  w-6 h-6"}):(0,wS.jsx)(yA,{className:"absolute right-1 bottom-[12px]  w-6 h-6"})})),e.confirmPassword&&(0,wS.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,wS.jsx)(wA,{className:"w-4 h-4 "+(e.password===e.confirmPassword?"text-green-400":"text-red-400")}),(0,wS.jsx)("span",{className:"text-sm "+(e.password===e.confirmPassword?"text-green-400":"text-red-400"),children:e.password===e.confirmPassword?"Passwords match":"Passwords do not match"})]})]})]})]})}})(),(0,wS.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t border-white/10",children:[m>1&&(0,wS.jsx)("button",{type:"button",onClick:()=>{m>1&&g((e=>e-1))},className:"px-6 py-3 rounded-xl bg-white/10 text-white hover:bg-white/20 transition-colors",children:"Back"}),m<T.length?(0,wS.jsx)("button",{type:"button",onClick:N,className:"px-6 py-3 rounded-xl bg-white text-indigo-600 hover:bg-indigo-50 transition-colors ml-auto",children:"Continue"}):(0,wS.jsx)("button",{type:"submit",disabled:a,className:`\n                    px-6 py-3 rounded-xl bg-white text-indigo-600\n                    hover:bg-indigo-50 transition-colors ml-auto\n                    flex items-center space-x-2\n                    ${a?"opacity-80 cursor-not-allowed":""}\n                  `,children:a?(0,wS.jsxs)(wS.Fragment,{children:[(0,wS.jsx)(bA,{className:"w-5 h-5 animate-spin"}),(0,wS.jsx)("span",{children:"Creating Account..."})]}):(0,wS.jsxs)(wS.Fragment,{children:[(0,wS.jsx)("span",{children:"Complete Registration"}),(0,wS.jsx)(wA,{className:"w-5 h-5"})]})})]})]}),(0,wS.jsxs)("p",{className:"text-center text-white/80 mt-6",children:["Already have an account?"," ",(0,wS.jsx)(Te,{to:"/login",className:"text-white font-medium hover:underline",children:"Sign in"})]})]})]})]})};function Vre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const zre=r.forwardRef(Vre);function $re(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Hre=r.forwardRef($re);function Wre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const qre=r.forwardRef(Wre),Kre=e=>{let{isOpen:t,onClose:n,onSubmit:i}=e;const[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)({name:"",code:"",instructorId:"",schedule:{days:[],startTime:"",endTime:""}});(0,r.useEffect)((()=>{y()}),[]);const y=async()=>{try{const e=await vg(hm(bS,"teachers")),t=await Promise.all(e.docs.map((async e=>{const t=e.data(),n=t.schedules||[];return{id:e.id,...t,schedules:n.map((e=>({id:e.id||"",days:Array.isArray(e.days)?e.days:[],startTime:e.startTime||"",endTime:e.endTime||"",sectionCode:e.sectionCode||"",subject:e.subject||"",room:e.room||"",status:e.status||"active",semester:e.semester||"",academicYear:e.academicYear||""})))}})));o(t);const n=(await vg(hm(bS,"students"))).docs.map((e=>({id:e.id,...e.data()})));l(n)}catch(dv){console.error("Error fetching data:",dv)}};(0,r.useEffect)((()=>{if(m.instructorId){const e=s.find((e=>e.id===m.instructorId));h((null===e||void 0===e?void 0:e.schedules)||[])}else h([])}),[m.instructorId,s]),(0,r.useEffect)((()=>{var e;m.schedule.days.length&&m.schedule.startTime&&m.schedule.endTime&&p((e=m.schedule,d.some((t=>{if(!t.days||!e.days)return!1;if(!e.days.some((e=>{var n;return null===(n=t.days)||void 0===n?void 0:n.includes(e)})))return!1;const n=new Date(`2000/01/01 ${e.startTime}`),r=new Date(`2000/01/01 ${e.endTime}`),i=new Date(`2000/01/01 ${t.startTime||"00:00"}`),s=new Date(`2000/01/01 ${t.endTime||"23:59"}`);return n>=i&&n<s||r>i&&r<=s||n<=i&&r>=s}))))}),[m.schedule,d]);return t?(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,wS.jsxs)(dA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,wS.jsx)("h2",{className:mre.h3,children:"Add New Section"}),(0,wS.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,wS.jsx)(fre,{className:"w-6 h-6"})})]}),(0,wS.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...m,studentIds:c})},className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Name"}),(0,wS.jsx)("input",{type:"text",value:m.name,onChange:e=>g({...m,name:e.target.value}),className:pre.input,required:!0})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Code"}),(0,wS.jsx)("input",{type:"text",value:m.code,onChange:e=>g({...m,code:e.target.value}),className:pre.input,required:!0})]})]}),(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Instructor"}),(0,wS.jsxs)("select",{value:m.instructorId,onChange:e=>g({...m,instructorId:e.target.value}),className:pre.input,required:!0,children:[(0,wS.jsx)("option",{value:"",children:"Select an instructor"}),s.map((e=>(0,wS.jsxs)("option",{value:e.id,children:[e.fullName," - ",e.department]},e.id)))]})]}),m.instructorId&&(0,wS.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,wS.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,wS.jsx)("h4",{className:"font-medium text-gray-900",children:"Current Teaching Load"})}),d.length>0?(0,wS.jsx)("div",{className:"divide-y divide-gray-200",children:d.map(((e,t)=>(0,wS.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,wS.jsx)("div",{className:"flex items-start justify-between",children:(0,wS.jsxs)("div",{className:"space-y-1",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("h5",{className:"font-medium text-gray-900",children:e.subject||"Untitled Subject"}),(0,wS.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.status||"active"})]}),(0,wS.jsxs)("p",{className:"text-sm text-gray-600",children:["Section: ",e.sectionCode||"No Code"]}),(0,wS.jsxs)("div",{className:"flex items-center text-sm text-gray-500 space-x-3",children:[(0,wS.jsxs)("span",{className:"flex items-center",children:[(0,wS.jsx)(gO,{className:"w-4 h-4 mr-1"}),e.startTime&&e.endTime?`${e.startTime} - ${e.endTime}`:"No time set"]}),(0,wS.jsxs)("span",{className:"flex items-center",children:[(0,wS.jsx)(vO,{className:"w-4 h-4 mr-1"}),Array.isArray(e.days)&&e.days.length>0?e.days.join(", "):"No days set"]}),e.room&&(0,wS.jsxs)("span",{className:"flex items-center",children:[(0,wS.jsx)(FP,{className:"w-4 h-4 mr-1"}),e.room]})]}),(0,wS.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:[e.semester,e.academicYear].filter(Boolean).join(" | ")||"No term info"})]})})},t)))}):(0,wS.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No current teaching schedules"})]})]}),(0,wS.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,wS.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,wS.jsx)("h4",{className:"font-medium text-gray-900",children:"Schedule Details"})}),(0,wS.jsxs)("div",{className:"p-4",children:[(0,wS.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Days"}),(0,wS.jsx)("select",{multiple:!0,value:m.schedule.days,onChange:e=>g({...m,schedule:{...m.schedule,days:Array.from(e.target.selectedOptions,(e=>e.value))}}),className:`${pre.input} h-32`,children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),(0,wS.jsx)("input",{type:"time",value:m.schedule.startTime,onChange:e=>g({...m,schedule:{...m.schedule,startTime:e.target.value}}),className:pre.input,required:!0})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),(0,wS.jsx)("input",{type:"time",value:m.schedule.endTime,onChange:e=>g({...m,schedule:{...m.schedule,endTime:e.target.value}}),className:pre.input,required:!0})]})]}),f&&(0,wS.jsxs)("div",{className:"mt-4 flex items-center p-3 bg-red-50 text-red-700 rounded-lg",children:[(0,wS.jsx)(qre,{className:"w-5 h-5 mr-2"}),(0,wS.jsx)("span",{className:"text-sm",children:"This schedule conflicts with the instructor's existing schedule"})]})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Students"}),(0,wS.jsx)("div",{className:"border rounded-lg max-h-48 overflow-y-auto p-2",children:a.map((e=>(0,wS.jsxs)("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,wS.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>{return t=e.id,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mr-3"}),(0,wS.jsxs)("span",{children:[e.fullName," - ",e.idNumber]})]},e.id)))})]}),(0,wS.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[(0,wS.jsx)("button",{type:"button",onClick:n,className:pre.button.secondary,children:"Cancel"}),(0,wS.jsx)("button",{type:"submit",className:pre.button.primary,children:"Create Section"})]})]})]})}):null};function Yre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Gre=r.forwardRef(Yre),Xre=e=>{let{isOpen:t,onClose:n,onSubmit:i,currentStudentIds:s,sectionName:o}=e;const[a,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!0),[m,g]=(0,r.useState)("all"),y=[...new Set(a.map((e=>e.major)))].sort();(0,r.useEffect)((()=>{t&&v()}),[t]);const v=async()=>{try{p(!0);const e=Zm(hm(bS,"students"),eg("role","==","student"),eg("section","in",[null,""])),t=(await vg(e)).docs.map((e=>{const t=e.data();return{id:e.id,fullName:t.fullName||"",email:t.email||"",idNumber:t.idNumber||"",major:t.major||"",mobileNumber:t.mobileNumber||"",role:t.role||"student",schedule:t.schedule||{days:[],endTime:"",startTime:""},section:t.section||null,sections:t.sections||[],yearLevel:t.yearLevel||"",createdAt:t.createdAt||""}})),n=t.sort(((e,t)=>e.fullName.localeCompare(t.fullName)));l(n),p(!1)}catch(dv){console.error("Error fetching students:",dv),p(!1)}},b=a.filter((e=>{var t;return!s.includes(e.id)&&(e.fullName.toLowerCase().includes(d.toLowerCase())||e.idNumber.toLowerCase().includes(d.toLowerCase())||e.major.toLowerCase().includes(d.toLowerCase())||e.email.toLowerCase().includes(d.toLowerCase())||(null===(t=e.yearLevel)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase())))})).filter((e=>"all"===m||e.major===m));return t?(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,wS.jsxs)(dA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h2",{className:mre.h3,children:"Add Students"}),(0,wS.jsxs)("p",{className:"text-sm text-gray-600",children:["to ",o]})]}),(0,wS.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,wS.jsx)(fre,{className:"w-6 h-6"})})]}),(0,wS.jsxs)("div",{className:"p-6",children:[(0,wS.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,wS.jsxs)("div",{className:"flex-1",children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Program"}),(0,wS.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:pre.input,children:[(0,wS.jsx)("option",{value:"all",children:"All Programs"}),y.map((e=>(0,wS.jsx)("option",{value:e,children:e},e)))]})]}),(0,wS.jsxs)("div",{className:"flex-1",children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Students"}),(0,wS.jsxs)("div",{className:"relative",children:[(0,wS.jsx)(Gre,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,wS.jsx)("input",{type:"text",placeholder:"Search by name, ID, course...",value:d,onChange:e=>h(e.target.value),className:`${pre.input} pl-10`})]})]})]}),(0,wS.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,wS.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:f?(0,wS.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}):b.length>0?(0,wS.jsx)("div",{className:"divide-y divide-gray-200",children:b.map((e=>(0,wS.jsxs)("label",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer",children:[(0,wS.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>{return t=e.id,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"mr-4 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),(0,wS.jsxs)("div",{className:"flex-1",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("h4",{className:"font-medium text-gray-900",children:e.fullName}),(0,wS.jsx)("span",{className:"text-sm text-gray-500",children:e.yearLevel})]}),(0,wS.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[(0,wS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("span",{className:"font-medium",children:e.idNumber}),(0,wS.jsx)("span",{children:"\u2022"}),(0,wS.jsx)("span",{children:e.major})]}),(0,wS.jsx)("div",{className:"text-xs text-gray-400 mt-0.5",children:e.email})]})]})]},e.id)))}):(0,wS.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No available students found"})})})]}),(0,wS.jsxs)("div",{className:"flex justify-end space-x-4 p-6 border-t",children:[(0,wS.jsx)("button",{type:"button",onClick:n,className:pre.button.secondary,children:"Cancel"}),(0,wS.jsx)("button",{onClick:e=>{e.preventDefault(),i(c)},disabled:0===c.length,className:`${pre.button.primary} ${0===c.length?"opacity-50 cursor-not-allowed":""}`,children:"Add Selected Students"})]})]})}):null},Qre=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null);(0,r.useEffect)((()=>{m()}),[]);const m=async()=>{try{const e=(await vg(hm(bS,"sections"))).docs.map((e=>({id:e.id,...e.data()})));t(e);const n=(await vg(hm(bS,"teachers"))).docs.map((e=>({id:e.id,...e.data()})));i(n);const r=(await vg(hm(bS,"students"))).docs.map((e=>({id:e.id,...e.data()})));o(r),l(!1)}catch(dv){console.error("Error fetching data:",dv),l(!1)}};return(0,wS.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,wS.jsx)(KP,{}),(0,wS.jsx)("div",{className:"transition-all duration-300 ml-[80px] lg:ml-64 py-8",children:(0,wS.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,wS.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Section Management"}),(0,wS.jsxs)("button",{onClick:()=>u(!0),className:pre.button.primary,children:[(0,wS.jsx)(zre,{className:"w-5 h-5 mr-2"}),"Add Section"]})]}),(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t=>{var r,i,o,a,l,c,u;return(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:t.name}),(0,wS.jsxs)("p",{className:"text-sm text-gray-500",children:["Code: ",t.code]})]}),(0,wS.jsx)("div",{className:"bg-indigo-100 p-2 rounded-lg",children:(0,wS.jsx)(RP,{className:"w-6 h-6 text-indigo-600"})})]}),(0,wS.jsxs)("div",{className:"mb-4",children:[(0,wS.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Instructor"}),(0,wS.jsxs)("div",{className:"flex items-center bg-gray-50 p-3 rounded-lg",children:[(0,wS.jsx)(QO,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,wS.jsx)("span",{className:"text-sm text-gray-900",children:(null===(r=n.find((e=>e.id===t.instructorId)))||void 0===r?void 0:r.fullName)||"Not assigned"})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,wS.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Students (",(null===(i=t.studentIds)||void 0===i?void 0:i.length)||0,")"]}),(0,wS.jsx)("button",{onClick:()=>{p(t),h(!0)},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Add Student"})]}),(0,wS.jsx)("div",{className:"space-y-2",children:null===(o=t.studentIds)||void 0===o?void 0:o.map((n=>{const r=s.find((e=>e.id===n));return(0,wS.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-lg",children:[(0,wS.jsx)("span",{className:"text-sm text-gray-900",children:null===r||void 0===r?void 0:r.fullName}),(0,wS.jsx)("button",{onClick:()=>{SA().fire({title:"Remove Student",text:`Are you sure you want to remove ${null===r||void 0===r?void 0:r.fullName} from this section?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Yes, remove",cancelButtonText:"Cancel"}).then((r=>{r.isConfirmed&&(async(t,n)=>{try{const r=fm(bS,"sections",t),i=e.find((e=>e.id===t));if(i){await xg(r,{studentIds:i.studentIds.filter((e=>e!==n))});const e=fm(bS,"students",n);await xg(e,{section:null}),SA().fire({icon:"success",title:"Student Removed",showConfirmButton:!1,timer:1500}),m()}}catch(dv){console.error("Error removing student:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to remove student"})}})(t.id,n)}))},className:"text-red-500 hover:text-red-700 transition-colors",children:(0,wS.jsx)(Hre,{className:"w-4 h-4"})})]},n)}))})]}),(0,wS.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,wS.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Schedule"}),(0,wS.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(a=t.schedule)||void 0===a||null===(l=a.days)||void 0===l?void 0:l.join(", "))||"No days set"," ",(0,wS.jsx)("br",{}),null!==(c=t.schedule)&&void 0!==c&&c.startTime&&null!==(u=t.schedule)&&void 0!==u&&u.endTime?`${t.schedule.startTime} - ${t.schedule.endTime}`:"No time set"]})]})]},t.id)}))})]})}),(0,wS.jsx)(Kre,{isOpen:c,onClose:()=>u(!1),onSubmit:async e=>{try{if("existing"===e.type){var t;const n=fm(bS,"teachers",e.instructorId),r=await gg(n),i=((null===(t=r.data())||void 0===t?void 0:t.schedules)||[]).map((t=>t.id===e.existingScheduleId?{...t,sections:[...t.sections||[],{code:e.code,name:e.name,days:e.schedule.days,startTime:e.schedule.startTime,endTime:e.schedule.endTime,room:e.schedule.room,studentIds:e.studentIds}]}:t));await xg(n,{schedules:i})}else await _g(hm(bS,"sections"),{...e,createdAt:(new Date).toISOString()});u(!1),m(),SA().fire({icon:"success",title:"Section Added Successfully",showConfirmButton:!1,timer:1500})}catch(dv){console.error("Error adding section:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to add section"})}}}),(0,wS.jsx)(Xre,{isOpen:d,onClose:()=>{h(!1),p(null)},onSubmit:async e=>{try{if(!f)return;const t=fm(bS,"sections",f.id);await xg(t,{studentIds:[...f.studentIds,...e]});for(const n of e){const e=fm(bS,"students",n);await xg(e,{section:f.code})}h(!1),m(),SA().fire({icon:"success",title:"Students Added Successfully",showConfirmButton:!1,timer:1500})}catch(dv){console.error("Error adding students:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to add students"})}},currentStudentIds:(null===f||void 0===f?void 0:f.studentIds)||[],sectionName:(null===f||void 0===f?void 0:f.name)||""})]})};function Zre(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const Jre=r.forwardRef(Zre);function eie(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const tie=r.forwardRef(eie);function nie(e,t){let{title:n,titleId:i,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},s),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const rie=r.forwardRef(nie),iie=e=>{let{children:t,title:n,subtitle:r,icon:i,actions:s}=e;return(0,wS.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-blue-50 via-purple-50/30 to-rose-50/30",children:[(0,wS.jsx)(KP,{}),(0,wS.jsxs)("div",{className:"flex-1 transition-all duration-300 ml-[80px] lg:ml-64 p-8 overflow-y-auto",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("h1",{className:"text-2xl font-bold text-blue-900 flex items-center",children:[i&&(0,wS.jsx)("div",{className:"w-8 h-8 mr-3 text-blue-600",children:i}),n]}),r&&(0,wS.jsx)("p",{className:"mt-1 text-blue-600/80",children:r})]}),s&&(0,wS.jsx)("div",{className:"flex items-center space-x-4",children:s})]}),(0,wS.jsx)("div",{className:"space-y-6",children:t})]})]})},sie=e=>{let{isOpen:t,onClose:n,onSubmit:i}=e;const[s,o]=(0,r.useState)({name:"",building:"",floor:"",capacity:0,type:"classroom",status:"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1},energyStatus:{lights:!1,aircon:!1,computers:!1}});return t?(0,wS.jsx)(dA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,wS.jsxs)(dA.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden",children:[(0,wS.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,wS.jsx)("h2",{className:mre.h3,children:"Add New Room"}),(0,wS.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,wS.jsx)(fre,{className:"w-6 h-6"})})]}),(0,wS.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(s),o({name:"",building:"",floor:"",capacity:0,type:"classroom",status:"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1},energyStatus:{lights:!1,aircon:!1,computers:!1}})},className:"p-6 space-y-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Name/Number"}),(0,wS.jsx)("input",{type:"text",value:s.name,onChange:e=>o({...s,name:e.target.value}),className:pre.input,required:!0,placeholder:"e.g., Room 101"})]}),(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Building"}),(0,wS.jsx)("input",{type:"text",value:s.building,onChange:e=>o({...s,building:e.target.value}),className:pre.input,required:!0,placeholder:"e.g., Main Building"})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Floor"}),(0,wS.jsx)("input",{type:"text",value:s.floor,onChange:e=>o({...s,floor:e.target.value}),className:pre.input,required:!0,placeholder:"e.g., 1st Floor"})]})]}),(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Type"}),(0,wS.jsxs)("select",{value:s.type,onChange:e=>o({...s,type:e.target.value}),className:pre.input,required:!0,children:[(0,wS.jsx)("option",{value:"classroom",children:"Classroom"}),(0,wS.jsx)("option",{value:"laboratory",children:"Laboratory"}),(0,wS.jsx)("option",{value:"lecture_hall",children:"Lecture Hall"}),(0,wS.jsx)("option",{value:"conference_room",children:"Conference Room"})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),(0,wS.jsx)("input",{type:"number",min:"1",value:s.capacity,onChange:e=>o({...s,capacity:parseInt(e.target.value)}),className:pre.input,required:!0,placeholder:"e.g., 30"})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,wS.jsxs)("select",{value:s.status,onChange:e=>o({...s,status:e.target.value}),className:pre.input,required:!0,children:[(0,wS.jsx)("option",{value:"available",children:"Available"}),(0,wS.jsx)("option",{value:"occupied",children:"Occupied"}),(0,wS.jsx)("option",{value:"maintenance",children:"Under Maintenance"})]})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facilities"}),(0,wS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wS.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("input",{type:"checkbox",checked:s.facilities.hasProjector,onChange:e=>o({...s,facilities:{...s.facilities,hasProjector:e.target.checked}}),className:"rounded text-indigo-600"}),(0,wS.jsx)("span",{className:"text-sm text-gray-700",children:"Projector"})]}),(0,wS.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("input",{type:"checkbox",checked:s.facilities.hasAC,onChange:e=>o({...s,facilities:{...s.facilities,hasAC:e.target.checked}}),className:"rounded text-indigo-600"}),(0,wS.jsx)("span",{className:"text-sm text-gray-700",children:"Air Conditioning"})]}),(0,wS.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("input",{type:"checkbox",checked:s.facilities.hasComputers,onChange:e=>o({...s,facilities:{...s.facilities,hasComputers:e.target.checked}}),className:"rounded text-indigo-600"}),(0,wS.jsx)("span",{className:"text-sm text-gray-700",children:"Computers"})]}),(0,wS.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,wS.jsx)("input",{type:"checkbox",checked:s.facilities.hasWifi,onChange:e=>o({...s,facilities:{...s.facilities,hasWifi:e.target.checked}}),className:"rounded text-indigo-600"}),(0,wS.jsx)("span",{className:"text-sm text-gray-700",children:"WiFi"})]})]})]}),(0,wS.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,wS.jsx)("button",{type:"button",onClick:n,className:pre.button.secondary,children:"Cancel"}),(0,wS.jsx)("button",{type:"submit",className:pre.button.primary,children:"Add Room"})]})]})]})}):null},oie=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{m()}),[]);const m=async()=>{try{const e=(await vg(hm(bS,"rooms"))).docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"",building:t.building||"",floor:t.floor||"",capacity:t.capacity||0,type:t.type||"classroom",status:t.status||"available",facilities:{hasProjector:!1,hasAC:!1,hasComputers:!1,hasWifi:!1,...t.facilities||{}},energyStatus:{lights:!1,aircon:!1,computers:!1,...t.energyStatus||{}}}}));t(e),i(!1)}catch(dv){console.error("Error fetching rooms:",dv),SA().fire("Error","Failed to fetch rooms","error"),i(!1)}},g=async(n,r)=>{try{const i=e.find((e=>e.id===n));if(!i)return;const s={...i.energyStatus,[r]:!i.energyStatus[r]};await xg(fm(bS,"rooms",n),{energyStatus:s}),t((e=>e.map((e=>e.id===n?{...e,energyStatus:s}:e)))),SA().fire({icon:"success",title:`${r} ${s[r]?"turned on":"turned off"}`,showConfirmButton:!1,timer:1500})}catch(dv){console.error("Error updating facility status:",dv),SA().fire("Error","Failed to update facility status","error")}},y=e.filter((e=>{var t,n,r,i;const s="all"===c||(null===e||void 0===e?void 0:e.status)===c,o=""===d||null!==(t=null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(d.toLowerCase()))&&void 0!==t&&t||null!==(r=null===e||void 0===e||null===(i=e.building)||void 0===i?void 0:i.toLowerCase().includes(d.toLowerCase()))&&void 0!==r&&r;return s&&o}));return(0,wS.jsxs)(iie,{title:"Room Management",subtitle:"Manage and monitor classroom facilities",icon:(0,wS.jsx)(FP,{}),actions:(0,wS.jsxs)("button",{onClick:()=>p(!0),className:pre.button.primary,children:[(0,wS.jsx)(zre,{className:"w-5 h-5 mr-2"}),"Add Room"]}),children:[(0,wS.jsx)("div",{className:pre.card,children:(0,wS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-teal-700 mb-2",children:"Search Rooms"}),(0,wS.jsx)("input",{type:"text",placeholder:"Search by room number, name...",value:d,onChange:e=>h(e.target.value),className:pre.input})]}),(0,wS.jsxs)("div",{children:[(0,wS.jsx)("label",{className:"block text-sm font-medium text-teal-700 mb-2",children:"Filter by Status"}),(0,wS.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:pre.input,children:[(0,wS.jsx)("option",{value:"all",children:"All Status"}),(0,wS.jsx)("option",{value:"available",children:"Available"}),(0,wS.jsx)("option",{value:"occupied",children:"Occupied"}),(0,wS.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]})]})}),(0,wS.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((e=>(0,wS.jsxs)(dA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:pre.card,children:[(0,wS.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,wS.jsxs)("div",{children:[(0,wS.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Room ",e.name]}),(0,wS.jsx)("p",{className:"text-sm text-gray-500",children:e.name})]}),(0,wS.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("available"===e.status?"bg-green-100 text-green-800":"occupied"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,wS.jsxs)("div",{className:"space-y-4",children:[(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:"Building"}),(0,wS.jsx)("span",{className:"text-sm font-medium",children:e.building})]}),(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:"Floor"}),(0,wS.jsx)("span",{className:"text-sm font-medium",children:e.floor})]}),(0,wS.jsxs)("div",{className:"flex items-center justify-between",children:[(0,wS.jsx)("span",{className:"text-sm text-gray-600",children:"Capacity"}),(0,wS.jsxs)("span",{className:"text-sm font-medium",children:[e.capacity," seats"]})]})]}),(0,wS.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,wS.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Facilities Control"}),(0,wS.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,wS.jsxs)("button",{onClick:()=>g(e.id,"lights"),className:"flex flex-col items-center p-3 rounded-lg "+(e.energyStatus.lights?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"),children:[(0,wS.jsx)(Jre,{className:"w-6 h-6 mb-1"}),(0,wS.jsx)("span",{className:"text-xs",children:"Lights"})]}),(0,wS.jsxs)("button",{onClick:()=>g(e.id,"aircon"),className:"flex flex-col items-center p-3 rounded-lg "+(e.energyStatus.aircon?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:[(0,wS.jsx)(tie,{className:"w-6 h-6 mb-1"}),(0,wS.jsx)("span",{className:"text-xs",children:"AC"})]}),(0,wS.jsxs)("button",{onClick:()=>g(e.id,"computers"),className:"flex flex-col items-center p-3 rounded-lg "+(e.energyStatus.computers?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:[(0,wS.jsx)(rie,{className:"w-6 h-6 mb-1"}),(0,wS.jsx)("span",{className:"text-xs",children:"PCs"})]})]})]})]},e.id)))}),(0,wS.jsx)(sie,{isOpen:f,onClose:()=>p(!1),onSubmit:async e=>{try{await _g(hm(bS,"rooms"),{...e,energyStatus:{lights:!1,aircon:!1,computers:!1},createdAt:(new Date).toISOString()}),p(!1),m(),SA().fire({icon:"success",title:"Room Added Successfully",showConfirmButton:!1,timer:1500})}catch(dv){console.error("Error adding room:",dv),SA().fire({icon:"error",title:"Error",text:"Failed to add room"})}}})]})},aie=()=>(0,wS.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,wS.jsxs)("div",{className:"text-center",children:[(0,wS.jsx)("h1",{className:"text-4xl font-bold text-indigo-600 mb-4",children:"404"}),(0,wS.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Page not found"}),(0,wS.jsx)(Te,{to:"/",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Go back home"})]})}),lie=()=>(0,wS.jsx)(je,{children:(0,wS.jsx)(ES,{children:(0,wS.jsxs)(be,{children:[(0,wS.jsx)(ye,{path:"/login",element:(0,wS.jsx)(EA,{})}),(0,wS.jsx)(ye,{path:"/reset-password",element:(0,wS.jsx)(jP,{})}),(0,wS.jsx)(ye,{path:"/adminregistration",element:(0,wS.jsx)(UM,{})}),(0,wS.jsx)(ye,{path:"/rfid-registration",element:(0,wS.jsx)(Ure,{})}),(0,wS.jsx)(ye,{path:"/admin/dashboard",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(FM,{})})}),(0,wS.jsx)(ye,{path:"/admin/users",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(pne,{})})}),(0,wS.jsx)(ye,{path:"/admin/reports",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(cne,{})})}),(0,wS.jsx)(ye,{path:"/admin/security-logs",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(XM,{})})}),(0,wS.jsx)(ye,{path:"/admin/settings",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(_re,{})})}),(0,wS.jsx)(ye,{path:"/admin/teachers",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(rre,{})})}),(0,wS.jsx)(ye,{path:"/admin/students",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(yre,{})})}),(0,wS.jsx)(ye,{path:"/admin/energyusage",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(BV,{})})}),(0,wS.jsx)(ye,{path:"/admin/schedules",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(Tre,{})})}),(0,wS.jsx)(ye,{path:"/admin/subjects",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(Rre,{})})}),(0,wS.jsx)(ye,{path:"/admin/sections",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(Qre,{})})}),(0,wS.jsx)(ye,{path:"/admin/rooms",element:(0,wS.jsx)(BM,{roles:["admin"],children:(0,wS.jsx)(oie,{})})}),(0,wS.jsx)(ye,{path:"/instructor/dashboard",element:(0,wS.jsx)(BM,{roles:["instructor"],children:(0,wS.jsx)(_P,{})})}),(0,wS.jsx)(ye,{path:"/instructor/attendance",element:(0,wS.jsx)(BM,{roles:["instructor"],children:(0,wS.jsx)($M,{instructorfullName:""})})}),(0,wS.jsx)(ye,{path:"/instructor/subjects",element:(0,wS.jsx)(BM,{roles:["instructor"],children:(0,wS.jsx)(Mre,{})})}),(0,wS.jsx)(ye,{path:"/instructor/schedules",element:(0,wS.jsx)(BM,{roles:["instructor"],children:(0,wS.jsx)(Ere,{})})}),(0,wS.jsx)(ye,{path:"/instructor/classes",element:(0,wS.jsx)(BM,{roles:["instructor"],children:(0,wS.jsx)(Sre,{})})}),(0,wS.jsx)(ye,{path:"/instructor/settings",element:(0,wS.jsx)(BM,{roles:["instructor"],children:(0,wS.jsx)(_re,{})})}),(0,wS.jsx)(ye,{path:"/instructor/take-attendance",element:(0,wS.jsx)(BM,{roles:["instructor"],children:(0,wS.jsx)(Lre,{})})}),(0,wS.jsx)(ye,{path:"/students/dashboard",element:(0,wS.jsx)(BM,{roles:["student"],children:(0,wS.jsx)(one,{})})}),(0,wS.jsx)(ye,{path:"/students/attendance",element:(0,wS.jsx)(BM,{roles:["student"],children:(0,wS.jsx)($M,{instructorfullName:""})})}),(0,wS.jsx)(ye,{path:"/",element:(0,wS.jsx)(ge,{to:"/login",replace:!0})}),(0,wS.jsx)(ye,{path:"*",element:(0,wS.jsx)(aie,{})})]})})});s.createRoot(document.getElementById("root")).render((0,wS.jsx)(r.StrictMode,{children:(0,wS.jsx)(lie,{})}))})()})();
//# sourceMappingURL=main.337bf73b.js.map